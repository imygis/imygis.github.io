!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var r=t();for(var n in r)("object"==typeof exports?exports:e)[n]=r[n]}}(this,(()=>(()=>{var e={7:function(e,t){var r;/*! jQuery v3.2.1 | (c) JS Foundation and other contributors | jquery.org/license */!function(t,r){"use strict";"object"==typeof e.exports?e.exports=t.document?r(t,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return r(e)}:r(t)}("undefined"!=typeof window?window:this,(function(n,i){"use strict";var a=[],o=n.document,s=Object.getPrototypeOf,l=a.slice,u=a.concat,c=a.push,h=a.indexOf,d={},f=d.toString,p=d.hasOwnProperty,m=p.toString,g=m.call(Object),v={};function y(e,t){var r=(t=t||o).createElement("script");r.text=e,t.head.appendChild(r).parentNode.removeChild(r)}var b="3.2.1",E=function(e,t){return new E.fn.init(e,t)},x=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,w=/^-ms-/,T=/-([a-z])/g,_=function(e,t){return t.toUpperCase()};function S(e){var t=!!e&&"length"in e&&e.length,r=E.type(e);return"function"!==r&&!E.isWindow(e)&&("array"===r||0===t||"number"==typeof t&&t>0&&t-1 in e)}E.fn=E.prototype={jquery:b,constructor:E,length:0,toArray:function(){return l.call(this)},get:function(e){return null==e?l.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=E.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return E.each(this,e)},map:function(e){return this.pushStack(E.map(this,(function(t,r){return e.call(t,r,t)})))},slice:function(){return this.pushStack(l.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,r=+e+(e<0?t:0);return this.pushStack(r>=0&&r<t?[this[r]]:[])},end:function(){return this.prevObject||this.constructor()},push:c,sort:a.sort,splice:a.splice},E.extend=E.fn.extend=function(){var e,t,r,n,i,a,o=arguments[0]||{},s=1,l=arguments.length,u=!1;for("boolean"==typeof o&&(u=o,o=arguments[s]||{},s++),"object"==typeof o||E.isFunction(o)||(o={}),s===l&&(o=this,s--);s<l;s++)if(null!=(e=arguments[s]))for(t in e)r=o[t],o!==(n=e[t])&&(u&&n&&(E.isPlainObject(n)||(i=Array.isArray(n)))?(i?(i=!1,a=r&&Array.isArray(r)?r:[]):a=r&&E.isPlainObject(r)?r:{},o[t]=E.extend(u,a,n)):void 0!==n&&(o[t]=n));return o},E.extend({expando:"jQuery"+(b+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isFunction:function(e){return"function"===E.type(e)},isWindow:function(e){return null!=e&&e===e.window},isNumeric:function(e){var t=E.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))},isPlainObject:function(e){var t,r;return!(!e||"[object Object]"!==f.call(e)||(t=s(e))&&(r=p.call(t,"constructor")&&t.constructor,"function"!=typeof r||m.call(r)!==g))},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?d[f.call(e)]||"object":typeof e},globalEval:function(e){y(e)},camelCase:function(e){return e.replace(w,"ms-").replace(T,_)},each:function(e,t){var r,n=0;if(S(e))for(r=e.length;n<r&&!1!==t.call(e[n],n,e[n]);n++);else for(n in e)if(!1===t.call(e[n],n,e[n]))break;return e},trim:function(e){return null==e?"":(e+"").replace(x,"")},makeArray:function(e,t){var r=t||[];return null!=e&&(S(Object(e))?E.merge(r,"string"==typeof e?[e]:e):c.call(r,e)),r},inArray:function(e,t,r){return null==t?-1:h.call(t,e,r)},merge:function(e,t){for(var r=+t.length,n=0,i=e.length;n<r;n++)e[i++]=t[n];return e.length=i,e},grep:function(e,t,r){for(var n=[],i=0,a=e.length,o=!r;i<a;i++)!t(e[i],i)!==o&&n.push(e[i]);return n},map:function(e,t,r){var n,i,a=0,o=[];if(S(e))for(n=e.length;a<n;a++)null!=(i=t(e[a],a,r))&&o.push(i);else for(a in e)null!=(i=t(e[a],a,r))&&o.push(i);return u.apply([],o)},guid:1,proxy:function(e,t){var r,n,i;if("string"==typeof t&&(r=e[t],t=e,e=r),E.isFunction(e))return n=l.call(arguments,2),i=function(){return e.apply(t||this,n.concat(l.call(arguments)))},i.guid=e.guid=e.guid||E.guid++,i},now:Date.now,support:v}),"function"==typeof Symbol&&(E.fn[Symbol.iterator]=a[Symbol.iterator]),E.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),(function(e,t){d["[object "+t+"]"]=t.toLowerCase()}));var M=function(e){var t,r,n,i,a,o,s,l,u,c,h,d,f,p,m,g,v,y,b,E="sizzle"+1*new Date,x=e.document,w=0,T=0,_=oe(),S=oe(),M=oe(),R=function(e,t){return e===t&&(h=!0),0},A={}.hasOwnProperty,C=[],L=C.pop,O=C.push,I=C.push,P=C.slice,H=function(e,t){for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1},k="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",N="[\\x20\\t\\r\\n\\f]",U="(?:\\\\.|[\\w-]|[^\0-\\xa0])+",D="\\["+N+"*("+U+")(?:"+N+"*([*^$|!~]?=)"+N+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+U+"))|)"+N+"*\\]",F=":("+U+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+D+")*)|.*)\\)|)",B=new RegExp(N+"+","g"),z=new RegExp("^"+N+"+|((?:^|[^\\\\])(?:\\\\.)*)"+N+"+$","g"),j=new RegExp("^"+N+"*,"+N+"*"),V=new RegExp("^"+N+"*([>+~]|"+N+")"+N+"*"),G=new RegExp("="+N+"*([^\\]'\"]*?)"+N+"*\\]","g"),W=new RegExp(F),q=new RegExp("^"+U+"$"),X={ID:new RegExp("^#("+U+")"),CLASS:new RegExp("^\\.("+U+")"),TAG:new RegExp("^("+U+"|[*])"),ATTR:new RegExp("^"+D),PSEUDO:new RegExp("^"+F),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+N+"*(even|odd|(([+-]|)(\\d*)n|)"+N+"*(?:([+-]|)"+N+"*(\\d+)|))"+N+"*\\)|)","i"),bool:new RegExp("^(?:"+k+")$","i"),needsContext:new RegExp("^"+N+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+N+"*((?:-\\d)?\\d*)"+N+"*\\)|)(?=[^-]|$)","i")},Y=/^(?:input|select|textarea|button)$/i,Z=/^h\d$/i,K=/^[^{]+\{\s*\[native \w/,Q=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,J=/[+~]/,$=new RegExp("\\\\([\\da-f]{1,6}"+N+"?|("+N+")|.)","ig"),ee=function(e,t,r){var n="0x"+t-65536;return n!=n||r?t:n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320)},te=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,re=function(e,t){return t?"\0"===e?"ï¿½":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e},ne=function(){d()},ie=ye((function(e){return!0===e.disabled&&("form"in e||"label"in e)}),{dir:"parentNode",next:"legend"});try{I.apply(C=P.call(x.childNodes),x.childNodes),C[x.childNodes.length].nodeType}catch(e){I={apply:C.length?function(e,t){O.apply(e,P.call(t))}:function(e,t){for(var r=e.length,n=0;e[r++]=t[n++];);e.length=r-1}}}function ae(e,t,n,i){var a,s,u,c,h,p,v,y=t&&t.ownerDocument,w=t?t.nodeType:9;if(n=n||[],"string"!=typeof e||!e||1!==w&&9!==w&&11!==w)return n;if(!i&&((t?t.ownerDocument||t:x)!==f&&d(t),t=t||f,m)){if(11!==w&&(h=Q.exec(e)))if(a=h[1]){if(9===w){if(!(u=t.getElementById(a)))return n;if(u.id===a)return n.push(u),n}else if(y&&(u=y.getElementById(a))&&b(t,u)&&u.id===a)return n.push(u),n}else{if(h[2])return I.apply(n,t.getElementsByTagName(e)),n;if((a=h[3])&&r.getElementsByClassName&&t.getElementsByClassName)return I.apply(n,t.getElementsByClassName(a)),n}if(r.qsa&&!M[e+" "]&&(!g||!g.test(e))){if(1!==w)y=t,v=e;else if("object"!==t.nodeName.toLowerCase()){for((c=t.getAttribute("id"))?c=c.replace(te,re):t.setAttribute("id",c=E),s=(p=o(e)).length;s--;)p[s]="#"+c+" "+ve(p[s]);v=p.join(","),y=J.test(e)&&me(t.parentNode)||t}if(v)try{return I.apply(n,y.querySelectorAll(v)),n}catch(e){}finally{c===E&&t.removeAttribute("id")}}}return l(e.replace(z,"$1"),t,n,i)}function oe(){var e=[];return function t(r,i){return e.push(r+" ")>n.cacheLength&&delete t[e.shift()],t[r+" "]=i}}function se(e){return e[E]=!0,e}function le(e){var t=f.createElement("fieldset");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function ue(e,t){for(var r=e.split("|"),i=r.length;i--;)n.attrHandle[r[i]]=t}function ce(e,t){var r=t&&e,n=r&&1===e.nodeType&&1===t.nodeType&&e.sourceIndex-t.sourceIndex;if(n)return n;if(r)for(;r=r.nextSibling;)if(r===t)return-1;return e?1:-1}function he(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}function de(e){return function(t){var r=t.nodeName.toLowerCase();return("input"===r||"button"===r)&&t.type===e}}function fe(e){return function(t){return"form"in t?t.parentNode&&!1===t.disabled?"label"in t?"label"in t.parentNode?t.parentNode.disabled===e:t.disabled===e:t.isDisabled===e||t.isDisabled!==!e&&ie(t)===e:t.disabled===e:"label"in t&&t.disabled===e}}function pe(e){return se((function(t){return t=+t,se((function(r,n){for(var i,a=e([],r.length,t),o=a.length;o--;)r[i=a[o]]&&(r[i]=!(n[i]=r[i]))}))}))}function me(e){return e&&void 0!==e.getElementsByTagName&&e}for(t in r=ae.support={},a=ae.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return!!t&&"HTML"!==t.nodeName},d=ae.setDocument=function(e){var t,i,o=e?e.ownerDocument||e:x;return o!==f&&9===o.nodeType&&o.documentElement?(p=(f=o).documentElement,m=!a(f),x!==f&&(i=f.defaultView)&&i.top!==i&&(i.addEventListener?i.addEventListener("unload",ne,!1):i.attachEvent&&i.attachEvent("onunload",ne)),r.attributes=le((function(e){return e.className="i",!e.getAttribute("className")})),r.getElementsByTagName=le((function(e){return e.appendChild(f.createComment("")),!e.getElementsByTagName("*").length})),r.getElementsByClassName=K.test(f.getElementsByClassName),r.getById=le((function(e){return p.appendChild(e).id=E,!f.getElementsByName||!f.getElementsByName(E).length})),r.getById?(n.filter.ID=function(e){var t=e.replace($,ee);return function(e){return e.getAttribute("id")===t}},n.find.ID=function(e,t){if(void 0!==t.getElementById&&m){var r=t.getElementById(e);return r?[r]:[]}}):(n.filter.ID=function(e){var t=e.replace($,ee);return function(e){var r=void 0!==e.getAttributeNode&&e.getAttributeNode("id");return r&&r.value===t}},n.find.ID=function(e,t){if(void 0!==t.getElementById&&m){var r,n,i,a=t.getElementById(e);if(a){if((r=a.getAttributeNode("id"))&&r.value===e)return[a];for(i=t.getElementsByName(e),n=0;a=i[n++];)if((r=a.getAttributeNode("id"))&&r.value===e)return[a]}return[]}}),n.find.TAG=r.getElementsByTagName?function(e,t){return void 0!==t.getElementsByTagName?t.getElementsByTagName(e):r.qsa?t.querySelectorAll(e):void 0}:function(e,t){var r,n=[],i=0,a=t.getElementsByTagName(e);if("*"===e){for(;r=a[i++];)1===r.nodeType&&n.push(r);return n}return a},n.find.CLASS=r.getElementsByClassName&&function(e,t){if(void 0!==t.getElementsByClassName&&m)return t.getElementsByClassName(e)},v=[],g=[],(r.qsa=K.test(f.querySelectorAll))&&(le((function(e){p.appendChild(e).innerHTML="<a id='"+E+"'></a><select id='"+E+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&g.push("[*^$]="+N+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||g.push("\\["+N+"*(?:value|"+k+")"),e.querySelectorAll("[id~="+E+"-]").length||g.push("~="),e.querySelectorAll(":checked").length||g.push(":checked"),e.querySelectorAll("a#"+E+"+*").length||g.push(".#.+[+~]")})),le((function(e){e.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var t=f.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&g.push("name"+N+"*[*^$|!~]?="),2!==e.querySelectorAll(":enabled").length&&g.push(":enabled",":disabled"),p.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&g.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),g.push(",.*:")}))),(r.matchesSelector=K.test(y=p.matches||p.webkitMatchesSelector||p.mozMatchesSelector||p.oMatchesSelector||p.msMatchesSelector))&&le((function(e){r.disconnectedMatch=y.call(e,"*"),y.call(e,"[s!='']:x"),v.push("!=",F)})),g=g.length&&new RegExp(g.join("|")),v=v.length&&new RegExp(v.join("|")),t=K.test(p.compareDocumentPosition),b=t||K.test(p.contains)?function(e,t){var r=9===e.nodeType?e.documentElement:e,n=t&&t.parentNode;return e===n||!(!n||1!==n.nodeType||!(r.contains?r.contains(n):e.compareDocumentPosition&&16&e.compareDocumentPosition(n)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},R=t?function(e,t){if(e===t)return h=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n||(1&(n=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!r.sortDetached&&t.compareDocumentPosition(e)===n?e===f||e.ownerDocument===x&&b(x,e)?-1:t===f||t.ownerDocument===x&&b(x,t)?1:c?H(c,e)-H(c,t):0:4&n?-1:1)}:function(e,t){if(e===t)return h=!0,0;var r,n=0,i=e.parentNode,a=t.parentNode,o=[e],s=[t];if(!i||!a)return e===f?-1:t===f?1:i?-1:a?1:c?H(c,e)-H(c,t):0;if(i===a)return ce(e,t);for(r=e;r=r.parentNode;)o.unshift(r);for(r=t;r=r.parentNode;)s.unshift(r);for(;o[n]===s[n];)n++;return n?ce(o[n],s[n]):o[n]===x?-1:s[n]===x?1:0},f):f},ae.matches=function(e,t){return ae(e,null,null,t)},ae.matchesSelector=function(e,t){if((e.ownerDocument||e)!==f&&d(e),t=t.replace(G,"='$1']"),r.matchesSelector&&m&&!M[t+" "]&&(!v||!v.test(t))&&(!g||!g.test(t)))try{var n=y.call(e,t);if(n||r.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(e){}return ae(t,f,null,[e]).length>0},ae.contains=function(e,t){return(e.ownerDocument||e)!==f&&d(e),b(e,t)},ae.attr=function(e,t){(e.ownerDocument||e)!==f&&d(e);var i=n.attrHandle[t.toLowerCase()],a=i&&A.call(n.attrHandle,t.toLowerCase())?i(e,t,!m):void 0;return void 0!==a?a:r.attributes||!m?e.getAttribute(t):(a=e.getAttributeNode(t))&&a.specified?a.value:null},ae.escape=function(e){return(e+"").replace(te,re)},ae.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},ae.uniqueSort=function(e){var t,n=[],i=0,a=0;if(h=!r.detectDuplicates,c=!r.sortStable&&e.slice(0),e.sort(R),h){for(;t=e[a++];)t===e[a]&&(i=n.push(a));for(;i--;)e.splice(n[i],1)}return c=null,e},i=ae.getText=function(e){var t,r="",n=0,a=e.nodeType;if(a){if(1===a||9===a||11===a){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)r+=i(e)}else if(3===a||4===a)return e.nodeValue}else for(;t=e[n++];)r+=i(t);return r},n=ae.selectors={cacheLength:50,createPseudo:se,match:X,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace($,ee),e[3]=(e[3]||e[4]||e[5]||"").replace($,ee),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||ae.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&ae.error(e[0]),e},PSEUDO:function(e){var t,r=!e[6]&&e[2];return X.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":r&&W.test(r)&&(t=o(r,!0))&&(t=r.indexOf(")",r.length-t)-r.length)&&(e[0]=e[0].slice(0,t),e[2]=r.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace($,ee).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=_[e+" "];return t||(t=new RegExp("(^|"+N+")"+e+"("+N+"|$)"))&&_(e,(function(e){return t.test("string"==typeof e.className&&e.className||void 0!==e.getAttribute&&e.getAttribute("class")||"")}))},ATTR:function(e,t,r){return function(n){var i=ae.attr(n,e);return null==i?"!="===t:!t||(i+="","="===t?i===r:"!="===t?i!==r:"^="===t?r&&0===i.indexOf(r):"*="===t?r&&i.indexOf(r)>-1:"$="===t?r&&i.slice(-r.length)===r:"~="===t?(" "+i.replace(B," ")+" ").indexOf(r)>-1:"|="===t&&(i===r||i.slice(0,r.length+1)===r+"-"))}},CHILD:function(e,t,r,n,i){var a="nth"!==e.slice(0,3),o="last"!==e.slice(-4),s="of-type"===t;return 1===n&&0===i?function(e){return!!e.parentNode}:function(t,r,l){var u,c,h,d,f,p,m=a!==o?"nextSibling":"previousSibling",g=t.parentNode,v=s&&t.nodeName.toLowerCase(),y=!l&&!s,b=!1;if(g){if(a){for(;m;){for(d=t;d=d[m];)if(s?d.nodeName.toLowerCase()===v:1===d.nodeType)return!1;p=m="only"===e&&!p&&"nextSibling"}return!0}if(p=[o?g.firstChild:g.lastChild],o&&y){for(b=(f=(u=(c=(h=(d=g)[E]||(d[E]={}))[d.uniqueID]||(h[d.uniqueID]={}))[e]||[])[0]===w&&u[1])&&u[2],d=f&&g.childNodes[f];d=++f&&d&&d[m]||(b=f=0)||p.pop();)if(1===d.nodeType&&++b&&d===t){c[e]=[w,f,b];break}}else if(y&&(b=f=(u=(c=(h=(d=t)[E]||(d[E]={}))[d.uniqueID]||(h[d.uniqueID]={}))[e]||[])[0]===w&&u[1]),!1===b)for(;(d=++f&&d&&d[m]||(b=f=0)||p.pop())&&((s?d.nodeName.toLowerCase()!==v:1!==d.nodeType)||!++b||(y&&((c=(h=d[E]||(d[E]={}))[d.uniqueID]||(h[d.uniqueID]={}))[e]=[w,b]),d!==t)););return(b-=i)===n||b%n==0&&b/n>=0}}},PSEUDO:function(e,t){var r,i=n.pseudos[e]||n.setFilters[e.toLowerCase()]||ae.error("unsupported pseudo: "+e);return i[E]?i(t):i.length>1?(r=[e,e,"",t],n.setFilters.hasOwnProperty(e.toLowerCase())?se((function(e,r){for(var n,a=i(e,t),o=a.length;o--;)e[n=H(e,a[o])]=!(r[n]=a[o])})):function(e){return i(e,0,r)}):i}},pseudos:{not:se((function(e){var t=[],r=[],n=s(e.replace(z,"$1"));return n[E]?se((function(e,t,r,i){for(var a,o=n(e,null,i,[]),s=e.length;s--;)(a=o[s])&&(e[s]=!(t[s]=a))})):function(e,i,a){return t[0]=e,n(t,null,a,r),t[0]=null,!r.pop()}})),has:se((function(e){return function(t){return ae(e,t).length>0}})),contains:se((function(e){return e=e.replace($,ee),function(t){return(t.textContent||t.innerText||i(t)).indexOf(e)>-1}})),lang:se((function(e){return q.test(e||"")||ae.error("unsupported lang: "+e),e=e.replace($,ee).toLowerCase(),function(t){var r;do{if(r=m?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(r=r.toLowerCase())===e||0===r.indexOf(e+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}})),target:function(t){var r=e.location&&e.location.hash;return r&&r.slice(1)===t.id},root:function(e){return e===p},focus:function(e){return e===f.activeElement&&(!f.hasFocus||f.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:fe(!1),disabled:fe(!0),checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!n.pseudos.empty(e)},header:function(e){return Z.test(e.nodeName)},input:function(e){return Y.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:pe((function(){return[0]})),last:pe((function(e,t){return[t-1]})),eq:pe((function(e,t,r){return[r<0?r+t:r]})),even:pe((function(e,t){for(var r=0;r<t;r+=2)e.push(r);return e})),odd:pe((function(e,t){for(var r=1;r<t;r+=2)e.push(r);return e})),lt:pe((function(e,t,r){for(var n=r<0?r+t:r;--n>=0;)e.push(n);return e})),gt:pe((function(e,t,r){for(var n=r<0?r+t:r;++n<t;)e.push(n);return e}))}},n.pseudos.nth=n.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})n.pseudos[t]=he(t);for(t in{submit:!0,reset:!0})n.pseudos[t]=de(t);function ge(){}function ve(e){for(var t=0,r=e.length,n="";t<r;t++)n+=e[t].value;return n}function ye(e,t,r){var n=t.dir,i=t.next,a=i||n,o=r&&"parentNode"===a,s=T++;return t.first?function(t,r,i){for(;t=t[n];)if(1===t.nodeType||o)return e(t,r,i);return!1}:function(t,r,l){var u,c,h,d=[w,s];if(l){for(;t=t[n];)if((1===t.nodeType||o)&&e(t,r,l))return!0}else for(;t=t[n];)if(1===t.nodeType||o)if(c=(h=t[E]||(t[E]={}))[t.uniqueID]||(h[t.uniqueID]={}),i&&i===t.nodeName.toLowerCase())t=t[n]||t;else{if((u=c[a])&&u[0]===w&&u[1]===s)return d[2]=u[2];if(c[a]=d,d[2]=e(t,r,l))return!0}return!1}}function be(e){return e.length>1?function(t,r,n){for(var i=e.length;i--;)if(!e[i](t,r,n))return!1;return!0}:e[0]}function Ee(e,t,r,n,i){for(var a,o=[],s=0,l=e.length,u=null!=t;s<l;s++)(a=e[s])&&(r&&!r(a,n,i)||(o.push(a),u&&t.push(s)));return o}function xe(e,t,r,n,i,a){return n&&!n[E]&&(n=xe(n)),i&&!i[E]&&(i=xe(i,a)),se((function(a,o,s,l){var u,c,h,d=[],f=[],p=o.length,m=a||function(e,t,r){for(var n=0,i=t.length;n<i;n++)ae(e,t[n],r);return r}(t||"*",s.nodeType?[s]:s,[]),g=!e||!a&&t?m:Ee(m,d,e,s,l),v=r?i||(a?e:p||n)?[]:o:g;if(r&&r(g,v,s,l),n)for(u=Ee(v,f),n(u,[],s,l),c=u.length;c--;)(h=u[c])&&(v[f[c]]=!(g[f[c]]=h));if(a){if(i||e){if(i){for(u=[],c=v.length;c--;)(h=v[c])&&u.push(g[c]=h);i(null,v=[],u,l)}for(c=v.length;c--;)(h=v[c])&&(u=i?H(a,h):d[c])>-1&&(a[u]=!(o[u]=h))}}else v=Ee(v===o?v.splice(p,v.length):v),i?i(null,o,v,l):I.apply(o,v)}))}function we(e){for(var t,r,i,a=e.length,o=n.relative[e[0].type],s=o||n.relative[" "],l=o?1:0,c=ye((function(e){return e===t}),s,!0),h=ye((function(e){return H(t,e)>-1}),s,!0),d=[function(e,r,n){var i=!o&&(n||r!==u)||((t=r).nodeType?c(e,r,n):h(e,r,n));return t=null,i}];l<a;l++)if(r=n.relative[e[l].type])d=[ye(be(d),r)];else{if((r=n.filter[e[l].type].apply(null,e[l].matches))[E]){for(i=++l;i<a&&!n.relative[e[i].type];i++);return xe(l>1&&be(d),l>1&&ve(e.slice(0,l-1).concat({value:" "===e[l-2].type?"*":""})).replace(z,"$1"),r,l<i&&we(e.slice(l,i)),i<a&&we(e=e.slice(i)),i<a&&ve(e))}d.push(r)}return be(d)}function Te(e,t){var r=t.length>0,i=e.length>0,a=function(a,o,s,l,c){var h,p,g,v=0,y="0",b=a&&[],E=[],x=u,T=a||i&&n.find.TAG("*",c),_=w+=null==x?1:Math.random()||.1,S=T.length;for(c&&(u=o===f||o||c);y!==S&&null!=(h=T[y]);y++){if(i&&h){for(p=0,o||h.ownerDocument===f||(d(h),s=!m);g=e[p++];)if(g(h,o||f,s)){l.push(h);break}c&&(w=_)}r&&((h=!g&&h)&&v--,a&&b.push(h))}if(v+=y,r&&y!==v){for(p=0;g=t[p++];)g(b,E,o,s);if(a){if(v>0)for(;y--;)b[y]||E[y]||(E[y]=L.call(l));E=Ee(E)}I.apply(l,E),c&&!a&&E.length>0&&v+t.length>1&&ae.uniqueSort(l)}return c&&(w=_,u=x),b};return r?se(a):a}return ge.prototype=n.filters=n.pseudos,n.setFilters=new ge,o=ae.tokenize=function(e,t){var r,i,a,o,s,l,u,c=S[e+" "];if(c)return t?0:c.slice(0);for(s=e,l=[],u=n.preFilter;s;){for(o in r&&!(i=j.exec(s))||(i&&(s=s.slice(i[0].length)||s),l.push(a=[])),r=!1,(i=V.exec(s))&&(r=i.shift(),a.push({value:r,type:i[0].replace(z," ")}),s=s.slice(r.length)),n.filter)!(i=X[o].exec(s))||u[o]&&!(i=u[o](i))||(r=i.shift(),a.push({value:r,type:o,matches:i}),s=s.slice(r.length));if(!r)break}return t?s.length:s?ae.error(e):S(e,l).slice(0)},s=ae.compile=function(e,t){var r,n=[],i=[],a=M[e+" "];if(!a){for(t||(t=o(e)),r=t.length;r--;)(a=we(t[r]))[E]?n.push(a):i.push(a);(a=M(e,Te(i,n))).selector=e}return a},l=ae.select=function(e,t,r,i){var a,l,u,c,h,d="function"==typeof e&&e,f=!i&&o(e=d.selector||e);if(r=r||[],1===f.length){if((l=f[0]=f[0].slice(0)).length>2&&"ID"===(u=l[0]).type&&9===t.nodeType&&m&&n.relative[l[1].type]){if(!(t=(n.find.ID(u.matches[0].replace($,ee),t)||[])[0]))return r;d&&(t=t.parentNode),e=e.slice(l.shift().value.length)}for(a=X.needsContext.test(e)?0:l.length;a--&&(u=l[a],!n.relative[c=u.type]);)if((h=n.find[c])&&(i=h(u.matches[0].replace($,ee),J.test(l[0].type)&&me(t.parentNode)||t))){if(l.splice(a,1),!(e=i.length&&ve(l)))return I.apply(r,i),r;break}}return(d||s(e,f))(i,t,!m,r,!t||J.test(e)&&me(t.parentNode)||t),r},r.sortStable=E.split("").sort(R).join("")===E,r.detectDuplicates=!!h,d(),r.sortDetached=le((function(e){return 1&e.compareDocumentPosition(f.createElement("fieldset"))})),le((function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")}))||ue("type|href|height|width",(function(e,t,r){if(!r)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)})),r.attributes&&le((function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")}))||ue("value",(function(e,t,r){if(!r&&"input"===e.nodeName.toLowerCase())return e.defaultValue})),le((function(e){return null==e.getAttribute("disabled")}))||ue(k,(function(e,t,r){var n;if(!r)return!0===e[t]?t.toLowerCase():(n=e.getAttributeNode(t))&&n.specified?n.value:null})),ae}(n);E.find=M,E.expr=M.selectors,E.expr[":"]=E.expr.pseudos,E.uniqueSort=E.unique=M.uniqueSort,E.text=M.getText,E.isXMLDoc=M.isXML,E.contains=M.contains,E.escapeSelector=M.escape;var R=function(e,t,r){for(var n=[],i=void 0!==r;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(i&&E(e).is(r))break;n.push(e)}return n},A=function(e,t){for(var r=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&r.push(e);return r},C=E.expr.match.needsContext;function L(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}var O=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i,I=/^.[^:#\[\.,]*$/;function P(e,t,r){return E.isFunction(t)?E.grep(e,(function(e,n){return!!t.call(e,n,e)!==r})):t.nodeType?E.grep(e,(function(e){return e===t!==r})):"string"!=typeof t?E.grep(e,(function(e){return h.call(t,e)>-1!==r})):I.test(t)?E.filter(t,e,r):(t=E.filter(t,e),E.grep(e,(function(e){return h.call(t,e)>-1!==r&&1===e.nodeType})))}E.filter=function(e,t,r){var n=t[0];return r&&(e=":not("+e+")"),1===t.length&&1===n.nodeType?E.find.matchesSelector(n,e)?[n]:[]:E.find.matches(e,E.grep(t,(function(e){return 1===e.nodeType})))},E.fn.extend({find:function(e){var t,r,n=this.length,i=this;if("string"!=typeof e)return this.pushStack(E(e).filter((function(){for(t=0;t<n;t++)if(E.contains(i[t],this))return!0})));for(r=this.pushStack([]),t=0;t<n;t++)E.find(e,i[t],r);return n>1?E.uniqueSort(r):r},filter:function(e){return this.pushStack(P(this,e||[],!1))},not:function(e){return this.pushStack(P(this,e||[],!0))},is:function(e){return!!P(this,"string"==typeof e&&C.test(e)?E(e):e||[],!1).length}});var H,k=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,N=E.fn.init=function(e,t,r){var n,i;if(!e)return this;if(r=r||H,"string"==typeof e){if(!(n="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:k.exec(e))||!n[1]&&t)return!t||t.jquery?(t||r).find(e):this.constructor(t).find(e);if(n[1]){if(t=t instanceof E?t[0]:t,E.merge(this,E.parseHTML(n[1],t&&t.nodeType?t.ownerDocument||t:o,!0)),O.test(n[1])&&E.isPlainObject(t))for(n in t)E.isFunction(this[n])?this[n](t[n]):this.attr(n,t[n]);return this}return(i=o.getElementById(n[2]))&&(this[0]=i,this.length=1),this}return e.nodeType?(this[0]=e,this.length=1,this):E.isFunction(e)?void 0!==r.ready?r.ready(e):e(E):E.makeArray(e,this)};N.prototype=E.fn,H=E(o);var U=/^(?:parents|prev(?:Until|All))/,D={children:!0,contents:!0,next:!0,prev:!0};function F(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}E.fn.extend({has:function(e){var t=E(e,this),r=t.length;return this.filter((function(){for(var e=0;e<r;e++)if(E.contains(this,t[e]))return!0}))},closest:function(e,t){var r,n=0,i=this.length,a=[],o="string"!=typeof e&&E(e);if(!C.test(e))for(;n<i;n++)for(r=this[n];r&&r!==t;r=r.parentNode)if(r.nodeType<11&&(o?o.index(r)>-1:1===r.nodeType&&E.find.matchesSelector(r,e))){a.push(r);break}return this.pushStack(a.length>1?E.uniqueSort(a):a)},index:function(e){return e?"string"==typeof e?h.call(E(e),this[0]):h.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(E.uniqueSort(E.merge(this.get(),E(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),E.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return R(e,"parentNode")},parentsUntil:function(e,t,r){return R(e,"parentNode",r)},next:function(e){return F(e,"nextSibling")},prev:function(e){return F(e,"previousSibling")},nextAll:function(e){return R(e,"nextSibling")},prevAll:function(e){return R(e,"previousSibling")},nextUntil:function(e,t,r){return R(e,"nextSibling",r)},prevUntil:function(e,t,r){return R(e,"previousSibling",r)},siblings:function(e){return A((e.parentNode||{}).firstChild,e)},children:function(e){return A(e.firstChild)},contents:function(e){return L(e,"iframe")?e.contentDocument:(L(e,"template")&&(e=e.content||e),E.merge([],e.childNodes))}},(function(e,t){E.fn[e]=function(r,n){var i=E.map(this,t,r);return"Until"!==e.slice(-5)&&(n=r),n&&"string"==typeof n&&(i=E.filter(n,i)),this.length>1&&(D[e]||E.uniqueSort(i),U.test(e)&&i.reverse()),this.pushStack(i)}}));var B=/[^\x20\t\r\n\f]+/g;function z(e){return e}function j(e){throw e}function V(e,t,r,n){var i;try{e&&E.isFunction(i=e.promise)?i.call(e).done(t).fail(r):e&&E.isFunction(i=e.then)?i.call(e,t,r):t.apply(void 0,[e].slice(n))}catch(e){r.apply(void 0,[e])}}E.Callbacks=function(e){e="string"==typeof e?function(e){var t={};return E.each(e.match(B)||[],(function(e,r){t[r]=!0})),t}(e):E.extend({},e);var t,r,n,i,a=[],o=[],s=-1,l=function(){for(i=i||e.once,n=t=!0;o.length;s=-1)for(r=o.shift();++s<a.length;)!1===a[s].apply(r[0],r[1])&&e.stopOnFalse&&(s=a.length,r=!1);e.memory||(r=!1),t=!1,i&&(a=r?[]:"")},u={add:function(){return a&&(r&&!t&&(s=a.length-1,o.push(r)),function t(r){E.each(r,(function(r,n){E.isFunction(n)?e.unique&&u.has(n)||a.push(n):n&&n.length&&"string"!==E.type(n)&&t(n)}))}(arguments),r&&!t&&l()),this},remove:function(){return E.each(arguments,(function(e,t){for(var r;(r=E.inArray(t,a,r))>-1;)a.splice(r,1),r<=s&&s--})),this},has:function(e){return e?E.inArray(e,a)>-1:a.length>0},empty:function(){return a&&(a=[]),this},disable:function(){return i=o=[],a=r="",this},disabled:function(){return!a},lock:function(){return i=o=[],r||t||(a=r=""),this},locked:function(){return!!i},fireWith:function(e,r){return i||(r=[e,(r=r||[]).slice?r.slice():r],o.push(r),t||l()),this},fire:function(){return u.fireWith(this,arguments),this},fired:function(){return!!n}};return u},E.extend({Deferred:function(e){var t=[["notify","progress",E.Callbacks("memory"),E.Callbacks("memory"),2],["resolve","done",E.Callbacks("once memory"),E.Callbacks("once memory"),0,"resolved"],["reject","fail",E.Callbacks("once memory"),E.Callbacks("once memory"),1,"rejected"]],r="pending",i={state:function(){return r},always:function(){return a.done(arguments).fail(arguments),this},catch:function(e){return i.then(null,e)},pipe:function(){var e=arguments;return E.Deferred((function(r){E.each(t,(function(t,n){var i=E.isFunction(e[n[4]])&&e[n[4]];a[n[1]]((function(){var e=i&&i.apply(this,arguments);e&&E.isFunction(e.promise)?e.promise().progress(r.notify).done(r.resolve).fail(r.reject):r[n[0]+"With"](this,i?[e]:arguments)}))})),e=null})).promise()},then:function(e,r,i){var a=0;function o(e,t,r,i){return function(){var s=this,l=arguments,u=function(){var n,u;if(!(e<a)){if((n=r.apply(s,l))===t.promise())throw new TypeError("Thenable self-resolution");u=n&&("object"==typeof n||"function"==typeof n)&&n.then,E.isFunction(u)?i?u.call(n,o(a,t,z,i),o(a,t,j,i)):(a++,u.call(n,o(a,t,z,i),o(a,t,j,i),o(a,t,z,t.notifyWith))):(r!==z&&(s=void 0,l=[n]),(i||t.resolveWith)(s,l))}},c=i?u:function(){try{u()}catch(n){E.Deferred.exceptionHook&&E.Deferred.exceptionHook(n,c.stackTrace),e+1>=a&&(r!==j&&(s=void 0,l=[n]),t.rejectWith(s,l))}};e?c():(E.Deferred.getStackHook&&(c.stackTrace=E.Deferred.getStackHook()),n.setTimeout(c))}}return E.Deferred((function(n){t[0][3].add(o(0,n,E.isFunction(i)?i:z,n.notifyWith)),t[1][3].add(o(0,n,E.isFunction(e)?e:z)),t[2][3].add(o(0,n,E.isFunction(r)?r:j))})).promise()},promise:function(e){return null!=e?E.extend(e,i):i}},a={};return E.each(t,(function(e,n){var o=n[2],s=n[5];i[n[1]]=o.add,s&&o.add((function(){r=s}),t[3-e][2].disable,t[0][2].lock),o.add(n[3].fire),a[n[0]]=function(){return a[n[0]+"With"](this===a?void 0:this,arguments),this},a[n[0]+"With"]=o.fireWith})),i.promise(a),e&&e.call(a,a),a},when:function(e){var t=arguments.length,r=t,n=Array(r),i=l.call(arguments),a=E.Deferred(),o=function(e){return function(r){n[e]=this,i[e]=arguments.length>1?l.call(arguments):r,--t||a.resolveWith(n,i)}};if(t<=1&&(V(e,a.done(o(r)).resolve,a.reject,!t),"pending"===a.state()||E.isFunction(i[r]&&i[r].then)))return a.then();for(;r--;)V(i[r],o(r),a.reject);return a.promise()}});var G=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;E.Deferred.exceptionHook=function(e,t){n.console&&n.console.warn&&e&&G.test(e.name)&&n.console.warn("jQuery.Deferred exception: "+e.message,e.stack,t)},E.readyException=function(e){n.setTimeout((function(){throw e}))};var W=E.Deferred();function q(){o.removeEventListener("DOMContentLoaded",q),n.removeEventListener("load",q),E.ready()}E.fn.ready=function(e){return W.then(e).catch((function(e){E.readyException(e)})),this},E.extend({isReady:!1,readyWait:1,ready:function(e){(!0===e?--E.readyWait:E.isReady)||(E.isReady=!0,!0!==e&&--E.readyWait>0||W.resolveWith(o,[E]))}}),E.ready.then=W.then,"complete"===o.readyState||"loading"!==o.readyState&&!o.documentElement.doScroll?n.setTimeout(E.ready):(o.addEventListener("DOMContentLoaded",q),n.addEventListener("load",q));var X=function(e,t,r,n,i,a,o){var s=0,l=e.length,u=null==r;if("object"===E.type(r))for(s in i=!0,r)X(e,t,s,r[s],!0,a,o);else if(void 0!==n&&(i=!0,E.isFunction(n)||(o=!0),u&&(o?(t.call(e,n),t=null):(u=t,t=function(e,t,r){return u.call(E(e),r)})),t))for(;s<l;s++)t(e[s],r,o?n:n.call(e[s],s,t(e[s],r)));return i?e:u?t.call(e):l?t(e[0],r):a},Y=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};function Z(){this.expando=E.expando+Z.uid++}Z.uid=1,Z.prototype={cache:function(e){var t=e[this.expando];return t||(t={},Y(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,r){var n,i=this.cache(e);if("string"==typeof t)i[E.camelCase(t)]=r;else for(n in t)i[E.camelCase(n)]=t[n];return i},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][E.camelCase(t)]},access:function(e,t,r){return void 0===t||t&&"string"==typeof t&&void 0===r?this.get(e,t):(this.set(e,t,r),void 0!==r?r:t)},remove:function(e,t){var r,n=e[this.expando];if(void 0!==n){if(void 0!==t){Array.isArray(t)?t=t.map(E.camelCase):t=(t=E.camelCase(t))in n?[t]:t.match(B)||[],r=t.length;for(;r--;)delete n[t[r]]}(void 0===t||E.isEmptyObject(n))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!E.isEmptyObject(t)}};var K=new Z,Q=new Z,J=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,$=/[A-Z]/g;function ee(e,t,r){var n;if(void 0===r&&1===e.nodeType)if(n="data-"+t.replace($,"-$&").toLowerCase(),"string"==typeof(r=e.getAttribute(n))){try{r=function(e){return"true"===e||"false"!==e&&("null"===e?null:e===+e+""?+e:J.test(e)?JSON.parse(e):e)}(r)}catch(e){}Q.set(e,t,r)}else r=void 0;return r}E.extend({hasData:function(e){return Q.hasData(e)||K.hasData(e)},data:function(e,t,r){return Q.access(e,t,r)},removeData:function(e,t){Q.remove(e,t)},_data:function(e,t,r){return K.access(e,t,r)},_removeData:function(e,t){K.remove(e,t)}}),E.fn.extend({data:function(e,t){var r,n,i,a=this[0],o=a&&a.attributes;if(void 0===e){if(this.length&&(i=Q.get(a),1===a.nodeType&&!K.get(a,"hasDataAttrs"))){for(r=o.length;r--;)o[r]&&(0===(n=o[r].name).indexOf("data-")&&(n=E.camelCase(n.slice(5)),ee(a,n,i[n])));K.set(a,"hasDataAttrs",!0)}return i}return"object"==typeof e?this.each((function(){Q.set(this,e)})):X(this,(function(t){var r;if(a&&void 0===t){if(void 0!==(r=Q.get(a,e)))return r;if(void 0!==(r=ee(a,e)))return r}else this.each((function(){Q.set(this,e,t)}))}),null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each((function(){Q.remove(this,e)}))}}),E.extend({queue:function(e,t,r){var n;if(e)return t=(t||"fx")+"queue",n=K.get(e,t),r&&(!n||Array.isArray(r)?n=K.access(e,t,E.makeArray(r)):n.push(r)),n||[]},dequeue:function(e,t){t=t||"fx";var r=E.queue(e,t),n=r.length,i=r.shift(),a=E._queueHooks(e,t);"inprogress"===i&&(i=r.shift(),n--),i&&("fx"===t&&r.unshift("inprogress"),delete a.stop,i.call(e,(function(){E.dequeue(e,t)}),a)),!n&&a&&a.empty.fire()},_queueHooks:function(e,t){var r=t+"queueHooks";return K.get(e,r)||K.access(e,r,{empty:E.Callbacks("once memory").add((function(){K.remove(e,[t+"queue",r])}))})}}),E.fn.extend({queue:function(e,t){var r=2;return"string"!=typeof e&&(t=e,e="fx",r--),arguments.length<r?E.queue(this[0],e):void 0===t?this:this.each((function(){var r=E.queue(this,e,t);E._queueHooks(this,e),"fx"===e&&"inprogress"!==r[0]&&E.dequeue(this,e)}))},dequeue:function(e){return this.each((function(){E.dequeue(this,e)}))},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var r,n=1,i=E.Deferred(),a=this,o=this.length,s=function(){--n||i.resolveWith(a,[a])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";o--;)(r=K.get(a[o],e+"queueHooks"))&&r.empty&&(n++,r.empty.add(s));return s(),i.promise(t)}});var te=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,re=new RegExp("^(?:([+-])=|)("+te+")([a-z%]*)$","i"),ne=["Top","Right","Bottom","Left"],ie=function(e,t){return"none"===(e=t||e).style.display||""===e.style.display&&E.contains(e.ownerDocument,e)&&"none"===E.css(e,"display")},ae=function(e,t,r,n){var i,a,o={};for(a in t)o[a]=e.style[a],e.style[a]=t[a];for(a in i=r.apply(e,n||[]),t)e.style[a]=o[a];return i};function oe(e,t,r,n){var i,a=1,o=20,s=n?function(){return n.cur()}:function(){return E.css(e,t,"")},l=s(),u=r&&r[3]||(E.cssNumber[t]?"":"px"),c=(E.cssNumber[t]||"px"!==u&&+l)&&re.exec(E.css(e,t));if(c&&c[3]!==u){u=u||c[3],r=r||[],c=+l||1;do{c/=a=a||".5",E.style(e,t,c+u)}while(a!==(a=s()/l)&&1!==a&&--o)}return r&&(c=+c||+l||0,i=r[1]?c+(r[1]+1)*r[2]:+r[2],n&&(n.unit=u,n.start=c,n.end=i)),i}var se={};function le(e){var t,r=e.ownerDocument,n=e.nodeName,i=se[n];return i||(t=r.body.appendChild(r.createElement(n)),i=E.css(t,"display"),t.parentNode.removeChild(t),"none"===i&&(i="block"),se[n]=i,i)}function ue(e,t){for(var r,n,i=[],a=0,o=e.length;a<o;a++)(n=e[a]).style&&(r=n.style.display,t?("none"===r&&(i[a]=K.get(n,"display")||null,i[a]||(n.style.display="")),""===n.style.display&&ie(n)&&(i[a]=le(n))):"none"!==r&&(i[a]="none",K.set(n,"display",r)));for(a=0;a<o;a++)null!=i[a]&&(e[a].style.display=i[a]);return e}E.fn.extend({show:function(){return ue(this,!0)},hide:function(){return ue(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each((function(){ie(this)?E(this).show():E(this).hide()}))}});var ce=/^(?:checkbox|radio)$/i,he=/<([a-z][^\/\0>\x20\t\r\n\f]+)/i,de=/^$|\/(?:java|ecma)script/i,fe={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function pe(e,t){var r;return r=void 0!==e.getElementsByTagName?e.getElementsByTagName(t||"*"):void 0!==e.querySelectorAll?e.querySelectorAll(t||"*"):[],void 0===t||t&&L(e,t)?E.merge([e],r):r}function me(e,t){for(var r=0,n=e.length;r<n;r++)K.set(e[r],"globalEval",!t||K.get(t[r],"globalEval"))}fe.optgroup=fe.option,fe.tbody=fe.tfoot=fe.colgroup=fe.caption=fe.thead,fe.th=fe.td;var ge=/<|&#?\w+;/;function ve(e,t,r,n,i){for(var a,o,s,l,u,c,h=t.createDocumentFragment(),d=[],f=0,p=e.length;f<p;f++)if((a=e[f])||0===a)if("object"===E.type(a))E.merge(d,a.nodeType?[a]:a);else if(ge.test(a)){for(o=o||h.appendChild(t.createElement("div")),s=(he.exec(a)||["",""])[1].toLowerCase(),l=fe[s]||fe._default,o.innerHTML=l[1]+E.htmlPrefilter(a)+l[2],c=l[0];c--;)o=o.lastChild;E.merge(d,o.childNodes),(o=h.firstChild).textContent=""}else d.push(t.createTextNode(a));for(h.textContent="",f=0;a=d[f++];)if(n&&E.inArray(a,n)>-1)i&&i.push(a);else if(u=E.contains(a.ownerDocument,a),o=pe(h.appendChild(a),"script"),u&&me(o),r)for(c=0;a=o[c++];)de.test(a.type||"")&&r.push(a);return h}!function(){var e=o.createDocumentFragment().appendChild(o.createElement("div")),t=o.createElement("input");t.setAttribute("type","radio"),t.setAttribute("checked","checked"),t.setAttribute("name","t"),e.appendChild(t),v.checkClone=e.cloneNode(!0).cloneNode(!0).lastChild.checked,e.innerHTML="<textarea>x</textarea>",v.noCloneChecked=!!e.cloneNode(!0).lastChild.defaultValue}();var ye=o.documentElement,be=/^key/,Ee=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,xe=/^([^.]*)(?:\.(.+)|)/;function we(){return!0}function Te(){return!1}function _e(){try{return o.activeElement}catch(e){}}function Se(e,t,r,n,i,a){var o,s;if("object"==typeof t){for(s in"string"!=typeof r&&(n=n||r,r=void 0),t)Se(e,s,r,n,t[s],a);return e}if(null==n&&null==i?(i=r,n=r=void 0):null==i&&("string"==typeof r?(i=n,n=void 0):(i=n,n=r,r=void 0)),!1===i)i=Te;else if(!i)return e;return 1===a&&(o=i,i=function(e){return E().off(e),o.apply(this,arguments)},i.guid=o.guid||(o.guid=E.guid++)),e.each((function(){E.event.add(this,t,i,n,r)}))}E.event={global:{},add:function(e,t,r,n,i){var a,o,s,l,u,c,h,d,f,p,m,g=K.get(e);if(g)for(r.handler&&(r=(a=r).handler,i=a.selector),i&&E.find.matchesSelector(ye,i),r.guid||(r.guid=E.guid++),(l=g.events)||(l=g.events={}),(o=g.handle)||(o=g.handle=function(t){return void 0!==E&&E.event.triggered!==t.type?E.event.dispatch.apply(e,arguments):void 0}),u=(t=(t||"").match(B)||[""]).length;u--;)f=m=(s=xe.exec(t[u])||[])[1],p=(s[2]||"").split(".").sort(),f&&(h=E.event.special[f]||{},f=(i?h.delegateType:h.bindType)||f,h=E.event.special[f]||{},c=E.extend({type:f,origType:m,data:n,handler:r,guid:r.guid,selector:i,needsContext:i&&E.expr.match.needsContext.test(i),namespace:p.join(".")},a),(d=l[f])||((d=l[f]=[]).delegateCount=0,h.setup&&!1!==h.setup.call(e,n,p,o)||e.addEventListener&&e.addEventListener(f,o)),h.add&&(h.add.call(e,c),c.handler.guid||(c.handler.guid=r.guid)),i?d.splice(d.delegateCount++,0,c):d.push(c),E.event.global[f]=!0)},remove:function(e,t,r,n,i){var a,o,s,l,u,c,h,d,f,p,m,g=K.hasData(e)&&K.get(e);if(g&&(l=g.events)){for(u=(t=(t||"").match(B)||[""]).length;u--;)if(f=m=(s=xe.exec(t[u])||[])[1],p=(s[2]||"").split(".").sort(),f){for(h=E.event.special[f]||{},d=l[f=(n?h.delegateType:h.bindType)||f]||[],s=s[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),o=a=d.length;a--;)c=d[a],!i&&m!==c.origType||r&&r.guid!==c.guid||s&&!s.test(c.namespace)||n&&n!==c.selector&&("**"!==n||!c.selector)||(d.splice(a,1),c.selector&&d.delegateCount--,h.remove&&h.remove.call(e,c));o&&!d.length&&(h.teardown&&!1!==h.teardown.call(e,p,g.handle)||E.removeEvent(e,f,g.handle),delete l[f])}else for(f in l)E.event.remove(e,f+t[u],r,n,!0);E.isEmptyObject(l)&&K.remove(e,"handle events")}},dispatch:function(e){var t,r,n,i,a,o,s=E.event.fix(e),l=new Array(arguments.length),u=(K.get(this,"events")||{})[s.type]||[],c=E.event.special[s.type]||{};for(l[0]=s,t=1;t<arguments.length;t++)l[t]=arguments[t];if(s.delegateTarget=this,!c.preDispatch||!1!==c.preDispatch.call(this,s)){for(o=E.event.handlers.call(this,s,u),t=0;(i=o[t++])&&!s.isPropagationStopped();)for(s.currentTarget=i.elem,r=0;(a=i.handlers[r++])&&!s.isImmediatePropagationStopped();)s.rnamespace&&!s.rnamespace.test(a.namespace)||(s.handleObj=a,s.data=a.data,void 0!==(n=((E.event.special[a.origType]||{}).handle||a.handler).apply(i.elem,l))&&!1===(s.result=n)&&(s.preventDefault(),s.stopPropagation()));return c.postDispatch&&c.postDispatch.call(this,s),s.result}},handlers:function(e,t){var r,n,i,a,o,s=[],l=t.delegateCount,u=e.target;if(l&&u.nodeType&&!("click"===e.type&&e.button>=1))for(;u!==this;u=u.parentNode||this)if(1===u.nodeType&&("click"!==e.type||!0!==u.disabled)){for(a=[],o={},r=0;r<l;r++)void 0===o[i=(n=t[r]).selector+" "]&&(o[i]=n.needsContext?E(i,this).index(u)>-1:E.find(i,this,null,[u]).length),o[i]&&a.push(n);a.length&&s.push({elem:u,handlers:a})}return u=this,l<t.length&&s.push({elem:u,handlers:t.slice(l)}),s},addProp:function(e,t){Object.defineProperty(E.Event.prototype,e,{enumerable:!0,configurable:!0,get:E.isFunction(t)?function(){if(this.originalEvent)return t(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[e]},set:function(t){Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:t})}})},fix:function(e){return e[E.expando]?e:new E.Event(e)},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==_e()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===_e()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&this.click&&L(this,"input"))return this.click(),!1},_default:function(e){return L(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},E.removeEvent=function(e,t,r){e.removeEventListener&&e.removeEventListener(t,r)},E.Event=function(e,t){return this instanceof E.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?we:Te,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&E.extend(this,t),this.timeStamp=e&&e.timeStamp||E.now(),void(this[E.expando]=!0)):new E.Event(e,t)},E.Event.prototype={constructor:E.Event,isDefaultPrevented:Te,isPropagationStopped:Te,isImmediatePropagationStopped:Te,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=we,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=we,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=we,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},E.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(e){var t=e.button;return null==e.which&&be.test(e.type)?null!=e.charCode?e.charCode:e.keyCode:!e.which&&void 0!==t&&Ee.test(e.type)?1&t?1:2&t?3:4&t?2:0:e.which}},E.event.addProp),E.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},(function(e,t){E.event.special[e]={delegateType:t,bindType:t,handle:function(e){var r,n=e.relatedTarget,i=e.handleObj;return n&&(n===this||E.contains(this,n))||(e.type=i.origType,r=i.handler.apply(this,arguments),e.type=t),r}}})),E.fn.extend({on:function(e,t,r,n){return Se(this,e,t,r,n)},one:function(e,t,r,n){return Se(this,e,t,r,n,1)},off:function(e,t,r){var n,i;if(e&&e.preventDefault&&e.handleObj)return n=e.handleObj,E(e.delegateTarget).off(n.namespace?n.origType+"."+n.namespace:n.origType,n.selector,n.handler),this;if("object"==typeof e){for(i in e)this.off(i,t,e[i]);return this}return!1!==t&&"function"!=typeof t||(r=t,t=void 0),!1===r&&(r=Te),this.each((function(){E.event.remove(this,e,r,t)}))}});var Me=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,Re=/<script|<style|<link/i,Ae=/checked\s*(?:[^=]|=\s*.checked.)/i,Ce=/^true\/(.*)/,Le=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function Oe(e,t){return L(e,"table")&&L(11!==t.nodeType?t:t.firstChild,"tr")&&E(">tbody",e)[0]||e}function Ie(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function Pe(e){var t=Ce.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function He(e,t){var r,n,i,a,o,s,l,u;if(1===t.nodeType){if(K.hasData(e)&&(a=K.access(e),o=K.set(t,a),u=a.events))for(i in delete o.handle,o.events={},u)for(r=0,n=u[i].length;r<n;r++)E.event.add(t,i,u[i][r]);Q.hasData(e)&&(s=Q.access(e),l=E.extend({},s),Q.set(t,l))}}function ke(e,t){var r=t.nodeName.toLowerCase();"input"===r&&ce.test(e.type)?t.checked=e.checked:"input"!==r&&"textarea"!==r||(t.defaultValue=e.defaultValue)}function Ne(e,t,r,n){t=u.apply([],t);var i,a,o,s,l,c,h=0,d=e.length,f=d-1,p=t[0],m=E.isFunction(p);if(m||d>1&&"string"==typeof p&&!v.checkClone&&Ae.test(p))return e.each((function(i){var a=e.eq(i);m&&(t[0]=p.call(this,i,a.html())),Ne(a,t,r,n)}));if(d&&(a=(i=ve(t,e[0].ownerDocument,!1,e,n)).firstChild,1===i.childNodes.length&&(i=a),a||n)){for(s=(o=E.map(pe(i,"script"),Ie)).length;h<d;h++)l=i,h!==f&&(l=E.clone(l,!0,!0),s&&E.merge(o,pe(l,"script"))),r.call(e[h],l,h);if(s)for(c=o[o.length-1].ownerDocument,E.map(o,Pe),h=0;h<s;h++)l=o[h],de.test(l.type||"")&&!K.access(l,"globalEval")&&E.contains(c,l)&&(l.src?E._evalUrl&&E._evalUrl(l.src):y(l.textContent.replace(Le,""),c))}return e}function Ue(e,t,r){for(var n,i=t?E.filter(t,e):e,a=0;null!=(n=i[a]);a++)r||1!==n.nodeType||E.cleanData(pe(n)),n.parentNode&&(r&&E.contains(n.ownerDocument,n)&&me(pe(n,"script")),n.parentNode.removeChild(n));return e}E.extend({htmlPrefilter:function(e){return e.replace(Me,"<$1></$2>")},clone:function(e,t,r){var n,i,a,o,s=e.cloneNode(!0),l=E.contains(e.ownerDocument,e);if(!(v.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||E.isXMLDoc(e)))for(o=pe(s),n=0,i=(a=pe(e)).length;n<i;n++)ke(a[n],o[n]);if(t)if(r)for(a=a||pe(e),o=o||pe(s),n=0,i=a.length;n<i;n++)He(a[n],o[n]);else He(e,s);return(o=pe(s,"script")).length>0&&me(o,!l&&pe(e,"script")),s},cleanData:function(e){for(var t,r,n,i=E.event.special,a=0;void 0!==(r=e[a]);a++)if(Y(r)){if(t=r[K.expando]){if(t.events)for(n in t.events)i[n]?E.event.remove(r,n):E.removeEvent(r,n,t.handle);r[K.expando]=void 0}r[Q.expando]&&(r[Q.expando]=void 0)}}}),E.fn.extend({detach:function(e){return Ue(this,e,!0)},remove:function(e){return Ue(this,e)},text:function(e){return X(this,(function(e){return void 0===e?E.text(this):this.empty().each((function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)}))}),null,e,arguments.length)},append:function(){return Ne(this,arguments,(function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Oe(this,e).appendChild(e)}))},prepend:function(){return Ne(this,arguments,(function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=Oe(this,e);t.insertBefore(e,t.firstChild)}}))},before:function(){return Ne(this,arguments,(function(e){this.parentNode&&this.parentNode.insertBefore(e,this)}))},after:function(){return Ne(this,arguments,(function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)}))},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(E.cleanData(pe(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map((function(){return E.clone(this,e,t)}))},html:function(e){return X(this,(function(e){var t=this[0]||{},r=0,n=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!Re.test(e)&&!fe[(he.exec(e)||["",""])[1].toLowerCase()]){e=E.htmlPrefilter(e);try{for(;r<n;r++)1===(t=this[r]||{}).nodeType&&(E.cleanData(pe(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)}),null,e,arguments.length)},replaceWith:function(){var e=[];return Ne(this,arguments,(function(t){var r=this.parentNode;E.inArray(this,e)<0&&(E.cleanData(pe(this)),r&&r.replaceChild(t,this))}),e)}}),E.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},(function(e,t){E.fn[e]=function(e){for(var r,n=[],i=E(e),a=i.length-1,o=0;o<=a;o++)r=o===a?this:this.clone(!0),E(i[o])[t](r),c.apply(n,r.get());return this.pushStack(n)}}));var De=/^margin/,Fe=new RegExp("^("+te+")(?!px)[a-z%]+$","i"),Be=function(e){var t=e.ownerDocument.defaultView;return t&&t.opener||(t=n),t.getComputedStyle(e)};function ze(e,t,r){var n,i,a,o,s=e.style;return(r=r||Be(e))&&(""!==(o=r.getPropertyValue(t)||r[t])||E.contains(e.ownerDocument,e)||(o=E.style(e,t)),!v.pixelMarginRight()&&Fe.test(o)&&De.test(t)&&(n=s.width,i=s.minWidth,a=s.maxWidth,s.minWidth=s.maxWidth=s.width=o,o=r.width,s.width=n,s.minWidth=i,s.maxWidth=a)),void 0!==o?o+"":o}function je(e,t){return{get:function(){return e()?void delete this.get:(this.get=t).apply(this,arguments)}}}!function(){function e(){if(l){l.style.cssText="box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%",l.innerHTML="",ye.appendChild(s);var e=n.getComputedStyle(l);t="1%"!==e.top,a="2px"===e.marginLeft,r="4px"===e.width,l.style.marginRight="50%",i="4px"===e.marginRight,ye.removeChild(s),l=null}}var t,r,i,a,s=o.createElement("div"),l=o.createElement("div");l.style&&(l.style.backgroundClip="content-box",l.cloneNode(!0).style.backgroundClip="",v.clearCloneStyle="content-box"===l.style.backgroundClip,s.style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute",s.appendChild(l),E.extend(v,{pixelPosition:function(){return e(),t},boxSizingReliable:function(){return e(),r},pixelMarginRight:function(){return e(),i},reliableMarginLeft:function(){return e(),a}}))}();var Ve=/^(none|table(?!-c[ea]).+)/,Ge=/^--/,We={position:"absolute",visibility:"hidden",display:"block"},qe={letterSpacing:"0",fontWeight:"400"},Xe=["Webkit","Moz","ms"],Ye=o.createElement("div").style;function Ze(e){var t=E.cssProps[e];return t||(t=E.cssProps[e]=function(e){if(e in Ye)return e;for(var t=e[0].toUpperCase()+e.slice(1),r=Xe.length;r--;)if((e=Xe[r]+t)in Ye)return e}(e)||e),t}function Ke(e,t,r){var n=re.exec(t);return n?Math.max(0,n[2]-(r||0))+(n[3]||"px"):t}function Qe(e,t,r,n,i){var a,o=0;for(a=r===(n?"border":"content")?4:"width"===t?1:0;a<4;a+=2)"margin"===r&&(o+=E.css(e,r+ne[a],!0,i)),n?("content"===r&&(o-=E.css(e,"padding"+ne[a],!0,i)),"margin"!==r&&(o-=E.css(e,"border"+ne[a]+"Width",!0,i))):(o+=E.css(e,"padding"+ne[a],!0,i),"padding"!==r&&(o+=E.css(e,"border"+ne[a]+"Width",!0,i)));return o}function Je(e,t,r){var n,i=Be(e),a=ze(e,t,i),o="border-box"===E.css(e,"boxSizing",!1,i);return Fe.test(a)?a:(n=o&&(v.boxSizingReliable()||a===e.style[t]),"auto"===a&&(a=e["offset"+t[0].toUpperCase()+t.slice(1)]),(a=parseFloat(a)||0)+Qe(e,t,r||(o?"border":"content"),n,i)+"px")}function $e(e,t,r,n,i){return new $e.prototype.init(e,t,r,n,i)}E.extend({cssHooks:{opacity:{get:function(e,t){if(t){var r=ze(e,"opacity");return""===r?"1":r}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:"cssFloat"},style:function(e,t,r,n){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var i,a,o,s=E.camelCase(t),l=Ge.test(t),u=e.style;return l||(t=Ze(s)),o=E.cssHooks[t]||E.cssHooks[s],void 0===r?o&&"get"in o&&void 0!==(i=o.get(e,!1,n))?i:u[t]:("string"===(a=typeof r)&&(i=re.exec(r))&&i[1]&&(r=oe(e,t,i),a="number"),void(null!=r&&r==r&&("number"===a&&(r+=i&&i[3]||(E.cssNumber[s]?"":"px")),v.clearCloneStyle||""!==r||0!==t.indexOf("background")||(u[t]="inherit"),o&&"set"in o&&void 0===(r=o.set(e,r,n))||(l?u.setProperty(t,r):u[t]=r))))}},css:function(e,t,r,n){var i,a,o,s=E.camelCase(t);return Ge.test(t)||(t=Ze(s)),(o=E.cssHooks[t]||E.cssHooks[s])&&"get"in o&&(i=o.get(e,!0,r)),void 0===i&&(i=ze(e,t,n)),"normal"===i&&t in qe&&(i=qe[t]),""===r||r?(a=parseFloat(i),!0===r||isFinite(a)?a||0:i):i}}),E.each(["height","width"],(function(e,t){E.cssHooks[t]={get:function(e,r,n){if(r)return!Ve.test(E.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?Je(e,t,n):ae(e,We,(function(){return Je(e,t,n)}))},set:function(e,r,n){var i,a=n&&Be(e),o=n&&Qe(e,t,n,"border-box"===E.css(e,"boxSizing",!1,a),a);return o&&(i=re.exec(r))&&"px"!==(i[3]||"px")&&(e.style[t]=r,r=E.css(e,t)),Ke(0,r,o)}}})),E.cssHooks.marginLeft=je(v.reliableMarginLeft,(function(e,t){if(t)return(parseFloat(ze(e,"marginLeft"))||e.getBoundingClientRect().left-ae(e,{marginLeft:0},(function(){return e.getBoundingClientRect().left})))+"px"})),E.each({margin:"",padding:"",border:"Width"},(function(e,t){E.cssHooks[e+t]={expand:function(r){for(var n=0,i={},a="string"==typeof r?r.split(" "):[r];n<4;n++)i[e+ne[n]+t]=a[n]||a[n-2]||a[0];return i}},De.test(e)||(E.cssHooks[e+t].set=Ke)})),E.fn.extend({css:function(e,t){return X(this,(function(e,t,r){var n,i,a={},o=0;if(Array.isArray(t)){for(n=Be(e),i=t.length;o<i;o++)a[t[o]]=E.css(e,t[o],!1,n);return a}return void 0!==r?E.style(e,t,r):E.css(e,t)}),e,t,arguments.length>1)}}),E.Tween=$e,$e.prototype={constructor:$e,init:function(e,t,r,n,i,a){this.elem=e,this.prop=r,this.easing=i||E.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=n,this.unit=a||(E.cssNumber[r]?"":"px")},cur:function(){var e=$e.propHooks[this.prop];return e&&e.get?e.get(this):$e.propHooks._default.get(this)},run:function(e){var t,r=$e.propHooks[this.prop];return this.options.duration?this.pos=t=E.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),r&&r.set?r.set(this):$e.propHooks._default.set(this),this}},$e.prototype.init.prototype=$e.prototype,$e.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=E.css(e.elem,e.prop,""))&&"auto"!==t?t:0},set:function(e){E.fx.step[e.prop]?E.fx.step[e.prop](e):1!==e.elem.nodeType||null==e.elem.style[E.cssProps[e.prop]]&&!E.cssHooks[e.prop]?e.elem[e.prop]=e.now:E.style(e.elem,e.prop,e.now+e.unit)}}},$e.propHooks.scrollTop=$e.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},E.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},E.fx=$e.prototype.init,E.fx.step={};var et,tt,rt=/^(?:toggle|show|hide)$/,nt=/queueHooks$/;function it(){tt&&(!1===o.hidden&&n.requestAnimationFrame?n.requestAnimationFrame(it):n.setTimeout(it,E.fx.interval),E.fx.tick())}function at(){return n.setTimeout((function(){et=void 0})),et=E.now()}function ot(e,t){var r,n=0,i={height:e};for(t=t?1:0;n<4;n+=2-t)i["margin"+(r=ne[n])]=i["padding"+r]=e;return t&&(i.opacity=i.width=e),i}function st(e,t,r){for(var n,i=(lt.tweeners[t]||[]).concat(lt.tweeners["*"]),a=0,o=i.length;a<o;a++)if(n=i[a].call(r,t,e))return n}function lt(e,t,r){var n,i,a=0,o=lt.prefilters.length,s=E.Deferred().always((function(){delete l.elem})),l=function(){if(i)return!1;for(var t=et||at(),r=Math.max(0,u.startTime+u.duration-t),n=1-(r/u.duration||0),a=0,o=u.tweens.length;a<o;a++)u.tweens[a].run(n);return s.notifyWith(e,[u,n,r]),n<1&&o?r:(o||s.notifyWith(e,[u,1,0]),s.resolveWith(e,[u]),!1)},u=s.promise({elem:e,props:E.extend({},t),opts:E.extend(!0,{specialEasing:{},easing:E.easing._default},r),originalProperties:t,originalOptions:r,startTime:et||at(),duration:r.duration,tweens:[],createTween:function(t,r){var n=E.Tween(e,u.opts,t,r,u.opts.specialEasing[t]||u.opts.easing);return u.tweens.push(n),n},stop:function(t){var r=0,n=t?u.tweens.length:0;if(i)return this;for(i=!0;r<n;r++)u.tweens[r].run(1);return t?(s.notifyWith(e,[u,1,0]),s.resolveWith(e,[u,t])):s.rejectWith(e,[u,t]),this}}),c=u.props;for(function(e,t){var r,n,i,a,o;for(r in e)if(i=t[n=E.camelCase(r)],a=e[r],Array.isArray(a)&&(i=a[1],a=e[r]=a[0]),r!==n&&(e[n]=a,delete e[r]),(o=E.cssHooks[n])&&"expand"in o)for(r in a=o.expand(a),delete e[n],a)r in e||(e[r]=a[r],t[r]=i);else t[n]=i}(c,u.opts.specialEasing);a<o;a++)if(n=lt.prefilters[a].call(u,e,c,u.opts))return E.isFunction(n.stop)&&(E._queueHooks(u.elem,u.opts.queue).stop=E.proxy(n.stop,n)),n;return E.map(c,st,u),E.isFunction(u.opts.start)&&u.opts.start.call(e,u),u.progress(u.opts.progress).done(u.opts.done,u.opts.complete).fail(u.opts.fail).always(u.opts.always),E.fx.timer(E.extend(l,{elem:e,anim:u,queue:u.opts.queue})),u}E.Animation=E.extend(lt,{tweeners:{"*":[function(e,t){var r=this.createTween(e,t);return oe(r.elem,e,re.exec(t),r),r}]},tweener:function(e,t){E.isFunction(e)?(t=e,e=["*"]):e=e.match(B);for(var r,n=0,i=e.length;n<i;n++)r=e[n],lt.tweeners[r]=lt.tweeners[r]||[],lt.tweeners[r].unshift(t)},prefilters:[function(e,t,r){var n,i,a,o,s,l,u,c,h="width"in t||"height"in t,d=this,f={},p=e.style,m=e.nodeType&&ie(e),g=K.get(e,"fxshow");for(n in r.queue||(null==(o=E._queueHooks(e,"fx")).unqueued&&(o.unqueued=0,s=o.empty.fire,o.empty.fire=function(){o.unqueued||s()}),o.unqueued++,d.always((function(){d.always((function(){o.unqueued--,E.queue(e,"fx").length||o.empty.fire()}))}))),t)if(i=t[n],rt.test(i)){if(delete t[n],a=a||"toggle"===i,i===(m?"hide":"show")){if("show"!==i||!g||void 0===g[n])continue;m=!0}f[n]=g&&g[n]||E.style(e,n)}if((l=!E.isEmptyObject(t))||!E.isEmptyObject(f))for(n in h&&1===e.nodeType&&(r.overflow=[p.overflow,p.overflowX,p.overflowY],null==(u=g&&g.display)&&(u=K.get(e,"display")),"none"===(c=E.css(e,"display"))&&(u?c=u:(ue([e],!0),u=e.style.display||u,c=E.css(e,"display"),ue([e]))),("inline"===c||"inline-block"===c&&null!=u)&&"none"===E.css(e,"float")&&(l||(d.done((function(){p.display=u})),null==u&&(c=p.display,u="none"===c?"":c)),p.display="inline-block")),r.overflow&&(p.overflow="hidden",d.always((function(){p.overflow=r.overflow[0],p.overflowX=r.overflow[1],p.overflowY=r.overflow[2]}))),l=!1,f)l||(g?"hidden"in g&&(m=g.hidden):g=K.access(e,"fxshow",{display:u}),a&&(g.hidden=!m),m&&ue([e],!0),d.done((function(){for(n in m||ue([e]),K.remove(e,"fxshow"),f)E.style(e,n,f[n])}))),l=st(m?g[n]:0,n,d),n in g||(g[n]=l.start,m&&(l.end=l.start,l.start=0))}],prefilter:function(e,t){t?lt.prefilters.unshift(e):lt.prefilters.push(e)}}),E.speed=function(e,t,r){var n=e&&"object"==typeof e?E.extend({},e):{complete:r||!r&&t||E.isFunction(e)&&e,duration:e,easing:r&&t||t&&!E.isFunction(t)&&t};return E.fx.off?n.duration=0:"number"!=typeof n.duration&&(n.duration in E.fx.speeds?n.duration=E.fx.speeds[n.duration]:n.duration=E.fx.speeds._default),null!=n.queue&&!0!==n.queue||(n.queue="fx"),n.old=n.complete,n.complete=function(){E.isFunction(n.old)&&n.old.call(this),n.queue&&E.dequeue(this,n.queue)},n},E.fn.extend({fadeTo:function(e,t,r,n){return this.filter(ie).css("opacity",0).show().end().animate({opacity:t},e,r,n)},animate:function(e,t,r,n){var i=E.isEmptyObject(e),a=E.speed(t,r,n),o=function(){var t=lt(this,E.extend({},e),a);(i||K.get(this,"finish"))&&t.stop(!0)};return o.finish=o,i||!1===a.queue?this.each(o):this.queue(a.queue,o)},stop:function(e,t,r){var n=function(e){var t=e.stop;delete e.stop,t(r)};return"string"!=typeof e&&(r=t,t=e,e=void 0),t&&!1!==e&&this.queue(e||"fx",[]),this.each((function(){var t=!0,i=null!=e&&e+"queueHooks",a=E.timers,o=K.get(this);if(i)o[i]&&o[i].stop&&n(o[i]);else for(i in o)o[i]&&o[i].stop&&nt.test(i)&&n(o[i]);for(i=a.length;i--;)a[i].elem!==this||null!=e&&a[i].queue!==e||(a[i].anim.stop(r),t=!1,a.splice(i,1));!t&&r||E.dequeue(this,e)}))},finish:function(e){return!1!==e&&(e=e||"fx"),this.each((function(){var t,r=K.get(this),n=r[e+"queue"],i=r[e+"queueHooks"],a=E.timers,o=n?n.length:0;for(r.finish=!0,E.queue(this,e,[]),i&&i.stop&&i.stop.call(this,!0),t=a.length;t--;)a[t].elem===this&&a[t].queue===e&&(a[t].anim.stop(!0),a.splice(t,1));for(t=0;t<o;t++)n[t]&&n[t].finish&&n[t].finish.call(this);delete r.finish}))}}),E.each(["toggle","show","hide"],(function(e,t){var r=E.fn[t];E.fn[t]=function(e,n,i){return null==e||"boolean"==typeof e?r.apply(this,arguments):this.animate(ot(t,!0),e,n,i)}})),E.each({slideDown:ot("show"),slideUp:ot("hide"),slideToggle:ot("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},(function(e,t){E.fn[e]=function(e,r,n){return this.animate(t,e,r,n)}})),E.timers=[],E.fx.tick=function(){var e,t=0,r=E.timers;for(et=E.now();t<r.length;t++)(e=r[t])()||r[t]!==e||r.splice(t--,1);r.length||E.fx.stop(),et=void 0},E.fx.timer=function(e){E.timers.push(e),E.fx.start()},E.fx.interval=13,E.fx.start=function(){tt||(tt=!0,it())},E.fx.stop=function(){tt=null},E.fx.speeds={slow:600,fast:200,_default:400},E.fn.delay=function(e,t){return e=E.fx&&E.fx.speeds[e]||e,t=t||"fx",this.queue(t,(function(t,r){var i=n.setTimeout(t,e);r.stop=function(){n.clearTimeout(i)}}))},function(){var e=o.createElement("input"),t=o.createElement("select").appendChild(o.createElement("option"));e.type="checkbox",v.checkOn=""!==e.value,v.optSelected=t.selected,(e=o.createElement("input")).value="t",e.type="radio",v.radioValue="t"===e.value}();var ut,ct=E.expr.attrHandle;E.fn.extend({attr:function(e,t){return X(this,E.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each((function(){E.removeAttr(this,e)}))}}),E.extend({attr:function(e,t,r){var n,i,a=e.nodeType;if(3!==a&&8!==a&&2!==a)return void 0===e.getAttribute?E.prop(e,t,r):(1===a&&E.isXMLDoc(e)||(i=E.attrHooks[t.toLowerCase()]||(E.expr.match.bool.test(t)?ut:void 0)),void 0!==r?null===r?void E.removeAttr(e,t):i&&"set"in i&&void 0!==(n=i.set(e,r,t))?n:(e.setAttribute(t,r+""),r):i&&"get"in i&&null!==(n=i.get(e,t))?n:null==(n=E.find.attr(e,t))?void 0:n)},attrHooks:{type:{set:function(e,t){if(!v.radioValue&&"radio"===t&&L(e,"input")){var r=e.value;return e.setAttribute("type",t),r&&(e.value=r),t}}}},removeAttr:function(e,t){var r,n=0,i=t&&t.match(B);if(i&&1===e.nodeType)for(;r=i[n++];)e.removeAttribute(r)}}),ut={set:function(e,t,r){return!1===t?E.removeAttr(e,r):e.setAttribute(r,r),r}},E.each(E.expr.match.bool.source.match(/\w+/g),(function(e,t){var r=ct[t]||E.find.attr;ct[t]=function(e,t,n){var i,a,o=t.toLowerCase();return n||(a=ct[o],ct[o]=i,i=null!=r(e,t,n)?o:null,ct[o]=a),i}}));var ht=/^(?:input|select|textarea|button)$/i,dt=/^(?:a|area)$/i;function ft(e){return(e.match(B)||[]).join(" ")}function pt(e){return e.getAttribute&&e.getAttribute("class")||""}E.fn.extend({prop:function(e,t){return X(this,E.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each((function(){delete this[E.propFix[e]||e]}))}}),E.extend({prop:function(e,t,r){var n,i,a=e.nodeType;if(3!==a&&8!==a&&2!==a)return 1===a&&E.isXMLDoc(e)||(t=E.propFix[t]||t,i=E.propHooks[t]),void 0!==r?i&&"set"in i&&void 0!==(n=i.set(e,r,t))?n:e[t]=r:i&&"get"in i&&null!==(n=i.get(e,t))?n:e[t]},propHooks:{tabIndex:{get:function(e){var t=E.find.attr(e,"tabindex");return t?parseInt(t,10):ht.test(e.nodeName)||dt.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),v.optSelected||(E.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),E.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],(function(){E.propFix[this.toLowerCase()]=this})),E.fn.extend({addClass:function(e){var t,r,n,i,a,o,s,l=0;if(E.isFunction(e))return this.each((function(t){E(this).addClass(e.call(this,t,pt(this)))}));if("string"==typeof e&&e)for(t=e.match(B)||[];r=this[l++];)if(i=pt(r),n=1===r.nodeType&&" "+ft(i)+" "){for(o=0;a=t[o++];)n.indexOf(" "+a+" ")<0&&(n+=a+" ");i!==(s=ft(n))&&r.setAttribute("class",s)}return this},removeClass:function(e){var t,r,n,i,a,o,s,l=0;if(E.isFunction(e))return this.each((function(t){E(this).removeClass(e.call(this,t,pt(this)))}));if(!arguments.length)return this.attr("class","");if("string"==typeof e&&e)for(t=e.match(B)||[];r=this[l++];)if(i=pt(r),n=1===r.nodeType&&" "+ft(i)+" "){for(o=0;a=t[o++];)for(;n.indexOf(" "+a+" ")>-1;)n=n.replace(" "+a+" "," ");i!==(s=ft(n))&&r.setAttribute("class",s)}return this},toggleClass:function(e,t){var r=typeof e;return"boolean"==typeof t&&"string"===r?t?this.addClass(e):this.removeClass(e):E.isFunction(e)?this.each((function(r){E(this).toggleClass(e.call(this,r,pt(this),t),t)})):this.each((function(){var t,n,i,a;if("string"===r)for(n=0,i=E(this),a=e.match(B)||[];t=a[n++];)i.hasClass(t)?i.removeClass(t):i.addClass(t);else void 0!==e&&"boolean"!==r||((t=pt(this))&&K.set(this,"__className__",t),this.setAttribute&&this.setAttribute("class",t||!1===e?"":K.get(this,"__className__")||""))}))},hasClass:function(e){var t,r,n=0;for(t=" "+e+" ";r=this[n++];)if(1===r.nodeType&&(" "+ft(pt(r))+" ").indexOf(t)>-1)return!0;return!1}});var mt=/\r/g;E.fn.extend({val:function(e){var t,r,n,i=this[0];return arguments.length?(n=E.isFunction(e),this.each((function(r){var i;1===this.nodeType&&(null==(i=n?e.call(this,r,E(this).val()):e)?i="":"number"==typeof i?i+="":Array.isArray(i)&&(i=E.map(i,(function(e){return null==e?"":e+""}))),(t=E.valHooks[this.type]||E.valHooks[this.nodeName.toLowerCase()])&&"set"in t&&void 0!==t.set(this,i,"value")||(this.value=i))}))):i?(t=E.valHooks[i.type]||E.valHooks[i.nodeName.toLowerCase()])&&"get"in t&&void 0!==(r=t.get(i,"value"))?r:"string"==typeof(r=i.value)?r.replace(mt,""):null==r?"":r:void 0}}),E.extend({valHooks:{option:{get:function(e){var t=E.find.attr(e,"value");return null!=t?t:ft(E.text(e))}},select:{get:function(e){var t,r,n,i=e.options,a=e.selectedIndex,o="select-one"===e.type,s=o?null:[],l=o?a+1:i.length;for(n=a<0?l:o?a:0;n<l;n++)if(((r=i[n]).selected||n===a)&&!r.disabled&&(!r.parentNode.disabled||!L(r.parentNode,"optgroup"))){if(t=E(r).val(),o)return t;s.push(t)}return s},set:function(e,t){for(var r,n,i=e.options,a=E.makeArray(t),o=i.length;o--;)((n=i[o]).selected=E.inArray(E.valHooks.option.get(n),a)>-1)&&(r=!0);return r||(e.selectedIndex=-1),a}}}}),E.each(["radio","checkbox"],(function(){E.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=E.inArray(E(e).val(),t)>-1}},v.checkOn||(E.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})}));var gt=/^(?:focusinfocus|focusoutblur)$/;E.extend(E.event,{trigger:function(e,t,r,i){var a,s,l,u,c,h,d,f=[r||o],m=p.call(e,"type")?e.type:e,g=p.call(e,"namespace")?e.namespace.split("."):[];if(s=l=r=r||o,3!==r.nodeType&&8!==r.nodeType&&!gt.test(m+E.event.triggered)&&(m.indexOf(".")>-1&&(g=m.split("."),m=g.shift(),g.sort()),c=m.indexOf(":")<0&&"on"+m,(e=e[E.expando]?e:new E.Event(m,"object"==typeof e&&e)).isTrigger=i?2:3,e.namespace=g.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+g.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=r),t=null==t?[e]:E.makeArray(t,[e]),d=E.event.special[m]||{},i||!d.trigger||!1!==d.trigger.apply(r,t))){if(!i&&!d.noBubble&&!E.isWindow(r)){for(u=d.delegateType||m,gt.test(u+m)||(s=s.parentNode);s;s=s.parentNode)f.push(s),l=s;l===(r.ownerDocument||o)&&f.push(l.defaultView||l.parentWindow||n)}for(a=0;(s=f[a++])&&!e.isPropagationStopped();)e.type=a>1?u:d.bindType||m,(h=(K.get(s,"events")||{})[e.type]&&K.get(s,"handle"))&&h.apply(s,t),(h=c&&s[c])&&h.apply&&Y(s)&&(e.result=h.apply(s,t),!1===e.result&&e.preventDefault());return e.type=m,i||e.isDefaultPrevented()||d._default&&!1!==d._default.apply(f.pop(),t)||!Y(r)||c&&E.isFunction(r[m])&&!E.isWindow(r)&&((l=r[c])&&(r[c]=null),E.event.triggered=m,r[m](),E.event.triggered=void 0,l&&(r[c]=l)),e.result}},simulate:function(e,t,r){var n=E.extend(new E.Event,r,{type:e,isSimulated:!0});E.event.trigger(n,null,t)}}),E.fn.extend({trigger:function(e,t){return this.each((function(){E.event.trigger(e,t,this)}))},triggerHandler:function(e,t){var r=this[0];if(r)return E.event.trigger(e,t,r,!0)}}),E.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),(function(e,t){E.fn[t]=function(e,r){return arguments.length>0?this.on(t,null,e,r):this.trigger(t)}})),E.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),v.focusin="onfocusin"in n,v.focusin||E.each({focus:"focusin",blur:"focusout"},(function(e,t){var r=function(e){E.event.simulate(t,e.target,E.event.fix(e))};E.event.special[t]={setup:function(){var n=this.ownerDocument||this,i=K.access(n,t);i||n.addEventListener(e,r,!0),K.access(n,t,(i||0)+1)},teardown:function(){var n=this.ownerDocument||this,i=K.access(n,t)-1;i?K.access(n,t,i):(n.removeEventListener(e,r,!0),K.remove(n,t))}}}));var vt=n.location,yt=E.now(),bt=/\?/;E.parseXML=function(e){var t;if(!e||"string"!=typeof e)return null;try{t=(new n.DOMParser).parseFromString(e,"text/xml")}catch(e){t=void 0}return t&&!t.getElementsByTagName("parsererror").length||E.error("Invalid XML: "+e),t};var Et=/\[\]$/,xt=/\r?\n/g,wt=/^(?:submit|button|image|reset|file)$/i,Tt=/^(?:input|select|textarea|keygen)/i;function _t(e,t,r,n){var i;if(Array.isArray(t))E.each(t,(function(t,i){r||Et.test(e)?n(e,i):_t(e+"["+("object"==typeof i&&null!=i?t:"")+"]",i,r,n)}));else if(r||"object"!==E.type(t))n(e,t);else for(i in t)_t(e+"["+i+"]",t[i],r,n)}E.param=function(e,t){var r,n=[],i=function(e,t){var r=E.isFunction(t)?t():t;n[n.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==r?"":r)};if(Array.isArray(e)||e.jquery&&!E.isPlainObject(e))E.each(e,(function(){i(this.name,this.value)}));else for(r in e)_t(r,e[r],t,i);return n.join("&")},E.fn.extend({serialize:function(){return E.param(this.serializeArray())},serializeArray:function(){return this.map((function(){var e=E.prop(this,"elements");return e?E.makeArray(e):this})).filter((function(){var e=this.type;return this.name&&!E(this).is(":disabled")&&Tt.test(this.nodeName)&&!wt.test(e)&&(this.checked||!ce.test(e))})).map((function(e,t){var r=E(this).val();return null==r?null:Array.isArray(r)?E.map(r,(function(e){return{name:t.name,value:e.replace(xt,"\r\n")}})):{name:t.name,value:r.replace(xt,"\r\n")}})).get()}});var St=/%20/g,Mt=/#.*$/,Rt=/([?&])_=[^&]*/,At=/^(.*?):[ \t]*([^\r\n]*)$/gm,Ct=/^(?:GET|HEAD)$/,Lt=/^\/\//,Ot={},It={},Pt="*/".concat("*"),Ht=o.createElement("a");function kt(e){return function(t,r){"string"!=typeof t&&(r=t,t="*");var n,i=0,a=t.toLowerCase().match(B)||[];if(E.isFunction(r))for(;n=a[i++];)"+"===n[0]?(n=n.slice(1)||"*",(e[n]=e[n]||[]).unshift(r)):(e[n]=e[n]||[]).push(r)}}function Nt(e,t,r,n){var i={},a=e===It;function o(s){var l;return i[s]=!0,E.each(e[s]||[],(function(e,s){var u=s(t,r,n);return"string"!=typeof u||a||i[u]?a?!(l=u):void 0:(t.dataTypes.unshift(u),o(u),!1)})),l}return o(t.dataTypes[0])||!i["*"]&&o("*")}function Ut(e,t){var r,n,i=E.ajaxSettings.flatOptions||{};for(r in t)void 0!==t[r]&&((i[r]?e:n||(n={}))[r]=t[r]);return n&&E.extend(!0,e,n),e}Ht.href=vt.href,E.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:vt.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(vt.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Pt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":E.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?Ut(Ut(e,E.ajaxSettings),t):Ut(E.ajaxSettings,e)},ajaxPrefilter:kt(Ot),ajaxTransport:kt(It),ajax:function(e,t){"object"==typeof e&&(t=e,e=void 0),t=t||{};var r,i,a,s,l,u,c,h,d,f,p=E.ajaxSetup({},t),m=p.context||p,g=p.context&&(m.nodeType||m.jquery)?E(m):E.event,v=E.Deferred(),y=E.Callbacks("once memory"),b=p.statusCode||{},x={},w={},T="canceled",_={readyState:0,getResponseHeader:function(e){var t;if(c){if(!s)for(s={};t=At.exec(a);)s[t[1].toLowerCase()]=t[2];t=s[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return c?a:null},setRequestHeader:function(e,t){return null==c&&(e=w[e.toLowerCase()]=w[e.toLowerCase()]||e,x[e]=t),this},overrideMimeType:function(e){return null==c&&(p.mimeType=e),this},statusCode:function(e){var t;if(e)if(c)_.always(e[_.status]);else for(t in e)b[t]=[b[t],e[t]];return this},abort:function(e){var t=e||T;return r&&r.abort(t),S(0,t),this}};if(v.promise(_),p.url=((e||p.url||vt.href)+"").replace(Lt,vt.protocol+"//"),p.type=t.method||t.type||p.method||p.type,p.dataTypes=(p.dataType||"*").toLowerCase().match(B)||[""],null==p.crossDomain){u=o.createElement("a");try{u.href=p.url,u.href=u.href,p.crossDomain=Ht.protocol+"//"+Ht.host!=u.protocol+"//"+u.host}catch(e){p.crossDomain=!0}}if(p.data&&p.processData&&"string"!=typeof p.data&&(p.data=E.param(p.data,p.traditional)),Nt(Ot,p,t,_),c)return _;for(d in(h=E.event&&p.global)&&0==E.active++&&E.event.trigger("ajaxStart"),p.type=p.type.toUpperCase(),p.hasContent=!Ct.test(p.type),i=p.url.replace(Mt,""),p.hasContent?p.data&&p.processData&&0===(p.contentType||"").indexOf("application/x-www-form-urlencoded")&&(p.data=p.data.replace(St,"+")):(f=p.url.slice(i.length),p.data&&(i+=(bt.test(i)?"&":"?")+p.data,delete p.data),!1===p.cache&&(i=i.replace(Rt,"$1"),f=(bt.test(i)?"&":"?")+"_="+yt+++f),p.url=i+f),p.ifModified&&(E.lastModified[i]&&_.setRequestHeader("If-Modified-Since",E.lastModified[i]),E.etag[i]&&_.setRequestHeader("If-None-Match",E.etag[i])),(p.data&&p.hasContent&&!1!==p.contentType||t.contentType)&&_.setRequestHeader("Content-Type",p.contentType),_.setRequestHeader("Accept",p.dataTypes[0]&&p.accepts[p.dataTypes[0]]?p.accepts[p.dataTypes[0]]+("*"!==p.dataTypes[0]?", "+Pt+"; q=0.01":""):p.accepts["*"]),p.headers)_.setRequestHeader(d,p.headers[d]);if(p.beforeSend&&(!1===p.beforeSend.call(m,_,p)||c))return _.abort();if(T="abort",y.add(p.complete),_.done(p.success),_.fail(p.error),r=Nt(It,p,t,_)){if(_.readyState=1,h&&g.trigger("ajaxSend",[_,p]),c)return _;p.async&&p.timeout>0&&(l=n.setTimeout((function(){_.abort("timeout")}),p.timeout));try{c=!1,r.send(x,S)}catch(e){if(c)throw e;S(-1,e)}}else S(-1,"No Transport");function S(e,t,o,s){var u,d,f,x,w,T=t;c||(c=!0,l&&n.clearTimeout(l),r=void 0,a=s||"",_.readyState=e>0?4:0,u=e>=200&&e<300||304===e,o&&(x=function(e,t,r){for(var n,i,a,o,s=e.contents,l=e.dataTypes;"*"===l[0];)l.shift(),void 0===n&&(n=e.mimeType||t.getResponseHeader("Content-Type"));if(n)for(i in s)if(s[i]&&s[i].test(n)){l.unshift(i);break}if(l[0]in r)a=l[0];else{for(i in r){if(!l[0]||e.converters[i+" "+l[0]]){a=i;break}o||(o=i)}a=a||o}if(a)return a!==l[0]&&l.unshift(a),r[a]}(p,_,o)),x=function(e,t,r,n){var i,a,o,s,l,u={},c=e.dataTypes.slice();if(c[1])for(o in e.converters)u[o.toLowerCase()]=e.converters[o];for(a=c.shift();a;)if(e.responseFields[a]&&(r[e.responseFields[a]]=t),!l&&n&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),l=a,a=c.shift())if("*"===a)a=l;else if("*"!==l&&l!==a){if(!(o=u[l+" "+a]||u["* "+a]))for(i in u)if((s=i.split(" "))[1]===a&&(o=u[l+" "+s[0]]||u["* "+s[0]])){!0===o?o=u[i]:!0!==u[i]&&(a=s[0],c.unshift(s[1]));break}if(!0!==o)if(o&&e.throws)t=o(t);else try{t=o(t)}catch(e){return{state:"parsererror",error:o?e:"No conversion from "+l+" to "+a}}}return{state:"success",data:t}}(p,x,_,u),u?(p.ifModified&&((w=_.getResponseHeader("Last-Modified"))&&(E.lastModified[i]=w),(w=_.getResponseHeader("etag"))&&(E.etag[i]=w)),204===e||"HEAD"===p.type?T="nocontent":304===e?T="notmodified":(T=x.state,d=x.data,u=!(f=x.error))):(f=T,!e&&T||(T="error",e<0&&(e=0))),_.status=e,_.statusText=(t||T)+"",u?v.resolveWith(m,[d,T,_]):v.rejectWith(m,[_,T,f]),_.statusCode(b),b=void 0,h&&g.trigger(u?"ajaxSuccess":"ajaxError",[_,p,u?d:f]),y.fireWith(m,[_,T]),h&&(g.trigger("ajaxComplete",[_,p]),--E.active||E.event.trigger("ajaxStop")))}return _},getJSON:function(e,t,r){return E.get(e,t,r,"json")},getScript:function(e,t){return E.get(e,void 0,t,"script")}}),E.each(["get","post"],(function(e,t){E[t]=function(e,r,n,i){return E.isFunction(r)&&(i=i||n,n=r,r=void 0),E.ajax(E.extend({url:e,type:t,dataType:i,data:r,success:n},E.isPlainObject(e)&&e))}})),E._evalUrl=function(e){return E.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,throws:!0})},E.fn.extend({wrapAll:function(e){var t;return this[0]&&(E.isFunction(e)&&(e=e.call(this[0])),t=E(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map((function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e})).append(this)),this},wrapInner:function(e){return E.isFunction(e)?this.each((function(t){E(this).wrapInner(e.call(this,t))})):this.each((function(){var t=E(this),r=t.contents();r.length?r.wrapAll(e):t.append(e)}))},wrap:function(e){var t=E.isFunction(e);return this.each((function(r){E(this).wrapAll(t?e.call(this,r):e)}))},unwrap:function(e){return this.parent(e).not("body").each((function(){E(this).replaceWith(this.childNodes)})),this}}),E.expr.pseudos.hidden=function(e){return!E.expr.pseudos.visible(e)},E.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},E.ajaxSettings.xhr=function(){try{return new n.XMLHttpRequest}catch(e){}};var Dt={0:200,1223:204},Ft=E.ajaxSettings.xhr();v.cors=!!Ft&&"withCredentials"in Ft,v.ajax=Ft=!!Ft,E.ajaxTransport((function(e){var t,r;if(v.cors||Ft&&!e.crossDomain)return{send:function(i,a){var o,s=e.xhr();if(s.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(o in e.xhrFields)s[o]=e.xhrFields[o];for(o in e.mimeType&&s.overrideMimeType&&s.overrideMimeType(e.mimeType),e.crossDomain||i["X-Requested-With"]||(i["X-Requested-With"]="XMLHttpRequest"),i)s.setRequestHeader(o,i[o]);t=function(e){return function(){t&&(t=r=s.onload=s.onerror=s.onabort=s.onreadystatechange=null,"abort"===e?s.abort():"error"===e?"number"!=typeof s.status?a(0,"error"):a(s.status,s.statusText):a(Dt[s.status]||s.status,s.statusText,"text"!==(s.responseType||"text")||"string"!=typeof s.responseText?{binary:s.response}:{text:s.responseText},s.getAllResponseHeaders()))}},s.onload=t(),r=s.onerror=t("error"),void 0!==s.onabort?s.onabort=r:s.onreadystatechange=function(){4===s.readyState&&n.setTimeout((function(){t&&r()}))},t=t("abort");try{s.send(e.hasContent&&e.data||null)}catch(e){if(t)throw e}},abort:function(){t&&t()}}})),E.ajaxPrefilter((function(e){e.crossDomain&&(e.contents.script=!1)})),E.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return E.globalEval(e),e}}}),E.ajaxPrefilter("script",(function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")})),E.ajaxTransport("script",(function(e){var t,r;if(e.crossDomain)return{send:function(n,i){t=E("<script>").prop({charset:e.scriptCharset,src:e.url}).on("load error",r=function(e){t.remove(),r=null,e&&i("error"===e.type?404:200,e.type)}),o.head.appendChild(t[0])},abort:function(){r&&r()}}}));var Bt=[],zt=/(=)\?(?=&|$)|\?\?/;E.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Bt.pop()||E.expando+"_"+yt++;return this[e]=!0,e}}),E.ajaxPrefilter("json jsonp",(function(e,t,r){var i,a,o,s=!1!==e.jsonp&&(zt.test(e.url)?"url":"string"==typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&zt.test(e.data)&&"data");if(s||"jsonp"===e.dataTypes[0])return i=e.jsonpCallback=E.isFunction(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,s?e[s]=e[s].replace(zt,"$1"+i):!1!==e.jsonp&&(e.url+=(bt.test(e.url)?"&":"?")+e.jsonp+"="+i),e.converters["script json"]=function(){return o||E.error(i+" was not called"),o[0]},e.dataTypes[0]="json",a=n[i],n[i]=function(){o=arguments},r.always((function(){void 0===a?E(n).removeProp(i):n[i]=a,e[i]&&(e.jsonpCallback=t.jsonpCallback,Bt.push(i)),o&&E.isFunction(a)&&a(o[0]),o=a=void 0})),"script"})),v.createHTMLDocument=function(){var e=o.implementation.createHTMLDocument("").body;return e.innerHTML="<form></form><form></form>",2===e.childNodes.length}(),E.parseHTML=function(e,t,r){return"string"!=typeof e?[]:("boolean"==typeof t&&(r=t,t=!1),t||(v.createHTMLDocument?((n=(t=o.implementation.createHTMLDocument("")).createElement("base")).href=o.location.href,t.head.appendChild(n)):t=o),a=!r&&[],(i=O.exec(e))?[t.createElement(i[1])]:(i=ve([e],t,a),a&&a.length&&E(a).remove(),E.merge([],i.childNodes)));var n,i,a},E.fn.load=function(e,t,r){var n,i,a,o=this,s=e.indexOf(" ");return s>-1&&(n=ft(e.slice(s)),e=e.slice(0,s)),E.isFunction(t)?(r=t,t=void 0):t&&"object"==typeof t&&(i="POST"),o.length>0&&E.ajax({url:e,type:i||"GET",dataType:"html",data:t}).done((function(e){a=arguments,o.html(n?E("<div>").append(E.parseHTML(e)).find(n):e)})).always(r&&function(e,t){o.each((function(){r.apply(this,a||[e.responseText,t,e])}))}),this},E.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],(function(e,t){E.fn[t]=function(e){return this.on(t,e)}})),E.expr.pseudos.animated=function(e){return E.grep(E.timers,(function(t){return e===t.elem})).length},E.offset={setOffset:function(e,t,r){var n,i,a,o,s,l,u=E.css(e,"position"),c=E(e),h={};"static"===u&&(e.style.position="relative"),s=c.offset(),a=E.css(e,"top"),l=E.css(e,"left"),("absolute"===u||"fixed"===u)&&(a+l).indexOf("auto")>-1?(o=(n=c.position()).top,i=n.left):(o=parseFloat(a)||0,i=parseFloat(l)||0),E.isFunction(t)&&(t=t.call(e,r,E.extend({},s))),null!=t.top&&(h.top=t.top-s.top+o),null!=t.left&&(h.left=t.left-s.left+i),"using"in t?t.using.call(e,h):c.css(h)}},E.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each((function(t){E.offset.setOffset(this,e,t)}));var t,r,n,i,a=this[0];return a?a.getClientRects().length?(n=a.getBoundingClientRect(),r=(t=a.ownerDocument).documentElement,i=t.defaultView,{top:n.top+i.pageYOffset-r.clientTop,left:n.left+i.pageXOffset-r.clientLeft}):{top:0,left:0}:void 0},position:function(){if(this[0]){var e,t,r=this[0],n={top:0,left:0};return"fixed"===E.css(r,"position")?t=r.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),L(e[0],"html")||(n=e.offset()),n={top:n.top+E.css(e[0],"borderTopWidth",!0),left:n.left+E.css(e[0],"borderLeftWidth",!0)}),{top:t.top-n.top-E.css(r,"marginTop",!0),left:t.left-n.left-E.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map((function(){for(var e=this.offsetParent;e&&"static"===E.css(e,"position");)e=e.offsetParent;return e||ye}))}}),E.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},(function(e,t){var r="pageYOffset"===t;E.fn[e]=function(n){return X(this,(function(e,n,i){var a;return E.isWindow(e)?a=e:9===e.nodeType&&(a=e.defaultView),void 0===i?a?a[t]:e[n]:void(a?a.scrollTo(r?a.pageXOffset:i,r?i:a.pageYOffset):e[n]=i)}),e,n,arguments.length)}})),E.each(["top","left"],(function(e,t){E.cssHooks[t]=je(v.pixelPosition,(function(e,r){if(r)return r=ze(e,t),Fe.test(r)?E(e).position()[t]+"px":r}))})),E.each({Height:"height",Width:"width"},(function(e,t){E.each({padding:"inner"+e,content:t,"":"outer"+e},(function(r,n){E.fn[n]=function(i,a){var o=arguments.length&&(r||"boolean"!=typeof i),s=r||(!0===i||!0===a?"margin":"border");return X(this,(function(t,r,i){var a;return E.isWindow(t)?0===n.indexOf("outer")?t["inner"+e]:t.document.documentElement["client"+e]:9===t.nodeType?(a=t.documentElement,Math.max(t.body["scroll"+e],a["scroll"+e],t.body["offset"+e],a["offset"+e],a["client"+e])):void 0===i?E.css(t,r,s):E.style(t,r,i,s)}),t,o?i:void 0,o)}}))})),E.fn.extend({bind:function(e,t,r){return this.on(e,null,t,r)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,r,n){return this.on(t,e,r,n)},undelegate:function(e,t,r){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",r)}}),E.holdReady=function(e){e?E.readyWait++:E.ready(!0)},E.isArray=Array.isArray,E.parseJSON=JSON.parse,E.nodeName=L,void 0===(r=function(){return E}.apply(t,[]))||(e.exports=r);var jt=n.jQuery,Vt=n.$;return E.noConflict=function(e){return n.$===E&&(n.$=Vt),e&&n.jQuery===E&&(n.jQuery=jt),E},i||(n.jQuery=n.$=E),E}))},1748:()=>{var e,t,r,n,i,a;THREE.Gyroscope=function(){THREE.Object3D.call(this)},THREE.Gyroscope.prototype=Object.create(THREE.Object3D.prototype),THREE.Gyroscope.prototype.constructor=THREE.Gyroscope,THREE.Gyroscope.prototype.updateMatrixWorld=(e=new THREE.Vector3,t=new THREE.Quaternion,r=new THREE.Vector3,n=new THREE.Vector3,i=new THREE.Quaternion,a=new THREE.Vector3,function(o){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||o)&&(null!==this.parent?(this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorld.decompose(n,i,a),this.matrix.decompose(e,t,r),this.matrixWorld.compose(n,t,a)):this.matrixWorld.copy(this.matrix),this.matrixWorldNeedsUpdate=!1,o=!0);for(var s=0,l=this.children.length;s<l;s++)this.children[s].updateMatrixWorld(o)})},8685:()=>{THREE.MD2Character=function(){var e=this;function t(e,t){for(var r=new THREE.TextureLoader,i=[],a=0;a<t.length;a++)i[a]=r.load(e+t[a],n),i[a].mapping=THREE.UVMapping,i[a].name=t[a];return i}function r(e,t){var r=new THREE.MeshLambertMaterial({color:16755200,wireframe:!0,morphTargets:!0,morphNormals:!0}),n=new THREE.MeshLambertMaterial({color:16777215,wireframe:!1,map:t,morphTargets:!0,morphNormals:!0}),i=new THREE.Mesh(e,n);return i.rotation.y=-Math.PI/2,i.castShadow=!0,i.receiveShadow=!0,i.materialTexture=n,i.materialWireframe=r,i}function n(){e.loadCounter-=1,0===e.loadCounter&&e.onLoadComplete()}this.scale=1,this.animationFPS=6,this.root=new THREE.Object3D,this.meshBody=null,this.meshWeapon=null,this.skinsBody=[],this.skinsWeapon=[],this.weapons=[],this.activeAnimation=null,this.mixer=null,this.onLoadComplete=function(){},this.loadCounter=0,this.loadParts=function(i){this.loadCounter=2*i.weapons.length+i.skins.length+1;for(var a=[],o=0;o<i.weapons.length;o++)a[o]=i.weapons[o][1];this.skinsBody=t(i.baseUrl+"skins/",i.skins),this.skinsWeapon=t(i.baseUrl+"skins/",a);var s=new THREE.MD2Loader;s.load(i.baseUrl+i.body,(function(t){t.computeBoundingBox(),e.root.position.y=-e.scale*t.boundingBox.min.y;var i=r(t,e.skinsBody[0]);i.scale.set(e.scale,e.scale,e.scale),e.root.add(i),e.meshBody=i,e.meshBody.clipOffset=0,e.activeAnimationClipName=i.geometry.animations[0].name,e.mixer=new THREE.AnimationMixer(i),n()}));var l=function(t,i){return function(a){var o=r(a,e.skinsWeapon[t]);o.scale.set(e.scale,e.scale,e.scale),o.visible=!1,o.name=i,e.root.add(o),e.weapons[t]=o,e.meshWeapon=o,n()}};for(o=0;o<i.weapons.length;o++)s.load(i.baseUrl+i.weapons[o][0],l(o,i.weapons[o][0]))},this.setPlaybackRate=function(e){this.mixer.timeScale=0!==e?1/e:0},this.setWireframe=function(e){e?(this.meshBody&&(this.meshBody.material=this.meshBody.materialWireframe),this.meshWeapon&&(this.meshWeapon.material=this.meshWeapon.materialWireframe)):(this.meshBody&&(this.meshBody.material=this.meshBody.materialTexture),this.meshWeapon&&(this.meshWeapon.material=this.meshWeapon.materialTexture))},this.setSkin=function(e){this.meshBody&&!1===this.meshBody.material.wireframe&&(this.meshBody.material.map=this.skinsBody[e])},this.setWeapon=function(t){for(var r=0;r<this.weapons.length;r++)this.weapons[r].visible=!1;var n=this.weapons[t];n&&(n.visible=!0,this.meshWeapon=n,e.syncWeaponAnimation())},this.setAnimation=function(t){if(this.meshBody){this.meshBody.activeAction&&(this.meshBody.activeAction.stop(),this.meshBody.activeAction=null);var r=this.mixer.clipAction(t,this.meshBody);r&&(this.meshBody.activeAction=r.play())}e.activeClipName=t,e.syncWeaponAnimation()},this.syncWeaponAnimation=function(){var t=e.activeClipName;if(e.meshWeapon){this.meshWeapon.activeAction&&(this.meshWeapon.activeAction.stop(),this.meshWeapon.activeAction=null);this.meshWeapon.geometry.animations;var r=this.mixer.clipAction(t,this.meshWeapon);r&&(this.meshWeapon.activeAction=r.syncWith(this.meshBody.activeAction).play())}},this.update=function(e){this.mixer&&this.mixer.update(e)}}},1549:()=>{THREE.MD2CharacterComplex=function(){var e=this;function t(e,t){for(var r=new THREE.TextureLoader,i=[],a=0;a<t.length;a++)i[a]=r.load(e+t[a],n),i[a].mapping=THREE.UVMapping,i[a].name=t[a];return i}function r(t,r){var n=new THREE.MeshLambertMaterial({color:16755200,wireframe:!0,morphTargets:!0,morphNormals:!0}),i=new THREE.MeshLambertMaterial({color:16777215,wireframe:!1,map:r,morphTargets:!0,morphNormals:!0}),a=new THREE.MorphBlendMesh(t,i);return a.rotation.y=-Math.PI/2,a.materialTexture=i,a.materialWireframe=n,a.autoCreateAnimations(e.animationFPS),a}function n(){e.loadCounter-=1,0===e.loadCounter&&e.onLoadComplete()}function i(e){return 1===e?1:1-Math.pow(2,-10*e)}this.scale=1,this.animationFPS=6,this.transitionFrames=15,this.maxSpeed=275,this.maxReverseSpeed=-275,this.frontAcceleration=600,this.backAcceleration=600,this.frontDecceleration=600,this.angularSpeed=2.5,this.root=new THREE.Object3D,this.meshBody=null,this.meshWeapon=null,this.controls=null,this.skinsBody=[],this.skinsWeapon=[],this.weapons=[],this.currentSkin=void 0,this.onLoadComplete=function(){},this.meshes=[],this.animations={},this.loadCounter=0,this.speed=0,this.bodyOrientation=0,this.walkSpeed=this.maxSpeed,this.crouchSpeed=.5*this.maxSpeed,this.activeAnimation=null,this.oldAnimation=null,this.enableShadows=function(e){for(var t=0;t<this.meshes.length;t++)this.meshes[t].castShadow=e,this.meshes[t].receiveShadow=e},this.setVisible=function(e){for(var t=0;t<this.meshes.length;t++)this.meshes[t].visible=e,this.meshes[t].visible=e},this.shareParts=function(e){this.animations=e.animations,this.walkSpeed=e.walkSpeed,this.crouchSpeed=e.crouchSpeed,this.skinsBody=e.skinsBody,this.skinsWeapon=e.skinsWeapon;var t=r(e.meshBody.geometry,this.skinsBody[0]);t.scale.set(this.scale,this.scale,this.scale),this.root.position.y=e.root.position.y,this.root.add(t),this.meshBody=t,this.meshes.push(t);for(var n=0;n<e.weapons.length;n++){var i=r(e.weapons[n].geometry,this.skinsWeapon[n]);i.scale.set(this.scale,this.scale,this.scale),i.visible=!1,i.name=e.weapons[n].name,this.root.add(i),this.weapons[n]=i,this.meshWeapon=i,this.meshes.push(i)}},this.loadParts=function(i){this.animations=i.animations,this.walkSpeed=i.walkSpeed,this.crouchSpeed=i.crouchSpeed,this.loadCounter=2*i.weapons.length+i.skins.length+1;for(var a=[],o=0;o<i.weapons.length;o++)a[o]=i.weapons[o][1];this.skinsBody=t(i.baseUrl+"skins/",i.skins),this.skinsWeapon=t(i.baseUrl+"skins/",a);var s=new THREE.MD2Loader;s.load(i.baseUrl+i.body,(function(t){t.computeBoundingBox(),e.root.position.y=-e.scale*t.boundingBox.min.y;var i=r(t,e.skinsBody[0]);i.scale.set(e.scale,e.scale,e.scale),e.root.add(i),e.meshBody=i,e.meshes.push(i),n()}));var l=function(t,i){return function(a){var o=r(a,e.skinsWeapon[t]);o.scale.set(e.scale,e.scale,e.scale),o.visible=!1,o.name=i,e.root.add(o),e.weapons[t]=o,e.meshWeapon=o,e.meshes.push(o),n()}};for(o=0;o<i.weapons.length;o++)s.load(i.baseUrl+i.weapons[o][0],l(o,i.weapons[o][0]))},this.setPlaybackRate=function(e){this.meshBody&&(this.meshBody.duration=this.meshBody.baseDuration/e),this.meshWeapon&&(this.meshWeapon.duration=this.meshWeapon.baseDuration/e)},this.setWireframe=function(e){e?(this.meshBody&&(this.meshBody.material=this.meshBody.materialWireframe),this.meshWeapon&&(this.meshWeapon.material=this.meshWeapon.materialWireframe)):(this.meshBody&&(this.meshBody.material=this.meshBody.materialTexture),this.meshWeapon&&(this.meshWeapon.material=this.meshWeapon.materialTexture))},this.setSkin=function(e){this.meshBody&&!1===this.meshBody.material.wireframe&&(this.meshBody.material.map=this.skinsBody[e],this.currentSkin=e)},this.setWeapon=function(e){for(var t=0;t<this.weapons.length;t++)this.weapons[t].visible=!1;var r=this.weapons[e];r&&(r.visible=!0,this.meshWeapon=r,this.activeAnimation&&(r.playAnimation(this.activeAnimation),this.meshWeapon.setAnimationTime(this.activeAnimation,this.meshBody.getAnimationTime(this.activeAnimation))))},this.setAnimation=function(e){e!==this.activeAnimation&&e&&(this.meshBody&&(this.meshBody.setAnimationWeight(e,0),this.meshBody.playAnimation(e),this.oldAnimation=this.activeAnimation,this.activeAnimation=e,this.blendCounter=this.transitionFrames),this.meshWeapon&&(this.meshWeapon.setAnimationWeight(e,0),this.meshWeapon.playAnimation(e)))},this.update=function(e){this.controls&&this.updateMovementModel(e),this.animations&&(this.updateBehaviors(e),this.updateAnimations(e))},this.updateAnimations=function(e){var t=1;this.blendCounter>0&&(t=(this.transitionFrames-this.blendCounter)/this.transitionFrames,this.blendCounter-=1),this.meshBody&&(this.meshBody.update(e),this.meshBody.setAnimationWeight(this.activeAnimation,t),this.meshBody.setAnimationWeight(this.oldAnimation,1-t)),this.meshWeapon&&(this.meshWeapon.update(e),this.meshWeapon.setAnimationWeight(this.activeAnimation,t),this.meshWeapon.setAnimationWeight(this.oldAnimation,1-t))},this.updateBehaviors=function(e){var t,r,n=this.controls,i=this.animations;n.crouch?(t=i.crouchMove,r=i.crouchIdle):(t=i.move,r=i.idle),n.jump&&(t=i.jump,r=i.jump),n.attack&&(n.crouch?(t=i.crouchAttack,r=i.crouchAttack):(t=i.attack,r=i.attack)),(n.moveForward||n.moveBackward||n.moveLeft||n.moveRight)&&this.activeAnimation!==t&&this.setAnimation(t),Math.abs(this.speed)<.2*this.maxSpeed&&!(n.moveLeft||n.moveRight||n.moveForward||n.moveBackward)&&this.activeAnimation!==r&&this.setAnimation(r),n.moveForward&&(this.meshBody&&(this.meshBody.setAnimationDirectionForward(this.activeAnimation),this.meshBody.setAnimationDirectionForward(this.oldAnimation)),this.meshWeapon&&(this.meshWeapon.setAnimationDirectionForward(this.activeAnimation),this.meshWeapon.setAnimationDirectionForward(this.oldAnimation))),n.moveBackward&&(this.meshBody&&(this.meshBody.setAnimationDirectionBackward(this.activeAnimation),this.meshBody.setAnimationDirectionBackward(this.oldAnimation)),this.meshWeapon&&(this.meshWeapon.setAnimationDirectionBackward(this.activeAnimation),this.meshWeapon.setAnimationDirectionBackward(this.oldAnimation)))},this.updateMovementModel=function(e){var t=this.controls;t.crouch?this.maxSpeed=this.crouchSpeed:this.maxSpeed=this.walkSpeed,this.maxReverseSpeed=-this.maxSpeed,t.moveForward&&(this.speed=THREE.Math.clamp(this.speed+e*this.frontAcceleration,this.maxReverseSpeed,this.maxSpeed)),t.moveBackward&&(this.speed=THREE.Math.clamp(this.speed-e*this.backAcceleration,this.maxReverseSpeed,this.maxSpeed));if(t.moveLeft&&(this.bodyOrientation+=e*this.angularSpeed,this.speed=THREE.Math.clamp(this.speed+1*e*this.frontAcceleration,this.maxReverseSpeed,this.maxSpeed)),t.moveRight&&(this.bodyOrientation-=e*this.angularSpeed,this.speed=THREE.Math.clamp(this.speed+1*e*this.frontAcceleration,this.maxReverseSpeed,this.maxSpeed)),!t.moveForward&&!t.moveBackward)if(this.speed>0){var r=i(this.speed/this.maxSpeed);this.speed=THREE.Math.clamp(this.speed-r*e*this.frontDecceleration,0,this.maxSpeed)}else{r=i(this.speed/this.maxReverseSpeed);this.speed=THREE.Math.clamp(this.speed+r*e*this.backAcceleration,this.maxReverseSpeed,0)}var n=this.speed*e;this.root.position.x+=Math.sin(this.bodyOrientation)*n,this.root.position.z+=Math.cos(this.bodyOrientation)*n,this.root.rotation.y=this.bodyOrientation}}},3731:()=>{THREE.Ocean=function(e,t,r,n){function i(e,t){return void 0!==e?e:t}this.changed=!0,this.initial=!0,this.oceanCamera=new THREE.OrthographicCamera,this.oceanCamera.position.z=1,this.renderer=e,this.renderer.clearColor(16777215),this.scene=new THREE.Scene,n=n||{},this.clearColor=i(n.CLEAR_COLOR,[1,1,1,0]),this.geometryOrigin=i(n.GEOMETRY_ORIGIN,[-1e3,-1e3]),this.sunDirectionX=i(n.SUN_DIRECTION[0],-1),this.sunDirectionY=i(n.SUN_DIRECTION[1],1),this.sunDirectionZ=i(n.SUN_DIRECTION[2],1),this.oceanColor=i(n.OCEAN_COLOR,new THREE.Vector3(.004,.016,.047)),this.skyColor=i(n.SKY_COLOR,new THREE.Vector3(3.2,9.6,12.8)),this.exposure=i(n.EXPOSURE,.35),this.geometryResolution=i(n.GEOMETRY_RESOLUTION,32),this.geometrySize=i(n.GEOMETRY_SIZE,2e3),this.resolution=i(n.RESOLUTION,64),this.floatSize=i(n.SIZE_OF_FLOAT,4),this.windX=i(n.INITIAL_WIND[0],10),this.windY=i(n.INITIAL_WIND[1],10),this.size=i(n.INITIAL_SIZE,250),this.choppiness=i(n.INITIAL_CHOPPINESS,1.5),this.matrixNeedsUpdate=!1;var a=i(n.USE_HALF_FLOAT,!1)?THREE.HalfFloatType:THREE.FloatType,o={minFilter:THREE.LinearFilter,magFilter:THREE.LinearFilter,wrapS:THREE.ClampToEdgeWrapping,wrapT:THREE.ClampToEdgeWrapping,format:THREE.RGBAFormat,stencilBuffer:!1,depthBuffer:!1,premultiplyAlpha:!1,type:a},s={minFilter:THREE.NearestFilter,magFilter:THREE.NearestFilter,wrapS:THREE.ClampToEdgeWrapping,wrapT:THREE.ClampToEdgeWrapping,format:THREE.RGBAFormat,stencilBuffer:!1,depthBuffer:!1,premultiplyAlpha:!1,type:a},l={minFilter:THREE.NearestFilter,magFilter:THREE.NearestFilter,wrapS:THREE.RepeatWrapping,wrapT:THREE.RepeatWrapping,format:THREE.RGBAFormat,stencilBuffer:!1,depthBuffer:!1,premultiplyAlpha:!1,type:a};this.initialSpectrumFramebuffer=new THREE.WebGLRenderTarget(this.resolution,this.resolution,l),this.spectrumFramebuffer=new THREE.WebGLRenderTarget(this.resolution,this.resolution,s),this.pingPhaseFramebuffer=new THREE.WebGLRenderTarget(this.resolution,this.resolution,s),this.pongPhaseFramebuffer=new THREE.WebGLRenderTarget(this.resolution,this.resolution,s),this.pingTransformFramebuffer=new THREE.WebGLRenderTarget(this.resolution,this.resolution,s),this.pongTransformFramebuffer=new THREE.WebGLRenderTarget(this.resolution,this.resolution,s),this.displacementMapFramebuffer=new THREE.WebGLRenderTarget(this.resolution,this.resolution,o),this.normalMapFramebuffer=new THREE.WebGLRenderTarget(this.resolution,this.resolution,o);var u=THREE.ShaderLib.ocean_sim_vertex,c=THREE.ShaderLib.ocean_subtransform,h=THREE.UniformsUtils.clone(c.uniforms);this.materialOceanHorizontal=new THREE.ShaderMaterial({uniforms:h,vertexShader:u.vertexShader,fragmentShader:"#define HORIZONTAL \n"+c.fragmentShader}),this.materialOceanHorizontal.uniforms.u_transformSize={value:this.resolution},this.materialOceanHorizontal.uniforms.u_subtransformSize={value:null},this.materialOceanHorizontal.uniforms.u_input={value:null},this.materialOceanHorizontal.depthTest=!1;var d=THREE.ShaderLib.ocean_subtransform,f=THREE.UniformsUtils.clone(d.uniforms);this.materialOceanVertical=new THREE.ShaderMaterial({uniforms:f,vertexShader:u.vertexShader,fragmentShader:d.fragmentShader}),this.materialOceanVertical.uniforms.u_transformSize={value:this.resolution},this.materialOceanVertical.uniforms.u_subtransformSize={value:null},this.materialOceanVertical.uniforms.u_input={value:null},this.materialOceanVertical.depthTest=!1;var p=THREE.ShaderLib.ocean_initial_spectrum,m=THREE.UniformsUtils.clone(p.uniforms);this.materialInitialSpectrum=new THREE.ShaderMaterial({uniforms:m,vertexShader:u.vertexShader,fragmentShader:p.fragmentShader}),this.materialInitialSpectrum.uniforms.u_wind={value:new THREE.Vector2},this.materialInitialSpectrum.uniforms.u_resolution={value:this.resolution},this.materialInitialSpectrum.depthTest=!1;var g=THREE.ShaderLib.ocean_phase,v=THREE.UniformsUtils.clone(g.uniforms);this.materialPhase=new THREE.ShaderMaterial({uniforms:v,vertexShader:u.vertexShader,fragmentShader:g.fragmentShader}),this.materialPhase.uniforms.u_resolution={value:this.resolution},this.materialPhase.depthTest=!1;var y=THREE.ShaderLib.ocean_spectrum,b=THREE.UniformsUtils.clone(y.uniforms);this.materialSpectrum=new THREE.ShaderMaterial({uniforms:b,vertexShader:u.vertexShader,fragmentShader:y.fragmentShader}),this.materialSpectrum.uniforms.u_initialSpectrum={value:null},this.materialSpectrum.uniforms.u_resolution={value:this.resolution},this.materialSpectrum.depthTest=!1;var E=THREE.ShaderLib.ocean_normals,x=THREE.UniformsUtils.clone(E.uniforms);this.materialNormal=new THREE.ShaderMaterial({uniforms:x,vertexShader:u.vertexShader,fragmentShader:E.fragmentShader}),this.materialNormal.uniforms.u_displacementMap={value:null},this.materialNormal.uniforms.u_resolution={value:this.resolution},this.materialNormal.depthTest=!1;var w=THREE.ShaderLib.ocean_main,T=THREE.UniformsUtils.clone(w.uniforms);this.materialOcean=new THREE.ShaderMaterial({uniforms:T,vertexShader:w.vertexShader,fragmentShader:w.fragmentShader}),this.materialOcean.uniforms.u_geometrySize={value:this.resolution},this.materialOcean.uniforms.u_displacementMap={value:this.displacementMapFramebuffer.texture},this.materialOcean.uniforms.u_normalMap={value:this.normalMapFramebuffer.texture},this.materialOcean.uniforms.u_oceanColor={value:this.oceanColor},this.materialOcean.uniforms.u_skyColor={value:this.skyColor},this.materialOcean.uniforms.u_sunDirection={value:new THREE.Vector3(this.sunDirectionX,this.sunDirectionY,this.sunDirectionZ)},this.materialOcean.uniforms.u_exposure={value:this.exposure},this.materialOceanHorizontal.blending=0,this.materialOceanVertical.blending=0,this.materialInitialSpectrum.blending=0,this.materialPhase.blending=0,this.materialSpectrum.blending=0,this.materialNormal.blending=0,this.materialOcean.blending=0,this.screenQuad=new THREE.Mesh(new THREE.PlaneBufferGeometry(2,2)),this.scene.add(this.screenQuad),this.generateSeedPhaseTexture(),this.generateMesh()},THREE.Ocean.prototype.generateMesh=function(){var e=new THREE.PlaneBufferGeometry(this.geometrySize,this.geometrySize,this.geometryResolution,this.geometryResolution);e.rotateX(-Math.PI/2),this.oceanMesh=new THREE.Mesh(e,this.materialOcean)},THREE.Ocean.prototype.render=function(){this.scene.overrideMaterial=null,this.changed&&this.renderInitialSpectrum(),this.renderWavePhase(),this.renderSpectrum(),this.renderSpectrumFFT(),this.renderNormalMap(),this.scene.overrideMaterial=null},THREE.Ocean.prototype.generateSeedPhaseTexture=function(){this.pingPhase=!0;for(var e=new window.Float32Array(this.resolution*this.resolution*4),t=0;t<this.resolution;t++)for(var r=0;r<this.resolution;r++)e[t*this.resolution*4+4*r]=2*Math.random()*Math.PI,e[t*this.resolution*4+4*r+1]=0,e[t*this.resolution*4+4*r+2]=0,e[t*this.resolution*4+4*r+3]=0;this.pingPhaseTexture=new THREE.DataTexture(e,this.resolution,this.resolution,THREE.RGBAFormat),this.pingPhaseTexture.wrapS=THREE.ClampToEdgeWrapping,this.pingPhaseTexture.wrapT=THREE.ClampToEdgeWrapping,this.pingPhaseTexture.type=THREE.FloatType,this.pingPhaseTexture.needsUpdate=!0},THREE.Ocean.prototype.renderInitialSpectrum=function(){this.scene.overrideMaterial=this.materialInitialSpectrum,this.materialInitialSpectrum.uniforms.u_wind.value.set(this.windX,this.windY),this.materialInitialSpectrum.uniforms.u_size.value=this.size,this.renderer.render(this.scene,this.oceanCamera,this.initialSpectrumFramebuffer,!0)},THREE.Ocean.prototype.renderWavePhase=function(){this.scene.overrideMaterial=this.materialPhase,this.screenQuad.material=this.materialPhase,this.initial?(this.materialPhase.uniforms.u_phases.value=this.pingPhaseTexture,this.initial=!1):this.materialPhase.uniforms.u_phases.value=this.pingPhase?this.pingPhaseFramebuffer.texture:this.pongPhaseFramebuffer.texture,this.materialPhase.uniforms.u_deltaTime.value=this.deltaTime,this.materialPhase.uniforms.u_size.value=this.size,this.renderer.render(this.scene,this.oceanCamera,this.pingPhase?this.pongPhaseFramebuffer:this.pingPhaseFramebuffer),this.pingPhase=!this.pingPhase},THREE.Ocean.prototype.renderSpectrum=function(){this.scene.overrideMaterial=this.materialSpectrum,this.materialSpectrum.uniforms.u_initialSpectrum.value=this.initialSpectrumFramebuffer.texture,this.materialSpectrum.uniforms.u_phases.value=this.pingPhase?this.pingPhaseFramebuffer.texture:this.pongPhaseFramebuffer.texture,this.materialSpectrum.uniforms.u_choppiness.value=this.choppiness,this.materialSpectrum.uniforms.u_size.value=this.size,this.renderer.render(this.scene,this.oceanCamera,this.spectrumFramebuffer)},THREE.Ocean.prototype.renderSpectrumFFT=function(){var e=Math.log(this.resolution)/Math.log(2);this.scene.overrideMaterial=this.materialOceanHorizontal;for(var t=0;t<e;t++)0===t?(this.materialOceanHorizontal.uniforms.u_input.value=this.spectrumFramebuffer.texture,this.materialOceanHorizontal.uniforms.u_subtransformSize.value=Math.pow(2,t%e+1),this.renderer.render(this.scene,this.oceanCamera,this.pingTransformFramebuffer)):t%2==1?(this.materialOceanHorizontal.uniforms.u_input.value=this.pingTransformFramebuffer.texture,this.materialOceanHorizontal.uniforms.u_subtransformSize.value=Math.pow(2,t%e+1),this.renderer.render(this.scene,this.oceanCamera,this.pongTransformFramebuffer)):(this.materialOceanHorizontal.uniforms.u_input.value=this.pongTransformFramebuffer.texture,this.materialOceanHorizontal.uniforms.u_subtransformSize.value=Math.pow(2,t%e+1),this.renderer.render(this.scene,this.oceanCamera,this.pingTransformFramebuffer));this.scene.overrideMaterial=this.materialOceanVertical;for(t=e;t<2*e;t++)t===2*e-1?(this.materialOceanVertical.uniforms.u_input.value=e%2==0?this.pingTransformFramebuffer.texture:this.pongTransformFramebuffer.texture,this.materialOceanVertical.uniforms.u_subtransformSize.value=Math.pow(2,t%e+1),this.renderer.render(this.scene,this.oceanCamera,this.displacementMapFramebuffer)):t%2==1?(this.materialOceanVertical.uniforms.u_input.value=this.pingTransformFramebuffer.texture,this.materialOceanVertical.uniforms.u_subtransformSize.value=Math.pow(2,t%e+1),this.renderer.render(this.scene,this.oceanCamera,this.pongTransformFramebuffer)):(this.materialOceanVertical.uniforms.u_input.value=this.pongTransformFramebuffer.texture,this.materialOceanVertical.uniforms.u_subtransformSize.value=Math.pow(2,t%e+1),this.renderer.render(this.scene,this.oceanCamera,this.pingTransformFramebuffer))},THREE.Ocean.prototype.renderNormalMap=function(){this.scene.overrideMaterial=this.materialNormal,this.changed&&(this.materialNormal.uniforms.u_size.value=this.size),this.materialNormal.uniforms.u_displacementMap.value=this.displacementMapFramebuffer.texture,this.renderer.render(this.scene,this.oceanCamera,this.normalMapFramebuffer,!0)}},7302:(e,t,r)=>{var n=r(5108);
/*!
 *
 * threeoctree.js (r60) / https://github.com/collinhover/threeoctree
 * (sparse) dynamic 3D spatial representation structure for fast searches.
 *
 * @author Collin Hover / http://collinhover.com/
 * based on Dynamic Octree by Piko3D @ http://www.piko3d.com/ and Octree by Marek Pawlowski @ pawlowski.it
 *
 */!function(e){"use strict";function t(e){return!isNaN(e)&&isFinite(e)}function r(e){return e?!0!==function(e){return"[object Array]"===Object.prototype.toString.call(e)}(e)?[e]:e:[]}function i(e,t){for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1}e.Octree=function(r){if((r=r||{}).tree=this,this.nodeCount=0,this.INDEX_INSIDE_CROSS=-1,this.INDEX_OUTSIDE_OFFSET=2,this.INDEX_OUTSIDE_POS_X=t(r.INDEX_OUTSIDE_POS_X)?r.INDEX_OUTSIDE_POS_X:0,this.INDEX_OUTSIDE_NEG_X=t(r.INDEX_OUTSIDE_NEG_X)?r.INDEX_OUTSIDE_NEG_X:1,this.INDEX_OUTSIDE_POS_Y=t(r.INDEX_OUTSIDE_POS_Y)?r.INDEX_OUTSIDE_POS_Y:2,this.INDEX_OUTSIDE_NEG_Y=t(r.INDEX_OUTSIDE_NEG_Y)?r.INDEX_OUTSIDE_NEG_Y:3,this.INDEX_OUTSIDE_POS_Z=t(r.INDEX_OUTSIDE_POS_Z)?r.INDEX_OUTSIDE_POS_Z:4,this.INDEX_OUTSIDE_NEG_Z=t(r.INDEX_OUTSIDE_NEG_Z)?r.INDEX_OUTSIDE_NEG_Z:5,this.INDEX_OUTSIDE_MAP=[],this.INDEX_OUTSIDE_MAP[this.INDEX_OUTSIDE_POS_X]={index:this.INDEX_OUTSIDE_POS_X,count:0,x:1,y:0,z:0},this.INDEX_OUTSIDE_MAP[this.INDEX_OUTSIDE_NEG_X]={index:this.INDEX_OUTSIDE_NEG_X,count:0,x:-1,y:0,z:0},this.INDEX_OUTSIDE_MAP[this.INDEX_OUTSIDE_POS_Y]={index:this.INDEX_OUTSIDE_POS_Y,count:0,x:0,y:1,z:0},this.INDEX_OUTSIDE_MAP[this.INDEX_OUTSIDE_NEG_Y]={index:this.INDEX_OUTSIDE_NEG_Y,count:0,x:0,y:-1,z:0},this.INDEX_OUTSIDE_MAP[this.INDEX_OUTSIDE_POS_Z]={index:this.INDEX_OUTSIDE_POS_Z,count:0,x:0,y:0,z:1},this.INDEX_OUTSIDE_MAP[this.INDEX_OUTSIDE_NEG_Z]={index:this.INDEX_OUTSIDE_NEG_Z,count:0,x:0,y:0,z:-1},this.FLAG_POS_X=1<<this.INDEX_OUTSIDE_POS_X+1,this.FLAG_NEG_X=1<<this.INDEX_OUTSIDE_NEG_X+1,this.FLAG_POS_Y=1<<this.INDEX_OUTSIDE_POS_Y+1,this.FLAG_NEG_Y=1<<this.INDEX_OUTSIDE_NEG_Y+1,this.FLAG_POS_Z=1<<this.INDEX_OUTSIDE_POS_Z+1,this.FLAG_NEG_Z=1<<this.INDEX_OUTSIDE_NEG_Z+1,this.utilVec31Search=new e.Vector3,this.utilVec32Search=new e.Vector3,this.scene=r.scene,this.scene){var n=new e.BoxHelper(new e.Mesh(new e.BoxGeometry(1,1,1)),16711782);this.visualGeometry=n.geometry,this.visualMaterial=n.material}this.objects=[],this.objectsMap={},this.objectsData=[],this.objectsDeferred=[],this.depthMax=t(r.depthMax)?r.depthMax:1/0,this.objectsThreshold=t(r.objectsThreshold)?r.objectsThreshold:8,this.overlapPct=t(r.overlapPct)?r.overlapPct:.15,this.undeferred=r.undeferred||!1,this.root=r.root instanceof e.OctreeNode?r.root:new e.OctreeNode(r)},e.Octree.prototype={update:function(){if(this.objectsDeferred.length>0){for(var e=0,t=this.objectsDeferred.length;e<t;e++){var r=this.objectsDeferred[e];this.addDeferred(r.object,r.options)}this.objectsDeferred.length=0}},add:function(e,t){this.undeferred?(this.updateObject(e),this.addDeferred(e,t)):this.objectsDeferred.push({object:e,options:t})},addDeferred:function(t,r){var n,i,a,o,s,l;if(t instanceof e.OctreeObjectData&&(t=t.object),t.uuid||(t.uuid=e.Math.generateUUID()),!this.objectsMap[t.uuid])if(this.objects.push(t),this.objectsMap[t.uuid]=t,r&&(o=r.useFaces,l=r.useVertices),!0===l)for(n=0,i=(s=t.geometry.vertices).length;n<i;n++)this.addObjectData(t,s[n]);else if(!0===o)for(n=0,i=(a=t.geometry.faces).length;n<i;n++)this.addObjectData(t,a[n]);else this.addObjectData(t)},addObjectData:function(t,r){var n=new e.OctreeObjectData(t,r);this.objectsData.push(n),this.root.addObject(n)},remove:function(t){var r,n,a,o,s=t;if(t instanceof e.OctreeObjectData&&(t=t.object),this.objectsMap[t.uuid]){if(this.objectsMap[t.uuid]=void 0,-1!==(a=i(this.objects,t)))for(this.objects.splice(a,1),r=0,n=(o=this.root.removeObject(s)).length;r<n;r++)s=o[r],-1!==(a=i(this.objectsData,s))&&this.objectsData.splice(a,1)}else this.objectsDeferred.length>0&&(a=function(e,t,r){for(var n=0,i=e.length;n<i;n++)if(e[n][t]===r)return n;return-1}(this.objectsDeferred,"object",t),-1!==a&&this.objectsDeferred.splice(a,1))},extend:function(t){var r,n,i,a;if(t instanceof e.Octree)for(r=0,n=(i=t.objectsData).length;r<n;r++)a=i[r],this.add(a,{useFaces:a.faces,useVertices:a.vertices})},rebuild:function(){var t,r,n,i,a,o=[];for(t=0,r=this.objectsData.length;t<r;t++)n=(i=this.objectsData[t]).node,i.update(),n instanceof e.OctreeNode&&!i.positionLast.equals(i.position)&&(a=i.indexOctant,n.getOctantIndex(i)!==a&&o.push(i));for(t=0,r=o.length;t<r;t++)(i=o[t]).node.removeObject(i),this.root.addObject(i)},updateObject:function(e){var t,r,n,i,a=[e];for(n=e.parent;n;)a.push(n),n=n.parent;for(t=0,r=a.length;t<r;t++)!0===(n=a[t]).matrixWorldNeedsUpdate&&(i=n);void 0!==i&&i.updateMatrixWorld()},search:function(t,r,n,a){var o,s,l,u,c,h,d,f,p,m;for(l=[].concat(this.root.objects),r>0||(r=Number.MAX_VALUE),a instanceof e.Vector3&&(a=this.utilVec31Search.copy(a).normalize(),m=this.utilVec32Search.set(1,1,1).divide(a)),o=0,s=this.root.nodesIndices.length;o<s;o++)l=this.root.nodesByIndex[this.root.nodesIndices[o]].search(t,r,l,a,m);if(!0===n)for(h=[],f=[],o=0,s=l.length;o<s;o++)-1===(p=i(f,c=(u=l[o]).object))?(d={object:c,faces:[],vertices:[]},h.push(d),f.push(c)):d=h[p],u.faces?d.faces.push(u.faces):u.vertices&&d.vertices.push(u.vertices);else h=l;return h},setRoot:function(t){t instanceof e.OctreeNode&&(this.root=t,this.root.updateProperties())},getDepthEnd:function(){return this.root.getDepthEnd()},getNodeCountEnd:function(){return this.root.getNodeCountEnd()},getObjectCountEnd:function(){return this.root.getObjectCountEnd()},toConsole:function(){this.root.toConsole()}},e.OctreeObjectData=function(t,r){this.object=t,r instanceof e.Face3?(this.faces=r,this.face3=!0,this.utilVec31FaceBounds=new e.Vector3):r instanceof e.Vector3&&(this.vertices=r),this.radius=0,this.position=new e.Vector3,this.object instanceof e.Object3D&&this.update(),this.positionLast=this.position.clone()},e.OctreeObjectData.prototype={update:function(){this.face3?(this.radius=this.getFace3BoundingRadius(this.object,this.faces),this.position.copy(this.faces.centroid).applyMatrix4(this.object.matrixWorld)):this.vertices?(this.radius=this.object.material.size||1,this.position.copy(this.vertices).applyMatrix4(this.object.matrixWorld)):this.object.geometry?(null===this.object.geometry.boundingSphere&&this.object.geometry.computeBoundingSphere(),this.radius=this.object.geometry.boundingSphere.radius,this.position.copy(this.object.geometry.boundingSphere.center).applyMatrix4(this.object.matrixWorld)):(this.radius=this.object.boundRadius,this.position.setFromMatrixPosition(this.object.matrixWorld)),this.radius=this.radius*Math.max(this.object.scale.x,this.object.scale.y,this.object.scale.z)},getFace3BoundingRadius:function(t,r){void 0===r.centroid&&(r.centroid=new e.Vector3);var n=(t.geometry||t).vertices,i=r.centroid,a=n[r.a],o=n[r.b],s=n[r.c],l=this.utilVec31FaceBounds;return i.addVectors(a,o).add(s).divideScalar(3),Math.max(l.subVectors(i,a).length(),l.subVectors(i,o).length(),l.subVectors(i,s).length())}},e.OctreeNode=function(t){this.utilVec31Branch=new e.Vector3,this.utilVec31Expand=new e.Vector3,this.utilVec31Ray=new e.Vector3,(t=t||{}).tree instanceof e.Octree?this.tree=t.tree:t.parent instanceof e.OctreeNode!=!0&&(t.root=this,this.tree=new e.Octree(t)),this.id=this.tree.nodeCount++,this.position=t.position instanceof e.Vector3?t.position:new e.Vector3,this.radius=t.radius>0?t.radius:1,this.indexOctant=t.indexOctant,this.depth=0,this.reset(),this.setParent(t.parent),this.overlap=this.radius*this.tree.overlapPct,this.radiusOverlap=this.radius+this.overlap,this.left=this.position.x-this.radiusOverlap,this.right=this.position.x+this.radiusOverlap,this.bottom=this.position.y-this.radiusOverlap,this.top=this.position.y+this.radiusOverlap,this.back=this.position.z-this.radiusOverlap,this.front=this.position.z+this.radiusOverlap,this.tree.scene&&(this.visual=new e.LineSegments(this.tree.visualGeometry,this.tree.visualMaterial),this.visual.scale.set(2*this.radiusOverlap,2*this.radiusOverlap,2*this.radiusOverlap),this.visual.position.copy(this.position),this.tree.scene.add(this.visual))},e.OctreeNode.prototype={setParent:function(e){e!==this&&this.parent!==e&&(this.parent=e,this.updateProperties())},updateProperties:function(){var t,r;for(this.parent instanceof e.OctreeNode?(this.tree=this.parent.tree,this.depth=this.parent.depth+1):this.depth=0,t=0,r=this.nodesIndices.length;t<r;t++)this.nodesByIndex[this.nodesIndices[t]].updateProperties()},reset:function(e,t){var r,n,i,a=this.nodesIndices||[],o=this.nodesByIndex;for(this.objects=[],this.nodesIndices=[],this.nodesByIndex={},r=0,n=a.length;r<n;r++)(i=o[a[r]]).setParent(void 0),!0===e&&i.reset(e,t);!0===t&&this.visual&&this.visual.parent&&this.visual.parent.remove(this.visual)},addNode:function(e,t){e.indexOctant=t,-1===i(this.nodesIndices,t)&&this.nodesIndices.push(t),this.nodesByIndex[t]=e,e.parent!==this&&e.setParent(this)},removeNode:function(e){var t,r;t=i(this.nodesIndices,e),this.nodesIndices.splice(t,1),r=r||this.nodesByIndex[e],delete this.nodesByIndex[e],r.parent===this&&r.setParent(void 0)},addObject:function(t){var r;(r=this.getOctantIndex(t))>-1&&this.nodesIndices.length>0?this.branch(r).addObject(t):r<-1&&this.parent instanceof e.OctreeNode?this.parent.addObject(t):(-1===i(this.objects,t)&&this.objects.push(t),t.node=this,this.checkGrow())},addObjectWithoutCheck:function(e){var t,r,n;for(t=0,r=e.length;t<r;t++)n=e[t],this.objects.push(n),n.node=this},removeObject:function(e){var t,r,n,i;if((n=(i=this.removeObjectRecursive(e,{searchComplete:!1,nodesRemovedFrom:[],objectsDataRemoved:[]})).nodesRemovedFrom).length>0)for(t=0,r=n.length;t<r;t++)n[t].shrink();return i.objectsDataRemoved},removeObjectRecursive:function(t,r){var n,a,o,s,l=-1;if(t instanceof e.OctreeObjectData)-1!==(l=i(this.objects,t))&&(this.objects.splice(l,1),t.node=void 0,r.objectsDataRemoved.push(t),r.searchComplete=s=!0);else for(n=this.objects.length-1;n>=0;n--)if((o=this.objects[n]).object===t&&(this.objects.splice(n,1),o.node=void 0,r.objectsDataRemoved.push(o),s=!0,!o.faces&&!o.vertices)){r.searchComplete=!0;break}if(!0===s&&r.nodesRemovedFrom.push(this),!0!==r.searchComplete)for(n=0,a=this.nodesIndices.length;n<a&&!0!==(r=this.nodesByIndex[this.nodesIndices[n]].removeObjectRecursive(t,r)).searchComplete;n++);return r},checkGrow:function(){this.objects.length>this.tree.objectsThreshold&&this.tree.objectsThreshold>0&&this.grow()},grow:function(){var e,t,r,n,i=[],a=[],o=[],s=[],l=[];for(r=0,n=this.objects.length;r<n;r++)t=this.objects[r],(e=this.getOctantIndex(t))>-1?(o.push(t),s.push(e)):e<-1?(i.push(t),a.push(e)):l.push(t);o.length>0&&(l=l.concat(this.split(o,s))),i.length>0&&(l=l.concat(this.expand(i,a))),this.objects=l,this.checkMerge()},split:function(e,t){var r,n,i,a,o;if(this.depth<this.tree.depthMax){for(t=t||[],o=[],r=0,n=(e=e||this.objects).length;r<n;r++)a=e[r],(i=t[r])>-1?this.branch(i).addObject(a):o.push(a);e===this.objects&&(this.objects=o)}else o=this.objects;return o},branch:function(t){var r,n,i,a,o;return this.nodesByIndex[t]instanceof e.OctreeNode?r=this.nodesByIndex[t]:(i=(n=.5*this.radiusOverlap)-n*this.tree.overlapPct,a=this.utilVec31Branch.set(1&t?i:-i,2&t?i:-i,4&t?i:-i),o=(new e.Vector3).addVectors(this.position,a),r=new e.OctreeNode({tree:this.tree,parent:this,position:o,radius:n,indexOctant:t}),this.addNode(r,t)),r},expand:function(t,r){var n,i,a,o,s,l,u,c,h,d,f,p,m,g,v,y,b,E,x,w,T,_,S,M,R,A,C,L,O=this.tree.INDEX_OUTSIDE_MAP,I=this.utilVec31Expand;if(this.tree.root.getDepthEnd()<this.tree.depthMax){for(t=t||this.objects,r=r||[],o=[],s=[],n=0,i=O.length;n<i;n++)O[n].count=0;for(n=0,i=t.length;n<i;n++)a=t[n],(l=r[n])<-1?((u=-l-this.tree.INDEX_OUTSIDE_OFFSET)&this.tree.FLAG_POS_X?O[this.tree.INDEX_OUTSIDE_POS_X].count++:u&this.tree.FLAG_NEG_X&&O[this.tree.INDEX_OUTSIDE_NEG_X].count++,u&this.tree.FLAG_POS_Y?O[this.tree.INDEX_OUTSIDE_POS_Y].count++:u&this.tree.FLAG_NEG_Y&&O[this.tree.INDEX_OUTSIDE_NEG_Y].count++,u&this.tree.FLAG_POS_Z?O[this.tree.INDEX_OUTSIDE_POS_Z].count++:u&this.tree.FLAG_NEG_Z&&O[this.tree.INDEX_OUTSIDE_NEG_Z].count++,s.push(a)):o.push(a);if(s.length>0)for((h=O.slice(0)).sort((function(e,t){return t.count-e.count})),m=1|(d=h[0]).index,v=h[1],y=h[2],g=1|(f=(1|v.index)!==m?v:y).index,v=h[2],y=h[3],b=h[4],E=1|v.index,x=1|y.index,p=E!==m&&E!==g?v:x!==m&&x!==g?y:b,w=d.x+f.x+p.x,T=d.y+f.y+p.y,_=d.z+f.z+p.z,l=this.getOctantIndexFromPosition(w,T,_),c=this.getOctantIndexFromPosition(-w,-T,-_),S=this.overlap,M=this.radius,R=(A=this.tree.overlapPct>0?S/(.5*this.tree.overlapPct*(1+this.tree.overlapPct)):2*M)+A*this.tree.overlapPct-(M+S),I.set(1&l?R:-R,2&l?R:-R,4&l?R:-R),C=(new e.Vector3).addVectors(this.position,I),(L=new e.OctreeNode({tree:this.tree,position:C,radius:A})).addNode(this,c),this.tree.setRoot(L),n=0,i=s.length;n<i;n++)this.tree.root.addObject(s[n]);t===this.objects&&(this.objects=o)}else o=t;return o},shrink:function(){this.checkMerge(),this.tree.root.checkContract()},checkMerge:function(){for(var t,r=this;r.parent instanceof e.OctreeNode&&r.getObjectCountEnd()<this.tree.objectsThreshold;)t=r,r=r.parent;r!==this&&r.merge(t)},merge:function(e){var t,n,i;for(t=0,n=(e=r(e)).length;t<n;t++)i=e[t],this.addObjectWithoutCheck(i.getObjectsEnd()),i.reset(!0,!0),this.removeNode(i.indexOctant,i);this.checkMerge()},checkContract:function(){var t,r,n,i,a,o,s;if(this.nodesIndices.length>0){for(o=0,s=this.objects.length,t=0,r=this.nodesIndices.length;t<r;t++)s+=i=(n=this.nodesByIndex[this.nodesIndices[t]]).getObjectCountEnd(),(a instanceof e.OctreeNode==!1||i>o)&&(a=n,o=i);(s-=o)<this.tree.objectsThreshold&&a instanceof e.OctreeNode&&this.contract(a)}},contract:function(e){var t,r,n;for(t=0,r=this.nodesIndices.length;t<r;t++)(n=this.nodesByIndex[this.nodesIndices[t]])!==e&&(e.addObjectWithoutCheck(n.getObjectsEnd()),n.reset(!0,!0));e.addObjectWithoutCheck(this.objects),this.reset(!1,!0),this.tree.setRoot(e),e.checkContract()},getOctantIndex:function(t){var r,n,i,a,o,s,l,u,c=this.position,h=this.radiusOverlap,d=this.overlap,f=0;if(t instanceof e.OctreeObjectData?(n=t.radius,r=t.position,t.positionLast.copy(r)):t instanceof e.OctreeNode&&(r=t.position,n=0),i=r.x-c.x,a=r.y-c.y,o=r.z-c.z,s=Math.abs(i),l=Math.abs(a),u=Math.abs(o),Math.max(s,l,u)+n>h)return s+n>h&&(f^=i>0?this.tree.FLAG_POS_X:this.tree.FLAG_NEG_X),l+n>h&&(f^=a>0?this.tree.FLAG_POS_Y:this.tree.FLAG_NEG_Y),u+n>h&&(f^=o>0?this.tree.FLAG_POS_Z:this.tree.FLAG_NEG_Z),t.indexOctant=-f-this.tree.INDEX_OUTSIDE_OFFSET,t.indexOctant;if(i-n>-d)f|=1;else if(!(i+n<d))return t.indexOctant=this.tree.INDEX_INSIDE_CROSS,t.indexOctant;if(a-n>-d)f|=2;else if(!(a+n<d))return t.indexOctant=this.tree.INDEX_INSIDE_CROSS,t.indexOctant;if(o-n>-d)f|=4;else if(!(o+n<d))return t.indexOctant=this.tree.INDEX_INSIDE_CROSS,t.indexOctant;return t.indexOctant=f,t.indexOctant},getOctantIndexFromPosition:function(e,t,r){var n=0;return e>0&&(n|=1),t>0&&(n|=2),r>0&&(n|=4),n},search:function(e,t,r,n,i){var a,o;if(!0===(n?this.intersectRay(e,n,t,i):this.intersectSphere(e,t)))for(r=r.concat(this.objects),a=0,o=this.nodesIndices.length;a<o;a++)r=this.nodesByIndex[this.nodesIndices[a]].search(e,t,r,n);return r},intersectSphere:function(e,t){var r=t*t,n=e.x,i=e.y,a=e.z;return n<this.left?r-=Math.pow(n-this.left,2):n>this.right&&(r-=Math.pow(n-this.right,2)),i<this.bottom?r-=Math.pow(i-this.bottom,2):i>this.top&&(r-=Math.pow(i-this.top,2)),a<this.back?r-=Math.pow(a-this.back,2):a>this.front&&(r-=Math.pow(a-this.front,2)),r>=0},intersectRay:function(e,t,r,n){void 0===n&&(n=this.utilVec31Ray.set(1,1,1).divide(t));var i,a=(this.left-e.x)*n.x,o=(this.right-e.x)*n.x,s=(this.bottom-e.y)*n.y,l=(this.top-e.y)*n.y,u=(this.back-e.z)*n.z,c=(this.front-e.z)*n.z,h=Math.min(Math.min(Math.max(a,o),Math.max(s,l)),Math.max(u,c));return!(h<0)&&!((i=Math.max(Math.max(Math.min(a,o),Math.min(s,l)),Math.min(u,c)))>h||i>r)},getDepthEnd:function(e){var t,r;if(this.nodesIndices.length>0)for(t=0,r=this.nodesIndices.length;t<r;t++)e=this.nodesByIndex[this.nodesIndices[t]].getDepthEnd(e);else e=!e||this.depth>e?this.depth:e;return e},getNodeCountEnd:function(){return this.tree.root.getNodeCountRecursive()+1},getNodeCountRecursive:function(){var e,t,r=this.nodesIndices.length;for(e=0,t=this.nodesIndices.length;e<t;e++)r+=this.nodesByIndex[this.nodesIndices[e]].getNodeCountRecursive();return r},getObjectsEnd:function(e){var t,r;for(e=(e||[]).concat(this.objects),t=0,r=this.nodesIndices.length;t<r;t++)e=this.nodesByIndex[this.nodesIndices[t]].getObjectsEnd(e);return e},getObjectCountEnd:function(){var e,t,r=this.objects.length;for(e=0,t=this.nodesIndices.length;e<t;e++)r+=this.nodesByIndex[this.nodesIndices[e]].getObjectCountEnd();return r},getObjectCountStart:function(){for(var t=this.objects.length,r=this.parent;r instanceof e.OctreeNode;)t+=r.objects.length,r=r.parent;return t},toConsole:function(e){var t,r;for(e="string"==typeof e?e:"   ",n.log(this.parent?e+" octree NODE > ":" octree ROOT > ",this," // id: ",this.id," // indexOctant: ",this.indexOctant," // position: ",this.position.x,this.position.y,this.position.z," // radius: ",this.radius," // depth: ",this.depth),n.log(this.parent?e+" ":" ","+ objects ( ",this.objects.length," ) ",this.objects),n.log(this.parent?e+" ":" ","+ children ( ",this.nodesIndices.length," )",this.nodesIndices,this.nodesByIndex),t=0,r=this.nodesIndices.length;t<r;t++)this.nodesByIndex[this.nodesIndices[t]].toConsole(e+"   ")}},e.Raycaster.prototype.intersectOctreeObject=function(t,r){var n,i,a,o;return t.object instanceof e.Object3D?(t=(i=t).object,o=i.faces,a=t.geometry.faces,o.length>0&&(t.geometry.faces=o),n=this.intersectObject(t,r),o.length>0&&(t.geometry.faces=a)):n=this.intersectObject(t,r),n},e.Raycaster.prototype.intersectOctreeObjects=function(e,t){var r,n,i=[];for(r=0,n=e.length;r<n;r++)i=i.concat(this.intersectOctreeObject(e[r],t));return i}}(THREE)},6065:()=>{var e=function(e){null==e&&(e=Math),this.grad3=[[1,1,0],[-1,1,0],[1,-1,0],[-1,-1,0],[1,0,1],[-1,0,1],[1,0,-1],[-1,0,-1],[0,1,1],[0,-1,1],[0,1,-1],[0,-1,-1]],this.grad4=[[0,1,1,1],[0,1,1,-1],[0,1,-1,1],[0,1,-1,-1],[0,-1,1,1],[0,-1,1,-1],[0,-1,-1,1],[0,-1,-1,-1],[1,0,1,1],[1,0,1,-1],[1,0,-1,1],[1,0,-1,-1],[-1,0,1,1],[-1,0,1,-1],[-1,0,-1,1],[-1,0,-1,-1],[1,1,0,1],[1,1,0,-1],[1,-1,0,1],[1,-1,0,-1],[-1,1,0,1],[-1,1,0,-1],[-1,-1,0,1],[-1,-1,0,-1],[1,1,1,0],[1,1,-1,0],[1,-1,1,0],[1,-1,-1,0],[-1,1,1,0],[-1,1,-1,0],[-1,-1,1,0],[-1,-1,-1,0]],this.p=[];for(var t=0;t<256;t++)this.p[t]=Math.floor(256*e.random());this.perm=[];for(t=0;t<512;t++)this.perm[t]=this.p[255&t];this.simplex=[[0,1,2,3],[0,1,3,2],[0,0,0,0],[0,2,3,1],[0,0,0,0],[0,0,0,0],[0,0,0,0],[1,2,3,0],[0,2,1,3],[0,0,0,0],[0,3,1,2],[0,3,2,1],[0,0,0,0],[0,0,0,0],[0,0,0,0],[1,3,2,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[1,2,0,3],[0,0,0,0],[1,3,0,2],[0,0,0,0],[0,0,0,0],[0,0,0,0],[2,3,0,1],[2,3,1,0],[1,0,2,3],[1,0,3,2],[0,0,0,0],[0,0,0,0],[0,0,0,0],[2,0,3,1],[0,0,0,0],[2,1,3,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[2,0,1,3],[0,0,0,0],[0,0,0,0],[0,0,0,0],[3,0,1,2],[3,0,2,1],[0,0,0,0],[3,1,2,0],[2,1,0,3],[0,0,0,0],[0,0,0,0],[0,0,0,0],[3,1,0,2],[0,0,0,0],[3,2,0,1],[3,2,1,0]]};e.prototype.dot=function(e,t,r){return e[0]*t+e[1]*r},e.prototype.dot3=function(e,t,r,n){return e[0]*t+e[1]*r+e[2]*n},e.prototype.dot4=function(e,t,r,n,i){return e[0]*t+e[1]*r+e[2]*n+e[3]*i},e.prototype.noise=function(e,t){var r,n,i=(e+t)*(.5*(Math.sqrt(3)-1)),a=Math.floor(e+i),o=Math.floor(t+i),s=(3-Math.sqrt(3))/6,l=(a+o)*s,u=e-(a-l),c=t-(o-l);u>c?(r=1,n=0):(r=0,n=1);var h=u-r+s,d=c-n+s,f=u-1+2*s,p=c-1+2*s,m=255&a,g=255&o,v=this.perm[m+this.perm[g]]%12,y=this.perm[m+r+this.perm[g+n]]%12,b=this.perm[m+1+this.perm[g+1]]%12,E=.5-u*u-c*c,x=.5-h*h-d*d,w=.5-f*f-p*p;return 70*((E<0?0:(E*=E)*E*this.dot(this.grad3[v],u,c))+(x<0?0:(x*=x)*x*this.dot(this.grad3[y],h,d))+(w<0?0:(w*=w)*w*this.dot(this.grad3[b],f,p)))},e.prototype.noise3d=function(e,t,r){var n,i,a,o,s,l,u=(e+t+r)*(1/3),c=Math.floor(e+u),h=Math.floor(t+u),d=Math.floor(r+u),f=1/6,p=(c+h+d)*f,m=e-(c-p),g=t-(h-p),v=r-(d-p);m>=g?g>=v?(n=1,i=0,a=0,o=1,s=1,l=0):m>=v?(n=1,i=0,a=0,o=1,s=0,l=1):(n=0,i=0,a=1,o=1,s=0,l=1):g<v?(n=0,i=0,a=1,o=0,s=1,l=1):m<v?(n=0,i=1,a=0,o=0,s=1,l=1):(n=0,i=1,a=0,o=1,s=1,l=0);var y=m-n+f,b=g-i+f,E=v-a+f,x=m-o+2*f,w=g-s+2*f,T=v-l+2*f,_=m-1+.5,S=g-1+.5,M=v-1+.5,R=255&c,A=255&h,C=255&d,L=this.perm[R+this.perm[A+this.perm[C]]]%12,O=this.perm[R+n+this.perm[A+i+this.perm[C+a]]]%12,I=this.perm[R+o+this.perm[A+s+this.perm[C+l]]]%12,P=this.perm[R+1+this.perm[A+1+this.perm[C+1]]]%12,H=.6-m*m-g*g-v*v,k=.6-y*y-b*b-E*E,N=.6-x*x-w*w-T*T,U=.6-_*_-S*S-M*M;return 32*((H<0?0:(H*=H)*H*this.dot3(this.grad3[L],m,g,v))+(k<0?0:(k*=k)*k*this.dot3(this.grad3[O],y,b,E))+(N<0?0:(N*=N)*N*this.dot3(this.grad3[I],x,w,T))+(U<0?0:(U*=U)*U*this.dot3(this.grad3[P],_,S,M)))},e.prototype.noise4d=function(e,t,r,n){var i,a,o,s,l,u,c,h,d,f,p,m,g=this.grad4,v=this.simplex,y=this.perm,b=(Math.sqrt(5)-1)/4,E=(5-Math.sqrt(5))/20,x=(e+t+r+n)*b,w=Math.floor(e+x),T=Math.floor(t+x),_=Math.floor(r+x),S=Math.floor(n+x),M=(w+T+_+S)*E,R=e-(w-M),A=t-(T-M),C=r-(_-M),L=n-(S-M),O=(R>A?32:0)+(R>C?16:0)+(A>C?8:0)+(R>L?4:0)+(A>L?2:0)+(C>L?1:0),I=R-(i=v[O][0]>=3?1:0)+E,P=A-(a=v[O][1]>=3?1:0)+E,H=C-(o=v[O][2]>=3?1:0)+E,k=L-(s=v[O][3]>=3?1:0)+E,N=R-(l=v[O][0]>=2?1:0)+2*E,U=A-(u=v[O][1]>=2?1:0)+2*E,D=C-(c=v[O][2]>=2?1:0)+2*E,F=L-(h=v[O][3]>=2?1:0)+2*E,B=R-(d=v[O][0]>=1?1:0)+3*E,z=A-(f=v[O][1]>=1?1:0)+3*E,j=C-(p=v[O][2]>=1?1:0)+3*E,V=L-(m=v[O][3]>=1?1:0)+3*E,G=R-1+4*E,W=A-1+4*E,q=C-1+4*E,X=L-1+4*E,Y=255&w,Z=255&T,K=255&_,Q=255&S,J=y[Y+y[Z+y[K+y[Q]]]]%32,$=y[Y+i+y[Z+a+y[K+o+y[Q+s]]]]%32,ee=y[Y+l+y[Z+u+y[K+c+y[Q+h]]]]%32,te=y[Y+d+y[Z+f+y[K+p+y[Q+m]]]]%32,re=y[Y+1+y[Z+1+y[K+1+y[Q+1]]]]%32,ne=.6-R*R-A*A-C*C-L*L,ie=.6-I*I-P*P-H*H-k*k,ae=.6-N*N-U*U-D*D-F*F,oe=.6-B*B-z*z-j*j-V*V,se=.6-G*G-W*W-q*q-X*X;return 27*((ne<0?0:(ne*=ne)*ne*this.dot4(g[J],R,A,C,L))+(ie<0?0:(ie*=ie)*ie*this.dot4(g[$],I,P,H,k))+(ae<0?0:(ae*=ae)*ae*this.dot4(g[ee],N,U,D,F))+(oe<0?0:(oe*=oe)*oe*this.dot4(g[te],B,z,j,V))+(se<0?0:(se*=se)*se*this.dot4(g[re],G,W,q,X)))}},6348:(e,t,r)=>{var n=r(5108);THREE.CCDIKSolver=function(e){this.mesh=e,this._valid()},THREE.CCDIKSolver.prototype={constructor:THREE.CCDIKSolver,_valid:function(){for(var e=this.mesh.geometry.iks,t=this.mesh.skeleton.bones,r=0,i=e.length;r<i;r++){var a,o,s=e[r],l=t[s.effector],u=s.links;a=l;for(var c=0,h=u.length;c<h;c++)o=t[u[c].index],a.parent!==o&&n.warn("THREE.CCDIKSolver: bone "+a.name+" is not the child of bone "+o.name),a=o}},_saveOriginalBonesInfo:function(){for(var e=this.mesh.skeleton.bones,t=0,r=e.length;t<r;t++){var n=e[t];void 0===n.userData.ik&&(n.userData.ik={}),n.userData.ik.originalMatrix=n.matrix.toArray()}},update:function(e){var t=new THREE.Quaternion,r=new THREE.Vector3,n=new THREE.Vector3,i=new THREE.Vector3,a=new THREE.Vector3,o=new THREE.Vector3,s=new THREE.Quaternion,l=new THREE.Vector3,u=new THREE.Vector3,c=this.mesh.skeleton.bones,h=this.mesh.geometry.iks,d=(this.mesh.geometry.bones,Math);this.mesh.updateMatrixWorld(!0),!0===e&&this._saveOriginalBonesInfo();for(var f=0,p=h.length;f<p;f++){var m=h[f],g=c[m.effector],v=c[m.target];r.setFromMatrixPosition(v.matrixWorld);for(var y=m.links,b=void 0!==m.iteration?m.iteration:1,E=0;E<b;E++){for(var x=!1,w=0,T=y.length;w<T;w++){var _=c[y[w].index];if(!1===y[w].enabled)break;var S=y[w].limitation;_.matrixWorld.decompose(o,s,l),s.inverse(),i.setFromMatrixPosition(g.matrixWorld),a.subVectors(i,o),a.applyQuaternion(s),a.normalize(),n.subVectors(r,o),n.applyQuaternion(s),n.normalize();var M=n.dot(a);if(M>1?M=1:M<-1&&(M=-1),!((M=d.acos(M))<1e-5)){if(void 0!==m.minAngle&&M<m.minAngle&&(M=m.minAngle),void 0!==m.maxAngle&&M>m.maxAngle&&(M=m.maxAngle),u.crossVectors(a,n),u.normalize(),t.setFromAxisAngle(u,M),_.quaternion.multiply(t),void 0!==S){var R=_.quaternion.w;R>1&&(R=1);var A=d.sqrt(1-R*R);_.quaternion.set(S.x*A,S.y*A,S.z*A,R)}_.updateMatrixWorld(!0),x=!0}}if(!x)break}}this.mesh.updateMatrixWorld(!0)}},THREE.CCDIKHelper=function(e){if(void 0===e.geometry.iks||void 0===e.skeleton)throw"THREE.CCDIKHelper requires iks in mesh.geometry and skeleton in mesh.";THREE.Object3D.call(this),this.root=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.sphereGeometry=new THREE.SphereBufferGeometry(.25,16,8),this.targetSphereMaterial=new THREE.MeshBasicMaterial({color:new THREE.Color(16746632),depthTest:!1,depthWrite:!1,transparent:!0}),this.effectorSphereMaterial=new THREE.MeshBasicMaterial({color:new THREE.Color(8978312),depthTest:!1,depthWrite:!1,transparent:!0}),this.linkSphereMaterial=new THREE.MeshBasicMaterial({color:new THREE.Color(8947967),depthTest:!1,depthWrite:!1,transparent:!0}),this.lineMaterial=new THREE.LineBasicMaterial({color:new THREE.Color(16711680),depthTest:!1,depthWrite:!1,transparent:!0}),this._init(),this.update()},THREE.CCDIKHelper.prototype=Object.create(THREE.Object3D.prototype),THREE.CCDIKHelper.prototype.constructor=THREE.CCDIKHelper,THREE.CCDIKHelper.prototype._init=function(){var e=this,t=this.root.geometry.iks;function r(t){return new THREE.Line(function(e){var t=new THREE.BufferGeometry,r=new Float32Array(3*(2+e.links.length));return t.addAttribute("position",new THREE.BufferAttribute(r,3)),t}(t),e.lineMaterial)}for(var n=0,i=t.length;n<i;n++){var a=t[n];this.add(new THREE.Mesh(e.sphereGeometry,e.targetSphereMaterial)),this.add(new THREE.Mesh(e.sphereGeometry,e.effectorSphereMaterial));for(var o=0,s=a.links.length;o<s;o++)this.add(new THREE.Mesh(e.sphereGeometry,e.linkSphereMaterial));this.add(r(a))}},THREE.CCDIKHelper.prototype.update=function(){var e=0,t=this.root,r=t.geometry.iks,n=t.skeleton.bones,i=(new THREE.Matrix4).getInverse(t.matrixWorld),a=new THREE.Vector3;function o(e){return a.setFromMatrixPosition(e.matrixWorld),a.applyMatrix4(i),a}function s(e,t,r){var n=o(r);e[3*t+0]=n.x,e[3*t+1]=n.y,e[3*t+2]=n.z}for(var l=0,u=r.length;l<u;l++){var c=r[l],h=n[c.target],d=n[c.effector],f=this.children[e++],p=this.children[e++];f.position.copy(o(h)),p.position.copy(o(d));for(var m=0,g=c.links.length;m<g;m++){var v=n[c.links[m].index];this.children[e++].position.copy(o(v))}var y=this.children[e++],b=y.geometry.attributes.position.array;s(b,0,h),s(b,1,d);for(m=0,g=c.links.length;m<g;m++){s(b,m+2,v=n[c.links[m].index])}y.geometry.attributes.position.needsUpdate=!0}}},3761:()=>{THREE.MMDPhysics=function(e,t){void 0===t&&(t={}),this.mesh=e,this.helper=new THREE.MMDPhysics.ResourceHelper,this.unitStep=void 0!==t.unitStep?t.unitStep:1/65,this.maxStepNum=void 0!==t.maxStepNum?t.maxStepNum:3,this.world=void 0!==t.world?t.world:null,this.bodies=[],this.constraints=[],this.init(e)},THREE.MMDPhysics.prototype={constructor:THREE.MMDPhysics,init:function(e){var t=e.parent;null!==t&&t.remove(e);var r=this.helper,n=r.allocThreeVector3(),i=r.allocThreeEuler(),a=r.allocThreeVector3();n.copy(e.position),i.copy(e.rotation),a.copy(e.scale),e.position.set(0,0,0),e.rotation.set(0,0,0),e.scale.set(1,1,1),e.updateMatrixWorld(!0),null===this.world&&this.initWorld(),this.initRigidBodies(),this.initConstraints(),null!==t&&t.add(e),e.position.copy(n),e.rotation.copy(i),e.scale.copy(a),e.updateMatrixWorld(!0),this.reset(),r.freeThreeVector3(n),r.freeThreeEuler(i),r.freeThreeVector3(a)},initWorld:function(){var e=new Ammo.btDefaultCollisionConfiguration,t=new Ammo.btCollisionDispatcher(e),r=new Ammo.btDbvtBroadphase,n=new Ammo.btSequentialImpulseConstraintSolver,i=new Ammo.btDiscreteDynamicsWorld(t,r,n,e);i.setGravity(new Ammo.btVector3(0,-98,0)),this.world=i},initRigidBodies:function(){for(var e=this.mesh.geometry.rigidBodies,t=0;t<e.length;t++){var r=new THREE.MMDPhysics.RigidBody(this.mesh,this.world,e[t],this.helper);this.bodies.push(r)}},initConstraints:function(){for(var e=this.mesh.geometry.constraints,t=0;t<e.length;t++){var r=e[t],n=this.bodies[r.rigidBodyIndex1],i=this.bodies[r.rigidBodyIndex2],a=new THREE.MMDPhysics.Constraint(this.mesh,this.world,n,i,r,this.helper);this.constraints.push(a)}},update:function(e){this.updateRigidBodies(),this.stepSimulation(e),this.updateBones()},stepSimulation:function(e){var t=this.unitStep,r=e,n=1+(e/t|0);r<t&&(r=t,n=1),n>this.maxStepNum&&(n=this.maxStepNum),this.world.stepSimulation(r,n,t)},updateRigidBodies:function(){for(var e=0;e<this.bodies.length;e++)this.bodies[e].updateFromBone()},updateBones:function(){for(var e=0;e<this.bodies.length;e++)this.bodies[e].updateBone()},reset:function(){for(var e=0;e<this.bodies.length;e++)this.bodies[e].reset()},warmup:function(e){for(var t=0;t<e;t++)this.update(1/60)}},THREE.MMDPhysics.ResourceHelper=function(){this.threeVector3s=[],this.threeMatrix4s=[],this.threeQuaternions=[],this.threeEulers=[],this.transforms=[],this.quaternions=[],this.vector3s=[]},THREE.MMDPhysics.ResourceHelper.prototype={allocThreeVector3:function(){return this.threeVector3s.length>0?this.threeVector3s.pop():new THREE.Vector3},freeThreeVector3:function(e){this.threeVector3s.push(e)},allocThreeMatrix4:function(){return this.threeMatrix4s.length>0?this.threeMatrix4s.pop():new THREE.Matrix4},freeThreeMatrix4:function(e){this.threeMatrix4s.push(e)},allocThreeQuaternion:function(){return this.threeQuaternions.length>0?this.threeQuaternions.pop():new THREE.Quaternion},freeThreeQuaternion:function(e){this.threeQuaternions.push(e)},allocThreeEuler:function(){return this.threeEulers.length>0?this.threeEulers.pop():new THREE.Euler},freeThreeEuler:function(e){this.threeEulers.push(e)},allocTransform:function(){return this.transforms.length>0?this.transforms.pop():new Ammo.btTransform},freeTransform:function(e){this.transforms.push(e)},allocQuaternion:function(){return this.quaternions.length>0?this.quaternions.pop():new Ammo.btQuaternion},freeQuaternion:function(e){this.quaternions.push(e)},allocVector3:function(){return this.vector3s.length>0?this.vector3s.pop():new Ammo.btVector3},freeVector3:function(e){this.vector3s.push(e)},setIdentity:function(e){e.setIdentity()},getBasis:function(e){var t=this.allocQuaternion();return e.getBasis().getRotation(t),t},getBasisAsMatrix3:function(e){var t=this.getBasis(e),r=this.quaternionToMatrix3(t);return this.freeQuaternion(t),r},getOrigin:function(e){return e.getOrigin()},setOrigin:function(e,t){e.getOrigin().setValue(t.x(),t.y(),t.z())},copyOrigin:function(e,t){var r=t.getOrigin();this.setOrigin(e,r)},setBasis:function(e,t){e.setRotation(t)},setBasisFromMatrix3:function(e,t){var r=this.matrix3ToQuaternion(t);this.setBasis(e,r),this.freeQuaternion(r)},setOriginFromArray3:function(e,t){e.getOrigin().setValue(t[0],t[1],t[2])},setOriginFromThreeVector3:function(e,t){e.getOrigin().setValue(t.x,t.y,t.z)},setBasisFromArray3:function(e,t){var r=this.allocThreeQuaternion(),n=this.allocThreeEuler();n.set(t[0],t[1],t[2]),this.setBasisFromThreeQuaternion(e,r.setFromEuler(n)),this.freeThreeEuler(n),this.freeThreeQuaternion(r)},setBasisFromThreeQuaternion:function(e,t){var r=this.allocQuaternion();r.setX(t.x),r.setY(t.y),r.setZ(t.z),r.setW(t.w),this.setBasis(e,r),this.freeQuaternion(r)},multiplyTransforms:function(e,t){var r=this.allocTransform();this.setIdentity(r);var n=this.getBasisAsMatrix3(e),i=this.getBasisAsMatrix3(t),a=this.getOrigin(e),o=this.getOrigin(t),s=this.multiplyMatrix3ByVector3(n,o),l=this.addVector3(s,a);this.setOrigin(r,l);var u=this.multiplyMatrices3(n,i);return this.setBasisFromMatrix3(r,u),this.freeVector3(s),this.freeVector3(l),r},inverseTransform:function(e){var t=this.allocTransform(),r=this.getBasisAsMatrix3(e),n=this.getOrigin(e),i=this.transposeMatrix3(r),a=this.negativeVector3(n),o=this.multiplyMatrix3ByVector3(i,a);return this.setOrigin(t,o),this.setBasisFromMatrix3(t,i),this.freeVector3(a),this.freeVector3(o),t},multiplyMatrices3:function(e,t){var r=[],n=this.rowOfMatrix3(e,0),i=this.rowOfMatrix3(e,1),a=this.rowOfMatrix3(e,2),o=this.columnOfMatrix3(t,0),s=this.columnOfMatrix3(t,1),l=this.columnOfMatrix3(t,2);return r[0]=this.dotVectors3(n,o),r[1]=this.dotVectors3(n,s),r[2]=this.dotVectors3(n,l),r[3]=this.dotVectors3(i,o),r[4]=this.dotVectors3(i,s),r[5]=this.dotVectors3(i,l),r[6]=this.dotVectors3(a,o),r[7]=this.dotVectors3(a,s),r[8]=this.dotVectors3(a,l),this.freeVector3(n),this.freeVector3(i),this.freeVector3(a),this.freeVector3(o),this.freeVector3(s),this.freeVector3(l),r},addVector3:function(e,t){var r=this.allocVector3();return r.setValue(e.x()+t.x(),e.y()+t.y(),e.z()+t.z()),r},dotVectors3:function(e,t){return e.x()*t.x()+e.y()*t.y()+e.z()*t.z()},rowOfMatrix3:function(e,t){var r=this.allocVector3();return r.setValue(e[3*t+0],e[3*t+1],e[3*t+2]),r},columnOfMatrix3:function(e,t){var r=this.allocVector3();return r.setValue(e[t+0],e[t+3],e[t+6]),r},negativeVector3:function(e){var t=this.allocVector3();return t.setValue(-e.x(),-e.y(),-e.z()),t},multiplyMatrix3ByVector3:function(e,t){var r=this.allocVector3(),n=this.rowOfMatrix3(e,0),i=this.rowOfMatrix3(e,1),a=this.rowOfMatrix3(e,2),o=this.dotVectors3(n,t),s=this.dotVectors3(i,t),l=this.dotVectors3(a,t);return r.setValue(o,s,l),this.freeVector3(n),this.freeVector3(i),this.freeVector3(a),r},transposeMatrix3:function(e){var t=[];return t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],t},quaternionToMatrix3:function(e){var t=[],r=e.x(),n=e.y(),i=e.z(),a=e.w(),o=r*r,s=n*n,l=i*i,u=r*n,c=n*i,h=i*r,d=r*a,f=n*a,p=i*a;return t[0]=1-2*(s+l),t[1]=2*(u-p),t[2]=2*(h+f),t[3]=2*(u+p),t[4]=1-2*(l+o),t[5]=2*(c-d),t[6]=2*(h-f),t[7]=2*(c+d),t[8]=1-2*(o+s),t},matrix3ToQuaternion:function(e){var t,r,n,i,a,o=e[0]+e[4]+e[8];o>0?(a=.25*(t=2*Math.sqrt(o+1)),r=(e[7]-e[5])/t,n=(e[2]-e[6])/t,i=(e[3]-e[1])/t):e[0]>e[4]&&e[0]>e[8]?(t=2*Math.sqrt(1+e[0]-e[4]-e[8]),a=(e[7]-e[5])/t,r=.25*t,n=(e[1]+e[3])/t,i=(e[2]+e[6])/t):e[4]>e[8]?(t=2*Math.sqrt(1+e[4]-e[0]-e[8]),a=(e[2]-e[6])/t,r=(e[1]+e[3])/t,n=.25*t,i=(e[5]+e[7])/t):(t=2*Math.sqrt(1+e[8]-e[0]-e[4]),a=(e[3]-e[1])/t,r=(e[2]+e[6])/t,n=(e[5]+e[7])/t,i=.25*t);var s=this.allocQuaternion();return s.setX(r),s.setY(n),s.setZ(i),s.setW(a),s}},THREE.MMDPhysics.RigidBody=function(e,t,r,n){this.mesh=e,this.world=t,this.params=r,this.helper=n,this.body=null,this.bone=null,this.boneOffsetForm=null,this.boneOffsetFormInverse=null,this.init()},THREE.MMDPhysics.RigidBody.prototype={constructor:THREE.MMDPhysics.RigidBody,init:function(){var e=this.helper,t=this.params,r=this.mesh.skeleton.bones,n=-1===t.boneIndex?new THREE.Bone:r[t.boneIndex],i=function(e){switch(e.shapeType){case 0:return new Ammo.btSphereShape(e.width);case 1:return new Ammo.btBoxShape(new Ammo.btVector3(e.width,e.height,e.depth));case 2:return new Ammo.btCapsuleShape(e.width,e.height);default:throw"unknown shape type "+e.shapeType}}(t),a=0===t.type?0:t.weight,o=e.allocVector3();o.setValue(0,0,0),0!==a&&i.calculateLocalInertia(a,o);var s=e.allocTransform();e.setIdentity(s),e.setOriginFromArray3(s,t.position),e.setBasisFromArray3(s,t.rotation);var l=e.allocThreeVector3(),u=e.allocTransform();e.setIdentity(u),e.setOriginFromThreeVector3(u,n.getWorldPosition(l));var c=e.multiplyTransforms(u,s),h=new Ammo.btDefaultMotionState(c),d=new Ammo.btRigidBodyConstructionInfo(a,h,i,o);d.set_m_friction(t.friction),d.set_m_restitution(t.restitution);var f=new Ammo.btRigidBody(d);0===t.type&&(f.setCollisionFlags(2|f.getCollisionFlags()),f.setActivationState(4)),f.setDamping(t.positionDamping,t.rotationDamping),f.setSleepingThresholds(0,0),this.world.addRigidBody(f,1<<t.groupIndex,t.groupTarget),this.body=f,this.bone=n,this.boneOffsetForm=s,this.boneOffsetFormInverse=e.inverseTransform(s),e.freeVector3(o),e.freeTransform(c),e.freeTransform(u),e.freeThreeVector3(l)},reset:function(){this.setTransformFromBone()},updateFromBone:function(){-1!==this.params.boneIndex&&0===this.params.type&&this.setTransformFromBone()},updateBone:function(){0!==this.params.type&&-1!==this.params.boneIndex&&(this.updateBoneRotation(),1===this.params.type&&this.updateBonePosition(),this.bone.updateMatrixWorld(!0),2===this.params.type&&this.setPositionFromBone())},getBoneTransform:function(){var e=this.helper,t=e.allocThreeVector3(),r=e.allocThreeQuaternion();this.bone.getWorldPosition(t),this.bone.getWorldQuaternion(r);var n=e.allocTransform();e.setOriginFromThreeVector3(n,t),e.setBasisFromThreeQuaternion(n,r);var i=e.multiplyTransforms(n,this.boneOffsetForm);return e.freeTransform(n),e.freeThreeQuaternion(r),e.freeThreeVector3(t),i},getWorldTransformForBone:function(){var e=this.helper,t=e.allocTransform();this.body.getMotionState().getWorldTransform(t);var r=e.multiplyTransforms(t,this.boneOffsetFormInverse);return e.freeTransform(t),r},setTransformFromBone:function(){var e=this.helper,t=this.getBoneTransform();this.body.setCenterOfMassTransform(t),this.body.getMotionState().setWorldTransform(t),e.freeTransform(t)},setPositionFromBone:function(){var e=this.helper,t=this.getBoneTransform(),r=e.allocTransform();this.body.getMotionState().getWorldTransform(r),e.copyOrigin(r,t),this.body.setCenterOfMassTransform(r),this.body.getMotionState().setWorldTransform(r),e.freeTransform(r),e.freeTransform(t)},updateBoneRotation:function(){this.bone.updateMatrixWorld(!0);var e=this.helper,t=this.getWorldTransformForBone(),r=e.getBasis(t),n=e.allocThreeQuaternion(),i=e.allocThreeQuaternion(),a=e.allocThreeQuaternion();n.set(r.x(),r.y(),r.z(),r.w()),i.setFromRotationMatrix(this.bone.matrixWorld),i.conjugate(),i.multiply(n),a.setFromRotationMatrix(this.bone.matrix),this.bone.quaternion.copy(i.multiply(a)),e.freeThreeQuaternion(n),e.freeThreeQuaternion(i),e.freeThreeQuaternion(a),e.freeQuaternion(r),e.freeTransform(t)},updateBonePosition:function(){var e=this.helper,t=this.getWorldTransformForBone(),r=e.allocThreeVector3(),n=e.getOrigin(t);r.set(n.x(),n.y(),n.z());var i=this.bone.worldToLocal(r);this.bone.position.add(i),e.freeThreeVector3(r),e.freeTransform(t)}},THREE.MMDPhysics.Constraint=function(e,t,r,n,i,a){this.mesh=e,this.world=t,this.bodyA=r,this.bodyB=n,this.params=i,this.helper=a,this.constraint=null,this.init()},THREE.MMDPhysics.Constraint.prototype={constructor:THREE.MMDPhysics.Constraint,init:function(){var e=this.helper,t=this.params,r=this.bodyA,n=this.bodyB,i=e.allocTransform();e.setIdentity(i),e.setOriginFromArray3(i,t.position),e.setBasisFromArray3(i,t.rotation);var a=e.allocTransform(),o=e.allocTransform();r.body.getMotionState().getWorldTransform(a),n.body.getMotionState().getWorldTransform(o);var s=e.inverseTransform(a),l=e.inverseTransform(o),u=e.multiplyTransforms(s,i),c=e.multiplyTransforms(l,i),h=new Ammo.btGeneric6DofSpringConstraint(r.body,n.body,u,c,!0),d=e.allocVector3(),f=e.allocVector3(),p=e.allocVector3(),m=e.allocVector3();d.setValue(t.translationLimitation1[0],t.translationLimitation1[1],t.translationLimitation1[2]),f.setValue(t.translationLimitation2[0],t.translationLimitation2[1],t.translationLimitation2[2]),p.setValue(t.rotationLimitation1[0],t.rotationLimitation1[1],t.rotationLimitation1[2]),m.setValue(t.rotationLimitation2[0],t.rotationLimitation2[1],t.rotationLimitation2[2]),h.setLinearLowerLimit(d),h.setLinearUpperLimit(f),h.setAngularLowerLimit(p),h.setAngularUpperLimit(m);for(var g=0;g<3;g++)0!==t.springPosition[g]&&(h.enableSpring(g,!0),h.setStiffness(g,t.springPosition[g]));for(g=0;g<3;g++)0!==t.springRotation[g]&&(h.enableSpring(g+3,!0),h.setStiffness(g+3,t.springRotation[g]));if(void 0!==h.setParam)for(g=0;g<6;g++)h.setParam(2,.475,g);this.world.addConstraint(h,!0),this.constraint=h,e.freeTransform(i),e.freeTransform(a),e.freeTransform(o),e.freeTransform(s),e.freeTransform(l),e.freeTransform(u),e.freeTransform(c),e.freeVector3(d),e.freeVector3(f),e.freeVector3(p),e.freeVector3(m)}},THREE.MMDPhysicsHelper=function(e){if(void 0===e.physics||void 0===e.geometry.rigidBodies)throw"THREE.MMDPhysicsHelper requires physics in mesh and rigidBodies in mesh.geometry.";THREE.Object3D.call(this),this.root=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.materials=[],this.materials.push(new THREE.MeshBasicMaterial({color:new THREE.Color(16746632),wireframe:!0,depthTest:!1,depthWrite:!1,opacity:.25,transparent:!0})),this.materials.push(new THREE.MeshBasicMaterial({color:new THREE.Color(8978312),wireframe:!0,depthTest:!1,depthWrite:!1,opacity:.25,transparent:!0})),this.materials.push(new THREE.MeshBasicMaterial({color:new THREE.Color(8947967),wireframe:!0,depthTest:!1,depthWrite:!1,opacity:.25,transparent:!0})),this._init(),this.update()},THREE.MMDPhysicsHelper.prototype=Object.create(THREE.Object3D.prototype),THREE.MMDPhysicsHelper.prototype.constructor=THREE.MMDPhysicsHelper,THREE.MMDPhysicsHelper.prototype._init=function(){var e=this.root.geometry.rigidBodies;function t(e){switch(e.shapeType){case 0:return new THREE.SphereBufferGeometry(e.width,16,8);case 1:return new THREE.BoxBufferGeometry(2*e.width,2*e.height,2*e.depth,8,8,8);case 2:return new r(e.width,e.height,16,8);default:return null}}function r(e,t,r,n){var i=new THREE.CylinderBufferGeometry(e,e,t,r,n,!0),a=new THREE.Mesh(new THREE.SphereBufferGeometry(e,r,n,0,2*Math.PI,0,Math.PI/2)),o=new THREE.Mesh(new THREE.SphereBufferGeometry(e,r,n,0,2*Math.PI,Math.PI/2,Math.PI/2));return a.position.set(0,t/2,0),o.position.set(0,-t/2,0),a.updateMatrix(),o.updateMatrix(),i.merge(a.geometry,a.matrix),i.merge(o.geometry,o.matrix),i}for(var n=0,i=e.length;n<i;n++){var a=e[n];this.add(new THREE.Mesh(t(a),this.materials[a.type]))}},THREE.MMDPhysicsHelper.prototype.update=function(){var e,t,r=(h=this.root).geometry.rigidBodies,n=h.physics.bodies,i=(new THREE.Matrix4).getInverse(h.matrixWorld),a=new THREE.Vector3,o=new THREE.Quaternion,s=new THREE.Quaternion;for(var l=0,u=r.length;l<u;l++){var c=n[l].body,h=this.children[l],d=c.getCenterOfMassTransform();h.position.copy((t=d.getOrigin(),a.set(t.x(),t.y(),t.z()),a.applyMatrix4(i),a)),h.quaternion.copy((e=d.getRotation(),o.set(e.x(),e.y(),e.z(),e.w()),s.setFromRotationMatrix(i),s.multiply(o),s))}}},8644:(e,t,r)=>{var n=r(5108);THREE.OrbitControls=function(e,t){var r,i,a,o,s;this.object=e,this.domElement=void 0!==t?t:document,this.enabled=!0,this.target=new THREE.Vector3,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.25,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.enableKeys=!0,this.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40},this.mouseButtons={ORBIT:THREE.MOUSE.LEFT,ZOOM:THREE.MOUSE.MIDDLE,PAN:THREE.MOUSE.RIGHT},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=function(){return m.phi},this.getAzimuthalAngle=function(){return m.theta},this.saveState=function(){l.target0.copy(l.target),l.position0.copy(l.object.position),l.zoom0=l.object.zoom},this.reset=function(){l.target.copy(l.target0),l.object.position.copy(l.position0),l.object.zoom=l.zoom0,l.object.updateProjectionMatrix(),l.dispatchEvent(u),l.update(),f=d.NONE},this.update=(r=new THREE.Vector3,i=(new THREE.Quaternion).setFromUnitVectors(e.up,new THREE.Vector3(0,1,0)),a=i.clone().inverse(),o=new THREE.Vector3,s=new THREE.Quaternion,function(){var e=l.object.position;return r.copy(e).sub(l.target),r.applyQuaternion(i),m.setFromVector3(r),l.autoRotate&&f===d.NONE&&L(2*Math.PI/60/60*l.autoRotateSpeed),m.theta+=g.theta,m.phi+=g.phi,m.theta=Math.max(l.minAzimuthAngle,Math.min(l.maxAzimuthAngle,m.theta)),m.phi=Math.max(l.minPolarAngle,Math.min(l.maxPolarAngle,m.phi)),m.makeSafe(),m.radius*=v,m.radius=Math.max(l.minDistance,Math.min(l.maxDistance,m.radius)),l.target.add(y),r.setFromSpherical(m),r.applyQuaternion(a),e.copy(l.target).add(r),l.object.lookAt(l.target),!0===l.enableDamping?(g.theta*=1-l.dampingFactor,g.phi*=1-l.dampingFactor):g.set(0,0,0),v=1,y.set(0,0,0),!!(b||o.distanceToSquared(l.object.position)>p||8*(1-s.dot(l.object.quaternion))>p)&&(l.dispatchEvent(u),o.copy(l.object.position),s.copy(l.object.quaternion),b=!1,!0)}),this.dispose=function(){l.domElement.removeEventListener("contextmenu",q,!1),l.domElement.removeEventListener("mousedown",D,!1),l.domElement.removeEventListener("wheel",z,!1),l.domElement.removeEventListener("touchstart",V,!1),l.domElement.removeEventListener("touchend",W,!1),l.domElement.removeEventListener("touchmove",G,!1),document.removeEventListener("mousemove",F,!1),document.removeEventListener("mouseup",B,!1),window.removeEventListener("keydown",j,!1)};var l=this,u={type:"change"},c={type:"start"},h={type:"end"},d={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_DOLLY:4,TOUCH_PAN:5},f=d.NONE,p=1e-6,m=new THREE.Spherical,g=new THREE.Spherical,v=1,y=new THREE.Vector3,b=!1,E=new THREE.Vector2,x=new THREE.Vector2,w=new THREE.Vector2,T=new THREE.Vector2,_=new THREE.Vector2,S=new THREE.Vector2,M=new THREE.Vector2,R=new THREE.Vector2,A=new THREE.Vector2;function C(){return Math.pow(.95,l.zoomSpeed)}function L(e){g.theta-=e}function O(e){g.phi-=e}var I,P=(I=new THREE.Vector3,function(e,t){I.setFromMatrixColumn(t,0),I.multiplyScalar(-e),y.add(I)}),H=function(){var e=new THREE.Vector3;return function(t,r){e.setFromMatrixColumn(r,1),e.multiplyScalar(t),y.add(e)}}(),k=function(){var e=new THREE.Vector3;return function(t,r){var i=l.domElement===document?l.domElement.body:l.domElement;if(l.object.isPerspectiveCamera){var a=l.object.position;e.copy(a).sub(l.target);var o=e.length();o*=Math.tan(l.object.fov/2*Math.PI/180),P(2*t*o/i.clientHeight,l.object.matrix),H(2*r*o/i.clientHeight,l.object.matrix)}else l.object.isOrthographicCamera?(P(t*(l.object.right-l.object.left)/l.object.zoom/i.clientWidth,l.object.matrix),H(r*(l.object.top-l.object.bottom)/l.object.zoom/i.clientHeight,l.object.matrix)):(n.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),l.enablePan=!1)}}();function N(e){l.object.isPerspectiveCamera?v/=e:l.object.isOrthographicCamera?(l.object.zoom=Math.max(l.minZoom,Math.min(l.maxZoom,l.object.zoom*e)),l.object.updateProjectionMatrix(),b=!0):(n.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),l.enableZoom=!1)}function U(e){l.object.isPerspectiveCamera?v*=e:l.object.isOrthographicCamera?(l.object.zoom=Math.max(l.minZoom,Math.min(l.maxZoom,l.object.zoom/e)),l.object.updateProjectionMatrix(),b=!0):(n.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),l.enableZoom=!1)}function D(e){if(!1!==l.enabled){switch(e.preventDefault(),e.button){case l.mouseButtons.ORBIT:if(!1===l.enableRotate)return;!function(e){E.set(e.clientX,e.clientY)}(e),f=d.ROTATE;break;case l.mouseButtons.ZOOM:if(!1===l.enableZoom)return;!function(e){M.set(e.clientX,e.clientY)}(e),f=d.DOLLY;break;case l.mouseButtons.PAN:if(!1===l.enablePan)return;!function(e){T.set(e.clientX,e.clientY)}(e),f=d.PAN}f!==d.NONE&&(document.addEventListener("mousemove",F,!1),document.addEventListener("mouseup",B,!1),l.dispatchEvent(c))}}function F(e){if(!1!==l.enabled)switch(e.preventDefault(),f){case d.ROTATE:if(!1===l.enableRotate)return;!function(e){x.set(e.clientX,e.clientY),w.subVectors(x,E);var t=l.domElement===document?l.domElement.body:l.domElement;L(2*Math.PI*w.x/t.clientWidth*l.rotateSpeed),O(2*Math.PI*w.y/t.clientHeight*l.rotateSpeed),E.copy(x),l.update()}(e);break;case d.DOLLY:if(!1===l.enableZoom)return;!function(e){R.set(e.clientX,e.clientY),A.subVectors(R,M),A.y>0?N(C()):A.y<0&&U(C()),M.copy(R),l.update()}(e);break;case d.PAN:if(!1===l.enablePan)return;!function(e){_.set(e.clientX,e.clientY),S.subVectors(_,T),k(S.x,S.y),T.copy(_),l.update()}(e)}}function B(e){!1!==l.enabled&&(document.removeEventListener("mousemove",F,!1),document.removeEventListener("mouseup",B,!1),l.dispatchEvent(h),f=d.NONE)}function z(e){!1===l.enabled||!1===l.enableZoom||f!==d.NONE&&f!==d.ROTATE||(e.preventDefault(),e.stopPropagation(),function(e){e.deltaY<0?U(C()):e.deltaY>0&&N(C()),l.update()}(e),l.dispatchEvent(c),l.dispatchEvent(h))}function j(e){!1!==l.enabled&&!1!==l.enableKeys&&!1!==l.enablePan&&function(e){switch(e.keyCode){case l.keys.UP:k(0,l.keyPanSpeed),l.update();break;case l.keys.BOTTOM:k(0,-l.keyPanSpeed),l.update();break;case l.keys.LEFT:k(l.keyPanSpeed,0),l.update();break;case l.keys.RIGHT:k(-l.keyPanSpeed,0),l.update()}}(e)}function V(e){if(!1!==l.enabled){switch(e.touches.length){case 1:if(!1===l.enableRotate)return;!function(e){E.set(e.touches[0].pageX,e.touches[0].pageY)}(e),f=d.TOUCH_ROTATE;break;case 2:if(!1===l.enableZoom)return;!function(e){var t=e.touches[0].pageX-e.touches[1].pageX,r=e.touches[0].pageY-e.touches[1].pageY,n=Math.sqrt(t*t+r*r);M.set(0,n)}(e),f=d.TOUCH_DOLLY;break;case 3:if(!1===l.enablePan)return;!function(e){T.set(e.touches[0].pageX,e.touches[0].pageY)}(e),f=d.TOUCH_PAN;break;default:f=d.NONE}f!==d.NONE&&l.dispatchEvent(c)}}function G(e){if(!1!==l.enabled)switch(e.preventDefault(),e.stopPropagation(),e.touches.length){case 1:if(!1===l.enableRotate)return;if(f!==d.TOUCH_ROTATE)return;!function(e){x.set(e.touches[0].pageX,e.touches[0].pageY),w.subVectors(x,E);var t=l.domElement===document?l.domElement.body:l.domElement;L(2*Math.PI*w.x/t.clientWidth*l.rotateSpeed),O(2*Math.PI*w.y/t.clientHeight*l.rotateSpeed),E.copy(x),l.update()}(e);break;case 2:if(!1===l.enableZoom)return;if(f!==d.TOUCH_DOLLY)return;!function(e){var t=e.touches[0].pageX-e.touches[1].pageX,r=e.touches[0].pageY-e.touches[1].pageY,n=Math.sqrt(t*t+r*r);R.set(0,n),A.subVectors(R,M),A.y>0?U(C()):A.y<0&&N(C()),M.copy(R),l.update()}(e);break;case 3:if(!1===l.enablePan)return;if(f!==d.TOUCH_PAN)return;!function(e){_.set(e.touches[0].pageX,e.touches[0].pageY),S.subVectors(_,T),k(S.x,S.y),T.copy(_),l.update()}(e);break;default:f=d.NONE}}function W(e){!1!==l.enabled&&(l.dispatchEvent(h),f=d.NONE)}function q(e){!1!==l.enabled&&e.preventDefault()}l.domElement.addEventListener("contextmenu",q,!1),l.domElement.addEventListener("mousedown",D,!1),l.domElement.addEventListener("wheel",z,!1),l.domElement.addEventListener("touchstart",V,!1),l.domElement.addEventListener("touchend",W,!1),l.domElement.addEventListener("touchmove",G,!1),window.addEventListener("keydown",j,!1),this.update()},THREE.OrbitControls.prototype=Object.create(THREE.EventDispatcher.prototype),THREE.OrbitControls.prototype.constructor=THREE.OrbitControls,Object.defineProperties(THREE.OrbitControls.prototype,{center:{get:function(){return n.warn("THREE.OrbitControls: .center has been renamed to .target"),this.target}},noZoom:{get:function(){return n.warn("THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead."),!this.enableZoom},set:function(e){n.warn("THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead."),this.enableZoom=!e}},noRotate:{get:function(){return n.warn("THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead."),!this.enableRotate},set:function(e){n.warn("THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead."),this.enableRotate=!e}},noPan:{get:function(){return n.warn("THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead."),!this.enablePan},set:function(e){n.warn("THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead."),this.enablePan=!e}},noKeys:{get:function(){return n.warn("THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead."),!this.enableKeys},set:function(e){n.warn("THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead."),this.enableKeys=!e}},staticMoving:{get:function(){return n.warn("THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead."),!this.enableDamping},set:function(e){n.warn("THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead."),this.enableDamping=!e}},dynamicDampingFactor:{get:function(){return n.warn("THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead."),this.dampingFactor},set:function(e){n.warn("THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead."),this.dampingFactor=e}}})},395:()=>{THREE.TrackballControls=function(e,t){var r=this,n={NONE:-1,ROTATE:0,ZOOM:1,PAN:2,TOUCH_ROTATE:3,TOUCH_ZOOM_PAN:4};this.object=e,this.domElement=void 0!==t?t:document,this.enabled=!0,this.screen={left:0,top:0,width:0,height:0},this.rotateSpeed=1,this.zoomSpeed=1.2,this.panSpeed=.3,this.noRotate=!1,this.noZoom=!1,this.noPan=!1,this.staticMoving=!1,this.dynamicDampingFactor=.2,this.minDistance=0,this.maxDistance=1/0,this.keys=[65,83,68],this.target=new THREE.Vector3;var i=new THREE.Vector3,a=n.NONE,o=n.NONE,s=new THREE.Vector3,l=new THREE.Vector2,u=new THREE.Vector2,c=new THREE.Vector3,h=0,d=new THREE.Vector2,f=new THREE.Vector2,p=0,m=0,g=new THREE.Vector2,v=new THREE.Vector2;this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.up0=this.object.up.clone();var y={type:"change"},b={type:"start"},E={type:"end"};this.handleResize=function(){if(this.domElement===document)this.screen.left=0,this.screen.top=0,this.screen.width=window.innerWidth,this.screen.height=window.innerHeight;else{var e=this.domElement.getBoundingClientRect(),t=this.domElement.ownerDocument.documentElement;this.screen.left=e.left+window.pageXOffset-t.clientLeft,this.screen.top=e.top+window.pageYOffset-t.clientTop,this.screen.width=e.width,this.screen.height=e.height}},this.handleEvent=function(e){"function"==typeof this[e.type]&&this[e.type](e)};var x,w,T,_,S,M,R,A,C,L,O,I=(x=new THREE.Vector2,function(e,t){return x.set((e-r.screen.left)/r.screen.width,(t-r.screen.top)/r.screen.height),x}),P=function(){var e=new THREE.Vector2;return function(t,n){return e.set((t-.5*r.screen.width-r.screen.left)/(.5*r.screen.width),(r.screen.height+2*(r.screen.top-n))/r.screen.width),e}}();function H(e){!1!==r.enabled&&(window.removeEventListener("keydown",H),o=a,a===n.NONE&&(e.keyCode!==r.keys[n.ROTATE]||r.noRotate?e.keyCode!==r.keys[n.ZOOM]||r.noZoom?e.keyCode!==r.keys[n.PAN]||r.noPan||(a=n.PAN):a=n.ZOOM:a=n.ROTATE))}function k(e){!1!==r.enabled&&(a=o,window.addEventListener("keydown",H,!1))}function N(e){!1!==r.enabled&&(e.preventDefault(),e.stopPropagation(),a===n.NONE&&(a=e.button),a!==n.ROTATE||r.noRotate?a!==n.ZOOM||r.noZoom?a!==n.PAN||r.noPan||(g.copy(I(e.pageX,e.pageY)),v.copy(g)):(d.copy(I(e.pageX,e.pageY)),f.copy(d)):(u.copy(P(e.pageX,e.pageY)),l.copy(u)),document.addEventListener("mousemove",U,!1),document.addEventListener("mouseup",D,!1),r.dispatchEvent(b))}function U(e){!1!==r.enabled&&(e.preventDefault(),e.stopPropagation(),a!==n.ROTATE||r.noRotate?a!==n.ZOOM||r.noZoom?a!==n.PAN||r.noPan||v.copy(I(e.pageX,e.pageY)):f.copy(I(e.pageX,e.pageY)):(l.copy(u),u.copy(P(e.pageX,e.pageY))))}function D(e){!1!==r.enabled&&(e.preventDefault(),e.stopPropagation(),a=n.NONE,document.removeEventListener("mousemove",U),document.removeEventListener("mouseup",D),r.dispatchEvent(E))}function F(e){if(!1!==r.enabled){switch(e.preventDefault(),e.stopPropagation(),e.deltaMode){case 2:d.y-=.025*e.deltaY;break;case 1:d.y-=.01*e.deltaY;break;default:d.y-=25e-5*e.deltaY}r.dispatchEvent(b),r.dispatchEvent(E)}}function B(e){if(!1!==r.enabled){if(1===e.touches.length)a=n.TOUCH_ROTATE,u.copy(P(e.touches[0].pageX,e.touches[0].pageY)),l.copy(u);else{a=n.TOUCH_ZOOM_PAN;var t=e.touches[0].pageX-e.touches[1].pageX,i=e.touches[0].pageY-e.touches[1].pageY;m=p=Math.sqrt(t*t+i*i);var o=(e.touches[0].pageX+e.touches[1].pageX)/2,s=(e.touches[0].pageY+e.touches[1].pageY)/2;g.copy(I(o,s)),v.copy(g)}r.dispatchEvent(b)}}function z(e){if(!1!==r.enabled)if(e.preventDefault(),e.stopPropagation(),1===e.touches.length)l.copy(u),u.copy(P(e.touches[0].pageX,e.touches[0].pageY));else{var t=e.touches[0].pageX-e.touches[1].pageX,n=e.touches[0].pageY-e.touches[1].pageY;m=Math.sqrt(t*t+n*n);var i=(e.touches[0].pageX+e.touches[1].pageX)/2,a=(e.touches[0].pageY+e.touches[1].pageY)/2;v.copy(I(i,a))}}function j(e){if(!1!==r.enabled){switch(e.touches.length){case 0:a=n.NONE;break;case 1:a=n.TOUCH_ROTATE,u.copy(P(e.touches[0].pageX,e.touches[0].pageY)),l.copy(u)}r.dispatchEvent(E)}}function V(e){!1!==r.enabled&&e.preventDefault()}this.rotateCamera=(T=new THREE.Vector3,_=new THREE.Quaternion,S=new THREE.Vector3,M=new THREE.Vector3,R=new THREE.Vector3,A=new THREE.Vector3,function(){A.set(u.x-l.x,u.y-l.y,0),(w=A.length())?(s.copy(r.object.position).sub(r.target),S.copy(s).normalize(),M.copy(r.object.up).normalize(),R.crossVectors(M,S).normalize(),M.setLength(u.y-l.y),R.setLength(u.x-l.x),A.copy(M.add(R)),T.crossVectors(A,s).normalize(),w*=r.rotateSpeed,_.setFromAxisAngle(T,w),s.applyQuaternion(_),r.object.up.applyQuaternion(_),c.copy(T),h=w):!r.staticMoving&&h&&(h*=Math.sqrt(1-r.dynamicDampingFactor),s.copy(r.object.position).sub(r.target),_.setFromAxisAngle(c,h),s.applyQuaternion(_),r.object.up.applyQuaternion(_)),l.copy(u)}),this.zoomCamera=function(){var e;a===n.TOUCH_ZOOM_PAN?(e=p/m,p=m,s.multiplyScalar(e)):(1!==(e=1+(f.y-d.y)*r.zoomSpeed)&&e>0&&s.multiplyScalar(e),r.staticMoving?d.copy(f):d.y+=(f.y-d.y)*this.dynamicDampingFactor)},this.panCamera=(C=new THREE.Vector2,L=new THREE.Vector3,O=new THREE.Vector3,function(){C.copy(v).sub(g),C.lengthSq()&&(C.multiplyScalar(s.length()*r.panSpeed),O.copy(s).cross(r.object.up).setLength(C.x),O.add(L.copy(r.object.up).setLength(C.y)),r.object.position.add(O),r.target.add(O),r.staticMoving?g.copy(v):g.add(C.subVectors(v,g).multiplyScalar(r.dynamicDampingFactor)))}),this.checkDistances=function(){r.noZoom&&r.noPan||(s.lengthSq()>r.maxDistance*r.maxDistance&&(r.object.position.addVectors(r.target,s.setLength(r.maxDistance)),d.copy(f)),s.lengthSq()<r.minDistance*r.minDistance&&(r.object.position.addVectors(r.target,s.setLength(r.minDistance)),d.copy(f)))},this.update=function(){s.subVectors(r.object.position,r.target),r.noRotate||r.rotateCamera(),r.noZoom||r.zoomCamera(),r.noPan||r.panCamera(),r.object.position.addVectors(r.target,s),r.checkDistances(),r.object.lookAt(r.target),i.distanceToSquared(r.object.position)>1e-6&&(r.dispatchEvent(y),i.copy(r.object.position))},this.reset=function(){a=n.NONE,o=n.NONE,r.target.copy(r.target0),r.object.position.copy(r.position0),r.object.up.copy(r.up0),s.subVectors(r.object.position,r.target),r.object.lookAt(r.target),r.dispatchEvent(y),i.copy(r.object.position)},this.dispose=function(){this.domElement.removeEventListener("contextmenu",V,!1),this.domElement.removeEventListener("mousedown",N,!1),this.domElement.removeEventListener("wheel",F,!1),this.domElement.removeEventListener("touchstart",B,!1),this.domElement.removeEventListener("touchend",j,!1),this.domElement.removeEventListener("touchmove",z,!1),document.removeEventListener("mousemove",U,!1),document.removeEventListener("mouseup",D,!1),window.removeEventListener("keydown",H,!1),window.removeEventListener("keyup",k,!1)},this.domElement.addEventListener("contextmenu",V,!1),this.domElement.addEventListener("mousedown",N,!1),this.domElement.addEventListener("wheel",F,!1),this.domElement.addEventListener("touchstart",B,!1),this.domElement.addEventListener("touchend",j,!1),this.domElement.addEventListener("touchmove",z,!1),window.addEventListener("keydown",H,!1),window.addEventListener("keyup",k,!1),this.handleResize(),this.update()},THREE.TrackballControls.prototype=Object.create(THREE.EventDispatcher.prototype),THREE.TrackballControls.prototype.constructor=THREE.TrackballControls},9949:()=>{THREE.NURBSCurve=function(e,t,r,n,i){THREE.Curve.call(this),this.degree=e,this.knots=t,this.controlPoints=[],this.startKnot=n||0,this.endKnot=i||this.knots.length-1;for(var a=0;a<r.length;++a){var o=r[a];this.controlPoints[a]=new THREE.Vector4(o.x,o.y,o.z,o.w)}},THREE.NURBSCurve.prototype=Object.create(THREE.Curve.prototype),THREE.NURBSCurve.prototype.constructor=THREE.NURBSCurve,THREE.NURBSCurve.prototype.getPoint=function(e){var t=this.knots[this.startKnot]+e*(this.knots[this.endKnot]-this.knots[this.startKnot]),r=THREE.NURBSUtils.calcBSplinePoint(this.degree,this.knots,this.controlPoints,t);return 1!=r.w&&r.divideScalar(r.w),new THREE.Vector3(r.x,r.y,r.z)},THREE.NURBSCurve.prototype.getTangent=function(e){var t=this.knots[0]+e*(this.knots[this.knots.length-1]-this.knots[0]),r=THREE.NURBSUtils.calcNURBSDerivatives(this.degree,this.knots,this.controlPoints,t,1)[1].clone();return r.normalize(),r}},6249:()=>{THREE.NURBSUtils={findSpan:function(e,t,r){var n=r.length-e-1;if(t>=r[n])return n-1;if(t<=r[e])return e;for(var i=e,a=n,o=Math.floor((i+a)/2);t<r[o]||t>=r[o+1];)t<r[o]?a=o:i=o,o=Math.floor((i+a)/2);return o},calcBasisFunctions:function(e,t,r,n){var i=[],a=[],o=[];i[0]=1;for(var s=1;s<=r;++s){a[s]=t-n[e+1-s],o[s]=n[e+s]-t;for(var l=0,u=0;u<s;++u){var c=o[u+1],h=a[s-u],d=i[u]/(c+h);i[u]=l+c*d,l=h*d}i[s]=l}return i},calcBSplinePoint:function(e,t,r,n){for(var i=this.findSpan(e,n,t),a=this.calcBasisFunctions(i,n,e,t),o=new THREE.Vector4(0,0,0,0),s=0;s<=e;++s){var l=r[i-e+s],u=a[s],c=l.w*u;o.x+=l.x*c,o.y+=l.y*c,o.z+=l.z*c,o.w+=l.w*u}return o},calcBasisFunctionDerivatives:function(e,t,r,n,i){for(var a=[],o=0;o<=r;++o)a[o]=0;var s=[];for(o=0;o<=n;++o)s[o]=a.slice(0);var l=[];for(o=0;o<=r;++o)l[o]=a.slice(0);l[0][0]=1;for(var u=a.slice(0),c=a.slice(0),h=1;h<=r;++h){u[h]=t-i[e+1-h],c[h]=i[e+h]-t;for(var d=0,f=0;f<h;++f){var p=c[f+1],m=u[h-f];l[h][f]=p+m;var g=l[f][h-1]/l[h][f];l[f][h]=d+p*g,d=m*g}l[h][h]=d}for(h=0;h<=r;++h)s[0][h]=l[h][r];for(f=0;f<=r;++f){var v=0,y=1,b=[];for(o=0;o<=r;++o)b[o]=a.slice(0);b[0][0]=1;for(var E=1;E<=n;++E){var x=0,w=f-E,T=r-E;f>=E&&(b[y][0]=b[v][0]/l[T+1][w],x=b[y][0]*l[w][T]);var _=f-1<=T?E-1:r-f;for(h=w>=-1?1:-w;h<=_;++h)b[y][h]=(b[v][h]-b[v][h-1])/l[T+1][w+h],x+=b[y][h]*l[w+h][T];f<=T&&(b[y][E]=-b[v][E-1]/l[T+1][f],x+=b[y][E]*l[f][T]),s[E][f]=x;h=v;v=y,y=h}}for(f=r,E=1;E<=n;++E){for(h=0;h<=r;++h)s[E][h]*=f;f*=r-E}return s},calcBSplineDerivatives:function(e,t,r,n,i){for(var a=i<e?i:e,o=[],s=this.findSpan(e,n,t),l=this.calcBasisFunctionDerivatives(s,n,e,a,t),u=[],c=0;c<r.length;++c){var h=(f=r[c].clone()).w;f.x*=h,f.y*=h,f.z*=h,u[c]=f}for(var d=0;d<=a;++d){for(var f=u[s-e].clone().multiplyScalar(l[d][0]),p=1;p<=e;++p)f.add(u[s-e+p].clone().multiplyScalar(l[d][p]));o[d]=f}for(d=a+1;d<=i+1;++d)o[d]=new THREE.Vector4(0,0,0);return o},calcKoverI:function(e,t){for(var r=1,n=2;n<=e;++n)r*=n;var i=1;for(n=2;n<=t;++n)i*=n;for(n=2;n<=e-t;++n)i*=n;return r/i},calcRationalCurveDerivatives:function(e){for(var t=e.length,r=[],n=[],i=0;i<t;++i){var a=e[i];r[i]=new THREE.Vector3(a.x,a.y,a.z),n[i]=a.w}for(var o=[],s=0;s<t;++s){var l=r[s].clone();for(i=1;i<=s;++i)l.sub(o[s-i].clone().multiplyScalar(this.calcKoverI(s,i)*n[i]));o[s]=l.divideScalar(n[0])}return o},calcNURBSDerivatives:function(e,t,r,n,i){var a=this.calcBSplineDerivatives(e,t,r,n,i);return this.calcRationalCurveDerivatives(a)},calcSurfacePoint:function(e,t,r,n,i,a,o){for(var s=this.findSpan(e,a,r),l=this.findSpan(t,o,n),u=this.calcBasisFunctions(s,a,e,r),c=this.calcBasisFunctions(l,o,t,n),h=[],d=0;d<=t;++d){h[d]=new THREE.Vector4(0,0,0,0);for(var f=0;f<=e;++f){var p=i[s-e+f][l-t+d].clone(),m=p.w;p.x*=m,p.y*=m,p.z*=m,h[d].add(p.multiplyScalar(u[f]))}}var g=new THREE.Vector4(0,0,0,0);for(d=0;d<=t;++d)g.add(h[d].multiplyScalar(c[d]));return g.divideScalar(g.w),new THREE.Vector3(g.x,g.y,g.z)}}},8878:(e,t,r)=>{var n=r(5108);THREE.OutlineEffect=function(e,t){t=t||{},this.enabled=!0;var r=void 0!==t.defaultThickness?t.defaultThickness:.003,i=void 0!==t.defaultColor?t.defaultColor:new THREE.Color(0),a=void 0!==t.defaultAlpha?t.defaultAlpha:1,o=void 0!==t.defaultKeepAlive&&t.defaultKeepAlive,s={},l={},u={},c={MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"phong",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical"},h={outlineThickness:{type:"f",value:r},outlineColor:{type:"c",value:i},outlineAlpha:{type:"f",value:a}},d=["#include <fog_pars_vertex>","uniform float outlineThickness;","vec4 calculateOutline( vec4 pos, vec3 objectNormal, vec4 skinned ) {","\tfloat thickness = outlineThickness;","\tconst float ratio = 1.0;","\tvec4 pos2 = projectionMatrix * modelViewMatrix * vec4( skinned.xyz + objectNormal, 1.0 );","\tvec4 norm = normalize( pos - pos2 );","\treturn pos + norm * thickness * pos.w * ratio;","}"].join("\n"),f=["#if ! defined( LAMBERT ) && ! defined( PHONG ) && ! defined( TOON ) && ! defined( PHYSICAL )","\t#ifndef USE_ENVMAP","\t\tvec3 objectNormal = normalize( normal );","\t#endif","#endif","#ifdef FLIP_SIDED","\tobjectNormal = -objectNormal;","#endif","#ifdef DECLARE_TRANSFORMED","\tvec3 transformed = vec3( position );","#endif","gl_Position = calculateOutline( gl_Position, objectNormal, vec4( transformed, 1.0 ) );","#include <fog_vertex>"].join("\n"),p=["#include <common>","#include <fog_pars_fragment>","uniform vec3 outlineColor;","uniform float outlineAlpha;","void main() {","\tgl_FragColor = vec4( outlineColor, outlineAlpha );","\t#include <fog_fragment>","}"].join("\n");function m(){return new THREE.ShaderMaterial({name:"invisible",visible:!1})}function g(e){var t,r,i=c[e.type];e.outlineParameters;if(void 0!==i){var a=THREE.ShaderLib[i];t=a.uniforms,r=a.vertexShader}else if(!0===e.isRawShaderMaterial){if(t=e.uniforms,r=e.vertexShader,!/attribute\s+vec3\s+position\s*;/.test(r)||!/attribute\s+vec3\s+normal\s*;/.test(r))return n.warn("THREE.OutlineEffect requires both vec3 position and normal attributes in vertex shader, does not draw outline for "+e.name+"(uuid:"+e.uuid+") material."),m()}else{if(!0!==e.isShaderMaterial)return m();t=e.uniforms,r=e.vertexShader}var o=Object.assign({},t,h),s=r.replace(/void\s+main\s*\(\s*\)/,d+"\nvoid main()").replace(/\}\s*$/,f+"\n}").replace(/#include\s+<[\w_]*light[\w_]*>/g,""),l={};return/vec3\s+transformed\s*=/.test(r)||/#include\s+<begin_vertex>/.test(r)||(l.DECLARE_TRANSFORMED=!0),new THREE.ShaderMaterial({defines:l,uniforms:o,vertexShader:s,fragmentShader:p,side:THREE.BackSide,skinning:!1,morphTargets:!1,morphNormals:!1,fog:!1})}function v(e){var t=function(e){var t=s[e.uuid];return void 0===t&&(t={material:g(e),used:!0,keepAlive:o,count:0},s[e.uuid]=t),t.used=!0,t.material}(e);return l[t.uuid]=e,function(e,t){if("invisible"===e.name)return;var r=t.outlineParameters;e.skinning=t.skinning,e.morphTargets=t.morphTargets,e.morphNormals=t.morphNormals,e.fog=t.fog,void 0!==r?(!1===t.visible?e.visible=!1:e.visible=void 0===r.visible||r.visible,e.transparent=void 0!==r.alpha&&r.alpha<1||t.transparent,void 0!==r.keepAlive&&(s[t.uuid].keepAlive=r.keepAlive)):(e.transparent=t.transparent,e.visible=t.visible);!0!==t.wireframe&&!1!==t.depthTest||(e.visible=!1)}(t,e),t}function y(e){if(void 0!==e.material){if(Array.isArray(e.material))for(var t=0,r=e.material.length;t<r;t++)e.material[t]=v(e.material[t]);else e.material=v(e.material);u[e.uuid]=e.onBeforeRender,e.onBeforeRender=E}}function b(e){if(void 0!==e.material){if(Array.isArray(e.material))for(var t=0,r=e.material.length;t<r;t++)e.material[t]=l[e.material[t].uuid];else e.material=l[e.material.uuid];e.onBeforeRender=u[e.uuid]}}function E(e,t,r,n,i,a){var o=l[i.uuid];void 0!==o&&function(e,t){var r=t.outlineParameters;e.uniforms.outlineAlpha.value=t.opacity,void 0!==r&&(void 0!==r.thickness&&(e.uniforms.outlineThickness.value=r.thickness),void 0!==r.color&&e.uniforms.outlineColor.value.copy(r.color),void 0!==r.alpha&&(e.uniforms.outlineAlpha.value=r.alpha))}(i,o)}this.render=function(t,r,n,i){if(!1!==this.enabled){var a=e.autoClear;e.autoClear=this.autoClear,e.render(t,r,n,i);var o=t.autoUpdate,c=t.background,h=e.shadowMap.enabled;t.autoUpdate=!1,t.background=null,e.autoClear=!1,e.shadowMap.enabled=!1,t.traverse(y),e.render(t,r,n),t.traverse(b),function(){for(var e,t=0,r=(e=Object.keys(l)).length;t<r;t++)l[e[t]]=void 0;for(t=0,r=(e=Object.keys(u)).length;t<r;t++)u[e[t]]=void 0;for(t=0,r=(e=Object.keys(s)).length;t<r;t++){var n=e[t];!1===s[n].used?(s[n].count++,!1===s[n].keepAlive&&s[n].count>60&&delete s[n]):(s[n].used=!1,s[n].count=0)}}(),t.autoUpdate=o,t.background=c,e.autoClear=a,e.shadowMap.enabled=h}else e.render(t,r,n,i)},this.autoClear=e.autoClear,this.domElement=e.domElement,this.shadowMap=e.shadowMap,this.clear=function(t,r,n){e.clear(t,r,n)},this.getPixelRatio=function(){return e.getPixelRatio()},this.setPixelRatio=function(t){e.setPixelRatio(t)},this.getSize=function(){return e.getSize()},this.setSize=function(t,r,n){e.setSize(t,r,n)},this.setViewport=function(t,r,n,i){e.setViewport(t,r,n,i)},this.setScissor=function(t,r,n,i){e.setScissor(t,r,n,i)},this.setScissorTest=function(t){e.setScissorTest(t)},this.setRenderTarget=function(t){e.setRenderTarget(t)}}},6687:()=>{THREE.TeapotBufferGeometry=function(e,t,r,n,i,a,o){"use strict";var s=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,3,16,17,18,7,19,20,21,11,22,23,24,15,25,26,27,18,28,29,30,21,31,32,33,24,34,35,36,27,37,38,39,30,40,41,0,33,42,43,4,36,44,45,8,39,46,47,12,12,13,14,15,48,49,50,51,52,53,54,55,56,57,58,59,15,25,26,27,51,60,61,62,55,63,64,65,59,66,67,68,27,37,38,39,62,69,70,71,65,72,73,74,68,75,76,77,39,46,47,12,71,78,79,48,74,80,81,52,77,82,83,56,56,57,58,59,84,85,86,87,88,89,90,91,92,93,94,95,59,66,67,68,87,96,97,98,91,99,100,101,95,102,103,104,68,75,76,77,98,105,106,107,101,108,109,110,104,111,112,113,77,82,83,56,107,114,115,84,110,116,117,88,113,118,119,92,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,123,136,137,120,127,138,139,124,131,140,141,128,135,142,143,132,132,133,134,135,144,145,146,147,148,149,150,151,68,152,153,154,135,142,143,132,147,155,156,144,151,157,158,148,154,159,160,68,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,164,177,178,161,168,179,180,165,172,181,182,169,176,183,184,173,173,174,175,176,185,186,187,188,189,190,191,192,193,194,195,196,176,183,184,173,188,197,198,185,192,199,200,189,196,201,202,193,203,203,203,203,204,205,206,207,208,208,208,208,209,210,211,212,203,203,203,203,207,213,214,215,208,208,208,208,212,216,217,218,203,203,203,203,215,219,220,221,208,208,208,208,218,222,223,224,203,203,203,203,221,225,226,204,208,208,208,208,224,227,228,209,209,210,211,212,229,230,231,232,233,234,235,236,237,238,239,240,212,216,217,218,232,241,242,243,236,244,245,246,240,247,248,249,218,222,223,224,243,250,251,252,246,253,254,255,249,256,257,258,224,227,228,209,252,259,260,229,255,261,262,233,258,263,264,237,265,265,265,265,266,267,268,269,270,271,272,273,92,119,118,113,265,265,265,265,269,274,275,276,273,277,278,279,113,112,111,104,265,265,265,265,276,280,281,282,279,283,284,285,104,103,102,95,265,265,265,265,282,286,287,266,285,288,289,270,95,94,93,92],l=[1.4,0,2.4,1.4,-.784,2.4,.784,-1.4,2.4,0,-1.4,2.4,1.3375,0,2.53125,1.3375,-.749,2.53125,.749,-1.3375,2.53125,0,-1.3375,2.53125,1.4375,0,2.53125,1.4375,-.805,2.53125,.805,-1.4375,2.53125,0,-1.4375,2.53125,1.5,0,2.4,1.5,-.84,2.4,.84,-1.5,2.4,0,-1.5,2.4,-.784,-1.4,2.4,-1.4,-.784,2.4,-1.4,0,2.4,-.749,-1.3375,2.53125,-1.3375,-.749,2.53125,-1.3375,0,2.53125,-.805,-1.4375,2.53125,-1.4375,-.805,2.53125,-1.4375,0,2.53125,-.84,-1.5,2.4,-1.5,-.84,2.4,-1.5,0,2.4,-1.4,.784,2.4,-.784,1.4,2.4,0,1.4,2.4,-1.3375,.749,2.53125,-.749,1.3375,2.53125,0,1.3375,2.53125,-1.4375,.805,2.53125,-.805,1.4375,2.53125,0,1.4375,2.53125,-1.5,.84,2.4,-.84,1.5,2.4,0,1.5,2.4,.784,1.4,2.4,1.4,.784,2.4,.749,1.3375,2.53125,1.3375,.749,2.53125,.805,1.4375,2.53125,1.4375,.805,2.53125,.84,1.5,2.4,1.5,.84,2.4,1.75,0,1.875,1.75,-.98,1.875,.98,-1.75,1.875,0,-1.75,1.875,2,0,1.35,2,-1.12,1.35,1.12,-2,1.35,0,-2,1.35,2,0,.9,2,-1.12,.9,1.12,-2,.9,0,-2,.9,-.98,-1.75,1.875,-1.75,-.98,1.875,-1.75,0,1.875,-1.12,-2,1.35,-2,-1.12,1.35,-2,0,1.35,-1.12,-2,.9,-2,-1.12,.9,-2,0,.9,-1.75,.98,1.875,-.98,1.75,1.875,0,1.75,1.875,-2,1.12,1.35,-1.12,2,1.35,0,2,1.35,-2,1.12,.9,-1.12,2,.9,0,2,.9,.98,1.75,1.875,1.75,.98,1.875,1.12,2,1.35,2,1.12,1.35,1.12,2,.9,2,1.12,.9,2,0,.45,2,-1.12,.45,1.12,-2,.45,0,-2,.45,1.5,0,.225,1.5,-.84,.225,.84,-1.5,.225,0,-1.5,.225,1.5,0,.15,1.5,-.84,.15,.84,-1.5,.15,0,-1.5,.15,-1.12,-2,.45,-2,-1.12,.45,-2,0,.45,-.84,-1.5,.225,-1.5,-.84,.225,-1.5,0,.225,-.84,-1.5,.15,-1.5,-.84,.15,-1.5,0,.15,-2,1.12,.45,-1.12,2,.45,0,2,.45,-1.5,.84,.225,-.84,1.5,.225,0,1.5,.225,-1.5,.84,.15,-.84,1.5,.15,0,1.5,.15,1.12,2,.45,2,1.12,.45,.84,1.5,.225,1.5,.84,.225,.84,1.5,.15,1.5,.84,.15,-1.6,0,2.025,-1.6,-.3,2.025,-1.5,-.3,2.25,-1.5,0,2.25,-2.3,0,2.025,-2.3,-.3,2.025,-2.5,-.3,2.25,-2.5,0,2.25,-2.7,0,2.025,-2.7,-.3,2.025,-3,-.3,2.25,-3,0,2.25,-2.7,0,1.8,-2.7,-.3,1.8,-3,-.3,1.8,-3,0,1.8,-1.5,.3,2.25,-1.6,.3,2.025,-2.5,.3,2.25,-2.3,.3,2.025,-3,.3,2.25,-2.7,.3,2.025,-3,.3,1.8,-2.7,.3,1.8,-2.7,0,1.575,-2.7,-.3,1.575,-3,-.3,1.35,-3,0,1.35,-2.5,0,1.125,-2.5,-.3,1.125,-2.65,-.3,.9375,-2.65,0,.9375,-2,-.3,.9,-1.9,-.3,.6,-1.9,0,.6,-3,.3,1.35,-2.7,.3,1.575,-2.65,.3,.9375,-2.5,.3,1.125,-1.9,.3,.6,-2,.3,.9,1.7,0,1.425,1.7,-.66,1.425,1.7,-.66,.6,1.7,0,.6,2.6,0,1.425,2.6,-.66,1.425,3.1,-.66,.825,3.1,0,.825,2.3,0,2.1,2.3,-.25,2.1,2.4,-.25,2.025,2.4,0,2.025,2.7,0,2.4,2.7,-.25,2.4,3.3,-.25,2.4,3.3,0,2.4,1.7,.66,.6,1.7,.66,1.425,3.1,.66,.825,2.6,.66,1.425,2.4,.25,2.025,2.3,.25,2.1,3.3,.25,2.4,2.7,.25,2.4,2.8,0,2.475,2.8,-.25,2.475,3.525,-.25,2.49375,3.525,0,2.49375,2.9,0,2.475,2.9,-.15,2.475,3.45,-.15,2.5125,3.45,0,2.5125,2.8,0,2.4,2.8,-.15,2.4,3.2,-.15,2.4,3.2,0,2.4,3.525,.25,2.49375,2.8,.25,2.475,3.45,.15,2.5125,2.9,.15,2.475,3.2,.15,2.4,2.8,.15,2.4,0,0,3.15,.8,0,3.15,.8,-.45,3.15,.45,-.8,3.15,0,-.8,3.15,0,0,2.85,.2,0,2.7,.2,-.112,2.7,.112,-.2,2.7,0,-.2,2.7,-.45,-.8,3.15,-.8,-.45,3.15,-.8,0,3.15,-.112,-.2,2.7,-.2,-.112,2.7,-.2,0,2.7,-.8,.45,3.15,-.45,.8,3.15,0,.8,3.15,-.2,.112,2.7,-.112,.2,2.7,0,.2,2.7,.45,.8,3.15,.8,.45,3.15,.112,.2,2.7,.2,.112,2.7,.4,0,2.55,.4,-.224,2.55,.224,-.4,2.55,0,-.4,2.55,1.3,0,2.55,1.3,-.728,2.55,.728,-1.3,2.55,0,-1.3,2.55,1.3,0,2.4,1.3,-.728,2.4,.728,-1.3,2.4,0,-1.3,2.4,-.224,-.4,2.55,-.4,-.224,2.55,-.4,0,2.55,-.728,-1.3,2.55,-1.3,-.728,2.55,-1.3,0,2.55,-.728,-1.3,2.4,-1.3,-.728,2.4,-1.3,0,2.4,-.4,.224,2.55,-.224,.4,2.55,0,.4,2.55,-1.3,.728,2.55,-.728,1.3,2.55,0,1.3,2.55,-1.3,.728,2.4,-.728,1.3,2.4,0,1.3,2.4,.224,.4,2.55,.4,.224,2.55,.728,1.3,2.55,1.3,.728,2.55,.728,1.3,2.4,1.3,.728,2.4,0,0,0,1.425,0,0,1.425,.798,0,.798,1.425,0,0,1.425,0,1.5,0,.075,1.5,.84,.075,.84,1.5,.075,0,1.5,.075,-.798,1.425,0,-1.425,.798,0,-1.425,0,0,-.84,1.5,.075,-1.5,.84,.075,-1.5,0,.075,-1.425,-.798,0,-.798,-1.425,0,0,-1.425,0,-1.5,-.84,.075,-.84,-1.5,.075,0,-1.5,.075,.798,-1.425,0,1.425,-.798,0,.84,-1.5,.075,1.5,-.84,.075];THREE.BufferGeometry.call(this),this.type="TeapotBufferGeometry",this.parameters={size:e,segments:t,bottom:r,lid:n,body:i,fitLid:a,blinn:o},e=e||50,t=void 0!==t?Math.max(2,Math.floor(t)||10):10,a=void 0===a||a;var u=3.15*((o=void 0===o||o)?1:1.3)/2,c=e/u,h=(r=void 0===r||r)?(8*t-4)*t:0;h+=(n=void 0===n||n)?(16*t-4)*t:0,h+=(i=void 0===i||i)?40*t*t:0;var d=new Uint32Array(3*h),f=r?4:0;f+=n?8:0,f+=i?20:0,f*=(t+1)*(t+1);var p=new Float32Array(3*f),m=new Float32Array(3*f),g=new Float32Array(2*f),v=new THREE.Matrix4;v.set(-1,3,-3,1,3,-6,3,0,-3,3,0,0,1,0,0,0);var y,b,E,x,w,T,_,S,M,R,A,C,L,O,I,P,H=[],k=[],N=[],U=[],D=[],F=[],B=[],z=[],j=[],V=new THREE.Vector3,G=0,W=0,q=new THREE.Vector3,X=new THREE.Matrix4,Y=new THREE.Matrix4,Z=new THREE.Vector4,K=new THREE.Vector4,Q=new THREE.Vector4,J=new THREE.Vector4,$=new THREE.Vector3,ee=new THREE.Vector3,te=v.clone();te.transpose();var re=function(e,t,r){return!(p[3*e]===p[3*t]&&p[3*e+1]===p[3*t+1]&&p[3*e+2]===p[3*t+2]||p[3*e]===p[3*r]&&p[3*e+1]===p[3*r+1]&&p[3*e+2]===p[3*r+2]||p[3*t]===p[3*r]&&p[3*t+1]===p[3*r+1]&&p[3*t+2]===p[3*r+2])};for(y=0;y<3;y++)F[y]=new THREE.Matrix4;var ne=r?32:28;_=t+1;for(var ie=0,ae=0,oe=0,se=0,le=0,ue=i?0:20;ue<ne;ue++)if(n||ue<20||ue>=28){for(y=0;y<3;y++){for(b=0;b<4;b++)for(E=0;E<4;E++)H[4*E+b]=l[3*s[16*ue+4*b+E]+y],a&&ue>=20&&ue<28&&2!==y&&(H[4*E+b]*=1.077),o||2!==y||(H[4*E+b]*=1.3);X.set(H[0],H[1],H[2],H[3],H[4],H[5],H[6],H[7],H[8],H[9],H[10],H[11],H[12],H[13],H[14],H[15]),Y.multiplyMatrices(X,v),F[y].multiplyMatrices(te,Y)}for(w=0;w<=t;w++)for(S=w/t,T=0;T<=t;T++){for(M=T/t,C=4,R=A=1;C--;)k[C]=R,N[C]=A,R*=S,A*=M,3===C?(U[C]=D[C]=0,G=W=1):(U[C]=G*(3-C),D[C]=W*(3-C),G*=S,W*=M);for(Z.fromArray(k),K.fromArray(N),Q.fromArray(U),J.fromArray(D),y=0;y<3;y++)(x=Z.clone()).applyMatrix4(F[y]),B[y]=x.dot(K),(x=Q.clone()).applyMatrix4(F[y]),z[y]=x.dot(K),(x=Z.clone()).applyMatrix4(F[y]),j[y]=x.dot(J);$.fromArray(z),ee.fromArray(j),V.crossVectors(ee,$),V.normalize(),0===B[0]&&0===B[1]?q.set(0,B[2]>u?1:-1,0):q.set(V.x,V.z,-V.y),p[ae++]=c*B[0],p[ae++]=c*(B[2]-u),p[ae++]=-c*B[1],m[oe++]=q.x,m[oe++]=q.y,m[oe++]=q.z,g[se++]=1-M,g[se++]=1-S}for(w=0;w<t;w++)for(T=0;T<t;T++)P=(L=ie*_*_+w*_+T)+_,re(L,O=L+1,I=O+_)&&(d[le++]=L,d[le++]=O,d[le++]=I),re(L,I,P)&&(d[le++]=L,d[le++]=I,d[le++]=P);ie++}this.setIndex(new THREE.BufferAttribute(d,1)),this.addAttribute("position",new THREE.BufferAttribute(p,3)),this.addAttribute("normal",new THREE.BufferAttribute(m,3)),this.addAttribute("uv",new THREE.BufferAttribute(g,2)),this.computeBoundingSphere()},THREE.TeapotBufferGeometry.prototype=Object.create(THREE.BufferGeometry.prototype),THREE.TeapotBufferGeometry.prototype.constructor=THREE.TeapotBufferGeometry,THREE.TeapotBufferGeometry.prototype.clone=function(){return new THREE.TeapotBufferGeometry(this.parameters.size,this.parameters.segments,this.parameters.bottom,this.parameters.lid,this.parameters.body,this.parameters.fitLid,this.parameters.blinn)}},3491:function(e){e.exports=function(e){function t(n){if(r[n])return r[n].exports;var i=r[n]={exports:{},id:n,loaded:!1};return e[n].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var r={};return t.m=e,t.c=r,t.p="",t(0)}([function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var i=n(r(1));e.exports=i.default},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var i=n(r(2)),a=n(r(6)),o=n(r(3)),s=n(r(7)),l=n(r(8)),u=n(r(10)),c=n(r(11)),h=n(r(12)),d=n(r(13)),f=n(r(14)),p=n(r(15)),m=n(r(16)),g=n(r(9)),v=n(r(17));t.default={color:{Color:i.default,math:a.default,interpret:o.default},controllers:{Controller:s.default,BooleanController:l.default,OptionController:u.default,StringController:c.default,NumberController:h.default,NumberControllerBox:d.default,NumberControllerSlider:f.default,FunctionController:p.default,ColorController:m.default},dom:{dom:g.default},gui:{GUI:v.default},GUI:v.default}},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t,r){Object.defineProperty(e,t,{get:function(){return"RGB"===this.__state.space||h.recalculateRGB(this,t,r),this.__state[t]},set:function(e){"RGB"!==this.__state.space&&(h.recalculateRGB(this,t,r),this.__state.space="RGB"),this.__state[t]=e}})}function o(e,t){Object.defineProperty(e,t,{get:function(){return"HSV"===this.__state.space||h.recalculateHSV(this),this.__state[t]},set:function(e){"HSV"!==this.__state.space&&(h.recalculateHSV(this),this.__state.space="HSV"),this.__state[t]=e}})}t.__esModule=!0;var s=n(r(3)),l=n(r(6)),u=n(r(4)),c=n(r(5)),h=function(){function e(){if(i(this,e),this.__state=s.default.apply(this,arguments),!1===this.__state)throw new Error("Failed to interpret color arguments");this.__state.a=this.__state.a||1}return e.prototype.toString=function(){return(0,u.default)(this)},e.prototype.toHexString=function(){return(0,u.default)(this,!0)},e.prototype.toOriginal=function(){return this.__state.conversion.write(this)},e}();h.recalculateRGB=function(e,t,r){if("HEX"===e.__state.space)e.__state[t]=l.default.component_from_hex(e.__state.hex,r);else{if("HSV"!==e.__state.space)throw new Error("Corrupted color state");c.default.extend(e.__state,l.default.hsv_to_rgb(e.__state.h,e.__state.s,e.__state.v))}},h.recalculateHSV=function(e){var t=l.default.rgb_to_hsv(e.r,e.g,e.b);c.default.extend(e.__state,{s:t.s,v:t.v}),c.default.isNaN(t.h)?c.default.isUndefined(e.__state.h)&&(e.__state.h=0):e.__state.h=t.h},h.COMPONENTS=["r","g","b","h","s","v","hex","a"],a(h.prototype,"r",2),a(h.prototype,"g",1),a(h.prototype,"b",0),o(h.prototype,"h"),o(h.prototype,"s"),o(h.prototype,"v"),Object.defineProperty(h.prototype,"a",{get:function(){return this.__state.a},set:function(e){this.__state.a=e}}),Object.defineProperty(h.prototype,"hex",{get:function(){return"HEX"!==!this.__state.space&&(this.__state.hex=l.default.rgb_to_hex(this.r,this.g,this.b)),this.__state.hex},set:function(e){this.__state.space="HEX",this.__state.hex=e}}),t.default=h},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var i=n(r(4)),a=n(r(5)),o=[{litmus:a.default.isString,conversions:{THREE_CHAR_HEX:{read:function(e){var t=e.match(/^#([A-F0-9])([A-F0-9])([A-F0-9])$/i);return null!==t&&{space:"HEX",hex:parseInt("0x"+t[1].toString()+t[1].toString()+t[2].toString()+t[2].toString()+t[3].toString()+t[3].toString(),0)}},write:i.default},SIX_CHAR_HEX:{read:function(e){var t=e.match(/^#([A-F0-9]{6})$/i);return null!==t&&{space:"HEX",hex:parseInt("0x"+t[1].toString(),0)}},write:i.default},CSS_RGB:{read:function(e){var t=e.match(/^rgb\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\)/);return null!==t&&{space:"RGB",r:parseFloat(t[1]),g:parseFloat(t[2]),b:parseFloat(t[3])}},write:i.default},CSS_RGBA:{read:function(e){var t=e.match(/^rgba\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\)/);return null!==t&&{space:"RGB",r:parseFloat(t[1]),g:parseFloat(t[2]),b:parseFloat(t[3]),a:parseFloat(t[4])}},write:i.default}}},{litmus:a.default.isNumber,conversions:{HEX:{read:function(e){return{space:"HEX",hex:e,conversionName:"HEX"}},write:function(e){return e.hex}}}},{litmus:a.default.isArray,conversions:{RGB_ARRAY:{read:function(e){return 3===e.length&&{space:"RGB",r:e[0],g:e[1],b:e[2]}},write:function(e){return[e.r,e.g,e.b]}},RGBA_ARRAY:{read:function(e){return 4===e.length&&{space:"RGB",r:e[0],g:e[1],b:e[2],a:e[3]}},write:function(e){return[e.r,e.g,e.b,e.a]}}}},{litmus:a.default.isObject,conversions:{RGBA_OBJ:{read:function(e){return!!(a.default.isNumber(e.r)&&a.default.isNumber(e.g)&&a.default.isNumber(e.b)&&a.default.isNumber(e.a))&&{space:"RGB",r:e.r,g:e.g,b:e.b,a:e.a}},write:function(e){return{r:e.r,g:e.g,b:e.b,a:e.a}}},RGB_OBJ:{read:function(e){return!!(a.default.isNumber(e.r)&&a.default.isNumber(e.g)&&a.default.isNumber(e.b))&&{space:"RGB",r:e.r,g:e.g,b:e.b}},write:function(e){return{r:e.r,g:e.g,b:e.b}}},HSVA_OBJ:{read:function(e){return!!(a.default.isNumber(e.h)&&a.default.isNumber(e.s)&&a.default.isNumber(e.v)&&a.default.isNumber(e.a))&&{space:"HSV",h:e.h,s:e.s,v:e.v,a:e.a}},write:function(e){return{h:e.h,s:e.s,v:e.v,a:e.a}}},HSV_OBJ:{read:function(e){return!!(a.default.isNumber(e.h)&&a.default.isNumber(e.s)&&a.default.isNumber(e.v))&&{space:"HSV",h:e.h,s:e.s,v:e.v}},write:function(e){return{h:e.h,s:e.s,v:e.v}}}}}],s=void 0,l=void 0,u=function(){l=!1;var e=arguments.length>1?a.default.toArray(arguments):arguments[0];return a.default.each(o,(function(t){if(t.litmus(e))return a.default.each(t.conversions,(function(t,r){if(s=t.read(e),!1===l&&!1!==s)return l=s,s.conversionName=r,s.conversion=t,a.default.BREAK})),a.default.BREAK})),l};t.default=u},function(e,t){"use strict";t.__esModule=!0,t.default=function(e,t){var r=e.__state.conversionName.toString(),n=Math.round(e.r),i=Math.round(e.g),a=Math.round(e.b),o=e.a,s=Math.round(e.h),l=e.s.toFixed(1),u=e.v.toFixed(1);if(t||"THREE_CHAR_HEX"===r||"SIX_CHAR_HEX"===r){for(var c=e.hex.toString(16);c.length<6;)c="0"+c;return"#"+c}return"CSS_RGB"===r?"rgb("+n+","+i+","+a+")":"CSS_RGBA"===r?"rgba("+n+","+i+","+a+","+o+")":"HEX"===r?"0x"+e.hex.toString(16):"RGB_ARRAY"===r?"["+n+","+i+","+a+"]":"RGBA_ARRAY"===r?"["+n+","+i+","+a+","+o+"]":"RGB_OBJ"===r?"{r:"+n+",g:"+i+",b:"+a+"}":"RGBA_OBJ"===r?"{r:"+n+",g:"+i+",b:"+a+",a:"+o+"}":"HSV_OBJ"===r?"{h:"+s+",s:"+l+",v:"+u+"}":"HSVA_OBJ"===r?"{h:"+s+",s:"+l+",v:"+u+",a:"+o+"}":"unknown format"}},function(e,t){"use strict";t.__esModule=!0;var r=Array.prototype.forEach,n=Array.prototype.slice,i={BREAK:{},extend:function(e){return this.each(n.call(arguments,1),(function(t){(this.isObject(t)?Object.keys(t):[]).forEach(function(r){this.isUndefined(t[r])||(e[r]=t[r])}.bind(this))}),this),e},defaults:function(e){return this.each(n.call(arguments,1),(function(t){(this.isObject(t)?Object.keys(t):[]).forEach(function(r){this.isUndefined(e[r])&&(e[r]=t[r])}.bind(this))}),this),e},compose:function(){var e=n.call(arguments);return function(){for(var t=n.call(arguments),r=e.length-1;r>=0;r--)t=[e[r].apply(this,t)];return t[0]}},each:function(e,t,n){if(e)if(r&&e.forEach&&e.forEach===r)e.forEach(t,n);else if(e.length===e.length+0){var i=void 0,a=void 0;for(i=0,a=e.length;i<a;i++)if(i in e&&t.call(n,e[i],i)===this.BREAK)return}else for(var o in e)if(t.call(n,e[o],o)===this.BREAK)return},defer:function(e){setTimeout(e,0)},debounce:function(e,t){var r=void 0;return function(){function n(){r=null}var i=this,a=arguments,o=!r;clearTimeout(r),r=setTimeout(n,t),o&&e.apply(i,a)}},toArray:function(e){return e.toArray?e.toArray():n.call(e)},isUndefined:function(e){return void 0===e},isNull:function(e){return null===e},isNaN:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){return isNaN(e)})),isArray:Array.isArray||function(e){return e.constructor===Array},isObject:function(e){return e===Object(e)},isNumber:function(e){return e===e+0},isString:function(e){return e===e+""},isBoolean:function(e){return!1===e||!0===e},isFunction:function(e){return"[object Function]"===Object.prototype.toString.call(e)}};t.default=i},function(e,t){"use strict";t.__esModule=!0;var r=void 0,n={hsv_to_rgb:function(e,t,r){var n=Math.floor(e/60)%6,i=e/60-Math.floor(e/60),a=r*(1-t),o=r*(1-i*t),s=r*(1-(1-i)*t),l=[[r,s,a],[o,r,a],[a,r,s],[a,o,r],[s,a,r],[r,a,o]][n];return{r:255*l[0],g:255*l[1],b:255*l[2]}},rgb_to_hsv:function(e,t,r){var n=Math.min(e,t,r),i=Math.max(e,t,r),a=i-n,o=void 0;return 0===i?{h:NaN,s:0,v:0}:(o=e===i?(t-r)/a:t===i?2+(r-e)/a:4+(e-t)/a,(o/=6)<0&&(o+=1),{h:360*o,s:a/i,v:i/255})},rgb_to_hex:function(e,t,r){var n=this.hex_with_component(0,2,e);return n=this.hex_with_component(n,1,t),this.hex_with_component(n,0,r)},component_from_hex:function(e,t){return e>>8*t&255},hex_with_component:function(e,t,n){return n<<(r=8*t)|e&~(255<<r)}};t.default=n},function(e,t){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.__esModule=!0;var n=function(){function e(t,n){r(this,e),this.initialValue=t[n],this.domElement=document.createElement("div"),this.object=t,this.property=n,this.__onChange=void 0,this.__onFinishChange=void 0}return e.prototype.onChange=function(e){return this.__onChange=e,this},e.prototype.onFinishChange=function(e){return this.__onFinishChange=e,this},e.prototype.setValue=function(e){return this.object[this.property]=e,this.__onChange&&this.__onChange.call(this,e),this.updateDisplay(),this},e.prototype.getValue=function(){return this.object[this.property]},e.prototype.updateDisplay=function(){return this},e.prototype.isModified=function(){return this.initialValue!==this.getValue()},e}();t.default=n},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var s=n(r(7)),l=n(r(9)),u=function(e){function t(r,n){function o(){u.setValue(!u.__prev)}i(this,t);var s=a(this,e.call(this,r,n)),u=s;return s.__prev=s.getValue(),s.__checkbox=document.createElement("input"),s.__checkbox.setAttribute("type","checkbox"),l.default.bind(s.__checkbox,"change",o,!1),s.domElement.appendChild(s.__checkbox),s.updateDisplay(),s}return o(t,e),t.prototype.setValue=function(t){var r=e.prototype.setValue.call(this,t);return this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),this.__prev=this.getValue(),r},t.prototype.updateDisplay=function(){return!0===this.getValue()?(this.__checkbox.setAttribute("checked","checked"),this.__checkbox.checked=!0):this.__checkbox.checked=!1,e.prototype.updateDisplay.call(this)},t}(s.default);t.default=u},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if("0"===e||a.default.isUndefined(e))return 0;var t=e.match(l);return a.default.isNull(t)?0:parseFloat(t[1])}t.__esModule=!0;var a=n(r(5)),o={HTMLEvents:["change"],MouseEvents:["click","mousemove","mousedown","mouseup","mouseover"],KeyboardEvents:["keydown"]},s={};a.default.each(o,(function(e,t){a.default.each(e,(function(e){s[e]=t}))}));var l=/(\d+(\.\d+)?)px/,u={makeSelectable:function(e,t){void 0!==e&&void 0!==e.style&&(e.onselectstart=t?function(){return!1}:function(){},e.style.MozUserSelect=t?"auto":"none",e.style.KhtmlUserSelect=t?"auto":"none",e.unselectable=t?"on":"off")},makeFullscreen:function(e,t,r){var n=r,i=t;a.default.isUndefined(i)&&(i=!0),a.default.isUndefined(n)&&(n=!0),e.style.position="absolute",i&&(e.style.left=0,e.style.right=0),n&&(e.style.top=0,e.style.bottom=0)},fakeEvent:function(e,t,r,n){var i=r||{},o=s[t];if(!o)throw new Error("Event type "+t+" not supported.");var l=document.createEvent(o);switch(o){case"MouseEvents":var u=i.x||i.clientX||0,c=i.y||i.clientY||0;l.initMouseEvent(t,i.bubbles||!1,i.cancelable||!0,window,i.clickCount||1,0,0,u,c,!1,!1,!1,!1,0,null);break;case"KeyboardEvents":var h=l.initKeyboardEvent||l.initKeyEvent;a.default.defaults(i,{cancelable:!0,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,keyCode:void 0,charCode:void 0}),h(t,i.bubbles||!1,i.cancelable,window,i.ctrlKey,i.altKey,i.shiftKey,i.metaKey,i.keyCode,i.charCode);break;default:l.initEvent(t,i.bubbles||!1,i.cancelable||!0)}a.default.defaults(l,n),e.dispatchEvent(l)},bind:function(e,t,r,n){var i=n||!1;return e.addEventListener?e.addEventListener(t,r,i):e.attachEvent&&e.attachEvent("on"+t,r),u},unbind:function(e,t,r,n){var i=n||!1;return e.removeEventListener?e.removeEventListener(t,r,i):e.detachEvent&&e.detachEvent("on"+t,r),u},addClass:function(e,t){if(void 0===e.className)e.className=t;else if(e.className!==t){var r=e.className.split(/ +/);-1===r.indexOf(t)&&(r.push(t),e.className=r.join(" ").replace(/^\s+/,"").replace(/\s+$/,""))}return u},removeClass:function(e,t){if(t)if(e.className===t)e.removeAttribute("class");else{var r=e.className.split(/ +/),n=r.indexOf(t);-1!==n&&(r.splice(n,1),e.className=r.join(" "))}else e.className=void 0;return u},hasClass:function(e,t){return new RegExp("(?:^|\\s+)"+t+"(?:\\s+|$)").test(e.className)||!1},getWidth:function(e){var t=getComputedStyle(e);return i(t["border-left-width"])+i(t["border-right-width"])+i(t["padding-left"])+i(t["padding-right"])+i(t.width)},getHeight:function(e){var t=getComputedStyle(e);return i(t["border-top-width"])+i(t["border-bottom-width"])+i(t["padding-top"])+i(t["padding-bottom"])+i(t.height)},getOffset:function(e){var t=e,r={left:0,top:0};if(t.offsetParent)do{r.left+=t.offsetLeft,r.top+=t.offsetTop,t=t.offsetParent}while(t);return r},isActive:function(e){return e===document.activeElement&&(e.type||e.href)}};t.default=u},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var s=n(r(7)),l=n(r(9)),u=n(r(5)),c=function(e){function t(r,n,o){i(this,t);var s=a(this,e.call(this,r,n)),c=o,h=s;return s.__select=document.createElement("select"),u.default.isArray(c)&&function(){var e={};u.default.each(c,(function(t){e[t]=t})),c=e}(),u.default.each(c,(function(e,t){var r=document.createElement("option");r.innerHTML=t,r.setAttribute("value",e),h.__select.appendChild(r)})),s.updateDisplay(),l.default.bind(s.__select,"change",(function(){var e=this.options[this.selectedIndex].value;h.setValue(e)})),s.domElement.appendChild(s.__select),s}return o(t,e),t.prototype.setValue=function(t){var r=e.prototype.setValue.call(this,t);return this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),r},t.prototype.updateDisplay=function(){return l.default.isActive(this.__select)?this:(this.__select.value=this.getValue(),e.prototype.updateDisplay.call(this))},t}(s.default);t.default=c},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var s=n(r(7)),l=n(r(9)),u=function(e){function t(r,n){function o(){c.setValue(c.__input.value)}function s(){c.__onFinishChange&&c.__onFinishChange.call(c,c.getValue())}i(this,t);var u=a(this,e.call(this,r,n)),c=u;return u.__input=document.createElement("input"),u.__input.setAttribute("type","text"),l.default.bind(u.__input,"keyup",o),l.default.bind(u.__input,"change",o),l.default.bind(u.__input,"blur",s),l.default.bind(u.__input,"keydown",(function(e){13===e.keyCode&&this.blur()})),u.updateDisplay(),u.domElement.appendChild(u.__input),u}return o(t,e),t.prototype.updateDisplay=function(){return l.default.isActive(this.__input)||(this.__input.value=this.getValue()),e.prototype.updateDisplay.call(this)},t}(s.default);t.default=u},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e){var t=e.toString();return t.indexOf(".")>-1?t.length-t.indexOf(".")-1:0}t.__esModule=!0;var l=n(r(7)),u=n(r(5)),c=function(e){function t(r,n,o){i(this,t);var l=a(this,e.call(this,r,n)),c=o||{};return l.__min=c.min,l.__max=c.max,l.__step=c.step,u.default.isUndefined(l.__step)?0===l.initialValue?l.__impliedStep=1:l.__impliedStep=Math.pow(10,Math.floor(Math.log(Math.abs(l.initialValue))/Math.LN10))/10:l.__impliedStep=l.__step,l.__precision=s(l.__impliedStep),l}return o(t,e),t.prototype.setValue=function(t){var r=t;return void 0!==this.__min&&r<this.__min?r=this.__min:void 0!==this.__max&&r>this.__max&&(r=this.__max),void 0!==this.__step&&r%this.__step!=0&&(r=Math.round(r/this.__step)*this.__step),e.prototype.setValue.call(this,r)},t.prototype.min=function(e){return this.__min=e,this},t.prototype.max=function(e){return this.__max=e,this},t.prototype.step=function(e){return this.__step=e,this.__impliedStep=e,this.__precision=s(e),this},t}(l.default);t.default=c},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e,t){var r=Math.pow(10,t);return Math.round(e*r)/r}t.__esModule=!0;var l=n(r(12)),u=n(r(9)),c=n(r(5)),h=function(e){function t(r,n,o){function s(){var e=parseFloat(g.__input.value);c.default.isNaN(e)||g.setValue(e)}function l(){g.__onFinishChange&&g.__onFinishChange.call(g,g.getValue())}function h(){l()}function d(e){var t=v-e.clientY;g.setValue(g.getValue()+t*g.__impliedStep),v=e.clientY}function f(){u.default.unbind(window,"mousemove",d),u.default.unbind(window,"mouseup",f),l()}function p(e){u.default.bind(window,"mousemove",d),u.default.bind(window,"mouseup",f),v=e.clientY}i(this,t);var m=a(this,e.call(this,r,n,o));m.__truncationSuspended=!1;var g=m,v=void 0;return m.__input=document.createElement("input"),m.__input.setAttribute("type","text"),u.default.bind(m.__input,"change",s),u.default.bind(m.__input,"blur",h),u.default.bind(m.__input,"mousedown",p),u.default.bind(m.__input,"keydown",(function(e){13===e.keyCode&&(g.__truncationSuspended=!0,this.blur(),g.__truncationSuspended=!1,l())})),m.updateDisplay(),m.domElement.appendChild(m.__input),m}return o(t,e),t.prototype.updateDisplay=function(){return this.__input.value=this.__truncationSuspended?this.getValue():s(this.getValue(),this.__precision),e.prototype.updateDisplay.call(this)},t}(l.default);t.default=h},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e,t,r,n,i){return n+(e-t)/(r-t)*(i-n)}t.__esModule=!0;var l=n(r(12)),u=n(r(9)),c=function(e){function t(r,n,o,l,c){function h(e){document.activeElement.blur(),u.default.bind(window,"mousemove",d),u.default.bind(window,"mouseup",f),d(e)}function d(e){e.preventDefault();var t=m.__background.getBoundingClientRect();return m.setValue(s(e.clientX,t.left,t.right,m.__min,m.__max)),!1}function f(){u.default.unbind(window,"mousemove",d),u.default.unbind(window,"mouseup",f),m.__onFinishChange&&m.__onFinishChange.call(m,m.getValue())}i(this,t);var p=a(this,e.call(this,r,n,{min:o,max:l,step:c})),m=p;return p.__background=document.createElement("div"),p.__foreground=document.createElement("div"),u.default.bind(p.__background,"mousedown",h),u.default.addClass(p.__background,"slider"),u.default.addClass(p.__foreground,"slider-fg"),p.updateDisplay(),p.__background.appendChild(p.__foreground),p.domElement.appendChild(p.__background),p}return o(t,e),t.prototype.updateDisplay=function(){var t=(this.getValue()-this.__min)/(this.__max-this.__min);return this.__foreground.style.width=100*t+"%",e.prototype.updateDisplay.call(this)},t}(l.default);t.default=c},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var s=n(r(7)),l=n(r(9)),u=function(e){function t(r,n,o){i(this,t);var s=a(this,e.call(this,r,n)),u=s;return s.__button=document.createElement("div"),s.__button.innerHTML=void 0===o?"Fire":o,l.default.bind(s.__button,"click",(function(e){return e.preventDefault(),u.fire(),!1})),l.default.addClass(s.__button,"button"),s.domElement.appendChild(s.__button),s}return o(t,e),t.prototype.fire=function(){this.__onChange&&this.__onChange.call(this),this.getValue().call(this.object),this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue())},t}(s.default);t.default=u},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e,t,r,n){e.style.background="",f.default.each(m,(function(i){e.style.cssText+="background: "+i+"linear-gradient("+t+", "+r+" 0%, "+n+" 100%); "}))}function l(e){e.style.background="",e.style.cssText+="background: -moz-linear-gradient(top,  #ff0000 0%, #ff00ff 17%, #0000ff 34%, #00ffff 50%, #00ff00 67%, #ffff00 84%, #ff0000 100%);",e.style.cssText+="background: -webkit-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",e.style.cssText+="background: -o-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",e.style.cssText+="background: -ms-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",e.style.cssText+="background: linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);"}t.__esModule=!0;var u=n(r(7)),c=n(r(9)),h=n(r(2)),d=n(r(3)),f=n(r(5)),p=function(e){function t(r,n){function o(e){v(e),c.default.bind(window,"mousemove",v),c.default.bind(window,"mouseup",u)}function u(){c.default.unbind(window,"mousemove",v),c.default.unbind(window,"mouseup",u),g()}function p(){var e=(0,d.default)(this.value);!1!==e?(E.__color.__state=e,E.setValue(E.__color.toOriginal())):this.value=E.__color.toString()}function m(){c.default.unbind(window,"mousemove",y),c.default.unbind(window,"mouseup",m),g()}function g(){E.__onFinishChange&&E.__onFinishChange.call(E,E.__color.toOriginal())}function v(e){e.preventDefault();var t=E.__saturation_field.getBoundingClientRect(),r=(e.clientX-t.left)/(t.right-t.left),n=1-(e.clientY-t.top)/(t.bottom-t.top);return n>1?n=1:n<0&&(n=0),r>1?r=1:r<0&&(r=0),E.__color.v=n,E.__color.s=r,E.setValue(E.__color.toOriginal()),!1}function y(e){e.preventDefault();var t=E.__hue_field.getBoundingClientRect(),r=1-(e.clientY-t.top)/(t.bottom-t.top);return r>1?r=1:r<0&&(r=0),E.__color.h=360*r,E.setValue(E.__color.toOriginal()),!1}i(this,t);var b=a(this,e.call(this,r,n));b.__color=new h.default(b.getValue()),b.__temp=new h.default(0);var E=b;b.domElement=document.createElement("div"),c.default.makeSelectable(b.domElement,!1),b.__selector=document.createElement("div"),b.__selector.className="selector",b.__saturation_field=document.createElement("div"),b.__saturation_field.className="saturation-field",b.__field_knob=document.createElement("div"),b.__field_knob.className="field-knob",b.__field_knob_border="2px solid ",b.__hue_knob=document.createElement("div"),b.__hue_knob.className="hue-knob",b.__hue_field=document.createElement("div"),b.__hue_field.className="hue-field",b.__input=document.createElement("input"),b.__input.type="text",b.__input_textShadow="0 1px 1px ",c.default.bind(b.__input,"keydown",(function(e){13===e.keyCode&&p.call(this)})),c.default.bind(b.__input,"blur",p),c.default.bind(b.__selector,"mousedown",(function(){c.default.addClass(this,"drag").bind(window,"mouseup",(function(){c.default.removeClass(E.__selector,"drag")}))}));var x=document.createElement("div");return f.default.extend(b.__selector.style,{width:"122px",height:"102px",padding:"3px",backgroundColor:"#222",boxShadow:"0px 1px 3px rgba(0,0,0,0.3)"}),f.default.extend(b.__field_knob.style,{position:"absolute",width:"12px",height:"12px",border:b.__field_knob_border+(b.__color.v<.5?"#fff":"#000"),boxShadow:"0px 1px 3px rgba(0,0,0,0.5)",borderRadius:"12px",zIndex:1}),f.default.extend(b.__hue_knob.style,{position:"absolute",width:"15px",height:"2px",borderRight:"4px solid #fff",zIndex:1}),f.default.extend(b.__saturation_field.style,{width:"100px",height:"100px",border:"1px solid #555",marginRight:"3px",display:"inline-block",cursor:"pointer"}),f.default.extend(x.style,{width:"100%",height:"100%",background:"none"}),s(x,"top","rgba(0,0,0,0)","#000"),f.default.extend(b.__hue_field.style,{width:"15px",height:"100px",border:"1px solid #555",cursor:"ns-resize",position:"absolute",top:"3px",right:"3px"}),l(b.__hue_field),f.default.extend(b.__input.style,{outline:"none",textAlign:"center",color:"#fff",border:0,fontWeight:"bold",textShadow:b.__input_textShadow+"rgba(0,0,0,0.7)"}),c.default.bind(b.__saturation_field,"mousedown",o),c.default.bind(b.__field_knob,"mousedown",o),c.default.bind(b.__hue_field,"mousedown",(function(e){y(e),c.default.bind(window,"mousemove",y),c.default.bind(window,"mouseup",m)})),b.__saturation_field.appendChild(x),b.__selector.appendChild(b.__field_knob),b.__selector.appendChild(b.__saturation_field),b.__selector.appendChild(b.__hue_field),b.__hue_field.appendChild(b.__hue_knob),b.domElement.appendChild(b.__input),b.domElement.appendChild(b.__selector),b.updateDisplay(),b}return o(t,e),t.prototype.updateDisplay=function(){var e=(0,d.default)(this.getValue());if(!1!==e){var t=!1;f.default.each(h.default.COMPONENTS,(function(r){if(!f.default.isUndefined(e[r])&&!f.default.isUndefined(this.__color.__state[r])&&e[r]!==this.__color.__state[r])return t=!0,{}}),this),t&&f.default.extend(this.__color.__state,e)}f.default.extend(this.__temp.__state,this.__color.__state),this.__temp.a=1;var r=this.__color.v<.5||this.__color.s>.5?255:0,n=255-r;f.default.extend(this.__field_knob.style,{marginLeft:100*this.__color.s-7+"px",marginTop:100*(1-this.__color.v)-7+"px",backgroundColor:this.__temp.toHexString(),border:this.__field_knob_border+"rgb("+r+","+r+","+r+")"}),this.__hue_knob.style.marginTop=100*(1-this.__color.h/360)+"px",this.__temp.s=1,this.__temp.v=1,s(this.__saturation_field,"left","#fff",this.__temp.toHexString()),this.__input.value=this.__color.toString(),f.default.extend(this.__input.style,{backgroundColor:this.__color.toHexString(),color:"rgb("+r+","+r+","+r+")",textShadow:this.__input_textShadow+"rgba("+n+","+n+","+n+",.7)"})},t}(u.default),m=["-moz-","-o-","-webkit-","-ms-",""];t.default=p},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t,r){var n=document.createElement("li");return t&&n.appendChild(t),r?e.__ul.insertBefore(n,r):e.__ul.appendChild(n),e.onResize(),n}function a(e,t){var r=e.__preset_select[e.__preset_select.selectedIndex];r.innerHTML=t?r.value+"*":r.value}function o(e,t,r){if(r.__li=t,r.__gui=e,O.default.extend(r,{options:function(t){if(arguments.length>1){var n=r.__li.nextElementSibling;return r.remove(),l(e,r.object,r.property,{before:n,factoryArgs:[O.default.toArray(arguments)]})}if(O.default.isArray(t)||O.default.isObject(t)){var i=r.__li.nextElementSibling;return r.remove(),l(e,r.object,r.property,{before:i,factoryArgs:[t]})}},name:function(e){return r.__li.firstElementChild.firstElementChild.innerHTML=e,r},listen:function(){return r.__gui.listen(r),r},remove:function(){return r.__gui.remove(r),r}}),r instanceof M.default)!function(){var e=new S.default(r.object,r.property,{min:r.__min,max:r.__max,step:r.__step});O.default.each(["updateDisplay","onChange","onFinishChange","step"],(function(t){var n=r[t],i=e[t];r[t]=e[t]=function(){var t=Array.prototype.slice.call(arguments);return i.apply(e,t),n.apply(r,t)}})),L.default.addClass(t,"has-slider"),r.domElement.insertBefore(e.domElement,r.domElement.firstElementChild)}();else if(r instanceof S.default){var n=function(t){if(O.default.isNumber(r.__min)&&O.default.isNumber(r.__max)){var n=r.__li.firstElementChild.firstElementChild.innerHTML,i=r.__gui.__listening.indexOf(r)>-1;r.remove();var a=l(e,r.object,r.property,{before:r.__li.nextElementSibling,factoryArgs:[r.__min,r.__max,r.__step]});return a.name(n),i&&a.listen(),a}return t};r.min=O.default.compose(n,r.min),r.max=O.default.compose(n,r.max)}else r instanceof T.default?(L.default.bind(t,"click",(function(){L.default.fakeEvent(r.__checkbox,"click")})),L.default.bind(r.__checkbox,"click",(function(e){e.stopPropagation()}))):r instanceof _.default?(L.default.bind(t,"click",(function(){L.default.fakeEvent(r.__button,"click")})),L.default.bind(t,"mouseover",(function(){L.default.addClass(r.__button,"hover")})),L.default.bind(t,"mouseout",(function(){L.default.removeClass(r.__button,"hover")}))):r instanceof R.default&&(L.default.addClass(t,"color"),r.updateDisplay=O.default.compose((function(e){return t.style.borderLeftColor=r.__color.toString(),e}),r.updateDisplay),r.updateDisplay());r.setValue=O.default.compose((function(t){return e.getRoot().__preset_select&&r.isModified()&&a(e.getRoot(),!0),t}),r.setValue)}function s(e,t){var r=e.getRoot(),n=r.__rememberedObjects.indexOf(t.object);if(-1!==n){var i=r.__rememberedObjectIndecesToControllers[n];if(void 0===i&&(i={},r.__rememberedObjectIndecesToControllers[n]=i),i[t.property]=t,r.load&&r.load.remembered){var a=r.load.remembered,o=void 0;if(a[e.preset])o=a[e.preset];else{if(!a[N])return;o=a[N]}if(o[n]&&void 0!==o[n][t.property]){var s=o[n][t.property];t.initialValue=s,t.setValue(s)}}}}function l(e,t,r,n){if(void 0===t[r])throw new Error('Object "'+t+'" has no property "'+r+'"');var a=void 0;if(n.color)a=new R.default(t,r);else{var l=[t,r].concat(n.factoryArgs);a=x.default.apply(e,l)}n.before instanceof w.default&&(n.before=n.before.__li),s(e,a),L.default.addClass(a.domElement,"c");var u=document.createElement("span");L.default.addClass(u,"property-name"),u.innerHTML=a.property;var c=document.createElement("div");c.appendChild(u),c.appendChild(a.domElement);var h=i(e,c,n.before);return L.default.addClass(h,V.CLASS_CONTROLLER_ROW),a instanceof R.default?L.default.addClass(h,"color"):L.default.addClass(h,y(a.getValue())),o(e,h,a),e.__controllers.push(a),a}function u(e,t){return document.location.href+"."+t}function c(e,t,r){var n=document.createElement("option");n.innerHTML=t,n.value=t,e.__preset_select.appendChild(n),r&&(e.__preset_select.selectedIndex=e.__preset_select.length-1)}function h(e,t){t.style.display=e.useLocalStorage?"block":"none"}function d(e){var t=e.__save_row=document.createElement("li");L.default.addClass(e.domElement,"has-save"),e.__ul.insertBefore(t,e.__ul.firstChild),L.default.addClass(t,"save-row");var r=document.createElement("span");r.innerHTML="&nbsp;",L.default.addClass(r,"button gears");var n=document.createElement("span");n.innerHTML="Save",L.default.addClass(n,"button"),L.default.addClass(n,"save");var i=document.createElement("span");i.innerHTML="New",L.default.addClass(i,"button"),L.default.addClass(i,"save-as");var a=document.createElement("span");a.innerHTML="Revert",L.default.addClass(a,"button"),L.default.addClass(a,"revert");var o=e.__preset_select=document.createElement("select");e.load&&e.load.remembered?O.default.each(e.load.remembered,(function(t,r){c(e,r,r===e.preset)})):c(e,N,!1),L.default.bind(o,"change",(function(){for(var t=0;t<e.__preset_select.length;t++)e.__preset_select[t].innerHTML=e.__preset_select[t].value;e.preset=this.value})),t.appendChild(o),t.appendChild(r),t.appendChild(n),t.appendChild(i),t.appendChild(a),U&&function(){var t=document.getElementById("dg-local-explain"),r=document.getElementById("dg-local-storage");document.getElementById("dg-save-locally").style.display="block","true"===localStorage.getItem(u(e,"isLocal"))&&r.setAttribute("checked","checked"),h(e,t),L.default.bind(r,"change",(function(){e.useLocalStorage=!e.useLocalStorage,h(e,t)}))}();var s=document.getElementById("dg-new-constructor");L.default.bind(s,"keydown",(function(e){!e.metaKey||67!==e.which&&67!==e.keyCode||D.hide()})),L.default.bind(r,"click",(function(){s.innerHTML=JSON.stringify(e.getSaveObject(),void 0,2),D.show(),s.focus(),s.select()})),L.default.bind(n,"click",(function(){e.save()})),L.default.bind(i,"click",(function(){var t=prompt("Enter a new preset name.");t&&e.saveAs(t)})),L.default.bind(a,"click",(function(){e.revert()}))}function f(e){function t(t){return t.preventDefault(),e.width+=i-t.clientX,e.onResize(),i=t.clientX,!1}function r(){L.default.removeClass(e.__closeButton,V.CLASS_DRAG),L.default.unbind(window,"mousemove",t),L.default.unbind(window,"mouseup",r)}function n(n){return n.preventDefault(),i=n.clientX,L.default.addClass(e.__closeButton,V.CLASS_DRAG),L.default.bind(window,"mousemove",t),L.default.bind(window,"mouseup",r),!1}var i=void 0;e.__resize_handle=document.createElement("div"),O.default.extend(e.__resize_handle.style,{width:"6px",marginLeft:"-3px",height:"200px",cursor:"ew-resize",position:"absolute"}),L.default.bind(e.__resize_handle,"mousedown",n),L.default.bind(e.__closeButton,"mousedown",n),e.domElement.insertBefore(e.__resize_handle,e.domElement.firstElementChild)}function p(e,t){e.domElement.style.width=t+"px",e.__save_row&&e.autoPlace&&(e.__save_row.style.width=t+"px"),e.__closeButton&&(e.__closeButton.style.width=t+"px")}function m(e,t){var r={};return O.default.each(e.__rememberedObjects,(function(n,i){var a={},o=e.__rememberedObjectIndecesToControllers[i];O.default.each(o,(function(e,r){a[r]=t?e.initialValue:e.getValue()})),r[i]=a})),r}function g(e){for(var t=0;t<e.__preset_select.length;t++)e.__preset_select[t].value===e.preset&&(e.__preset_select.selectedIndex=t)}function v(e){0!==e.length&&A.default.call(window,(function(){v(e)})),O.default.each(e,(function(e){e.updateDisplay()}))}var y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},b=n(r(18)),E=n(r(19)),x=n(r(20)),w=n(r(7)),T=n(r(8)),_=n(r(15)),S=n(r(13)),M=n(r(14)),R=n(r(16)),A=n(r(21)),C=n(r(22)),L=n(r(9)),O=n(r(5)),I=n(r(23));b.default.inject(I.default);var P="dg",H=72,k=20,N="Default",U=function(){try{return"localStorage"in window&&null!==window.localStorage}catch(e){return!1}}(),D=void 0,F=!0,B=void 0,z=!1,j=[],V=function e(t){function r(){var e=n.getRoot();e.width+=1,O.default.defer((function(){e.width-=1}))}var n=this,a=t||{};this.domElement=document.createElement("div"),this.__ul=document.createElement("ul"),this.domElement.appendChild(this.__ul),L.default.addClass(this.domElement,P),this.__folders={},this.__controllers=[],this.__rememberedObjects=[],this.__rememberedObjectIndecesToControllers=[],this.__listening=[],a=O.default.defaults(a,{autoPlace:!0,width:e.DEFAULT_WIDTH}),a=O.default.defaults(a,{resizable:a.autoPlace,hideable:a.autoPlace}),O.default.isUndefined(a.load)?a.load={preset:N}:a.preset&&(a.load.preset=a.preset),O.default.isUndefined(a.parent)&&a.hideable&&j.push(this),a.resizable=O.default.isUndefined(a.parent)&&a.resizable,a.autoPlace&&O.default.isUndefined(a.scrollable)&&(a.scrollable=!0);var o=U&&"true"===localStorage.getItem(u(this,"isLocal")),s=void 0;if(Object.defineProperties(this,{parent:{get:function(){return a.parent}},scrollable:{get:function(){return a.scrollable}},autoPlace:{get:function(){return a.autoPlace}},preset:{get:function(){return n.parent?n.getRoot().preset:a.load.preset},set:function(e){n.parent?n.getRoot().preset=e:a.load.preset=e,g(this),n.revert()}},width:{get:function(){return a.width},set:function(e){a.width=e,p(n,e)}},name:{get:function(){return a.name},set:function(e){a.name=e,titleRowName&&(titleRowName.innerHTML=a.name)}},closed:{get:function(){return a.closed},set:function(t){a.closed=t,a.closed?L.default.addClass(n.__ul,e.CLASS_CLOSED):L.default.removeClass(n.__ul,e.CLASS_CLOSED),this.onResize(),n.__closeButton&&(n.__closeButton.innerHTML=t?e.TEXT_OPEN:e.TEXT_CLOSED)}},load:{get:function(){return a.load}},useLocalStorage:{get:function(){return o},set:function(e){U&&(o=e,e?L.default.bind(window,"unload",s):L.default.unbind(window,"unload",s),localStorage.setItem(u(n,"isLocal"),e))}}}),O.default.isUndefined(a.parent)){if(a.closed=!1,L.default.addClass(this.domElement,e.CLASS_MAIN),L.default.makeSelectable(this.domElement,!1),U&&o){n.useLocalStorage=!0;var l=localStorage.getItem(u(this,"gui"));l&&(a.load=JSON.parse(l))}this.__closeButton=document.createElement("div"),this.__closeButton.innerHTML=e.TEXT_CLOSED,L.default.addClass(this.__closeButton,e.CLASS_CLOSE_BUTTON),this.domElement.appendChild(this.__closeButton),L.default.bind(this.__closeButton,"click",(function(){n.closed=!n.closed}))}else{void 0===a.closed&&(a.closed=!0);var c=document.createTextNode(a.name);L.default.addClass(c,"controller-name");var h=i(n,c),d=function(e){return e.preventDefault(),n.closed=!n.closed,!1};L.default.addClass(this.__ul,e.CLASS_CLOSED),L.default.addClass(h,"title"),L.default.bind(h,"click",d),a.closed||(this.closed=!1)}a.autoPlace&&(O.default.isUndefined(a.parent)&&(F&&(B=document.createElement("div"),L.default.addClass(B,P),L.default.addClass(B,e.CLASS_AUTO_PLACE_CONTAINER),document.body.appendChild(B),F=!1),B.appendChild(this.domElement),L.default.addClass(this.domElement,e.CLASS_AUTO_PLACE)),this.parent||p(n,a.width)),this.__resizeHandler=function(){n.onResizeDebounced()},L.default.bind(window,"resize",this.__resizeHandler),L.default.bind(this.__ul,"webkitTransitionEnd",this.__resizeHandler),L.default.bind(this.__ul,"transitionend",this.__resizeHandler),L.default.bind(this.__ul,"oTransitionEnd",this.__resizeHandler),this.onResize(),a.resizable&&f(this),s=function(){U&&"true"===localStorage.getItem(u(n,"isLocal"))&&localStorage.setItem(u(n,"gui"),JSON.stringify(n.getSaveObject()))},this.saveToLocalStorageIfPossible=s,a.parent||r()};V.toggleHide=function(){z=!z,O.default.each(j,(function(e){e.domElement.style.display=z?"none":""}))},V.CLASS_AUTO_PLACE="a",V.CLASS_AUTO_PLACE_CONTAINER="ac",V.CLASS_MAIN="main",V.CLASS_CONTROLLER_ROW="cr",V.CLASS_TOO_TALL="taller-than-window",V.CLASS_CLOSED="closed",V.CLASS_CLOSE_BUTTON="close-button",V.CLASS_DRAG="drag",V.DEFAULT_WIDTH=245,V.TEXT_CLOSED="Close Controls",V.TEXT_OPEN="Open Controls",V._keydownHandler=function(e){"text"===document.activeElement.type||e.which!==H&&e.keyCode!==H||V.toggleHide()},L.default.bind(window,"keydown",V._keydownHandler,!1),O.default.extend(V.prototype,{add:function(e,t){return l(this,e,t,{factoryArgs:Array.prototype.slice.call(arguments,2)})},addColor:function(e,t){return l(this,e,t,{color:!0})},remove:function(e){this.__ul.removeChild(e.__li),this.__controllers.splice(this.__controllers.indexOf(e),1);var t=this;O.default.defer((function(){t.onResize()}))},destroy:function(){this.autoPlace&&B.removeChild(this.domElement),L.default.unbind(window,"keydown",V._keydownHandler,!1),L.default.unbind(window,"resize",this.__resizeHandler),this.saveToLocalStorageIfPossible&&L.default.unbind(window,"unload",this.saveToLocalStorageIfPossible)},addFolder:function(e){if(void 0!==this.__folders[e])throw new Error('You already have a folder in this GUI by the name "'+e+'"');var t={name:e,parent:this};t.autoPlace=this.autoPlace,this.load&&this.load.folders&&this.load.folders[e]&&(t.closed=this.load.folders[e].closed,t.load=this.load.folders[e]);var r=new V(t);this.__folders[e]=r;var n=i(this,r.domElement);return L.default.addClass(n,"folder"),r},open:function(){this.closed=!1},close:function(){this.closed=!0},onResize:function(){var e=this.getRoot();if(e.scrollable){var t=L.default.getOffset(e.__ul).top,r=0;O.default.each(e.__ul.childNodes,(function(t){e.autoPlace&&t===e.__save_row||(r+=L.default.getHeight(t))})),window.innerHeight-t-k<r?(L.default.addClass(e.domElement,V.CLASS_TOO_TALL),e.__ul.style.height=window.innerHeight-t-k+"px"):(L.default.removeClass(e.domElement,V.CLASS_TOO_TALL),e.__ul.style.height="auto")}e.__resize_handle&&O.default.defer((function(){e.__resize_handle.style.height=e.__ul.offsetHeight+"px"})),e.__closeButton&&(e.__closeButton.style.width=e.width+"px")},onResizeDebounced:O.default.debounce((function(){this.onResize()}),200),remember:function(){if(O.default.isUndefined(D)&&((D=new C.default).domElement.innerHTML=E.default),this.parent)throw new Error("You can only call remember on a top level GUI.");var e=this;O.default.each(Array.prototype.slice.call(arguments),(function(t){0===e.__rememberedObjects.length&&d(e),-1===e.__rememberedObjects.indexOf(t)&&e.__rememberedObjects.push(t)})),this.autoPlace&&p(this,this.width)},getRoot:function(){for(var e=this;e.parent;)e=e.parent;return e},getSaveObject:function(){var e=this.load;return e.closed=this.closed,this.__rememberedObjects.length>0&&(e.preset=this.preset,e.remembered||(e.remembered={}),e.remembered[this.preset]=m(this)),e.folders={},O.default.each(this.__folders,(function(t,r){e.folders[r]=t.getSaveObject()})),e},save:function(){this.load.remembered||(this.load.remembered={}),this.load.remembered[this.preset]=m(this),a(this,!1),this.saveToLocalStorageIfPossible()},saveAs:function(e){this.load.remembered||(this.load.remembered={},this.load.remembered[N]=m(this,!0)),this.load.remembered[e]=m(this),this.preset=e,c(this,e,!0),this.saveToLocalStorageIfPossible()},revert:function(e){O.default.each(this.__controllers,(function(t){this.getRoot().load.remembered?s(e||this.getRoot(),t):t.setValue(t.initialValue),t.__onFinishChange&&t.__onFinishChange.call(t,t.getValue())}),this),O.default.each(this.__folders,(function(e){e.revert(e)})),e||a(this.getRoot(),!1)},listen:function(e){var t=0===this.__listening.length;this.__listening.push(e),t&&v(this.__listening)},updateDisplay:function(){O.default.each(this.__controllers,(function(e){e.updateDisplay()})),O.default.each(this.__folders,(function(e){e.updateDisplay()}))}}),e.exports=V},function(e,t){"use strict";e.exports={load:function(e,t){var r=t||document,n=r.createElement("link");n.type="text/css",n.rel="stylesheet",n.href=e,r.getElementsByTagName("head")[0].appendChild(n)},inject:function(e,t){var r=t||document,n=document.createElement("style");n.type="text/css",n.innerHTML=e;var i=r.getElementsByTagName("head")[0];try{i.appendChild(n)}catch(e){}}}},function(e,t){e.exports="<div id=dg-save class=\"dg dialogue\"> Here's the new load parameter for your <code>GUI</code>'s constructor: <textarea id=dg-new-constructor></textarea> <div id=dg-save-locally> <input id=dg-local-storage type=checkbox /> Automatically save values to <code>localStorage</code> on exit. <div id=dg-local-explain>The values saved to <code>localStorage</code> will override those passed to <code>dat.GUI</code>'s constructor. This makes it easier to work incrementally, but <code>localStorage</code> is fragile, and your friends may not see the same values you do. </div> </div> </div>"},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var i=n(r(10)),a=n(r(13)),o=n(r(14)),s=n(r(11)),l=n(r(15)),u=n(r(8)),c=n(r(5)),h=function(e,t){var r=e[t];return c.default.isArray(arguments[2])||c.default.isObject(arguments[2])?new i.default(e,t,arguments[2]):c.default.isNumber(r)?c.default.isNumber(arguments[2])&&c.default.isNumber(arguments[3])?c.default.isNumber(arguments[4])?new o.default(e,t,arguments[2],arguments[3],arguments[4]):new o.default(e,t,arguments[2],arguments[3]):c.default.isNumber(arguments[4])?new a.default(e,t,{min:arguments[2],max:arguments[3],step:arguments[4]}):new a.default(e,t,{min:arguments[2],max:arguments[3]}):c.default.isString(r)?new s.default(e,t):c.default.isFunction(r)?new l.default(e,t,""):c.default.isBoolean(r)?new u.default(e,t):null};t.default=h},function(e,t){"use strict";function r(e){setTimeout(e,1e3/60)}t.__esModule=!0,t.default=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||r},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.__esModule=!0;var a=n(r(9)),o=n(r(5)),s=function(){function e(){i(this,e),this.backgroundElement=document.createElement("div"),o.default.extend(this.backgroundElement.style,{backgroundColor:"rgba(0,0,0,0.8)",top:0,left:0,display:"none",zIndex:"1000",opacity:0,WebkitTransition:"opacity 0.2s linear",transition:"opacity 0.2s linear"}),a.default.makeFullscreen(this.backgroundElement),this.backgroundElement.style.position="fixed",this.domElement=document.createElement("div"),o.default.extend(this.domElement.style,{position:"fixed",display:"none",zIndex:"1001",opacity:0,WebkitTransition:"-webkit-transform 0.2s ease-out, opacity 0.2s linear",transition:"transform 0.2s ease-out, opacity 0.2s linear"}),document.body.appendChild(this.backgroundElement),document.body.appendChild(this.domElement);var t=this;a.default.bind(this.backgroundElement,"click",(function(){t.hide()}))}return e.prototype.show=function(){var e=this;this.backgroundElement.style.display="block",this.domElement.style.display="block",this.domElement.style.opacity=0,this.domElement.style.webkitTransform="scale(1.1)",this.layout(),o.default.defer((function(){e.backgroundElement.style.opacity=1,e.domElement.style.opacity=1,e.domElement.style.webkitTransform="scale(1)"}))},e.prototype.hide=function(){var e=this,t=function t(){e.domElement.style.display="none",e.backgroundElement.style.display="none",a.default.unbind(e.domElement,"webkitTransitionEnd",t),a.default.unbind(e.domElement,"transitionend",t),a.default.unbind(e.domElement,"oTransitionEnd",t)};a.default.bind(this.domElement,"webkitTransitionEnd",t),a.default.bind(this.domElement,"transitionend",t),a.default.bind(this.domElement,"oTransitionEnd",t),this.backgroundElement.style.opacity=0,this.domElement.style.opacity=0,this.domElement.style.webkitTransform="scale(1.1)"},e.prototype.layout=function(){this.domElement.style.left=window.innerWidth/2-a.default.getWidth(this.domElement)/2+"px",this.domElement.style.top=window.innerHeight/2-a.default.getHeight(this.domElement)/2+"px"},e}();t.default=s},function(e,t,r){(e.exports=r(24)()).push([e.id,".dg ul{list-style:none;margin:0;padding:0;width:100%;clear:both}.dg.ac{position:fixed;top:0;left:0;right:0;height:0;z-index:0}.dg:not(.ac) .main{overflow:hidden}.dg.main{-webkit-transition:opacity .1s linear;transition:opacity .1s linear}.dg.main.taller-than-window{overflow-y:auto}.dg.main.taller-than-window .close-button{opacity:1;margin-top:-1px;border-top:1px solid #2c2c2c}.dg.main ul.closed .close-button{opacity:1!important}.dg.main .close-button.drag,.dg.main:hover .close-button{opacity:1}.dg.main .close-button{-webkit-transition:opacity .1s linear;transition:opacity .1s linear;border:0;position:absolute;line-height:19px;height:20px;cursor:pointer;text-align:center;background-color:#000}.dg.main .close-button:hover{background-color:#111}.dg.a{float:right;margin-right:15px;overflow-x:hidden}.dg.a.has-save>ul{margin-top:27px}.dg.a.has-save>ul.closed{margin-top:0}.dg.a .save-row{position:fixed;top:0;z-index:1002}.dg li{-webkit-transition:height .1s ease-out;transition:height .1s ease-out}.dg li:not(.folder){cursor:auto;height:27px;line-height:27px;overflow:hidden;padding:0 4px 0 5px}.dg li.folder{padding:0;border-left:4px solid transparent}.dg li.title{cursor:pointer;margin-left:-4px}.dg .closed li:not(.title),.dg .closed ul li,.dg .closed ul li>*{height:0;overflow:hidden;border:0}.dg .cr{clear:both;padding-left:3px;height:27px}.dg .property-name{cursor:default;float:left;clear:left;width:40%;overflow:hidden;text-overflow:ellipsis}.dg .c{float:left;width:60%}.dg .c input[type=text]{border:0;margin-top:4px;padding:3px;width:100%;float:right}.dg .has-slider input[type=text]{width:30%;margin-left:0}.dg .slider{float:left;width:66%;margin-left:-5px;margin-right:0;height:19px;margin-top:4px}.dg .slider-fg{height:100%}.dg .c input[type=checkbox]{margin-top:9px}.dg .c select{margin-top:5px}.dg .cr.boolean,.dg .cr.boolean *,.dg .cr.function,.dg .cr.function *,.dg .cr.function .property-name{cursor:pointer}.dg .selector{display:none;position:absolute;margin-left:-9px;margin-top:23px;z-index:10}.dg .c:hover .selector,.dg .selector.drag{display:block}.dg li.save-row{padding:0}.dg li.save-row .button{display:inline-block;padding:0 6px}.dg.dialogue{background-color:#222;width:460px;padding:15px;font-size:13px;line-height:15px}#dg-new-constructor{padding:10px;color:#222;font-family:Monaco,monospace;font-size:10px;border:0;resize:none;box-shadow:inset 1px 1px 1px #888;word-wrap:break-word;margin:12px 0;display:block;width:440px;overflow-y:scroll;height:100px;position:relative}#dg-local-explain{display:none;font-size:11px;line-height:17px;border-radius:3px;background-color:#333;padding:8px;margin-top:10px}#dg-local-explain code{font-size:10px}#dat-gui-save-locally{display:none}.dg{color:#eee;font:11px Lucida Grande,sans-serif;text-shadow:0 -1px 0 #111}.dg.main::-webkit-scrollbar{width:5px;background:#1a1a1a}.dg.main::-webkit-scrollbar-corner{height:0;display:none}.dg.main::-webkit-scrollbar-thumb{border-radius:5px;background:#676767}.dg li:not(.folder){background:#1a1a1a;border-bottom:1px solid #2c2c2c}.dg li.save-row{line-height:25px;background:#dad5cb;border:0}.dg li.save-row select{margin-left:5px;width:108px}.dg li.save-row .button{margin-left:5px;margin-top:1px;border-radius:2px;font-size:9px;line-height:7px;padding:4px 4px 5px;background:#c5bdad;color:#fff;text-shadow:0 1px 0 #b0a58f;box-shadow:0 -1px 0 #b0a58f;cursor:pointer}.dg li.save-row .button.gears{background:#c5bdad url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAANCAYAAAB/9ZQ7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAQJJREFUeNpiYKAU/P//PwGIC/ApCABiBSAW+I8AClAcgKxQ4T9hoMAEUrxx2QSGN6+egDX+/vWT4e7N82AMYoPAx/evwWoYoSYbACX2s7KxCxzcsezDh3evFoDEBYTEEqycggWAzA9AuUSQQgeYPa9fPv6/YWm/Acx5IPb7ty/fw+QZblw67vDs8R0YHyQhgObx+yAJkBqmG5dPPDh1aPOGR/eugW0G4vlIoTIfyFcA+QekhhHJhPdQxbiAIguMBTQZrPD7108M6roWYDFQiIAAv6Aow/1bFwXgis+f2LUAynwoIaNcz8XNx3Dl7MEJUDGQpx9gtQ8YCueB+D26OECAAQDadt7e46D42QAAAABJRU5ErkJggg==) 2px 1px no-repeat;height:7px;width:8px}.dg li.save-row .button:hover{background-color:#bab19e;box-shadow:0 -1px 0 #b0a58f}.dg li.folder{border-bottom:0}.dg li.title{padding-left:16px;background:#000 url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlI+hKgFxoCgAOw==) 6px 10px no-repeat;cursor:pointer;border-bottom:1px solid hsla(0,0%,100%,.2)}.dg .closed li.title{background-image:url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlGIWqMCbWAEAOw==)}.dg .cr.boolean{border-left:3px solid #806787}.dg .cr.color{border-left:3px solid}.dg .cr.function{border-left:3px solid #e61d5f}.dg .cr.number{border-left:3px solid #2fa1d6}.dg .cr.number input[type=text]{color:#2fa1d6}.dg .cr.string{border-left:3px solid #1ed36f}.dg .cr.string input[type=text]{color:#1ed36f}.dg .cr.boolean:hover,.dg .cr.function:hover{background:#111}.dg .c input[type=text]{background:#303030;outline:none}.dg .c input[type=text]:hover{background:#3c3c3c}.dg .c input[type=text]:focus{background:#494949;color:#fff}.dg .c .slider{background:#303030;cursor:ew-resize}.dg .c .slider-fg{background:#2fa1d6;max-width:100%}.dg .c .slider:hover{background:#3c3c3c}.dg .c .slider:hover .slider-fg{background:#44abda}",""])},function(e,t){e.exports=function(){var e=[];return e.toString=function(){for(var e=[],t=0;t<this.length;t++){var r=this[t];r[2]?e.push("@media "+r[2]+"{"+r[1]+"}"):e.push(r[1])}return e.join("")},e.i=function(t,r){"string"==typeof t&&(t=[[null,t,""]]);for(var n={},i=0;i<this.length;i++){var a=this[i][0];"number"==typeof a&&(n[a]=!0)}for(i=0;i<t.length;i++){var o=t[i];"number"==typeof o[0]&&n[o[0]]||(r&&!o[2]?o[2]=r:r&&(o[2]="("+o[2]+") and ("+r+")"),e.push(o))}},e}}])},5657:function(){
/** @license zlib.js 2012 - imaya [ https://github.com/imaya/zlib.js ] The MIT License */(function(){"use strict";var e=this;function t(t,r){var n,i=t.split("."),a=e;!(i[0]in a)&&a.execScript&&a.execScript("var "+i[0]);for(;i.length&&(n=i.shift());)i.length||void 0===r?a=a[n]?a[n]:a[n]={}:a[n]=r}var r="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Uint32Array&&"undefined"!=typeof DataView;function n(e){var t,n,i,a,o,s,l,u,c,h,d=e.length,f=0,p=Number.POSITIVE_INFINITY;for(u=0;u<d;++u)e[u]>f&&(f=e[u]),e[u]<p&&(p=e[u]);for(t=1<<f,n=new(r?Uint32Array:Array)(t),i=1,a=0,o=2;i<=f;){for(u=0;u<d;++u)if(e[u]===i){for(s=0,l=a,c=0;c<i;++c)s=s<<1|1&l,l>>=1;for(h=i<<16|u,c=s;c<t;c+=o)n[c]=h;++a}++i,a<<=1,o<<=1}return[n,f,p]}function i(e,t){switch(this.g=[],this.h=32768,this.d=this.f=this.a=this.l=0,this.input=r?new Uint8Array(e):e,this.m=!1,this.i=o,this.s=!1,!t&&(t={})||(t.index&&(this.a=t.index),t.bufferSize&&(this.h=t.bufferSize),t.bufferType&&(this.i=t.bufferType),t.resize&&(this.s=t.resize)),this.i){case a:this.b=32768,this.c=new(r?Uint8Array:Array)(32768+this.h+258);break;case o:this.b=0,this.c=new(r?Uint8Array:Array)(this.h),this.e=this.A,this.n=this.w,this.j=this.z;break;default:throw Error("invalid inflate mode")}}var a=0,o=1,s={u:a,t:o};i.prototype.k=function(){for(;!this.m;){var e=M(this,3);switch(1&e&&(this.m=!0),e>>>=1){case 0:var t=this.input,n=this.a,i=this.c,s=this.b,l=t.length,u=void 0,c=i.length,h=void 0;if(this.d=this.f=0,n+1>=l)throw Error("invalid uncompressed block header: LEN");if(u=t[n++]|t[n++]<<8,n+1>=l)throw Error("invalid uncompressed block header: NLEN");if(u===~(t[n++]|t[n++]<<8))throw Error("invalid uncompressed block header: length verify");if(n+u>t.length)throw Error("input buffer is broken");switch(this.i){case a:for(;s+u>i.length;){if(u-=h=c-s,r)i.set(t.subarray(n,n+h),s),s+=h,n+=h;else for(;h--;)i[s++]=t[n++];this.b=s,i=this.e(),s=this.b}break;case o:for(;s+u>i.length;)i=this.e({p:2});break;default:throw Error("invalid inflate mode")}if(r)i.set(t.subarray(n,n+u),s),s+=u,n+=u;else for(;u--;)i[s++]=t[n++];this.a=n,this.b=s,this.c=i;break;case 1:this.j(T,S);break;case 2:A(this);break;default:throw Error("unknown BTYPE: "+e)}}return this.n()};var l,u,c=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],h=r?new Uint16Array(c):c,d=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,258,258],f=r?new Uint16Array(d):d,p=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0],m=r?new Uint8Array(p):p,g=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577],v=r?new Uint16Array(g):g,y=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],b=r?new Uint8Array(y):y,E=new(r?Uint8Array:Array)(288);for(l=0,u=E.length;l<u;++l)E[l]=143>=l?8:255>=l?9:279>=l?7:8;var x,w,T=n(E),_=new(r?Uint8Array:Array)(30);for(x=0,w=_.length;x<w;++x)_[x]=5;var S=n(_);function M(e,t){for(var r,n=e.f,i=e.d,a=e.input,o=e.a,s=a.length;i<t;){if(o>=s)throw Error("input buffer is broken");n|=a[o++]<<i,i+=8}return r=n&(1<<t)-1,e.f=n>>>t,e.d=i-t,e.a=o,r}function R(e,t){for(var r,n,i=e.f,a=e.d,o=e.input,s=e.a,l=o.length,u=t[0],c=t[1];a<c&&!(s>=l);)i|=o[s++]<<a,a+=8;return n=(r=u[i&(1<<c)-1])>>>16,e.f=i>>n,e.d=a-n,e.a=s,65535&r}function A(e){function t(e,t,r){var n,i,a,o=this.q;for(a=0;a<e;)switch(n=R(this,t),n){case 16:for(i=3+M(this,2);i--;)r[a++]=o;break;case 17:for(i=3+M(this,3);i--;)r[a++]=0;o=0;break;case 18:for(i=11+M(this,7);i--;)r[a++]=0;o=0;break;default:o=r[a++]=n}return this.q=o,r}var i,a,o,s,l=M(e,5)+257,u=M(e,5)+1,c=M(e,4)+4,d=new(r?Uint8Array:Array)(h.length);for(s=0;s<c;++s)d[h[s]]=M(e,3);if(!r)for(s=c,c=d.length;s<c;++s)d[h[s]]=0;i=n(d),a=new(r?Uint8Array:Array)(l),o=new(r?Uint8Array:Array)(u),e.q=0,e.j(n(t.call(e,l,i,a)),n(t.call(e,u,i,o)))}function C(e,t){var r,n;if(this.input=e,this.a=0,!t&&(t={})||(t.index&&(this.a=t.index),t.verify&&(this.B=t.verify)),r=e[this.a++],n=e[this.a++],(15&r)!==L)throw Error("unsupported compression method");if(this.method=L,0!=((r<<8)+n)%31)throw Error("invalid fcheck flag:"+((r<<8)+n)%31);if(32&n)throw Error("fdict flag is not supported");this.r=new i(e,{index:this.a,bufferSize:t.bufferSize,bufferType:t.bufferType,resize:t.resize})}i.prototype.j=function(e,t){var r=this.c,n=this.b;this.o=e;for(var i,a,o,s,l=r.length-258;256!==(i=R(this,e));)if(256>i)n>=l&&(this.b=n,r=this.e(),n=this.b),r[n++]=i;else for(s=f[a=i-257],0<m[a]&&(s+=M(this,m[a])),i=R(this,t),o=v[i],0<b[i]&&(o+=M(this,b[i])),n>=l&&(this.b=n,r=this.e(),n=this.b);s--;)r[n]=r[n++-o];for(;8<=this.d;)this.d-=8,this.a--;this.b=n},i.prototype.z=function(e,t){var r=this.c,n=this.b;this.o=e;for(var i,a,o,s,l=r.length;256!==(i=R(this,e));)if(256>i)n>=l&&(l=(r=this.e()).length),r[n++]=i;else for(s=f[a=i-257],0<m[a]&&(s+=M(this,m[a])),i=R(this,t),o=v[i],0<b[i]&&(o+=M(this,b[i])),n+s>l&&(l=(r=this.e()).length);s--;)r[n]=r[n++-o];for(;8<=this.d;)this.d-=8,this.a--;this.b=n},i.prototype.e=function(){var e,t,n=new(r?Uint8Array:Array)(this.b-32768),i=this.b-32768,a=this.c;if(r)n.set(a.subarray(32768,n.length));else for(e=0,t=n.length;e<t;++e)n[e]=a[e+32768];if(this.g.push(n),this.l+=n.length,r)a.set(a.subarray(i,i+32768));else for(e=0;32768>e;++e)a[e]=a[i+e];return this.b=32768,a},i.prototype.A=function(e){var t,n,i,a=this.input.length/this.a+1|0,o=this.input,s=this.c;return e&&("number"==typeof e.p&&(a=e.p),"number"==typeof e.v&&(a+=e.v)),2>a?n=(i=(o.length-this.a)/this.o[2]/2*258|0)<s.length?s.length+i:s.length<<1:n=s.length*a,r?(t=new Uint8Array(n)).set(s):t=s,this.c=t},i.prototype.n=function(){var e,t,n,i,a,o=0,s=this.c,l=this.g,u=new(r?Uint8Array:Array)(this.l+(this.b-32768));if(0===l.length)return r?this.c.subarray(32768,this.b):this.c.slice(32768,this.b);for(t=0,n=l.length;t<n;++t)for(i=0,a=(e=l[t]).length;i<a;++i)u[o++]=e[i];for(t=32768,n=this.b;t<n;++t)u[o++]=s[t];return this.g=[],this.buffer=u},i.prototype.w=function(){var e,t=this.b;return r?this.s?(e=new Uint8Array(t)).set(this.c.subarray(0,t)):e=this.c.subarray(0,t):(this.c.length>t&&(this.c.length=t),e=this.c),this.buffer=e},C.prototype.k=function(){var e,t,r=this.input;if(e=this.r.k(),this.a=this.r.a,this.B){t=(r[this.a++]<<24|r[this.a++]<<16|r[this.a++]<<8|r[this.a++])>>>0;var n=e;if("string"==typeof n){var i,a,o=n.split("");for(i=0,a=o.length;i<a;i++)o[i]=(255&o[i].charCodeAt(0))>>>0;n=o}for(var s,l=1,u=0,c=n.length,h=0;0<c;){c-=s=1024<c?1024:c;do{u+=l+=n[h++]}while(--s);l%=65521,u%=65521}if(t!==(u<<16|l)>>>0)throw Error("invalid adler-32 checksum")}return e};var L=8;t("Zlib.Inflate",C),t("Zlib.Inflate.prototype.decompress",C.prototype.k);var O,I,P,H,k={ADAPTIVE:s.t,BLOCK:s.u};if(Object.keys)O=Object.keys(k);else for(I in O=[],P=0,k)O[P++]=I;for(P=0,H=O.length;P<H;++P)t("Zlib.Inflate.BufferType."+(I=O[P]),k[I])}).call(this)},7472:(e,t,r)=>{var n=r(8764).Buffer;
/*!

JSZip - A Javascript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2014 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/master/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/master/LICENSE
*/e.exports=function e(t,n,i){function a(s,l){if(!n[s]){if(!t[s]){if(!l&&r(5172))return require(s,!0);if(o)return o(s,!0);throw new Error("Cannot find module '"+s+"'")}var u=n[s]={exports:{}};t[s][0].call(u.exports,(function(e){var r=t[s][1][e];return a(r||e)}),u,u.exports,e,t,n,i)}return n[s].exports}for(var o=void 0,s=0;s<i.length;s++)a(i[s]);return a}({1:[function(e,t,r){"use strict";var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";r.encode=function(e){for(var t,r,i,a,o,s,l,u="",c=0;c<e.length;)a=(t=e.charCodeAt(c++))>>2,o=(3&t)<<4|(r=e.charCodeAt(c++))>>4,s=(15&r)<<2|(i=e.charCodeAt(c++))>>6,l=63&i,isNaN(r)?s=l=64:isNaN(i)&&(l=64),u=u+n.charAt(a)+n.charAt(o)+n.charAt(s)+n.charAt(l);return u},r.decode=function(e){var t,r,i,a,o,s,l="",u=0;for(e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");u<e.length;)t=n.indexOf(e.charAt(u++))<<2|(a=n.indexOf(e.charAt(u++)))>>4,r=(15&a)<<4|(o=n.indexOf(e.charAt(u++)))>>2,i=(3&o)<<6|(s=n.indexOf(e.charAt(u++))),l+=String.fromCharCode(t),64!=o&&(l+=String.fromCharCode(r)),64!=s&&(l+=String.fromCharCode(i));return l}},{}],2:[function(e,t){"use strict";function r(){this.compressedSize=0,this.uncompressedSize=0,this.crc32=0,this.compressionMethod=null,this.compressedContent=null}r.prototype={getContent:function(){return null},getCompressedContent:function(){return null}},t.exports=r},{}],3:[function(e,t,r){"use strict";r.STORE={magic:"\0\0",compress:function(e){return e},uncompress:function(e){return e},compressInputType:null,uncompressInputType:null},r.DEFLATE=e("./flate")},{"./flate":8}],4:[function(e,t){"use strict";var r=e("./utils"),n=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117];t.exports=function(e,t){if(void 0===e||!e.length)return 0;var i="string"!==r.getTypeOf(e);void 0===t&&(t=0);var a=0;t^=-1;for(var o=0,s=e.length;s>o;o++)a=i?e[o]:e.charCodeAt(o),t=t>>>8^n[255&(t^a)];return-1^t}},{"./utils":21}],5:[function(e,t){"use strict";function r(){this.data=null,this.length=0,this.index=0}var n=e("./utils");r.prototype={checkOffset:function(e){this.checkIndex(this.index+e)},checkIndex:function(e){if(this.length<e||0>e)throw new Error("End of data reached (data length = "+this.length+", asked index = "+e+"). Corrupted zip ?")},setIndex:function(e){this.checkIndex(e),this.index=e},skip:function(e){this.setIndex(this.index+e)},byteAt:function(){},readInt:function(e){var t,r=0;for(this.checkOffset(e),t=this.index+e-1;t>=this.index;t--)r=(r<<8)+this.byteAt(t);return this.index+=e,r},readString:function(e){return n.transformTo("string",this.readData(e))},readData:function(){},lastIndexOfSignature:function(){},readDate:function(){var e=this.readInt(4);return new Date(1980+(e>>25&127),(e>>21&15)-1,e>>16&31,e>>11&31,e>>5&63,(31&e)<<1)}},t.exports=r},{"./utils":21}],6:[function(e,t,r){"use strict";r.base64=!1,r.binary=!1,r.dir=!1,r.createFolders=!1,r.date=null,r.compression=null,r.comment=null},{}],7:[function(e,t,r){"use strict";var n=e("./utils");r.string2binary=function(e){return n.string2binary(e)},r.string2Uint8Array=function(e){return n.transformTo("uint8array",e)},r.uint8Array2String=function(e){return n.transformTo("string",e)},r.string2Blob=function(e){var t=n.transformTo("arraybuffer",e);return n.arrayBuffer2Blob(t)},r.arrayBuffer2Blob=function(e){return n.arrayBuffer2Blob(e)},r.transformTo=function(e,t){return n.transformTo(e,t)},r.getTypeOf=function(e){return n.getTypeOf(e)},r.checkSupport=function(e){return n.checkSupport(e)},r.MAX_VALUE_16BITS=n.MAX_VALUE_16BITS,r.MAX_VALUE_32BITS=n.MAX_VALUE_32BITS,r.pretty=function(e){return n.pretty(e)},r.findCompression=function(e){return n.findCompression(e)},r.isRegExp=function(e){return n.isRegExp(e)}},{"./utils":21}],8:[function(e,t,r){"use strict";var n="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Uint32Array,i=e("pako");r.uncompressInputType=n?"uint8array":"array",r.compressInputType=n?"uint8array":"array",r.magic="\b\0",r.compress=function(e){return i.deflateRaw(e)},r.uncompress=function(e){return i.inflateRaw(e)}},{pako:24}],9:[function(e,t){"use strict";function r(e,t){return this instanceof r?(this.files={},this.comment=null,this.root="",e&&this.load(e,t),void(this.clone=function(){var e=new r;for(var t in this)"function"!=typeof this[t]&&(e[t]=this[t]);return e})):new r(e,t)}var n=e("./base64");r.prototype=e("./object"),r.prototype.load=e("./load"),r.support=e("./support"),r.defaults=e("./defaults"),r.utils=e("./deprecatedPublicUtils"),r.base64={encode:function(e){return n.encode(e)},decode:function(e){return n.decode(e)}},r.compressions=e("./compressions"),t.exports=r},{"./base64":1,"./compressions":3,"./defaults":6,"./deprecatedPublicUtils":7,"./load":10,"./object":13,"./support":17}],10:[function(e,t){"use strict";var r=e("./base64"),n=e("./zipEntries");t.exports=function(e,t){var i,a,o,s;for((t=t||{}).base64&&(e=r.decode(e)),i=(a=new n(e,t)).files,o=0;o<i.length;o++)s=i[o],this.file(s.fileName,s.decompressed,{binary:!0,optimizedBinaryString:!0,date:s.date,dir:s.dir,comment:s.fileComment.length?s.fileComment:null,createFolders:t.createFolders});return a.zipComment.length&&(this.comment=a.zipComment),this}},{"./base64":1,"./zipEntries":22}],11:[function(e,t){(function(e){"use strict";t.exports=function(t,r){return new e(t,r)},t.exports.test=function(t){return e.isBuffer(t)}}).call(this,void 0!==n?n:void 0)},{}],12:[function(e,t){"use strict";function r(e){this.data=e,this.length=this.data.length,this.index=0}var n=e("./uint8ArrayReader");r.prototype=new n,r.prototype.readData=function(e){this.checkOffset(e);var t=this.data.slice(this.index,this.index+e);return this.index+=e,t},t.exports=r},{"./uint8ArrayReader":18}],13:[function(e,t){"use strict";var r=e("./support"),n=e("./utils"),i=e("./crc32"),a=e("./signature"),o=e("./defaults"),s=e("./base64"),l=e("./compressions"),u=e("./compressedObject"),c=e("./nodeBuffer"),h=e("./utf8"),d=e("./stringWriter"),f=e("./uint8ArrayWriter"),p=function(e){if(e._data instanceof u&&(e._data=e._data.getContent(),e.options.binary=!0,e.options.base64=!1,"uint8array"===n.getTypeOf(e._data))){var t=e._data;e._data=new Uint8Array(t.length),0!==t.length&&e._data.set(t,0)}return e._data},m=function(e){var t=p(e);return"string"===n.getTypeOf(t)?!e.options.binary&&r.nodebuffer?c(t,"utf-8"):e.asBinary():t},g=function(e){var t=p(this);return null==t?"":(this.options.base64&&(t=s.decode(t)),t=e&&this.options.binary?M.utf8decode(t):n.transformTo("string",t),e||this.options.binary||(t=n.transformTo("string",M.utf8encode(t))),t)},v=function(e,t,r){this.name=e,this.dir=r.dir,this.date=r.date,this.comment=r.comment,this._data=t,this.options=r,this._initialMetadata={dir:r.dir,date:r.date}};v.prototype={asText:function(){return g.call(this,!0)},asBinary:function(){return g.call(this,!1)},asNodeBuffer:function(){var e=m(this);return n.transformTo("nodebuffer",e)},asUint8Array:function(){var e=m(this);return n.transformTo("uint8array",e)},asArrayBuffer:function(){return this.asUint8Array().buffer}};var y=function(e,t){var r,n="";for(r=0;t>r;r++)n+=String.fromCharCode(255&e),e>>>=8;return n},b=function(){var e,t,r={};for(e=0;e<arguments.length;e++)for(t in arguments[e])arguments[e].hasOwnProperty(t)&&void 0===r[t]&&(r[t]=arguments[e][t]);return r},E=function(e){return!0!==(e=e||{}).base64||null!==e.binary&&void 0!==e.binary||(e.binary=!0),(e=b(e,o)).date=e.date||new Date,null!==e.compression&&(e.compression=e.compression.toUpperCase()),e},x=function(e,t,r){var i,a=n.getTypeOf(t);if((r=E(r)).createFolders&&(i=w(e))&&T.call(this,i,!0),r.dir||null==t)r.base64=!1,r.binary=!1,t=null;else if("string"===a)r.binary&&!r.base64&&!0!==r.optimizedBinaryString&&(t=n.string2binary(t));else{if(r.base64=!1,r.binary=!0,!(a||t instanceof u))throw new Error("The data of '"+e+"' is in an unsupported format !");"arraybuffer"===a&&(t=n.transformTo("uint8array",t))}var o=new v(e,t,r);return this.files[e]=o,o},w=function(e){"/"==e.slice(-1)&&(e=e.substring(0,e.length-1));var t=e.lastIndexOf("/");return t>0?e.substring(0,t):""},T=function(e,t){return"/"!=e.slice(-1)&&(e+="/"),t=void 0!==t&&t,this.files[e]||x.call(this,e,null,{dir:!0,createFolders:t}),this.files[e]},_=function(e,t){var r,a=new u;return e._data instanceof u?(a.uncompressedSize=e._data.uncompressedSize,a.crc32=e._data.crc32,0===a.uncompressedSize||e.dir?(t=l.STORE,a.compressedContent="",a.crc32=0):e._data.compressionMethod===t.magic?a.compressedContent=e._data.getCompressedContent():(r=e._data.getContent(),a.compressedContent=t.compress(n.transformTo(t.compressInputType,r)))):((!(r=m(e))||0===r.length||e.dir)&&(t=l.STORE,r=""),a.uncompressedSize=r.length,a.crc32=i(r),a.compressedContent=t.compress(n.transformTo(t.compressInputType,r))),a.compressedSize=a.compressedContent.length,a.compressionMethod=t.magic,a},S=function(e,t,r,o){var s,l,u,c,d=(r.compressedContent,n.transformTo("string",h.utf8encode(t.name))),f=t.comment||"",p=n.transformTo("string",h.utf8encode(f)),m=d.length!==t.name.length,g=p.length!==f.length,v=t.options,b="",E="",x="";u=t._initialMetadata.dir!==t.dir?t.dir:v.dir,s=(c=t._initialMetadata.date!==t.date?t.date:v.date).getHours(),s<<=6,s|=c.getMinutes(),s<<=5,s|=c.getSeconds()/2,l=c.getFullYear()-1980,l<<=4,l|=c.getMonth()+1,l<<=5,l|=c.getDate(),m&&(E=y(1,1)+y(i(d),4)+d,b+="up"+y(E.length,2)+E),g&&(x=y(1,1)+y(this.crc32(p),4)+p,b+="uc"+y(x.length,2)+x);var w="";return w+="\n\0",w+=m||g?"\0\b":"\0\0",w+=r.compressionMethod,w+=y(s,2),w+=y(l,2),w+=y(r.crc32,4),w+=y(r.compressedSize,4),w+=y(r.uncompressedSize,4),w+=y(d.length,2),w+=y(b.length,2),{fileRecord:a.LOCAL_FILE_HEADER+w+d+b,dirRecord:a.CENTRAL_FILE_HEADER+"\0"+w+y(p.length,2)+"\0\0\0\0"+(!0===u?"\0\0\0":"\0\0\0\0")+y(o,4)+d+b+p,compressedObject:r}},M={load:function(){throw new Error("Load method is not defined. Is the file jszip-load.js included ?")},filter:function(e){var t,r,n,i,a=[];for(t in this.files)this.files.hasOwnProperty(t)&&(n=this.files[t],i=new v(n.name,n._data,b(n.options)),r=t.slice(this.root.length,t.length),t.slice(0,this.root.length)===this.root&&e(r,i)&&a.push(i));return a},file:function(e,t,r){if(1===arguments.length){if(n.isRegExp(e)){var i=e;return this.filter((function(e,t){return!t.dir&&i.test(e)}))}return this.filter((function(t,r){return!r.dir&&t===e}))[0]||null}return e=this.root+e,x.call(this,e,t,r),this},folder:function(e){if(!e)return this;if(n.isRegExp(e))return this.filter((function(t,r){return r.dir&&e.test(t)}));var t=this.root+e,r=T.call(this,t),i=this.clone();return i.root=r.name,i},remove:function(e){e=this.root+e;var t=this.files[e];if(t||("/"!=e.slice(-1)&&(e+="/"),t=this.files[e]),t&&!t.dir)delete this.files[e];else for(var r=this.filter((function(t,r){return r.name.slice(0,e.length)===e})),n=0;n<r.length;n++)delete this.files[r[n].name];return this},generate:function(e){e=b(e||{},{base64:!0,compression:"STORE",type:"base64",comment:null}),n.checkSupport(e.type);var t,r,i=[],o=0,u=0,c=n.transformTo("string",this.utf8encode(e.comment||this.comment||""));for(var h in this.files)if(this.files.hasOwnProperty(h)){var p=this.files[h],m=p.options.compression||e.compression.toUpperCase(),g=l[m];if(!g)throw new Error(m+" is not a valid compression method !");var v=_.call(this,p,g),E=S.call(this,h,p,v,o);o+=E.fileRecord.length+v.compressedSize,u+=E.dirRecord.length,i.push(E)}var x="";x=a.CENTRAL_DIRECTORY_END+"\0\0\0\0"+y(i.length,2)+y(i.length,2)+y(u,4)+y(o,4)+y(c.length,2)+c;var w=e.type.toLowerCase();for(t="uint8array"===w||"arraybuffer"===w||"blob"===w||"nodebuffer"===w?new f(o+u+x.length):new d(o+u+x.length),r=0;r<i.length;r++)t.append(i[r].fileRecord),t.append(i[r].compressedObject.compressedContent);for(r=0;r<i.length;r++)t.append(i[r].dirRecord);t.append(x);var T=t.finalize();switch(e.type.toLowerCase()){case"uint8array":case"arraybuffer":case"nodebuffer":return n.transformTo(e.type.toLowerCase(),T);case"blob":return n.arrayBuffer2Blob(n.transformTo("arraybuffer",T));case"base64":return e.base64?s.encode(T):T;default:return T}},crc32:function(e,t){return i(e,t)},utf8encode:function(e){return n.transformTo("string",h.utf8encode(e))},utf8decode:function(e){return h.utf8decode(e)}};t.exports=M},{"./base64":1,"./compressedObject":2,"./compressions":3,"./crc32":4,"./defaults":6,"./nodeBuffer":11,"./signature":14,"./stringWriter":16,"./support":17,"./uint8ArrayWriter":19,"./utf8":20,"./utils":21}],14:[function(e,t,r){"use strict";r.LOCAL_FILE_HEADER="PK",r.CENTRAL_FILE_HEADER="PK",r.CENTRAL_DIRECTORY_END="PK",r.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK",r.ZIP64_CENTRAL_DIRECTORY_END="PK",r.DATA_DESCRIPTOR="PK\b"},{}],15:[function(e,t){"use strict";function r(e,t){this.data=e,t||(this.data=i.string2binary(this.data)),this.length=this.data.length,this.index=0}var n=e("./dataReader"),i=e("./utils");r.prototype=new n,r.prototype.byteAt=function(e){return this.data.charCodeAt(e)},r.prototype.lastIndexOfSignature=function(e){return this.data.lastIndexOf(e)},r.prototype.readData=function(e){this.checkOffset(e);var t=this.data.slice(this.index,this.index+e);return this.index+=e,t},t.exports=r},{"./dataReader":5,"./utils":21}],16:[function(e,t){"use strict";var r=e("./utils"),n=function(){this.data=[]};n.prototype={append:function(e){e=r.transformTo("string",e),this.data.push(e)},finalize:function(){return this.data.join("")}},t.exports=n},{"./utils":21}],17:[function(e,t,r){(function(e){"use strict";if(r.base64=!0,r.array=!0,r.string=!0,r.arraybuffer="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array,r.nodebuffer=void 0!==e,r.uint8array="undefined"!=typeof Uint8Array,"undefined"==typeof ArrayBuffer)r.blob=!1;else{var t=new ArrayBuffer(0);try{r.blob=0===new Blob([t],{type:"application/zip"}).size}catch(e){try{var n=new(window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder);n.append(t),r.blob=0===n.getBlob("application/zip").size}catch(e){r.blob=!1}}}}).call(this,void 0!==n?n:void 0)},{}],18:[function(e,t){"use strict";function r(e){e&&(this.data=e,this.length=this.data.length,this.index=0)}var n=e("./dataReader");r.prototype=new n,r.prototype.byteAt=function(e){return this.data[e]},r.prototype.lastIndexOfSignature=function(e){for(var t=e.charCodeAt(0),r=e.charCodeAt(1),n=e.charCodeAt(2),i=e.charCodeAt(3),a=this.length-4;a>=0;--a)if(this.data[a]===t&&this.data[a+1]===r&&this.data[a+2]===n&&this.data[a+3]===i)return a;return-1},r.prototype.readData=function(e){if(this.checkOffset(e),0===e)return new Uint8Array(0);var t=this.data.subarray(this.index,this.index+e);return this.index+=e,t},t.exports=r},{"./dataReader":5}],19:[function(e,t){"use strict";var r=e("./utils"),n=function(e){this.data=new Uint8Array(e),this.index=0};n.prototype={append:function(e){0!==e.length&&(e=r.transformTo("uint8array",e),this.data.set(e,this.index),this.index+=e.length)},finalize:function(){return this.data}},t.exports=n},{"./utils":21}],20:[function(e,t,r){"use strict";for(var n=e("./utils"),i=e("./support"),a=e("./nodeBuffer"),o=new Array(256),s=0;256>s;s++)o[s]=s>=252?6:s>=248?5:s>=240?4:s>=224?3:s>=192?2:1;o[254]=o[254]=1;var l=function(e){var t,r,n,a,o,s=e.length,l=0;for(a=0;s>a;a++)55296==(64512&(r=e.charCodeAt(a)))&&s>a+1&&56320==(64512&(n=e.charCodeAt(a+1)))&&(r=65536+(r-55296<<10)+(n-56320),a++),l+=128>r?1:2048>r?2:65536>r?3:4;for(t=i.uint8array?new Uint8Array(l):new Array(l),o=0,a=0;l>o;a++)55296==(64512&(r=e.charCodeAt(a)))&&s>a+1&&56320==(64512&(n=e.charCodeAt(a+1)))&&(r=65536+(r-55296<<10)+(n-56320),a++),128>r?t[o++]=r:2048>r?(t[o++]=192|r>>>6,t[o++]=128|63&r):65536>r?(t[o++]=224|r>>>12,t[o++]=128|r>>>6&63,t[o++]=128|63&r):(t[o++]=240|r>>>18,t[o++]=128|r>>>12&63,t[o++]=128|r>>>6&63,t[o++]=128|63&r);return t},u=function(e,t){var r;for((t=t||e.length)>e.length&&(t=e.length),r=t-1;r>=0&&128==(192&e[r]);)r--;return 0>r||0===r?t:r+o[e[r]]>t?r:t},c=function(e){var t,r,i,a,s=e.length,l=new Array(2*s);for(r=0,t=0;s>t;)if(128>(i=e[t++]))l[r++]=i;else if((a=o[i])>4)l[r++]=65533,t+=a-1;else{for(i&=2===a?31:3===a?15:7;a>1&&s>t;)i=i<<6|63&e[t++],a--;a>1?l[r++]=65533:65536>i?l[r++]=i:(i-=65536,l[r++]=55296|i>>10&1023,l[r++]=56320|1023&i)}return l.length!==r&&(l.subarray?l=l.subarray(0,r):l.length=r),n.applyFromCharCode(l)};r.utf8encode=function(e){return i.nodebuffer?a(e,"utf-8"):l(e)},r.utf8decode=function(e){if(i.nodebuffer)return n.transformTo("nodebuffer",e).toString("utf-8");for(var t=[],r=0,a=(e=n.transformTo(i.uint8array?"uint8array":"array",e)).length,o=65536;a>r;){var s=u(e,Math.min(r+o,a));t.push(i.uint8array?c(e.subarray(r,s)):c(e.slice(r,s))),r=s}return t.join("")}},{"./nodeBuffer":11,"./support":17,"./utils":21}],21:[function(e,t,r){"use strict";function n(e){return e}function i(e,t){for(var r=0;r<e.length;++r)t[r]=255&e.charCodeAt(r);return t}function a(e){var t=65536,n=[],i=e.length,a=r.getTypeOf(e),o=0,s=!0;try{switch(a){case"uint8array":String.fromCharCode.apply(null,new Uint8Array(0));break;case"nodebuffer":String.fromCharCode.apply(null,u(0))}}catch(e){s=!1}if(!s){for(var l="",c=0;c<e.length;c++)l+=String.fromCharCode(e[c]);return l}for(;i>o&&t>1;)try{n.push("array"===a||"nodebuffer"===a?String.fromCharCode.apply(null,e.slice(o,Math.min(o+t,i))):String.fromCharCode.apply(null,e.subarray(o,Math.min(o+t,i)))),o+=t}catch(e){t=Math.floor(t/2)}return n.join("")}function o(e,t){for(var r=0;r<e.length;r++)t[r]=e[r];return t}var s=e("./support"),l=e("./compressions"),u=e("./nodeBuffer");r.string2binary=function(e){for(var t="",r=0;r<e.length;r++)t+=String.fromCharCode(255&e.charCodeAt(r));return t},r.arrayBuffer2Blob=function(e){r.checkSupport("blob");try{return new Blob([e],{type:"application/zip"})}catch(r){try{var t=new(window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder);return t.append(e),t.getBlob("application/zip")}catch(e){throw new Error("Bug : can't construct the Blob.")}}},r.applyFromCharCode=a;var c={};c.string={string:n,array:function(e){return i(e,new Array(e.length))},arraybuffer:function(e){return c.string.uint8array(e).buffer},uint8array:function(e){return i(e,new Uint8Array(e.length))},nodebuffer:function(e){return i(e,u(e.length))}},c.array={string:a,array:n,arraybuffer:function(e){return new Uint8Array(e).buffer},uint8array:function(e){return new Uint8Array(e)},nodebuffer:function(e){return u(e)}},c.arraybuffer={string:function(e){return a(new Uint8Array(e))},array:function(e){return o(new Uint8Array(e),new Array(e.byteLength))},arraybuffer:n,uint8array:function(e){return new Uint8Array(e)},nodebuffer:function(e){return u(new Uint8Array(e))}},c.uint8array={string:a,array:function(e){return o(e,new Array(e.length))},arraybuffer:function(e){return e.buffer},uint8array:n,nodebuffer:function(e){return u(e)}},c.nodebuffer={string:a,array:function(e){return o(e,new Array(e.length))},arraybuffer:function(e){return c.nodebuffer.uint8array(e).buffer},uint8array:function(e){return o(e,new Uint8Array(e.length))},nodebuffer:n},r.transformTo=function(e,t){if(t||(t=""),!e)return t;r.checkSupport(e);var n=r.getTypeOf(t);return c[n][e](t)},r.getTypeOf=function(e){return"string"==typeof e?"string":"[object Array]"===Object.prototype.toString.call(e)?"array":s.nodebuffer&&u.test(e)?"nodebuffer":s.uint8array&&e instanceof Uint8Array?"uint8array":s.arraybuffer&&e instanceof ArrayBuffer?"arraybuffer":void 0},r.checkSupport=function(e){if(!s[e.toLowerCase()])throw new Error(e+" is not supported by this browser")},r.MAX_VALUE_16BITS=65535,r.MAX_VALUE_32BITS=-1,r.pretty=function(e){var t,r,n="";for(r=0;r<(e||"").length;r++)n+="\\x"+(16>(t=e.charCodeAt(r))?"0":"")+t.toString(16).toUpperCase();return n},r.findCompression=function(e){for(var t in l)if(l.hasOwnProperty(t)&&l[t].magic===e)return l[t];return null},r.isRegExp=function(e){return"[object RegExp]"===Object.prototype.toString.call(e)}},{"./compressions":3,"./nodeBuffer":11,"./support":17}],22:[function(e,t){"use strict";function r(e,t){this.files=[],this.loadOptions=t,e&&this.load(e)}var n=e("./stringReader"),i=e("./nodeBufferReader"),a=e("./uint8ArrayReader"),o=e("./utils"),s=e("./signature"),l=e("./zipEntry"),u=e("./support"),c=e("./object");r.prototype={checkSignature:function(e){var t=this.reader.readString(4);if(t!==e)throw new Error("Corrupted zip or bug : unexpected signature ("+o.pretty(t)+", expected "+o.pretty(e)+")")},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2),this.zipComment=this.reader.readString(this.zipCommentLength),this.zipComment=c.utf8decode(this.zipComment)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.versionMadeBy=this.reader.readString(2),this.versionNeeded=this.reader.readInt(2),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var e,t,r,n=this.zip64EndOfCentralSize-44,i=0;n>i;)e=this.reader.readInt(2),t=this.reader.readInt(4),r=this.reader.readString(t),this.zip64ExtensibleData[e]={id:e,length:t,value:r}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),this.disksCount>1)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var e,t;for(e=0;e<this.files.length;e++)t=this.files[e],this.reader.setIndex(t.localHeaderOffset),this.checkSignature(s.LOCAL_FILE_HEADER),t.readLocalPart(this.reader),t.handleUTF8()},readCentralDir:function(){var e;for(this.reader.setIndex(this.centralDirOffset);this.reader.readString(4)===s.CENTRAL_FILE_HEADER;)(e=new l({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(e)},readEndOfCentral:function(){var e=this.reader.lastIndexOfSignature(s.CENTRAL_DIRECTORY_END);if(-1===e)throw new Error("Corrupted zip : can't find end of central directory");if(this.reader.setIndex(e),this.checkSignature(s.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===o.MAX_VALUE_16BITS||this.diskWithCentralDirStart===o.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===o.MAX_VALUE_16BITS||this.centralDirRecords===o.MAX_VALUE_16BITS||this.centralDirSize===o.MAX_VALUE_32BITS||this.centralDirOffset===o.MAX_VALUE_32BITS){if(this.zip64=!0,-1===(e=this.reader.lastIndexOfSignature(s.ZIP64_CENTRAL_DIRECTORY_LOCATOR)))throw new Error("Corrupted zip : can't find the ZIP64 end of central directory locator");this.reader.setIndex(e),this.checkSignature(s.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(s.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}},prepareReader:function(e){var t=o.getTypeOf(e);this.reader="string"!==t||u.uint8array?"nodebuffer"===t?new i(e):new a(o.transformTo("uint8array",e)):new n(e,this.loadOptions.optimizedBinaryString)},load:function(e){this.prepareReader(e),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},t.exports=r},{"./nodeBufferReader":12,"./object":13,"./signature":14,"./stringReader":15,"./support":17,"./uint8ArrayReader":18,"./utils":21,"./zipEntry":23}],23:[function(e,t){"use strict";function r(e,t){this.options=e,this.loadOptions=t}var n=e("./stringReader"),i=e("./utils"),a=e("./compressedObject"),o=e("./object");r.prototype={isEncrypted:function(){return 1==(1&this.bitFlag)},useUTF8:function(){return 2048==(2048&this.bitFlag)},prepareCompressedContent:function(e,t,r){return function(){var n=e.index;e.setIndex(t);var i=e.readData(r);return e.setIndex(n),i}},prepareContent:function(e,t,r,n,a){return function(){var e=i.transformTo(n.uncompressInputType,this.getCompressedContent()),t=n.uncompress(e);if(t.length!==a)throw new Error("Bug : uncompressed data size mismatch");return t}},readLocalPart:function(e){var t,r;if(e.skip(22),this.fileNameLength=e.readInt(2),r=e.readInt(2),this.fileName=e.readString(this.fileNameLength),e.skip(r),-1==this.compressedSize||-1==this.uncompressedSize)throw new Error("Bug or corrupted zip : didn't get enough informations from the central directory (compressedSize == -1 || uncompressedSize == -1)");if(null===(t=i.findCompression(this.compressionMethod)))throw new Error("Corrupted zip : compression "+i.pretty(this.compressionMethod)+" unknown (inner file : "+this.fileName+")");if(this.decompressed=new a,this.decompressed.compressedSize=this.compressedSize,this.decompressed.uncompressedSize=this.uncompressedSize,this.decompressed.crc32=this.crc32,this.decompressed.compressionMethod=this.compressionMethod,this.decompressed.getCompressedContent=this.prepareCompressedContent(e,e.index,this.compressedSize,t),this.decompressed.getContent=this.prepareContent(e,e.index,this.compressedSize,t,this.uncompressedSize),this.loadOptions.checkCRC32&&(this.decompressed=i.transformTo("string",this.decompressed.getContent()),o.crc32(this.decompressed)!==this.crc32))throw new Error("Corrupted zip : CRC32 mismatch")},readCentralPart:function(e){if(this.versionMadeBy=e.readString(2),this.versionNeeded=e.readInt(2),this.bitFlag=e.readInt(2),this.compressionMethod=e.readString(2),this.date=e.readDate(),this.crc32=e.readInt(4),this.compressedSize=e.readInt(4),this.uncompressedSize=e.readInt(4),this.fileNameLength=e.readInt(2),this.extraFieldsLength=e.readInt(2),this.fileCommentLength=e.readInt(2),this.diskNumberStart=e.readInt(2),this.internalFileAttributes=e.readInt(2),this.externalFileAttributes=e.readInt(4),this.localHeaderOffset=e.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");this.fileName=e.readString(this.fileNameLength),this.readExtraFields(e),this.parseZIP64ExtraField(e),this.fileComment=e.readString(this.fileCommentLength),this.dir=!!(16&this.externalFileAttributes)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var e=new n(this.extraFields[1].value);this.uncompressedSize===i.MAX_VALUE_32BITS&&(this.uncompressedSize=e.readInt(8)),this.compressedSize===i.MAX_VALUE_32BITS&&(this.compressedSize=e.readInt(8)),this.localHeaderOffset===i.MAX_VALUE_32BITS&&(this.localHeaderOffset=e.readInt(8)),this.diskNumberStart===i.MAX_VALUE_32BITS&&(this.diskNumberStart=e.readInt(4))}},readExtraFields:function(e){var t,r,n,i=e.index;for(this.extraFields=this.extraFields||{};e.index<i+this.extraFieldsLength;)t=e.readInt(2),r=e.readInt(2),n=e.readString(r),this.extraFields[t]={id:t,length:r,value:n}},handleUTF8:function(){if(this.useUTF8())this.fileName=o.utf8decode(this.fileName),this.fileComment=o.utf8decode(this.fileComment);else{var e=this.findExtraFieldUnicodePath();null!==e&&(this.fileName=e);var t=this.findExtraFieldUnicodeComment();null!==t&&(this.fileComment=t)}},findExtraFieldUnicodePath:function(){var e=this.extraFields[28789];if(e){var t=new n(e.value);return 1!==t.readInt(1)||o.crc32(this.fileName)!==t.readInt(4)?null:o.utf8decode(t.readString(e.length-5))}return null},findExtraFieldUnicodeComment:function(){var e=this.extraFields[25461];if(e){var t=new n(e.value);return 1!==t.readInt(1)||o.crc32(this.fileComment)!==t.readInt(4)?null:o.utf8decode(t.readString(e.length-5))}return null}},t.exports=r},{"./compressedObject":2,"./object":13,"./stringReader":15,"./utils":21}],24:[function(e,t){"use strict";var r={};(0,e("./lib/utils/common").assign)(r,e("./lib/deflate"),e("./lib/inflate"),e("./lib/zlib/constants")),t.exports=r},{"./lib/deflate":25,"./lib/inflate":26,"./lib/utils/common":27,"./lib/zlib/constants":30}],25:[function(e,t,r){"use strict";function n(e,t){var r=new y(t);if(r.push(e,!0),r.err)throw r.msg;return r.result}function i(e,t){return(t=t||{}).raw=!0,n(e,t)}function a(e,t){return(t=t||{}).gzip=!0,n(e,t)}var o=e("./zlib/deflate.js"),s=e("./utils/common"),l=e("./utils/strings"),u=e("./zlib/messages"),c=e("./zlib/zstream"),h=0,d=4,f=0,p=1,m=-1,g=0,v=8,y=function(e){this.options=s.assign({level:m,method:v,chunkSize:16384,windowBits:15,memLevel:8,strategy:g,to:""},e||{});var t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new c,this.strm.avail_out=0;var r=o.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(r!==f)throw new Error(u[r]);t.header&&o.deflateSetHeader(this.strm,t.header)};y.prototype.push=function(e,t){var r,n,i=this.strm,a=this.options.chunkSize;if(this.ended)return!1;n=t===~~t?t:!0===t?d:h,i.input="string"==typeof e?l.string2buf(e):e,i.next_in=0,i.avail_in=i.input.length;do{if(0===i.avail_out&&(i.output=new s.Buf8(a),i.next_out=0,i.avail_out=a),(r=o.deflate(i,n))!==p&&r!==f)return this.onEnd(r),this.ended=!0,!1;(0===i.avail_out||0===i.avail_in&&n===d)&&this.onData("string"===this.options.to?l.buf2binstring(s.shrinkBuf(i.output,i.next_out)):s.shrinkBuf(i.output,i.next_out))}while((i.avail_in>0||0===i.avail_out)&&r!==p);return n!==d||(r=o.deflateEnd(this.strm),this.onEnd(r),this.ended=!0,r===f)},y.prototype.onData=function(e){this.chunks.push(e)},y.prototype.onEnd=function(e){e===f&&(this.result="string"===this.options.to?this.chunks.join(""):s.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},r.Deflate=y,r.deflate=n,r.deflateRaw=i,r.gzip=a},{"./utils/common":27,"./utils/strings":28,"./zlib/deflate.js":32,"./zlib/messages":37,"./zlib/zstream":39}],26:[function(e,t,r){"use strict";function n(e,t){var r=new d(t);if(r.push(e,!0),r.err)throw r.msg;return r.result}function i(e,t){return(t=t||{}).raw=!0,n(e,t)}var a=e("./zlib/inflate.js"),o=e("./utils/common"),s=e("./utils/strings"),l=e("./zlib/constants"),u=e("./zlib/messages"),c=e("./zlib/zstream"),h=e("./zlib/gzheader"),d=function(e){this.options=o.assign({chunkSize:16384,windowBits:0,to:""},e||{});var t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(t.windowBits>=0&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&0==(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new c,this.strm.avail_out=0;var r=a.inflateInit2(this.strm,t.windowBits);if(r!==l.Z_OK)throw new Error(u[r]);this.header=new h,a.inflateGetHeader(this.strm,this.header)};d.prototype.push=function(e,t){var r,n,i,u,c,h=this.strm,d=this.options.chunkSize;if(this.ended)return!1;n=t===~~t?t:!0===t?l.Z_FINISH:l.Z_NO_FLUSH,h.input="string"==typeof e?s.binstring2buf(e):e,h.next_in=0,h.avail_in=h.input.length;do{if(0===h.avail_out&&(h.output=new o.Buf8(d),h.next_out=0,h.avail_out=d),(r=a.inflate(h,l.Z_NO_FLUSH))!==l.Z_STREAM_END&&r!==l.Z_OK)return this.onEnd(r),this.ended=!0,!1;h.next_out&&(0===h.avail_out||r===l.Z_STREAM_END||0===h.avail_in&&n===l.Z_FINISH)&&("string"===this.options.to?(i=s.utf8border(h.output,h.next_out),u=h.next_out-i,c=s.buf2string(h.output,i),h.next_out=u,h.avail_out=d-u,u&&o.arraySet(h.output,h.output,i,u,0),this.onData(c)):this.onData(o.shrinkBuf(h.output,h.next_out)))}while(h.avail_in>0&&r!==l.Z_STREAM_END);return r===l.Z_STREAM_END&&(n=l.Z_FINISH),n!==l.Z_FINISH||(r=a.inflateEnd(this.strm),this.onEnd(r),this.ended=!0,r===l.Z_OK)},d.prototype.onData=function(e){this.chunks.push(e)},d.prototype.onEnd=function(e){e===l.Z_OK&&(this.result="string"===this.options.to?this.chunks.join(""):o.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},r.Inflate=d,r.inflate=n,r.inflateRaw=i,r.ungzip=n},{"./utils/common":27,"./utils/strings":28,"./zlib/constants":30,"./zlib/gzheader":33,"./zlib/inflate.js":35,"./zlib/messages":37,"./zlib/zstream":39}],27:[function(e,t,r){"use strict";var n="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;r.assign=function(e){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var r=t.shift();if(r){if("object"!=typeof r)throw new TypeError(r+"must be non-object");for(var n in r)r.hasOwnProperty(n)&&(e[n]=r[n])}}return e},r.shrinkBuf=function(e,t){return e.length===t?e:e.subarray?e.subarray(0,t):(e.length=t,e)};var i={arraySet:function(e,t,r,n,i){if(t.subarray&&e.subarray)e.set(t.subarray(r,r+n),i);else for(var a=0;n>a;a++)e[i+a]=t[r+a]},flattenChunks:function(e){var t,r,n,i,a,o;for(n=0,t=0,r=e.length;r>t;t++)n+=e[t].length;for(o=new Uint8Array(n),i=0,t=0,r=e.length;r>t;t++)a=e[t],o.set(a,i),i+=a.length;return o}},a={arraySet:function(e,t,r,n,i){for(var a=0;n>a;a++)e[i+a]=t[r+a]},flattenChunks:function(e){return[].concat.apply([],e)}};r.setTyped=function(e){e?(r.Buf8=Uint8Array,r.Buf16=Uint16Array,r.Buf32=Int32Array,r.assign(r,i)):(r.Buf8=Array,r.Buf16=Array,r.Buf32=Array,r.assign(r,a))},r.setTyped(n)},{}],28:[function(e,t,r){"use strict";function n(e,t){if(65537>t&&(e.subarray&&o||!e.subarray&&a))return String.fromCharCode.apply(null,i.shrinkBuf(e,t));for(var r="",n=0;t>n;n++)r+=String.fromCharCode(e[n]);return r}var i=e("./common"),a=!0,o=!0;try{String.fromCharCode.apply(null,[0])}catch(e){a=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){o=!1}for(var s=new i.Buf8(256),l=0;256>l;l++)s[l]=l>=252?6:l>=248?5:l>=240?4:l>=224?3:l>=192?2:1;s[254]=s[254]=1,r.string2buf=function(e){var t,r,n,a,o,s=e.length,l=0;for(a=0;s>a;a++)55296==(64512&(r=e.charCodeAt(a)))&&s>a+1&&56320==(64512&(n=e.charCodeAt(a+1)))&&(r=65536+(r-55296<<10)+(n-56320),a++),l+=128>r?1:2048>r?2:65536>r?3:4;for(t=new i.Buf8(l),o=0,a=0;l>o;a++)55296==(64512&(r=e.charCodeAt(a)))&&s>a+1&&56320==(64512&(n=e.charCodeAt(a+1)))&&(r=65536+(r-55296<<10)+(n-56320),a++),128>r?t[o++]=r:2048>r?(t[o++]=192|r>>>6,t[o++]=128|63&r):65536>r?(t[o++]=224|r>>>12,t[o++]=128|r>>>6&63,t[o++]=128|63&r):(t[o++]=240|r>>>18,t[o++]=128|r>>>12&63,t[o++]=128|r>>>6&63,t[o++]=128|63&r);return t},r.buf2binstring=function(e){return n(e,e.length)},r.binstring2buf=function(e){for(var t=new i.Buf8(e.length),r=0,n=t.length;n>r;r++)t[r]=e.charCodeAt(r);return t},r.buf2string=function(e,t){var r,i,a,o,l=t||e.length,u=new Array(2*l);for(i=0,r=0;l>r;)if(128>(a=e[r++]))u[i++]=a;else if((o=s[a])>4)u[i++]=65533,r+=o-1;else{for(a&=2===o?31:3===o?15:7;o>1&&l>r;)a=a<<6|63&e[r++],o--;o>1?u[i++]=65533:65536>a?u[i++]=a:(a-=65536,u[i++]=55296|a>>10&1023,u[i++]=56320|1023&a)}return n(u,i)},r.utf8border=function(e,t){var r;for((t=t||e.length)>e.length&&(t=e.length),r=t-1;r>=0&&128==(192&e[r]);)r--;return 0>r||0===r?t:r+s[e[r]]>t?r:t}},{"./common":27}],29:[function(e,t){"use strict";function r(e,t,r,n){for(var i=65535&e|0,a=e>>>16&65535|0,o=0;0!==r;){r-=o=r>2e3?2e3:r;do{a=a+(i=i+t[n++]|0)|0}while(--o);i%=65521,a%=65521}return i|a<<16|0}t.exports=r},{}],30:[function(e,t){t.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],31:[function(e,t){"use strict";function r(){for(var e,t=[],r=0;256>r;r++){e=r;for(var n=0;8>n;n++)e=1&e?3988292384^e>>>1:e>>>1;t[r]=e}return t}function n(e,t,r,n){var a=i,o=n+r;e^=-1;for(var s=n;o>s;s++)e=e>>>8^a[255&(e^t[s])];return-1^e}var i=r();t.exports=n},{}],32:[function(e,t,r){"use strict";function n(e,t){return e.msg=I[t],t}function i(e){return(e<<1)-(e>4?9:0)}function a(e){for(var t=e.length;--t>=0;)e[t]=0}function o(e){var t=e.state,r=t.pending;r>e.avail_out&&(r=e.avail_out),0!==r&&(A.arraySet(e.output,t.pending_buf,t.pending_out,r,e.next_out),e.next_out+=r,t.pending_out+=r,e.total_out+=r,e.avail_out-=r,t.pending-=r,0===t.pending&&(t.pending_out=0))}function s(e,t){C._tr_flush_block(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,o(e.strm)}function l(e,t){e.pending_buf[e.pending++]=t}function u(e,t){e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t}function c(e,t,r,n){var i=e.avail_in;return i>n&&(i=n),0===i?0:(e.avail_in-=i,A.arraySet(t,e.input,e.next_in,i,r),1===e.state.wrap?e.adler=L(e.adler,t,i,r):2===e.state.wrap&&(e.adler=O(e.adler,t,i,r)),e.next_in+=i,e.total_in+=i,i)}function h(e,t){var r,n,i=e.max_chain_length,a=e.strstart,o=e.prev_length,s=e.nice_match,l=e.strstart>e.w_size-se?e.strstart-(e.w_size-se):0,u=e.window,c=e.w_mask,h=e.prev,d=e.strstart+oe,f=u[a+o-1],p=u[a+o];e.prev_length>=e.good_match&&(i>>=2),s>e.lookahead&&(s=e.lookahead);do{if(u[(r=t)+o]===p&&u[r+o-1]===f&&u[r]===u[a]&&u[++r]===u[a+1]){a+=2,r++;do{}while(u[++a]===u[++r]&&u[++a]===u[++r]&&u[++a]===u[++r]&&u[++a]===u[++r]&&u[++a]===u[++r]&&u[++a]===u[++r]&&u[++a]===u[++r]&&u[++a]===u[++r]&&d>a);if(n=oe-(d-a),a=d-oe,n>o){if(e.match_start=t,o=n,n>=s)break;f=u[a+o-1],p=u[a+o]}}}while((t=h[t&c])>l&&0!=--i);return o<=e.lookahead?o:e.lookahead}function d(e){var t,r,n,i,a,o=e.w_size;do{if(i=e.window_size-e.lookahead-e.strstart,e.strstart>=o+(o-se)){A.arraySet(e.window,e.window,o,o,0),e.match_start-=o,e.strstart-=o,e.block_start-=o,t=r=e.hash_size;do{n=e.head[--t],e.head[t]=n>=o?n-o:0}while(--r);t=r=o;do{n=e.prev[--t],e.prev[t]=n>=o?n-o:0}while(--r);i+=o}if(0===e.strm.avail_in)break;if(r=c(e.strm,e.window,e.strstart+e.lookahead,i),e.lookahead+=r,e.lookahead+e.insert>=ae)for(a=e.strstart-e.insert,e.ins_h=e.window[a],e.ins_h=(e.ins_h<<e.hash_shift^e.window[a+1])&e.hash_mask;e.insert&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[a+ae-1])&e.hash_mask,e.prev[a&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=a,a++,e.insert--,!(e.lookahead+e.insert<ae)););}while(e.lookahead<se&&0!==e.strm.avail_in)}function f(e,t){var r=65535;for(r>e.pending_buf_size-5&&(r=e.pending_buf_size-5);;){if(e.lookahead<=1){if(d(e),0===e.lookahead&&t===P)return ge;if(0===e.lookahead)break}e.strstart+=e.lookahead,e.lookahead=0;var n=e.block_start+r;if((0===e.strstart||e.strstart>=n)&&(e.lookahead=e.strstart-n,e.strstart=n,s(e,!1),0===e.strm.avail_out))return ge;if(e.strstart-e.block_start>=e.w_size-se&&(s(e,!1),0===e.strm.avail_out))return ge}return e.insert=0,t===N?(s(e,!0),0===e.strm.avail_out?ye:be):(e.strstart>e.block_start&&(s(e,!1),e.strm.avail_out),ge)}function p(e,t){for(var r,n;;){if(e.lookahead<se){if(d(e),e.lookahead<se&&t===P)return ge;if(0===e.lookahead)break}if(r=0,e.lookahead>=ae&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+ae-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==r&&e.strstart-r<=e.w_size-se&&(e.match_length=h(e,r)),e.match_length>=ae)if(n=C._tr_tally(e,e.strstart-e.match_start,e.match_length-ae),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=ae){e.match_length--;do{e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+ae-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart}while(0!=--e.match_length);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask;else n=C._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(n&&(s(e,!1),0===e.strm.avail_out))return ge}return e.insert=e.strstart<ae-1?e.strstart:ae-1,t===N?(s(e,!0),0===e.strm.avail_out?ye:be):e.last_lit&&(s(e,!1),0===e.strm.avail_out)?ge:ve}function m(e,t){for(var r,n,i;;){if(e.lookahead<se){if(d(e),e.lookahead<se&&t===P)return ge;if(0===e.lookahead)break}if(r=0,e.lookahead>=ae&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+ae-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=ae-1,0!==r&&e.prev_length<e.max_lazy_match&&e.strstart-r<=e.w_size-se&&(e.match_length=h(e,r),e.match_length<=5&&(e.strategy===G||e.match_length===ae&&e.strstart-e.match_start>4096)&&(e.match_length=ae-1)),e.prev_length>=ae&&e.match_length<=e.prev_length){i=e.strstart+e.lookahead-ae,n=C._tr_tally(e,e.strstart-1-e.prev_match,e.prev_length-ae),e.lookahead-=e.prev_length-1,e.prev_length-=2;do{++e.strstart<=i&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+ae-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart)}while(0!=--e.prev_length);if(e.match_available=0,e.match_length=ae-1,e.strstart++,n&&(s(e,!1),0===e.strm.avail_out))return ge}else if(e.match_available){if((n=C._tr_tally(e,0,e.window[e.strstart-1]))&&s(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return ge}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(n=C._tr_tally(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<ae-1?e.strstart:ae-1,t===N?(s(e,!0),0===e.strm.avail_out?ye:be):e.last_lit&&(s(e,!1),0===e.strm.avail_out)?ge:ve}function g(e,t){for(var r,n,i,a,o=e.window;;){if(e.lookahead<=oe){if(d(e),e.lookahead<=oe&&t===P)return ge;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=ae&&e.strstart>0&&(n=o[i=e.strstart-1])===o[++i]&&n===o[++i]&&n===o[++i]){a=e.strstart+oe;do{}while(n===o[++i]&&n===o[++i]&&n===o[++i]&&n===o[++i]&&n===o[++i]&&n===o[++i]&&n===o[++i]&&n===o[++i]&&a>i);e.match_length=oe-(a-i),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=ae?(r=C._tr_tally(e,1,e.match_length-ae),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(r=C._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),r&&(s(e,!1),0===e.strm.avail_out))return ge}return e.insert=0,t===N?(s(e,!0),0===e.strm.avail_out?ye:be):e.last_lit&&(s(e,!1),0===e.strm.avail_out)?ge:ve}function v(e,t){for(var r;;){if(0===e.lookahead&&(d(e),0===e.lookahead)){if(t===P)return ge;break}if(e.match_length=0,r=C._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,r&&(s(e,!1),0===e.strm.avail_out))return ge}return e.insert=0,t===N?(s(e,!0),0===e.strm.avail_out?ye:be):e.last_lit&&(s(e,!1),0===e.strm.avail_out)?ge:ve}function y(e){e.window_size=2*e.w_size,a(e.head),e.max_lazy_match=R[e.level].max_lazy,e.good_match=R[e.level].good_length,e.nice_match=R[e.level].nice_length,e.max_chain_length=R[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=ae-1,e.match_available=0,e.ins_h=0}function b(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=K,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new A.Buf16(2*ne),this.dyn_dtree=new A.Buf16(2*(2*te+1)),this.bl_tree=new A.Buf16(2*(2*re+1)),a(this.dyn_ltree),a(this.dyn_dtree),a(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new A.Buf16(ie+1),this.heap=new A.Buf16(2*ee+1),a(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new A.Buf16(2*ee+1),a(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function E(e){var t;return e&&e.state?(e.total_in=e.total_out=0,e.data_type=Z,(t=e.state).pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?ue:pe,e.adler=2===t.wrap?0:1,t.last_flush=P,C._tr_init(t),D):n(e,B)}function x(e){var t=E(e);return t===D&&y(e.state),t}function w(e,t){return e&&e.state?2!==e.state.wrap?B:(e.state.gzhead=t,D):B}function T(e,t,r,i,a,o){if(!e)return B;var s=1;if(t===V&&(t=6),0>i?(s=0,i=-i):i>15&&(s=2,i-=16),1>a||a>Q||r!==K||8>i||i>15||0>t||t>9||0>o||o>X)return n(e,B);8===i&&(i=9);var l=new b;return e.state=l,l.strm=e,l.wrap=s,l.gzhead=null,l.w_bits=i,l.w_size=1<<l.w_bits,l.w_mask=l.w_size-1,l.hash_bits=a+7,l.hash_size=1<<l.hash_bits,l.hash_mask=l.hash_size-1,l.hash_shift=~~((l.hash_bits+ae-1)/ae),l.window=new A.Buf8(2*l.w_size),l.head=new A.Buf16(l.hash_size),l.prev=new A.Buf16(l.w_size),l.lit_bufsize=1<<a+6,l.pending_buf_size=4*l.lit_bufsize,l.pending_buf=new A.Buf8(l.pending_buf_size),l.d_buf=l.lit_bufsize>>1,l.l_buf=3*l.lit_bufsize,l.level=t,l.strategy=o,l.method=r,x(e)}function _(e,t){return T(e,t,K,J,$,Y)}function S(e,t){var r,s,c,h;if(!e||!e.state||t>U||0>t)return e?n(e,B):B;if(s=e.state,!e.output||!e.input&&0!==e.avail_in||s.status===me&&t!==N)return n(e,0===e.avail_out?j:B);if(s.strm=e,r=s.last_flush,s.last_flush=t,s.status===ue)if(2===s.wrap)e.adler=0,l(s,31),l(s,139),l(s,8),s.gzhead?(l(s,(s.gzhead.text?1:0)+(s.gzhead.hcrc?2:0)+(s.gzhead.extra?4:0)+(s.gzhead.name?8:0)+(s.gzhead.comment?16:0)),l(s,255&s.gzhead.time),l(s,s.gzhead.time>>8&255),l(s,s.gzhead.time>>16&255),l(s,s.gzhead.time>>24&255),l(s,9===s.level?2:s.strategy>=W||s.level<2?4:0),l(s,255&s.gzhead.os),s.gzhead.extra&&s.gzhead.extra.length&&(l(s,255&s.gzhead.extra.length),l(s,s.gzhead.extra.length>>8&255)),s.gzhead.hcrc&&(e.adler=O(e.adler,s.pending_buf,s.pending,0)),s.gzindex=0,s.status=ce):(l(s,0),l(s,0),l(s,0),l(s,0),l(s,0),l(s,9===s.level?2:s.strategy>=W||s.level<2?4:0),l(s,Ee),s.status=pe);else{var d=K+(s.w_bits-8<<4)<<8;d|=(s.strategy>=W||s.level<2?0:s.level<6?1:6===s.level?2:3)<<6,0!==s.strstart&&(d|=le),d+=31-d%31,s.status=pe,u(s,d),0!==s.strstart&&(u(s,e.adler>>>16),u(s,65535&e.adler)),e.adler=1}if(s.status===ce)if(s.gzhead.extra){for(c=s.pending;s.gzindex<(65535&s.gzhead.extra.length)&&(s.pending!==s.pending_buf_size||(s.gzhead.hcrc&&s.pending>c&&(e.adler=O(e.adler,s.pending_buf,s.pending-c,c)),o(e),c=s.pending,s.pending!==s.pending_buf_size));)l(s,255&s.gzhead.extra[s.gzindex]),s.gzindex++;s.gzhead.hcrc&&s.pending>c&&(e.adler=O(e.adler,s.pending_buf,s.pending-c,c)),s.gzindex===s.gzhead.extra.length&&(s.gzindex=0,s.status=he)}else s.status=he;if(s.status===he)if(s.gzhead.name){c=s.pending;do{if(s.pending===s.pending_buf_size&&(s.gzhead.hcrc&&s.pending>c&&(e.adler=O(e.adler,s.pending_buf,s.pending-c,c)),o(e),c=s.pending,s.pending===s.pending_buf_size)){h=1;break}h=s.gzindex<s.gzhead.name.length?255&s.gzhead.name.charCodeAt(s.gzindex++):0,l(s,h)}while(0!==h);s.gzhead.hcrc&&s.pending>c&&(e.adler=O(e.adler,s.pending_buf,s.pending-c,c)),0===h&&(s.gzindex=0,s.status=de)}else s.status=de;if(s.status===de)if(s.gzhead.comment){c=s.pending;do{if(s.pending===s.pending_buf_size&&(s.gzhead.hcrc&&s.pending>c&&(e.adler=O(e.adler,s.pending_buf,s.pending-c,c)),o(e),c=s.pending,s.pending===s.pending_buf_size)){h=1;break}h=s.gzindex<s.gzhead.comment.length?255&s.gzhead.comment.charCodeAt(s.gzindex++):0,l(s,h)}while(0!==h);s.gzhead.hcrc&&s.pending>c&&(e.adler=O(e.adler,s.pending_buf,s.pending-c,c)),0===h&&(s.status=fe)}else s.status=fe;if(s.status===fe&&(s.gzhead.hcrc?(s.pending+2>s.pending_buf_size&&o(e),s.pending+2<=s.pending_buf_size&&(l(s,255&e.adler),l(s,e.adler>>8&255),e.adler=0,s.status=pe)):s.status=pe),0!==s.pending){if(o(e),0===e.avail_out)return s.last_flush=-1,D}else if(0===e.avail_in&&i(t)<=i(r)&&t!==N)return n(e,j);if(s.status===me&&0!==e.avail_in)return n(e,j);if(0!==e.avail_in||0!==s.lookahead||t!==P&&s.status!==me){var f=s.strategy===W?v(s,t):s.strategy===q?g(s,t):R[s.level].func(s,t);if((f===ye||f===be)&&(s.status=me),f===ge||f===ye)return 0===e.avail_out&&(s.last_flush=-1),D;if(f===ve&&(t===H?C._tr_align(s):t!==U&&(C._tr_stored_block(s,0,0,!1),t===k&&(a(s.head),0===s.lookahead&&(s.strstart=0,s.block_start=0,s.insert=0))),o(e),0===e.avail_out))return s.last_flush=-1,D}return t!==N?D:s.wrap<=0?F:(2===s.wrap?(l(s,255&e.adler),l(s,e.adler>>8&255),l(s,e.adler>>16&255),l(s,e.adler>>24&255),l(s,255&e.total_in),l(s,e.total_in>>8&255),l(s,e.total_in>>16&255),l(s,e.total_in>>24&255)):(u(s,e.adler>>>16),u(s,65535&e.adler)),o(e),s.wrap>0&&(s.wrap=-s.wrap),0!==s.pending?D:F)}function M(e){var t;return e&&e.state?(t=e.state.status)!==ue&&t!==ce&&t!==he&&t!==de&&t!==fe&&t!==pe&&t!==me?n(e,B):(e.state=null,t===pe?n(e,z):D):B}var R,A=e("../utils/common"),C=e("./trees"),L=e("./adler32"),O=e("./crc32"),I=e("./messages"),P=0,H=1,k=3,N=4,U=5,D=0,F=1,B=-2,z=-3,j=-5,V=-1,G=1,W=2,q=3,X=4,Y=0,Z=2,K=8,Q=9,J=15,$=8,ee=286,te=30,re=19,ne=2*ee+1,ie=15,ae=3,oe=258,se=oe+ae+1,le=32,ue=42,ce=69,he=73,de=91,fe=103,pe=113,me=666,ge=1,ve=2,ye=3,be=4,Ee=3,xe=function(e,t,r,n,i){this.good_length=e,this.max_lazy=t,this.nice_length=r,this.max_chain=n,this.func=i};R=[new xe(0,0,0,0,f),new xe(4,4,8,4,p),new xe(4,5,16,8,p),new xe(4,6,32,32,p),new xe(4,4,16,16,m),new xe(8,16,32,32,m),new xe(8,16,128,128,m),new xe(8,32,128,256,m),new xe(32,128,258,1024,m),new xe(32,258,258,4096,m)],r.deflateInit=_,r.deflateInit2=T,r.deflateReset=x,r.deflateResetKeep=E,r.deflateSetHeader=w,r.deflate=S,r.deflateEnd=M,r.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":27,"./adler32":29,"./crc32":31,"./messages":37,"./trees":38}],33:[function(e,t){"use strict";function r(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}t.exports=r},{}],34:[function(e,t){"use strict";var r=30,n=12;t.exports=function(e,t){var i,a,o,s,l,u,c,h,d,f,p,m,g,v,y,b,E,x,w,T,_,S,M,R,A;i=e.state,a=e.next_in,R=e.input,o=a+(e.avail_in-5),s=e.next_out,A=e.output,l=s-(t-e.avail_out),u=s+(e.avail_out-257),c=i.dmax,h=i.wsize,d=i.whave,f=i.wnext,p=i.window,m=i.hold,g=i.bits,v=i.lencode,y=i.distcode,b=(1<<i.lenbits)-1,E=(1<<i.distbits)-1;e:do{15>g&&(m+=R[a++]<<g,g+=8,m+=R[a++]<<g,g+=8),x=v[m&b];t:for(;;){if(m>>>=w=x>>>24,g-=w,0==(w=x>>>16&255))A[s++]=65535&x;else{if(!(16&w)){if(0==(64&w)){x=v[(65535&x)+(m&(1<<w)-1)];continue t}if(32&w){i.mode=n;break e}e.msg="invalid literal/length code",i.mode=r;break e}T=65535&x,(w&=15)&&(w>g&&(m+=R[a++]<<g,g+=8),T+=m&(1<<w)-1,m>>>=w,g-=w),15>g&&(m+=R[a++]<<g,g+=8,m+=R[a++]<<g,g+=8),x=y[m&E];r:for(;;){if(m>>>=w=x>>>24,g-=w,!(16&(w=x>>>16&255))){if(0==(64&w)){x=y[(65535&x)+(m&(1<<w)-1)];continue r}e.msg="invalid distance code",i.mode=r;break e}if(_=65535&x,(w&=15)>g&&(m+=R[a++]<<g,w>(g+=8)&&(m+=R[a++]<<g,g+=8)),(_+=m&(1<<w)-1)>c){e.msg="invalid distance too far back",i.mode=r;break e}if(m>>>=w,g-=w,_>(w=s-l)){if((w=_-w)>d&&i.sane){e.msg="invalid distance too far back",i.mode=r;break e}if(S=0,M=p,0===f){if(S+=h-w,T>w){T-=w;do{A[s++]=p[S++]}while(--w);S=s-_,M=A}}else if(w>f){if(S+=h+f-w,T>(w-=f)){T-=w;do{A[s++]=p[S++]}while(--w);if(S=0,T>f){T-=w=f;do{A[s++]=p[S++]}while(--w);S=s-_,M=A}}}else if(S+=f-w,T>w){T-=w;do{A[s++]=p[S++]}while(--w);S=s-_,M=A}for(;T>2;)A[s++]=M[S++],A[s++]=M[S++],A[s++]=M[S++],T-=3;T&&(A[s++]=M[S++],T>1&&(A[s++]=M[S++]))}else{S=s-_;do{A[s++]=A[S++],A[s++]=A[S++],A[s++]=A[S++],T-=3}while(T>2);T&&(A[s++]=A[S++],T>1&&(A[s++]=A[S++]))}break}}break}}while(o>a&&u>s);a-=T=g>>3,m&=(1<<(g-=T<<3))-1,e.next_in=a,e.next_out=s,e.avail_in=o>a?o-a+5:5-(a-o),e.avail_out=u>s?u-s+257:257-(s-u),i.hold=m,i.bits=g}},{}],35:[function(e,t,r){"use strict";function n(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)}function i(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new v.Buf16(320),this.work=new v.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function a(e){var t;return e&&e.state?(t=e.state,e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=N,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new v.Buf32(fe),t.distcode=t.distdyn=new v.Buf32(pe),t.sane=1,t.back=-1,A):O}function o(e){var t;return e&&e.state?((t=e.state).wsize=0,t.whave=0,t.wnext=0,a(e)):O}function s(e,t){var r,n;return e&&e.state?(n=e.state,0>t?(r=0,t=-t):(r=1+(t>>4),48>t&&(t&=15)),t&&(8>t||t>15)?O:(null!==n.window&&n.wbits!==t&&(n.window=null),n.wrap=r,n.wbits=t,o(e))):O}function l(e,t){var r,n;return e?(n=new i,e.state=n,n.window=null,(r=s(e,t))!==A&&(e.state=null),r):O}function u(e){return l(e,me)}function c(e){if(ge){var t;for(m=new v.Buf32(512),g=new v.Buf32(32),t=0;144>t;)e.lens[t++]=8;for(;256>t;)e.lens[t++]=9;for(;280>t;)e.lens[t++]=7;for(;288>t;)e.lens[t++]=8;for(x(T,e.lens,0,288,m,0,e.work,{bits:9}),t=0;32>t;)e.lens[t++]=5;x(_,e.lens,0,32,g,0,e.work,{bits:5}),ge=!1}e.lencode=m,e.lenbits=9,e.distcode=g,e.distbits=5}function h(e,t,r,n){var i,a=e.state;return null===a.window&&(a.wsize=1<<a.wbits,a.wnext=0,a.whave=0,a.window=new v.Buf8(a.wsize)),n>=a.wsize?(v.arraySet(a.window,t,r-a.wsize,a.wsize,0),a.wnext=0,a.whave=a.wsize):((i=a.wsize-a.wnext)>n&&(i=n),v.arraySet(a.window,t,r-n,i,a.wnext),(n-=i)?(v.arraySet(a.window,t,r-n,n,0),a.wnext=n,a.whave=a.wsize):(a.wnext+=i,a.wnext===a.wsize&&(a.wnext=0),a.whave<a.wsize&&(a.whave+=i))),0}function d(e,t){var r,i,a,o,s,l,u,d,f,p,m,g,fe,pe,me,ge,ve,ye,be,Ee,xe,we,Te,_e,Se=0,Me=new v.Buf8(4),Re=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return O;(r=e.state).mode===X&&(r.mode=Y),s=e.next_out,a=e.output,u=e.avail_out,o=e.next_in,i=e.input,l=e.avail_in,d=r.hold,f=r.bits,p=l,m=u,we=A;e:for(;;)switch(r.mode){case N:if(0===r.wrap){r.mode=Y;break}for(;16>f;){if(0===l)break e;l--,d+=i[o++]<<f,f+=8}if(2&r.wrap&&35615===d){r.check=0,Me[0]=255&d,Me[1]=d>>>8&255,r.check=b(r.check,Me,2,0),d=0,f=0,r.mode=U;break}if(r.flags=0,r.head&&(r.head.done=!1),!(1&r.wrap)||(((255&d)<<8)+(d>>8))%31){e.msg="incorrect header check",r.mode=he;break}if((15&d)!==k){e.msg="unknown compression method",r.mode=he;break}if(f-=4,xe=8+(15&(d>>>=4)),0===r.wbits)r.wbits=xe;else if(xe>r.wbits){e.msg="invalid window size",r.mode=he;break}r.dmax=1<<xe,e.adler=r.check=1,r.mode=512&d?W:X,d=0,f=0;break;case U:for(;16>f;){if(0===l)break e;l--,d+=i[o++]<<f,f+=8}if(r.flags=d,(255&r.flags)!==k){e.msg="unknown compression method",r.mode=he;break}if(57344&r.flags){e.msg="unknown header flags set",r.mode=he;break}r.head&&(r.head.text=d>>8&1),512&r.flags&&(Me[0]=255&d,Me[1]=d>>>8&255,r.check=b(r.check,Me,2,0)),d=0,f=0,r.mode=D;case D:for(;32>f;){if(0===l)break e;l--,d+=i[o++]<<f,f+=8}r.head&&(r.head.time=d),512&r.flags&&(Me[0]=255&d,Me[1]=d>>>8&255,Me[2]=d>>>16&255,Me[3]=d>>>24&255,r.check=b(r.check,Me,4,0)),d=0,f=0,r.mode=F;case F:for(;16>f;){if(0===l)break e;l--,d+=i[o++]<<f,f+=8}r.head&&(r.head.xflags=255&d,r.head.os=d>>8),512&r.flags&&(Me[0]=255&d,Me[1]=d>>>8&255,r.check=b(r.check,Me,2,0)),d=0,f=0,r.mode=B;case B:if(1024&r.flags){for(;16>f;){if(0===l)break e;l--,d+=i[o++]<<f,f+=8}r.length=d,r.head&&(r.head.extra_len=d),512&r.flags&&(Me[0]=255&d,Me[1]=d>>>8&255,r.check=b(r.check,Me,2,0)),d=0,f=0}else r.head&&(r.head.extra=null);r.mode=z;case z:if(1024&r.flags&&((g=r.length)>l&&(g=l),g&&(r.head&&(xe=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Array(r.head.extra_len)),v.arraySet(r.head.extra,i,o,g,xe)),512&r.flags&&(r.check=b(r.check,i,g,o)),l-=g,o+=g,r.length-=g),r.length))break e;r.length=0,r.mode=j;case j:if(2048&r.flags){if(0===l)break e;g=0;do{xe=i[o+g++],r.head&&xe&&r.length<65536&&(r.head.name+=String.fromCharCode(xe))}while(xe&&l>g);if(512&r.flags&&(r.check=b(r.check,i,g,o)),l-=g,o+=g,xe)break e}else r.head&&(r.head.name=null);r.length=0,r.mode=V;case V:if(4096&r.flags){if(0===l)break e;g=0;do{xe=i[o+g++],r.head&&xe&&r.length<65536&&(r.head.comment+=String.fromCharCode(xe))}while(xe&&l>g);if(512&r.flags&&(r.check=b(r.check,i,g,o)),l-=g,o+=g,xe)break e}else r.head&&(r.head.comment=null);r.mode=G;case G:if(512&r.flags){for(;16>f;){if(0===l)break e;l--,d+=i[o++]<<f,f+=8}if(d!==(65535&r.check)){e.msg="header crc mismatch",r.mode=he;break}d=0,f=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),e.adler=r.check=0,r.mode=X;break;case W:for(;32>f;){if(0===l)break e;l--,d+=i[o++]<<f,f+=8}e.adler=r.check=n(d),d=0,f=0,r.mode=q;case q:if(0===r.havedict)return e.next_out=s,e.avail_out=u,e.next_in=o,e.avail_in=l,r.hold=d,r.bits=f,L;e.adler=r.check=1,r.mode=X;case X:if(t===M||t===R)break e;case Y:if(r.last){d>>>=7&f,f-=7&f,r.mode=le;break}for(;3>f;){if(0===l)break e;l--,d+=i[o++]<<f,f+=8}switch(r.last=1&d,f-=1,3&(d>>>=1)){case 0:r.mode=Z;break;case 1:if(c(r),r.mode=te,t===R){d>>>=2,f-=2;break e}break;case 2:r.mode=J;break;case 3:e.msg="invalid block type",r.mode=he}d>>>=2,f-=2;break;case Z:for(d>>>=7&f,f-=7&f;32>f;){if(0===l)break e;l--,d+=i[o++]<<f,f+=8}if((65535&d)!=(d>>>16^65535)){e.msg="invalid stored block lengths",r.mode=he;break}if(r.length=65535&d,d=0,f=0,r.mode=K,t===R)break e;case K:r.mode=Q;case Q:if(g=r.length){if(g>l&&(g=l),g>u&&(g=u),0===g)break e;v.arraySet(a,i,o,g,s),l-=g,o+=g,u-=g,s+=g,r.length-=g;break}r.mode=X;break;case J:for(;14>f;){if(0===l)break e;l--,d+=i[o++]<<f,f+=8}if(r.nlen=257+(31&d),d>>>=5,f-=5,r.ndist=1+(31&d),d>>>=5,f-=5,r.ncode=4+(15&d),d>>>=4,f-=4,r.nlen>286||r.ndist>30){e.msg="too many length or distance symbols",r.mode=he;break}r.have=0,r.mode=$;case $:for(;r.have<r.ncode;){for(;3>f;){if(0===l)break e;l--,d+=i[o++]<<f,f+=8}r.lens[Re[r.have++]]=7&d,d>>>=3,f-=3}for(;r.have<19;)r.lens[Re[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,Te={bits:r.lenbits},we=x(w,r.lens,0,19,r.lencode,0,r.work,Te),r.lenbits=Te.bits,we){e.msg="invalid code lengths set",r.mode=he;break}r.have=0,r.mode=ee;case ee:for(;r.have<r.nlen+r.ndist;){for(;ge=(Se=r.lencode[d&(1<<r.lenbits)-1])>>>16&255,ve=65535&Se,!(f>=(me=Se>>>24));){if(0===l)break e;l--,d+=i[o++]<<f,f+=8}if(16>ve)d>>>=me,f-=me,r.lens[r.have++]=ve;else{if(16===ve){for(_e=me+2;_e>f;){if(0===l)break e;l--,d+=i[o++]<<f,f+=8}if(d>>>=me,f-=me,0===r.have){e.msg="invalid bit length repeat",r.mode=he;break}xe=r.lens[r.have-1],g=3+(3&d),d>>>=2,f-=2}else if(17===ve){for(_e=me+3;_e>f;){if(0===l)break e;l--,d+=i[o++]<<f,f+=8}f-=me,xe=0,g=3+(7&(d>>>=me)),d>>>=3,f-=3}else{for(_e=me+7;_e>f;){if(0===l)break e;l--,d+=i[o++]<<f,f+=8}f-=me,xe=0,g=11+(127&(d>>>=me)),d>>>=7,f-=7}if(r.have+g>r.nlen+r.ndist){e.msg="invalid bit length repeat",r.mode=he;break}for(;g--;)r.lens[r.have++]=xe}}if(r.mode===he)break;if(0===r.lens[256]){e.msg="invalid code -- missing end-of-block",r.mode=he;break}if(r.lenbits=9,Te={bits:r.lenbits},we=x(T,r.lens,0,r.nlen,r.lencode,0,r.work,Te),r.lenbits=Te.bits,we){e.msg="invalid literal/lengths set",r.mode=he;break}if(r.distbits=6,r.distcode=r.distdyn,Te={bits:r.distbits},we=x(_,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,Te),r.distbits=Te.bits,we){e.msg="invalid distances set",r.mode=he;break}if(r.mode=te,t===R)break e;case te:r.mode=re;case re:if(l>=6&&u>=258){e.next_out=s,e.avail_out=u,e.next_in=o,e.avail_in=l,r.hold=d,r.bits=f,E(e,m),s=e.next_out,a=e.output,u=e.avail_out,o=e.next_in,i=e.input,l=e.avail_in,d=r.hold,f=r.bits,r.mode===X&&(r.back=-1);break}for(r.back=0;ge=(Se=r.lencode[d&(1<<r.lenbits)-1])>>>16&255,ve=65535&Se,!(f>=(me=Se>>>24));){if(0===l)break e;l--,d+=i[o++]<<f,f+=8}if(ge&&0==(240&ge)){for(ye=me,be=ge,Ee=ve;ge=(Se=r.lencode[Ee+((d&(1<<ye+be)-1)>>ye)])>>>16&255,ve=65535&Se,!(f>=ye+(me=Se>>>24));){if(0===l)break e;l--,d+=i[o++]<<f,f+=8}d>>>=ye,f-=ye,r.back+=ye}if(d>>>=me,f-=me,r.back+=me,r.length=ve,0===ge){r.mode=se;break}if(32&ge){r.back=-1,r.mode=X;break}if(64&ge){e.msg="invalid literal/length code",r.mode=he;break}r.extra=15&ge,r.mode=ne;case ne:if(r.extra){for(_e=r.extra;_e>f;){if(0===l)break e;l--,d+=i[o++]<<f,f+=8}r.length+=d&(1<<r.extra)-1,d>>>=r.extra,f-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=ie;case ie:for(;ge=(Se=r.distcode[d&(1<<r.distbits)-1])>>>16&255,ve=65535&Se,!(f>=(me=Se>>>24));){if(0===l)break e;l--,d+=i[o++]<<f,f+=8}if(0==(240&ge)){for(ye=me,be=ge,Ee=ve;ge=(Se=r.distcode[Ee+((d&(1<<ye+be)-1)>>ye)])>>>16&255,ve=65535&Se,!(f>=ye+(me=Se>>>24));){if(0===l)break e;l--,d+=i[o++]<<f,f+=8}d>>>=ye,f-=ye,r.back+=ye}if(d>>>=me,f-=me,r.back+=me,64&ge){e.msg="invalid distance code",r.mode=he;break}r.offset=ve,r.extra=15&ge,r.mode=ae;case ae:if(r.extra){for(_e=r.extra;_e>f;){if(0===l)break e;l--,d+=i[o++]<<f,f+=8}r.offset+=d&(1<<r.extra)-1,d>>>=r.extra,f-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){e.msg="invalid distance too far back",r.mode=he;break}r.mode=oe;case oe:if(0===u)break e;if(g=m-u,r.offset>g){if((g=r.offset-g)>r.whave&&r.sane){e.msg="invalid distance too far back",r.mode=he;break}g>r.wnext?(g-=r.wnext,fe=r.wsize-g):fe=r.wnext-g,g>r.length&&(g=r.length),pe=r.window}else pe=a,fe=s-r.offset,g=r.length;g>u&&(g=u),u-=g,r.length-=g;do{a[s++]=pe[fe++]}while(--g);0===r.length&&(r.mode=re);break;case se:if(0===u)break e;a[s++]=r.length,u--,r.mode=re;break;case le:if(r.wrap){for(;32>f;){if(0===l)break e;l--,d|=i[o++]<<f,f+=8}if(m-=u,e.total_out+=m,r.total+=m,m&&(e.adler=r.check=r.flags?b(r.check,a,m,s-m):y(r.check,a,m,s-m)),m=u,(r.flags?d:n(d))!==r.check){e.msg="incorrect data check",r.mode=he;break}d=0,f=0}r.mode=ue;case ue:if(r.wrap&&r.flags){for(;32>f;){if(0===l)break e;l--,d+=i[o++]<<f,f+=8}if(d!==(4294967295&r.total)){e.msg="incorrect length check",r.mode=he;break}d=0,f=0}r.mode=ce;case ce:we=C;break e;case he:we=I;break e;case de:return P;default:return O}return e.next_out=s,e.avail_out=u,e.next_in=o,e.avail_in=l,r.hold=d,r.bits=f,(r.wsize||m!==e.avail_out&&r.mode<he&&(r.mode<le||t!==S))&&h(e,e.output,e.next_out,m-e.avail_out)?(r.mode=de,P):(p-=e.avail_in,m-=e.avail_out,e.total_in+=p,e.total_out+=m,r.total+=m,r.wrap&&m&&(e.adler=r.check=r.flags?b(r.check,a,m,e.next_out-m):y(r.check,a,m,e.next_out-m)),e.data_type=r.bits+(r.last?64:0)+(r.mode===X?128:0)+(r.mode===te||r.mode===K?256:0),(0===p&&0===m||t===S)&&we===A&&(we=H),we)}function f(e){if(!e||!e.state)return O;var t=e.state;return t.window&&(t.window=null),e.state=null,A}function p(e,t){var r;return e&&e.state?0==(2&(r=e.state).wrap)?O:(r.head=t,t.done=!1,A):O}var m,g,v=e("../utils/common"),y=e("./adler32"),b=e("./crc32"),E=e("./inffast"),x=e("./inftrees"),w=0,T=1,_=2,S=4,M=5,R=6,A=0,C=1,L=2,O=-2,I=-3,P=-4,H=-5,k=8,N=1,U=2,D=3,F=4,B=5,z=6,j=7,V=8,G=9,W=10,q=11,X=12,Y=13,Z=14,K=15,Q=16,J=17,$=18,ee=19,te=20,re=21,ne=22,ie=23,ae=24,oe=25,se=26,le=27,ue=28,ce=29,he=30,de=31,fe=852,pe=592,me=15,ge=!0;r.inflateReset=o,r.inflateReset2=s,r.inflateResetKeep=a,r.inflateInit=u,r.inflateInit2=l,r.inflate=d,r.inflateEnd=f,r.inflateGetHeader=p,r.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":27,"./adler32":29,"./crc32":31,"./inffast":34,"./inftrees":36}],36:[function(e,t){"use strict";var r=e("../utils/common"),n=15,i=852,a=592,o=0,s=1,l=2,u=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],c=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],h=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],d=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];t.exports=function(e,t,f,p,m,g,v,y){var b,E,x,w,T,_,S,M,R,A=y.bits,C=0,L=0,O=0,I=0,P=0,H=0,k=0,N=0,U=0,D=0,F=null,B=0,z=new r.Buf16(n+1),j=new r.Buf16(n+1),V=null,G=0;for(C=0;n>=C;C++)z[C]=0;for(L=0;p>L;L++)z[t[f+L]]++;for(P=A,I=n;I>=1&&0===z[I];I--);if(P>I&&(P=I),0===I)return m[g++]=20971520,m[g++]=20971520,y.bits=1,0;for(O=1;I>O&&0===z[O];O++);for(O>P&&(P=O),N=1,C=1;n>=C;C++)if(N<<=1,0>(N-=z[C]))return-1;if(N>0&&(e===o||1!==I))return-1;for(j[1]=0,C=1;n>C;C++)j[C+1]=j[C]+z[C];for(L=0;p>L;L++)0!==t[f+L]&&(v[j[t[f+L]]++]=L);if(e===o?(F=V=v,_=19):e===s?(F=u,B-=257,V=c,G-=257,_=256):(F=h,V=d,_=-1),D=0,L=0,C=O,T=g,H=P,k=0,x=-1,w=(U=1<<P)-1,e===s&&U>i||e===l&&U>a)return 1;for(;;){S=C-k,v[L]<_?(M=0,R=v[L]):v[L]>_?(M=V[G+v[L]],R=F[B+v[L]]):(M=96,R=0),b=1<<C-k,O=E=1<<H;do{m[T+(D>>k)+(E-=b)]=S<<24|M<<16|R|0}while(0!==E);for(b=1<<C-1;D&b;)b>>=1;if(0!==b?(D&=b-1,D+=b):D=0,L++,0==--z[C]){if(C===I)break;C=t[f+v[L]]}if(C>P&&(D&w)!==x){for(0===k&&(k=P),T+=O,N=1<<(H=C-k);I>H+k&&!(0>=(N-=z[H+k]));)H++,N<<=1;if(U+=1<<H,e===s&&U>i||e===l&&U>a)return 1;m[x=D&w]=P<<24|H<<16|T-g|0}}return 0!==D&&(m[T+D]=C-k<<24|64<<16|0),y.bits=P,0}},{"../utils/common":27}],37:[function(e,t){"use strict";t.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],38:[function(e,t,r){"use strict";function n(e){for(var t=e.length;--t>=0;)e[t]=0}function i(e){return 256>e?oe[e]:oe[256+(e>>>7)]}function a(e,t){e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255}function o(e,t,r){e.bi_valid>X-r?(e.bi_buf|=t<<e.bi_valid&65535,a(e,e.bi_buf),e.bi_buf=t>>X-e.bi_valid,e.bi_valid+=r-X):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=r)}function s(e,t,r){o(e,r[2*t],r[2*t+1])}function l(e,t){var r=0;do{r|=1&e,e>>>=1,r<<=1}while(--t>0);return r>>>1}function u(e){16===e.bi_valid?(a(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)}function c(e,t){var r,n,i,a,o,s,l=t.dyn_tree,u=t.max_code,c=t.stat_desc.static_tree,h=t.stat_desc.has_stree,d=t.stat_desc.extra_bits,f=t.stat_desc.extra_base,p=t.stat_desc.max_length,m=0;for(a=0;q>=a;a++)e.bl_count[a]=0;for(l[2*e.heap[e.heap_max]+1]=0,r=e.heap_max+1;W>r;r++)(a=l[2*l[2*(n=e.heap[r])+1]+1]+1)>p&&(a=p,m++),l[2*n+1]=a,n>u||(e.bl_count[a]++,o=0,n>=f&&(o=d[n-f]),s=l[2*n],e.opt_len+=s*(a+o),h&&(e.static_len+=s*(c[2*n+1]+o)));if(0!==m){do{for(a=p-1;0===e.bl_count[a];)a--;e.bl_count[a]--,e.bl_count[a+1]+=2,e.bl_count[p]--,m-=2}while(m>0);for(a=p;0!==a;a--)for(n=e.bl_count[a];0!==n;)(i=e.heap[--r])>u||(l[2*i+1]!==a&&(e.opt_len+=(a-l[2*i+1])*l[2*i],l[2*i+1]=a),n--)}}function h(e,t,r){var n,i,a=new Array(q+1),o=0;for(n=1;q>=n;n++)a[n]=o=o+r[n-1]<<1;for(i=0;t>=i;i++){var s=e[2*i+1];0!==s&&(e[2*i]=l(a[s]++,s))}}function d(){var e,t,r,n,i,a=new Array(q+1);for(r=0,n=0;B-1>n;n++)for(le[n]=r,e=0;e<1<<$[n];e++)se[r++]=n;for(se[r-1]=n,i=0,n=0;16>n;n++)for(ue[n]=i,e=0;e<1<<ee[n];e++)oe[i++]=n;for(i>>=7;V>n;n++)for(ue[n]=i<<7,e=0;e<1<<ee[n]-7;e++)oe[256+i++]=n;for(t=0;q>=t;t++)a[t]=0;for(e=0;143>=e;)ie[2*e+1]=8,e++,a[8]++;for(;255>=e;)ie[2*e+1]=9,e++,a[9]++;for(;279>=e;)ie[2*e+1]=7,e++,a[7]++;for(;287>=e;)ie[2*e+1]=8,e++,a[8]++;for(h(ie,j+1,a),e=0;V>e;e++)ae[2*e+1]=5,ae[2*e]=l(e,5);ce=new fe(ie,$,z+1,j,q),he=new fe(ae,ee,0,V,q),de=new fe(new Array(0),te,0,G,Y)}function f(e){var t;for(t=0;j>t;t++)e.dyn_ltree[2*t]=0;for(t=0;V>t;t++)e.dyn_dtree[2*t]=0;for(t=0;G>t;t++)e.bl_tree[2*t]=0;e.dyn_ltree[2*Z]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function p(e){e.bi_valid>8?a(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function m(e,t,r,n){p(e),n&&(a(e,r),a(e,~r)),L.arraySet(e.pending_buf,e.window,t,r,e.pending),e.pending+=r}function g(e,t,r,n){var i=2*t,a=2*r;return e[i]<e[a]||e[i]===e[a]&&n[t]<=n[r]}function v(e,t,r){for(var n=e.heap[r],i=r<<1;i<=e.heap_len&&(i<e.heap_len&&g(t,e.heap[i+1],e.heap[i],e.depth)&&i++,!g(t,n,e.heap[i],e.depth));)e.heap[r]=e.heap[i],r=i,i<<=1;e.heap[r]=n}function y(e,t,r){var n,a,l,u,c=0;if(0!==e.last_lit)do{n=e.pending_buf[e.d_buf+2*c]<<8|e.pending_buf[e.d_buf+2*c+1],a=e.pending_buf[e.l_buf+c],c++,0===n?s(e,a,t):(s(e,(l=se[a])+z+1,t),0!==(u=$[l])&&o(e,a-=le[l],u),s(e,l=i(--n),r),0!==(u=ee[l])&&o(e,n-=ue[l],u))}while(c<e.last_lit);s(e,Z,t)}function b(e,t){var r,n,i,a=t.dyn_tree,o=t.stat_desc.static_tree,s=t.stat_desc.has_stree,l=t.stat_desc.elems,u=-1;for(e.heap_len=0,e.heap_max=W,r=0;l>r;r++)0!==a[2*r]?(e.heap[++e.heap_len]=u=r,e.depth[r]=0):a[2*r+1]=0;for(;e.heap_len<2;)a[2*(i=e.heap[++e.heap_len]=2>u?++u:0)]=1,e.depth[i]=0,e.opt_len--,s&&(e.static_len-=o[2*i+1]);for(t.max_code=u,r=e.heap_len>>1;r>=1;r--)v(e,a,r);i=l;do{r=e.heap[1],e.heap[1]=e.heap[e.heap_len--],v(e,a,1),n=e.heap[1],e.heap[--e.heap_max]=r,e.heap[--e.heap_max]=n,a[2*i]=a[2*r]+a[2*n],e.depth[i]=(e.depth[r]>=e.depth[n]?e.depth[r]:e.depth[n])+1,a[2*r+1]=a[2*n+1]=i,e.heap[1]=i++,v(e,a,1)}while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],c(e,t),h(a,u,e.bl_count)}function E(e,t,r){var n,i,a=-1,o=t[1],s=0,l=7,u=4;for(0===o&&(l=138,u=3),t[2*(r+1)+1]=65535,n=0;r>=n;n++)i=o,o=t[2*(n+1)+1],++s<l&&i===o||(u>s?e.bl_tree[2*i]+=s:0!==i?(i!==a&&e.bl_tree[2*i]++,e.bl_tree[2*K]++):10>=s?e.bl_tree[2*Q]++:e.bl_tree[2*J]++,s=0,a=i,0===o?(l=138,u=3):i===o?(l=6,u=3):(l=7,u=4))}function x(e,t,r){var n,i,a=-1,l=t[1],u=0,c=7,h=4;for(0===l&&(c=138,h=3),n=0;r>=n;n++)if(i=l,l=t[2*(n+1)+1],!(++u<c&&i===l)){if(h>u)do{s(e,i,e.bl_tree)}while(0!=--u);else 0!==i?(i!==a&&(s(e,i,e.bl_tree),u--),s(e,K,e.bl_tree),o(e,u-3,2)):10>=u?(s(e,Q,e.bl_tree),o(e,u-3,3)):(s(e,J,e.bl_tree),o(e,u-11,7));u=0,a=i,0===l?(c=138,h=3):i===l?(c=6,h=3):(c=7,h=4)}}function w(e){var t;for(E(e,e.dyn_ltree,e.l_desc.max_code),E(e,e.dyn_dtree,e.d_desc.max_code),b(e,e.bl_desc),t=G-1;t>=3&&0===e.bl_tree[2*re[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t}function T(e,t,r,n){var i;for(o(e,t-257,5),o(e,r-1,5),o(e,n-4,4),i=0;n>i;i++)o(e,e.bl_tree[2*re[i]+1],3);x(e,e.dyn_ltree,t-1),x(e,e.dyn_dtree,r-1)}function _(e){var t,r=4093624447;for(t=0;31>=t;t++,r>>>=1)if(1&r&&0!==e.dyn_ltree[2*t])return I;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return P;for(t=32;z>t;t++)if(0!==e.dyn_ltree[2*t])return P;return I}function S(e){me||(d(),me=!0),e.l_desc=new pe(e.dyn_ltree,ce),e.d_desc=new pe(e.dyn_dtree,he),e.bl_desc=new pe(e.bl_tree,de),e.bi_buf=0,e.bi_valid=0,f(e)}function M(e,t,r,n){o(e,(k<<1)+(n?1:0),3),m(e,t,r,!0)}function R(e){o(e,N<<1,3),s(e,Z,ie),u(e)}function A(e,t,r,n){var i,a,s=0;e.level>0?(e.strm.data_type===H&&(e.strm.data_type=_(e)),b(e,e.l_desc),b(e,e.d_desc),s=w(e),(i=e.opt_len+3+7>>>3)>=(a=e.static_len+3+7>>>3)&&(i=a)):i=a=r+5,i>=r+4&&-1!==t?M(e,t,r,n):e.strategy===O||a===i?(o(e,(N<<1)+(n?1:0),3),y(e,ie,ae)):(o(e,(U<<1)+(n?1:0),3),T(e,e.l_desc.max_code+1,e.d_desc.max_code+1,s+1),y(e,e.dyn_ltree,e.dyn_dtree)),f(e),n&&p(e)}function C(e,t,r){return e.pending_buf[e.d_buf+2*e.last_lit]=t>>>8&255,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&t,e.pending_buf[e.l_buf+e.last_lit]=255&r,e.last_lit++,0===t?e.dyn_ltree[2*r]++:(e.matches++,t--,e.dyn_ltree[2*(se[r]+z+1)]++,e.dyn_dtree[2*i(t)]++),e.last_lit===e.lit_bufsize-1}var L=e("../utils/common"),O=4,I=0,P=1,H=2,k=0,N=1,U=2,D=3,F=258,B=29,z=256,j=z+1+B,V=30,G=19,W=2*j+1,q=15,X=16,Y=7,Z=256,K=16,Q=17,J=18,$=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],ee=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],te=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],re=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],ne=512,ie=new Array(2*(j+2));n(ie);var ae=new Array(2*V);n(ae);var oe=new Array(ne);n(oe);var se=new Array(F-D+1);n(se);var le=new Array(B);n(le);var ue=new Array(V);n(ue);var ce,he,de,fe=function(e,t,r,n,i){this.static_tree=e,this.extra_bits=t,this.extra_base=r,this.elems=n,this.max_length=i,this.has_stree=e&&e.length},pe=function(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t},me=!1;r._tr_init=S,r._tr_stored_block=M,r._tr_flush_block=A,r._tr_tally=C,r._tr_align=R},{"../utils/common":27}],39:[function(e,t){"use strict";function r(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}t.exports=r},{}]},{},[9])(9)},1984:function(e,t){!function(e){"use strict";function t(){}function r(e,r){this.dv=new DataView(e),this.offset=0,this.littleEndian=void 0===r||r,this.encoder=new t}function n(){}function i(){}t.prototype.s2u=function(e){for(var t=this.s2uTable,r="",n=0;n<e.length;){var i=e[n++];if(!(i>=0&&i<=126||i>=161&&i<=223)&&n<e.length&&(i=i<<8|e[n++]),void 0===t[i])throw"unknown char code "+i+".";r+=String.fromCharCode(t[i])}return r},t.prototype.s2uTable={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,10:10,11:11,12:12,13:13,14:14,15:15,16:16,17:17,18:18,19:19,20:20,21:21,22:22,23:23,24:24,25:25,26:26,27:27,28:28,29:29,30:30,31:31,32:32,33:33,34:34,35:35,36:36,37:37,38:38,39:39,40:40,41:41,42:42,43:43,44:44,45:45,46:46,47:47,48:48,49:49,50:50,51:51,52:52,53:53,54:54,55:55,56:56,57:57,58:58,59:59,60:60,61:61,62:62,63:63,64:64,65:65,66:66,67:67,68:68,69:69,70:70,71:71,72:72,73:73,74:74,75:75,76:76,77:77,78:78,79:79,80:80,81:81,82:82,83:83,84:84,85:85,86:86,87:87,88:88,89:89,90:90,91:91,92:92,93:93,94:94,95:95,96:96,97:97,98:98,99:99,100:100,101:101,102:102,103:103,104:104,105:105,106:106,107:107,108:108,109:109,110:110,111:111,112:112,113:113,114:114,115:115,116:116,117:117,118:118,119:119,120:120,121:121,122:122,123:123,124:124,125:125,126:126,161:65377,162:65378,163:65379,164:65380,165:65381,166:65382,167:65383,168:65384,169:65385,170:65386,171:65387,172:65388,173:65389,174:65390,175:65391,176:65392,177:65393,178:65394,179:65395,180:65396,181:65397,182:65398,183:65399,184:65400,185:65401,186:65402,187:65403,188:65404,189:65405,190:65406,191:65407,192:65408,193:65409,194:65410,195:65411,196:65412,197:65413,198:65414,199:65415,200:65416,201:65417,202:65418,203:65419,204:65420,205:65421,206:65422,207:65423,208:65424,209:65425,210:65426,211:65427,212:65428,213:65429,214:65430,215:65431,216:65432,217:65433,218:65434,219:65435,220:65436,221:65437,222:65438,223:65439,33088:12288,33089:12289,33090:12290,33091:65292,33092:65294,33093:12539,33094:65306,33095:65307,33096:65311,33097:65281,33098:12443,33099:12444,33100:180,33101:65344,33102:168,33103:65342,33104:65507,33105:65343,33106:12541,33107:12542,33108:12445,33109:12446,33110:12291,33111:20189,33112:12293,33113:12294,33114:12295,33115:12540,33116:8213,33117:8208,33118:65295,33119:65340,33120:65374,33121:8741,33122:65372,33123:8230,33124:8229,33125:8216,33126:8217,33127:8220,33128:8221,33129:65288,33130:65289,33131:12308,33132:12309,33133:65339,33134:65341,33135:65371,33136:65373,33137:12296,33138:12297,33139:12298,33140:12299,33141:12300,33142:12301,33143:12302,33144:12303,33145:12304,33146:12305,33147:65291,33148:65293,33149:177,33150:215,33152:247,33153:65309,33154:8800,33155:65308,33156:65310,33157:8806,33158:8807,33159:8734,33160:8756,33161:9794,33162:9792,33163:176,33164:8242,33165:8243,33166:8451,33167:65509,33168:65284,33169:65504,33170:65505,33171:65285,33172:65283,33173:65286,33174:65290,33175:65312,33176:167,33177:9734,33178:9733,33179:9675,33180:9679,33181:9678,33182:9671,33183:9670,33184:9633,33185:9632,33186:9651,33187:9650,33188:9661,33189:9660,33190:8251,33191:12306,33192:8594,33193:8592,33194:8593,33195:8595,33196:12307,33208:8712,33209:8715,33210:8838,33211:8839,33212:8834,33213:8835,33214:8746,33215:8745,33224:8743,33225:8744,33226:65506,33227:8658,33228:8660,33229:8704,33230:8707,33242:8736,33243:8869,33244:8978,33245:8706,33246:8711,33247:8801,33248:8786,33249:8810,33250:8811,33251:8730,33252:8765,33253:8733,33254:8757,33255:8747,33256:8748,33264:8491,33265:8240,33266:9839,33267:9837,33268:9834,33269:8224,33270:8225,33271:182,33276:9711,33359:65296,33360:65297,33361:65298,33362:65299,33363:65300,33364:65301,33365:65302,33366:65303,33367:65304,33368:65305,33376:65313,33377:65314,33378:65315,33379:65316,33380:65317,33381:65318,33382:65319,33383:65320,33384:65321,33385:65322,33386:65323,33387:65324,33388:65325,33389:65326,33390:65327,33391:65328,33392:65329,33393:65330,33394:65331,33395:65332,33396:65333,33397:65334,33398:65335,33399:65336,33400:65337,33401:65338,33409:65345,33410:65346,33411:65347,33412:65348,33413:65349,33414:65350,33415:65351,33416:65352,33417:65353,33418:65354,33419:65355,33420:65356,33421:65357,33422:65358,33423:65359,33424:65360,33425:65361,33426:65362,33427:65363,33428:65364,33429:65365,33430:65366,33431:65367,33432:65368,33433:65369,33434:65370,33439:12353,33440:12354,33441:12355,33442:12356,33443:12357,33444:12358,33445:12359,33446:12360,33447:12361,33448:12362,33449:12363,33450:12364,33451:12365,33452:12366,33453:12367,33454:12368,33455:12369,33456:12370,33457:12371,33458:12372,33459:12373,33460:12374,33461:12375,33462:12376,33463:12377,33464:12378,33465:12379,33466:12380,33467:12381,33468:12382,33469:12383,33470:12384,33471:12385,33472:12386,33473:12387,33474:12388,33475:12389,33476:12390,33477:12391,33478:12392,33479:12393,33480:12394,33481:12395,33482:12396,33483:12397,33484:12398,33485:12399,33486:12400,33487:12401,33488:12402,33489:12403,33490:12404,33491:12405,33492:12406,33493:12407,33494:12408,33495:12409,33496:12410,33497:12411,33498:12412,33499:12413,33500:12414,33501:12415,33502:12416,33503:12417,33504:12418,33505:12419,33506:12420,33507:12421,33508:12422,33509:12423,33510:12424,33511:12425,33512:12426,33513:12427,33514:12428,33515:12429,33516:12430,33517:12431,33518:12432,33519:12433,33520:12434,33521:12435,33600:12449,33601:12450,33602:12451,33603:12452,33604:12453,33605:12454,33606:12455,33607:12456,33608:12457,33609:12458,33610:12459,33611:12460,33612:12461,33613:12462,33614:12463,33615:12464,33616:12465,33617:12466,33618:12467,33619:12468,33620:12469,33621:12470,33622:12471,33623:12472,33624:12473,33625:12474,33626:12475,33627:12476,33628:12477,33629:12478,33630:12479,33631:12480,33632:12481,33633:12482,33634:12483,33635:12484,33636:12485,33637:12486,33638:12487,33639:12488,33640:12489,33641:12490,33642:12491,33643:12492,33644:12493,33645:12494,33646:12495,33647:12496,33648:12497,33649:12498,33650:12499,33651:12500,33652:12501,33653:12502,33654:12503,33655:12504,33656:12505,33657:12506,33658:12507,33659:12508,33660:12509,33661:12510,33662:12511,33664:12512,33665:12513,33666:12514,33667:12515,33668:12516,33669:12517,33670:12518,33671:12519,33672:12520,33673:12521,33674:12522,33675:12523,33676:12524,33677:12525,33678:12526,33679:12527,33680:12528,33681:12529,33682:12530,33683:12531,33684:12532,33685:12533,33686:12534,33695:913,33696:914,33697:915,33698:916,33699:917,33700:918,33701:919,33702:920,33703:921,33704:922,33705:923,33706:924,33707:925,33708:926,33709:927,33710:928,33711:929,33712:931,33713:932,33714:933,33715:934,33716:935,33717:936,33718:937,33727:945,33728:946,33729:947,33730:948,33731:949,33732:950,33733:951,33734:952,33735:953,33736:954,33737:955,33738:956,33739:957,33740:958,33741:959,33742:960,33743:961,33744:963,33745:964,33746:965,33747:966,33748:967,33749:968,33750:969,33856:1040,33857:1041,33858:1042,33859:1043,33860:1044,33861:1045,33862:1025,33863:1046,33864:1047,33865:1048,33866:1049,33867:1050,33868:1051,33869:1052,33870:1053,33871:1054,33872:1055,33873:1056,33874:1057,33875:1058,33876:1059,33877:1060,33878:1061,33879:1062,33880:1063,33881:1064,33882:1065,33883:1066,33884:1067,33885:1068,33886:1069,33887:1070,33888:1071,33904:1072,33905:1073,33906:1074,33907:1075,33908:1076,33909:1077,33910:1105,33911:1078,33912:1079,33913:1080,33914:1081,33915:1082,33916:1083,33917:1084,33918:1085,33920:1086,33921:1087,33922:1088,33923:1089,33924:1090,33925:1091,33926:1092,33927:1093,33928:1094,33929:1095,33930:1096,33931:1097,33932:1098,33933:1099,33934:1100,33935:1101,33936:1102,33937:1103,33951:9472,33952:9474,33953:9484,33954:9488,33955:9496,33956:9492,33957:9500,33958:9516,33959:9508,33960:9524,33961:9532,33962:9473,33963:9475,33964:9487,33965:9491,33966:9499,33967:9495,33968:9507,33969:9523,33970:9515,33971:9531,33972:9547,33973:9504,33974:9519,33975:9512,33976:9527,33977:9535,33978:9501,33979:9520,33980:9509,33981:9528,33982:9538,34624:9312,34625:9313,34626:9314,34627:9315,34628:9316,34629:9317,34630:9318,34631:9319,34632:9320,34633:9321,34634:9322,34635:9323,34636:9324,34637:9325,34638:9326,34639:9327,34640:9328,34641:9329,34642:9330,34643:9331,34644:8544,34645:8545,34646:8546,34647:8547,34648:8548,34649:8549,34650:8550,34651:8551,34652:8552,34653:8553,34655:13129,34656:13076,34657:13090,34658:13133,34659:13080,34660:13095,34661:13059,34662:13110,34663:13137,34664:13143,34665:13069,34666:13094,34667:13091,34668:13099,34669:13130,34670:13115,34671:13212,34672:13213,34673:13214,34674:13198,34675:13199,34676:13252,34677:13217,34686:13179,34688:12317,34689:12319,34690:8470,34691:13261,34692:8481,34693:12964,34694:12965,34695:12966,34696:12967,34697:12968,34698:12849,34699:12850,34700:12857,34701:13182,34702:13181,34703:13180,34704:8786,34705:8801,34706:8747,34707:8750,34708:8721,34709:8730,34710:8869,34711:8736,34712:8735,34713:8895,34714:8757,34715:8745,34716:8746,34975:20124,34976:21782,34977:23043,34978:38463,34979:21696,34980:24859,34981:25384,34982:23030,34983:36898,34984:33909,34985:33564,34986:31312,34987:24746,34988:25569,34989:28197,34990:26093,34991:33894,34992:33446,34993:39925,34994:26771,34995:22311,34996:26017,34997:25201,34998:23451,34999:22992,35e3:34427,35001:39156,35002:32098,35003:32190,35004:39822,35005:25110,35006:31903,35007:34999,35008:23433,35009:24245,35010:25353,35011:26263,35012:26696,35013:38343,35014:38797,35015:26447,35016:20197,35017:20234,35018:20301,35019:20381,35020:20553,35021:22258,35022:22839,35023:22996,35024:23041,35025:23561,35026:24799,35027:24847,35028:24944,35029:26131,35030:26885,35031:28858,35032:30031,35033:30064,35034:31227,35035:32173,35036:32239,35037:32963,35038:33806,35039:34915,35040:35586,35041:36949,35042:36986,35043:21307,35044:20117,35045:20133,35046:22495,35047:32946,35048:37057,35049:30959,35050:19968,35051:22769,35052:28322,35053:36920,35054:31282,35055:33576,35056:33419,35057:39983,35058:20801,35059:21360,35060:21693,35061:21729,35062:22240,35063:23035,35064:24341,35065:39154,35066:28139,35067:32996,35068:34093,35136:38498,35137:38512,35138:38560,35139:38907,35140:21515,35141:21491,35142:23431,35143:28879,35144:32701,35145:36802,35146:38632,35147:21359,35148:40284,35149:31418,35150:19985,35151:30867,35152:33276,35153:28198,35154:22040,35155:21764,35156:27421,35157:34074,35158:39995,35159:23013,35160:21417,35161:28006,35162:29916,35163:38287,35164:22082,35165:20113,35166:36939,35167:38642,35168:33615,35169:39180,35170:21473,35171:21942,35172:23344,35173:24433,35174:26144,35175:26355,35176:26628,35177:27704,35178:27891,35179:27945,35180:29787,35181:30408,35182:31310,35183:38964,35184:33521,35185:34907,35186:35424,35187:37613,35188:28082,35189:30123,35190:30410,35191:39365,35192:24742,35193:35585,35194:36234,35195:38322,35196:27022,35197:21421,35198:20870,35200:22290,35201:22576,35202:22852,35203:23476,35204:24310,35205:24616,35206:25513,35207:25588,35208:27839,35209:28436,35210:28814,35211:28948,35212:29017,35213:29141,35214:29503,35215:32257,35216:33398,35217:33489,35218:34199,35219:36960,35220:37467,35221:40219,35222:22633,35223:26044,35224:27738,35225:29989,35226:20985,35227:22830,35228:22885,35229:24448,35230:24540,35231:25276,35232:26106,35233:27178,35234:27431,35235:27572,35236:29579,35237:32705,35238:35158,35239:40236,35240:40206,35241:40644,35242:23713,35243:27798,35244:33659,35245:20740,35246:23627,35247:25014,35248:33222,35249:26742,35250:29281,35251:20057,35252:20474,35253:21368,35254:24681,35255:28201,35256:31311,35257:38899,35258:19979,35259:21270,35260:20206,35261:20309,35262:20285,35263:20385,35264:20339,35265:21152,35266:21487,35267:22025,35268:22799,35269:23233,35270:23478,35271:23521,35272:31185,35273:26247,35274:26524,35275:26550,35276:27468,35277:27827,35278:28779,35279:29634,35280:31117,35281:31166,35282:31292,35283:31623,35284:33457,35285:33499,35286:33540,35287:33655,35288:33775,35289:33747,35290:34662,35291:35506,35292:22057,35293:36008,35294:36838,35295:36942,35296:38686,35297:34442,35298:20420,35299:23784,35300:25105,35301:29273,35302:30011,35303:33253,35304:33469,35305:34558,35306:36032,35307:38597,35308:39187,35309:39381,35310:20171,35311:20250,35312:35299,35313:22238,35314:22602,35315:22730,35316:24315,35317:24555,35318:24618,35319:24724,35320:24674,35321:25040,35322:25106,35323:25296,35324:25913,35392:39745,35393:26214,35394:26800,35395:28023,35396:28784,35397:30028,35398:30342,35399:32117,35400:33445,35401:34809,35402:38283,35403:38542,35404:35997,35405:20977,35406:21182,35407:22806,35408:21683,35409:23475,35410:23830,35411:24936,35412:27010,35413:28079,35414:30861,35415:33995,35416:34903,35417:35442,35418:37799,35419:39608,35420:28012,35421:39336,35422:34521,35423:22435,35424:26623,35425:34510,35426:37390,35427:21123,35428:22151,35429:21508,35430:24275,35431:25313,35432:25785,35433:26684,35434:26680,35435:27579,35436:29554,35437:30906,35438:31339,35439:35226,35440:35282,35441:36203,35442:36611,35443:37101,35444:38307,35445:38548,35446:38761,35447:23398,35448:23731,35449:27005,35450:38989,35451:38990,35452:25499,35453:31520,35454:27179,35456:27263,35457:26806,35458:39949,35459:28511,35460:21106,35461:21917,35462:24688,35463:25324,35464:27963,35465:28167,35466:28369,35467:33883,35468:35088,35469:36676,35470:19988,35471:39993,35472:21494,35473:26907,35474:27194,35475:38788,35476:26666,35477:20828,35478:31427,35479:33970,35480:37340,35481:37772,35482:22107,35483:40232,35484:26658,35485:33541,35486:33841,35487:31909,35488:21e3,35489:33477,35490:29926,35491:20094,35492:20355,35493:20896,35494:23506,35495:21002,35496:21208,35497:21223,35498:24059,35499:21914,35500:22570,35501:23014,35502:23436,35503:23448,35504:23515,35505:24178,35506:24185,35507:24739,35508:24863,35509:24931,35510:25022,35511:25563,35512:25954,35513:26577,35514:26707,35515:26874,35516:27454,35517:27475,35518:27735,35519:28450,35520:28567,35521:28485,35522:29872,35523:29976,35524:30435,35525:30475,35526:31487,35527:31649,35528:31777,35529:32233,35530:32566,35531:32752,35532:32925,35533:33382,35534:33694,35535:35251,35536:35532,35537:36011,35538:36996,35539:37969,35540:38291,35541:38289,35542:38306,35543:38501,35544:38867,35545:39208,35546:33304,35547:20024,35548:21547,35549:23736,35550:24012,35551:29609,35552:30284,35553:30524,35554:23721,35555:32747,35556:36107,35557:38593,35558:38929,35559:38996,35560:39e3,35561:20225,35562:20238,35563:21361,35564:21916,35565:22120,35566:22522,35567:22855,35568:23305,35569:23492,35570:23696,35571:24076,35572:24190,35573:24524,35574:25582,35575:26426,35576:26071,35577:26082,35578:26399,35579:26827,35580:26820,35648:27231,35649:24112,35650:27589,35651:27671,35652:27773,35653:30079,35654:31048,35655:23395,35656:31232,35657:32e3,35658:24509,35659:35215,35660:35352,35661:36020,35662:36215,35663:36556,35664:36637,35665:39138,35666:39438,35667:39740,35668:20096,35669:20605,35670:20736,35671:22931,35672:23452,35673:25135,35674:25216,35675:25836,35676:27450,35677:29344,35678:30097,35679:31047,35680:32681,35681:34811,35682:35516,35683:35696,35684:25516,35685:33738,35686:38816,35687:21513,35688:21507,35689:21931,35690:26708,35691:27224,35692:35440,35693:30759,35694:26485,35695:40653,35696:21364,35697:23458,35698:33050,35699:34384,35700:36870,35701:19992,35702:20037,35703:20167,35704:20241,35705:21450,35706:21560,35707:23470,35708:24339,35709:24613,35710:25937,35712:26429,35713:27714,35714:27762,35715:27875,35716:28792,35717:29699,35718:31350,35719:31406,35720:31496,35721:32026,35722:31998,35723:32102,35724:26087,35725:29275,35726:21435,35727:23621,35728:24040,35729:25298,35730:25312,35731:25369,35732:28192,35733:34394,35734:35377,35735:36317,35736:37624,35737:28417,35738:31142,35739:39770,35740:20136,35741:20139,35742:20140,35743:20379,35744:20384,35745:20689,35746:20807,35747:31478,35748:20849,35749:20982,35750:21332,35751:21281,35752:21375,35753:21483,35754:21932,35755:22659,35756:23777,35757:24375,35758:24394,35759:24623,35760:24656,35761:24685,35762:25375,35763:25945,35764:27211,35765:27841,35766:29378,35767:29421,35768:30703,35769:33016,35770:33029,35771:33288,35772:34126,35773:37111,35774:37857,35775:38911,35776:39255,35777:39514,35778:20208,35779:20957,35780:23597,35781:26241,35782:26989,35783:23616,35784:26354,35785:26997,35786:29577,35787:26704,35788:31873,35789:20677,35790:21220,35791:22343,35792:24062,35793:37670,35794:26020,35795:27427,35796:27453,35797:29748,35798:31105,35799:31165,35800:31563,35801:32202,35802:33465,35803:33740,35804:34943,35805:35167,35806:35641,35807:36817,35808:37329,35809:21535,35810:37504,35811:20061,35812:20534,35813:21477,35814:21306,35815:29399,35816:29590,35817:30697,35818:33510,35819:36527,35820:39366,35821:39368,35822:39378,35823:20855,35824:24858,35825:34398,35826:21936,35827:31354,35828:20598,35829:23507,35830:36935,35831:38533,35832:20018,35833:27355,35834:37351,35835:23633,35836:23624,35904:25496,35905:31391,35906:27795,35907:38772,35908:36705,35909:31402,35910:29066,35911:38536,35912:31874,35913:26647,35914:32368,35915:26705,35916:37740,35917:21234,35918:21531,35919:34219,35920:35347,35921:32676,35922:36557,35923:37089,35924:21350,35925:34952,35926:31041,35927:20418,35928:20670,35929:21009,35930:20804,35931:21843,35932:22317,35933:29674,35934:22411,35935:22865,35936:24418,35937:24452,35938:24693,35939:24950,35940:24935,35941:25001,35942:25522,35943:25658,35944:25964,35945:26223,35946:26690,35947:28179,35948:30054,35949:31293,35950:31995,35951:32076,35952:32153,35953:32331,35954:32619,35955:33550,35956:33610,35957:34509,35958:35336,35959:35427,35960:35686,35961:36605,35962:38938,35963:40335,35964:33464,35965:36814,35966:39912,35968:21127,35969:25119,35970:25731,35971:28608,35972:38553,35973:26689,35974:20625,35975:27424,35976:27770,35977:28500,35978:31348,35979:32080,35980:34880,35981:35363,35982:26376,35983:20214,35984:20537,35985:20518,35986:20581,35987:20860,35988:21048,35989:21091,35990:21927,35991:22287,35992:22533,35993:23244,35994:24314,35995:25010,35996:25080,35997:25331,35998:25458,35999:26908,36e3:27177,36001:29309,36002:29356,36003:29486,36004:30740,36005:30831,36006:32121,36007:30476,36008:32937,36009:35211,36010:35609,36011:36066,36012:36562,36013:36963,36014:37749,36015:38522,36016:38997,36017:39443,36018:40568,36019:20803,36020:21407,36021:21427,36022:24187,36023:24358,36024:28187,36025:28304,36026:29572,36027:29694,36028:32067,36029:33335,36030:35328,36031:35578,36032:38480,36033:20046,36034:20491,36035:21476,36036:21628,36037:22266,36038:22993,36039:23396,36040:24049,36041:24235,36042:24359,36043:25144,36044:25925,36045:26543,36046:28246,36047:29392,36048:31946,36049:34996,36050:32929,36051:32993,36052:33776,36053:34382,36054:35463,36055:36328,36056:37431,36057:38599,36058:39015,36059:40723,36060:20116,36061:20114,36062:20237,36063:21320,36064:21577,36065:21566,36066:23087,36067:24460,36068:24481,36069:24735,36070:26791,36071:27278,36072:29786,36073:30849,36074:35486,36075:35492,36076:35703,36077:37264,36078:20062,36079:39881,36080:20132,36081:20348,36082:20399,36083:20505,36084:20502,36085:20809,36086:20844,36087:21151,36088:21177,36089:21246,36090:21402,36091:21475,36092:21521,36160:21518,36161:21897,36162:22353,36163:22434,36164:22909,36165:23380,36166:23389,36167:23439,36168:24037,36169:24039,36170:24055,36171:24184,36172:24195,36173:24218,36174:24247,36175:24344,36176:24658,36177:24908,36178:25239,36179:25304,36180:25511,36181:25915,36182:26114,36183:26179,36184:26356,36185:26477,36186:26657,36187:26775,36188:27083,36189:27743,36190:27946,36191:28009,36192:28207,36193:28317,36194:30002,36195:30343,36196:30828,36197:31295,36198:31968,36199:32005,36200:32024,36201:32094,36202:32177,36203:32789,36204:32771,36205:32943,36206:32945,36207:33108,36208:33167,36209:33322,36210:33618,36211:34892,36212:34913,36213:35611,36214:36002,36215:36092,36216:37066,36217:37237,36218:37489,36219:30783,36220:37628,36221:38308,36222:38477,36224:38917,36225:39321,36226:39640,36227:40251,36228:21083,36229:21163,36230:21495,36231:21512,36232:22741,36233:25335,36234:28640,36235:35946,36236:36703,36237:40633,36238:20811,36239:21051,36240:21578,36241:22269,36242:31296,36243:37239,36244:40288,36245:40658,36246:29508,36247:28425,36248:33136,36249:29969,36250:24573,36251:24794,36252:39592,36253:29403,36254:36796,36255:27492,36256:38915,36257:20170,36258:22256,36259:22372,36260:22718,36261:23130,36262:24680,36263:25031,36264:26127,36265:26118,36266:26681,36267:26801,36268:28151,36269:30165,36270:32058,36271:33390,36272:39746,36273:20123,36274:20304,36275:21449,36276:21766,36277:23919,36278:24038,36279:24046,36280:26619,36281:27801,36282:29811,36283:30722,36284:35408,36285:37782,36286:35039,36287:22352,36288:24231,36289:25387,36290:20661,36291:20652,36292:20877,36293:26368,36294:21705,36295:22622,36296:22971,36297:23472,36298:24425,36299:25165,36300:25505,36301:26685,36302:27507,36303:28168,36304:28797,36305:37319,36306:29312,36307:30741,36308:30758,36309:31085,36310:25998,36311:32048,36312:33756,36313:35009,36314:36617,36315:38555,36316:21092,36317:22312,36318:26448,36319:32618,36320:36001,36321:20916,36322:22338,36323:38442,36324:22586,36325:27018,36326:32948,36327:21682,36328:23822,36329:22524,36330:30869,36331:40442,36332:20316,36333:21066,36334:21643,36335:25662,36336:26152,36337:26388,36338:26613,36339:31364,36340:31574,36341:32034,36342:37679,36343:26716,36344:39853,36345:31545,36346:21273,36347:20874,36348:21047,36416:23519,36417:25334,36418:25774,36419:25830,36420:26413,36421:27578,36422:34217,36423:38609,36424:30352,36425:39894,36426:25420,36427:37638,36428:39851,36429:30399,36430:26194,36431:19977,36432:20632,36433:21442,36434:23665,36435:24808,36436:25746,36437:25955,36438:26719,36439:29158,36440:29642,36441:29987,36442:31639,36443:32386,36444:34453,36445:35715,36446:36059,36447:37240,36448:39184,36449:26028,36450:26283,36451:27531,36452:20181,36453:20180,36454:20282,36455:20351,36456:21050,36457:21496,36458:21490,36459:21987,36460:22235,36461:22763,36462:22987,36463:22985,36464:23039,36465:23376,36466:23629,36467:24066,36468:24107,36469:24535,36470:24605,36471:25351,36472:25903,36473:23388,36474:26031,36475:26045,36476:26088,36477:26525,36478:27490,36480:27515,36481:27663,36482:29509,36483:31049,36484:31169,36485:31992,36486:32025,36487:32043,36488:32930,36489:33026,36490:33267,36491:35222,36492:35422,36493:35433,36494:35430,36495:35468,36496:35566,36497:36039,36498:36060,36499:38604,36500:39164,36501:27503,36502:20107,36503:20284,36504:20365,36505:20816,36506:23383,36507:23546,36508:24904,36509:25345,36510:26178,36511:27425,36512:28363,36513:27835,36514:29246,36515:29885,36516:30164,36517:30913,36518:31034,36519:32780,36520:32819,36521:33258,36522:33940,36523:36766,36524:27728,36525:40575,36526:24335,36527:35672,36528:40235,36529:31482,36530:36600,36531:23437,36532:38635,36533:19971,36534:21489,36535:22519,36536:22833,36537:23241,36538:23460,36539:24713,36540:28287,36541:28422,36542:30142,36543:36074,36544:23455,36545:34048,36546:31712,36547:20594,36548:26612,36549:33437,36550:23649,36551:34122,36552:32286,36553:33294,36554:20889,36555:23556,36556:25448,36557:36198,36558:26012,36559:29038,36560:31038,36561:32023,36562:32773,36563:35613,36564:36554,36565:36974,36566:34503,36567:37034,36568:20511,36569:21242,36570:23610,36571:26451,36572:28796,36573:29237,36574:37196,36575:37320,36576:37675,36577:33509,36578:23490,36579:24369,36580:24825,36581:20027,36582:21462,36583:23432,36584:25163,36585:26417,36586:27530,36587:29417,36588:29664,36589:31278,36590:33131,36591:36259,36592:37202,36593:39318,36594:20754,36595:21463,36596:21610,36597:23551,36598:25480,36599:27193,36600:32172,36601:38656,36602:22234,36603:21454,36604:21608,36672:23447,36673:23601,36674:24030,36675:20462,36676:24833,36677:25342,36678:27954,36679:31168,36680:31179,36681:32066,36682:32333,36683:32722,36684:33261,36685:33311,36686:33936,36687:34886,36688:35186,36689:35728,36690:36468,36691:36655,36692:36913,36693:37195,36694:37228,36695:38598,36696:37276,36697:20160,36698:20303,36699:20805,36700:21313,36701:24467,36702:25102,36703:26580,36704:27713,36705:28171,36706:29539,36707:32294,36708:37325,36709:37507,36710:21460,36711:22809,36712:23487,36713:28113,36714:31069,36715:32302,36716:31899,36717:22654,36718:29087,36719:20986,36720:34899,36721:36848,36722:20426,36723:23803,36724:26149,36725:30636,36726:31459,36727:33308,36728:39423,36729:20934,36730:24490,36731:26092,36732:26991,36733:27529,36734:28147,36736:28310,36737:28516,36738:30462,36739:32020,36740:24033,36741:36981,36742:37255,36743:38918,36744:20966,36745:21021,36746:25152,36747:26257,36748:26329,36749:28186,36750:24246,36751:32210,36752:32626,36753:26360,36754:34223,36755:34295,36756:35576,36757:21161,36758:21465,36759:22899,36760:24207,36761:24464,36762:24661,36763:37604,36764:38500,36765:20663,36766:20767,36767:21213,36768:21280,36769:21319,36770:21484,36771:21736,36772:21830,36773:21809,36774:22039,36775:22888,36776:22974,36777:23100,36778:23477,36779:23558,36780:23567,36781:23569,36782:23578,36783:24196,36784:24202,36785:24288,36786:24432,36787:25215,36788:25220,36789:25307,36790:25484,36791:25463,36792:26119,36793:26124,36794:26157,36795:26230,36796:26494,36797:26786,36798:27167,36799:27189,36800:27836,36801:28040,36802:28169,36803:28248,36804:28988,36805:28966,36806:29031,36807:30151,36808:30465,36809:30813,36810:30977,36811:31077,36812:31216,36813:31456,36814:31505,36815:31911,36816:32057,36817:32918,36818:33750,36819:33931,36820:34121,36821:34909,36822:35059,36823:35359,36824:35388,36825:35412,36826:35443,36827:35937,36828:36062,36829:37284,36830:37478,36831:37758,36832:37912,36833:38556,36834:38808,36835:19978,36836:19976,36837:19998,36838:20055,36839:20887,36840:21104,36841:22478,36842:22580,36843:22732,36844:23330,36845:24120,36846:24773,36847:25854,36848:26465,36849:26454,36850:27972,36851:29366,36852:30067,36853:31331,36854:33976,36855:35698,36856:37304,36857:37664,36858:22065,36859:22516,36860:39166,36928:25325,36929:26893,36930:27542,36931:29165,36932:32340,36933:32887,36934:33394,36935:35302,36936:39135,36937:34645,36938:36785,36939:23611,36940:20280,36941:20449,36942:20405,36943:21767,36944:23072,36945:23517,36946:23529,36947:24515,36948:24910,36949:25391,36950:26032,36951:26187,36952:26862,36953:27035,36954:28024,36955:28145,36956:30003,36957:30137,36958:30495,36959:31070,36960:31206,36961:32051,36962:33251,36963:33455,36964:34218,36965:35242,36966:35386,36967:36523,36968:36763,36969:36914,36970:37341,36971:38663,36972:20154,36973:20161,36974:20995,36975:22645,36976:22764,36977:23563,36978:29978,36979:23613,36980:33102,36981:35338,36982:36805,36983:38499,36984:38765,36985:31525,36986:35535,36987:38920,36988:37218,36989:22259,36990:21416,36992:36887,36993:21561,36994:22402,36995:24101,36996:25512,36997:27700,36998:28810,36999:30561,37e3:31883,37001:32736,37002:34928,37003:36930,37004:37204,37005:37648,37006:37656,37007:38543,37008:29790,37009:39620,37010:23815,37011:23913,37012:25968,37013:26530,37014:36264,37015:38619,37016:25454,37017:26441,37018:26905,37019:33733,37020:38935,37021:38592,37022:35070,37023:28548,37024:25722,37025:23544,37026:19990,37027:28716,37028:30045,37029:26159,37030:20932,37031:21046,37032:21218,37033:22995,37034:24449,37035:24615,37036:25104,37037:25919,37038:25972,37039:26143,37040:26228,37041:26866,37042:26646,37043:27491,37044:28165,37045:29298,37046:29983,37047:30427,37048:31934,37049:32854,37050:22768,37051:35069,37052:35199,37053:35488,37054:35475,37055:35531,37056:36893,37057:37266,37058:38738,37059:38745,37060:25993,37061:31246,37062:33030,37063:38587,37064:24109,37065:24796,37066:25114,37067:26021,37068:26132,37069:26512,37070:30707,37071:31309,37072:31821,37073:32318,37074:33034,37075:36012,37076:36196,37077:36321,37078:36447,37079:30889,37080:20999,37081:25305,37082:25509,37083:25666,37084:25240,37085:35373,37086:31363,37087:31680,37088:35500,37089:38634,37090:32118,37091:33292,37092:34633,37093:20185,37094:20808,37095:21315,37096:21344,37097:23459,37098:23554,37099:23574,37100:24029,37101:25126,37102:25159,37103:25776,37104:26643,37105:26676,37106:27849,37107:27973,37108:27927,37109:26579,37110:28508,37111:29006,37112:29053,37113:26059,37114:31359,37115:31661,37116:32218,37184:32330,37185:32680,37186:33146,37187:33307,37188:33337,37189:34214,37190:35438,37191:36046,37192:36341,37193:36984,37194:36983,37195:37549,37196:37521,37197:38275,37198:39854,37199:21069,37200:21892,37201:28472,37202:28982,37203:20840,37204:31109,37205:32341,37206:33203,37207:31950,37208:22092,37209:22609,37210:23720,37211:25514,37212:26366,37213:26365,37214:26970,37215:29401,37216:30095,37217:30094,37218:30990,37219:31062,37220:31199,37221:31895,37222:32032,37223:32068,37224:34311,37225:35380,37226:38459,37227:36961,37228:40736,37229:20711,37230:21109,37231:21452,37232:21474,37233:20489,37234:21930,37235:22766,37236:22863,37237:29245,37238:23435,37239:23652,37240:21277,37241:24803,37242:24819,37243:25436,37244:25475,37245:25407,37246:25531,37248:25805,37249:26089,37250:26361,37251:24035,37252:27085,37253:27133,37254:28437,37255:29157,37256:20105,37257:30185,37258:30456,37259:31379,37260:31967,37261:32207,37262:32156,37263:32865,37264:33609,37265:33624,37266:33900,37267:33980,37268:34299,37269:35013,37270:36208,37271:36865,37272:36973,37273:37783,37274:38684,37275:39442,37276:20687,37277:22679,37278:24974,37279:33235,37280:34101,37281:36104,37282:36896,37283:20419,37284:20596,37285:21063,37286:21363,37287:24687,37288:25417,37289:26463,37290:28204,37291:36275,37292:36895,37293:20439,37294:23646,37295:36042,37296:26063,37297:32154,37298:21330,37299:34966,37300:20854,37301:25539,37302:23384,37303:23403,37304:23562,37305:25613,37306:26449,37307:36956,37308:20182,37309:22810,37310:22826,37311:27760,37312:35409,37313:21822,37314:22549,37315:22949,37316:24816,37317:25171,37318:26561,37319:33333,37320:26965,37321:38464,37322:39364,37323:39464,37324:20307,37325:22534,37326:23550,37327:32784,37328:23729,37329:24111,37330:24453,37331:24608,37332:24907,37333:25140,37334:26367,37335:27888,37336:28382,37337:32974,37338:33151,37339:33492,37340:34955,37341:36024,37342:36864,37343:36910,37344:38538,37345:40667,37346:39899,37347:20195,37348:21488,37349:22823,37350:31532,37351:37261,37352:38988,37353:40441,37354:28381,37355:28711,37356:21331,37357:21828,37358:23429,37359:25176,37360:25246,37361:25299,37362:27810,37363:28655,37364:29730,37365:35351,37366:37944,37367:28609,37368:35582,37369:33592,37370:20967,37371:34552,37372:21482,37440:21481,37441:20294,37442:36948,37443:36784,37444:22890,37445:33073,37446:24061,37447:31466,37448:36799,37449:26842,37450:35895,37451:29432,37452:40008,37453:27197,37454:35504,37455:20025,37456:21336,37457:22022,37458:22374,37459:25285,37460:25506,37461:26086,37462:27470,37463:28129,37464:28251,37465:28845,37466:30701,37467:31471,37468:31658,37469:32187,37470:32829,37471:32966,37472:34507,37473:35477,37474:37723,37475:22243,37476:22727,37477:24382,37478:26029,37479:26262,37480:27264,37481:27573,37482:30007,37483:35527,37484:20516,37485:30693,37486:22320,37487:24347,37488:24677,37489:26234,37490:27744,37491:30196,37492:31258,37493:32622,37494:33268,37495:34584,37496:36933,37497:39347,37498:31689,37499:30044,37500:31481,37501:31569,37502:33988,37504:36880,37505:31209,37506:31378,37507:33590,37508:23265,37509:30528,37510:20013,37511:20210,37512:23449,37513:24544,37514:25277,37515:26172,37516:26609,37517:27880,37518:34411,37519:34935,37520:35387,37521:37198,37522:37619,37523:39376,37524:27159,37525:28710,37526:29482,37527:33511,37528:33879,37529:36015,37530:19969,37531:20806,37532:20939,37533:21899,37534:23541,37535:24086,37536:24115,37537:24193,37538:24340,37539:24373,37540:24427,37541:24500,37542:25074,37543:25361,37544:26274,37545:26397,37546:28526,37547:29266,37548:30010,37549:30522,37550:32884,37551:33081,37552:33144,37553:34678,37554:35519,37555:35548,37556:36229,37557:36339,37558:37530,37559:38263,37560:38914,37561:40165,37562:21189,37563:25431,37564:30452,37565:26389,37566:27784,37567:29645,37568:36035,37569:37806,37570:38515,37571:27941,37572:22684,37573:26894,37574:27084,37575:36861,37576:37786,37577:30171,37578:36890,37579:22618,37580:26626,37581:25524,37582:27131,37583:20291,37584:28460,37585:26584,37586:36795,37587:34086,37588:32180,37589:37716,37590:26943,37591:28528,37592:22378,37593:22775,37594:23340,37595:32044,37596:29226,37597:21514,37598:37347,37599:40372,37600:20141,37601:20302,37602:20572,37603:20597,37604:21059,37605:35998,37606:21576,37607:22564,37608:23450,37609:24093,37610:24213,37611:24237,37612:24311,37613:24351,37614:24716,37615:25269,37616:25402,37617:25552,37618:26799,37619:27712,37620:30855,37621:31118,37622:31243,37623:32224,37624:33351,37625:35330,37626:35558,37627:36420,37628:36883,37696:37048,37697:37165,37698:37336,37699:40718,37700:27877,37701:25688,37702:25826,37703:25973,37704:28404,37705:30340,37706:31515,37707:36969,37708:37841,37709:28346,37710:21746,37711:24505,37712:25764,37713:36685,37714:36845,37715:37444,37716:20856,37717:22635,37718:22825,37719:23637,37720:24215,37721:28155,37722:32399,37723:29980,37724:36028,37725:36578,37726:39003,37727:28857,37728:20253,37729:27583,37730:28593,37731:3e4,37732:38651,37733:20814,37734:21520,37735:22581,37736:22615,37737:22956,37738:23648,37739:24466,37740:26007,37741:26460,37742:28193,37743:30331,37744:33759,37745:36077,37746:36884,37747:37117,37748:37709,37749:30757,37750:30778,37751:21162,37752:24230,37753:22303,37754:22900,37755:24594,37756:20498,37757:20826,37758:20908,37760:20941,37761:20992,37762:21776,37763:22612,37764:22616,37765:22871,37766:23445,37767:23798,37768:23947,37769:24764,37770:25237,37771:25645,37772:26481,37773:26691,37774:26812,37775:26847,37776:30423,37777:28120,37778:28271,37779:28059,37780:28783,37781:29128,37782:24403,37783:30168,37784:31095,37785:31561,37786:31572,37787:31570,37788:31958,37789:32113,37790:21040,37791:33891,37792:34153,37793:34276,37794:35342,37795:35588,37796:35910,37797:36367,37798:36867,37799:36879,37800:37913,37801:38518,37802:38957,37803:39472,37804:38360,37805:20685,37806:21205,37807:21516,37808:22530,37809:23566,37810:24999,37811:25758,37812:27934,37813:30643,37814:31461,37815:33012,37816:33796,37817:36947,37818:37509,37819:23776,37820:40199,37821:21311,37822:24471,37823:24499,37824:28060,37825:29305,37826:30563,37827:31167,37828:31716,37829:27602,37830:29420,37831:35501,37832:26627,37833:27233,37834:20984,37835:31361,37836:26932,37837:23626,37838:40182,37839:33515,37840:23493,37841:37193,37842:28702,37843:22136,37844:23663,37845:24775,37846:25958,37847:27788,37848:35930,37849:36929,37850:38931,37851:21585,37852:26311,37853:37389,37854:22856,37855:37027,37856:20869,37857:20045,37858:20970,37859:34201,37860:35598,37861:28760,37862:25466,37863:37707,37864:26978,37865:39348,37866:32260,37867:30071,37868:21335,37869:26976,37870:36575,37871:38627,37872:27741,37873:20108,37874:23612,37875:24336,37876:36841,37877:21250,37878:36049,37879:32905,37880:34425,37881:24319,37882:26085,37883:20083,37884:20837,37952:22914,37953:23615,37954:38894,37955:20219,37956:22922,37957:24525,37958:35469,37959:28641,37960:31152,37961:31074,37962:23527,37963:33905,37964:29483,37965:29105,37966:24180,37967:24565,37968:25467,37969:25754,37970:29123,37971:31896,37972:20035,37973:24316,37974:20043,37975:22492,37976:22178,37977:24745,37978:28611,37979:32013,37980:33021,37981:33075,37982:33215,37983:36786,37984:35223,37985:34468,37986:24052,37987:25226,37988:25773,37989:35207,37990:26487,37991:27874,37992:27966,37993:29750,37994:30772,37995:23110,37996:32629,37997:33453,37998:39340,37999:20467,38e3:24259,38001:25309,38002:25490,38003:25943,38004:26479,38005:30403,38006:29260,38007:32972,38008:32954,38009:36649,38010:37197,38011:20493,38012:22521,38013:23186,38014:26757,38016:26995,38017:29028,38018:29437,38019:36023,38020:22770,38021:36064,38022:38506,38023:36889,38024:34687,38025:31204,38026:30695,38027:33833,38028:20271,38029:21093,38030:21338,38031:25293,38032:26575,38033:27850,38034:30333,38035:31636,38036:31893,38037:33334,38038:34180,38039:36843,38040:26333,38041:28448,38042:29190,38043:32283,38044:33707,38045:39361,38046:40614,38047:20989,38048:31665,38049:30834,38050:31672,38051:32903,38052:31560,38053:27368,38054:24161,38055:32908,38056:30033,38057:30048,38058:20843,38059:37474,38060:28300,38061:30330,38062:37271,38063:39658,38064:20240,38065:32624,38066:25244,38067:31567,38068:38309,38069:40169,38070:22138,38071:22617,38072:34532,38073:38588,38074:20276,38075:21028,38076:21322,38077:21453,38078:21467,38079:24070,38080:25644,38081:26001,38082:26495,38083:27710,38084:27726,38085:29256,38086:29359,38087:29677,38088:30036,38089:32321,38090:33324,38091:34281,38092:36009,38093:31684,38094:37318,38095:29033,38096:38930,38097:39151,38098:25405,38099:26217,38100:30058,38101:30436,38102:30928,38103:34115,38104:34542,38105:21290,38106:21329,38107:21542,38108:22915,38109:24199,38110:24444,38111:24754,38112:25161,38113:25209,38114:25259,38115:26e3,38116:27604,38117:27852,38118:30130,38119:30382,38120:30865,38121:31192,38122:32203,38123:32631,38124:32933,38125:34987,38126:35513,38127:36027,38128:36991,38129:38750,38130:39131,38131:27147,38132:31800,38133:20633,38134:23614,38135:24494,38136:26503,38137:27608,38138:29749,38139:30473,38140:32654,38208:40763,38209:26570,38210:31255,38211:21305,38212:30091,38213:39661,38214:24422,38215:33181,38216:33777,38217:32920,38218:24380,38219:24517,38220:30050,38221:31558,38222:36924,38223:26727,38224:23019,38225:23195,38226:32016,38227:30334,38228:35628,38229:20469,38230:24426,38231:27161,38232:27703,38233:28418,38234:29922,38235:31080,38236:34920,38237:35413,38238:35961,38239:24287,38240:25551,38241:30149,38242:31186,38243:33495,38244:37672,38245:37618,38246:33948,38247:34541,38248:39981,38249:21697,38250:24428,38251:25996,38252:27996,38253:28693,38254:36007,38255:36051,38256:38971,38257:25935,38258:29942,38259:19981,38260:20184,38261:22496,38262:22827,38263:23142,38264:23500,38265:20904,38266:24067,38267:24220,38268:24598,38269:25206,38270:25975,38272:26023,38273:26222,38274:28014,38275:29238,38276:31526,38277:33104,38278:33178,38279:33433,38280:35676,38281:36e3,38282:36070,38283:36212,38284:38428,38285:38468,38286:20398,38287:25771,38288:27494,38289:33310,38290:33889,38291:34154,38292:37096,38293:23553,38294:26963,38295:39080,38296:33914,38297:34135,38298:20239,38299:21103,38300:24489,38301:24133,38302:26381,38303:31119,38304:33145,38305:35079,38306:35206,38307:28149,38308:24343,38309:25173,38310:27832,38311:20175,38312:29289,38313:39826,38314:20998,38315:21563,38316:22132,38317:22707,38318:24996,38319:25198,38320:28954,38321:22894,38322:31881,38323:31966,38324:32027,38325:38640,38326:25991,38327:32862,38328:19993,38329:20341,38330:20853,38331:22592,38332:24163,38333:24179,38334:24330,38335:26564,38336:20006,38337:34109,38338:38281,38339:38491,38340:31859,38341:38913,38342:20731,38343:22721,38344:30294,38345:30887,38346:21029,38347:30629,38348:34065,38349:31622,38350:20559,38351:22793,38352:29255,38353:31687,38354:32232,38355:36794,38356:36820,38357:36941,38358:20415,38359:21193,38360:23081,38361:24321,38362:38829,38363:20445,38364:33303,38365:37610,38366:22275,38367:25429,38368:27497,38369:29995,38370:35036,38371:36628,38372:31298,38373:21215,38374:22675,38375:24917,38376:25098,38377:26286,38378:27597,38379:31807,38380:33769,38381:20515,38382:20472,38383:21253,38384:21574,38385:22577,38386:22857,38387:23453,38388:23792,38389:23791,38390:23849,38391:24214,38392:25265,38393:25447,38394:25918,38395:26041,38396:26379,38464:27861,38465:27873,38466:28921,38467:30770,38468:32299,38469:32990,38470:33459,38471:33804,38472:34028,38473:34562,38474:35090,38475:35370,38476:35914,38477:37030,38478:37586,38479:39165,38480:40179,38481:40300,38482:20047,38483:20129,38484:20621,38485:21078,38486:22346,38487:22952,38488:24125,38489:24536,38490:24537,38491:25151,38492:26292,38493:26395,38494:26576,38495:26834,38496:20882,38497:32033,38498:32938,38499:33192,38500:35584,38501:35980,38502:36031,38503:37502,38504:38450,38505:21536,38506:38956,38507:21271,38508:20693,38509:21340,38510:22696,38511:25778,38512:26420,38513:29287,38514:30566,38515:31302,38516:37350,38517:21187,38518:27809,38519:27526,38520:22528,38521:24140,38522:22868,38523:26412,38524:32763,38525:20961,38526:30406,38528:25705,38529:30952,38530:39764,38531:40635,38532:22475,38533:22969,38534:26151,38535:26522,38536:27598,38537:21737,38538:27097,38539:24149,38540:33180,38541:26517,38542:39850,38543:26622,38544:40018,38545:26717,38546:20134,38547:20451,38548:21448,38549:25273,38550:26411,38551:27819,38552:36804,38553:20397,38554:32365,38555:40639,38556:19975,38557:24930,38558:28288,38559:28459,38560:34067,38561:21619,38562:26410,38563:39749,38564:24051,38565:31637,38566:23724,38567:23494,38568:34588,38569:28234,38570:34001,38571:31252,38572:33032,38573:22937,38574:31885,38575:27665,38576:30496,38577:21209,38578:22818,38579:28961,38580:29279,38581:30683,38582:38695,38583:40289,38584:26891,38585:23167,38586:23064,38587:20901,38588:21517,38589:21629,38590:26126,38591:30431,38592:36855,38593:37528,38594:40180,38595:23018,38596:29277,38597:28357,38598:20813,38599:26825,38600:32191,38601:32236,38602:38754,38603:40634,38604:25720,38605:27169,38606:33538,38607:22916,38608:23391,38609:27611,38610:29467,38611:30450,38612:32178,38613:32791,38614:33945,38615:20786,38616:26408,38617:40665,38618:30446,38619:26466,38620:21247,38621:39173,38622:23588,38623:25147,38624:31870,38625:36016,38626:21839,38627:24758,38628:32011,38629:38272,38630:21249,38631:20063,38632:20918,38633:22812,38634:29242,38635:32822,38636:37326,38637:24357,38638:30690,38639:21380,38640:24441,38641:32004,38642:34220,38643:35379,38644:36493,38645:38742,38646:26611,38647:34222,38648:37971,38649:24841,38650:24840,38651:27833,38652:30290,38720:35565,38721:36664,38722:21807,38723:20305,38724:20778,38725:21191,38726:21451,38727:23461,38728:24189,38729:24736,38730:24962,38731:25558,38732:26377,38733:26586,38734:28263,38735:28044,38736:29494,38737:29495,38738:30001,38739:31056,38740:35029,38741:35480,38742:36938,38743:37009,38744:37109,38745:38596,38746:34701,38747:22805,38748:20104,38749:20313,38750:19982,38751:35465,38752:36671,38753:38928,38754:20653,38755:24188,38756:22934,38757:23481,38758:24248,38759:25562,38760:25594,38761:25793,38762:26332,38763:26954,38764:27096,38765:27915,38766:28342,38767:29076,38768:29992,38769:31407,38770:32650,38771:32768,38772:33865,38773:33993,38774:35201,38775:35617,38776:36362,38777:36965,38778:38525,38779:39178,38780:24958,38781:25233,38782:27442,38784:27779,38785:28020,38786:32716,38787:32764,38788:28096,38789:32645,38790:34746,38791:35064,38792:26469,38793:33713,38794:38972,38795:38647,38796:27931,38797:32097,38798:33853,38799:37226,38800:20081,38801:21365,38802:23888,38803:27396,38804:28651,38805:34253,38806:34349,38807:35239,38808:21033,38809:21519,38810:23653,38811:26446,38812:26792,38813:29702,38814:29827,38815:30178,38816:35023,38817:35041,38818:37324,38819:38626,38820:38520,38821:24459,38822:29575,38823:31435,38824:33870,38825:25504,38826:30053,38827:21129,38828:27969,38829:28316,38830:29705,38831:30041,38832:30827,38833:31890,38834:38534,38835:31452,38836:40845,38837:20406,38838:24942,38839:26053,38840:34396,38841:20102,38842:20142,38843:20698,38844:20001,38845:20940,38846:23534,38847:26009,38848:26753,38849:28092,38850:29471,38851:30274,38852:30637,38853:31260,38854:31975,38855:33391,38856:35538,38857:36988,38858:37327,38859:38517,38860:38936,38861:21147,38862:32209,38863:20523,38864:21400,38865:26519,38866:28107,38867:29136,38868:29747,38869:33256,38870:36650,38871:38563,38872:40023,38873:40607,38874:29792,38875:22593,38876:28057,38877:32047,38878:39006,38879:20196,38880:20278,38881:20363,38882:20919,38883:21169,38884:23994,38885:24604,38886:29618,38887:31036,38888:33491,38889:37428,38890:38583,38891:38646,38892:38666,38893:40599,38894:40802,38895:26278,38896:27508,38897:21015,38898:21155,38899:28872,38900:35010,38901:24265,38902:24651,38903:24976,38904:28451,38905:29001,38906:31806,38907:32244,38908:32879,38976:34030,38977:36899,38978:37676,38979:21570,38980:39791,38981:27347,38982:28809,38983:36034,38984:36335,38985:38706,38986:21172,38987:23105,38988:24266,38989:24324,38990:26391,38991:27004,38992:27028,38993:28010,38994:28431,38995:29282,38996:29436,38997:31725,38998:32769,38999:32894,39e3:34635,39001:37070,39002:20845,39003:40595,39004:31108,39005:32907,39006:37682,39007:35542,39008:20525,39009:21644,39010:35441,39011:27498,39012:36036,39013:33031,39014:24785,39015:26528,39016:40434,39017:20121,39018:20120,39019:39952,39020:35435,39021:34241,39022:34152,39023:26880,39024:28286,39025:30871,39026:33109,39071:24332,39072:19984,39073:19989,39074:20010,39075:20017,39076:20022,39077:20028,39078:20031,39079:20034,39080:20054,39081:20056,39082:20098,39083:20101,39084:35947,39085:20106,39086:33298,39087:24333,39088:20110,39089:20126,39090:20127,39091:20128,39092:20130,39093:20144,39094:20147,39095:20150,39096:20174,39097:20173,39098:20164,39099:20166,39100:20162,39101:20183,39102:20190,39103:20205,39104:20191,39105:20215,39106:20233,39107:20314,39108:20272,39109:20315,39110:20317,39111:20311,39112:20295,39113:20342,39114:20360,39115:20367,39116:20376,39117:20347,39118:20329,39119:20336,39120:20369,39121:20335,39122:20358,39123:20374,39124:20760,39125:20436,39126:20447,39127:20430,39128:20440,39129:20443,39130:20433,39131:20442,39132:20432,39133:20452,39134:20453,39135:20506,39136:20520,39137:20500,39138:20522,39139:20517,39140:20485,39141:20252,39142:20470,39143:20513,39144:20521,39145:20524,39146:20478,39147:20463,39148:20497,39149:20486,39150:20547,39151:20551,39152:26371,39153:20565,39154:20560,39155:20552,39156:20570,39157:20566,39158:20588,39159:20600,39160:20608,39161:20634,39162:20613,39163:20660,39164:20658,39232:20681,39233:20682,39234:20659,39235:20674,39236:20694,39237:20702,39238:20709,39239:20717,39240:20707,39241:20718,39242:20729,39243:20725,39244:20745,39245:20737,39246:20738,39247:20758,39248:20757,39249:20756,39250:20762,39251:20769,39252:20794,39253:20791,39254:20796,39255:20795,39256:20799,39257:20800,39258:20818,39259:20812,39260:20820,39261:20834,39262:31480,39263:20841,39264:20842,39265:20846,39266:20864,39267:20866,39268:22232,39269:20876,39270:20873,39271:20879,39272:20881,39273:20883,39274:20885,39275:20886,39276:20900,39277:20902,39278:20898,39279:20905,39280:20906,39281:20907,39282:20915,39283:20913,39284:20914,39285:20912,39286:20917,39287:20925,39288:20933,39289:20937,39290:20955,39291:20960,39292:34389,39293:20969,39294:20973,39296:20976,39297:20981,39298:20990,39299:20996,39300:21003,39301:21012,39302:21006,39303:21031,39304:21034,39305:21038,39306:21043,39307:21049,39308:21071,39309:21060,39310:21067,39311:21068,39312:21086,39313:21076,39314:21098,39315:21108,39316:21097,39317:21107,39318:21119,39319:21117,39320:21133,39321:21140,39322:21138,39323:21105,39324:21128,39325:21137,39326:36776,39327:36775,39328:21164,39329:21165,39330:21180,39331:21173,39332:21185,39333:21197,39334:21207,39335:21214,39336:21219,39337:21222,39338:39149,39339:21216,39340:21235,39341:21237,39342:21240,39343:21241,39344:21254,39345:21256,39346:30008,39347:21261,39348:21264,39349:21263,39350:21269,39351:21274,39352:21283,39353:21295,39354:21297,39355:21299,39356:21304,39357:21312,39358:21318,39359:21317,39360:19991,39361:21321,39362:21325,39363:20950,39364:21342,39365:21353,39366:21358,39367:22808,39368:21371,39369:21367,39370:21378,39371:21398,39372:21408,39373:21414,39374:21413,39375:21422,39376:21424,39377:21430,39378:21443,39379:31762,39380:38617,39381:21471,39382:26364,39383:29166,39384:21486,39385:21480,39386:21485,39387:21498,39388:21505,39389:21565,39390:21568,39391:21548,39392:21549,39393:21564,39394:21550,39395:21558,39396:21545,39397:21533,39398:21582,39399:21647,39400:21621,39401:21646,39402:21599,39403:21617,39404:21623,39405:21616,39406:21650,39407:21627,39408:21632,39409:21622,39410:21636,39411:21648,39412:21638,39413:21703,39414:21666,39415:21688,39416:21669,39417:21676,39418:21700,39419:21704,39420:21672,39488:21675,39489:21698,39490:21668,39491:21694,39492:21692,39493:21720,39494:21733,39495:21734,39496:21775,39497:21780,39498:21757,39499:21742,39500:21741,39501:21754,39502:21730,39503:21817,39504:21824,39505:21859,39506:21836,39507:21806,39508:21852,39509:21829,39510:21846,39511:21847,39512:21816,39513:21811,39514:21853,39515:21913,39516:21888,39517:21679,39518:21898,39519:21919,39520:21883,39521:21886,39522:21912,39523:21918,39524:21934,39525:21884,39526:21891,39527:21929,39528:21895,39529:21928,39530:21978,39531:21957,39532:21983,39533:21956,39534:21980,39535:21988,39536:21972,39537:22036,39538:22007,39539:22038,39540:22014,39541:22013,39542:22043,39543:22009,39544:22094,39545:22096,39546:29151,39547:22068,39548:22070,39549:22066,39550:22072,39552:22123,39553:22116,39554:22063,39555:22124,39556:22122,39557:22150,39558:22144,39559:22154,39560:22176,39561:22164,39562:22159,39563:22181,39564:22190,39565:22198,39566:22196,39567:22210,39568:22204,39569:22209,39570:22211,39571:22208,39572:22216,39573:22222,39574:22225,39575:22227,39576:22231,39577:22254,39578:22265,39579:22272,39580:22271,39581:22276,39582:22281,39583:22280,39584:22283,39585:22285,39586:22291,39587:22296,39588:22294,39589:21959,39590:22300,39591:22310,39592:22327,39593:22328,39594:22350,39595:22331,39596:22336,39597:22351,39598:22377,39599:22464,39600:22408,39601:22369,39602:22399,39603:22409,39604:22419,39605:22432,39606:22451,39607:22436,39608:22442,39609:22448,39610:22467,39611:22470,39612:22484,39613:22482,39614:22483,39615:22538,39616:22486,39617:22499,39618:22539,39619:22553,39620:22557,39621:22642,39622:22561,39623:22626,39624:22603,39625:22640,39626:27584,39627:22610,39628:22589,39629:22649,39630:22661,39631:22713,39632:22687,39633:22699,39634:22714,39635:22750,39636:22715,39637:22712,39638:22702,39639:22725,39640:22739,39641:22737,39642:22743,39643:22745,39644:22744,39645:22757,39646:22748,39647:22756,39648:22751,39649:22767,39650:22778,39651:22777,39652:22779,39653:22780,39654:22781,39655:22786,39656:22794,39657:22800,39658:22811,39659:26790,39660:22821,39661:22828,39662:22829,39663:22834,39664:22840,39665:22846,39666:31442,39667:22869,39668:22864,39669:22862,39670:22874,39671:22872,39672:22882,39673:22880,39674:22887,39675:22892,39676:22889,39744:22904,39745:22913,39746:22941,39747:20318,39748:20395,39749:22947,39750:22962,39751:22982,39752:23016,39753:23004,39754:22925,39755:23001,39756:23002,39757:23077,39758:23071,39759:23057,39760:23068,39761:23049,39762:23066,39763:23104,39764:23148,39765:23113,39766:23093,39767:23094,39768:23138,39769:23146,39770:23194,39771:23228,39772:23230,39773:23243,39774:23234,39775:23229,39776:23267,39777:23255,39778:23270,39779:23273,39780:23254,39781:23290,39782:23291,39783:23308,39784:23307,39785:23318,39786:23346,39787:23248,39788:23338,39789:23350,39790:23358,39791:23363,39792:23365,39793:23360,39794:23377,39795:23381,39796:23386,39797:23387,39798:23397,39799:23401,39800:23408,39801:23411,39802:23413,39803:23416,39804:25992,39805:23418,39806:23424,39808:23427,39809:23462,39810:23480,39811:23491,39812:23495,39813:23497,39814:23508,39815:23504,39816:23524,39817:23526,39818:23522,39819:23518,39820:23525,39821:23531,39822:23536,39823:23542,39824:23539,39825:23557,39826:23559,39827:23560,39828:23565,39829:23571,39830:23584,39831:23586,39832:23592,39833:23608,39834:23609,39835:23617,39836:23622,39837:23630,39838:23635,39839:23632,39840:23631,39841:23409,39842:23660,39843:23662,39844:20066,39845:23670,39846:23673,39847:23692,39848:23697,39849:23700,39850:22939,39851:23723,39852:23739,39853:23734,39854:23740,39855:23735,39856:23749,39857:23742,39858:23751,39859:23769,39860:23785,39861:23805,39862:23802,39863:23789,39864:23948,39865:23786,39866:23819,39867:23829,39868:23831,39869:23900,39870:23839,39871:23835,39872:23825,39873:23828,39874:23842,39875:23834,39876:23833,39877:23832,39878:23884,39879:23890,39880:23886,39881:23883,39882:23916,39883:23923,39884:23926,39885:23943,39886:23940,39887:23938,39888:23970,39889:23965,39890:23980,39891:23982,39892:23997,39893:23952,39894:23991,39895:23996,39896:24009,39897:24013,39898:24019,39899:24018,39900:24022,39901:24027,39902:24043,39903:24050,39904:24053,39905:24075,39906:24090,39907:24089,39908:24081,39909:24091,39910:24118,39911:24119,39912:24132,39913:24131,39914:24128,39915:24142,39916:24151,39917:24148,39918:24159,39919:24162,39920:24164,39921:24135,39922:24181,39923:24182,39924:24186,39925:40636,39926:24191,39927:24224,39928:24257,39929:24258,39930:24264,39931:24272,39932:24271,4e4:24278,40001:24291,40002:24285,40003:24282,40004:24283,40005:24290,40006:24289,40007:24296,40008:24297,40009:24300,40010:24305,40011:24307,40012:24304,40013:24308,40014:24312,40015:24318,40016:24323,40017:24329,40018:24413,40019:24412,40020:24331,40021:24337,40022:24342,40023:24361,40024:24365,40025:24376,40026:24385,40027:24392,40028:24396,40029:24398,40030:24367,40031:24401,40032:24406,40033:24407,40034:24409,40035:24417,40036:24429,40037:24435,40038:24439,40039:24451,40040:24450,40041:24447,40042:24458,40043:24456,40044:24465,40045:24455,40046:24478,40047:24473,40048:24472,40049:24480,40050:24488,40051:24493,40052:24508,40053:24534,40054:24571,40055:24548,40056:24568,40057:24561,40058:24541,40059:24755,40060:24575,40061:24609,40062:24672,40064:24601,40065:24592,40066:24617,40067:24590,40068:24625,40069:24603,40070:24597,40071:24619,40072:24614,40073:24591,40074:24634,40075:24666,40076:24641,40077:24682,40078:24695,40079:24671,40080:24650,40081:24646,40082:24653,40083:24675,40084:24643,40085:24676,40086:24642,40087:24684,40088:24683,40089:24665,40090:24705,40091:24717,40092:24807,40093:24707,40094:24730,40095:24708,40096:24731,40097:24726,40098:24727,40099:24722,40100:24743,40101:24715,40102:24801,40103:24760,40104:24800,40105:24787,40106:24756,40107:24560,40108:24765,40109:24774,40110:24757,40111:24792,40112:24909,40113:24853,40114:24838,40115:24822,40116:24823,40117:24832,40118:24820,40119:24826,40120:24835,40121:24865,40122:24827,40123:24817,40124:24845,40125:24846,40126:24903,40127:24894,40128:24872,40129:24871,40130:24906,40131:24895,40132:24892,40133:24876,40134:24884,40135:24893,40136:24898,40137:24900,40138:24947,40139:24951,40140:24920,40141:24921,40142:24922,40143:24939,40144:24948,40145:24943,40146:24933,40147:24945,40148:24927,40149:24925,40150:24915,40151:24949,40152:24985,40153:24982,40154:24967,40155:25004,40156:24980,40157:24986,40158:24970,40159:24977,40160:25003,40161:25006,40162:25036,40163:25034,40164:25033,40165:25079,40166:25032,40167:25027,40168:25030,40169:25018,40170:25035,40171:32633,40172:25037,40173:25062,40174:25059,40175:25078,40176:25082,40177:25076,40178:25087,40179:25085,40180:25084,40181:25086,40182:25088,40183:25096,40184:25097,40185:25101,40186:25100,40187:25108,40188:25115,40256:25118,40257:25121,40258:25130,40259:25134,40260:25136,40261:25138,40262:25139,40263:25153,40264:25166,40265:25182,40266:25187,40267:25179,40268:25184,40269:25192,40270:25212,40271:25218,40272:25225,40273:25214,40274:25234,40275:25235,40276:25238,40277:25300,40278:25219,40279:25236,40280:25303,40281:25297,40282:25275,40283:25295,40284:25343,40285:25286,40286:25812,40287:25288,40288:25308,40289:25292,40290:25290,40291:25282,40292:25287,40293:25243,40294:25289,40295:25356,40296:25326,40297:25329,40298:25383,40299:25346,40300:25352,40301:25327,40302:25333,40303:25424,40304:25406,40305:25421,40306:25628,40307:25423,40308:25494,40309:25486,40310:25472,40311:25515,40312:25462,40313:25507,40314:25487,40315:25481,40316:25503,40317:25525,40318:25451,40320:25449,40321:25534,40322:25577,40323:25536,40324:25542,40325:25571,40326:25545,40327:25554,40328:25590,40329:25540,40330:25622,40331:25652,40332:25606,40333:25619,40334:25638,40335:25654,40336:25885,40337:25623,40338:25640,40339:25615,40340:25703,40341:25711,40342:25718,40343:25678,40344:25898,40345:25749,40346:25747,40347:25765,40348:25769,40349:25736,40350:25788,40351:25818,40352:25810,40353:25797,40354:25799,40355:25787,40356:25816,40357:25794,40358:25841,40359:25831,40360:33289,40361:25824,40362:25825,40363:25260,40364:25827,40365:25839,40366:25900,40367:25846,40368:25844,40369:25842,40370:25850,40371:25856,40372:25853,40373:25880,40374:25884,40375:25861,40376:25892,40377:25891,40378:25899,40379:25908,40380:25909,40381:25911,40382:25910,40383:25912,40384:30027,40385:25928,40386:25942,40387:25941,40388:25933,40389:25944,40390:25950,40391:25949,40392:25970,40393:25976,40394:25986,40395:25987,40396:35722,40397:26011,40398:26015,40399:26027,40400:26039,40401:26051,40402:26054,40403:26049,40404:26052,40405:26060,40406:26066,40407:26075,40408:26073,40409:26080,40410:26081,40411:26097,40412:26482,40413:26122,40414:26115,40415:26107,40416:26483,40417:26165,40418:26166,40419:26164,40420:26140,40421:26191,40422:26180,40423:26185,40424:26177,40425:26206,40426:26205,40427:26212,40428:26215,40429:26216,40430:26207,40431:26210,40432:26224,40433:26243,40434:26248,40435:26254,40436:26249,40437:26244,40438:26264,40439:26269,40440:26305,40441:26297,40442:26313,40443:26302,40444:26300,40512:26308,40513:26296,40514:26326,40515:26330,40516:26336,40517:26175,40518:26342,40519:26345,40520:26352,40521:26357,40522:26359,40523:26383,40524:26390,40525:26398,40526:26406,40527:26407,40528:38712,40529:26414,40530:26431,40531:26422,40532:26433,40533:26424,40534:26423,40535:26438,40536:26462,40537:26464,40538:26457,40539:26467,40540:26468,40541:26505,40542:26480,40543:26537,40544:26492,40545:26474,40546:26508,40547:26507,40548:26534,40549:26529,40550:26501,40551:26551,40552:26607,40553:26548,40554:26604,40555:26547,40556:26601,40557:26552,40558:26596,40559:26590,40560:26589,40561:26594,40562:26606,40563:26553,40564:26574,40565:26566,40566:26599,40567:27292,40568:26654,40569:26694,40570:26665,40571:26688,40572:26701,40573:26674,40574:26702,40576:26803,40577:26667,40578:26713,40579:26723,40580:26743,40581:26751,40582:26783,40583:26767,40584:26797,40585:26772,40586:26781,40587:26779,40588:26755,40589:27310,40590:26809,40591:26740,40592:26805,40593:26784,40594:26810,40595:26895,40596:26765,40597:26750,40598:26881,40599:26826,40600:26888,40601:26840,40602:26914,40603:26918,40604:26849,40605:26892,40606:26829,40607:26836,40608:26855,40609:26837,40610:26934,40611:26898,40612:26884,40613:26839,40614:26851,40615:26917,40616:26873,40617:26848,40618:26863,40619:26920,40620:26922,40621:26906,40622:26915,40623:26913,40624:26822,40625:27001,40626:26999,40627:26972,40628:27e3,40629:26987,40630:26964,40631:27006,40632:26990,40633:26937,40634:26996,40635:26941,40636:26969,40637:26928,40638:26977,40639:26974,40640:26973,40641:27009,40642:26986,40643:27058,40644:27054,40645:27088,40646:27071,40647:27073,40648:27091,40649:27070,40650:27086,40651:23528,40652:27082,40653:27101,40654:27067,40655:27075,40656:27047,40657:27182,40658:27025,40659:27040,40660:27036,40661:27029,40662:27060,40663:27102,40664:27112,40665:27138,40666:27163,40667:27135,40668:27402,40669:27129,40670:27122,40671:27111,40672:27141,40673:27057,40674:27166,40675:27117,40676:27156,40677:27115,40678:27146,40679:27154,40680:27329,40681:27171,40682:27155,40683:27204,40684:27148,40685:27250,40686:27190,40687:27256,40688:27207,40689:27234,40690:27225,40691:27238,40692:27208,40693:27192,40694:27170,40695:27280,40696:27277,40697:27296,40698:27268,40699:27298,40700:27299,40768:27287,40769:34327,40770:27323,40771:27331,40772:27330,40773:27320,40774:27315,40775:27308,40776:27358,40777:27345,40778:27359,40779:27306,40780:27354,40781:27370,40782:27387,40783:27397,40784:34326,40785:27386,40786:27410,40787:27414,40788:39729,40789:27423,40790:27448,40791:27447,40792:30428,40793:27449,40794:39150,40795:27463,40796:27459,40797:27465,40798:27472,40799:27481,40800:27476,40801:27483,40802:27487,40803:27489,40804:27512,40805:27513,40806:27519,40807:27520,40808:27524,40809:27523,40810:27533,40811:27544,40812:27541,40813:27550,40814:27556,40815:27562,40816:27563,40817:27567,40818:27570,40819:27569,40820:27571,40821:27575,40822:27580,40823:27590,40824:27595,40825:27603,40826:27615,40827:27628,40828:27627,40829:27635,40830:27631,40832:40638,40833:27656,40834:27667,40835:27668,40836:27675,40837:27684,40838:27683,40839:27742,40840:27733,40841:27746,40842:27754,40843:27778,40844:27789,40845:27802,40846:27777,40847:27803,40848:27774,40849:27752,40850:27763,40851:27794,40852:27792,40853:27844,40854:27889,40855:27859,40856:27837,40857:27863,40858:27845,40859:27869,40860:27822,40861:27825,40862:27838,40863:27834,40864:27867,40865:27887,40866:27865,40867:27882,40868:27935,40869:34893,40870:27958,40871:27947,40872:27965,40873:27960,40874:27929,40875:27957,40876:27955,40877:27922,40878:27916,40879:28003,40880:28051,40881:28004,40882:27994,40883:28025,40884:27993,40885:28046,40886:28053,40887:28644,40888:28037,40889:28153,40890:28181,40891:28170,40892:28085,40893:28103,40894:28134,40895:28088,40896:28102,40897:28140,40898:28126,40899:28108,40900:28136,40901:28114,40902:28101,40903:28154,40904:28121,40905:28132,40906:28117,40907:28138,40908:28142,40909:28205,40910:28270,40911:28206,40912:28185,40913:28274,40914:28255,40915:28222,40916:28195,40917:28267,40918:28203,40919:28278,40920:28237,40921:28191,40922:28227,40923:28218,40924:28238,40925:28196,40926:28415,40927:28189,40928:28216,40929:28290,40930:28330,40931:28312,40932:28361,40933:28343,40934:28371,40935:28349,40936:28335,40937:28356,40938:28338,40939:28372,40940:28373,40941:28303,40942:28325,40943:28354,40944:28319,40945:28481,40946:28433,40947:28748,40948:28396,40949:28408,40950:28414,40951:28479,40952:28402,40953:28465,40954:28399,40955:28466,40956:28364,57408:28478,57409:28435,57410:28407,57411:28550,57412:28538,57413:28536,57414:28545,57415:28544,57416:28527,57417:28507,57418:28659,57419:28525,57420:28546,57421:28540,57422:28504,57423:28558,57424:28561,57425:28610,57426:28518,57427:28595,57428:28579,57429:28577,57430:28580,57431:28601,57432:28614,57433:28586,57434:28639,57435:28629,57436:28652,57437:28628,57438:28632,57439:28657,57440:28654,57441:28635,57442:28681,57443:28683,57444:28666,57445:28689,57446:28673,57447:28687,57448:28670,57449:28699,57450:28698,57451:28532,57452:28701,57453:28696,57454:28703,57455:28720,57456:28734,57457:28722,57458:28753,57459:28771,57460:28825,57461:28818,57462:28847,57463:28913,57464:28844,57465:28856,57466:28851,57467:28846,57468:28895,57469:28875,57470:28893,57472:28889,57473:28937,57474:28925,57475:28956,57476:28953,57477:29029,57478:29013,57479:29064,57480:29030,57481:29026,57482:29004,57483:29014,57484:29036,57485:29071,57486:29179,57487:29060,57488:29077,57489:29096,57490:29100,57491:29143,57492:29113,57493:29118,57494:29138,57495:29129,57496:29140,57497:29134,57498:29152,57499:29164,57500:29159,57501:29173,57502:29180,57503:29177,57504:29183,57505:29197,57506:29200,57507:29211,57508:29224,57509:29229,57510:29228,57511:29232,57512:29234,57513:29243,57514:29244,57515:29247,57516:29248,57517:29254,57518:29259,57519:29272,57520:29300,57521:29310,57522:29314,57523:29313,57524:29319,57525:29330,57526:29334,57527:29346,57528:29351,57529:29369,57530:29362,57531:29379,57532:29382,57533:29380,57534:29390,57535:29394,57536:29410,57537:29408,57538:29409,57539:29433,57540:29431,57541:20495,57542:29463,57543:29450,57544:29468,57545:29462,57546:29469,57547:29492,57548:29487,57549:29481,57550:29477,57551:29502,57552:29518,57553:29519,57554:40664,57555:29527,57556:29546,57557:29544,57558:29552,57559:29560,57560:29557,57561:29563,57562:29562,57563:29640,57564:29619,57565:29646,57566:29627,57567:29632,57568:29669,57569:29678,57570:29662,57571:29858,57572:29701,57573:29807,57574:29733,57575:29688,57576:29746,57577:29754,57578:29781,57579:29759,57580:29791,57581:29785,57582:29761,57583:29788,57584:29801,57585:29808,57586:29795,57587:29802,57588:29814,57589:29822,57590:29835,57591:29854,57592:29863,57593:29898,57594:29903,57595:29908,57596:29681,57664:29920,57665:29923,57666:29927,57667:29929,57668:29934,57669:29938,57670:29936,57671:29937,57672:29944,57673:29943,57674:29956,57675:29955,57676:29957,57677:29964,57678:29966,57679:29965,57680:29973,57681:29971,57682:29982,57683:29990,57684:29996,57685:30012,57686:30020,57687:30029,57688:30026,57689:30025,57690:30043,57691:30022,57692:30042,57693:30057,57694:30052,57695:30055,57696:30059,57697:30061,57698:30072,57699:30070,57700:30086,57701:30087,57702:30068,57703:30090,57704:30089,57705:30082,57706:30100,57707:30106,57708:30109,57709:30117,57710:30115,57711:30146,57712:30131,57713:30147,57714:30133,57715:30141,57716:30136,57717:30140,57718:30129,57719:30157,57720:30154,57721:30162,57722:30169,57723:30179,57724:30174,57725:30206,57726:30207,57728:30204,57729:30209,57730:30192,57731:30202,57732:30194,57733:30195,57734:30219,57735:30221,57736:30217,57737:30239,57738:30247,57739:30240,57740:30241,57741:30242,57742:30244,57743:30260,57744:30256,57745:30267,57746:30279,57747:30280,57748:30278,57749:30300,57750:30296,57751:30305,57752:30306,57753:30312,57754:30313,57755:30314,57756:30311,57757:30316,57758:30320,57759:30322,57760:30326,57761:30328,57762:30332,57763:30336,57764:30339,57765:30344,57766:30347,57767:30350,57768:30358,57769:30355,57770:30361,57771:30362,57772:30384,57773:30388,57774:30392,57775:30393,57776:30394,57777:30402,57778:30413,57779:30422,57780:30418,57781:30430,57782:30433,57783:30437,57784:30439,57785:30442,57786:34351,57787:30459,57788:30472,57789:30471,57790:30468,57791:30505,57792:30500,57793:30494,57794:30501,57795:30502,57796:30491,57797:30519,57798:30520,57799:30535,57800:30554,57801:30568,57802:30571,57803:30555,57804:30565,57805:30591,57806:30590,57807:30585,57808:30606,57809:30603,57810:30609,57811:30624,57812:30622,57813:30640,57814:30646,57815:30649,57816:30655,57817:30652,57818:30653,57819:30651,57820:30663,57821:30669,57822:30679,57823:30682,57824:30684,57825:30691,57826:30702,57827:30716,57828:30732,57829:30738,57830:31014,57831:30752,57832:31018,57833:30789,57834:30862,57835:30836,57836:30854,57837:30844,57838:30874,57839:30860,57840:30883,57841:30901,57842:30890,57843:30895,57844:30929,57845:30918,57846:30923,57847:30932,57848:30910,57849:30908,57850:30917,57851:30922,57852:30956,57920:30951,57921:30938,57922:30973,57923:30964,57924:30983,57925:30994,57926:30993,57927:31001,57928:31020,57929:31019,57930:31040,57931:31072,57932:31063,57933:31071,57934:31066,57935:31061,57936:31059,57937:31098,57938:31103,57939:31114,57940:31133,57941:31143,57942:40779,57943:31146,57944:31150,57945:31155,57946:31161,57947:31162,57948:31177,57949:31189,57950:31207,57951:31212,57952:31201,57953:31203,57954:31240,57955:31245,57956:31256,57957:31257,57958:31264,57959:31263,57960:31104,57961:31281,57962:31291,57963:31294,57964:31287,57965:31299,57966:31319,57967:31305,57968:31329,57969:31330,57970:31337,57971:40861,57972:31344,57973:31353,57974:31357,57975:31368,57976:31383,57977:31381,57978:31384,57979:31382,57980:31401,57981:31432,57982:31408,57984:31414,57985:31429,57986:31428,57987:31423,57988:36995,57989:31431,57990:31434,57991:31437,57992:31439,57993:31445,57994:31443,57995:31449,57996:31450,57997:31453,57998:31457,57999:31458,58e3:31462,58001:31469,58002:31472,58003:31490,58004:31503,58005:31498,58006:31494,58007:31539,58008:31512,58009:31513,58010:31518,58011:31541,58012:31528,58013:31542,58014:31568,58015:31610,58016:31492,58017:31565,58018:31499,58019:31564,58020:31557,58021:31605,58022:31589,58023:31604,58024:31591,58025:31600,58026:31601,58027:31596,58028:31598,58029:31645,58030:31640,58031:31647,58032:31629,58033:31644,58034:31642,58035:31627,58036:31634,58037:31631,58038:31581,58039:31641,58040:31691,58041:31681,58042:31692,58043:31695,58044:31668,58045:31686,58046:31709,58047:31721,58048:31761,58049:31764,58050:31718,58051:31717,58052:31840,58053:31744,58054:31751,58055:31763,58056:31731,58057:31735,58058:31767,58059:31757,58060:31734,58061:31779,58062:31783,58063:31786,58064:31775,58065:31799,58066:31787,58067:31805,58068:31820,58069:31811,58070:31828,58071:31823,58072:31808,58073:31824,58074:31832,58075:31839,58076:31844,58077:31830,58078:31845,58079:31852,58080:31861,58081:31875,58082:31888,58083:31908,58084:31917,58085:31906,58086:31915,58087:31905,58088:31912,58089:31923,58090:31922,58091:31921,58092:31918,58093:31929,58094:31933,58095:31936,58096:31941,58097:31938,58098:31960,58099:31954,58100:31964,58101:31970,58102:39739,58103:31983,58104:31986,58105:31988,58106:31990,58107:31994,58108:32006,58176:32002,58177:32028,58178:32021,58179:32010,58180:32069,58181:32075,58182:32046,58183:32050,58184:32063,58185:32053,58186:32070,58187:32115,58188:32086,58189:32078,58190:32114,58191:32104,58192:32110,58193:32079,58194:32099,58195:32147,58196:32137,58197:32091,58198:32143,58199:32125,58200:32155,58201:32186,58202:32174,58203:32163,58204:32181,58205:32199,58206:32189,58207:32171,58208:32317,58209:32162,58210:32175,58211:32220,58212:32184,58213:32159,58214:32176,58215:32216,58216:32221,58217:32228,58218:32222,58219:32251,58220:32242,58221:32225,58222:32261,58223:32266,58224:32291,58225:32289,58226:32274,58227:32305,58228:32287,58229:32265,58230:32267,58231:32290,58232:32326,58233:32358,58234:32315,58235:32309,58236:32313,58237:32323,58238:32311,58240:32306,58241:32314,58242:32359,58243:32349,58244:32342,58245:32350,58246:32345,58247:32346,58248:32377,58249:32362,58250:32361,58251:32380,58252:32379,58253:32387,58254:32213,58255:32381,58256:36782,58257:32383,58258:32392,58259:32393,58260:32396,58261:32402,58262:32400,58263:32403,58264:32404,58265:32406,58266:32398,58267:32411,58268:32412,58269:32568,58270:32570,58271:32581,58272:32588,58273:32589,58274:32590,58275:32592,58276:32593,58277:32597,58278:32596,58279:32600,58280:32607,58281:32608,58282:32616,58283:32617,58284:32615,58285:32632,58286:32642,58287:32646,58288:32643,58289:32648,58290:32647,58291:32652,58292:32660,58293:32670,58294:32669,58295:32666,58296:32675,58297:32687,58298:32690,58299:32697,58300:32686,58301:32694,58302:32696,58303:35697,58304:32709,58305:32710,58306:32714,58307:32725,58308:32724,58309:32737,58310:32742,58311:32745,58312:32755,58313:32761,58314:39132,58315:32774,58316:32772,58317:32779,58318:32786,58319:32792,58320:32793,58321:32796,58322:32801,58323:32808,58324:32831,58325:32827,58326:32842,58327:32838,58328:32850,58329:32856,58330:32858,58331:32863,58332:32866,58333:32872,58334:32883,58335:32882,58336:32880,58337:32886,58338:32889,58339:32893,58340:32895,58341:32900,58342:32902,58343:32901,58344:32923,58345:32915,58346:32922,58347:32941,58348:20880,58349:32940,58350:32987,58351:32997,58352:32985,58353:32989,58354:32964,58355:32986,58356:32982,58357:33033,58358:33007,58359:33009,58360:33051,58361:33065,58362:33059,58363:33071,58364:33099,58432:38539,58433:33094,58434:33086,58435:33107,58436:33105,58437:33020,58438:33137,58439:33134,58440:33125,58441:33126,58442:33140,58443:33155,58444:33160,58445:33162,58446:33152,58447:33154,58448:33184,58449:33173,58450:33188,58451:33187,58452:33119,58453:33171,58454:33193,58455:33200,58456:33205,58457:33214,58458:33208,58459:33213,58460:33216,58461:33218,58462:33210,58463:33225,58464:33229,58465:33233,58466:33241,58467:33240,58468:33224,58469:33242,58470:33247,58471:33248,58472:33255,58473:33274,58474:33275,58475:33278,58476:33281,58477:33282,58478:33285,58479:33287,58480:33290,58481:33293,58482:33296,58483:33302,58484:33321,58485:33323,58486:33336,58487:33331,58488:33344,58489:33369,58490:33368,58491:33373,58492:33370,58493:33375,58494:33380,58496:33378,58497:33384,58498:33386,58499:33387,58500:33326,58501:33393,58502:33399,58503:33400,58504:33406,58505:33421,58506:33426,58507:33451,58508:33439,58509:33467,58510:33452,58511:33505,58512:33507,58513:33503,58514:33490,58515:33524,58516:33523,58517:33530,58518:33683,58519:33539,58520:33531,58521:33529,58522:33502,58523:33542,58524:33500,58525:33545,58526:33497,58527:33589,58528:33588,58529:33558,58530:33586,58531:33585,58532:33600,58533:33593,58534:33616,58535:33605,58536:33583,58537:33579,58538:33559,58539:33560,58540:33669,58541:33690,58542:33706,58543:33695,58544:33698,58545:33686,58546:33571,58547:33678,58548:33671,58549:33674,58550:33660,58551:33717,58552:33651,58553:33653,58554:33696,58555:33673,58556:33704,58557:33780,58558:33811,58559:33771,58560:33742,58561:33789,58562:33795,58563:33752,58564:33803,58565:33729,58566:33783,58567:33799,58568:33760,58569:33778,58570:33805,58571:33826,58572:33824,58573:33725,58574:33848,58575:34054,58576:33787,58577:33901,58578:33834,58579:33852,58580:34138,58581:33924,58582:33911,58583:33899,58584:33965,58585:33902,58586:33922,58587:33897,58588:33862,58589:33836,58590:33903,58591:33913,58592:33845,58593:33994,58594:33890,58595:33977,58596:33983,58597:33951,58598:34009,58599:33997,58600:33979,58601:34010,58602:34e3,58603:33985,58604:33990,58605:34006,58606:33953,58607:34081,58608:34047,58609:34036,58610:34071,58611:34072,58612:34092,58613:34079,58614:34069,58615:34068,58616:34044,58617:34112,58618:34147,58619:34136,58620:34120,58688:34113,58689:34306,58690:34123,58691:34133,58692:34176,58693:34212,58694:34184,58695:34193,58696:34186,58697:34216,58698:34157,58699:34196,58700:34203,58701:34282,58702:34183,58703:34204,58704:34167,58705:34174,58706:34192,58707:34249,58708:34234,58709:34255,58710:34233,58711:34256,58712:34261,58713:34269,58714:34277,58715:34268,58716:34297,58717:34314,58718:34323,58719:34315,58720:34302,58721:34298,58722:34310,58723:34338,58724:34330,58725:34352,58726:34367,58727:34381,58728:20053,58729:34388,58730:34399,58731:34407,58732:34417,58733:34451,58734:34467,58735:34473,58736:34474,58737:34443,58738:34444,58739:34486,58740:34479,58741:34500,58742:34502,58743:34480,58744:34505,58745:34851,58746:34475,58747:34516,58748:34526,58749:34537,58750:34540,58752:34527,58753:34523,58754:34543,58755:34578,58756:34566,58757:34568,58758:34560,58759:34563,58760:34555,58761:34577,58762:34569,58763:34573,58764:34553,58765:34570,58766:34612,58767:34623,58768:34615,58769:34619,58770:34597,58771:34601,58772:34586,58773:34656,58774:34655,58775:34680,58776:34636,58777:34638,58778:34676,58779:34647,58780:34664,58781:34670,58782:34649,58783:34643,58784:34659,58785:34666,58786:34821,58787:34722,58788:34719,58789:34690,58790:34735,58791:34763,58792:34749,58793:34752,58794:34768,58795:38614,58796:34731,58797:34756,58798:34739,58799:34759,58800:34758,58801:34747,58802:34799,58803:34802,58804:34784,58805:34831,58806:34829,58807:34814,58808:34806,58809:34807,58810:34830,58811:34770,58812:34833,58813:34838,58814:34837,58815:34850,58816:34849,58817:34865,58818:34870,58819:34873,58820:34855,58821:34875,58822:34884,58823:34882,58824:34898,58825:34905,58826:34910,58827:34914,58828:34923,58829:34945,58830:34942,58831:34974,58832:34933,58833:34941,58834:34997,58835:34930,58836:34946,58837:34967,58838:34962,58839:34990,58840:34969,58841:34978,58842:34957,58843:34980,58844:34992,58845:35007,58846:34993,58847:35011,58848:35012,58849:35028,58850:35032,58851:35033,58852:35037,58853:35065,58854:35074,58855:35068,58856:35060,58857:35048,58858:35058,58859:35076,58860:35084,58861:35082,58862:35091,58863:35139,58864:35102,58865:35109,58866:35114,58867:35115,58868:35137,58869:35140,58870:35131,58871:35126,58872:35128,58873:35148,58874:35101,58875:35168,58876:35166,58944:35174,58945:35172,58946:35181,58947:35178,58948:35183,58949:35188,58950:35191,58951:35198,58952:35203,58953:35208,58954:35210,58955:35219,58956:35224,58957:35233,58958:35241,58959:35238,58960:35244,58961:35247,58962:35250,58963:35258,58964:35261,58965:35263,58966:35264,58967:35290,58968:35292,58969:35293,58970:35303,58971:35316,58972:35320,58973:35331,58974:35350,58975:35344,58976:35340,58977:35355,58978:35357,58979:35365,58980:35382,58981:35393,58982:35419,58983:35410,58984:35398,58985:35400,58986:35452,58987:35437,58988:35436,58989:35426,58990:35461,58991:35458,58992:35460,58993:35496,58994:35489,58995:35473,58996:35493,58997:35494,58998:35482,58999:35491,59e3:35524,59001:35533,59002:35522,59003:35546,59004:35563,59005:35571,59006:35559,59008:35556,59009:35569,59010:35604,59011:35552,59012:35554,59013:35575,59014:35550,59015:35547,59016:35596,59017:35591,59018:35610,59019:35553,59020:35606,59021:35600,59022:35607,59023:35616,59024:35635,59025:38827,59026:35622,59027:35627,59028:35646,59029:35624,59030:35649,59031:35660,59032:35663,59033:35662,59034:35657,59035:35670,59036:35675,59037:35674,59038:35691,59039:35679,59040:35692,59041:35695,59042:35700,59043:35709,59044:35712,59045:35724,59046:35726,59047:35730,59048:35731,59049:35734,59050:35737,59051:35738,59052:35898,59053:35905,59054:35903,59055:35912,59056:35916,59057:35918,59058:35920,59059:35925,59060:35938,59061:35948,59062:35960,59063:35962,59064:35970,59065:35977,59066:35973,59067:35978,59068:35981,59069:35982,59070:35988,59071:35964,59072:35992,59073:25117,59074:36013,59075:36010,59076:36029,59077:36018,59078:36019,59079:36014,59080:36022,59081:36040,59082:36033,59083:36068,59084:36067,59085:36058,59086:36093,59087:36090,59088:36091,59089:36100,59090:36101,59091:36106,59092:36103,59093:36111,59094:36109,59095:36112,59096:40782,59097:36115,59098:36045,59099:36116,59100:36118,59101:36199,59102:36205,59103:36209,59104:36211,59105:36225,59106:36249,59107:36290,59108:36286,59109:36282,59110:36303,59111:36314,59112:36310,59113:36300,59114:36315,59115:36299,59116:36330,59117:36331,59118:36319,59119:36323,59120:36348,59121:36360,59122:36361,59123:36351,59124:36381,59125:36382,59126:36368,59127:36383,59128:36418,59129:36405,59130:36400,59131:36404,59132:36426,59200:36423,59201:36425,59202:36428,59203:36432,59204:36424,59205:36441,59206:36452,59207:36448,59208:36394,59209:36451,59210:36437,59211:36470,59212:36466,59213:36476,59214:36481,59215:36487,59216:36485,59217:36484,59218:36491,59219:36490,59220:36499,59221:36497,59222:36500,59223:36505,59224:36522,59225:36513,59226:36524,59227:36528,59228:36550,59229:36529,59230:36542,59231:36549,59232:36552,59233:36555,59234:36571,59235:36579,59236:36604,59237:36603,59238:36587,59239:36606,59240:36618,59241:36613,59242:36629,59243:36626,59244:36633,59245:36627,59246:36636,59247:36639,59248:36635,59249:36620,59250:36646,59251:36659,59252:36667,59253:36665,59254:36677,59255:36674,59256:36670,59257:36684,59258:36681,59259:36678,59260:36686,59261:36695,59262:36700,59264:36706,59265:36707,59266:36708,59267:36764,59268:36767,59269:36771,59270:36781,59271:36783,59272:36791,59273:36826,59274:36837,59275:36834,59276:36842,59277:36847,59278:36999,59279:36852,59280:36869,59281:36857,59282:36858,59283:36881,59284:36885,59285:36897,59286:36877,59287:36894,59288:36886,59289:36875,59290:36903,59291:36918,59292:36917,59293:36921,59294:36856,59295:36943,59296:36944,59297:36945,59298:36946,59299:36878,59300:36937,59301:36926,59302:36950,59303:36952,59304:36958,59305:36968,59306:36975,59307:36982,59308:38568,59309:36978,59310:36994,59311:36989,59312:36993,59313:36992,59314:37002,59315:37001,59316:37007,59317:37032,59318:37039,59319:37041,59320:37045,59321:37090,59322:37092,59323:25160,59324:37083,59325:37122,59326:37138,59327:37145,59328:37170,59329:37168,59330:37194,59331:37206,59332:37208,59333:37219,59334:37221,59335:37225,59336:37235,59337:37234,59338:37259,59339:37257,59340:37250,59341:37282,59342:37291,59343:37295,59344:37290,59345:37301,59346:37300,59347:37306,59348:37312,59349:37313,59350:37321,59351:37323,59352:37328,59353:37334,59354:37343,59355:37345,59356:37339,59357:37372,59358:37365,59359:37366,59360:37406,59361:37375,59362:37396,59363:37420,59364:37397,59365:37393,59366:37470,59367:37463,59368:37445,59369:37449,59370:37476,59371:37448,59372:37525,59373:37439,59374:37451,59375:37456,59376:37532,59377:37526,59378:37523,59379:37531,59380:37466,59381:37583,59382:37561,59383:37559,59384:37609,59385:37647,59386:37626,59387:37700,59388:37678,59456:37657,59457:37666,59458:37658,59459:37667,59460:37690,59461:37685,59462:37691,59463:37724,59464:37728,59465:37756,59466:37742,59467:37718,59468:37808,59469:37804,59470:37805,59471:37780,59472:37817,59473:37846,59474:37847,59475:37864,59476:37861,59477:37848,59478:37827,59479:37853,59480:37840,59481:37832,59482:37860,59483:37914,59484:37908,59485:37907,59486:37891,59487:37895,59488:37904,59489:37942,59490:37931,59491:37941,59492:37921,59493:37946,59494:37953,59495:37970,59496:37956,59497:37979,59498:37984,59499:37986,59500:37982,59501:37994,59502:37417,59503:38e3,59504:38005,59505:38007,59506:38013,59507:37978,59508:38012,59509:38014,59510:38017,59511:38015,59512:38274,59513:38279,59514:38282,59515:38292,59516:38294,59517:38296,59518:38297,59520:38304,59521:38312,59522:38311,59523:38317,59524:38332,59525:38331,59526:38329,59527:38334,59528:38346,59529:28662,59530:38339,59531:38349,59532:38348,59533:38357,59534:38356,59535:38358,59536:38364,59537:38369,59538:38373,59539:38370,59540:38433,59541:38440,59542:38446,59543:38447,59544:38466,59545:38476,59546:38479,59547:38475,59548:38519,59549:38492,59550:38494,59551:38493,59552:38495,59553:38502,59554:38514,59555:38508,59556:38541,59557:38552,59558:38549,59559:38551,59560:38570,59561:38567,59562:38577,59563:38578,59564:38576,59565:38580,59566:38582,59567:38584,59568:38585,59569:38606,59570:38603,59571:38601,59572:38605,59573:35149,59574:38620,59575:38669,59576:38613,59577:38649,59578:38660,59579:38662,59580:38664,59581:38675,59582:38670,59583:38673,59584:38671,59585:38678,59586:38681,59587:38692,59588:38698,59589:38704,59590:38713,59591:38717,59592:38718,59593:38724,59594:38726,59595:38728,59596:38722,59597:38729,59598:38748,59599:38752,59600:38756,59601:38758,59602:38760,59603:21202,59604:38763,59605:38769,59606:38777,59607:38789,59608:38780,59609:38785,59610:38778,59611:38790,59612:38795,59613:38799,59614:38800,59615:38812,59616:38824,59617:38822,59618:38819,59619:38835,59620:38836,59621:38851,59622:38854,59623:38856,59624:38859,59625:38876,59626:38893,59627:40783,59628:38898,59629:31455,59630:38902,59631:38901,59632:38927,59633:38924,59634:38968,59635:38948,59636:38945,59637:38967,59638:38973,59639:38982,59640:38991,59641:38987,59642:39019,59643:39023,59644:39024,59712:39025,59713:39028,59714:39027,59715:39082,59716:39087,59717:39089,59718:39094,59719:39108,59720:39107,59721:39110,59722:39145,59723:39147,59724:39171,59725:39177,59726:39186,59727:39188,59728:39192,59729:39201,59730:39197,59731:39198,59732:39204,59733:39200,59734:39212,59735:39214,59736:39229,59737:39230,59738:39234,59739:39241,59740:39237,59741:39248,59742:39243,59743:39249,59744:39250,59745:39244,59746:39253,59747:39319,59748:39320,59749:39333,59750:39341,59751:39342,59752:39356,59753:39391,59754:39387,59755:39389,59756:39384,59757:39377,59758:39405,59759:39406,59760:39409,59761:39410,59762:39419,59763:39416,59764:39425,59765:39439,59766:39429,59767:39394,59768:39449,59769:39467,59770:39479,59771:39493,59772:39490,59773:39488,59774:39491,59776:39486,59777:39509,59778:39501,59779:39515,59780:39511,59781:39519,59782:39522,59783:39525,59784:39524,59785:39529,59786:39531,59787:39530,59788:39597,59789:39600,59790:39612,59791:39616,59792:39631,59793:39633,59794:39635,59795:39636,59796:39646,59797:39647,59798:39650,59799:39651,59800:39654,59801:39663,59802:39659,59803:39662,59804:39668,59805:39665,59806:39671,59807:39675,59808:39686,59809:39704,59810:39706,59811:39711,59812:39714,59813:39715,59814:39717,59815:39719,59816:39720,59817:39721,59818:39722,59819:39726,59820:39727,59821:39730,59822:39748,59823:39747,59824:39759,59825:39757,59826:39758,59827:39761,59828:39768,59829:39796,59830:39827,59831:39811,59832:39825,59833:39830,59834:39831,59835:39839,59836:39840,59837:39848,59838:39860,59839:39872,59840:39882,59841:39865,59842:39878,59843:39887,59844:39889,59845:39890,59846:39907,59847:39906,59848:39908,59849:39892,59850:39905,59851:39994,59852:39922,59853:39921,59854:39920,59855:39957,59856:39956,59857:39945,59858:39955,59859:39948,59860:39942,59861:39944,59862:39954,59863:39946,59864:39940,59865:39982,59866:39963,59867:39973,59868:39972,59869:39969,59870:39984,59871:40007,59872:39986,59873:40006,59874:39998,59875:40026,59876:40032,59877:40039,59878:40054,59879:40056,59880:40167,59881:40172,59882:40176,59883:40201,59884:40200,59885:40171,59886:40195,59887:40198,59888:40234,59889:40230,59890:40367,59891:40227,59892:40223,59893:40260,59894:40213,59895:40210,59896:40257,59897:40255,59898:40254,59899:40262,59900:40264,59968:40285,59969:40286,59970:40292,59971:40273,59972:40272,59973:40281,59974:40306,59975:40329,59976:40327,59977:40363,59978:40303,59979:40314,59980:40346,59981:40356,59982:40361,59983:40370,59984:40388,59985:40385,59986:40379,59987:40376,59988:40378,59989:40390,59990:40399,59991:40386,59992:40409,59993:40403,59994:40440,59995:40422,59996:40429,59997:40431,59998:40445,59999:40474,6e4:40475,60001:40478,60002:40565,60003:40569,60004:40573,60005:40577,60006:40584,60007:40587,60008:40588,60009:40594,60010:40597,60011:40593,60012:40605,60013:40613,60014:40617,60015:40632,60016:40618,60017:40621,60018:38753,60019:40652,60020:40654,60021:40655,60022:40656,60023:40660,60024:40668,60025:40670,60026:40669,60027:40672,60028:40677,60029:40680,60030:40687,60032:40692,60033:40694,60034:40695,60035:40697,60036:40699,60037:40700,60038:40701,60039:40711,60040:40712,60041:30391,60042:40725,60043:40737,60044:40748,60045:40766,60046:40778,60047:40786,60048:40788,60049:40803,60050:40799,60051:40800,60052:40801,60053:40806,60054:40807,60055:40812,60056:40810,60057:40823,60058:40818,60059:40822,60060:40853,60061:40860,60062:40864,60063:22575,60064:27079,60065:36953,60066:29796,60067:20956,60068:29081,60736:32394,60737:35100,60738:37704,60739:37512,60740:34012,60741:20425,60742:28859,60743:26161,60744:26824,60745:37625,60746:26363,60747:24389,60748:20008,60749:20193,60750:20220,60751:20224,60752:20227,60753:20281,60754:20310,60755:20370,60756:20362,60757:20378,60758:20372,60759:20429,60760:20544,60761:20514,60762:20479,60763:20510,60764:20550,60765:20592,60766:20546,60767:20628,60768:20724,60769:20696,60770:20810,60771:20836,60772:20893,60773:20926,60774:20972,60775:21013,60776:21148,60777:21158,60778:21184,60779:21211,60780:21248,60781:21255,60782:21284,60783:21362,60784:21395,60785:21426,60786:21469,60787:64014,60788:21660,60789:21642,60790:21673,60791:21759,60792:21894,60793:22361,60794:22373,60795:22444,60796:22472,60797:22471,60798:64015,60800:64016,60801:22686,60802:22706,60803:22795,60804:22867,60805:22875,60806:22877,60807:22883,60808:22948,60809:22970,60810:23382,60811:23488,60812:29999,60813:23512,60814:23532,60815:23582,60816:23718,60817:23738,60818:23797,60819:23847,60820:23891,60821:64017,60822:23874,60823:23917,60824:23992,60825:23993,60826:24016,60827:24353,60828:24372,60829:24423,60830:24503,60831:24542,60832:24669,60833:24709,60834:24714,60835:24798,60836:24789,60837:24864,60838:24818,60839:24849,60840:24887,60841:24880,60842:24984,60843:25107,60844:25254,60845:25589,60846:25696,60847:25757,60848:25806,60849:25934,60850:26112,60851:26133,60852:26171,60853:26121,60854:26158,60855:26142,60856:26148,60857:26213,60858:26199,60859:26201,60860:64018,60861:26227,60862:26265,60863:26272,60864:26290,60865:26303,60866:26362,60867:26382,60868:63785,60869:26470,60870:26555,60871:26706,60872:26560,60873:26625,60874:26692,60875:26831,60876:64019,60877:26984,60878:64020,60879:27032,60880:27106,60881:27184,60882:27243,60883:27206,60884:27251,60885:27262,60886:27362,60887:27364,60888:27606,60889:27711,60890:27740,60891:27782,60892:27759,60893:27866,60894:27908,60895:28039,60896:28015,60897:28054,60898:28076,60899:28111,60900:28152,60901:28146,60902:28156,60903:28217,60904:28252,60905:28199,60906:28220,60907:28351,60908:28552,60909:28597,60910:28661,60911:28677,60912:28679,60913:28712,60914:28805,60915:28843,60916:28943,60917:28932,60918:29020,60919:28998,60920:28999,60921:64021,60922:29121,60923:29182,60924:29361,60992:29374,60993:29476,60994:64022,60995:29559,60996:29629,60997:29641,60998:29654,60999:29667,61e3:29650,61001:29703,61002:29685,61003:29734,61004:29738,61005:29737,61006:29742,61007:29794,61008:29833,61009:29855,61010:29953,61011:30063,61012:30338,61013:30364,61014:30366,61015:30363,61016:30374,61017:64023,61018:30534,61019:21167,61020:30753,61021:30798,61022:30820,61023:30842,61024:31024,61025:64024,61026:64025,61027:64026,61028:31124,61029:64027,61030:31131,61031:31441,61032:31463,61033:64028,61034:31467,61035:31646,61036:64029,61037:32072,61038:32092,61039:32183,61040:32160,61041:32214,61042:32338,61043:32583,61044:32673,61045:64030,61046:33537,61047:33634,61048:33663,61049:33735,61050:33782,61051:33864,61052:33972,61053:34131,61054:34137,61056:34155,61057:64031,61058:34224,61059:64032,61060:64033,61061:34823,61062:35061,61063:35346,61064:35383,61065:35449,61066:35495,61067:35518,61068:35551,61069:64034,61070:35574,61071:35667,61072:35711,61073:36080,61074:36084,61075:36114,61076:36214,61077:64035,61078:36559,61079:64036,61080:64037,61081:36967,61082:37086,61083:64038,61084:37141,61085:37159,61086:37338,61087:37335,61088:37342,61089:37357,61090:37358,61091:37348,61092:37349,61093:37382,61094:37392,61095:37386,61096:37434,61097:37440,61098:37436,61099:37454,61100:37465,61101:37457,61102:37433,61103:37479,61104:37543,61105:37495,61106:37496,61107:37607,61108:37591,61109:37593,61110:37584,61111:64039,61112:37589,61113:37600,61114:37587,61115:37669,61116:37665,61117:37627,61118:64040,61119:37662,61120:37631,61121:37661,61122:37634,61123:37744,61124:37719,61125:37796,61126:37830,61127:37854,61128:37880,61129:37937,61130:37957,61131:37960,61132:38290,61133:63964,61134:64041,61135:38557,61136:38575,61137:38707,61138:38715,61139:38723,61140:38733,61141:38735,61142:38737,61143:38741,61144:38999,61145:39013,61146:64042,61147:64043,61148:39207,61149:64044,61150:39326,61151:39502,61152:39641,61153:39644,61154:39797,61155:39794,61156:39823,61157:39857,61158:39867,61159:39936,61160:40304,61161:40299,61162:64045,61163:40473,61164:40657,61167:8560,61168:8561,61169:8562,61170:8563,61171:8564,61172:8565,61173:8566,61174:8567,61175:8568,61176:8569,61177:65506,61178:65508,61179:65287,61180:65282,61504:57344,61505:57345,61506:57346,61507:57347,61508:57348,61509:57349,61510:57350,61511:57351,61512:57352,61513:57353,61514:57354,61515:57355,61516:57356,61517:57357,61518:57358,61519:57359,61520:57360,61521:57361,61522:57362,61523:57363,61524:57364,61525:57365,61526:57366,61527:57367,61528:57368,61529:57369,61530:57370,61531:57371,61532:57372,61533:57373,61534:57374,61535:57375,61536:57376,61537:57377,61538:57378,61539:57379,61540:57380,61541:57381,61542:57382,61543:57383,61544:57384,61545:57385,61546:57386,61547:57387,61548:57388,61549:57389,61550:57390,61551:57391,61552:57392,61553:57393,61554:57394,61555:57395,61556:57396,61557:57397,61558:57398,61559:57399,61560:57400,61561:57401,61562:57402,61563:57403,61564:57404,61565:57405,61566:57406,61568:57407,61569:57408,61570:57409,61571:57410,61572:57411,61573:57412,61574:57413,61575:57414,61576:57415,61577:57416,61578:57417,61579:57418,61580:57419,61581:57420,61582:57421,61583:57422,61584:57423,61585:57424,61586:57425,61587:57426,61588:57427,61589:57428,61590:57429,61591:57430,61592:57431,61593:57432,61594:57433,61595:57434,61596:57435,61597:57436,61598:57437,61599:57438,61600:57439,61601:57440,61602:57441,61603:57442,61604:57443,61605:57444,61606:57445,61607:57446,61608:57447,61609:57448,61610:57449,61611:57450,61612:57451,61613:57452,61614:57453,61615:57454,61616:57455,61617:57456,61618:57457,61619:57458,61620:57459,61621:57460,61622:57461,61623:57462,61624:57463,61625:57464,61626:57465,61627:57466,61628:57467,61629:57468,61630:57469,61631:57470,61632:57471,61633:57472,61634:57473,61635:57474,61636:57475,61637:57476,61638:57477,61639:57478,61640:57479,61641:57480,61642:57481,61643:57482,61644:57483,61645:57484,61646:57485,61647:57486,61648:57487,61649:57488,61650:57489,61651:57490,61652:57491,61653:57492,61654:57493,61655:57494,61656:57495,61657:57496,61658:57497,61659:57498,61660:57499,61661:57500,61662:57501,61663:57502,61664:57503,61665:57504,61666:57505,61667:57506,61668:57507,61669:57508,61670:57509,61671:57510,61672:57511,61673:57512,61674:57513,61675:57514,61676:57515,61677:57516,61678:57517,61679:57518,61680:57519,61681:57520,61682:57521,61683:57522,61684:57523,61685:57524,61686:57525,61687:57526,61688:57527,61689:57528,61690:57529,61691:57530,61692:57531,61760:57532,61761:57533,61762:57534,61763:57535,61764:57536,61765:57537,61766:57538,61767:57539,61768:57540,61769:57541,61770:57542,61771:57543,61772:57544,61773:57545,61774:57546,61775:57547,61776:57548,61777:57549,61778:57550,61779:57551,61780:57552,61781:57553,61782:57554,61783:57555,61784:57556,61785:57557,61786:57558,61787:57559,61788:57560,61789:57561,61790:57562,61791:57563,61792:57564,61793:57565,61794:57566,61795:57567,61796:57568,61797:57569,61798:57570,61799:57571,61800:57572,61801:57573,61802:57574,61803:57575,61804:57576,61805:57577,61806:57578,61807:57579,61808:57580,61809:57581,61810:57582,61811:57583,61812:57584,61813:57585,61814:57586,61815:57587,61816:57588,61817:57589,61818:57590,61819:57591,61820:57592,61821:57593,61822:57594,61824:57595,61825:57596,61826:57597,61827:57598,61828:57599,61829:57600,61830:57601,61831:57602,61832:57603,61833:57604,61834:57605,61835:57606,61836:57607,61837:57608,61838:57609,61839:57610,61840:57611,61841:57612,61842:57613,61843:57614,61844:57615,61845:57616,61846:57617,61847:57618,61848:57619,61849:57620,61850:57621,61851:57622,61852:57623,61853:57624,61854:57625,61855:57626,61856:57627,61857:57628,61858:57629,61859:57630,61860:57631,61861:57632,61862:57633,61863:57634,61864:57635,61865:57636,61866:57637,61867:57638,61868:57639,61869:57640,61870:57641,61871:57642,61872:57643,61873:57644,61874:57645,61875:57646,61876:57647,61877:57648,61878:57649,61879:57650,61880:57651,61881:57652,61882:57653,61883:57654,61884:57655,61885:57656,61886:57657,61887:57658,61888:57659,61889:57660,61890:57661,61891:57662,61892:57663,61893:57664,61894:57665,61895:57666,61896:57667,61897:57668,61898:57669,61899:57670,61900:57671,61901:57672,61902:57673,61903:57674,61904:57675,61905:57676,61906:57677,61907:57678,61908:57679,61909:57680,61910:57681,61911:57682,61912:57683,61913:57684,61914:57685,61915:57686,61916:57687,61917:57688,61918:57689,61919:57690,61920:57691,61921:57692,61922:57693,61923:57694,61924:57695,61925:57696,61926:57697,61927:57698,61928:57699,61929:57700,61930:57701,61931:57702,61932:57703,61933:57704,61934:57705,61935:57706,61936:57707,61937:57708,61938:57709,61939:57710,61940:57711,61941:57712,61942:57713,61943:57714,61944:57715,61945:57716,61946:57717,61947:57718,61948:57719,62016:57720,62017:57721,62018:57722,62019:57723,62020:57724,62021:57725,62022:57726,62023:57727,62024:57728,62025:57729,62026:57730,62027:57731,62028:57732,62029:57733,62030:57734,62031:57735,62032:57736,62033:57737,62034:57738,62035:57739,62036:57740,62037:57741,62038:57742,62039:57743,62040:57744,62041:57745,62042:57746,62043:57747,62044:57748,62045:57749,62046:57750,62047:57751,62048:57752,62049:57753,62050:57754,62051:57755,62052:57756,62053:57757,62054:57758,62055:57759,62056:57760,62057:57761,62058:57762,62059:57763,62060:57764,62061:57765,62062:57766,62063:57767,62064:57768,62065:57769,62066:57770,62067:57771,62068:57772,62069:57773,62070:57774,62071:57775,62072:57776,62073:57777,62074:57778,62075:57779,62076:57780,62077:57781,62078:57782,62080:57783,62081:57784,62082:57785,62083:57786,62084:57787,62085:57788,62086:57789,62087:57790,62088:57791,62089:57792,62090:57793,62091:57794,62092:57795,62093:57796,62094:57797,62095:57798,62096:57799,62097:57800,62098:57801,62099:57802,62100:57803,62101:57804,62102:57805,62103:57806,62104:57807,62105:57808,62106:57809,62107:57810,62108:57811,62109:57812,62110:57813,62111:57814,62112:57815,62113:57816,62114:57817,62115:57818,62116:57819,62117:57820,62118:57821,62119:57822,62120:57823,62121:57824,62122:57825,62123:57826,62124:57827,62125:57828,62126:57829,62127:57830,62128:57831,62129:57832,62130:57833,62131:57834,62132:57835,62133:57836,62134:57837,62135:57838,62136:57839,62137:57840,62138:57841,62139:57842,62140:57843,62141:57844,62142:57845,62143:57846,62144:57847,62145:57848,62146:57849,62147:57850,62148:57851,62149:57852,62150:57853,62151:57854,62152:57855,62153:57856,62154:57857,62155:57858,62156:57859,62157:57860,62158:57861,62159:57862,62160:57863,62161:57864,62162:57865,62163:57866,62164:57867,62165:57868,62166:57869,62167:57870,62168:57871,62169:57872,62170:57873,62171:57874,62172:57875,62173:57876,62174:57877,62175:57878,62176:57879,62177:57880,62178:57881,62179:57882,62180:57883,62181:57884,62182:57885,62183:57886,62184:57887,62185:57888,62186:57889,62187:57890,62188:57891,62189:57892,62190:57893,62191:57894,62192:57895,62193:57896,62194:57897,62195:57898,62196:57899,62197:57900,62198:57901,62199:57902,62200:57903,62201:57904,62202:57905,62203:57906,62204:57907,62272:57908,62273:57909,62274:57910,62275:57911,62276:57912,62277:57913,62278:57914,62279:57915,62280:57916,62281:57917,62282:57918,62283:57919,62284:57920,62285:57921,62286:57922,62287:57923,62288:57924,62289:57925,62290:57926,62291:57927,62292:57928,62293:57929,62294:57930,62295:57931,62296:57932,62297:57933,62298:57934,62299:57935,62300:57936,62301:57937,62302:57938,62303:57939,62304:57940,62305:57941,62306:57942,62307:57943,62308:57944,62309:57945,62310:57946,62311:57947,62312:57948,62313:57949,62314:57950,62315:57951,62316:57952,62317:57953,62318:57954,62319:57955,62320:57956,62321:57957,62322:57958,62323:57959,62324:57960,62325:57961,62326:57962,62327:57963,62328:57964,62329:57965,62330:57966,62331:57967,62332:57968,62333:57969,62334:57970,62336:57971,62337:57972,62338:57973,62339:57974,62340:57975,62341:57976,62342:57977,62343:57978,62344:57979,62345:57980,62346:57981,62347:57982,62348:57983,62349:57984,62350:57985,62351:57986,62352:57987,62353:57988,62354:57989,62355:57990,62356:57991,62357:57992,62358:57993,62359:57994,62360:57995,62361:57996,62362:57997,62363:57998,62364:57999,62365:58e3,62366:58001,62367:58002,62368:58003,62369:58004,62370:58005,62371:58006,62372:58007,62373:58008,62374:58009,62375:58010,62376:58011,62377:58012,62378:58013,62379:58014,62380:58015,62381:58016,62382:58017,62383:58018,62384:58019,62385:58020,62386:58021,62387:58022,62388:58023,62389:58024,62390:58025,62391:58026,62392:58027,62393:58028,62394:58029,62395:58030,62396:58031,62397:58032,62398:58033,62399:58034,62400:58035,62401:58036,62402:58037,62403:58038,62404:58039,62405:58040,62406:58041,62407:58042,62408:58043,62409:58044,62410:58045,62411:58046,62412:58047,62413:58048,62414:58049,62415:58050,62416:58051,62417:58052,62418:58053,62419:58054,62420:58055,62421:58056,62422:58057,62423:58058,62424:58059,62425:58060,62426:58061,62427:58062,62428:58063,62429:58064,62430:58065,62431:58066,62432:58067,62433:58068,62434:58069,62435:58070,62436:58071,62437:58072,62438:58073,62439:58074,62440:58075,62441:58076,62442:58077,62443:58078,62444:58079,62445:58080,62446:58081,62447:58082,62448:58083,62449:58084,62450:58085,62451:58086,62452:58087,62453:58088,62454:58089,62455:58090,62456:58091,62457:58092,62458:58093,62459:58094,62460:58095,62528:58096,62529:58097,62530:58098,62531:58099,62532:58100,62533:58101,62534:58102,62535:58103,62536:58104,62537:58105,62538:58106,62539:58107,62540:58108,62541:58109,62542:58110,62543:58111,62544:58112,62545:58113,62546:58114,62547:58115,62548:58116,62549:58117,62550:58118,62551:58119,62552:58120,62553:58121,62554:58122,62555:58123,62556:58124,62557:58125,62558:58126,62559:58127,62560:58128,62561:58129,62562:58130,62563:58131,62564:58132,62565:58133,62566:58134,62567:58135,62568:58136,62569:58137,62570:58138,62571:58139,62572:58140,62573:58141,62574:58142,62575:58143,62576:58144,62577:58145,62578:58146,62579:58147,62580:58148,62581:58149,62582:58150,62583:58151,62584:58152,62585:58153,62586:58154,62587:58155,62588:58156,62589:58157,62590:58158,62592:58159,62593:58160,62594:58161,62595:58162,62596:58163,62597:58164,62598:58165,62599:58166,62600:58167,62601:58168,62602:58169,62603:58170,62604:58171,62605:58172,62606:58173,62607:58174,62608:58175,62609:58176,62610:58177,62611:58178,62612:58179,62613:58180,62614:58181,62615:58182,62616:58183,62617:58184,62618:58185,62619:58186,62620:58187,62621:58188,62622:58189,62623:58190,62624:58191,62625:58192,62626:58193,62627:58194,62628:58195,62629:58196,62630:58197,62631:58198,62632:58199,62633:58200,62634:58201,62635:58202,62636:58203,62637:58204,62638:58205,62639:58206,62640:58207,62641:58208,62642:58209,62643:58210,62644:58211,62645:58212,62646:58213,62647:58214,62648:58215,62649:58216,62650:58217,62651:58218,62652:58219,62653:58220,62654:58221,62655:58222,62656:58223,62657:58224,62658:58225,62659:58226,62660:58227,62661:58228,62662:58229,62663:58230,62664:58231,62665:58232,62666:58233,62667:58234,62668:58235,62669:58236,62670:58237,62671:58238,62672:58239,62673:58240,62674:58241,62675:58242,62676:58243,62677:58244,62678:58245,62679:58246,62680:58247,62681:58248,62682:58249,62683:58250,62684:58251,62685:58252,62686:58253,62687:58254,62688:58255,62689:58256,62690:58257,62691:58258,62692:58259,62693:58260,62694:58261,62695:58262,62696:58263,62697:58264,62698:58265,62699:58266,62700:58267,62701:58268,62702:58269,62703:58270,62704:58271,62705:58272,62706:58273,62707:58274,62708:58275,62709:58276,62710:58277,62711:58278,62712:58279,62713:58280,62714:58281,62715:58282,62716:58283,62784:58284,62785:58285,62786:58286,62787:58287,62788:58288,62789:58289,62790:58290,62791:58291,62792:58292,62793:58293,62794:58294,62795:58295,62796:58296,62797:58297,62798:58298,62799:58299,62800:58300,62801:58301,62802:58302,62803:58303,62804:58304,62805:58305,62806:58306,62807:58307,62808:58308,62809:58309,62810:58310,62811:58311,62812:58312,62813:58313,62814:58314,62815:58315,62816:58316,62817:58317,62818:58318,62819:58319,62820:58320,62821:58321,62822:58322,62823:58323,62824:58324,62825:58325,62826:58326,62827:58327,62828:58328,62829:58329,62830:58330,62831:58331,62832:58332,62833:58333,62834:58334,62835:58335,62836:58336,62837:58337,62838:58338,62839:58339,62840:58340,62841:58341,62842:58342,62843:58343,62844:58344,62845:58345,62846:58346,62848:58347,62849:58348,62850:58349,62851:58350,62852:58351,62853:58352,62854:58353,62855:58354,62856:58355,62857:58356,62858:58357,62859:58358,62860:58359,62861:58360,62862:58361,62863:58362,62864:58363,62865:58364,62866:58365,62867:58366,62868:58367,62869:58368,62870:58369,62871:58370,62872:58371,62873:58372,62874:58373,62875:58374,62876:58375,62877:58376,62878:58377,62879:58378,62880:58379,62881:58380,62882:58381,62883:58382,62884:58383,62885:58384,62886:58385,62887:58386,62888:58387,62889:58388,62890:58389,62891:58390,62892:58391,62893:58392,62894:58393,62895:58394,62896:58395,62897:58396,62898:58397,62899:58398,62900:58399,62901:58400,62902:58401,62903:58402,62904:58403,62905:58404,62906:58405,62907:58406,62908:58407,62909:58408,62910:58409,62911:58410,62912:58411,62913:58412,62914:58413,62915:58414,62916:58415,62917:58416,62918:58417,62919:58418,62920:58419,62921:58420,62922:58421,62923:58422,62924:58423,62925:58424,62926:58425,62927:58426,62928:58427,62929:58428,62930:58429,62931:58430,62932:58431,62933:58432,62934:58433,62935:58434,62936:58435,62937:58436,62938:58437,62939:58438,62940:58439,62941:58440,62942:58441,62943:58442,62944:58443,62945:58444,62946:58445,62947:58446,62948:58447,62949:58448,62950:58449,62951:58450,62952:58451,62953:58452,62954:58453,62955:58454,62956:58455,62957:58456,62958:58457,62959:58458,62960:58459,62961:58460,62962:58461,62963:58462,62964:58463,62965:58464,62966:58465,62967:58466,62968:58467,62969:58468,62970:58469,62971:58470,62972:58471,63040:58472,63041:58473,63042:58474,63043:58475,63044:58476,63045:58477,63046:58478,63047:58479,63048:58480,63049:58481,63050:58482,63051:58483,63052:58484,63053:58485,63054:58486,63055:58487,63056:58488,63057:58489,63058:58490,63059:58491,63060:58492,63061:58493,63062:58494,63063:58495,63064:58496,63065:58497,63066:58498,63067:58499,63068:58500,63069:58501,63070:58502,63071:58503,63072:58504,63073:58505,63074:58506,63075:58507,63076:58508,63077:58509,63078:58510,63079:58511,63080:58512,63081:58513,63082:58514,63083:58515,63084:58516,63085:58517,63086:58518,63087:58519,63088:58520,63089:58521,63090:58522,63091:58523,63092:58524,63093:58525,63094:58526,63095:58527,63096:58528,63097:58529,63098:58530,63099:58531,63100:58532,63101:58533,63102:58534,63104:58535,63105:58536,63106:58537,63107:58538,63108:58539,63109:58540,63110:58541,63111:58542,63112:58543,63113:58544,63114:58545,63115:58546,63116:58547,63117:58548,63118:58549,63119:58550,63120:58551,63121:58552,63122:58553,63123:58554,63124:58555,63125:58556,63126:58557,63127:58558,63128:58559,63129:58560,63130:58561,63131:58562,63132:58563,63133:58564,63134:58565,63135:58566,63136:58567,63137:58568,63138:58569,63139:58570,63140:58571,63141:58572,63142:58573,63143:58574,63144:58575,63145:58576,63146:58577,63147:58578,63148:58579,63149:58580,63150:58581,63151:58582,63152:58583,63153:58584,63154:58585,63155:58586,63156:58587,63157:58588,63158:58589,63159:58590,63160:58591,63161:58592,63162:58593,63163:58594,63164:58595,63165:58596,63166:58597,63167:58598,63168:58599,63169:58600,63170:58601,63171:58602,63172:58603,63173:58604,63174:58605,63175:58606,63176:58607,63177:58608,63178:58609,63179:58610,63180:58611,63181:58612,63182:58613,63183:58614,63184:58615,63185:58616,63186:58617,63187:58618,63188:58619,63189:58620,63190:58621,63191:58622,63192:58623,63193:58624,63194:58625,63195:58626,63196:58627,63197:58628,63198:58629,63199:58630,63200:58631,63201:58632,63202:58633,63203:58634,63204:58635,63205:58636,63206:58637,63207:58638,63208:58639,63209:58640,63210:58641,63211:58642,63212:58643,63213:58644,63214:58645,63215:58646,63216:58647,63217:58648,63218:58649,63219:58650,63220:58651,63221:58652,63222:58653,63223:58654,63224:58655,63225:58656,63226:58657,63227:58658,63228:58659,63296:58660,63297:58661,63298:58662,63299:58663,63300:58664,63301:58665,63302:58666,63303:58667,63304:58668,63305:58669,63306:58670,63307:58671,63308:58672,63309:58673,63310:58674,63311:58675,63312:58676,63313:58677,63314:58678,63315:58679,63316:58680,63317:58681,63318:58682,63319:58683,63320:58684,63321:58685,63322:58686,63323:58687,63324:58688,63325:58689,63326:58690,63327:58691,63328:58692,63329:58693,63330:58694,63331:58695,63332:58696,63333:58697,63334:58698,63335:58699,63336:58700,63337:58701,63338:58702,63339:58703,63340:58704,63341:58705,63342:58706,63343:58707,63344:58708,63345:58709,63346:58710,63347:58711,63348:58712,63349:58713,63350:58714,63351:58715,63352:58716,63353:58717,63354:58718,63355:58719,63356:58720,63357:58721,63358:58722,63360:58723,63361:58724,63362:58725,63363:58726,63364:58727,63365:58728,63366:58729,63367:58730,63368:58731,63369:58732,63370:58733,63371:58734,63372:58735,63373:58736,63374:58737,63375:58738,63376:58739,63377:58740,63378:58741,63379:58742,63380:58743,63381:58744,63382:58745,63383:58746,63384:58747,63385:58748,63386:58749,63387:58750,63388:58751,63389:58752,63390:58753,63391:58754,63392:58755,63393:58756,63394:58757,63395:58758,63396:58759,63397:58760,63398:58761,63399:58762,63400:58763,63401:58764,63402:58765,63403:58766,63404:58767,63405:58768,63406:58769,63407:58770,63408:58771,63409:58772,63410:58773,63411:58774,63412:58775,63413:58776,63414:58777,63415:58778,63416:58779,63417:58780,63418:58781,63419:58782,63420:58783,63421:58784,63422:58785,63423:58786,63424:58787,63425:58788,63426:58789,63427:58790,63428:58791,63429:58792,63430:58793,63431:58794,63432:58795,63433:58796,63434:58797,63435:58798,63436:58799,63437:58800,63438:58801,63439:58802,63440:58803,63441:58804,63442:58805,63443:58806,63444:58807,63445:58808,63446:58809,63447:58810,63448:58811,63449:58812,63450:58813,63451:58814,63452:58815,63453:58816,63454:58817,63455:58818,63456:58819,63457:58820,63458:58821,63459:58822,63460:58823,63461:58824,63462:58825,63463:58826,63464:58827,63465:58828,63466:58829,63467:58830,63468:58831,63469:58832,63470:58833,63471:58834,63472:58835,63473:58836,63474:58837,63475:58838,63476:58839,63477:58840,63478:58841,63479:58842,63480:58843,63481:58844,63482:58845,63483:58846,63484:58847,63552:58848,63553:58849,63554:58850,63555:58851,63556:58852,63557:58853,63558:58854,63559:58855,63560:58856,63561:58857,63562:58858,63563:58859,63564:58860,63565:58861,63566:58862,63567:58863,63568:58864,63569:58865,63570:58866,63571:58867,63572:58868,63573:58869,63574:58870,63575:58871,63576:58872,63577:58873,63578:58874,63579:58875,63580:58876,63581:58877,63582:58878,63583:58879,63584:58880,63585:58881,63586:58882,63587:58883,63588:58884,63589:58885,63590:58886,63591:58887,63592:58888,63593:58889,63594:58890,63595:58891,63596:58892,63597:58893,63598:58894,63599:58895,63600:58896,63601:58897,63602:58898,63603:58899,63604:58900,63605:58901,63606:58902,63607:58903,63608:58904,63609:58905,63610:58906,63611:58907,63612:58908,63613:58909,63614:58910,63616:58911,63617:58912,63618:58913,63619:58914,63620:58915,63621:58916,63622:58917,63623:58918,63624:58919,63625:58920,63626:58921,63627:58922,63628:58923,63629:58924,63630:58925,63631:58926,63632:58927,63633:58928,63634:58929,63635:58930,63636:58931,63637:58932,63638:58933,63639:58934,63640:58935,63641:58936,63642:58937,63643:58938,63644:58939,63645:58940,63646:58941,63647:58942,63648:58943,63649:58944,63650:58945,63651:58946,63652:58947,63653:58948,63654:58949,63655:58950,63656:58951,63657:58952,63658:58953,63659:58954,63660:58955,63661:58956,63662:58957,63663:58958,63664:58959,63665:58960,63666:58961,63667:58962,63668:58963,63669:58964,63670:58965,63671:58966,63672:58967,63673:58968,63674:58969,63675:58970,63676:58971,63677:58972,63678:58973,63679:58974,63680:58975,63681:58976,63682:58977,63683:58978,63684:58979,63685:58980,63686:58981,63687:58982,63688:58983,63689:58984,63690:58985,63691:58986,63692:58987,63693:58988,63694:58989,63695:58990,63696:58991,63697:58992,63698:58993,63699:58994,63700:58995,63701:58996,63702:58997,63703:58998,63704:58999,63705:59e3,63706:59001,63707:59002,63708:59003,63709:59004,63710:59005,63711:59006,63712:59007,63713:59008,63714:59009,63715:59010,63716:59011,63717:59012,63718:59013,63719:59014,63720:59015,63721:59016,63722:59017,63723:59018,63724:59019,63725:59020,63726:59021,63727:59022,63728:59023,63729:59024,63730:59025,63731:59026,63732:59027,63733:59028,63734:59029,63735:59030,63736:59031,63737:59032,63738:59033,63739:59034,63740:59035,64064:8560,64065:8561,64066:8562,64067:8563,64068:8564,64069:8565,64070:8566,64071:8567,64072:8568,64073:8569,64074:8544,64075:8545,64076:8546,64077:8547,64078:8548,64079:8549,64080:8550,64081:8551,64082:8552,64083:8553,64084:65506,64085:65508,64086:65287,64087:65282,64088:12849,64089:8470,64090:8481,64091:8757,64092:32394,64093:35100,64094:37704,64095:37512,64096:34012,64097:20425,64098:28859,64099:26161,64100:26824,64101:37625,64102:26363,64103:24389,64104:20008,64105:20193,64106:20220,64107:20224,64108:20227,64109:20281,64110:20310,64111:20370,64112:20362,64113:20378,64114:20372,64115:20429,64116:20544,64117:20514,64118:20479,64119:20510,64120:20550,64121:20592,64122:20546,64123:20628,64124:20724,64125:20696,64126:20810,64128:20836,64129:20893,64130:20926,64131:20972,64132:21013,64133:21148,64134:21158,64135:21184,64136:21211,64137:21248,64138:21255,64139:21284,64140:21362,64141:21395,64142:21426,64143:21469,64144:64014,64145:21660,64146:21642,64147:21673,64148:21759,64149:21894,64150:22361,64151:22373,64152:22444,64153:22472,64154:22471,64155:64015,64156:64016,64157:22686,64158:22706,64159:22795,64160:22867,64161:22875,64162:22877,64163:22883,64164:22948,64165:22970,64166:23382,64167:23488,64168:29999,64169:23512,64170:23532,64171:23582,64172:23718,64173:23738,64174:23797,64175:23847,64176:23891,64177:64017,64178:23874,64179:23917,64180:23992,64181:23993,64182:24016,64183:24353,64184:24372,64185:24423,64186:24503,64187:24542,64188:24669,64189:24709,64190:24714,64191:24798,64192:24789,64193:24864,64194:24818,64195:24849,64196:24887,64197:24880,64198:24984,64199:25107,64200:25254,64201:25589,64202:25696,64203:25757,64204:25806,64205:25934,64206:26112,64207:26133,64208:26171,64209:26121,64210:26158,64211:26142,64212:26148,64213:26213,64214:26199,64215:26201,64216:64018,64217:26227,64218:26265,64219:26272,64220:26290,64221:26303,64222:26362,64223:26382,64224:63785,64225:26470,64226:26555,64227:26706,64228:26560,64229:26625,64230:26692,64231:26831,64232:64019,64233:26984,64234:64020,64235:27032,64236:27106,64237:27184,64238:27243,64239:27206,64240:27251,64241:27262,64242:27362,64243:27364,64244:27606,64245:27711,64246:27740,64247:27782,64248:27759,64249:27866,64250:27908,64251:28039,64252:28015,64320:28054,64321:28076,64322:28111,64323:28152,64324:28146,64325:28156,64326:28217,64327:28252,64328:28199,64329:28220,64330:28351,64331:28552,64332:28597,64333:28661,64334:28677,64335:28679,64336:28712,64337:28805,64338:28843,64339:28943,64340:28932,64341:29020,64342:28998,64343:28999,64344:64021,64345:29121,64346:29182,64347:29361,64348:29374,64349:29476,64350:64022,64351:29559,64352:29629,64353:29641,64354:29654,64355:29667,64356:29650,64357:29703,64358:29685,64359:29734,64360:29738,64361:29737,64362:29742,64363:29794,64364:29833,64365:29855,64366:29953,64367:30063,64368:30338,64369:30364,64370:30366,64371:30363,64372:30374,64373:64023,64374:30534,64375:21167,64376:30753,64377:30798,64378:30820,64379:30842,64380:31024,64381:64024,64382:64025,64384:64026,64385:31124,64386:64027,64387:31131,64388:31441,64389:31463,64390:64028,64391:31467,64392:31646,64393:64029,64394:32072,64395:32092,64396:32183,64397:32160,64398:32214,64399:32338,64400:32583,64401:32673,64402:64030,64403:33537,64404:33634,64405:33663,64406:33735,64407:33782,64408:33864,64409:33972,64410:34131,64411:34137,64412:34155,64413:64031,64414:34224,64415:64032,64416:64033,64417:34823,64418:35061,64419:35346,64420:35383,64421:35449,64422:35495,64423:35518,64424:35551,64425:64034,64426:35574,64427:35667,64428:35711,64429:36080,64430:36084,64431:36114,64432:36214,64433:64035,64434:36559,64435:64036,64436:64037,64437:36967,64438:37086,64439:64038,64440:37141,64441:37159,64442:37338,64443:37335,64444:37342,64445:37357,64446:37358,64447:37348,64448:37349,64449:37382,64450:37392,64451:37386,64452:37434,64453:37440,64454:37436,64455:37454,64456:37465,64457:37457,64458:37433,64459:37479,64460:37543,64461:37495,64462:37496,64463:37607,64464:37591,64465:37593,64466:37584,64467:64039,64468:37589,64469:37600,64470:37587,64471:37669,64472:37665,64473:37627,64474:64040,64475:37662,64476:37631,64477:37661,64478:37634,64479:37744,64480:37719,64481:37796,64482:37830,64483:37854,64484:37880,64485:37937,64486:37957,64487:37960,64488:38290,64489:63964,64490:64041,64491:38557,64492:38575,64493:38707,64494:38715,64495:38723,64496:38733,64497:38735,64498:38737,64499:38741,64500:38999,64501:39013,64502:64042,64503:64043,64504:39207,64505:64044,64506:39326,64507:39502,64508:39641,64576:39644,64577:39797,64578:39794,64579:39823,64580:39857,64581:39867,64582:39936,64583:40304,64584:40299,64585:64045,64586:40473,64587:40657},r.prototype={constructor:r,getInt8:function(){var e=this.dv.getInt8(this.offset);return this.offset+=1,e},getInt8Array:function(e){for(var t=[],r=0;r<e;r++)t.push(this.getInt8());return t},getUint8:function(){var e=this.dv.getUint8(this.offset);return this.offset+=1,e},getUint8Array:function(e){for(var t=[],r=0;r<e;r++)t.push(this.getUint8());return t},getInt16:function(){var e=this.dv.getInt16(this.offset,this.littleEndian);return this.offset+=2,e},getInt16Array:function(e){for(var t=[],r=0;r<e;r++)t.push(this.getInt16());return t},getUint16:function(){var e=this.dv.getUint16(this.offset,this.littleEndian);return this.offset+=2,e},getUint16Array:function(e){for(var t=[],r=0;r<e;r++)t.push(this.getUint16());return t},getInt32:function(){var e=this.dv.getInt32(this.offset,this.littleEndian);return this.offset+=4,e},getInt32Array:function(e){for(var t=[],r=0;r<e;r++)t.push(this.getInt32());return t},getUint32:function(){var e=this.dv.getUint32(this.offset,this.littleEndian);return this.offset+=4,e},getUint32Array:function(e){for(var t=[],r=0;r<e;r++)t.push(this.getUint32());return t},getFloat32:function(){var e=this.dv.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e},getFloat32Array:function(e){for(var t=[],r=0;r<e;r++)t.push(this.getFloat32());return t},getFloat64:function(){var e=this.dv.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e},getFloat64Array:function(e){for(var t=[],r=0;r<e;r++)t.push(this.getFloat64());return t},getIndex:function(e,t){switch(e){case 1:return!0===t?this.getUint8():this.getInt8();case 2:return!0===t?this.getUint16():this.getInt16();case 4:return this.getInt32();default:throw"unknown number type "+e+" exception."}},getIndexArray:function(e,t,r){for(var n=[],i=0;i<t;i++)n.push(this.getIndex(e,r));return n},getChars:function(e){for(var t="";e>0;){var r=this.getUint8();if(e--,0===r)break;t+=String.fromCharCode(r)}for(;e>0;)this.getUint8(),e--;return t},getSjisStringsAsUnicode:function(e){for(var t=[];e>0;){var r=this.getUint8();if(e--,0===r)break;t.push(r)}for(;e>0;)this.getUint8(),e--;return this.encoder.s2u(new Uint8Array(t))},getUnicodeStrings:function(e){for(var t="";e>0;){var r=this.getUint16();if(e-=2,0===r)break;t+=String.fromCharCode(r)}for(;e>0;)this.getUint8(),e--;return t},getTextBuffer:function(){var e=this.getUint32();return this.getUnicodeStrings(e)}},n.prototype={constructor:n,leftToRightVector3:function(e){e[2]=-e[2]},leftToRightQuaternion:function(e){e[0]=-e[0],e[1]=-e[1]},leftToRightEuler:function(e){e[0]=-e[0],e[1]=-e[1]},leftToRightIndexOrder:function(e){var t=e[2];e[2]=e[0],e[0]=t},leftToRightVector3Range:function(e,t){var r=-t[2];t[2]=-e[2],e[2]=r},leftToRightEulerRange:function(e,t){var r=-t[0],n=-t[1];t[0]=-e[0],t[1]=-e[1],e[0]=r,e[1]=n}},i.prototype.parsePmd=function(e,t){var n={},i=new r(e);n.metadata={},n.metadata.format="pmd",n.metadata.coordinateSystem="left";var a=function(){var e=n.metadata;if(e.magic=i.getChars(3),"Pmd"!==e.magic)throw"PMD file magic is not Pmd, but "+e.magic;e.version=i.getFloat32(),e.modelName=i.getSjisStringsAsUnicode(20),e.comment=i.getSjisStringsAsUnicode(256)},o=function(){var e=function(){var e={};return e.position=i.getFloat32Array(3),e.normal=i.getFloat32Array(3),e.uv=i.getFloat32Array(2),e.skinIndices=i.getUint16Array(2),e.skinWeights=[i.getUint8()/100],e.skinWeights.push(1-e.skinWeights[0]),e.edgeFlag=i.getUint8(),e},t=n.metadata;t.vertexCount=i.getUint32(),n.vertices=[];for(var r=0;r<t.vertexCount;r++)n.vertices.push(e())},s=function(){var e=function(){var e={};return e.indices=i.getUint16Array(3),e},t=n.metadata;t.faceCount=i.getUint32()/3,n.faces=[];for(var r=0;r<t.faceCount;r++)n.faces.push(e())},l=function(){var e=function(){var e={};return e.diffuse=i.getFloat32Array(4),e.shininess=i.getFloat32(),e.specular=i.getFloat32Array(3),e.ambient=i.getFloat32Array(3),e.toonIndex=i.getInt8(),e.edgeFlag=i.getUint8(),e.faceCount=i.getUint32()/3,e.fileName=i.getSjisStringsAsUnicode(20),e},t=n.metadata;t.materialCount=i.getUint32(),n.materials=[];for(var r=0;r<t.materialCount;r++)n.materials.push(e())},u=function(){var e=function(){var e={};return e.name=i.getSjisStringsAsUnicode(20),e.parentIndex=i.getInt16(),e.tailIndex=i.getInt16(),e.type=i.getUint8(),e.ikIndex=i.getInt16(),e.position=i.getFloat32Array(3),e},t=n.metadata;t.boneCount=i.getUint16(),n.bones=[];for(var r=0;r<t.boneCount;r++)n.bones.push(e())},c=function(){var e=function(){var e={};e.target=i.getUint16(),e.effector=i.getUint16(),e.linkCount=i.getUint8(),e.iteration=i.getUint16(),e.maxAngle=i.getFloat32(),e.links=[];for(var t=0;t<e.linkCount;t++){var r={};r.index=i.getUint16(),e.links.push(r)}return e},t=n.metadata;t.ikCount=i.getUint16(),n.iks=[];for(var r=0;r<t.ikCount;r++)n.iks.push(e())},h=function(){var e=function(){var e={};e.name=i.getSjisStringsAsUnicode(20),e.elementCount=i.getUint32(),e.type=i.getUint8(),e.elements=[];for(var t=0;t<e.elementCount;t++)e.elements.push({index:i.getUint32(),position:i.getFloat32Array(3)});return e},t=n.metadata;t.morphCount=i.getUint16(),n.morphs=[];for(var r=0;r<t.morphCount;r++)n.morphs.push(e())},d=function(){var e=function(){var e={};return e.index=i.getUint16(),e},t=n.metadata;t.morphFrameCount=i.getUint8(),n.morphFrames=[];for(var r=0;r<t.morphFrameCount;r++)n.morphFrames.push(e())},f=function(){var e=function(){var e={};return e.name=i.getSjisStringsAsUnicode(50),e},t=n.metadata;t.boneFrameNameCount=i.getUint8(),n.boneFrameNames=[];for(var r=0;r<t.boneFrameNameCount;r++)n.boneFrameNames.push(e())},p=function(){var e=function(){var e={};return e.boneIndex=i.getInt16(),e.frameIndex=i.getUint8(),e},t=n.metadata;t.boneFrameCount=i.getUint32(),n.boneFrames=[];for(var r=0;r<t.boneFrameCount;r++)n.boneFrames.push(e())},m=function(){var e=n.metadata;e.englishCompatibility=i.getUint8(),e.englishCompatibility>0&&(e.englishModelName=i.getSjisStringsAsUnicode(20),e.englishComment=i.getSjisStringsAsUnicode(256))},g=function(){var e=function(){var e={};return e.name=i.getSjisStringsAsUnicode(20),e},t=n.metadata;if(0!==t.englishCompatibility){n.englishBoneNames=[];for(var r=0;r<t.boneCount;r++)n.englishBoneNames.push(e())}},v=function(){var e=function(){var e={};return e.name=i.getSjisStringsAsUnicode(20),e},t=n.metadata;if(0!==t.englishCompatibility){n.englishMorphNames=[];for(var r=0;r<t.morphCount-1;r++)n.englishMorphNames.push(e())}},y=function(){var e=function(){var e={};return e.name=i.getSjisStringsAsUnicode(50),e},t=n.metadata;if(0!==t.englishCompatibility){n.englishBoneFrameNames=[];for(var r=0;r<t.boneFrameNameCount;r++)n.englishBoneFrameNames.push(e())}},b=function(){var e=function(){var e={};return e.fileName=i.getSjisStringsAsUnicode(100),e};n.toonTextures=[];for(var t=0;t<10;t++)n.toonTextures.push(e())},E=function(){var e=function(){var e={};return e.name=i.getSjisStringsAsUnicode(20),e.boneIndex=i.getInt16(),e.groupIndex=i.getUint8(),e.groupTarget=i.getUint16(),e.shapeType=i.getUint8(),e.width=i.getFloat32(),e.height=i.getFloat32(),e.depth=i.getFloat32(),e.position=i.getFloat32Array(3),e.rotation=i.getFloat32Array(3),e.weight=i.getFloat32(),e.positionDamping=i.getFloat32(),e.rotationDamping=i.getFloat32(),e.restitution=i.getFloat32(),e.friction=i.getFloat32(),e.type=i.getUint8(),e},t=n.metadata;t.rigidBodyCount=i.getUint32(),n.rigidBodies=[];for(var r=0;r<t.rigidBodyCount;r++)n.rigidBodies.push(e())},x=function(){var e=function(){var e={};return e.name=i.getSjisStringsAsUnicode(20),e.rigidBodyIndex1=i.getUint32(),e.rigidBodyIndex2=i.getUint32(),e.position=i.getFloat32Array(3),e.rotation=i.getFloat32Array(3),e.translationLimitation1=i.getFloat32Array(3),e.translationLimitation2=i.getFloat32Array(3),e.rotationLimitation1=i.getFloat32Array(3),e.rotationLimitation2=i.getFloat32Array(3),e.springPosition=i.getFloat32Array(3),e.springRotation=i.getFloat32Array(3),e},t=n.metadata;t.constraintCount=i.getUint32(),n.constraints=[];for(var r=0;r<t.constraintCount;r++)n.constraints.push(e())};return a(),o(),s(),l(),u(),c(),h(),d(),f(),p(),m(),g(),v(),y(),b(),E(),x(),!0===t&&this.leftToRightModel(n),n},i.prototype.parsePmx=function(e,t){var n={},i=new r(e);n.metadata={},n.metadata.format="pmx",n.metadata.coordinateSystem="left";var a=function(){var e=n.metadata;if(e.magic=i.getChars(4),"PMX "!==e.magic)throw"PMX file magic is not PMX , but "+e.magic;if(e.version=i.getFloat32(),2!==e.version&&2.1!==e.version)throw"PMX version "+e.version+" is not supported.";e.headerSize=i.getUint8(),e.encoding=i.getUint8(),e.additionalUvNum=i.getUint8(),e.vertexIndexSize=i.getUint8(),e.textureIndexSize=i.getUint8(),e.materialIndexSize=i.getUint8(),e.boneIndexSize=i.getUint8(),e.morphIndexSize=i.getUint8(),e.rigidBodyIndexSize=i.getUint8(),e.modelName=i.getTextBuffer(),e.englishModelName=i.getTextBuffer(),e.comment=i.getTextBuffer(),e.englishComment=i.getTextBuffer()},o=function(){var e=function(){var e={};e.position=i.getFloat32Array(3),e.normal=i.getFloat32Array(3),e.uv=i.getFloat32Array(2),e.auvs=[];for(var r=0;r<n.metadata.additionalUvNum;r++)e.auvs.push(i.getFloat32Array(4));e.type=i.getUint8();var a=t.boneIndexSize;if(0===e.type)e.skinIndices=i.getIndexArray(a,1),e.skinWeights=[1];else if(1===e.type)e.skinIndices=i.getIndexArray(a,2),e.skinWeights=i.getFloat32Array(1),e.skinWeights.push(1-e.skinWeights[0]);else if(2===e.type)e.skinIndices=i.getIndexArray(a,4),e.skinWeights=i.getFloat32Array(4);else{if(3!==e.type)throw"unsupport bone type "+e.type+" exception.";e.skinIndices=i.getIndexArray(a,2),e.skinWeights=i.getFloat32Array(1),e.skinWeights.push(1-e.skinWeights[0]),e.skinC=i.getFloat32Array(3),e.skinR0=i.getFloat32Array(3),e.skinR1=i.getFloat32Array(3),e.type=1}return e.edgeRatio=i.getFloat32(),e},t=n.metadata;t.vertexCount=i.getUint32(),n.vertices=[];for(var r=0;r<t.vertexCount;r++)n.vertices.push(e())},s=function(){var e=function(){var e={};return e.indices=i.getIndexArray(t.vertexIndexSize,3,!0),e},t=n.metadata;t.faceCount=i.getUint32()/3,n.faces=[];for(var r=0;r<t.faceCount;r++)n.faces.push(e())},l=function(){var e=function(){return i.getTextBuffer()},t=n.metadata;t.textureCount=i.getUint32(),n.textures=[];for(var r=0;r<t.textureCount;r++)n.textures.push(e())},u=function(){var e=function(){var e={};if(e.name=i.getTextBuffer(),e.englishName=i.getTextBuffer(),e.diffuse=i.getFloat32Array(4),e.specular=i.getFloat32Array(3),e.shininess=i.getFloat32(),e.ambient=i.getFloat32Array(3),e.flag=i.getUint8(),e.edgeColor=i.getFloat32Array(4),e.edgeSize=i.getFloat32(),e.textureIndex=i.getIndex(n.metadata.textureIndexSize),e.envTextureIndex=i.getIndex(n.metadata.textureIndexSize),e.envFlag=i.getUint8(),e.toonFlag=i.getUint8(),0===e.toonFlag)e.toonIndex=i.getIndex(n.metadata.textureIndexSize);else{if(1!==e.toonFlag)throw"unknown toon flag "+e.toonFlag+" exception.";e.toonIndex=i.getInt8()}return e.comment=i.getTextBuffer(),e.faceCount=i.getUint32()/3,e},t=n.metadata;t.materialCount=i.getUint32(),n.materials=[];for(var r=0;r<t.materialCount;r++)n.materials.push(e())},c=function(){var e=function(){var e={};if(e.name=i.getTextBuffer(),e.englishName=i.getTextBuffer(),e.position=i.getFloat32Array(3),e.parentIndex=i.getIndex(n.metadata.boneIndexSize),e.transformationClass=i.getUint32(),e.flag=i.getUint16(),1&e.flag?e.connectIndex=i.getIndex(n.metadata.boneIndexSize):e.offsetPosition=i.getFloat32Array(3),256&e.flag||512&e.flag){var t={};t.isLocal=0!=(128&e.flag),t.affectRotation=0!=(256&e.flag),t.affectPosition=0!=(512&e.flag),t.parentIndex=i.getIndex(n.metadata.boneIndexSize),t.ratio=i.getFloat32(),e.grant=t}if(1024&e.flag&&(e.fixAxis=i.getFloat32Array(3)),2048&e.flag&&(e.localXVector=i.getFloat32Array(3),e.localZVector=i.getFloat32Array(3)),8192&e.flag&&(e.key=i.getUint32()),32&e.flag){var r={};r.effector=i.getIndex(n.metadata.boneIndexSize),r.target=null,r.iteration=i.getUint32(),r.maxAngle=i.getFloat32(),r.linkCount=i.getUint32(),r.links=[];for(var a=0;a<r.linkCount;a++){var o={};o.index=i.getIndex(n.metadata.boneIndexSize),o.angleLimitation=i.getUint8(),1===o.angleLimitation&&(o.lowerLimitationAngle=i.getFloat32Array(3),o.upperLimitationAngle=i.getFloat32Array(3)),r.links.push(o)}e.ik=r}return e},t=n.metadata;t.boneCount=i.getUint32(),n.bones=[];for(var r=0;r<t.boneCount;r++)n.bones.push(e())},h=function(){var e=function(){var e={};e.name=i.getTextBuffer(),e.englishName=i.getTextBuffer(),e.panel=i.getUint8(),e.type=i.getUint8(),e.elementCount=i.getUint32(),e.elements=[];for(var t=0;t<e.elementCount;t++)if(0===e.type)(r={}).index=i.getIndex(n.metadata.morphIndexSize),r.ratio=i.getFloat32(),e.elements.push(r);else if(1===e.type)(r={}).index=i.getIndex(n.metadata.vertexIndexSize,!0),r.position=i.getFloat32Array(3),e.elements.push(r);else if(2===e.type)(r={}).index=i.getIndex(n.metadata.boneIndexSize),r.position=i.getFloat32Array(3),r.rotation=i.getFloat32Array(4),e.elements.push(r);else if(3===e.type)(r={}).index=i.getIndex(n.metadata.vertexIndexSize,!0),r.uv=i.getFloat32Array(4),e.elements.push(r);else if(4===e.type);else if(5===e.type);else if(6===e.type);else if(7===e.type);else if(8===e.type){var r;(r={}).index=i.getIndex(n.metadata.materialIndexSize),r.type=i.getUint8(),r.diffuse=i.getFloat32Array(4),r.specular=i.getFloat32Array(3),r.shininess=i.getFloat32(),r.ambient=i.getFloat32Array(3),r.edgeColor=i.getFloat32Array(4),r.edgeSize=i.getFloat32(),r.textureColor=i.getFloat32Array(4),r.sphereTextureColor=i.getFloat32Array(4),r.toonColor=i.getFloat32Array(4),e.elements.push(r)}return e},t=n.metadata;t.morphCount=i.getUint32(),n.morphs=[];for(var r=0;r<t.morphCount;r++)n.morphs.push(e())},d=function(){var e=function(){var e={};e.name=i.getTextBuffer(),e.englishName=i.getTextBuffer(),e.type=i.getUint8(),e.elementCount=i.getUint32(),e.elements=[];for(var t=0;t<e.elementCount;t++){var r={};r.target=i.getUint8(),r.index=0===r.target?i.getIndex(n.metadata.boneIndexSize):i.getIndex(n.metadata.morphIndexSize),e.elements.push(r)}return e},t=n.metadata;t.frameCount=i.getUint32(),n.frames=[];for(var r=0;r<t.frameCount;r++)n.frames.push(e())},f=function(){var e=function(){var e={};return e.name=i.getTextBuffer(),e.englishName=i.getTextBuffer(),e.boneIndex=i.getIndex(n.metadata.boneIndexSize),e.groupIndex=i.getUint8(),e.groupTarget=i.getUint16(),e.shapeType=i.getUint8(),e.width=i.getFloat32(),e.height=i.getFloat32(),e.depth=i.getFloat32(),e.position=i.getFloat32Array(3),e.rotation=i.getFloat32Array(3),e.weight=i.getFloat32(),e.positionDamping=i.getFloat32(),e.rotationDamping=i.getFloat32(),e.restitution=i.getFloat32(),e.friction=i.getFloat32(),e.type=i.getUint8(),e},t=n.metadata;t.rigidBodyCount=i.getUint32(),n.rigidBodies=[];for(var r=0;r<t.rigidBodyCount;r++)n.rigidBodies.push(e())},p=function(){var e=function(){var e={};return e.name=i.getTextBuffer(),e.englishName=i.getTextBuffer(),e.type=i.getUint8(),e.rigidBodyIndex1=i.getIndex(n.metadata.rigidBodyIndexSize),e.rigidBodyIndex2=i.getIndex(n.metadata.rigidBodyIndexSize),e.position=i.getFloat32Array(3),e.rotation=i.getFloat32Array(3),e.translationLimitation1=i.getFloat32Array(3),e.translationLimitation2=i.getFloat32Array(3),e.rotationLimitation1=i.getFloat32Array(3),e.rotationLimitation2=i.getFloat32Array(3),e.springPosition=i.getFloat32Array(3),e.springRotation=i.getFloat32Array(3),e},t=n.metadata;t.constraintCount=i.getUint32(),n.constraints=[];for(var r=0;r<t.constraintCount;r++)n.constraints.push(e())};return a(),o(),s(),l(),u(),c(),h(),d(),f(),p(),!0===t&&this.leftToRightModel(n),n},i.prototype.parseVmd=function(e,t){var n={},i=new r(e);n.metadata={},n.metadata.coordinateSystem="left";var a=function(){var e=n.metadata;if(e.magic=i.getChars(30),"Vocaloid Motion Data 0002"!==e.magic)throw"VMD file magic is not Vocaloid Motion Data 0002, but "+e.magic;e.name=i.getSjisStringsAsUnicode(20)},o=function(){var e=function(){var e={};return e.boneName=i.getSjisStringsAsUnicode(15),e.frameNum=i.getUint32(),e.position=i.getFloat32Array(3),e.rotation=i.getFloat32Array(4),e.interpolation=i.getUint8Array(64),e},t=n.metadata;t.motionCount=i.getUint32(),n.motions=[];for(var r=0;r<t.motionCount;r++)n.motions.push(e())},s=function(){var e=function(){var e={};return e.morphName=i.getSjisStringsAsUnicode(15),e.frameNum=i.getUint32(),e.weight=i.getFloat32(),e},t=n.metadata;t.morphCount=i.getUint32(),n.morphs=[];for(var r=0;r<t.morphCount;r++)n.morphs.push(e())},l=function(){var e=function(){var e={};return e.frameNum=i.getUint32(),e.distance=i.getFloat32(),e.position=i.getFloat32Array(3),e.rotation=i.getFloat32Array(3),e.interpolation=i.getUint8Array(24),e.fov=i.getUint32(),e.perspective=i.getUint8(),e},t=n.metadata;t.cameraCount=i.getUint32(),n.cameras=[];for(var r=0;r<t.cameraCount;r++)n.cameras.push(e())};return a(),o(),s(),l(),!0===t&&this.leftToRightVmd(n),n},i.prototype.parseVpd=function(e,t){function r(){throw"the file seems not vpd file."}function n(){"Vocaloid Pose Data file"!==u[0]&&r()}function i(){u.length<4&&r(),o.metadata.parentFile=u[2],o.metadata.boneCount=parseInt(u[3])}function a(){for(var e=/^\s*(Bone[0-9]+)\s*\{\s*(.*)$/,t=/^\s*(-?[0-9]+\.[0-9]+)\s*,\s*(-?[0-9]+\.[0-9]+)\s*,\s*(-?[0-9]+\.[0-9]+)\s*;/,n=/^\s*(-?[0-9]+\.[0-9]+)\s*,\s*(-?[0-9]+\.[0-9]+)\s*,\s*(-?[0-9]+\.[0-9]+)\s*,\s*(-?[0-9]+\.[0-9]+)\s*;/,i=/^\s*}/,a=o.bones,s=null,l=null,c=null,h=4;h<u.length;h++){var d,f=u[h];null!==(d=f.match(e))&&(null!==s&&r(),s=d[2]),null!==(d=f.match(t))&&(null!==l&&r(),l=[parseFloat(d[1]),parseFloat(d[2]),parseFloat(d[3])]),null!==(d=f.match(n))&&(null!==c&&r(),c=[parseFloat(d[1]),parseFloat(d[2]),parseFloat(d[3]),parseFloat(d[4])]),null!==(d=f.match(i))&&(null!==s&&null!==l&&null!==c||r(),a.push({name:s,translation:l,quaternion:c}),s=null,l=null,c=null)}null===s&&null===l&&null===c||r()}var o={metadata:{}};o.metadata.coordinateSystem="left",o.bones=[];var s=/\/\/\w*(\r|\n|\r\n)/g,l=/\r|\n|\r\n/,u=e.replace(s,"").split(l);return n(),i(),a(),!0===t&&this.leftToRightVpd(o),o},i.prototype.mergeVmds=function(e){var t={metadata:{}};t.metadata.name=e[0].metadata.name,t.metadata.coordinateSystem=e[0].metadata.coordinateSystem,t.metadata.motionCount=0,t.metadata.morphCount=0,t.metadata.cameraCount=0,t.motions=[],t.morphs=[],t.cameras=[];for(var r=0;r<e.length;r++){var n=e[r];t.metadata.motionCount+=n.metadata.motionCount,t.metadata.morphCount+=n.metadata.morphCount,t.metadata.cameraCount+=n.metadata.cameraCount;for(var i=0;i<n.metadata.motionCount;i++)t.motions.push(n.motions[i]);for(i=0;i<n.metadata.morphCount;i++)t.morphs.push(n.morphs[i]);for(i=0;i<n.metadata.cameraCount;i++)t.cameras.push(n.cameras[i])}return t},i.prototype.leftToRightModel=function(e){if("right"!==e.metadata.coordinateSystem){e.metadata.coordinateSystem="right";for(var t=new n,r=0;r<e.metadata.vertexCount;r++)t.leftToRightVector3(e.vertices[r].position),t.leftToRightVector3(e.vertices[r].normal);for(r=0;r<e.metadata.faceCount;r++)t.leftToRightIndexOrder(e.faces[r].indices);for(r=0;r<e.metadata.boneCount;r++)t.leftToRightVector3(e.bones[r].position);for(r=0;r<e.metadata.morphCount;r++){var i=e.morphs[r];if("pmx"!==e.metadata.format||1===i.type)for(var a=0;a<i.elements.length;a++)t.leftToRightVector3(i.elements[a].position)}for(r=0;r<e.metadata.rigidBodyCount;r++)t.leftToRightVector3(e.rigidBodies[r].position),t.leftToRightEuler(e.rigidBodies[r].rotation);for(r=0;r<e.metadata.constraintCount;r++)t.leftToRightVector3(e.constraints[r].position),t.leftToRightEuler(e.constraints[r].rotation),t.leftToRightVector3Range(e.constraints[r].translationLimitation1,e.constraints[r].translationLimitation2),t.leftToRightEulerRange(e.constraints[r].rotationLimitation1,e.constraints[r].rotationLimitation2)}},i.prototype.leftToRightVmd=function(e){if("right"!==e.metadata.coordinateSystem){e.metadata.coordinateSystem="right";for(var t=new n,r=0;r<e.metadata.motionCount;r++)t.leftToRightVector3(e.motions[r].position),t.leftToRightQuaternion(e.motions[r].rotation);for(r=0;r<e.metadata.cameraCount;r++)t.leftToRightVector3(e.cameras[r].position),t.leftToRightEuler(e.cameras[r].rotation)}},i.prototype.leftToRightVpd=function(e){if("right"!==e.metadata.coordinateSystem){e.metadata.coordinateSystem="right";for(var t=new n,r=0;r<e.bones.length;r++)t.leftToRightVector3(e.bones[r].translation),t.leftToRightQuaternion(e.bones[r].quaternion)}},e.CharsetEncoder=t,e.Parser=i,Object.defineProperty(e,"__esModule",{value:!0})}(t)},3773:(e,t,r)=>{var n,i,a;a=function(){"use strict";var e={};function t(e,t,r){e.byteLength;for(var n=0,i=r.length;n<i;n++){var a=r.charCodeAt(n);if(a<128)e.setUint8(t++,a>>>0&127|0);else if(a<2048)e.setUint8(t++,a>>>6&31|192),e.setUint8(t++,a>>>0&63|128);else if(a<65536)e.setUint8(t++,a>>>12&15|224),e.setUint8(t++,a>>>6&63|128),e.setUint8(t++,a>>>0&63|128);else{if(!(a<1114112))throw new Error("bad codepoint "+a);e.setUint8(t++,a>>>18&7|240),e.setUint8(t++,a>>>12&63|128),e.setUint8(t++,a>>>6&63|128),e.setUint8(t++,a>>>0&63|128)}}}function r(e,t,r){for(var n="",i=t,a=t+r;i<a;i++){var o=e.getUint8(i);if(0!=(128&o))if(192!=(224&o))if(224!=(240&o)){if(240!=(248&o))throw new Error("Invalid byte "+o.toString(16));n+=String.fromCharCode((7&o)<<18|(63&e.getUint8(++i))<<12|(63&e.getUint8(++i))<<6|(63&e.getUint8(++i))<<0)}else n+=String.fromCharCode((15&o)<<12|(63&e.getUint8(++i))<<6|(63&e.getUint8(++i))<<0);else n+=String.fromCharCode((31&o)<<6|63&e.getUint8(++i));else n+=String.fromCharCode(o)}return n}function n(e){for(var t=0,r=0,n=e.length;r<n;r++){var i=e.charCodeAt(r);if(i<128)t+=1;else if(i<2048)t+=2;else if(i<65536)t+=3;else{if(!(i<1114112))throw new Error("bad codepoint "+i);t+=4}}return t}function i(e,t){this.offset=t||0,this.view=e}function a(e,r,i){var o=typeof e;if("string"===o){if((s=n(e))<32)return r.setUint8(i,160|s),t(r,i+1,e),1+s;if(s<256)return r.setUint8(i,217),r.setUint8(i+1,s),t(r,i+2,e),2+s;if(s<65536)return r.setUint8(i,218),r.setUint16(i+1,s),t(r,i+3,e),3+s;if(s<4294967296)return r.setUint8(i,219),r.setUint32(i+1,s),t(r,i+5,e),5+s}if(e instanceof ArrayBuffer){if((s=e.byteLength)<256)return r.setUint8(i,196),r.setUint8(i+1,s),new Uint8Array(r.buffer).set(new Uint8Array(e),i+2),2+s;if(s<65536)return r.setUint8(i,197),r.setUint16(i+1,s),new Uint8Array(r.buffer).set(new Uint8Array(e),i+3),3+s;if(s<4294967296)return r.setUint8(i,198),r.setUint32(i+1,s),new Uint8Array(r.buffer).set(new Uint8Array(e),i+5),5+s}if("number"===o){if(e<<0!==e)return r.setUint8(i,203),r.setFloat64(i+1,e),9;if(e>=0){if(e<128)return r.setUint8(i,e),1;if(e<256)return r.setUint8(i,204),r.setUint8(i+1,e),2;if(e<65536)return r.setUint8(i,205),r.setUint16(i+1,e),3;if(e<4294967296)return r.setUint8(i,206),r.setUint32(i+1,e),5;throw new Error("Number too big 0x"+e.toString(16))}if(e>=-32)return r.setInt8(i,e),1;if(e>=-128)return r.setUint8(i,208),r.setInt8(i+1,e),2;if(e>=-32768)return r.setUint8(i,209),r.setInt16(i+1,e),3;if(e>=-2147483648)return r.setUint8(i,210),r.setInt32(i+1,e),5;throw new Error("Number too small -0x"+(-e).toString(16).substr(1))}if("undefined"===o)return r.setUint8(i,212),r.setUint8(i+1,0),r.setUint8(i+2,0),3;if(null===e)return r.setUint8(i,192),1;if("boolean"===o)return r.setUint8(i,e?195:194),1;if("object"===o){var s,l=0,u=Array.isArray(e);if(u)s=e.length;else{var c=Object.keys(e);s=c.length}if(s<16?(r.setUint8(i,s|(u?144:128)),l=1):s<65536?(r.setUint8(i,u?220:222),r.setUint16(i+1,s),l=3):s<4294967296&&(r.setUint8(i,u?221:223),r.setUint32(i+1,s),l=5),u)for(var h=0;h<s;h++)l+=a(e[h],r,i+l);else for(h=0;h<s;h++){var d=c[h];l+=a(d,r,i+l),l+=a(e[d],r,i+l)}return l}throw new Error("Unknown type "+o)}function o(e){var t=typeof e;if("string"===t){if((r=n(e))<32)return 1+r;if(r<256)return 2+r;if(r<65536)return 3+r;if(r<4294967296)return 5+r}if(e instanceof ArrayBuffer){if((r=e.byteLength)<256)return 2+r;if(r<65536)return 3+r;if(r<4294967296)return 5+r}if("number"===t){if(e<<0!==e)return 9;if(e>=0){if(e<128)return 1;if(e<256)return 2;if(e<65536)return 3;if(e<4294967296)return 5;if(e<0x10000000000000000)return 9;throw new Error("Number too big 0x"+e.toString(16))}if(e>=-32)return 1;if(e>=-128)return 2;if(e>=-32768)return 3;if(e>=-2147483648)return 5;if(e>=-0x8000000000000000)return 9;throw new Error("Number too small -0x"+e.toString(16).substr(1))}if("undefined"===t)return 3;if("boolean"===t||null===e)return 1;if("object"===t){var r,i=0;if(Array.isArray(e)){r=e.length;for(var a=0;a<r;a++)i+=o(e[a])}else{var s=Object.keys(e);for(r=s.length,a=0;a<r;a++){var l=s[a];i+=o(l)+o(e[l])}}if(r<16)return 1+i;if(r<65536)return 3+i;if(r<4294967296)return 5+i;throw new Error("Array or object too long 0x"+r.toString(16))}throw new Error("Unknown type "+t)}return e.inspect=function(e){if(void 0===e)return"undefined";var t,r;if(e instanceof ArrayBuffer?(r="ArrayBuffer",t=new DataView(e)):e instanceof DataView&&(r="DataView",t=e),!t)return JSON.stringify(e);for(var n=[],i=0;i<e.byteLength;i++){if(i>20){n.push("...");break}var a=t.getUint8(i).toString(16);1===a.length&&(a="0"+a),n.push(a)}return"<"+r+" "+n.join(" ")+">"},e.utf8Write=t,e.utf8Read=r,e.utf8ByteCount=n,e.encode=function(e){var t=new ArrayBuffer(o(e));return a(e,new DataView(t),0),t},e.decode=function(e){var t=new i(new DataView(e)),r=t.parse();if(t.offset!==e.byteLength)throw new Error(e.byteLength-t.offset+" trailing bytes");return r},i.prototype.map=function(e){for(var t={},r=0;r<e;r++)t[this.parse()]=this.parse();return t},i.prototype.bin=function(e){var t=new ArrayBuffer(e);return new Uint8Array(t).set(new Uint8Array(this.view.buffer,this.offset,e),0),this.offset+=e,t},i.prototype.str=function(e){var t=r(this.view,this.offset,e);return this.offset+=e,t},i.prototype.array=function(e){for(var t=new Array(e),r=0;r<e;r++)t[r]=this.parse();return t},i.prototype.parse=function(){var e,t,r=this.view.getUint8(this.offset);if(160==(224&r))return t=31&r,this.offset++,this.str(t);if(128==(240&r))return t=15&r,this.offset++,this.map(t);if(144==(240&r))return t=15&r,this.offset++,this.array(t);if(0==(128&r))return this.offset++,r;if(224==(224&r))return e=this.view.getInt8(this.offset),this.offset++,e;if(212!==r||0!==this.view.getUint8(this.offset+1)){switch(r){case 217:return t=this.view.getUint8(this.offset+1),this.offset+=2,this.str(t);case 218:return t=this.view.getUint16(this.offset+1),this.offset+=3,this.str(t);case 219:return t=this.view.getUint32(this.offset+1),this.offset+=5,this.str(t);case 196:return t=this.view.getUint8(this.offset+1),this.offset+=2,this.bin(t);case 197:return t=this.view.getUint16(this.offset+1),this.offset+=3,this.bin(t);case 198:return t=this.view.getUint32(this.offset+1),this.offset+=5,this.bin(t);case 192:return this.offset++,null;case 194:return this.offset++,!1;case 195:return this.offset++,!0;case 204:return e=this.view.getUint8(this.offset+1),this.offset+=2,e;case 205:return e=this.view.getUint16(this.offset+1),this.offset+=3,e;case 206:return e=this.view.getUint32(this.offset+1),this.offset+=5,e;case 207:return e=4294967296*this.view.getUint32(this.offset+1)+this.view.getUint32(this.offset+5),this.offset+=9,e;case 208:return e=this.view.getInt8(this.offset+1),this.offset+=2,e;case 209:return e=this.view.getInt16(this.offset+1),this.offset+=3,e;case 210:return e=this.view.getInt32(this.offset+1),this.offset+=5,e;case 211:return e=4294967296*this.view.getInt32(this.offset+1)+this.view.getUint32(this.offset+5),this.offset+=9,e;case 222:return t=this.view.getUint16(this.offset+1),this.offset+=3,this.map(t);case 223:return t=this.view.getUint32(this.offset+1),this.offset+=5,this.map(t);case 220:return t=this.view.getUint16(this.offset+1),this.offset+=3,this.array(t);case 221:return t=this.view.getUint32(this.offset+1),this.offset+=5,this.array(t);case 202:return e=this.view.getFloat32(this.offset+1),this.offset+=5,e;case 203:return e=this.view.getFloat64(this.offset+1),this.offset+=9,e}throw new Error("Unknown type 0x"+r.toString(16))}this.offset+=3},e},void 0===(i="function"==typeof(n=a)?n.call(t,r,t,e):n)||(e.exports=i)},2250:(e,t,r)=>{var n=r(5108),i=r(8764).Buffer;e.exports=function e(t,n,i){function a(s,l){if(!n[s]){if(!t[s]){if(!l&&r(5172))return require(s,!0);if(o)return o(s,!0);var u=new Error("Cannot find module '"+s+"'");throw u.code="MODULE_NOT_FOUND",u}var c=n[s]={exports:{}};t[s][0].call(c.exports,(function(e){var r=t[s][1][e];return a(r||e)}),c,c.exports,e,t,n,i)}return n[s].exports}for(var o=void 0,s=0;s<i.length;s++)a(i[s]);return a}({1:[function(e,t,r){function n(){this.table=new Uint16Array(16),this.trans=new Uint16Array(288)}function i(e,t){this.source=e,this.sourceIndex=0,this.tag=0,this.bitcount=0,this.dest=t,this.destLen=0,this.ltree=new n,this.dtree=new n}function a(e,t,r,n){var i,a;for(i=0;r>i;++i)e[i]=0;for(i=0;30-r>i;++i)e[i+r]=i/r|0;for(a=n,i=0;30>i;++i)t[i]=a,a+=1<<e[i]}function o(e,t){var r;for(r=0;7>r;++r)e.table[r]=0;for(e.table[7]=24,e.table[8]=152,e.table[9]=112,r=0;24>r;++r)e.trans[r]=256+r;for(r=0;144>r;++r)e.trans[24+r]=r;for(r=0;8>r;++r)e.trans[168+r]=280+r;for(r=0;112>r;++r)e.trans[176+r]=144+r;for(r=0;5>r;++r)t.table[r]=0;for(t.table[5]=32,r=0;32>r;++r)t.trans[r]=r}function s(e,t,r,n){var i,a;for(i=0;16>i;++i)e.table[i]=0;for(i=0;n>i;++i)e.table[t[r+i]]++;for(e.table[0]=0,a=0,i=0;16>i;++i)M[i]=a,a+=e.table[i];for(i=0;n>i;++i)t[r+i]&&(e.trans[M[t[r+i]]++]=i)}function l(e){e.bitcount--||(e.tag=e.source[e.sourceIndex++],e.bitcount=7);var t=1&e.tag;return e.tag>>>=1,t}function u(e,t,r){if(!t)return r;for(;e.bitcount<24;)e.tag|=e.source[e.sourceIndex++]<<e.bitcount,e.bitcount+=8;var n=e.tag&65535>>>16-t;return e.tag>>>=t,e.bitcount-=t,n+r}function c(e,t){for(;e.bitcount<24;)e.tag|=e.source[e.sourceIndex++]<<e.bitcount,e.bitcount+=8;var r=0,n=0,i=0,a=e.tag;do{n=2*n+(1&a),a>>>=1,++i,r+=t.table[i],n-=t.table[i]}while(n>=0);return e.tag=a,e.bitcount-=i,t.trans[r+n]}function h(e,t,r){var n,i,a,o,l,h;for(n=u(e,5,257),i=u(e,5,1),a=u(e,4,4),o=0;19>o;++o)S[o]=0;for(o=0;a>o;++o){var d=u(e,3,0);S[T[o]]=d}for(s(_,S,0,19),l=0;n+i>l;){var f=c(e,_);switch(f){case 16:var p=S[l-1];for(h=u(e,2,3);h;--h)S[l++]=p;break;case 17:for(h=u(e,3,3);h;--h)S[l++]=0;break;case 18:for(h=u(e,7,11);h;--h)S[l++]=0;break;default:S[l++]=f}}s(t,S,0,n),s(r,S,n,i)}function d(e,t,r){for(;;){var n,i,a,o,s=c(e,t);if(256===s)return m;if(256>s)e.dest[e.destLen++]=s;else for(n=u(e,b[s-=257],E[s]),i=c(e,r),o=a=e.destLen-u(e,x[i],w[i]);a+n>o;++o)e.dest[e.destLen++]=e.dest[o]}}function f(e){for(var t,r;e.bitcount>8;)e.sourceIndex--,e.bitcount-=8;if((t=256*(t=e.source[e.sourceIndex+1])+e.source[e.sourceIndex])!==(65535&~(256*e.source[e.sourceIndex+3]+e.source[e.sourceIndex+2])))return g;for(e.sourceIndex+=4,r=t;r;--r)e.dest[e.destLen++]=e.source[e.sourceIndex++];return e.bitcount=0,m}function p(e,t){var r,n,a=new i(e,t);do{switch(r=l(a),u(a,2,0)){case 0:n=f(a);break;case 1:n=d(a,v,y);break;case 2:h(a,a.ltree,a.dtree),n=d(a,a.ltree,a.dtree);break;default:n=g}if(n!==m)throw new Error("Data error")}while(!r);return a.destLen<a.dest.length?"function"==typeof a.dest.slice?a.dest.slice(0,a.destLen):a.dest.subarray(0,a.destLen):a.dest}var m=0,g=-3,v=new n,y=new n,b=new Uint8Array(30),E=new Uint16Array(30),x=new Uint8Array(30),w=new Uint16Array(30),T=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),_=new n,S=new Uint8Array(320),M=new Uint16Array(16);o(v,y),a(b,E,4,3),a(x,w,2,1),b[28]=0,E[28]=258,t.exports=p},{}],2:[function(e,t,r){"use strict";r.fail=function(e){throw new Error(e)},r.argument=function(e,t){e||r.fail(t)},r.assert=r.argument},{}],3:[function(e,t,r){"use strict";function n(e,t,r,n,i){e.beginPath(),e.moveTo(t,r),e.lineTo(n,i),e.stroke()}r.line=n},{}],4:[function(e,t,r){"use strict";function n(e){this.font=e}function i(e){this.cmap=e}function a(e,t){this.encoding=e,this.charset=t}function o(e){var t;switch(e.version){case 1:this.names=r.standardNames.slice();break;case 2:for(this.names=new Array(e.numberOfGlyphs),t=0;t<e.numberOfGlyphs;t++)this.names[t]=e.glyphNameIndex[t]<r.standardNames.length?r.standardNames[e.glyphNameIndex[t]]:e.names[e.glyphNameIndex[t]-r.standardNames.length];break;case 2.5:for(this.names=new Array(e.numberOfGlyphs),t=0;t<e.numberOfGlyphs;t++)this.names[t]=r.standardNames[t+e.glyphNameIndex[t]];break;case 3:this.names=[]}}function s(e){for(var t,r=e.tables.cmap.glyphIndexMap,n=Object.keys(r),i=0;i<n.length;i+=1){var a=n[i],o=r[a];(t=e.glyphs.get(o)).addUnicode(parseInt(a))}for(i=0;i<e.glyphs.length;i+=1)t=e.glyphs.get(i),e.cffEncoding?t.name=e.cffEncoding.charset[i]:e.glyphNames.names&&(t.name=e.glyphNames.glyphIndexToName(i))}var l=[".notdef","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","endash","dagger","daggerdbl","periodcentered","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","questiondown","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","ring","cedilla","hungarumlaut","ogonek","caron","emdash","AE","ordfeminine","Lslash","Oslash","OE","ordmasculine","ae","dotlessi","lslash","oslash","oe","germandbls","onesuperior","logicalnot","mu","trademark","Eth","onehalf","plusminus","Thorn","onequarter","divide","brokenbar","degree","thorn","threequarters","twosuperior","registered","minus","eth","multiply","threesuperior","copyright","Aacute","Acircumflex","Adieresis","Agrave","Aring","Atilde","Ccedilla","Eacute","Ecircumflex","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Ntilde","Oacute","Ocircumflex","Odieresis","Ograve","Otilde","Scaron","Uacute","Ucircumflex","Udieresis","Ugrave","Yacute","Ydieresis","Zcaron","aacute","acircumflex","adieresis","agrave","aring","atilde","ccedilla","eacute","ecircumflex","edieresis","egrave","iacute","icircumflex","idieresis","igrave","ntilde","oacute","ocircumflex","odieresis","ograve","otilde","scaron","uacute","ucircumflex","udieresis","ugrave","yacute","ydieresis","zcaron","exclamsmall","Hungarumlautsmall","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","266 ff","onedotenleader","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","commasuperior","threequartersemdash","periodsuperior","questionsmall","asuperior","bsuperior","centsuperior","dsuperior","esuperior","isuperior","lsuperior","msuperior","nsuperior","osuperior","rsuperior","ssuperior","tsuperior","ff","ffi","ffl","parenleftinferior","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","exclamdownsmall","centoldstyle","Lslashsmall","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","Dotaccentsmall","Macronsmall","figuredash","hypheninferior","Ogoneksmall","Ringsmall","Cedillasmall","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","zerosuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall","001.000","001.001","001.002","001.003","Black","Bold","Book","Light","Medium","Regular","Roman","Semibold"],u=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","","endash","dagger","daggerdbl","periodcentered","","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","","questiondown","","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","","ring","cedilla","","hungarumlaut","ogonek","caron","emdash","","","","","","","","","","","","","","","","","AE","","ordfeminine","","","","","Lslash","Oslash","OE","ordmasculine","","","","","","ae","","","","dotlessi","","","lslash","oslash","oe","germandbls"],c=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclamsmall","Hungarumlautsmall","","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","twodotenleader","onedotenleader","comma","hyphen","period","fraction","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","colon","semicolon","commasuperior","threequartersemdash","periodsuperior","questionsmall","","asuperior","bsuperior","centsuperior","dsuperior","esuperior","","","isuperior","","","lsuperior","msuperior","nsuperior","osuperior","","","rsuperior","ssuperior","tsuperior","","ff","fi","fl","ffi","ffl","parenleftinferior","","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdownsmall","centoldstyle","Lslashsmall","","","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","","Dotaccentsmall","","","Macronsmall","","","figuredash","hypheninferior","","","Ogoneksmall","Ringsmall","Cedillasmall","","","","onequarter","onehalf","threequarters","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","","","zerosuperior","onesuperior","twosuperior","threesuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall"],h=[".notdef",".null","nonmarkingreturn","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quotesingle","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","grave","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","Adieresis","Aring","Ccedilla","Eacute","Ntilde","Odieresis","Udieresis","aacute","agrave","acircumflex","adieresis","atilde","aring","ccedilla","eacute","egrave","ecircumflex","edieresis","iacute","igrave","icircumflex","idieresis","ntilde","oacute","ograve","ocircumflex","odieresis","otilde","uacute","ugrave","ucircumflex","udieresis","dagger","degree","cent","sterling","section","bullet","paragraph","germandbls","registered","copyright","trademark","acute","dieresis","notequal","AE","Oslash","infinity","plusminus","lessequal","greaterequal","yen","mu","partialdiff","summation","product","pi","integral","ordfeminine","ordmasculine","Omega","ae","oslash","questiondown","exclamdown","logicalnot","radical","florin","approxequal","Delta","guillemotleft","guillemotright","ellipsis","nonbreakingspace","Agrave","Atilde","Otilde","OE","oe","endash","emdash","quotedblleft","quotedblright","quoteleft","quoteright","divide","lozenge","ydieresis","Ydieresis","fraction","currency","guilsinglleft","guilsinglright","fi","fl","daggerdbl","periodcentered","quotesinglbase","quotedblbase","perthousand","Acircumflex","Ecircumflex","Aacute","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Oacute","Ocircumflex","apple","Ograve","Uacute","Ucircumflex","Ugrave","dotlessi","circumflex","tilde","macron","breve","dotaccent","ring","cedilla","hungarumlaut","ogonek","caron","Lslash","lslash","Scaron","scaron","Zcaron","zcaron","brokenbar","Eth","eth","Yacute","yacute","Thorn","thorn","minus","multiply","onesuperior","twosuperior","threesuperior","onehalf","onequarter","threequarters","franc","Gbreve","gbreve","Idotaccent","Scedilla","scedilla","Cacute","cacute","Ccaron","ccaron","dcroat"];n.prototype.charToGlyphIndex=function(e){var t=e.charCodeAt(0),r=this.font.glyphs;if(!r)return null;for(var n=0;n<r.length;n+=1)for(var i=r.get(n),a=0;a<i.unicodes.length;a+=1)if(i.unicodes[a]===t)return n},i.prototype.charToGlyphIndex=function(e){return this.cmap.glyphIndexMap[e.charCodeAt(0)]||0},a.prototype.charToGlyphIndex=function(e){var t=e.charCodeAt(0),r=this.encoding[t];return this.charset.indexOf(r)},o.prototype.nameToGlyphIndex=function(e){return this.names.indexOf(e)},o.prototype.glyphIndexToName=function(e){return this.names[e]},r.cffStandardStrings=l,r.cffStandardEncoding=u,r.cffExpertEncoding=c,r.standardNames=h,r.DefaultEncoding=n,r.CmapEncoding=i,r.CffEncoding=a,r.GlyphNames=o,r.addGlyphNames=s},{}],5:[function(e,t,r){"use strict";function i(e){(e=e||{}).empty||(c.checkArgument(e.familyName,"When creating a new Font object, familyName is required."),c.checkArgument(e.styleName,"When creating a new Font object, styleName is required."),c.checkArgument(e.unitsPerEm,"When creating a new Font object, unitsPerEm is required."),c.checkArgument(e.ascender,"When creating a new Font object, ascender is required."),c.checkArgument(e.descender,"When creating a new Font object, descender is required."),c.checkArgument(e.descender<0,"Descender should be negative (e.g. -512)."),this.names={fontFamily:{en:e.familyName||" "},fontSubfamily:{en:e.styleName||" "},fullName:{en:e.fullName||e.familyName+" "+e.styleName},postScriptName:{en:e.postScriptName||e.familyName+e.styleName},designer:{en:e.designer||" "},designerURL:{en:e.designerURL||" "},manufacturer:{en:e.manufacturer||" "},manufacturerURL:{en:e.manufacturerURL||" "},license:{en:e.license||" "},licenseURL:{en:e.licenseURL||" "},version:{en:e.version||"Version 0.1"},description:{en:e.description||" "},copyright:{en:e.copyright||" "},trademark:{en:e.trademark||" "}},this.unitsPerEm=e.unitsPerEm||1e3,this.ascender=e.ascender,this.descender=e.descender,this.createdTimestamp=e.createdTimestamp,this.tables={os2:{usWeightClass:e.weightClass||this.usWeightClasses.MEDIUM,usWidthClass:e.widthClass||this.usWidthClasses.MEDIUM,fsSelection:e.fsSelection||this.fsSelectionValues.REGULAR}}),this.supported=!0,this.glyphs=new l.GlyphSet(this,e.glyphs||[]),this.encoding=new s.DefaultEncoding(this),this.substitution=new u(this),this.tables=this.tables||{}}var a=e("./path"),o=e("./tables/sfnt"),s=e("./encoding"),l=e("./glyphset"),u=e("./substitution"),c=e("./util");i.prototype.hasChar=function(e){return null!==this.encoding.charToGlyphIndex(e)},i.prototype.charToGlyphIndex=function(e){return this.encoding.charToGlyphIndex(e)},i.prototype.charToGlyph=function(e){var t=this.charToGlyphIndex(e),r=this.glyphs.get(t);return r||(r=this.glyphs.get(0)),r},i.prototype.stringToGlyphs=function(e){for(var t=[],r=0;r<e.length;r+=1){var n=e[r];t.push(this.charToGlyph(n))}return t},i.prototype.nameToGlyphIndex=function(e){return this.glyphNames.nameToGlyphIndex(e)},i.prototype.nameToGlyph=function(e){var t=this.nametoGlyphIndex(e),r=this.glyphs.get(t);return r||(r=this.glyphs.get(0)),r},i.prototype.glyphIndexToName=function(e){return this.glyphNames.glyphIndexToName?this.glyphNames.glyphIndexToName(e):""},i.prototype.getKerningValue=function(e,t){e=e.index||e,t=t.index||t;var r=this.getGposKerningValue;return r?r(e,t):this.kerningPairs[e+","+t]||0},i.prototype.forEachGlyph=function(e,t,r,n,i,a){t=void 0!==t?t:0,r=void 0!==r?r:0,n=void 0!==n?n:72;for(var o=void 0===(i=i||{}).kerning||i.kerning,s=1/this.unitsPerEm*n,l=this.stringToGlyphs(e),u=0;u<l.length;u+=1){var c=l[u];a(c,t,r,n,i),c.advanceWidth&&(t+=c.advanceWidth*s),o&&u<l.length-1&&(t+=this.getKerningValue(c,l[u+1])*s)}},i.prototype.getPath=function(e,t,r,n,i){var o=new a.Path;return this.forEachGlyph(e,t,r,n,i,(function(e,t,r,n){var i=e.getPath(t,r,n);o.extend(i)})),o},i.prototype.getPaths=function(e,t,r,n,i){var a=[];return this.forEachGlyph(e,t,r,n,i,(function(e,t,r,n){var i=e.getPath(t,r,n);a.push(i)})),a},i.prototype.draw=function(e,t,r,n,i,a){this.getPath(t,r,n,i,a).draw(e)},i.prototype.drawPoints=function(e,t,r,n,i,a){this.forEachGlyph(t,r,n,i,a,(function(t,r,n,i){t.drawPoints(e,r,n,i)}))},i.prototype.drawMetrics=function(e,t,r,n,i,a){this.forEachGlyph(t,r,n,i,a,(function(t,r,n,i){t.drawMetrics(e,r,n,i)}))},i.prototype.getEnglishName=function(e){var t=this.names[e];return t?t.en:void 0},i.prototype.validate=function(){function e(e,t){e||r.push(t)}function t(t){var r=n.getEnglishName(t);e(r&&r.trim().length>0,"No English "+t+" specified.")}var r=[],n=this;t("fontFamily"),t("weightName"),t("manufacturer"),t("copyright"),t("version"),e(this.unitsPerEm>0,"No unitsPerEm specified.")},i.prototype.toTables=function(){return o.fontToTable(this)},i.prototype.toBuffer=function(){return n.warn("Font.toBuffer is deprecated. Use Font.toArrayBuffer instead."),this.toArrayBuffer()},i.prototype.toArrayBuffer=function(){for(var e=this.toTables().encode(),t=new ArrayBuffer(e.length),r=new Uint8Array(t),n=0;n<e.length;n++)r[n]=e[n];return t},i.prototype.download=function(){var t=this.getEnglishName("fontFamily"),r=this.getEnglishName("fontSubfamily"),n=t.replace(/\s/g,"")+"-"+r+".otf",i=this.toArrayBuffer();if(c.isBrowser())window.requestFileSystem=window.requestFileSystem||window.webkitRequestFileSystem,window.requestFileSystem(window.TEMPORARY,i.byteLength,(function(e){e.root.getFile(n,{create:!0},(function(e){e.createWriter((function(t){var r=new DataView(i),n=new Blob([r],{type:"font/opentype"});t.write(n),t.addEventListener("writeend",(function(){location.href=e.toURL()}),!1)}))}))}),(function(e){throw new Error(e.name+": "+e.message)}));else{var a=e("fs"),o=c.arrayBufferToNodeBuffer(i);a.writeFileSync(n,o)}},i.prototype.fsSelectionValues={ITALIC:1,UNDERSCORE:2,NEGATIVE:4,OUTLINED:8,STRIKEOUT:16,BOLD:32,REGULAR:64,USER_TYPO_METRICS:128,WWS:256,OBLIQUE:512},i.prototype.usWidthClasses={ULTRA_CONDENSED:1,EXTRA_CONDENSED:2,CONDENSED:3,SEMI_CONDENSED:4,MEDIUM:5,SEMI_EXPANDED:6,EXPANDED:7,EXTRA_EXPANDED:8,ULTRA_EXPANDED:9},i.prototype.usWeightClasses={THIN:100,EXTRA_LIGHT:200,LIGHT:300,NORMAL:400,MEDIUM:500,SEMI_BOLD:600,BOLD:700,EXTRA_BOLD:800,BLACK:900},r.Font=i},{"./encoding":4,"./glyphset":7,"./path":11,"./substitution":12,"./tables/sfnt":31,"./util":33,fs:void 0}],6:[function(e,t,r){"use strict";function n(e,t){var r=t||{commands:[]};return{configurable:!0,get:function(){return"function"==typeof r&&(r=r()),r},set:function(e){r=e}}}function i(e){this.bindConstructorValues(e)}var a=e("./check"),o=e("./draw"),s=e("./path");i.prototype.bindConstructorValues=function(e){this.index=e.index||0,this.name=e.name||null,this.unicode=e.unicode||void 0,this.unicodes=e.unicodes||void 0!==e.unicode?[e.unicode]:[],e.xMin&&(this.xMin=e.xMin),e.yMin&&(this.yMin=e.yMin),e.xMax&&(this.xMax=e.xMax),e.yMax&&(this.yMax=e.yMax),e.advanceWidth&&(this.advanceWidth=e.advanceWidth),Object.defineProperty(this,"path",n(this,e.path))},i.prototype.addUnicode=function(e){0===this.unicodes.length&&(this.unicode=e),this.unicodes.push(e)},i.prototype.getPath=function(e,t,r,n){e=void 0!==e?e:0,t=void 0!==t?t:0,n=void 0!==n?n:{xScale:1,yScale:1},r=void 0!==r?r:72;for(var i=1/this.path.unitsPerEm*r,a=n.xScale*i,o=n.yScale*i,l=new s.Path,u=this.path.commands,c=0;c<u.length;c+=1){var h=u[c];"M"===h.type?l.moveTo(e+h.x*a,t+-h.y*o):"L"===h.type?l.lineTo(e+h.x*a,t+-h.y*o):"Q"===h.type?l.quadraticCurveTo(e+h.x1*a,t+-h.y1*o,e+h.x*a,t+-h.y*o):"C"===h.type?l.curveTo(e+h.x1*a,t+-h.y1*o,e+h.x2*a,t+-h.y2*o,e+h.x*a,t+-h.y*o):"Z"===h.type&&l.closePath()}return l},i.prototype.getContours=function(){if(void 0===this.points)return[];for(var e=[],t=[],r=0;r<this.points.length;r+=1){var n=this.points[r];t.push(n),n.lastPointOfContour&&(e.push(t),t=[])}return a.argument(0===t.length,"There are still points left in the current contour."),e},i.prototype.getMetrics=function(){for(var e=this.path.commands,t=[],r=[],n=0;n<e.length;n+=1){var i=e[n];"Z"!==i.type&&(t.push(i.x),r.push(i.y)),("Q"===i.type||"C"===i.type)&&(t.push(i.x1),r.push(i.y1)),"C"===i.type&&(t.push(i.x2),r.push(i.y2))}var a={xMin:Math.min.apply(null,t),yMin:Math.min.apply(null,r),xMax:Math.max.apply(null,t),yMax:Math.max.apply(null,r),leftSideBearing:this.leftSideBearing};return isFinite(a.xMin)||(a.xMin=0),isFinite(a.xMax)||(a.xMax=this.advanceWidth),isFinite(a.yMin)||(a.yMin=0),isFinite(a.yMax)||(a.yMax=0),a.rightSideBearing=this.advanceWidth-a.leftSideBearing-(a.xMax-a.xMin),a},i.prototype.draw=function(e,t,r,n,i){this.getPath(t,r,n,i).draw(e)},i.prototype.drawPoints=function(e,t,r,n){function i(t,r,n,i){var a=2*Math.PI;e.beginPath();for(var o=0;o<t.length;o+=1)e.moveTo(r+t[o].x*i,n+t[o].y*i),e.arc(r+t[o].x*i,n+t[o].y*i,2,0,a,!1);e.closePath(),e.fill()}t=void 0!==t?t:0,r=void 0!==r?r:0,n=void 0!==n?n:24;for(var a=1/this.path.unitsPerEm*n,o=[],s=[],l=this.path,u=0;u<l.commands.length;u+=1){var c=l.commands[u];void 0!==c.x&&o.push({x:c.x,y:-c.y}),void 0!==c.x1&&s.push({x:c.x1,y:-c.y1}),void 0!==c.x2&&s.push({x:c.x2,y:-c.y2})}e.fillStyle="blue",i(o,t,r,a),e.fillStyle="red",i(s,t,r,a)},i.prototype.drawMetrics=function(e,t,r,n){var i;t=void 0!==t?t:0,r=void 0!==r?r:0,n=void 0!==n?n:24,i=1/this.path.unitsPerEm*n,e.lineWidth=1,e.strokeStyle="black",o.line(e,t,-1e4,t,1e4),o.line(e,-1e4,r,1e4,r);var a=this.xMin||0,s=this.yMin||0,l=this.xMax||0,u=this.yMax||0,c=this.advanceWidth||0;e.strokeStyle="blue",o.line(e,t+a*i,-1e4,t+a*i,1e4),o.line(e,t+l*i,-1e4,t+l*i,1e4),o.line(e,-1e4,r+-s*i,1e4,r+-s*i),o.line(e,-1e4,r+-u*i,1e4,r+-u*i),e.strokeStyle="green",o.line(e,t+c*i,-1e4,t+c*i,1e4)},r.Glyph=i},{"./check":2,"./draw":3,"./path":11}],7:[function(e,t,r){"use strict";function n(e,t,r){Object.defineProperty(e,t,{get:function(){return e.path,e[r]},set:function(t){e[r]=t},enumerable:!0,configurable:!0})}function i(e,t){if(this.font=e,this.glyphs={},Array.isArray(t))for(var r=0;r<t.length;r++)this.glyphs[r]=t[r];this.length=t&&t.length||0}function a(e,t){return new l.Glyph({index:t,font:e})}function o(e,t,r,i,a,o){return function(){var s=new l.Glyph({index:t,font:e});return s.path=function(){r(s,i,a);var t=o(e.glyphs,s);return t.unitsPerEm=e.unitsPerEm,t},n(s,"xMin","_xMin"),n(s,"xMax","_xMax"),n(s,"yMin","_yMin"),n(s,"yMax","_yMax"),s}}function s(e,t,r,n){return function(){var i=new l.Glyph({index:t,font:e});return i.path=function(){var t=r(e,i,n);return t.unitsPerEm=e.unitsPerEm,t},i}}var l=e("./glyph");i.prototype.get=function(e){return"function"==typeof this.glyphs[e]&&(this.glyphs[e]=this.glyphs[e]()),this.glyphs[e]},i.prototype.push=function(e,t){this.glyphs[e]=t,this.length++},r.GlyphSet=i,r.glyphLoader=a,r.ttfGlyphLoader=o,r.cffGlyphLoader=s},{"./glyph":6}],8:[function(e,t,r){"use strict";function n(e,t){for(var r=0,n=e.length-1;n>=r;){var i=r+n>>>1,a=e[i].tag;if(a===t)return i;t>a?r=i+1:n=i-1}return-r-1}function i(e,t){for(var r=0,n=e.length-1;n>=r;){var i=r+n>>>1,a=e[i];if(a===t)return i;t>a?r=i+1:n=i-1}return-r-1}var a=e("./check"),o={searchTag:n,binSearch:i,getScriptNames:function(){var e=this.getGsubTable();return e?e.scripts.map((function(e){return e.tag})):[]},getScriptTable:function(e,t){var r=this.getGsubTable(t);if(r){var i=r.scripts,a=n(r.scripts,e);if(a>=0)return i[a].script;var o={tag:e,script:{defaultLangSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]},langSysRecords:[]}};return i.splice(-1-a,0,o.script),o}},getLangSysTable:function(e,t,r){var i=this.getScriptTable(e,r);if(i){if("DFLT"===t)return i.defaultLangSys;var a=n(i.langSysRecords,t);if(a>=0)return i.langSysRecords[a].langSys;if(r){var o={tag:t,langSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]}};return i.langSysRecords.splice(-1-a,0,o),o.langSys}}},getFeatureTable:function(e,t,r,n){var i=this.getLangSysTable(e,t,n);if(i){for(var o,s=i.featureIndexes,l=this.font.tables.gsub.features,u=0;u<s.length;u++)if((o=l[s[u]]).tag===r)return o.feature;if(n){var c=l.length;return a.assert(0===c||r>=l[c-1].tag,"Features must be added in alphabetical order."),o={tag:r,feature:{params:0,lookupListIndexes:[]}},l.push(o),s.push(c),o.feature}}},getLookupTable:function(e,t,r,n,i){var a=this.getFeatureTable(e,t,r,i);if(a){for(var o,s=a.lookupListIndexes,l=this.font.tables.gsub.lookups,u=0;u<s.length;u++)if((o=l[s[u]]).lookupType===n)return o;if(i){o={lookupType:n,lookupFlag:0,subtables:[],markFilteringSet:void 0};var c=l.length;return l.push(o),s.push(c),o}}},expandCoverage:function(e){if(1===e.format)return e.glyphs;for(var t=[],r=e.ranges,n=0;r>n;n++)for(var i=r[n],a=i.start,o=i.end,s=a;o>=s;s++)t.push(s);return t}};t.exports=o},{"./check":2}],9:[function(e,t,r){"use strict";function n(t,r){e("fs").readFile(t,(function(e,t){return e?r(e.message):void r(null,v.nodeBufferToArrayBuffer(t))}))}function i(e,t){var r=new XMLHttpRequest;r.open("get",e,!0),r.responseType="arraybuffer",r.onload=function(){return 200!==r.status?t("Font could not be loaded: "+r.statusText):t(null,r.response)},r.send()}function a(e,t){for(var r=[],n=12,i=0;t>i;i+=1){var a=m.getTag(e,n),o=m.getULong(e,n+4),s=m.getULong(e,n+8),l=m.getULong(e,n+12);r.push({tag:a,checksum:o,offset:s,length:l,compression:!1}),n+=16}return r}function o(e,t){for(var r=[],n=44,i=0;t>i;i+=1){var a,o=m.getTag(e,n),s=m.getULong(e,n+4),l=m.getULong(e,n+8),u=m.getULong(e,n+12);a=u>l&&"WOFF",r.push({tag:o,offset:s,compression:a,compressedLength:l,originalLength:u}),n+=20}return r}function s(e,t){if("WOFF"===t.compression){var r=new Uint8Array(e.buffer,t.offset+2,t.compressedLength-2),n=new Uint8Array(t.originalLength);if(h(r,n),n.byteLength!==t.originalLength)throw new Error("Decompression error: "+t.tag+" decompressed length doesn't match recorded length");return{data:new DataView(n.buffer,0),offset:0}}return{data:e,offset:t.offset}}function l(e){var t,r,n,i=new f.Font({empty:!0}),l=new DataView(e,0),u=[],c=m.getTag(l,0);if(c===String.fromCharCode(0,1,0,0))i.outlinesFormat="truetype",u=a(l,n=m.getUShort(l,4));else if("OTTO"===c)i.outlinesFormat="cff",u=a(l,n=m.getUShort(l,4));else{if("wOFF"!==c)throw new Error("Unsupported OpenType signature "+c);var h=m.getTag(l,4);if(h===String.fromCharCode(0,1,0,0))i.outlinesFormat="truetype";else{if("OTTO"!==h)throw new Error("Unsupported OpenType flavor "+c);i.outlinesFormat="cff"}u=o(l,n=m.getUShort(l,12))}for(var p,g,v,k,N,U,D,F,B,z,j=0;n>j;j+=1){var V,G=u[j];switch(G.tag){case"cmap":V=s(l,G),i.tables.cmap=y.parse(V.data,V.offset),i.encoding=new d.CmapEncoding(i.tables.cmap);break;case"fvar":g=G;break;case"head":V=s(l,G),i.tables.head=_.parse(V.data,V.offset),i.unitsPerEm=i.tables.head.unitsPerEm,t=i.tables.head.indexToLocFormat;break;case"hhea":V=s(l,G),i.tables.hhea=S.parse(V.data,V.offset),i.ascender=i.tables.hhea.ascender,i.descender=i.tables.hhea.descender,i.numberOfHMetrics=i.tables.hhea.numberOfHMetrics;break;case"hmtx":U=G;break;case"ltag":V=s(l,G),r=A.parse(V.data,V.offset);break;case"maxp":V=s(l,G),i.tables.maxp=L.parse(V.data,V.offset),i.numGlyphs=i.tables.maxp.numGlyphs;break;case"name":B=G;break;case"OS/2":V=s(l,G),i.tables.os2=I.parse(V.data,V.offset);break;case"post":V=s(l,G),i.tables.post=P.parse(V.data,V.offset),i.glyphNames=new d.GlyphNames(i.tables.post);break;case"glyf":v=G;break;case"loca":F=G;break;case"CFF ":p=G;break;case"kern":D=G;break;case"GPOS":k=G;break;case"GSUB":N=G;break;case"meta":z=G}}var W=s(l,B);if(i.tables.name=O.parse(W.data,W.offset,r),i.names=i.tables.name,v&&F){var q=0===t,X=s(l,F),Y=C.parse(X.data,X.offset,i.numGlyphs,q),Z=s(l,v);i.glyphs=x.parse(Z.data,Z.offset,Y,i)}else{if(!p)throw new Error("Font doesn't contain TrueType or CFF outlines.");var K=s(l,p);b.parse(K.data,K.offset,i)}var Q=s(l,U);if(M.parse(Q.data,Q.offset,i.numberOfHMetrics,i.numGlyphs,i.glyphs),d.addGlyphNames(i),D){var J=s(l,D);i.kerningPairs=R.parse(J.data,J.offset)}else i.kerningPairs={};if(k){var $=s(l,k);w.parse($.data,$.offset,i)}if(N){var ee=s(l,N);i.tables.gsub=T.parse(ee.data,ee.offset)}if(g){var te=s(l,g);i.tables.fvar=E.parse(te.data,te.offset,i.names)}if(z){var re=s(l,z);i.tables.meta=H.parse(re.data,re.offset),i.metas=i.tables.meta}return i}function u(e,t){("undefined"==typeof window?n:i)(e,(function(e,r){if(e)return t(e);var n;try{n=l(r)}catch(e){return t(e,null)}return t(null,n)}))}function c(t){var r=e("fs").readFileSync(t);return l(v.nodeBufferToArrayBuffer(r))}var h=e("tiny-inflate"),d=e("./encoding"),f=e("./font"),p=e("./glyph"),m=e("./parse"),g=e("./path"),v=e("./util"),y=e("./tables/cmap"),b=e("./tables/cff"),E=e("./tables/fvar"),x=e("./tables/glyf"),w=e("./tables/gpos"),T=e("./tables/gsub"),_=e("./tables/head"),S=e("./tables/hhea"),M=e("./tables/hmtx"),R=e("./tables/kern"),A=e("./tables/ltag"),C=e("./tables/loca"),L=e("./tables/maxp"),O=e("./tables/name"),I=e("./tables/os2"),P=e("./tables/post"),H=e("./tables/meta");r._parse=m,r.Font=f.Font,r.Glyph=p.Glyph,r.Path=g.Path,r.parse=l,r.load=u,r.loadSync=c},{"./encoding":4,"./font":5,"./glyph":6,"./parse":10,"./path":11,"./tables/cff":14,"./tables/cmap":15,"./tables/fvar":16,"./tables/glyf":17,"./tables/gpos":18,"./tables/gsub":19,"./tables/head":20,"./tables/hhea":21,"./tables/hmtx":22,"./tables/kern":23,"./tables/loca":24,"./tables/ltag":25,"./tables/maxp":26,"./tables/meta":27,"./tables/name":28,"./tables/os2":29,"./tables/post":30,"./util":33,fs:void 0,"tiny-inflate":1}],10:[function(e,t,r){"use strict";function n(e,t){return e.getUint16(t,!1)}function i(e,t){this.data=e,this.offset=t,this.relativeOffset=0}var a=e("./check");r.getByte=function(e,t){return e.getUint8(t)},r.getCard8=r.getByte,r.getUShort=r.getCard16=n,r.getShort=function(e,t){return e.getInt16(t,!1)},r.getULong=function(e,t){return e.getUint32(t,!1)},r.getFixed=function(e,t){return e.getInt16(t,!1)+e.getUint16(t+2,!1)/65535},r.getTag=function(e,t){for(var r="",n=t;t+4>n;n+=1)r+=String.fromCharCode(e.getInt8(n));return r},r.getOffset=function(e,t,r){for(var n=0,i=0;r>i;i+=1)n<<=8,n+=e.getUint8(t+i);return n},r.getBytes=function(e,t,r){for(var n=[],i=t;r>i;i+=1)n.push(e.getUint8(i));return n},r.bytesToString=function(e){for(var t="",r=0;r<e.length;r+=1)t+=String.fromCharCode(e[r]);return t};var o={byte:1,uShort:2,short:2,uLong:4,fixed:4,longDateTime:8,tag:4};i.prototype.parseByte=function(){var e=this.data.getUint8(this.offset+this.relativeOffset);return this.relativeOffset+=1,e},i.prototype.parseChar=function(){var e=this.data.getInt8(this.offset+this.relativeOffset);return this.relativeOffset+=1,e},i.prototype.parseCard8=i.prototype.parseByte,i.prototype.parseUShort=function(){var e=this.data.getUint16(this.offset+this.relativeOffset);return this.relativeOffset+=2,e},i.prototype.parseCard16=i.prototype.parseUShort,i.prototype.parseSID=i.prototype.parseUShort,i.prototype.parseOffset16=i.prototype.parseUShort,i.prototype.parseShort=function(){var e=this.data.getInt16(this.offset+this.relativeOffset);return this.relativeOffset+=2,e},i.prototype.parseF2Dot14=function(){var e=this.data.getInt16(this.offset+this.relativeOffset)/16384;return this.relativeOffset+=2,e},i.prototype.parseULong=function(){var e=r.getULong(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,e},i.prototype.parseFixed=function(){var e=r.getFixed(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,e},i.prototype.parseString=function(e){var t=this.data,r=this.offset+this.relativeOffset,n="";this.relativeOffset+=e;for(var i=0;e>i;i++)n+=String.fromCharCode(t.getUint8(r+i));return n},i.prototype.parseTag=function(){return this.parseString(4)},i.prototype.parseLongDateTime=function(){var e=r.getULong(this.data,this.offset+this.relativeOffset+4);return e-=2082844800,this.relativeOffset+=8,e},i.prototype.parseVersion=function(){var e=n(this.data,this.offset+this.relativeOffset),t=n(this.data,this.offset+this.relativeOffset+2);return this.relativeOffset+=4,e+t/4096/10},i.prototype.skip=function(e,t){void 0===t&&(t=1),this.relativeOffset+=o[e]*t},i.prototype.parseOffset16List=i.prototype.parseUShortList=function(e){void 0===e&&(e=this.parseUShort());for(var t=new Array(e),r=this.data,n=this.offset+this.relativeOffset,i=0;e>i;i++)t[i]=r.getUint16(n),n+=2;return this.relativeOffset+=2*e,t},i.prototype.parseList=function(e,t){t||(t=e,e=this.parseUShort());for(var r=new Array(e),n=0;e>n;n++)r[n]=t.call(this);return r},i.prototype.parseRecordList=function(e,t){t||(t=e,e=this.parseUShort());for(var r=new Array(e),n=Object.keys(t),i=0;e>i;i++){for(var a={},o=0;o<n.length;o++){var s=n[o],l=t[s];a[s]=l.call(this)}r[i]=a}return r},i.prototype.parseStruct=function(e){if("function"==typeof e)return e.call(this);for(var t=Object.keys(e),r={},n=0;n<t.length;n++){var i=t[n],a=e[i];r[i]=a.call(this)}return r},i.prototype.parsePointer=function(e){var t=this.parseOffset16();return t>0?new i(this.data,this.offset+t).parseStruct(e):void 0},i.prototype.parseListOfLists=function(e){for(var t=this.parseOffset16List(),r=t.length,n=this.relativeOffset,i=new Array(r),a=0;r>a;a++){var o=t[a];if(0!==o)if(this.relativeOffset=o,e){for(var s=this.parseOffset16List(),l=new Array(s.length),u=0;u<s.length;u++)this.relativeOffset=o+s[u],l[u]=e.call(this);i[a]=l}else i[a]=this.parseUShortList();else i[a]=void 0}return this.relativeOffset=n,i},i.prototype.parseCoverage=function(){var e=this.offset+this.relativeOffset,t=this.parseUShort(),r=this.parseUShort();if(1===t)return{format:1,glyphs:this.parseUShortList(r)};if(2===t){for(var n=new Array(r),i=0;r>i;i++)n[i]={start:this.parseUShort(),end:this.parseUShort(),index:this.parseUShort()};return{format:2,ranges:n}}a.assert(!1,"0x"+e.toString(16)+": Coverage format must be 1 or 2.")},i.prototype.parseClassDef=function(){var e=this.offset+this.relativeOffset,t=this.parseUShort();return 1===t?{format:1,startGlyph:this.parseUShort(),classes:this.parseUShortList()}:2===t?{format:2,ranges:this.parseRecordList({start:i.uShort,end:i.uShort,classId:i.uShort})}:void a.assert(!1,"0x"+e.toString(16)+": ClassDef format must be 1 or 2.")},i.list=function(e,t){return function(){return this.parseList(e,t)}},i.recordList=function(e,t){return function(){return this.parseRecordList(e,t)}},i.pointer=function(e){return function(){return this.parsePointer(e)}},i.tag=i.prototype.parseTag,i.byte=i.prototype.parseByte,i.uShort=i.offset16=i.prototype.parseUShort,i.uShortList=i.prototype.parseUShortList,i.struct=i.prototype.parseStruct,i.coverage=i.prototype.parseCoverage,i.classDef=i.prototype.parseClassDef;var s={reserved:i.uShort,reqFeatureIndex:i.uShort,featureIndexes:i.uShortList};i.prototype.parseScriptList=function(){return this.parsePointer(i.recordList({tag:i.tag,script:i.pointer({defaultLangSys:i.pointer(s),langSysRecords:i.recordList({tag:i.tag,langSys:i.pointer(s)})})}))},i.prototype.parseFeatureList=function(){return this.parsePointer(i.recordList({tag:i.tag,feature:i.pointer({featureParams:i.offset16,lookupListIndexes:i.uShortList})}))},i.prototype.parseLookupList=function(e){return this.parsePointer(i.list(i.pointer((function(){var t=this.parseUShort();a.argument(t>=1&&8>=t,"GSUB lookup type "+t+" unknown.");var r=this.parseUShort(),n=16&r;return{lookupType:t,lookupFlag:r,subtables:this.parseList(i.pointer(e[t])),markFilteringSet:n?this.parseUShort():void 0}}))))},r.Parser=i},{"./check":2}],11:[function(e,t,r){"use strict";function n(){this.commands=[],this.fill="black",this.stroke=null,this.strokeWidth=1}n.prototype.moveTo=function(e,t){this.commands.push({type:"M",x:e,y:t})},n.prototype.lineTo=function(e,t){this.commands.push({type:"L",x:e,y:t})},n.prototype.curveTo=n.prototype.bezierCurveTo=function(e,t,r,n,i,a){this.commands.push({type:"C",x1:e,y1:t,x2:r,y2:n,x:i,y:a})},n.prototype.quadTo=n.prototype.quadraticCurveTo=function(e,t,r,n){this.commands.push({type:"Q",x1:e,y1:t,x:r,y:n})},n.prototype.close=n.prototype.closePath=function(){this.commands.push({type:"Z"})},n.prototype.extend=function(e){e.commands&&(e=e.commands),Array.prototype.push.apply(this.commands,e)},n.prototype.draw=function(e){e.beginPath();for(var t=0;t<this.commands.length;t+=1){var r=this.commands[t];"M"===r.type?e.moveTo(r.x,r.y):"L"===r.type?e.lineTo(r.x,r.y):"C"===r.type?e.bezierCurveTo(r.x1,r.y1,r.x2,r.y2,r.x,r.y):"Q"===r.type?e.quadraticCurveTo(r.x1,r.y1,r.x,r.y):"Z"===r.type&&e.closePath()}this.fill&&(e.fillStyle=this.fill,e.fill()),this.stroke&&(e.strokeStyle=this.stroke,e.lineWidth=this.strokeWidth,e.stroke())},n.prototype.toPathData=function(e){function t(t){return Math.round(t)===t?""+Math.round(t):t.toFixed(e)}function r(){for(var e="",r=0;r<arguments.length;r+=1){var n=arguments[r];n>=0&&r>0&&(e+=" "),e+=t(n)}return e}e=void 0!==e?e:2;for(var n="",i=0;i<this.commands.length;i+=1){var a=this.commands[i];"M"===a.type?n+="M"+r(a.x,a.y):"L"===a.type?n+="L"+r(a.x,a.y):"C"===a.type?n+="C"+r(a.x1,a.y1,a.x2,a.y2,a.x,a.y):"Q"===a.type?n+="Q"+r(a.x1,a.y1,a.x,a.y):"Z"===a.type&&(n+="Z")}return n},n.prototype.toSVG=function(e){var t='<path d="';return t+=this.toPathData(e),t+='"',this.fill&&"black"!==this.fill&&(t+=null===this.fill?' fill="none"':' fill="'+this.fill+'"'),this.stroke&&(t+=' stroke="'+this.stroke+'" stroke-width="'+this.strokeWidth+'"'),t+"/>"},r.Path=n},{}],12:[function(e,t,r){"use strict";function n(e,t){var r=e.length;if(r!==t.length)return!1;for(var n=0;r>n;n++)if(e[n]!==t[n])return!1;return!0}function i(e,t,r){for(var n=e.subtables,i=0;i<n.length;i++){var a=n[i];if(a.substFormat===t)return a}return r?(n.push(r),r):void 0}var a=e("./check"),o=e("./layout"),s=function(e){this.font=e};s.prototype=o,s.prototype.getGsubTable=function(e){var t=this.font.tables.gsub;return!t&&e&&(this.font.tables.gsub=t={version:1,scripts:[{tag:"DFLT",script:{defaultLangSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]},langSysRecords:[]}}],features:[],lookups:[]}),t},s.prototype.getSingle=function(e,t,r){var n=[],i=this.getLookupTable(t,r,e,1);if(!i)return n;for(var a=i.subtables,o=0;o<a.length;o++){var s,l=a[o],u=this.expandCoverage(l.coverage);if(1===l.substFormat){var c=l.deltaGlyphId;for(s=0;s<u.length;s++){var h=u[s];n.push({sub:h,by:h+c})}}else{var d=l.substitute;for(s=0;s<u.length;s++)n.push({sub:u[s],by:d[s]})}}return n},s.prototype.getAlternates=function(e,t,r){var n=[],i=this.getLookupTable(t,r,e,3);if(!i)return n;for(var a=i.subtables,o=0;o<a.length;o++)for(var s=a[o],l=this.expandCoverage(s.coverage),u=s.alternateSets,c=0;c<l.length;c++)n.push({sub:l[c],by:u[c]});return n},s.prototype.getLigatures=function(e,t,r){var n=[],i=this.getLookupTable(t,r,e,4);if(!i)return[];for(var a=i.subtables,o=0;o<a.length;o++)for(var s=a[o],l=this.expandCoverage(s.coverage),u=s.ligatureSets,c=0;c<l.length;c++)for(var h=l[c],d=u[c],f=0;f<d.length;f++){var p=d[f];n.push({sub:[h].concat(p.components),by:p.ligGlyph})}return n},s.prototype.addSingle=function(e,t,r,n){var o=i(this.getLookupTable(r,n,e,1,!0),2,{substFormat:2,coverage:{format:1,glyphs:[]},substitute:[]});a.assert(1===o.coverage.format,"Ligature: unable to modify coverage table format "+o.coverage.format);var s=t.sub,l=this.binSearch(o.coverage.glyphs,s);0>l&&(l=-1-l,o.coverage.glyphs.splice(l,0,s),o.substitute.splice(l,0,0)),o.substitute[l]=t.by},s.prototype.addAlternate=function(e,t,r,n){var o=i(this.getLookupTable(r,n,e,3,!0),1,{substFormat:1,coverage:{format:1,glyphs:[]},alternateSets:[]});a.assert(1===o.coverage.format,"Ligature: unable to modify coverage table format "+o.coverage.format);var s=t.sub,l=this.binSearch(o.coverage.glyphs,s);0>l&&(l=-1-l,o.coverage.glyphs.splice(l,0,s),o.alternateSets.splice(l,0,0)),o.alternateSets[l]=t.by},s.prototype.addLigature=function(e,t,r,i){r=r||"DFLT",i=i||"DFLT";var o=this.getLookupTable(r,i,e,4,!0),s=o.subtables[0];s||(s={substFormat:1,coverage:{format:1,glyphs:[]},ligatureSets:[]},o.subtables[0]=s),a.assert(1===s.coverage.format,"Ligature: unable to modify coverage table format "+s.coverage.format);var l=t.sub[0],u=t.sub.slice(1),c={ligGlyph:t.by,components:u},h=this.binSearch(s.coverage.glyphs,l);if(h>=0){for(var d=s.ligatureSets[h],f=0;f<d.length;f++)if(n(d[f].components,u))return;d.push(c)}else h=-1-h,s.coverage.glyphs.splice(h,0,l),s.ligatureSets.splice(h,0,[c])},s.prototype.getFeature=function(e,t,r){if(t=t||"DFLT",r=r||"DFLT",/ss\d\d/.test(e))return this.getSingle(e,t,r);switch(e){case"aalt":case"salt":return this.getSingle(e,t,r).concat(this.getAlternates(e,t,r));case"dlig":case"liga":case"rlig":return this.getLigatures(e,t,r)}},s.prototype.add=function(e,t,r,n){if(r=r||"DFLT",n=n||"DFLT",/ss\d\d/.test(e))return this.addSingle(e,t,r,n);switch(e){case"aalt":case"salt":return"number"==typeof t.by?this.addSingle(e,t,r,n):this.addAlternate(e,t,r,n);case"dlig":case"liga":case"rlig":return this.addLigature(e,t,r,n)}},t.exports=s},{"./check":2,"./layout":8}],13:[function(e,t,r){"use strict";function n(e,t,r){var n;for(n=0;n<t.length;n+=1){var i=t[n];this[i.name]=i.value}if(this.tableName=e,this.fields=t,r){var a=Object.keys(r);for(n=0;n<a.length;n+=1){var o=a[n],s=r[o];void 0!==this[o]&&(this[o]=s)}}}function i(e,t,r){void 0===r&&(r=t.length);var n=new Array(t.length+1);n[0]={name:e+"Count",type:"USHORT",value:r};for(var i=0;i<t.length;i++)n[i+1]={name:e+i,type:"USHORT",value:t[i]};return n}function a(e,t,r){var n=t.length,i=new Array(n+1);i[0]={name:e+"Count",type:"USHORT",value:n};for(var a=0;n>a;a++)i[a+1]={name:e+a,type:"TABLE",value:r(t[a],a)};return i}function o(e,t,r){var n=t.length,i=[];i[0]={name:e+"Count",type:"USHORT",value:n};for(var a=0;n>a;a++)i=i.concat(r(t[a],a));return i}function s(e){1===e.format?n.call(this,"coverageTable",[{name:"coverageFormat",type:"USHORT",value:1}].concat(i("glyph",e.glyphs))):h.assert(!1,"Can't create coverage table format 2 yet.")}function l(e){n.call(this,"scriptListTable",o("scriptRecord",e,(function(e,t){var r=e.script,a=r.defaultLangSys;return h.assert(!!a,"Unable to write GSUB: script "+e.tag+" has no default language system."),[{name:"scriptTag"+t,type:"TAG",value:e.tag},{name:"script"+t,type:"TABLE",value:new n("scriptTable",[{name:"defaultLangSys",type:"TABLE",value:new n("defaultLangSys",[{name:"lookupOrder",type:"USHORT",value:0},{name:"reqFeatureIndex",type:"USHORT",value:a.reqFeatureIndex}].concat(i("featureIndex",a.featureIndexes)))}].concat(o("langSys",r.langSysRecords,(function(e,t){var r=e.langSys;return[{name:"langSysTag"+t,type:"TAG",value:e.tag},{name:"langSys"+t,type:"TABLE",value:new n("langSys",[{name:"lookupOrder",type:"USHORT",value:0},{name:"reqFeatureIndex",type:"USHORT",value:r.reqFeatureIndex}].concat(i("featureIndex",r.featureIndexes)))}]}))))}]})))}function u(e){n.call(this,"featureListTable",o("featureRecord",e,(function(e,t){var r=e.feature;return[{name:"featureTag"+t,type:"TAG",value:e.tag},{name:"feature"+t,type:"TABLE",value:new n("featureTable",[{name:"featureParams",type:"USHORT",value:r.featureParams}].concat(i("lookupListIndex",r.lookupListIndexes)))}]})))}function c(e,t){n.call(this,"lookupListTable",a("lookup",e,(function(e){var r=t[e.lookupType];return h.assert(!!r,"Unable to write GSUB lookup type "+e.lookupType+" tables."),new n("lookupTable",[{name:"lookupType",type:"USHORT",value:e.lookupType},{name:"lookupFlag",type:"USHORT",value:e.lookupFlag}].concat(a("subtable",e.subtables,r)))})))}var h=e("./check"),d=e("./types").encode,f=e("./types").sizeOf;n.prototype.encode=function(){return d.TABLE(this)},n.prototype.sizeOf=function(){return f.TABLE(this)},s.prototype=Object.create(n.prototype),s.prototype.constructor=s,l.prototype=Object.create(n.prototype),l.prototype.constructor=l,u.prototype=Object.create(n.prototype),u.prototype.constructor=u,c.prototype=Object.create(n.prototype),c.prototype.constructor=c,r.Record=r.Table=n,r.Coverage=s,r.ScriptList=l,r.FeatureList=u,r.LookupList=c,r.ushortList=i,r.tableList=a,r.recordList=o},{"./check":2,"./types":32}],14:[function(e,t,r){"use strict";function i(e,t){if(e===t)return!0;if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r+=1)if(!i(e[r],t[r]))return!1;return!0}return!1}function a(e,t,r){var n,i,a,o=[],s=[],l=k.getCard16(e,t);if(0!==l){var u=k.getByte(e,t+2);i=t+(l+1)*u+2;var c=t+3;for(n=0;l+1>n;n+=1)o.push(k.getOffset(e,c,u)),c+=u;a=i+o[l]}else a=t+2;for(n=0;n<o.length-1;n+=1){var h=k.getBytes(e,i+o[n],i+o[n+1]);r&&(h=r(h)),s.push(h)}return{objects:s,startOffset:t,endOffset:a}}function o(e){for(var t="",r=15,n=["0","1","2","3","4","5","6","7","8","9",".","E","E-",null,"-"];;){var i=e.parseByte(),a=i>>4,o=15&i;if(a===r)break;if(t+=n[a],o===r)break;t+=n[o]}return parseFloat(t)}function s(e,t){if(28===t)return e.parseByte()<<8|e.parseByte();if(29===t)return e.parseByte()<<24|e.parseByte()<<16|e.parseByte()<<8|e.parseByte();if(30===t)return o(e);if(t>=32&&246>=t)return t-139;if(t>=247&&250>=t)return 256*(t-247)+e.parseByte()+108;if(t>=251&&254>=t)return 256*-(t-251)-e.parseByte()-108;throw new Error("Invalid b0 "+t)}function l(e){for(var t={},r=0;r<e.length;r+=1){var n,i=e[r][0],a=e[r][1];if(n=1===a.length?a[0]:a,t.hasOwnProperty(i))throw new Error("Object "+t+" already has key "+i);t[i]=n}return t}function u(e,t,r){t=void 0!==t?t:0;var n=new k.Parser(e,t),i=[],a=[];for(r=void 0!==r?r:e.length;n.relativeOffset<r;){var o=n.parseByte();21>=o?(12===o&&(o=1200+n.parseByte()),i.push([o,a]),a=[]):a.push(s(n,o))}return l(i)}function c(e,t){return 390>=t?P.cffStandardStrings[t]:e[t-391]}function h(e,t,r){for(var n={},i=0;i<t.length;i+=1){var a=t[i],o=e[a.op];void 0===o&&(o=void 0!==a.value?a.value:null),"SID"===a.type&&(o=c(r,o)),n[a.name]=o}return n}function d(e,t){var r={};return r.formatMajor=k.getCard8(e,t),r.formatMinor=k.getCard8(e,t+1),r.size=k.getCard8(e,t+2),r.offsetSize=k.getCard8(e,t+3),r.startOffset=t,r.endOffset=t+4,r}function f(e,t){return h(u(e,0,e.byteLength),D,t)}function p(e,t,r,n){return h(u(e,t,r),F,n)}function m(e,t,r,n){var i,a,o,s=new k.Parser(e,t);r-=1;var l=[".notdef"],u=s.parseCard8();if(0===u)for(i=0;r>i;i+=1)a=s.parseSID(),l.push(c(n,a));else if(1===u)for(;l.length<=r;)for(a=s.parseSID(),o=s.parseCard8(),i=0;o>=i;i+=1)l.push(c(n,a)),a+=1;else{if(2!==u)throw new Error("Unknown charset format "+u);for(;l.length<=r;)for(a=s.parseSID(),o=s.parseCard16(),i=0;o>=i;i+=1)l.push(c(n,a)),a+=1}return l}function g(e,t,r){var n,i,a={},o=new k.Parser(e,t),s=o.parseCard8();if(0===s){var l=o.parseCard8();for(n=0;l>n;n+=1)a[i=o.parseCard8()]=n}else{if(1!==s)throw new Error("Unknown encoding format "+s);var u=o.parseCard8();for(i=1,n=0;u>n;n+=1)for(var c=o.parseCard8(),h=o.parseCard8(),d=c;c+h>=d;d+=1)a[d]=i,i+=1}return new P.CffEncoding(a,r)}function v(e,t,r){function i(e,t){g&&h.closePath(),h.moveTo(e,t),g=!0}function a(){d.length%2!=0&&!p&&(m=d.shift()+e.nominalWidthX),f+=d.length>>1,d.length=0,p=!0}function o(r){for(var b,E,x,w,T,_,S,M,R,A,C,L,O=0;O<r.length;){var I=r[O];switch(O+=1,I){case 1:case 3:case 18:case 23:a();break;case 4:d.length>1&&!p&&(m=d.shift()+e.nominalWidthX,p=!0),y+=d.pop(),i(v,y);break;case 5:for(;d.length>0;)v+=d.shift(),y+=d.shift(),h.lineTo(v,y);break;case 6:for(;d.length>0&&(v+=d.shift(),h.lineTo(v,y),0!==d.length);)y+=d.shift(),h.lineTo(v,y);break;case 7:for(;d.length>0&&(y+=d.shift(),h.lineTo(v,y),0!==d.length);)v+=d.shift(),h.lineTo(v,y);break;case 8:for(;d.length>0;)s=v+d.shift(),l=y+d.shift(),u=s+d.shift(),c=l+d.shift(),v=u+d.shift(),y=c+d.shift(),h.curveTo(s,l,u,c,v,y);break;case 10:T=d.pop()+e.subrsBias,(_=e.subrs[T])&&o(_);break;case 11:return;case 12:switch(I=r[O],O+=1,I){case 35:s=v+d.shift(),l=y+d.shift(),u=s+d.shift(),c=l+d.shift(),S=u+d.shift(),M=c+d.shift(),R=S+d.shift(),A=M+d.shift(),C=R+d.shift(),L=A+d.shift(),v=C+d.shift(),y=L+d.shift(),d.shift(),h.curveTo(s,l,u,c,S,M),h.curveTo(R,A,C,L,v,y);break;case 34:s=v+d.shift(),l=y,u=s+d.shift(),c=l+d.shift(),S=u+d.shift(),M=c,R=S+d.shift(),A=c,C=R+d.shift(),L=y,v=C+d.shift(),h.curveTo(s,l,u,c,S,M),h.curveTo(R,A,C,L,v,y);break;case 36:s=v+d.shift(),l=y+d.shift(),u=s+d.shift(),c=l+d.shift(),S=u+d.shift(),M=c,R=S+d.shift(),A=c,C=R+d.shift(),L=A+d.shift(),v=C+d.shift(),h.curveTo(s,l,u,c,S,M),h.curveTo(R,A,C,L,v,y);break;case 37:s=v+d.shift(),l=y+d.shift(),u=s+d.shift(),c=l+d.shift(),S=u+d.shift(),M=c+d.shift(),R=S+d.shift(),A=M+d.shift(),C=R+d.shift(),L=A+d.shift(),Math.abs(C-v)>Math.abs(L-y)?v=C+d.shift():y=L+d.shift(),h.curveTo(s,l,u,c,S,M),h.curveTo(R,A,C,L,v,y);break;default:n.log("Glyph "+t.index+": unknown operator 1200"+I),d.length=0}break;case 14:d.length>0&&!p&&(m=d.shift()+e.nominalWidthX,p=!0),g&&(h.closePath(),g=!1);break;case 19:case 20:a(),O+=f+7>>3;break;case 21:d.length>2&&!p&&(m=d.shift()+e.nominalWidthX,p=!0),y+=d.pop(),i(v+=d.pop(),y);break;case 22:d.length>1&&!p&&(m=d.shift()+e.nominalWidthX,p=!0),i(v+=d.pop(),y);break;case 24:for(;d.length>2;)s=v+d.shift(),l=y+d.shift(),u=s+d.shift(),c=l+d.shift(),v=u+d.shift(),y=c+d.shift(),h.curveTo(s,l,u,c,v,y);v+=d.shift(),y+=d.shift(),h.lineTo(v,y);break;case 25:for(;d.length>6;)v+=d.shift(),y+=d.shift(),h.lineTo(v,y);s=v+d.shift(),l=y+d.shift(),u=s+d.shift(),c=l+d.shift(),v=u+d.shift(),y=c+d.shift(),h.curveTo(s,l,u,c,v,y);break;case 26:for(d.length%2&&(v+=d.shift());d.length>0;)s=v,l=y+d.shift(),u=s+d.shift(),c=l+d.shift(),v=u,y=c+d.shift(),h.curveTo(s,l,u,c,v,y);break;case 27:for(d.length%2&&(y+=d.shift());d.length>0;)s=v+d.shift(),l=y,u=s+d.shift(),c=l+d.shift(),v=u+d.shift(),y=c,h.curveTo(s,l,u,c,v,y);break;case 28:b=r[O],E=r[O+1],d.push((b<<24|E<<16)>>16),O+=2;break;case 29:T=d.pop()+e.gsubrsBias,(_=e.gsubrs[T])&&o(_);break;case 30:for(;d.length>0&&(s=v,l=y+d.shift(),u=s+d.shift(),c=l+d.shift(),v=u+d.shift(),y=c+(1===d.length?d.shift():0),h.curveTo(s,l,u,c,v,y),0!==d.length);)s=v+d.shift(),l=y,u=s+d.shift(),c=l+d.shift(),y=c+d.shift(),v=u+(1===d.length?d.shift():0),h.curveTo(s,l,u,c,v,y);break;case 31:for(;d.length>0&&(s=v+d.shift(),l=y,u=s+d.shift(),c=l+d.shift(),y=c+d.shift(),v=u+(1===d.length?d.shift():0),h.curveTo(s,l,u,c,v,y),0!==d.length);)s=v,l=y+d.shift(),u=s+d.shift(),c=l+d.shift(),v=u+d.shift(),y=c+(1===d.length?d.shift():0),h.curveTo(s,l,u,c,v,y);break;default:32>I?n.log("Glyph "+t.index+": unknown operator "+I):247>I?d.push(I-139):251>I?(b=r[O],O+=1,d.push(256*(I-247)+b+108)):255>I?(b=r[O],O+=1,d.push(256*-(I-251)-b-108)):(b=r[O],E=r[O+1],x=r[O+2],w=r[O+3],O+=4,d.push((b<<24|E<<16|x<<8|w)/65536))}}}var s,l,u,c,h=new N.Path,d=[],f=0,p=!1,m=e.defaultWidthX,g=!1,v=0,y=0;return o(r),t.advanceWidth=m,h}function y(e){return e.length<1240?107:e.length<33900?1131:32768}function b(e,t,r){r.tables.cff={};var n=a(e,d(e,t).endOffset,k.bytesToString),i=a(e,n.endOffset),o=a(e,i.endOffset,k.bytesToString),s=a(e,o.endOffset);r.gsubrs=s.objects,r.gsubrsBias=y(r.gsubrs);var l=f(new DataView(new Uint8Array(i.objects[0]).buffer),o.objects);r.tables.cff.topDict=l;var u=t+l.private[1],c=p(e,u,l.private[0],o.objects);if(r.defaultWidthX=c.defaultWidthX,r.nominalWidthX=c.nominalWidthX,0!==c.subrs){var h=a(e,u+c.subrs);r.subrs=h.objects,r.subrsBias=y(r.subrs)}else r.subrs=[],r.subrsBias=0;var b=a(e,t+l.charStrings);r.nGlyphs=b.objects.length;var E=m(e,t+l.charset,r.nGlyphs,o.objects);r.cffEncoding=0===l.encoding?new P.CffEncoding(P.cffStandardEncoding,E):1===l.encoding?new P.CffEncoding(P.cffExpertEncoding,E):g(e,t+l.encoding,E),r.encoding=r.encoding||r.cffEncoding,r.glyphs=new H.GlyphSet(r);for(var x=0;x<r.nGlyphs;x+=1){var w=b.objects[x];r.glyphs.push(x,H.cffGlyphLoader(r,x,v,w))}}function E(e,t){var r,n=P.cffStandardStrings.indexOf(e);return n>=0&&(r=n),(n=t.indexOf(e))>=0?r=n+P.cffStandardStrings.length:(r=P.cffStandardStrings.length+t.length,t.push(e)),r}function x(){return new U.Record("Header",[{name:"major",type:"Card8",value:1},{name:"minor",type:"Card8",value:0},{name:"hdrSize",type:"Card8",value:4},{name:"major",type:"Card8",value:1}])}function w(e){var t=new U.Record("Name INDEX",[{name:"names",type:"INDEX",value:[]}]);t.names=[];for(var r=0;r<e.length;r+=1)t.names.push({name:"name_"+r,type:"NAME",value:e[r]});return t}function T(e,t,r){for(var n={},a=0;a<e.length;a+=1){var o=e[a],s=t[o.name];void 0===s||i(s,o.value)||("SID"===o.type&&(s=E(s,r)),n[o.op]={name:o.name,type:o.type,value:s})}return n}function _(e,t){var r=new U.Record("Top DICT",[{name:"dict",type:"DICT",value:{}}]);return r.dict=T(D,e,t),r}function S(e){var t=new U.Record("Top DICT INDEX",[{name:"topDicts",type:"INDEX",value:[]}]);return t.topDicts=[{name:"topDict_0",type:"TABLE",value:e}],t}function M(e){var t=new U.Record("String INDEX",[{name:"strings",type:"INDEX",value:[]}]);t.strings=[];for(var r=0;r<e.length;r+=1)t.strings.push({name:"string_"+r,type:"STRING",value:e[r]});return t}function R(){return new U.Record("Global Subr INDEX",[{name:"subrs",type:"INDEX",value:[]}])}function A(e,t){for(var r=new U.Record("Charsets",[{name:"format",type:"Card8",value:0}]),n=0;n<e.length;n+=1){var i=E(e[n],t);r.fields.push({name:"glyph_"+n,type:"SID",value:i})}return r}function C(e){var t=[],r=e.path;t.push({name:"width",type:"NUMBER",value:e.advanceWidth});for(var n=0,i=0,a=0;a<r.commands.length;a+=1){var o,s,l=r.commands[a];if("Q"===l.type){var u=1/3,c=2/3;l={type:"C",x:l.x,y:l.y,x1:u*n+c*l.x1,y1:u*i+c*l.y1,x2:u*l.x+c*l.x1,y2:u*l.y+c*l.y1}}if("M"===l.type)o=Math.round(l.x-n),s=Math.round(l.y-i),t.push({name:"dx",type:"NUMBER",value:o}),t.push({name:"dy",type:"NUMBER",value:s}),t.push({name:"rmoveto",type:"OP",value:21}),n=Math.round(l.x),i=Math.round(l.y);else if("L"===l.type)o=Math.round(l.x-n),s=Math.round(l.y-i),t.push({name:"dx",type:"NUMBER",value:o}),t.push({name:"dy",type:"NUMBER",value:s}),t.push({name:"rlineto",type:"OP",value:5}),n=Math.round(l.x),i=Math.round(l.y);else if("C"===l.type){var h=Math.round(l.x1-n),d=Math.round(l.y1-i),f=Math.round(l.x2-l.x1),p=Math.round(l.y2-l.y1);o=Math.round(l.x-l.x2),s=Math.round(l.y-l.y2),t.push({name:"dx1",type:"NUMBER",value:h}),t.push({name:"dy1",type:"NUMBER",value:d}),t.push({name:"dx2",type:"NUMBER",value:f}),t.push({name:"dy2",type:"NUMBER",value:p}),t.push({name:"dx",type:"NUMBER",value:o}),t.push({name:"dy",type:"NUMBER",value:s}),t.push({name:"rrcurveto",type:"OP",value:8}),n=Math.round(l.x),i=Math.round(l.y)}}return t.push({name:"endchar",type:"OP",value:14}),t}function L(e){for(var t=new U.Record("CharStrings INDEX",[{name:"charStrings",type:"INDEX",value:[]}]),r=0;r<e.length;r+=1){var n=e.get(r),i=C(n);t.charStrings.push({name:n.name,type:"CHARSTRING",value:i})}return t}function O(e,t){var r=new U.Record("Private DICT",[{name:"dict",type:"DICT",value:{}}]);return r.dict=T(F,e,t),r}function I(e,t){for(var r,n=new U.Table("CFF ",[{name:"header",type:"RECORD"},{name:"nameIndex",type:"RECORD"},{name:"topDictIndex",type:"RECORD"},{name:"stringIndex",type:"RECORD"},{name:"globalSubrIndex",type:"RECORD"},{name:"charsets",type:"RECORD"},{name:"charStringsIndex",type:"RECORD"},{name:"privateDict",type:"RECORD"}]),i=1/t.unitsPerEm,a={version:t.version,fullName:t.fullName,familyName:t.familyName,weight:t.weightName,fontBBox:t.fontBBox||[0,0,0,0],fontMatrix:[i,0,0,i,0,0],charset:999,encoding:0,charStrings:999,private:[0,999]},o={},s=[],l=1;l<e.length;l+=1)r=e.get(l),s.push(r.name);var u=[];n.header=x(),n.nameIndex=w([t.postScriptName]);var c=_(a,u);n.topDictIndex=S(c),n.globalSubrIndex=R(),n.charsets=A(s,u),n.charStringsIndex=L(e),n.privateDict=O(o,u),n.stringIndex=M(u);var h=n.header.sizeOf()+n.nameIndex.sizeOf()+n.topDictIndex.sizeOf()+n.stringIndex.sizeOf()+n.globalSubrIndex.sizeOf();return a.charset=h,a.encoding=0,a.charStrings=a.charset+n.charsets.sizeOf(),a.private[1]=a.charStrings+n.charStringsIndex.sizeOf(),c=_(a,u),n.topDictIndex=S(c),n}var P=e("../encoding"),H=e("../glyphset"),k=e("../parse"),N=e("../path"),U=e("../table"),D=[{name:"version",op:0,type:"SID"},{name:"notice",op:1,type:"SID"},{name:"copyright",op:1200,type:"SID"},{name:"fullName",op:2,type:"SID"},{name:"familyName",op:3,type:"SID"},{name:"weight",op:4,type:"SID"},{name:"isFixedPitch",op:1201,type:"number",value:0},{name:"italicAngle",op:1202,type:"number",value:0},{name:"underlinePosition",op:1203,type:"number",value:-100},{name:"underlineThickness",op:1204,type:"number",value:50},{name:"paintType",op:1205,type:"number",value:0},{name:"charstringType",op:1206,type:"number",value:2},{name:"fontMatrix",op:1207,type:["real","real","real","real","real","real"],value:[.001,0,0,.001,0,0]},{name:"uniqueId",op:13,type:"number"},{name:"fontBBox",op:5,type:["number","number","number","number"],value:[0,0,0,0]},{name:"strokeWidth",op:1208,type:"number",value:0},{name:"xuid",op:14,type:[],value:null},{name:"charset",op:15,type:"offset",value:0},{name:"encoding",op:16,type:"offset",value:0},{name:"charStrings",op:17,type:"offset",value:0},{name:"private",op:18,type:["number","offset"],value:[0,0]}],F=[{name:"subrs",op:19,type:"offset",value:0},{name:"defaultWidthX",op:20,type:"number",value:0},{name:"nominalWidthX",op:21,type:"number",value:0}];r.parse=b,r.make=I},{"../encoding":4,"../glyphset":7,"../parse":10,"../path":11,"../table":13}],15:[function(e,t,r){"use strict";function n(e,t){var r,n;for(t.parseUShort(),e.length=t.parseULong(),e.language=t.parseULong(),e.groupCount=n=t.parseULong(),e.glyphIndexMap={},r=0;n>r;r+=1)for(var i=t.parseULong(),a=t.parseULong(),o=t.parseULong(),s=i;a>=s;s+=1)e.glyphIndexMap[s]=o,o++}function i(e,t,r,n,i){var a,o;e.length=t.parseUShort(),e.language=t.parseUShort(),e.segCount=o=t.parseUShort()>>1,t.skip("uShort",3),e.glyphIndexMap={};var s=new c.Parser(r,n+i+14),l=new c.Parser(r,n+i+16+2*o),u=new c.Parser(r,n+i+16+4*o),h=new c.Parser(r,n+i+16+6*o),d=n+i+16+8*o;for(a=0;o-1>a;a+=1)for(var f,p=s.parseUShort(),m=l.parseUShort(),g=u.parseShort(),v=h.parseUShort(),y=m;p>=y;y+=1)0!==v?(d=h.offset+h.relativeOffset-2,d+=v,d+=2*(y-m),0!==(f=c.getUShort(r,d))&&(f=f+g&65535)):f=y+g&65535,e.glyphIndexMap[y]=f}function a(e,t){var r,a={};a.version=c.getUShort(e,t),u.argument(0===a.version,"cmap table version should be 0."),a.numTables=c.getUShort(e,t+2);var o=-1;for(r=a.numTables-1;r>=0;r-=1){var s=c.getUShort(e,t+4+8*r),l=c.getUShort(e,t+4+8*r+2);if(3===s&&(0===l||1===l||10===l)){o=c.getULong(e,t+4+8*r+4);break}}if(-1===o)return null;var h=new c.Parser(e,t+o);if(a.format=h.parseUShort(),12===a.format)n(a,h);else{if(4!==a.format)throw new Error("Only format 4 and 12 cmap tables are supported.");i(a,h,e,t,o)}return a}function o(e,t,r){e.segments.push({end:t,start:t,delta:-(t-r),offset:0})}function s(e){e.segments.push({end:65535,start:65535,delta:1,offset:0})}function l(e){var t,r,n=new h.Table("cmap",[{name:"version",type:"USHORT",value:0},{name:"numTables",type:"USHORT",value:1},{name:"platformID",type:"USHORT",value:3},{name:"encodingID",type:"USHORT",value:1},{name:"offset",type:"ULONG",value:12},{name:"format",type:"USHORT",value:4},{name:"length",type:"USHORT",value:0},{name:"language",type:"USHORT",value:0},{name:"segCountX2",type:"USHORT",value:0},{name:"searchRange",type:"USHORT",value:0},{name:"entrySelector",type:"USHORT",value:0},{name:"rangeShift",type:"USHORT",value:0}]);for(n.segments=[],t=0;t<e.length;t+=1){for(var i=e.get(t),a=0;a<i.unicodes.length;a+=1)o(n,i.unicodes[a],t);n.segments=n.segments.sort((function(e,t){return e.start-t.start}))}s(n),r=n.segments.length,n.segCountX2=2*r,n.searchRange=2*Math.pow(2,Math.floor(Math.log(r)/Math.log(2))),n.entrySelector=Math.log(n.searchRange/2)/Math.log(2),n.rangeShift=n.segCountX2-n.searchRange;var l=[],u=[],c=[],d=[],f=[];for(t=0;r>t;t+=1){var p=n.segments[t];l=l.concat({name:"end_"+t,type:"USHORT",value:p.end}),u=u.concat({name:"start_"+t,type:"USHORT",value:p.start}),c=c.concat({name:"idDelta_"+t,type:"SHORT",value:p.delta}),d=d.concat({name:"idRangeOffset_"+t,type:"USHORT",value:p.offset}),void 0!==p.glyphId&&(f=f.concat({name:"glyph_"+t,type:"USHORT",value:p.glyphId}))}return n.fields=n.fields.concat(l),n.fields.push({name:"reservedPad",type:"USHORT",value:0}),n.fields=n.fields.concat(u),n.fields=n.fields.concat(c),n.fields=n.fields.concat(d),n.fields=n.fields.concat(f),n.length=14+2*l.length+2+2*u.length+2*c.length+2*d.length+2*f.length,n}var u=e("../check"),c=e("../parse"),h=e("../table");r.parse=a,r.make=l},{"../check":2,"../parse":10,"../table":13}],16:[function(e,t,r){"use strict";function n(e,t){var r=JSON.stringify(e),n=256;for(var i in t){var a=parseInt(i);if(a&&!(256>a)){if(JSON.stringify(t[i])===r)return a;a>=n&&(n=a+1)}}return t[n]=e,n}function i(e,t,r){var i=n(t.name,r);return[{name:"tag_"+e,type:"TAG",value:t.tag},{name:"minValue_"+e,type:"FIXED",value:t.minValue<<16},{name:"defaultValue_"+e,type:"FIXED",value:t.defaultValue<<16},{name:"maxValue_"+e,type:"FIXED",value:t.maxValue<<16},{name:"flags_"+e,type:"USHORT",value:0},{name:"nameID_"+e,type:"USHORT",value:i}]}function a(e,t,r){var n={},i=new h.Parser(e,t);return n.tag=i.parseTag(),n.minValue=i.parseFixed(),n.defaultValue=i.parseFixed(),n.maxValue=i.parseFixed(),i.skip("uShort",1),n.name=r[i.parseUShort()]||{},n}function o(e,t,r,i){for(var a=[{name:"nameID_"+e,type:"USHORT",value:n(t.name,i)},{name:"flags_"+e,type:"USHORT",value:0}],o=0;o<r.length;++o){var s=r[o].tag;a.push({name:"axis_"+e+" "+s,type:"FIXED",value:t.coordinates[s]<<16})}return a}function s(e,t,r,n){var i={},a=new h.Parser(e,t);i.name=n[a.parseUShort()]||{},a.skip("uShort",1),i.coordinates={};for(var o=0;o<r.length;++o)i.coordinates[r[o].tag]=a.parseFixed();return i}function l(e,t){var r=new d.Table("fvar",[{name:"version",type:"ULONG",value:65536},{name:"offsetToData",type:"USHORT",value:0},{name:"countSizePairs",type:"USHORT",value:2},{name:"axisCount",type:"USHORT",value:e.axes.length},{name:"axisSize",type:"USHORT",value:20},{name:"instanceCount",type:"USHORT",value:e.instances.length},{name:"instanceSize",type:"USHORT",value:4+4*e.axes.length}]);r.offsetToData=r.sizeOf();for(var n=0;n<e.axes.length;n++)r.fields=r.fields.concat(i(n,e.axes[n],t));for(var a=0;a<e.instances.length;a++)r.fields=r.fields.concat(o(a,e.instances[a],e.axes,t));return r}function u(e,t,r){var n=new h.Parser(e,t),i=n.parseULong();c.argument(65536===i,"Unsupported fvar table version.");var o=n.parseOffset16();n.skip("uShort",1);for(var l=n.parseUShort(),u=n.parseUShort(),d=n.parseUShort(),f=n.parseUShort(),p=[],m=0;l>m;m++)p.push(a(e,t+o+m*u,r));for(var g=[],v=t+o+l*u,y=0;d>y;y++)g.push(s(e,v+y*f,p,r));return{axes:p,instances:g}}var c=e("../check"),h=e("../parse"),d=e("../table");r.make=l,r.parse=u},{"../check":2,"../parse":10,"../table":13}],17:[function(e,t,r){"use strict";function n(e,t,r,n,i){var a;return(t&n)>0?(a=e.parseByte(),0==(t&i)&&(a=-a),a=r+a):a=(t&i)>0?r:r+e.parseShort(),a}function i(e,t,r){var i,a,o=new d.Parser(t,r);if(e.numberOfContours=o.parseShort(),e._xMin=o.parseShort(),e._yMin=o.parseShort(),e._xMax=o.parseShort(),e._yMax=o.parseShort(),e.numberOfContours>0){var s,l=e.endPointIndices=[];for(s=0;s<e.numberOfContours;s+=1)l.push(o.parseUShort());for(e.instructionLength=o.parseUShort(),e.instructions=[],s=0;s<e.instructionLength;s+=1)e.instructions.push(o.parseByte());var u=l[l.length-1]+1;for(i=[],s=0;u>s;s+=1)if(a=o.parseByte(),i.push(a),(8&a)>0)for(var h=o.parseByte(),f=0;h>f;f+=1)i.push(a),s+=1;if(c.argument(i.length===u,"Bad flags."),l.length>0){var p,m=[];if(u>0){for(s=0;u>s;s+=1)a=i[s],(p={}).onCurve=!!(1&a),p.lastPointOfContour=l.indexOf(s)>=0,m.push(p);var g=0;for(s=0;u>s;s+=1)a=i[s],(p=m[s]).x=n(o,a,g,2,16),g=p.x;var v=0;for(s=0;u>s;s+=1)a=i[s],(p=m[s]).y=n(o,a,v,4,32),v=p.y}e.points=m}else e.points=[]}else if(0===e.numberOfContours)e.points=[];else{e.isComposite=!0,e.points=[],e.components=[];for(var y=!0;y;){i=o.parseUShort();var b={glyphIndex:o.parseUShort(),xScale:1,scale01:0,scale10:0,yScale:1,dx:0,dy:0};(1&i)>0?(2&i)>0?(b.dx=o.parseShort(),b.dy=o.parseShort()):b.matchedPoints=[o.parseUShort(),o.parseUShort()]:(2&i)>0?(b.dx=o.parseChar(),b.dy=o.parseChar()):b.matchedPoints=[o.parseByte(),o.parseByte()],(8&i)>0?b.xScale=b.yScale=o.parseF2Dot14():(64&i)>0?(b.xScale=o.parseF2Dot14(),b.yScale=o.parseF2Dot14()):(128&i)>0&&(b.xScale=o.parseF2Dot14(),b.scale01=o.parseF2Dot14(),b.scale10=o.parseF2Dot14(),b.yScale=o.parseF2Dot14()),e.components.push(b),y=!!(32&i)}}}function a(e,t){for(var r=[],n=0;n<e.length;n+=1){var i=e[n],a={x:t.xScale*i.x+t.scale01*i.y+t.dx,y:t.scale10*i.x+t.yScale*i.y+t.dy,onCurve:i.onCurve,lastPointOfContour:i.lastPointOfContour};r.push(a)}return r}function o(e){for(var t=[],r=[],n=0;n<e.length;n+=1){var i=e[n];r.push(i),i.lastPointOfContour&&(t.push(r),r=[])}return c.argument(0===r.length,"There are still points left in the current contour."),t}function s(e){var t=new f.Path;if(!e)return t;for(var r=o(e),n=0;n<r.length;n+=1){var i,a,s=r[n],l=s[0],u=s[s.length-1];l.onCurve?(i=null,a=!0):(i=l=u.onCurve?u:{x:(l.x+u.x)/2,y:(l.y+u.y)/2},a=!1),t.moveTo(l.x,l.y);for(var c=a?1:0;c<s.length;c+=1){var h=s[c],d=0===c?l:s[c-1];if(d.onCurve&&h.onCurve)t.lineTo(h.x,h.y);else if(d.onCurve&&!h.onCurve)i=h;else if(d.onCurve||h.onCurve){if(d.onCurve||!h.onCurve)throw new Error("Invalid state.");t.quadraticCurveTo(i.x,i.y,h.x,h.y),i=null}else{var p={x:(d.x+h.x)/2,y:(d.y+h.y)/2};t.quadraticCurveTo(d.x,d.y,p.x,p.y),i=h}}l!==u&&(i?t.quadraticCurveTo(i.x,i.y,l.x,l.y):t.lineTo(l.x,l.y))}return t.closePath(),t}function l(e,t){if(t.isComposite)for(var r=0;r<t.components.length;r+=1){var n=t.components[r],i=e.get(n.glyphIndex);if(i.getPath(),i.points){var o;if(void 0===n.matchedPoints)o=a(i.points,n);else{if(n.matchedPoints[0]>t.points.length-1||n.matchedPoints[1]>i.points.length-1)throw Error("Matched points out of range in "+t.name);var l=t.points[n.matchedPoints[0]],u=i.points[n.matchedPoints[1]],c={xScale:n.xScale,scale01:n.scale01,scale10:n.scale10,yScale:n.yScale,dx:0,dy:0};u=a([u],c)[0],c.dx=l.x-u.x,c.dy=l.y-u.y,o=a(i.points,c)}t.points=t.points.concat(o)}}return s(t.points)}function u(e,t,r,n){var a,o=new h.GlyphSet(n);for(a=0;a<r.length-1;a+=1){var s=r[a];s!==r[a+1]?o.push(a,h.ttfGlyphLoader(n,a,i,e,t+s,l)):o.push(a,h.glyphLoader(n,a))}return o}var c=e("../check"),h=e("../glyphset"),d=e("../parse"),f=e("../path");r.parse=u},{"../check":2,"../glyphset":7,"../parse":10,"../path":11}],18:[function(e,t,r){"use strict";function n(e,t){for(var r=new c.Parser(e,t),n=r.parseUShort(),i=[],a=0;n>a;a++)i[r.parseTag()]={offset:r.parseUShort()};return i}function i(e,t){var r=new c.Parser(e,t),n=r.parseUShort(),i=r.parseUShort();if(1===n)return r.parseUShortList(i);if(2===n){for(var a=[];i--;)for(var o=r.parseUShort(),s=r.parseUShort(),l=r.parseUShort(),u=o;s>=u;u++)a[l++]=u;return a}}function a(e,t){var r=new c.Parser(e,t),n=r.parseUShort();if(1===n){var i=r.parseUShort(),a=r.parseUShort(),o=r.parseUShortList(a);return function(e){return o[e-i]||0}}if(2===n){for(var s=r.parseUShort(),l=[],u=[],h=[],d=0;s>d;d++)l[d]=r.parseUShort(),u[d]=r.parseUShort(),h[d]=r.parseUShort();return function(e){for(var t=0,r=l.length-1;r>t;){var n=t+r+1>>1;e<l[n]?r=n-1:t=n}return l[t]<=e&&e<=u[t]&&h[t]||0}}}function o(e,t){var r,n=new c.Parser(e,t),o=n.parseUShort(),s=i(e,t+n.parseUShort()),l=n.parseUShort(),u=n.parseUShort();if(4===l&&0===u){var h={};if(1===o){for(var d=n.parseUShort(),f=[],p=n.parseOffset16List(d),m=0;d>m;m++){var g=p[m],v=h[g];if(!v){v={},n.relativeOffset=g;for(var y=n.parseUShort();y--;){var b=n.parseUShort();l&&(r=n.parseShort()),u&&n.parseShort(),v[b]=r}}f[s[m]]=v}return function(e,t){var r=f[e];return r?r[t]:void 0}}if(2===o){for(var E=n.parseUShort(),x=n.parseUShort(),w=n.parseUShort(),T=n.parseUShort(),_=a(e,t+E),S=a(e,t+x),M=[],R=0;w>R;R++)for(var A=M[R]=[],C=0;T>C;C++)l&&(r=n.parseShort()),u&&n.parseShort(),A[C]=r;var L={};for(R=0;R<s.length;R++)L[s[R]]=1;return function(e,t){if(L[e]){var r=_(e),n=S(t),i=M[r];return i?i[n]:void 0}}}}}function s(e,t){var r=new c.Parser(e,t),n=r.parseUShort(),i=r.parseUShort(),a=16&i,s=r.parseUShort(),l=r.parseOffset16List(s),u={lookupType:n,lookupFlag:i,markFilteringSet:a?r.parseUShort():-1};if(2===n){for(var h=[],d=0;s>d;d++)h.push(o(e,t+l[d]));u.getKerningValue=function(e,t){for(var r=h.length;r--;){var n=h[r](e,t);if(void 0!==n)return n}return 0}}return u}function l(e,t,r){var i=new c.Parser(e,t),a=i.parseFixed();u.argument(1===a,"Unsupported GPOS table version."),n(e,t+i.parseUShort()),n(e,t+i.parseUShort());var o=i.parseUShort();i.relativeOffset=o;for(var l=i.parseUShort(),h=i.parseOffset16List(l),d=t+o,f=0;l>f;f++){var p=s(e,d+h[f]);2!==p.lookupType||r.getGposKerningValue||(r.getGposKerningValue=p.getKerningValue)}}var u=e("../check"),c=e("../parse");r.parse=l},{"../check":2,"../parse":10}],19:[function(e,t,r){"use strict";function n(e,t){var r=new o(e,t=t||0),n=r.parseVersion();return a.argument(1===n,"Unsupported GSUB table version."),{version:n,scripts:r.parseScriptList(),features:r.parseFeatureList(),lookups:r.parseLookupList(s)}}function i(e){return new l.Table("GSUB",[{name:"version",type:"ULONG",value:65536},{name:"scripts",type:"TABLE",value:new l.ScriptList(e.scripts)},{name:"features",type:"TABLE",value:new l.FeatureList(e.features)},{name:"lookups",type:"TABLE",value:new l.LookupList(e.lookups,c)}])}var a=e("../check"),o=e("../parse").Parser,s=new Array(9),l=e("../table");s[1]=function(){var e=this.offset+this.relativeOffset,t=this.parseUShort();return 1===t?{substFormat:1,coverage:this.parsePointer(o.coverage),deltaGlyphId:this.parseUShort()}:2===t?{substFormat:2,coverage:this.parsePointer(o.coverage),substitute:this.parseOffset16List()}:void a.assert(!1,"0x"+e.toString(16)+": lookup type 1 format must be 1 or 2.")},s[2]=function(){var e=this.parseUShort();return a.argument(1===e,"GSUB Multiple Substitution Subtable identifier-format must be 1"),{substFormat:e,coverage:this.parsePointer(o.coverage),sequences:this.parseListOfLists()}},s[3]=function(){var e=this.parseUShort();return a.argument(1===e,"GSUB Alternate Substitution Subtable identifier-format must be 1"),{substFormat:e,coverage:this.parsePointer(o.coverage),alternateSets:this.parseListOfLists()}},s[4]=function(){var e=this.parseUShort();return a.argument(1===e,"GSUB ligature table identifier-format must be 1"),{substFormat:e,coverage:this.parsePointer(o.coverage),ligatureSets:this.parseListOfLists((function(){return{ligGlyph:this.parseUShort(),components:this.parseUShortList(this.parseUShort()-1)}}))}};var u={sequenceIndex:o.uShort,lookupListIndex:o.uShort};s[5]=function(){var e=this.offset+this.relativeOffset,t=this.parseUShort();if(1===t)return{substFormat:t,coverage:this.parsePointer(o.coverage),ruleSets:this.parseListOfLists((function(){var e=this.parseUShort(),t=this.parseUShort();return{input:this.parseUShortList(e-1),lookupRecords:this.parseRecordList(t,u)}}))};if(2===t)return{substFormat:t,coverage:this.parsePointer(o.coverage),classDef:this.parsePointer(o.classDef),classSets:this.parseListOfLists((function(){var e=this.parseUShort(),t=this.parseUShort();return{classes:this.parseUShortList(e-1),lookupRecords:this.parseRecordList(t,u)}}))};if(3===t){var r=this.parseUShort(),n=this.parseUShort();return{substFormat:t,coverages:this.parseList(r,o.pointer(o.coverage)),lookupRecords:this.parseRecordList(n,u)}}a.assert(!1,"0x"+e.toString(16)+": lookup type 5 format must be 1, 2 or 3.")},s[6]=function(){var e=this.offset+this.relativeOffset,t=this.parseUShort();return 1===t?{substFormat:1,coverage:this.parsePointer(o.coverage),chainRuleSets:this.parseListOfLists((function(){return{backtrack:this.parseUShortList(),input:this.parseUShortList(this.parseShort()-1),lookahead:this.parseUShortList(),lookupRecords:this.parseRecordList(u)}}))}:2===t?{substFormat:2,coverage:this.parsePointer(o.coverage),backtrackClassDef:this.parsePointer(o.classDef),inputClassDef:this.parsePointer(o.classDef),lookaheadClassDef:this.parsePointer(o.classDef),chainClassSet:this.parseListOfLists((function(){return{backtrack:this.parseUShortList(),input:this.parseUShortList(this.parseShort()-1),lookahead:this.parseUShortList(),lookupRecords:this.parseRecordList(u)}}))}:3===t?{substFormat:3,backtrackCoverage:this.parseList(o.pointer(o.coverage)),inputCoverage:this.parseList(o.pointer(o.coverage)),lookaheadCoverage:this.parseList(o.pointer(o.coverage)),lookupRecords:this.parseRecordList(u)}:void a.assert(!1,"0x"+e.toString(16)+": lookup type 6 format must be 1, 2 or 3.")},s[7]=function(){var e=this.parseUShort();a.argument(1===e,"GSUB Extension Substitution subtable identifier-format must be 1");var t=this.parseUShort(),r=new o(this.data,this.offset+this.parseULong());return{substFormat:1,lookupType:t,extension:s[t].call(r)}},s[8]=function(){var e=this.parseUShort();return a.argument(1===e,"GSUB Reverse Chaining Contextual Single Substitution Subtable identifier-format must be 1"),{substFormat:e,coverage:this.parsePointer(o.coverage),backtrackCoverage:this.parseList(o.pointer(o.coverage)),lookaheadCoverage:this.parseList(o.pointer(o.coverage)),substitutes:this.parseUShortList()}};var c=new Array(9);c[1]=function(e){return 1===e.substFormat?new l.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new l.Coverage(e.coverage)},{name:"deltaGlyphID",type:"USHORT",value:e.deltaGlyphId}]):new l.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:2},{name:"coverage",type:"TABLE",value:new l.Coverage(e.coverage)}].concat(l.ushortList("substitute",e.substitute)))},c[3]=function(e){return a.assert(1===e.substFormat,"Lookup type 3 substFormat must be 1."),new l.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new l.Coverage(e.coverage)}].concat(l.tableList("altSet",e.alternateSets,(function(e){return new l.Table("alternateSetTable",l.ushortList("alternate",e))}))))},c[4]=function(e){return a.assert(1===e.substFormat,"Lookup type 4 substFormat must be 1."),new l.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new l.Coverage(e.coverage)}].concat(l.tableList("ligSet",e.ligatureSets,(function(e){return new l.Table("ligatureSetTable",l.tableList("ligature",e,(function(e){return new l.Table("ligatureTable",[{name:"ligGlyph",type:"USHORT",value:e.ligGlyph}].concat(l.ushortList("component",e.components,e.components.length+1)))})))}))))},r.parse=n,r.make=i},{"../check":2,"../parse":10,"../table":13}],20:[function(e,t,r){"use strict";function n(e,t){var r={},n=new o.Parser(e,t);return r.version=n.parseVersion(),r.fontRevision=Math.round(1e3*n.parseFixed())/1e3,r.checkSumAdjustment=n.parseULong(),r.magicNumber=n.parseULong(),a.argument(1594834165===r.magicNumber,"Font header has wrong magic number."),r.flags=n.parseUShort(),r.unitsPerEm=n.parseUShort(),r.created=n.parseLongDateTime(),r.modified=n.parseLongDateTime(),r.xMin=n.parseShort(),r.yMin=n.parseShort(),r.xMax=n.parseShort(),r.yMax=n.parseShort(),r.macStyle=n.parseUShort(),r.lowestRecPPEM=n.parseUShort(),r.fontDirectionHint=n.parseShort(),r.indexToLocFormat=n.parseShort(),r.glyphDataFormat=n.parseShort(),r}function i(e){var t=Math.round((new Date).getTime()/1e3)+2082844800,r=t;return e.createdTimestamp&&(r=e.createdTimestamp+2082844800),new s.Table("head",[{name:"version",type:"FIXED",value:65536},{name:"fontRevision",type:"FIXED",value:65536},{name:"checkSumAdjustment",type:"ULONG",value:0},{name:"magicNumber",type:"ULONG",value:1594834165},{name:"flags",type:"USHORT",value:0},{name:"unitsPerEm",type:"USHORT",value:1e3},{name:"created",type:"LONGDATETIME",value:r},{name:"modified",type:"LONGDATETIME",value:t},{name:"xMin",type:"SHORT",value:0},{name:"yMin",type:"SHORT",value:0},{name:"xMax",type:"SHORT",value:0},{name:"yMax",type:"SHORT",value:0},{name:"macStyle",type:"USHORT",value:0},{name:"lowestRecPPEM",type:"USHORT",value:0},{name:"fontDirectionHint",type:"SHORT",value:2},{name:"indexToLocFormat",type:"SHORT",value:0},{name:"glyphDataFormat",type:"SHORT",value:0}],e)}var a=e("../check"),o=e("../parse"),s=e("../table");r.parse=n,r.make=i},{"../check":2,"../parse":10,"../table":13}],21:[function(e,t,r){"use strict";function n(e,t){var r={},n=new a.Parser(e,t);return r.version=n.parseVersion(),r.ascender=n.parseShort(),r.descender=n.parseShort(),r.lineGap=n.parseShort(),r.advanceWidthMax=n.parseUShort(),r.minLeftSideBearing=n.parseShort(),r.minRightSideBearing=n.parseShort(),r.xMaxExtent=n.parseShort(),r.caretSlopeRise=n.parseShort(),r.caretSlopeRun=n.parseShort(),r.caretOffset=n.parseShort(),n.relativeOffset+=8,r.metricDataFormat=n.parseShort(),r.numberOfHMetrics=n.parseUShort(),r}function i(e){return new o.Table("hhea",[{name:"version",type:"FIXED",value:65536},{name:"ascender",type:"FWORD",value:0},{name:"descender",type:"FWORD",value:0},{name:"lineGap",type:"FWORD",value:0},{name:"advanceWidthMax",type:"UFWORD",value:0},{name:"minLeftSideBearing",type:"FWORD",value:0},{name:"minRightSideBearing",type:"FWORD",value:0},{name:"xMaxExtent",type:"FWORD",value:0},{name:"caretSlopeRise",type:"SHORT",value:1},{name:"caretSlopeRun",type:"SHORT",value:0},{name:"caretOffset",type:"SHORT",value:0},{name:"reserved1",type:"SHORT",value:0},{name:"reserved2",type:"SHORT",value:0},{name:"reserved3",type:"SHORT",value:0},{name:"reserved4",type:"SHORT",value:0},{name:"metricDataFormat",type:"SHORT",value:0},{name:"numberOfHMetrics",type:"USHORT",value:0}],e)}var a=e("../parse"),o=e("../table");r.parse=n,r.make=i},{"../parse":10,"../table":13}],22:[function(e,t,r){"use strict";function n(e,t,r,n,i){for(var o,s,l=new a.Parser(e,t),u=0;n>u;u+=1){r>u&&(o=l.parseUShort(),s=l.parseShort());var c=i.get(u);c.advanceWidth=o,c.leftSideBearing=s}}function i(e){for(var t=new o.Table("hmtx",[]),r=0;r<e.length;r+=1){var n=e.get(r),i=n.advanceWidth||0,a=n.leftSideBearing||0;t.fields.push({name:"advanceWidth_"+r,type:"USHORT",value:i}),t.fields.push({name:"leftSideBearing_"+r,type:"SHORT",value:a})}return t}var a=e("../parse"),o=e("../table");r.parse=n,r.make=i},{"../parse":10,"../table":13}],23:[function(e,t,r){"use strict";function n(e,t){var r={},n=new a.Parser(e,t),o=n.parseUShort();i.argument(0===o,"Unsupported kern table version."),n.skip("uShort",1);var s=n.parseUShort();i.argument(0===s,"Unsupported kern sub-table version."),n.skip("uShort",2);var l=n.parseUShort();n.skip("uShort",3);for(var u=0;l>u;u+=1){var c=n.parseUShort(),h=n.parseUShort(),d=n.parseShort();r[c+","+h]=d}return r}var i=e("../check"),a=e("../parse");r.parse=n},{"../check":2,"../parse":10}],24:[function(e,t,r){"use strict";function n(e,t,r,n){for(var a=new i.Parser(e,t),o=n?a.parseUShort:a.parseULong,s=[],l=0;r+1>l;l+=1){var u=o.call(a);n&&(u*=2),s.push(u)}return s}var i=e("../parse");r.parse=n},{"../parse":10}],25:[function(e,t,r){"use strict";function n(e){for(var t=new s.Table("ltag",[{name:"version",type:"ULONG",value:1},{name:"flags",type:"ULONG",value:0},{name:"numTags",type:"ULONG",value:e.length}]),r="",n=12+4*e.length,i=0;i<e.length;++i){var a=r.indexOf(e[i]);0>a&&(a=r.length,r+=e[i]),t.fields.push({name:"offset "+i,type:"USHORT",value:n+a}),t.fields.push({name:"length "+i,type:"USHORT",value:e[i].length})}return t.fields.push({name:"stringPool",type:"CHARARRAY",value:r}),t}function i(e,t){var r=new o.Parser(e,t),n=r.parseULong();a.argument(1===n,"Unsupported ltag table version."),r.skip("uLong",1);for(var i=r.parseULong(),s=[],l=0;i>l;l++){for(var u="",c=t+r.parseUShort(),h=r.parseUShort(),d=c;c+h>d;++d)u+=String.fromCharCode(e.getInt8(d));s.push(u)}return s}var a=e("../check"),o=e("../parse"),s=e("../table");r.make=n,r.parse=i},{"../check":2,"../parse":10,"../table":13}],26:[function(e,t,r){"use strict";function n(e,t){var r={},n=new a.Parser(e,t);return r.version=n.parseVersion(),r.numGlyphs=n.parseUShort(),1===r.version&&(r.maxPoints=n.parseUShort(),r.maxContours=n.parseUShort(),r.maxCompositePoints=n.parseUShort(),r.maxCompositeContours=n.parseUShort(),r.maxZones=n.parseUShort(),r.maxTwilightPoints=n.parseUShort(),r.maxStorage=n.parseUShort(),r.maxFunctionDefs=n.parseUShort(),r.maxInstructionDefs=n.parseUShort(),r.maxStackElements=n.parseUShort(),r.maxSizeOfInstructions=n.parseUShort(),r.maxComponentElements=n.parseUShort(),r.maxComponentDepth=n.parseUShort()),r}function i(e){return new o.Table("maxp",[{name:"version",type:"FIXED",value:20480},{name:"numGlyphs",type:"USHORT",value:e}])}var a=e("../parse"),o=e("../table");r.parse=n,r.make=i},{"../parse":10,"../table":13}],27:[function(e,t,r){"use strict";function n(e,t){var r=new s.Parser(e,t),n=r.parseULong();o.argument(1===n,"Unsupported META table version."),r.parseULong(),r.parseULong();for(var i=r.parseULong(),l={},u=0;i>u;u++){var c=r.parseTag(),h=r.parseULong(),d=r.parseULong(),f=a.UTF8(e,t+h,d);l[c]=f}return l}function i(e){var t=Object.keys(e).length,r="",n=16+12*t,i=new l.Table("meta",[{name:"version",type:"ULONG",value:1},{name:"flags",type:"ULONG",value:0},{name:"offset",type:"ULONG",value:n},{name:"numTags",type:"ULONG",value:t}]);for(var a in e){var o=r.length;r+=e[a],i.fields.push({name:"tag "+a,type:"TAG",value:a}),i.fields.push({name:"offset "+a,type:"ULONG",value:n+o}),i.fields.push({name:"length "+a,type:"ULONG",value:e[a].length})}return i.fields.push({name:"stringPool",type:"CHARARRAY",value:r}),i}var a=e("../types").decode,o=e("../check"),s=e("../parse"),l=e("../table");r.parse=n,r.make=i},{"../check":2,"../parse":10,"../table":13,"../types":32}],28:[function(e,t,r){"use strict";function n(e,t,r){switch(e){case 0:if(65535===t)return"und";if(r)return r[t];break;case 1:return v[t];case 3:return b[t]}}function i(e,t,r){switch(e){case 0:return E;case 1:return w[r]||x[t];case 3:if(1===t||10===t)return E}}function a(e,t,r){for(var a={},o=new p.Parser(e,t),s=o.parseUShort(),l=o.parseUShort(),u=o.offset+o.parseUShort(),c=0;l>c;c++){var h,f=o.parseUShort(),m=o.parseUShort(),v=o.parseUShort(),y=o.parseUShort(),b=g[y]||y,x=o.parseUShort(),w=o.parseUShort(),T=n(f,v,r),_=i(f,m,v);if(void 0!==_&&void 0!==T&&(h=_===E?d.UTF16(e,u+w,x):d.MACSTRING(e,u+w,x,_))){var S=a[b];void 0===S&&(S=a[b]={}),S[T]=h}}return 1===s&&o.parseUShort(),a}function o(e){var t={};for(var r in e)t[e[r]]=parseInt(r);return t}function s(e,t,r,n,i,a){return new m.Record("NameRecord",[{name:"platformID",type:"USHORT",value:e},{name:"encodingID",type:"USHORT",value:t},{name:"languageID",type:"USHORT",value:r},{name:"nameID",type:"USHORT",value:n},{name:"length",type:"USHORT",value:i},{name:"offset",type:"USHORT",value:a}])}function l(e,t){var r=e.length,n=t.length-r+1;e:for(var i=0;n>i;i++)for(;n>i;i++){for(var a=0;r>a;a++)if(t[i+a]!==e[a])continue e;return i}return-1}function u(e,t){var r=l(e,t);if(0>r){r=t.length;for(var n=0,i=e.length;i>n;++n)t.push(e[n])}return r}function c(e,t){var r,n=[],a={},l=o(g);for(var c in e){var h=l[c];if(void 0===h&&(h=c),r=parseInt(h),isNaN(r))throw new Error('Name table entry "'+c+'" does not exist, see nameTableNames for complete list.');a[r]=e[c],n.push(r)}for(var d=o(v),p=o(b),E=[],x=[],w=0;w<n.length;w++){var T=a[r=n[w]];for(var _ in T){var S=T[_],M=1,R=d[_],A=y[R],C=i(M,A,R),L=f.MACSTRING(S,C);void 0===L&&(M=0,0>(R=t.indexOf(_))&&(R=t.length,t.push(_)),A=4,L=f.UTF16(S));var O=u(L,x);E.push(s(M,A,R,r,L.length,O));var I=p[_];if(void 0!==I){var P=f.UTF16(S),H=u(P,x);E.push(s(3,1,I,r,P.length,H))}}}E.sort((function(e,t){return e.platformID-t.platformID||e.encodingID-t.encodingID||e.languageID-t.languageID||e.nameID-t.nameID}));for(var k=new m.Table("name",[{name:"format",type:"USHORT",value:0},{name:"count",type:"USHORT",value:E.length},{name:"stringOffset",type:"USHORT",value:6+12*E.length}]),N=0;N<E.length;N++)k.fields.push({name:"record_"+N,type:"RECORD",value:E[N]});return k.fields.push({name:"strings",type:"LITERAL",value:x}),k}var h=e("../types"),d=h.decode,f=h.encode,p=e("../parse"),m=e("../table"),g=["copyright","fontFamily","fontSubfamily","uniqueID","fullName","version","postScriptName","trademark","manufacturer","designer","description","manufacturerURL","designerURL","license","licenseURL","reserved","preferredFamily","preferredSubfamily","compatibleFullName","sampleText","postScriptFindFontName","wwsFamily","wwsSubfamily"],v={0:"en",1:"fr",2:"de",3:"it",4:"nl",5:"sv",6:"es",7:"da",8:"pt",9:"no",10:"he",11:"ja",12:"ar",13:"fi",14:"el",15:"is",16:"mt",17:"tr",18:"hr",19:"zh-Hant",20:"ur",21:"hi",22:"th",23:"ko",24:"lt",25:"pl",26:"hu",27:"es",28:"lv",29:"se",30:"fo",31:"fa",32:"ru",33:"zh",34:"nl-BE",35:"ga",36:"sq",37:"ro",38:"cz",39:"sk",40:"si",41:"yi",42:"sr",43:"mk",44:"bg",45:"uk",46:"be",47:"uz",48:"kk",49:"az-Cyrl",50:"az-Arab",51:"hy",52:"ka",53:"mo",54:"ky",55:"tg",56:"tk",57:"mn-CN",58:"mn",59:"ps",60:"ks",61:"ku",62:"sd",63:"bo",64:"ne",65:"sa",66:"mr",67:"bn",68:"as",69:"gu",70:"pa",71:"or",72:"ml",73:"kn",74:"ta",75:"te",76:"si",77:"my",78:"km",79:"lo",80:"vi",81:"id",82:"tl",83:"ms",84:"ms-Arab",85:"am",86:"ti",87:"om",88:"so",89:"sw",90:"rw",91:"rn",92:"ny",93:"mg",94:"eo",128:"cy",129:"eu",130:"ca",131:"la",132:"qu",133:"gn",134:"ay",135:"tt",136:"ug",137:"dz",138:"jv",139:"su",140:"gl",141:"af",142:"br",143:"iu",144:"gd",145:"gv",146:"ga",147:"to",148:"el-polyton",149:"kl",150:"az",151:"nn"},y={0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:5,11:1,12:4,13:0,14:6,15:0,16:0,17:0,18:0,19:2,20:4,21:9,22:21,23:3,24:29,25:29,26:29,27:29,28:29,29:0,30:0,31:4,32:7,33:25,34:0,35:0,36:0,37:0,38:29,39:29,40:0,41:5,42:7,43:7,44:7,45:7,46:7,47:7,48:7,49:7,50:4,51:24,52:23,53:7,54:7,55:7,56:7,57:27,58:7,59:4,60:4,61:4,62:4,63:26,64:9,65:9,66:9,67:13,68:13,69:11,70:10,71:12,72:17,73:16,74:14,75:15,76:18,77:19,78:20,79:22,80:30,81:0,82:0,83:0,84:4,85:28,86:28,87:28,88:0,89:0,90:0,91:0,92:0,93:0,94:0,128:0,129:0,130:0,131:0,132:0,133:0,134:0,135:7,136:4,137:26,138:0,139:0,140:0,141:0,142:0,143:28,144:0,145:0,146:0,147:0,148:6,149:0,150:0,151:0},b={1078:"af",1052:"sq",1156:"gsw",1118:"am",5121:"ar-DZ",15361:"ar-BH",3073:"ar",2049:"ar-IQ",11265:"ar-JO",13313:"ar-KW",12289:"ar-LB",4097:"ar-LY",6145:"ary",8193:"ar-OM",16385:"ar-QA",1025:"ar-SA",10241:"ar-SY",7169:"aeb",14337:"ar-AE",9217:"ar-YE",1067:"hy",1101:"as",2092:"az-Cyrl",1068:"az",1133:"ba",1069:"eu",1059:"be",2117:"bn",1093:"bn-IN",8218:"bs-Cyrl",5146:"bs",1150:"br",1026:"bg",1027:"ca",3076:"zh-HK",5124:"zh-MO",2052:"zh",4100:"zh-SG",1028:"zh-TW",1155:"co",1050:"hr",4122:"hr-BA",1029:"cs",1030:"da",1164:"prs",1125:"dv",2067:"nl-BE",1043:"nl",3081:"en-AU",10249:"en-BZ",4105:"en-CA",9225:"en-029",16393:"en-IN",6153:"en-IE",8201:"en-JM",17417:"en-MY",5129:"en-NZ",13321:"en-PH",18441:"en-SG",7177:"en-ZA",11273:"en-TT",2057:"en-GB",1033:"en",12297:"en-ZW",1061:"et",1080:"fo",1124:"fil",1035:"fi",2060:"fr-BE",3084:"fr-CA",1036:"fr",5132:"fr-LU",6156:"fr-MC",4108:"fr-CH",1122:"fy",1110:"gl",1079:"ka",3079:"de-AT",1031:"de",5127:"de-LI",4103:"de-LU",2055:"de-CH",1032:"el",1135:"kl",1095:"gu",1128:"ha",1037:"he",1081:"hi",1038:"hu",1039:"is",1136:"ig",1057:"id",1117:"iu",2141:"iu-Latn",2108:"ga",1076:"xh",1077:"zu",1040:"it",2064:"it-CH",1041:"ja",1099:"kn",1087:"kk",1107:"km",1158:"quc",1159:"rw",1089:"sw",1111:"kok",1042:"ko",1088:"ky",1108:"lo",1062:"lv",1063:"lt",2094:"dsb",1134:"lb",1071:"mk",2110:"ms-BN",1086:"ms",1100:"ml",1082:"mt",1153:"mi",1146:"arn",1102:"mr",1148:"moh",1104:"mn",2128:"mn-CN",1121:"ne",1044:"nb",2068:"nn",1154:"oc",1096:"or",1123:"ps",1045:"pl",1046:"pt",2070:"pt-PT",1094:"pa",1131:"qu-BO",2155:"qu-EC",3179:"qu",1048:"ro",1047:"rm",1049:"ru",9275:"smn",4155:"smj-NO",5179:"smj",3131:"se-FI",1083:"se",2107:"se-SE",8251:"sms",6203:"sma-NO",7227:"sms",1103:"sa",7194:"sr-Cyrl-BA",3098:"sr",6170:"sr-Latn-BA",2074:"sr-Latn",1132:"nso",1074:"tn",1115:"si",1051:"sk",1060:"sl",11274:"es-AR",16394:"es-BO",13322:"es-CL",9226:"es-CO",5130:"es-CR",7178:"es-DO",12298:"es-EC",17418:"es-SV",4106:"es-GT",18442:"es-HN",2058:"es-MX",19466:"es-NI",6154:"es-PA",15370:"es-PY",10250:"es-PE",20490:"es-PR",3082:"es",1034:"es",21514:"es-US",14346:"es-UY",8202:"es-VE",2077:"sv-FI",1053:"sv",1114:"syr",1064:"tg",2143:"tzm",1097:"ta",1092:"tt",1098:"te",1054:"th",1105:"bo",1055:"tr",1090:"tk",1152:"ug",1058:"uk",1070:"hsb",1056:"ur",2115:"uz-Cyrl",1091:"uz",1066:"vi",1106:"cy",1160:"wo",1157:"sah",1144:"ii",1130:"yo"},E="utf-16",x={0:"macintosh",1:"x-mac-japanese",2:"x-mac-chinesetrad",3:"x-mac-korean",6:"x-mac-greek",7:"x-mac-cyrillic",9:"x-mac-devanagai",10:"x-mac-gurmukhi",11:"x-mac-gujarati",12:"x-mac-oriya",13:"x-mac-bengali",14:"x-mac-tamil",15:"x-mac-telugu",16:"x-mac-kannada",17:"x-mac-malayalam",18:"x-mac-sinhalese",19:"x-mac-burmese",20:"x-mac-khmer",21:"x-mac-thai",22:"x-mac-lao",23:"x-mac-georgian",24:"x-mac-armenian",25:"x-mac-chinesesimp",26:"x-mac-tibetan",27:"x-mac-mongolian",28:"x-mac-ethiopic",29:"x-mac-ce",30:"x-mac-vietnamese",31:"x-mac-extarabic"},w={15:"x-mac-icelandic",17:"x-mac-turkish",18:"x-mac-croatian",24:"x-mac-ce",25:"x-mac-ce",26:"x-mac-ce",27:"x-mac-ce",28:"x-mac-ce",30:"x-mac-icelandic",37:"x-mac-romanian",38:"x-mac-ce",39:"x-mac-ce",40:"x-mac-ce",143:"x-mac-inuit",146:"x-mac-gaelic"};r.parse=a,r.make=c},{"../parse":10,"../table":13,"../types":32}],29:[function(e,t,r){"use strict";function n(e){for(var t=0;t<l.length;t+=1){var r=l[t];if(e>=r.begin&&e<r.end)return t}return-1}function i(e,t){var r={},n=new o.Parser(e,t);r.version=n.parseUShort(),r.xAvgCharWidth=n.parseShort(),r.usWeightClass=n.parseUShort(),r.usWidthClass=n.parseUShort(),r.fsType=n.parseUShort(),r.ySubscriptXSize=n.parseShort(),r.ySubscriptYSize=n.parseShort(),r.ySubscriptXOffset=n.parseShort(),r.ySubscriptYOffset=n.parseShort(),r.ySuperscriptXSize=n.parseShort(),r.ySuperscriptYSize=n.parseShort(),r.ySuperscriptXOffset=n.parseShort(),r.ySuperscriptYOffset=n.parseShort(),r.yStrikeoutSize=n.parseShort(),r.yStrikeoutPosition=n.parseShort(),r.sFamilyClass=n.parseShort(),r.panose=[];for(var i=0;10>i;i++)r.panose[i]=n.parseByte();return r.ulUnicodeRange1=n.parseULong(),r.ulUnicodeRange2=n.parseULong(),r.ulUnicodeRange3=n.parseULong(),r.ulUnicodeRange4=n.parseULong(),r.achVendID=String.fromCharCode(n.parseByte(),n.parseByte(),n.parseByte(),n.parseByte()),r.fsSelection=n.parseUShort(),r.usFirstCharIndex=n.parseUShort(),r.usLastCharIndex=n.parseUShort(),r.sTypoAscender=n.parseShort(),r.sTypoDescender=n.parseShort(),r.sTypoLineGap=n.parseShort(),r.usWinAscent=n.parseUShort(),r.usWinDescent=n.parseUShort(),r.version>=1&&(r.ulCodePageRange1=n.parseULong(),r.ulCodePageRange2=n.parseULong()),r.version>=2&&(r.sxHeight=n.parseShort(),r.sCapHeight=n.parseShort(),r.usDefaultChar=n.parseUShort(),r.usBreakChar=n.parseUShort(),r.usMaxContent=n.parseUShort()),r}function a(e){return new s.Table("OS/2",[{name:"version",type:"USHORT",value:3},{name:"xAvgCharWidth",type:"SHORT",value:0},{name:"usWeightClass",type:"USHORT",value:0},{name:"usWidthClass",type:"USHORT",value:0},{name:"fsType",type:"USHORT",value:0},{name:"ySubscriptXSize",type:"SHORT",value:650},{name:"ySubscriptYSize",type:"SHORT",value:699},{name:"ySubscriptXOffset",type:"SHORT",value:0},{name:"ySubscriptYOffset",type:"SHORT",value:140},{name:"ySuperscriptXSize",type:"SHORT",value:650},{name:"ySuperscriptYSize",type:"SHORT",value:699},{name:"ySuperscriptXOffset",type:"SHORT",value:0},{name:"ySuperscriptYOffset",type:"SHORT",value:479},{name:"yStrikeoutSize",type:"SHORT",value:49},{name:"yStrikeoutPosition",type:"SHORT",value:258},{name:"sFamilyClass",type:"SHORT",value:0},{name:"bFamilyType",type:"BYTE",value:0},{name:"bSerifStyle",type:"BYTE",value:0},{name:"bWeight",type:"BYTE",value:0},{name:"bProportion",type:"BYTE",value:0},{name:"bContrast",type:"BYTE",value:0},{name:"bStrokeVariation",type:"BYTE",value:0},{name:"bArmStyle",type:"BYTE",value:0},{name:"bLetterform",type:"BYTE",value:0},{name:"bMidline",type:"BYTE",value:0},{name:"bXHeight",type:"BYTE",value:0},{name:"ulUnicodeRange1",type:"ULONG",value:0},{name:"ulUnicodeRange2",type:"ULONG",value:0},{name:"ulUnicodeRange3",type:"ULONG",value:0},{name:"ulUnicodeRange4",type:"ULONG",value:0},{name:"achVendID",type:"CHARARRAY",value:"XXXX"},{name:"fsSelection",type:"USHORT",value:0},{name:"usFirstCharIndex",type:"USHORT",value:0},{name:"usLastCharIndex",type:"USHORT",value:0},{name:"sTypoAscender",type:"SHORT",value:0},{name:"sTypoDescender",type:"SHORT",value:0},{name:"sTypoLineGap",type:"SHORT",value:0},{name:"usWinAscent",type:"USHORT",value:0},{name:"usWinDescent",type:"USHORT",value:0},{name:"ulCodePageRange1",type:"ULONG",value:0},{name:"ulCodePageRange2",type:"ULONG",value:0},{name:"sxHeight",type:"SHORT",value:0},{name:"sCapHeight",type:"SHORT",value:0},{name:"usDefaultChar",type:"USHORT",value:0},{name:"usBreakChar",type:"USHORT",value:0},{name:"usMaxContext",type:"USHORT",value:0}],e)}var o=e("../parse"),s=e("../table"),l=[{begin:0,end:127},{begin:128,end:255},{begin:256,end:383},{begin:384,end:591},{begin:592,end:687},{begin:688,end:767},{begin:768,end:879},{begin:880,end:1023},{begin:11392,end:11519},{begin:1024,end:1279},{begin:1328,end:1423},{begin:1424,end:1535},{begin:42240,end:42559},{begin:1536,end:1791},{begin:1984,end:2047},{begin:2304,end:2431},{begin:2432,end:2559},{begin:2560,end:2687},{begin:2688,end:2815},{begin:2816,end:2943},{begin:2944,end:3071},{begin:3072,end:3199},{begin:3200,end:3327},{begin:3328,end:3455},{begin:3584,end:3711},{begin:3712,end:3839},{begin:4256,end:4351},{begin:6912,end:7039},{begin:4352,end:4607},{begin:7680,end:7935},{begin:7936,end:8191},{begin:8192,end:8303},{begin:8304,end:8351},{begin:8352,end:8399},{begin:8400,end:8447},{begin:8448,end:8527},{begin:8528,end:8591},{begin:8592,end:8703},{begin:8704,end:8959},{begin:8960,end:9215},{begin:9216,end:9279},{begin:9280,end:9311},{begin:9312,end:9471},{begin:9472,end:9599},{begin:9600,end:9631},{begin:9632,end:9727},{begin:9728,end:9983},{begin:9984,end:10175},{begin:12288,end:12351},{begin:12352,end:12447},{begin:12448,end:12543},{begin:12544,end:12591},{begin:12592,end:12687},{begin:43072,end:43135},{begin:12800,end:13055},{begin:13056,end:13311},{begin:44032,end:55215},{begin:55296,end:57343},{begin:67840,end:67871},{begin:19968,end:40959},{begin:57344,end:63743},{begin:12736,end:12783},{begin:64256,end:64335},{begin:64336,end:65023},{begin:65056,end:65071},{begin:65040,end:65055},{begin:65104,end:65135},{begin:65136,end:65279},{begin:65280,end:65519},{begin:65520,end:65535},{begin:3840,end:4095},{begin:1792,end:1871},{begin:1920,end:1983},{begin:3456,end:3583},{begin:4096,end:4255},{begin:4608,end:4991},{begin:5024,end:5119},{begin:5120,end:5759},{begin:5760,end:5791},{begin:5792,end:5887},{begin:6016,end:6143},{begin:6144,end:6319},{begin:10240,end:10495},{begin:40960,end:42127},{begin:5888,end:5919},{begin:66304,end:66351},{begin:66352,end:66383},{begin:66560,end:66639},{begin:118784,end:119039},{begin:119808,end:120831},{begin:1044480,end:1048573},{begin:65024,end:65039},{begin:917504,end:917631},{begin:6400,end:6479},{begin:6480,end:6527},{begin:6528,end:6623},{begin:6656,end:6687},{begin:11264,end:11359},{begin:11568,end:11647},{begin:19904,end:19967},{begin:43008,end:43055},{begin:65536,end:65663},{begin:65856,end:65935},{begin:66432,end:66463},{begin:66464,end:66527},{begin:66640,end:66687},{begin:66688,end:66735},{begin:67584,end:67647},{begin:68096,end:68191},{begin:119552,end:119647},{begin:73728,end:74751},{begin:119648,end:119679},{begin:7040,end:7103},{begin:7168,end:7247},{begin:7248,end:7295},{begin:43136,end:43231},{begin:43264,end:43311},{begin:43312,end:43359},{begin:43520,end:43615},{begin:65936,end:65999},{begin:66e3,end:66047},{begin:66208,end:66271},{begin:127024,end:127135}];r.unicodeRanges=l,r.getUnicodeRange=n,r.parse=i,r.make=a},{"../parse":10,"../table":13}],30:[function(e,t,r){"use strict";function n(e,t){var r,n={},i=new o.Parser(e,t);switch(n.version=i.parseVersion(),n.italicAngle=i.parseFixed(),n.underlinePosition=i.parseShort(),n.underlineThickness=i.parseShort(),n.isFixedPitch=i.parseULong(),n.minMemType42=i.parseULong(),n.maxMemType42=i.parseULong(),n.minMemType1=i.parseULong(),n.maxMemType1=i.parseULong(),n.version){case 1:n.names=a.standardNames.slice();break;case 2:for(n.numberOfGlyphs=i.parseUShort(),n.glyphNameIndex=new Array(n.numberOfGlyphs),r=0;r<n.numberOfGlyphs;r++)n.glyphNameIndex[r]=i.parseUShort();for(n.names=[],r=0;r<n.numberOfGlyphs;r++)if(n.glyphNameIndex[r]>=a.standardNames.length){var s=i.parseChar();n.names.push(i.parseString(s))}break;case 2.5:for(n.numberOfGlyphs=i.parseUShort(),n.offset=new Array(n.numberOfGlyphs),r=0;r<n.numberOfGlyphs;r++)n.offset[r]=i.parseChar()}return n}function i(){return new s.Table("post",[{name:"version",type:"FIXED",value:196608},{name:"italicAngle",type:"FIXED",value:0},{name:"underlinePosition",type:"FWORD",value:0},{name:"underlineThickness",type:"FWORD",value:0},{name:"isFixedPitch",type:"ULONG",value:0},{name:"minMemType42",type:"ULONG",value:0},{name:"maxMemType42",type:"ULONG",value:0},{name:"minMemType1",type:"ULONG",value:0},{name:"maxMemType1",type:"ULONG",value:0}])}var a=e("../encoding"),o=e("../parse"),s=e("../table");r.parse=n,r.make=i},{"../encoding":4,"../parse":10,"../table":13}],31:[function(e,t,r){"use strict";function n(e){return Math.log(e)/Math.log(2)|0}function i(e){for(;e.length%4!=0;)e.push(0);for(var t=0,r=0;r<e.length;r+=4)t+=(e[r]<<24)+(e[r+1]<<16)+(e[r+2]<<8)+e[r+3];return t%Math.pow(2,32)}function a(e,t,r,n){return new h.Record("Table Record",[{name:"tag",type:"TAG",value:void 0!==e?e:""},{name:"checkSum",type:"ULONG",value:void 0!==t?t:0},{name:"offset",type:"ULONG",value:void 0!==r?r:0},{name:"length",type:"ULONG",value:void 0!==n?n:0}])}function o(e){var t=new h.Table("sfnt",[{name:"version",type:"TAG",value:"OTTO"},{name:"numTables",type:"USHORT",value:0},{name:"searchRange",type:"USHORT",value:0},{name:"entrySelector",type:"USHORT",value:0},{name:"rangeShift",type:"USHORT",value:0}]);t.tables=e,t.numTables=e.length;var r=Math.pow(2,n(t.numTables));t.searchRange=16*r,t.entrySelector=n(r),t.rangeShift=16*t.numTables-t.searchRange;for(var o=[],s=[],l=t.sizeOf()+a().sizeOf()*t.numTables;l%4!=0;)l+=1,s.push({name:"padding",type:"BYTE",value:0});for(var u=0;u<e.length;u+=1){var d=e[u];c.argument(4===d.tableName.length,"Table name"+d.tableName+" is invalid.");var f=d.sizeOf(),p=a(d.tableName,i(d.encode()),l,f);for(o.push({name:p.tag+" Table Record",type:"RECORD",value:p}),s.push({name:d.tableName+" table",type:"RECORD",value:d}),l+=f,c.argument(!isNaN(l),"Something went wrong calculating the offset.");l%4!=0;)l+=1,s.push({name:"padding",type:"BYTE",value:0})}return o.sort((function(e,t){return e.value.tag>t.value.tag?1:-1})),t.fields=t.fields.concat(o),t.fields=t.fields.concat(s),t}function s(e,t,r){for(var n=0;n<t.length;n+=1){var i=e.charToGlyphIndex(t[n]);if(i>0)return e.glyphs.get(i).getMetrics()}return r}function l(e){for(var t=0,r=0;r<e.length;r+=1)t+=e[r];return t/e.length}function u(e){for(var t,r=[],n=[],a=[],u=[],c=[],h=[],_=[],S=0,M=0,R=0,A=0,C=0,L=0;L<e.glyphs.length;L+=1){var O=e.glyphs.get(L),I=0|O.unicode;if(isNaN(O.advanceWidth))throw new Error("Glyph "+O.name+" ("+L+"): advanceWidth is not a number.");(t>I||void 0===t)&&I>0&&(t=I),I>S&&(S=I);var P=E.getUnicodeRange(I);if(32>P)M|=1<<P;else if(64>P)R|=1<<P-32;else if(96>P)A|=1<<P-64;else{if(!(123>P))throw new Error("Unicode ranges bits > 123 are reserved for internal usage");C|=1<<P-96}if(".notdef"!==O.name){var H=O.getMetrics();r.push(H.xMin),n.push(H.yMin),a.push(H.xMax),u.push(H.yMax),h.push(H.leftSideBearing),_.push(H.rightSideBearing),c.push(O.advanceWidth)}}var k={xMin:Math.min.apply(null,r),yMin:Math.min.apply(null,n),xMax:Math.max.apply(null,a),yMax:Math.max.apply(null,u),advanceWidthMax:Math.max.apply(null,c),advanceWidthAvg:l(c),minLeftSideBearing:Math.min.apply(null,h),maxLeftSideBearing:Math.max.apply(null,h),minRightSideBearing:Math.min.apply(null,_)};k.ascender=e.ascender,k.descender=e.descender;var N=p.make({flags:3,unitsPerEm:e.unitsPerEm,xMin:k.xMin,yMin:k.yMin,xMax:k.xMax,yMax:k.yMax,lowestRecPPEM:3,createdTimestamp:e.createdTimestamp}),U=m.make({ascender:k.ascender,descender:k.descender,advanceWidthMax:k.advanceWidthMax,minLeftSideBearing:k.minLeftSideBearing,minRightSideBearing:k.minRightSideBearing,xMaxExtent:k.maxLeftSideBearing+(k.xMax-k.xMin),numberOfHMetrics:e.glyphs.length}),D=y.make(e.glyphs.length),F=E.make({xAvgCharWidth:Math.round(k.advanceWidthAvg),usWeightClass:e.tables.os2.usWeightClass,usWidthClass:e.tables.os2.usWidthClass,usFirstCharIndex:t,usLastCharIndex:S,ulUnicodeRange1:M,ulUnicodeRange2:R,ulUnicodeRange3:A,ulUnicodeRange4:C,fsSelection:e.tables.os2.fsSelection,sTypoAscender:k.ascender,sTypoDescender:k.descender,sTypoLineGap:0,usWinAscent:k.yMax,usWinDescent:Math.abs(k.yMin),ulCodePageRange1:1,sxHeight:s(e,"xyvw",{yMax:Math.round(k.ascender/2)}).yMax,sCapHeight:s(e,"HIKLEFJMNTZBDPRAGOQSUVWXY",k).yMax,usDefaultChar:e.hasChar(" ")?32:0,usBreakChar:e.hasChar(" ")?32:0}),B=g.make(e.glyphs),z=d.make(e.glyphs),j=e.getEnglishName("fontFamily"),V=e.getEnglishName("fontSubfamily"),G=j+" "+V,W=e.getEnglishName("postScriptName");W||(W=j.replace(/\s/g,"")+"-"+V);var q={};for(var X in e.names)q[X]=e.names[X];q.uniqueID||(q.uniqueID={en:e.getEnglishName("manufacturer")+":"+G}),q.postScriptName||(q.postScriptName={en:W}),q.preferredFamily||(q.preferredFamily=e.names.fontFamily),q.preferredSubfamily||(q.preferredSubfamily=e.names.fontSubfamily);var Y=[],Z=b.make(q,Y),K=Y.length>0?v.make(Y):void 0,Q=x.make(),J=f.make(e.glyphs,{version:e.getEnglishName("version"),fullName:G,familyName:j,weightName:V,postScriptName:W,unitsPerEm:e.unitsPerEm,fontBBox:[0,k.yMin,k.ascender,k.advanceWidthMax]}),$=e.metas&&Object.keys(e.metas).length>0?T.make(e.metas):void 0,ee=[N,U,D,F,Z,z,Q,J,B];K&&ee.push(K),e.tables.gsub&&ee.push(w.make(e.tables.gsub)),$&&ee.push($);var te=o(ee),re=i(te.encode()),ne=te.fields,ie=!1;for(L=0;L<ne.length;L+=1)if("head table"===ne[L].name){ne[L].value.checkSumAdjustment=2981146554-re,ie=!0;break}if(!ie)throw new Error("Could not find head table with checkSum to adjust.");return te}var c=e("../check"),h=e("../table"),d=e("./cmap"),f=e("./cff"),p=e("./head"),m=e("./hhea"),g=e("./hmtx"),v=e("./ltag"),y=e("./maxp"),b=e("./name"),E=e("./os2"),x=e("./post"),w=e("./gsub"),T=e("./meta");r.computeCheckSum=i,r.make=o,r.fontToTable=u},{"../check":2,"../table":13,"./cff":14,"./cmap":15,"./gsub":19,"./head":20,"./hhea":21,"./hmtx":22,"./ltag":25,"./maxp":26,"./meta":27,"./name":28,"./os2":29,"./post":30}],32:[function(e,t,r){"use strict";function n(e){return function(){return e}}var i=e("./check"),a=32768,o=2147483648,s={},l={},u={};l.BYTE=function(e){return i.argument(e>=0&&255>=e,"Byte value should be between 0 and 255."),[e]},u.BYTE=n(1),l.CHAR=function(e){return[e.charCodeAt(0)]},u.CHAR=n(1),l.CHARARRAY=function(e){for(var t=[],r=0;r<e.length;r+=1)t[r]=e.charCodeAt(r);return t},u.CHARARRAY=function(e){return e.length},l.USHORT=function(e){return[e>>8&255,255&e]},u.USHORT=n(2),l.SHORT=function(e){return e>=a&&(e=-(2*a-e)),[e>>8&255,255&e]},u.SHORT=n(2),l.UINT24=function(e){return[e>>16&255,e>>8&255,255&e]},u.UINT24=n(3),l.ULONG=function(e){return[e>>24&255,e>>16&255,e>>8&255,255&e]},u.ULONG=n(4),l.LONG=function(e){return e>=o&&(e=-(2*o-e)),[e>>24&255,e>>16&255,e>>8&255,255&e]},u.LONG=n(4),l.FIXED=l.ULONG,u.FIXED=u.ULONG,l.FWORD=l.SHORT,u.FWORD=u.SHORT,l.UFWORD=l.USHORT,u.UFWORD=u.USHORT,l.LONGDATETIME=function(e){return[0,0,0,0,e>>24&255,e>>16&255,e>>8&255,255&e]},u.LONGDATETIME=n(8),l.TAG=function(e){return i.argument(4===e.length,"Tag should be exactly 4 ASCII characters."),[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]},u.TAG=n(4),l.Card8=l.BYTE,u.Card8=u.BYTE,l.Card16=l.USHORT,u.Card16=u.USHORT,l.OffSize=l.BYTE,u.OffSize=u.BYTE,l.SID=l.USHORT,u.SID=u.USHORT,l.NUMBER=function(e){return e>=-107&&107>=e?[e+139]:e>=108&&1131>=e?[247+((e-=108)>>8),255&e]:e>=-1131&&-108>=e?[251+((e=-e-108)>>8),255&e]:e>=-32768&&32767>=e?l.NUMBER16(e):l.NUMBER32(e)},u.NUMBER=function(e){return l.NUMBER(e).length},l.NUMBER16=function(e){return[28,e>>8&255,255&e]},u.NUMBER16=n(3),l.NUMBER32=function(e){return[29,e>>24&255,e>>16&255,e>>8&255,255&e]},u.NUMBER32=n(5),l.REAL=function(e){var t=e.toString(),r=/\.(\d*?)(?:9{5,20}|0{5,20})\d{0,2}(?:e(.+)|$)/.exec(t);if(r){var n=parseFloat("1e"+((r[2]?+r[2]:0)+r[1].length));t=(Math.round(e*n)/n).toString()}var i,a,o="";for(i=0,a=t.length;a>i;i+=1){var s=t[i];o+="e"===s?"-"===t[++i]?"c":"b":"."===s?"a":"-"===s?"e":s}var l=[30];for(i=0,a=(o+=1&o.length?"f":"ff").length;a>i;i+=2)l.push(parseInt(o.substr(i,2),16));return l},u.REAL=function(e){return l.REAL(e).length},l.NAME=l.CHARARRAY,u.NAME=u.CHARARRAY,l.STRING=l.CHARARRAY,u.STRING=u.CHARARRAY,s.UTF8=function(e,t,r){for(var n=[],i=r,a=0;i>a;a++,t+=1)n[a]=e.getUint8(t);return String.fromCharCode.apply(null,n)},s.UTF16=function(e,t,r){for(var n=[],i=r/2,a=0;i>a;a++,t+=2)n[a]=e.getUint16(t);return String.fromCharCode.apply(null,n)},l.UTF16=function(e){for(var t=[],r=0;r<e.length;r+=1){var n=e.charCodeAt(r);t[t.length]=n>>8&255,t[t.length]=255&n}return t},u.UTF16=function(e){return 2*e.length};var c={"x-mac-croatian":"ÃÃÃÃÃÃÃÃ¡Ã Ã¢Ã¤Ã£Ã¥Ã§Ã©Ã¨ÃªÃ«Ã­Ã¬Ã®Ã¯Ã±Ã³Ã²Ã´Ã¶ÃµÃºÃ¹Ã»Ã¼â Â°Â¢Â£Â§â¢Â¶ÃÂ®Å â¢Â´Â¨â Å½ÃâÂ±â¤â¥âÂµâââÅ¡â«ÂªÂºÎ©Å¾Ã¸Â¿Â¡Â¬âÆâÄÂ«Äâ¦Â ÃÃÃÅÅÄâââââÃ·âï£¿Â©ââ¬â¹âºÃÂ»âÂ·âââ°ÃÄÃÄÃÃÃÃÃÃÃÄÃÃÃÃÄ±ËËÂ¯ÏÃËÂ¸ÃÃ¦Ë","x-mac-cyrillic":"ÐÐÐÐÐÐÐÐÐÐÐÐÐÐÐÐÐ Ð¡Ð¢Ð£Ð¤Ð¥Ð¦Ð§Ð¨Ð©ÐªÐ«Ð¬Ð­Ð®Ð¯â Â°ÒÂ£Â§â¢Â¶ÐÂ®Â©â¢ÐÑâ ÐÑâÂ±â¤â¥ÑÂµÒÐÐÑÐÑÐÑÐÑÑÐÂ¬âÆââÂ«Â»â¦Â ÐÑÐÑÑââââââÃ·âÐÑÐÑâÐÑÑÐ°Ð±Ð²Ð³Ð´ÐµÐ¶Ð·Ð¸Ð¹ÐºÐ»Ð¼Ð½Ð¾Ð¿ÑÑÑÑÑÑÑÑÑÑÑÑÑÑÑ","x-mac-gaelic":"ÃÃÃÃÃÃÃÃ¡Ã Ã¢Ã¤Ã£Ã¥Ã§Ã©Ã¨ÃªÃ«Ã­Ã¬Ã®Ã¯Ã±Ã³Ã²Ã´Ã¶ÃµÃºÃ¹Ã»Ã¼â Â°Â¢Â£Â§â¢Â¶ÃÂ®Â©â¢Â´Â¨â ÃÃá¸Â±â¤â¥á¸ÄÄá¸á¸á¸á¸Ä Ä¡á¹Ã¦Ã¸á¹á¹á¹É¼ÆÅ¿á¹ Â«Â»â¦Â ÃÃÃÅÅââââââá¹¡áºÃ¿Å¸á¹ªâ¬â¹âºÅ¶Å·á¹«Â·á»²á»³âÃÃÃÃÃÃÃÃÃÃÃâ£ÃÃÃÃÄ±ÃÃ½Å´Åµáºáºáºáºáºáº","x-mac-greek":"ÃÂ¹Â²ÃÂ³ÃÃÎÃ Ã¢Ã¤ÎÂ¨Ã§Ã©Ã¨ÃªÃ«Â£â¢Ã®Ã¯â¢Â½â°Ã´Ã¶Â¦â¬Ã¹Ã»Ã¼â ÎÎÎÎÎÎ ÃÂ®Â©Î£ÎªÂ§â Â°Â·ÎÂ±â¤â¥Â¥ÎÎÎÎÎÎÎÎ¦Î«Î¨Î©Î¬ÎÂ¬ÎÎ¡âÎ¤Â«Â»â¦Â Î¥Î§ÎÎÅââââââÃ·ÎÎÎÎÎ­Î®Î¯ÏÎÏÎ±Î²ÏÎ´ÎµÏÎ³Î·Î¹Î¾ÎºÎ»Î¼Î½Î¿ÏÏÏÏÏÎ¸ÏÏÏÏÎ¶ÏÏÎÎ°Â­","x-mac-icelandic":"ÃÃÃÃÃÃÃÃ¡Ã Ã¢Ã¤Ã£Ã¥Ã§Ã©Ã¨ÃªÃ«Ã­Ã¬Ã®Ã¯Ã±Ã³Ã²Ã´Ã¶ÃµÃºÃ¹Ã»Ã¼ÃÂ°Â¢Â£Â§â¢Â¶ÃÂ®Â©â¢Â´Â¨â ÃÃâÂ±â¤â¥Â¥ÂµâââÏâ«ÂªÂºÎ©Ã¦Ã¸Â¿Â¡Â¬âÆââÂ«Â»â¦Â ÃÃÃÅÅââââââÃ·âÃ¿Å¸ââ¬ÃÃ°ÃÃ¾Ã½Â·âââ°ÃÃÃÃÃÃÃÃÃÃÃï£¿ÃÃÃÃÄ±ËËÂ¯ËËËÂ¸ËËË","x-mac-inuit":"ááááááá±á²á³á´á¸á¹áááááááá¦á­á®á¯á°á²á³áááááááÂ°á¡á¥á¦â¢Â¶á§Â®Â©â¢á¨áªá«á»áááááááá¯á°á±á²á´áµááááááááªá¨á©áªá«á­â¦Â á®á¾áááââââââáááááááááááá¿áááááááááááááá±á²á³á´áµá¶áá á¡á¢á£á¤á¥á¦á¼ÅÅ","x-mac-ce":"ÃÄÄÃÄÃÃÃ¡ÄÄÃ¤ÄÄÄÃ©Å¹ÅºÄÃ­ÄÄÄÄÃ³ÄÃ´Ã¶ÃµÃºÄÄÃ¼â Â°ÄÂ£Â§â¢Â¶ÃÂ®Â©â¢ÄÂ¨â Ä£Ä®Ä¯Äªâ¤â¥Ä«Ä¶ââÅÄ»Ä¼Ä½Ä¾Ä¹ÄºÅÅÅÂ¬âÅÅâÂ«Â»â¦Â ÅÅÃÅÅââââââÃ·âÅÅÅÅâ¹âºÅÅÅÅ ââÅ¡ÅÅÃÅ¤Å¥ÃÅ½Å¾ÅªÃÃÅ«Å®ÃÅ¯Å°Å±Å²Å³ÃÃ½Ä·Å»ÅÅ¼Ä¢Ë",macintosh:"ÃÃÃÃÃÃÃÃ¡Ã Ã¢Ã¤Ã£Ã¥Ã§Ã©Ã¨ÃªÃ«Ã­Ã¬Ã®Ã¯Ã±Ã³Ã²Ã´Ã¶ÃµÃºÃ¹Ã»Ã¼â Â°Â¢Â£Â§â¢Â¶ÃÂ®Â©â¢Â´Â¨â ÃÃâÂ±â¤â¥Â¥ÂµâââÏâ«ÂªÂºÎ©Ã¦Ã¸Â¿Â¡Â¬âÆââÂ«Â»â¦Â ÃÃÃÅÅââââââÃ·âÃ¿Å¸ââ¬â¹âºï¬ï¬â¡Â·âââ°ÃÃÃÃÃÃÃÃÃÃÃï£¿ÃÃÃÃÄ±ËËÂ¯ËËËÂ¸ËËË","x-mac-romanian":"ÃÃÃÃÃÃÃÃ¡Ã Ã¢Ã¤Ã£Ã¥Ã§Ã©Ã¨ÃªÃ«Ã­Ã¬Ã®Ã¯Ã±Ã³Ã²Ã´Ã¶ÃµÃºÃ¹Ã»Ã¼â Â°Â¢Â£Â§â¢Â¶ÃÂ®Â©â¢Â´Â¨â ÄÈâÂ±â¤â¥Â¥ÂµâââÏâ«ÂªÂºÎ©ÄÈÂ¿Â¡Â¬âÆââÂ«Â»â¦Â ÃÃÃÅÅââââââÃ·âÃ¿Å¸ââ¬â¹âºÈÈâ¡Â·âââ°ÃÃÃÃÃÃÃÃÃÃÃï£¿ÃÃÃÃÄ±ËËÂ¯ËËËÂ¸ËËË","x-mac-turkish":"ÃÃÃÃÃÃÃÃ¡Ã Ã¢Ã¤Ã£Ã¥Ã§Ã©Ã¨ÃªÃ«Ã­Ã¬Ã®Ã¯Ã±Ã³Ã²Ã´Ã¶ÃµÃºÃ¹Ã»Ã¼â Â°Â¢Â£Â§â¢Â¶ÃÂ®Â©â¢Â´Â¨â ÃÃâÂ±â¤â¥Â¥ÂµâââÏâ«ÂªÂºÎ©Ã¦Ã¸Â¿Â¡Â¬âÆââÂ«Â»â¦Â ÃÃÃÅÅââââââÃ·âÃ¿Å¸ÄÄÄ°Ä±ÅÅâ¡Â·âââ°ÃÃÃÃÃÃÃÃÃÃÃï£¿ÃÃÃÃï¢ ËËÂ¯ËËËÂ¸ËËË"};s.MACSTRING=function(e,t,r,n){var i=c[n];if(void 0!==i){for(var a="",o=0;r>o;o++){var s=e.getUint8(t+o);a+=127>=s?String.fromCharCode(s):i[127&s]}return a}};var h,d="function"==typeof WeakMap&&new WeakMap,f=function(e){if(!h)for(var t in h={},c)h[t]=new String(t);var r=h[e];if(void 0!==r){if(d){var n=d.get(r);if(void 0!==n)return n}var i=c[e];if(void 0!==i){for(var a={},o=0;o<i.length;o++)a[i.charCodeAt(o)]=o+128;return d&&d.set(r,a),a}}};l.MACSTRING=function(e,t){var r=f(t);if(void 0!==r){for(var n=[],i=0;i<e.length;i++){var a=e.charCodeAt(i);if(a>=128&&void 0===(a=r[a]))return;n[i]=a}return n}},u.MACSTRING=function(e,t){var r=l.MACSTRING(e,t);return void 0!==r?r.length:0},l.INDEX=function(e){var t,r=1,n=[r],i=[];for(t=0;t<e.length;t+=1){var a=l.OBJECT(e[t]);Array.prototype.push.apply(i,a),r+=a.length,n.push(r)}if(0===i.length)return[0,0];var o=[],s=1+Math.floor(Math.log(r)/Math.log(2))/8|0,u=[void 0,l.BYTE,l.USHORT,l.UINT24,l.ULONG][s];for(t=0;t<n.length;t+=1){var c=u(n[t]);Array.prototype.push.apply(o,c)}return Array.prototype.concat(l.Card16(e.length),l.OffSize(s),o,i)},u.INDEX=function(e){return l.INDEX(e).length},l.DICT=function(e){for(var t=[],r=Object.keys(e),n=r.length,i=0;n>i;i+=1){var a=parseInt(r[i],0),o=e[a];t=(t=t.concat(l.OPERAND(o.value,o.type))).concat(l.OPERATOR(a))}return t},u.DICT=function(e){return l.DICT(e).length},l.OPERATOR=function(e){return 1200>e?[e]:[12,e-1200]},l.OPERAND=function(e,t){var r=[];if(Array.isArray(t))for(var n=0;n<t.length;n+=1)i.argument(e.length===t.length,"Not enough arguments given for type"+t),r=r.concat(l.OPERAND(e[n],t[n]));else if("SID"===t)r=r.concat(l.NUMBER(e));else if("offset"===t)r=r.concat(l.NUMBER32(e));else if("number"===t)r=r.concat(l.NUMBER(e));else{if("real"!==t)throw new Error("Unknown operand type "+t);r=r.concat(l.REAL(e))}return r},l.OP=l.BYTE,u.OP=u.BYTE;var p="function"==typeof WeakMap&&new WeakMap;l.CHARSTRING=function(e){if(p){var t=p.get(e);if(void 0!==t)return t}for(var r=[],n=e.length,i=0;n>i;i+=1){var a=e[i];r=r.concat(l[a.type](a.value))}return p&&p.set(e,r),r},u.CHARSTRING=function(e){return l.CHARSTRING(e).length},l.OBJECT=function(e){var t=l[e.type];return i.argument(void 0!==t,"No encoding function for type "+e.type),t(e.value)},u.OBJECT=function(e){var t=u[e.type];return i.argument(void 0!==t,"No sizeOf function for type "+e.type),t(e.value)},l.TABLE=function(e){var t,r=[],n=e.fields.length,a=[],o=[];for(t=0;n>t;t+=1){var s=e.fields[t],u=l[s.type];i.argument(void 0!==u,"No encoding function for field type "+s.type+" ("+s.name+")");var c=e[s.name];void 0===c&&(c=s.value);var h=u(c);"TABLE"===s.type?(o.push(r.length),r=r.concat([0,0]),a.push(h)):r=r.concat(h)}for(t=0;t<a.length;t+=1){var d=o[t],f=r.length;i.argument(65536>f,"Table "+e.tableName+" too big."),r[d]=f>>8,r[d+1]=255&f,r=r.concat(a[t])}return r},u.TABLE=function(e){for(var t=0,r=e.fields.length,n=0;r>n;n+=1){var a=e.fields[n],o=u[a.type];i.argument(void 0!==o,"No sizeOf function for field type "+a.type+" ("+a.name+")");var s=e[a.name];void 0===s&&(s=a.value),t+=o(s),"TABLE"===a.type&&(t+=2)}return t},l.RECORD=l.TABLE,u.RECORD=u.TABLE,l.LITERAL=function(e){return e},u.LITERAL=function(e){return e.length},r.decode=s,r.encode=l,r.sizeOf=u},{"./check":2}],33:[function(e,t,r){"use strict";r.isBrowser=function(){return"undefined"!=typeof window},r.isNode=function(){return"undefined"==typeof window},r.nodeBufferToArrayBuffer=function(e){for(var t=new ArrayBuffer(e.length),r=new Uint8Array(t),n=0;n<e.length;++n)r[n]=e[n];return t},r.arrayBufferToNodeBuffer=function(e){for(var t=new i(e.byteLength),r=new Uint8Array(e),n=0;n<t.length;++n)t[n]=r[n];return t},r.checkArgument=function(e,t){if(!e)throw t}},{}]},{},[9])(9)},7712:e=>{var t=function(){function e(e){return i.appendChild(e.dom),e}function r(e){for(var t=0;t<i.children.length;t++)i.children[t].style.display=t===e?"block":"none";n=e}var n=0,i=document.createElement("div");i.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",i.addEventListener("click",(function(e){e.preventDefault(),r(++n%i.children.length)}),!1);var a=(performance||Date).now(),o=a,s=0,l=e(new t.Panel("FPS","#0ff","#002")),u=e(new t.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var c=e(new t.Panel("MB","#f08","#201"));return r(0),{REVISION:16,dom:i,addPanel:e,showPanel:r,begin:function(){a=(performance||Date).now()},end:function(){s++;var e=(performance||Date).now();if(u.update(e-a,200),e>o+1e3&&(l.update(1e3*s/(e-o),100),o=e,s=0,c)){var t=performance.memory;c.update(t.usedJSHeapSize/1048576,t.jsHeapSizeLimit/1048576)}return e},update:function(){a=this.end()},domElement:i,setMode:r}};t.Panel=function(e,t,r){var n=1/0,i=0,a=Math.round,o=a(window.devicePixelRatio||1),s=80*o,l=48*o,u=3*o,c=2*o,h=3*o,d=15*o,f=74*o,p=30*o,m=document.createElement("canvas");m.width=s,m.height=l,m.style.cssText="width:80px;height:48px";var g=m.getContext("2d");return g.font="bold "+9*o+"px Helvetica,Arial,sans-serif",g.textBaseline="top",g.fillStyle=r,g.fillRect(0,0,s,l),g.fillStyle=t,g.fillText(e,u,c),g.fillRect(h,d,f,p),g.fillStyle=r,g.globalAlpha=.9,g.fillRect(h,d,f,p),{dom:m,update:function(l,v){n=Math.min(n,l),i=Math.max(i,l),g.fillStyle=r,g.globalAlpha=1,g.fillRect(0,0,s,d),g.fillStyle=t,g.fillText(a(l)+" "+e+" ("+a(n)+"-"+a(i)+")",u,c),g.drawImage(m,h+o,d,f-o,p,h,d,f-o,p),g.fillRect(h+f-o,d,o,p),g.fillStyle=r,g.globalAlpha=.9,g.fillRect(h+f-o,d,o,a((1-l/v)*p))}}},e.exports=t},9419:()=>{"use strict";var e,t=t||(e=[],{REVISION:"7",getAll:function(){return e},removeAll:function(){e=[]},add:function(t){e.push(t)},remove:function(t){-1!==(t=e.indexOf(t))&&e.splice(t,1)},update:function(t){if(0===e.length)return!1;var r=0,n=e.length;for(t=void 0!==t?t:Date.now();r<n;)e[r].update(t)?r++:(e.splice(r,1),n--);return!0}});t.Tween=function(e){var r={},n={},i=1e3,a=0,o=null,s=t.Easing.Linear.None,l=t.Interpolation.Linear,u=[],c=null,h=!1,d=null,f=null;this.to=function(e,t){return null!==t&&(i=t),n=e,this},this.start=function(i){for(var s in t.add(this),h=!1,o=void 0!==i?i:Date.now(),o+=a,n)if(null!==e[s]){if(n[s]instanceof Array){if(0===n[s].length)continue;n[s]=[e[s]].concat(n[s])}r[s]=e[s]}return this},this.stop=function(){return t.remove(this),this},this.delay=function(e){return a=e,this},this.easing=function(e){return s=e,this},this.interpolation=function(e){return l=e,this},this.chain=function(){return u=arguments,this},this.onStart=function(e){return c=e,this},this.onUpdate=function(e){return d=e,this},this.onComplete=function(e){return f=e,this},this.update=function(t){if(t<o)return!0;!1===h&&(null!==c&&c.call(e),h=!0);var a,p,m=s(a=1<(a=(t-o)/i)?1:a);for(p in r){var g=r[p],v=n[p];e[p]=v instanceof Array?l(v,m):g+(v-g)*m}if(null!==d&&d.call(e,m),1==a){for(null!==f&&f.call(e),a=0,m=u.length;a<m;a++)u[a].start(t);return!1}return!0}},t.Easing={Linear:{None:function(e){return e}},Quadratic:{In:function(e){return e*e},Out:function(e){return e*(2-e)},InOut:function(e){return 1>(e*=2)?.5*e*e:-.5*(--e*(e-2)-1)}},Cubic:{In:function(e){return e*e*e},Out:function(e){return--e*e*e+1},InOut:function(e){return 1>(e*=2)?.5*e*e*e:.5*((e-=2)*e*e+2)}},Quartic:{In:function(e){return e*e*e*e},Out:function(e){return 1- --e*e*e*e},InOut:function(e){return 1>(e*=2)?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2)}},Quintic:{In:function(e){return e*e*e*e*e},Out:function(e){return--e*e*e*e*e+1},InOut:function(e){return 1>(e*=2)?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)}},Sinusoidal:{In:function(e){return 1-Math.cos(e*Math.PI/2)},Out:function(e){return Math.sin(e*Math.PI/2)},InOut:function(e){return.5*(1-Math.cos(Math.PI*e))}},Exponential:{In:function(e){return 0===e?0:Math.pow(1024,e-1)},Out:function(e){return 1===e?1:1-Math.pow(2,-10*e)},InOut:function(e){return 0===e?0:1===e?1:1>(e*=2)?.5*Math.pow(1024,e-1):.5*(2-Math.pow(2,-10*(e-1)))}},Circular:{In:function(e){return 1-Math.sqrt(1-e*e)},Out:function(e){return Math.sqrt(1- --e*e)},InOut:function(e){return 1>(e*=2)?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)}},Elastic:{In:function(e){var t,r=.1;return 0===e?0:1===e?1:(!r||1>r?(r=1,t=.1):t=.4*Math.asin(1/r)/(2*Math.PI),-r*Math.pow(2,10*(e-=1))*Math.sin(2*(e-t)*Math.PI/.4))},Out:function(e){var t,r=.1;return 0===e?0:1===e?1:(!r||1>r?(r=1,t=.1):t=.4*Math.asin(1/r)/(2*Math.PI),r*Math.pow(2,-10*e)*Math.sin(2*(e-t)*Math.PI/.4)+1)},InOut:function(e){var t,r=.1;return 0===e?0:1===e?1:(!r||1>r?(r=1,t=.1):t=.4*Math.asin(1/r)/(2*Math.PI),1>(e*=2)?-.5*r*Math.pow(2,10*(e-=1))*Math.sin(2*(e-t)*Math.PI/.4):.5*r*Math.pow(2,-10*(e-=1))*Math.sin(2*(e-t)*Math.PI/.4)+1)}},Back:{In:function(e){return e*e*(2.70158*e-1.70158)},Out:function(e){return--e*e*(2.70158*e+1.70158)+1},InOut:function(e){return 1>(e*=2)?.5*e*e*(3.5949095*e-2.5949095):.5*((e-=2)*e*(3.5949095*e+2.5949095)+2)}},Bounce:{In:function(e){return 1-t.Easing.Bounce.Out(1-e)},Out:function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},InOut:function(e){return.5>e?.5*t.Easing.Bounce.In(2*e):.5*t.Easing.Bounce.Out(2*e-1)+.5}}},t.Interpolation={Linear:function(e,r){var n=e.length-1,i=n*r,a=Math.floor(i),o=t.Interpolation.Utils.Linear;return 0>r?o(e[0],e[1],i):1<r?o(e[n],e[n-1],n-i):o(e[a],e[a+1>n?n:a+1],i-a)},Bezier:function(e,r){var n,i=0,a=e.length-1,o=Math.pow,s=t.Interpolation.Utils.Bernstein;for(n=0;n<=a;n++)i+=o(1-r,a-n)*o(r,n)*e[n]*s(a,n);return i},CatmullRom:function(e,r){var n=e.length-1,i=n*r,a=Math.floor(i),o=t.Interpolation.Utils.CatmullRom;return e[0]===e[n]?(0>r&&(a=Math.floor(i=n*(1+r))),o(e[(a-1+n)%n],e[a],e[(a+1)%n],e[(a+2)%n],i-a)):0>r?e[0]-(o(e[0],e[0],e[1],e[1],-i)-e[0]):1<r?e[n]-(o(e[n],e[n],e[n-1],e[n-1],i-n)-e[n]):o(e[a?a-1:0],e[a],e[n<a+1?n:a+1],e[n<a+2?n:a+2],i-a)},Utils:{Linear:function(e,t,r){return(t-e)*r+e},Bernstein:function(e,r){var n=t.Interpolation.Utils.Factorial;return n(e)/n(r)/n(e-r)},Factorial:function(){var e=[1];return function(t){var r,n=1;if(e[t])return e[t];for(r=t;1<r;r--)n*=r;return e[t]=n}}(),CatmullRom:function(e,t,r,n,i){var a=i*i;return(2*t-2*r+(e=.5*(r-e))+(n=.5*(n-t)))*i*a+(-3*t+3*r-2*e-n)*a+e*i+t}}}},5172:e=>{function t(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=()=>[],t.resolve=t,t.id=5172,e.exports=t},9791:(e,t,r)=>{var n=r(5108);THREE.ThreeMFLoader=function(e){this.manager=void 0!==e?e:THREE.DefaultLoadingManager,this.availableExtensions=[]},THREE.ThreeMFLoader.prototype={constructor:THREE.ThreeMFLoader,load:function(e,t,r,n){var i=this,a=new THREE.FileLoader(i.manager);a.setResponseType("arraybuffer"),a.load(e,(function(e){t(i.parse(e))}),r,n)},parse:function(e){var t=this;function r(e){var t={type:e.getAttribute("type")},r=e.getAttribute("id");r&&(t.id=r);var n=e.getAttribute("pid");n&&(t.pid=n);var i=e.getAttribute("pindex");i&&(t.pindex=i);var a=e.getAttribute("thumbnail");a&&(t.thumbnail=a);var o=e.getAttribute("partnumber");o&&(t.partnumber=o);var s=e.getAttribute("name");s&&(t.name=s);var l=e.querySelector("mesh");l&&(t.mesh=function(e,t){for(var r={},n=[],i=e.querySelectorAll("vertices vertex"),a=0;a<i.length;a++){var o=i[a],s=o.getAttribute("x"),l=o.getAttribute("y"),u=o.getAttribute("z");n.push(parseFloat(s),parseFloat(l),parseFloat(u))}for(r.vertices=new Float32Array(n.length),a=0;a<n.length;a++)r.vertices[a]=n[a];var c=[],h=[],d=e.querySelectorAll("triangles triangle");for(a=0;a<d.length;a++){var f=d[a],p=f.getAttribute("v1"),m=f.getAttribute("v2"),g=f.getAttribute("v3"),v=f.getAttribute("p1"),y=f.getAttribute("p2"),b=f.getAttribute("p3"),E=f.getAttribute("pid");h.push(parseInt(p,10),parseInt(m,10),parseInt(g,10));var x={};v&&(x.p1=parseInt(v,10)),y&&(x.p2=parseInt(y,10)),b&&(x.p3=parseInt(b,10)),E&&(x.pid=E),0<Object.keys(x).length&&c.push(x)}for(r.triangleProperties=c,r.triangles=new Uint32Array(h.length),a=0;a<h.length;a++)r.triangles[a]=h[a];return r}(l));var u=e.querySelector("components");return u&&(t.components=void 0),t}function i(e){var t={unit:e.getAttribute("unit")||"millimeter"},n=e.querySelectorAll("metadata");n&&(t.metadata=function(e){for(var t={},r=0;r<e.length;r++){var n=e[r],i=n.getAttribute("name");0<=["Title","Designer","Description","Copyright","LicenseTerms","Rating","CreationDate","ModificationDate"].indexOf(i)&&(t[i]=n.textContent)}return t}(n));var i=e.querySelector("resources");i&&(t.resources=function(e){var t={},n=e.querySelector("basematerials");n&&(t.basematerial=void 0),t.object={};for(var i=e.querySelectorAll("object"),a=0;a<i.length;a++){var o=r(i[a]);t.object[o.id]=o}return t}(i));var a=e.querySelector("build");return a&&(t.build=function(e){for(var t=[],r=e.querySelectorAll("item"),n=0;n<r.length;n++){var i=r[n],a={objectid:i.getAttribute("objectid")},o=i.getAttribute("transform");if(o){var s=[];o.split(" ").forEach((function(e){s.push(parseFloat(e))}));var l=new THREE.Matrix4;a.transform=l.set(s[0],s[3],s[6],s[9],s[1],s[4],s[7],s[10],s[2],s[5],s[8],s[11],0,0,0,1)}t.push(a)}return t}(a)),t}function a(e,t){var r=new THREE.BufferGeometry;r.setIndex(new THREE.BufferAttribute(e.triangles,1)),r.addAttribute("position",new THREE.BufferAttribute(e.vertices,3)),e.colors&&r.addAttribute("color",new THREE.BufferAttribute(e.colors,3)),r.computeBoundingSphere();var n={flatShading:!0};e.colors&&0<e.colors.length?n.vertexColors=THREE.VertexColors:n.color=11184895;var i=new THREE.MeshPhongMaterial(n);return new THREE.Mesh(r,i)}function o(e,r,n,i){if(e){for(var a=[],o=Object.keys(e),s=0;s<o.length;s++)for(var l=o[s],u=0;u<t.availableExtensions.length;u++){(c=t.availableExtensions[u]).ns===l&&a.push(c)}for(s=0;s<a.length;s++){var c;(c=a[s]).apply(n,e[c.ns],r)}}}var s=function(e){var t,r,a=null,o=null,s=[],l=[],u=[],c=[],h={},d={};try{a=new JSZip(e)}catch(e){if(e instanceof ReferenceError)return n.error("THREE.ThreeMFLoader: jszip missing and file is compressed."),null}for(o in a.files)o.match(/\.rels$/)?t=o:o.match(/^3D\/.*\.model$/)?s.push(o):o.match(/^3D\/Metadata\/.*\.xml$/)?l.push(o):o.match(/^3D\/Textures\/.*/)?u.push(o):o.match(/^3D\/Other\/.*/)&&c.push(o);var f=new Uint8Array(a.file(t).asArrayBuffer());r=function(e){var t=(new DOMParser).parseFromString(e,"application/xml"),r=t.querySelector("Relationship"),n=r.getAttribute("Target"),i=r.getAttribute("Id"),a=r.getAttribute("Type");return{target:n,id:i,type:a}}(THREE.LoaderUtils.decodeText(f));for(var p=0;p<s.length;p++){var m=s[p],g=new Uint8Array(a.file(m).asArrayBuffer()),v=THREE.LoaderUtils.decodeText(g),y=(new DOMParser).parseFromString(v,"application/xml");"model"!==y.documentElement.nodeName.toLowerCase()&&n.error("THREE.ThreeMFLoader: Error loading 3MF - no 3MF document found: ",m);var b=y.querySelector("model"),E={};for(p=0;p<b.attributes.length;p++){var x=b.attributes[p];x.name.match(/^xmlns:(.+)$/)&&(E[x.value]=RegExp.$1)}var w=i(b);w.xml=b,0<Object.keys(E).length&&(w.extensions=E),h[m]=w}for(p=0;p<u.length;p++){var T=u[p];d[T]=a.file(T).asBinary()}return{rels:r,model:h,printTicket:{},texture:d,other:{}}}(e),l=function(e){for(var t=e.model,r={},n=Object.keys(t),i=0;i<n.length;i++)for(var s=t[n[i]],l=s.xml,u=s.extensions,c=Object.keys(s.resources.object),h=0;h<c.length;h++){var d=c[h],f=s.resources.object[d].mesh;o(u,f,l),r[d]=a(f)}return r}(s);return function(e,t,r){for(var n=new THREE.Group,i=r.model[t.target.substring(1)].build,a=0;a<i.length;a++){var o=i[a],s=e[o.objectid];o.transform&&s.geometry.applyMatrix(o.transform),n.add(s)}return n}(l,s.rels,s)},addExtension:function(e){this.availableExtensions.push(e)}}},5958:(e,t,r)=>{var n=r(5108);THREE.AMFLoader=function(e){this.manager=void 0!==e?e:THREE.DefaultLoadingManager},THREE.AMFLoader.prototype={constructor:THREE.AMFLoader,load:function(e,t,r,n){var i=this,a=new THREE.FileLoader(i.manager);a.setResponseType("arraybuffer"),a.load(e,(function(e){t(i.parse(e))}),r,n)},parse:function(e){function t(e){for(var t="AMF Material",n=e.attributes.id.textContent,i={r:1,g:1,b:1,a:1},a=null,o=0;o<e.childNodes.length;o++){var s=e.childNodes[o];"metadata"===s.nodeName&&void 0!==s.attributes.type?"name"===s.attributes.type.value&&(t=s.textContent):"color"===s.nodeName&&(i=r(s))}return a=new THREE.MeshPhongMaterial({flatShading:!0,color:new THREE.Color(i.r,i.g,i.b),name:t}),1!==i.a&&(a.transparent=!0,a.opacity=i.a),{id:n,material:a}}function r(e){for(var t={r:1,g:1,b:1,a:1},r=0;r<e.childNodes.length;r++){var n=e.childNodes[r];"r"===n.nodeName?t.r=n.textContent:"g"===n.nodeName?t.g=n.textContent:"b"===n.nodeName?t.b=n.textContent:"a"===n.nodeName&&(t.a=n.textContent)}return t}function i(e){var t={name:"",triangles:[],materialid:null},r=e.firstElementChild;for(void 0!==e.attributes.materialid&&(t.materialId=e.attributes.materialid.nodeValue);r;){if("metadata"===r.nodeName)void 0!==r.attributes.type&&"name"===r.attributes.type.value&&(t.name=r.textContent);else if("triangle"===r.nodeName){var n=r.getElementsByTagName("v1")[0].textContent,i=r.getElementsByTagName("v2")[0].textContent,a=r.getElementsByTagName("v3")[0].textContent;t.triangles.push(n,i,a)}r=r.nextElementSibling}return t}function a(e){for(var t=[],r=[],n=e.firstElementChild;n;){if("vertex"===n.nodeName)for(var i=n.firstElementChild;i;){if("coordinates"===i.nodeName){var a=i.getElementsByTagName("x")[0].textContent,o=i.getElementsByTagName("y")[0].textContent,s=i.getElementsByTagName("z")[0].textContent;t.push(a,o,s)}else if("normal"===i.nodeName){var l=i.getElementsByTagName("nx")[0].textContent,u=i.getElementsByTagName("ny")[0].textContent,c=i.getElementsByTagName("nz")[0].textContent;r.push(l,u,c)}i=i.nextElementSibling}n=n.nextElementSibling}return{vertices:t,normals:r}}function o(e){for(var t=e.attributes.id.textContent,n={name:"amfobject",meshes:[]},o=null,s=e.firstElementChild;s;){if("metadata"===s.nodeName)void 0!==s.attributes.type&&"name"===s.attributes.type.value&&(n.name=s.textContent);else if("color"===s.nodeName)o=r(s);else if("mesh"===s.nodeName){for(var l=s.firstElementChild,u={vertices:[],normals:[],volumes:[],color:o};l;){if("vertices"===l.nodeName){var c=a(l);u.normals=u.normals.concat(c.normals),u.vertices=u.vertices.concat(c.vertices)}else"volume"===l.nodeName&&u.volumes.push(i(l));l=l.nextElementSibling}n.meshes.push(u)}s=s.nextElementSibling}return{id:t,obj:n}}var s,l,u=function(e){var t=new DataView(e);if("PK"===String.fromCharCode(t.getUint8(0),t.getUint8(1))){var r=null,i=null;n.log("THREE.AMFLoader: Loading Zip");try{r=new JSZip(e)}catch(e){if(e instanceof ReferenceError)return n.log("THREE.AMFLoader: jszip missing and file is compressed."),null}for(i in r.files)if(".amf"===i.toLowerCase().substr(-4))break;n.log("THREE.AMFLoader: Trying to load file asset: "+i),t=new DataView(r.file(i).asArrayBuffer())}var a=THREE.LoaderUtils.decodeText(t),o=(new DOMParser).parseFromString(a,"application/xml");return"amf"!==o.documentElement.nodeName.toLowerCase()?(n.log("THREE.AMFLoader: Error loading AMF - no AMF document found."),null):o}(e),c="",h="",d=function(e){var t=1,r="millimeter";void 0!==e.documentElement.attributes.unit&&(r=e.documentElement.attributes.unit.value.toLowerCase());var i={millimeter:1,inch:25.4,feet:304.8,meter:1e3,micron:.001};return void 0!==i[r]&&(t=i[r]),n.log("THREE.AMFLoader: Unit scale: "+t),t}(u),f={},p={},m=u.documentElement.childNodes;for(s=0;s<m.length;s++){var g=m[s];if("metadata"===g.nodeName)void 0!==g.attributes.type&&("name"===g.attributes.type.value?c=g.textContent:"author"===g.attributes.type.value&&(h=g.textContent));else if("material"===g.nodeName){var v=t(g);f[v.id]=v.material}else if("object"===g.nodeName){var y=o(g);p[y.id]=y.obj}}var b=new THREE.Group,E=new THREE.MeshPhongMaterial({color:11184895,flatShading:!0});for(var x in b.name=c,b.userData.author=h,b.userData.loader="AMF",p){var w=p[x],T=w.meshes,_=new THREE.Group;for(_.name=w.name||"",s=0;s<T.length;s++){var S=E,M=T[s],R=new THREE.Float32BufferAttribute(M.vertices,3),A=null;if(M.normals.length&&(A=new THREE.Float32BufferAttribute(M.normals,3)),M.color){var C=M.color;(S=E.clone()).color=new THREE.Color(C.r,C.g,C.b),1!==C.a&&(S.transparent=!0,S.opacity=C.a)}var L=M.volumes;for(l=0;l<L.length;l++){var O=L[l],I=new THREE.BufferGeometry,P=S;I.setIndex(O.triangles),I.addAttribute("position",R.clone()),A&&I.addAttribute("normal",A.clone()),void 0!==f[O.materialId]&&(P=f[O.materialId]),I.scale(d,d,d),_.add(new THREE.Mesh(I,P.clone()))}}b.add(_)}return b}}},9693:(e,t,r)=>{var n=r(5108);!function(){var e=!0;function t(){this.id=0,this.data=null}function r(){}r.prototype={set:function(e,t){this[e]=t},get:function(e,t){return this.hasOwnProperty(e)?this[e]:t}},THREE.AWDLoader=function(e){this.manager=void 0!==e?e:THREE.DefaultLoadingManager,this.trunk=new THREE.Object3D,this.materialFactory=void 0,this._url="",this._baseDir="",this._data=void 0,this._ptr=0,this._version=[],this._streaming=!1,this._optimized_for_accuracy=!1,this._compression=0,this._bodylen=4294967295,this._blocks=[new t],this._accuracyMatrix=!1,this._accuracyGeo=!1,this._accuracyProps=!1},THREE.AWDLoader.prototype={constructor:THREE.AWDLoader,load:function(e,t,r,n){var i=this;this._url=e,this._baseDir=e.substr(0,e.lastIndexOf("/")+1);var a=new THREE.FileLoader(this.manager);a.setResponseType("arraybuffer"),a.load(e,(function(e){t(i.parse(e))}),r,n)},parse:function(e){var t=e.byteLength;for(this._ptr=0,this._data=new DataView(e),this._parseHeader(),0!=this._compression&&n.error("compressed AWD not supported"),this._streaming||this._bodylen==e.byteLength-this._ptr||n.error("AWDLoader: body len does not match file length",this._bodylen,t-this._ptr);this._ptr<t;)this.parseNextBlock();return this.trunk},parseNextBlock:function(){var e,r,n=this.readU32(),i=(this.readU8(),this.readU8()),a=(this.readU8(),this.readU32());switch(i){case 1:e=this.parseMeshData(a);break;case 22:e=this.parseContainer(a);break;case 23:e=this.parseMeshInstance(a);break;case 81:e=this.parseMaterial(a);break;case 82:e=this.parseTexture(a);break;case 101:e=this.parseSkeleton(a);break;case 112:e=this.parseMeshPoseAnimation(a,!1);break;case 113:e=this.parseVertexAnimationSet(a);break;case 102:e=this.parseSkeletonPose(a);break;case 103:e=this.parseSkeletonAnimation(a);break;case 122:e=this.parseAnimatorSet(a);break;default:this._ptr+=a}this._blocks[n]=r=new t,r.data=e,r.id=n},_parseHeader:function(){var e=this._version;if(4282180!=(this.readU8()<<16|this.readU8()<<8|this.readU8()))throw new Error("AWDLoader - bad magic");e[0]=this.readU8(),e[1]=this.readU8();var t=this.readU16();this._streaming=1==(1&t),2===e[0]&&1===e[1]&&(this._accuracyMatrix=2==(2&t),this._accuracyGeo=4==(4&t),this._accuracyProps=8==(8&t)),this._geoNrType=this._accuracyGeo?8:7,this._matrixNrType=this._accuracyMatrix?8:7,this._propsNrType=this._accuracyProps?8:7,this._optimized_for_accuracy=2==(2&t),this._compression=this.readU8(),this._bodylen=this.readU32()},parseContainer:function(e){var t=new THREE.Object3D,r=this.readU32(),n=this.parseMatrix4();return t.name=this.readUTF(),t.applyMatrix(n),(this._blocks[r].data||this.trunk).add(t),this.parseProperties({1:this._matrixNrType,2:this._matrixNrType,3:this._matrixNrType,4:4}),t.extra=this.parseUserAttributes(),t},parseMeshInstance:function(e){var t,r,n,i,a,o,s,l,u,c,h,d,f;for(o=this.readU32(),l=this.parseMatrix4(),t=this.readUTF(),s=this.readU32(),d=this.readU16(),n=this.getBlock(s),u=[],f=0;f<d;f++)h=this.readU32(),c=this.getBlock(h),u.push(c);if(a=[],(i=n.length)>1)for(r=new THREE.Object3D,f=0;f<i;f++){var p=new THREE.Mesh(n[f]);a.push(p),r.add(p)}else r=new THREE.Mesh(n[0]),a.push(r);r.applyMatrix(l),r.name=t,(this.getBlock(o)||this.trunk).add(r);var m=u.length,g=Math.max(i,m);for(f=0;f<g;f++)a[f%i].material=u[f%m];return this.parseProperties(null),r.extra=this.parseUserAttributes(),r},parseMaterial:function(e){var t,r,n,i,a,o;for(t=this.readUTF(),r=this.readU8(),o=this.readU8(),n=this.parseProperties({1:3,2:23,11:21,12:7,13:21}),0;0<o;){this.readU16();this.parseProperties(null),this.parseUserAttributes()}if(a=this.parseUserAttributes(),void 0!==this.materialFactory&&(i=this.materialFactory(t)))return i;if(i=new THREE.MeshPhongMaterial,1===r)i.color.setHex(n.get(1,13421772));else if(2===r){var s=n.get(2,0);i.map=this.getBlock(s)}return i.extra=a,i.alphaThreshold=n.get(12,0),i.repeat=n.get(13,!1),i},parseTexture:function(e){var t,r;this.readUTF();if(0===this.readU8()){r=this.readU32();var i=this.readUTFBytes(r);n.log(i),t=this.loadTexture(i)}return this.parseProperties(null),this.parseUserAttributes(),t},loadTexture:function(e){var t=new THREE.Texture;return new THREE.ImageLoader(this.manager).load(this._baseDir+e,(function(e){t.image=e,t.needsUpdate=!0})),t},parseSkeleton:function(e){this.readUTF();var t=this.readU16(),r=[],n=0;for(this.parseProperties(null);n<t;){var i,a;this.readU16(),(i=new THREE.Bone).parent=this.readU16()-1,i.name=this.readUTF(),a=this.parseMatrix4(),i.skinMatrix=a,this.parseProperties(null),this.parseUserAttributes(),r.push(i),n++}return this.parseUserAttributes(),r},parseSkeletonPose:function(e){this.readUTF();var t=this.readU16();this.parseProperties(null);for(var r=[],n=0;n<t;){var i;i=1===this.readU8()?this.parseMatrix4():new THREE.Matrix4,r[n]=i,n++}return this.parseUserAttributes(),r},parseSkeletonAnimation:function(e){this.readUTF();var t,r,n,i=[],a=this.readU16();this.parseProperties(null);for(var o=0;o<a;)r=this.readU32(),t=this.readU16(),n=this._blocks[r].data,i.push({pose:n,duration:t}),o++;if(0!==i.length)return this.parseUserAttributes(),i},parseVertexAnimationSet:function(e){this.readUTF();for(var t,r=this.readU16(),n=(this.parseProperties({1:5}),0),i=[];n<r;)t=this.readU32(),i.push(this._blocks[t].data),n++;return this.parseUserAttributes(),i},parseAnimatorSet:function(e){this.readUTF();var t,r,n=this.readU16(),i=this.parseProperties({1:23});t=this.readU32();for(var a=this.readU16(),o=[],s=0;s<a;s++)o.push(this.readU32());this.readU16(),Boolean(this.readU8());this.parseUserAttributes(),this.parseUserAttributes();var l,u=[];for(s=0;s<o.length;s++)u.push(this._blocks[o[s]].data);for(r=this._blocks[t].data,1==n&&(l={animationSet:r,skeleton:this._blocks[i.get(1,0)].data}),s=0;s<u.length;s++)u[s].animator=l;return l},parseMeshData:function(e){var t,r,n=this.readUTF(),i=this.readU16(),a=0,o=[];for(this.parseProperties({1:this._geoNrType,2:this._geoNrType});a<i;){var s,l,u;for((t=new THREE.BufferGeometry).name=n,o.push(t),s=this.readU32(),l=this._ptr+s,this.parseProperties({1:this._geoNrType,2:this._geoNrType});this._ptr<l;){var c=0,h=this.readU8(),d=(this.readU8(),this.readU32()),f=d+this._ptr;if(1===h)for(r=new Float32Array(d/12*3),u=new THREE.BufferAttribute(r,3),t.addAttribute("position",u),c=0;this._ptr<f;)r[c]=-this.readF32(),r[c+1]=this.readF32(),r[c+2]=this.readF32(),c+=3;else if(2===h)for(r=new Uint16Array(d/2),u=new THREE.BufferAttribute(r,1),t.setIndex(u),c=0;this._ptr<f;)r[c+1]=this.readU16(),r[c]=this.readU16(),r[c+2]=this.readU16(),c+=3;else if(3===h)for(r=new Float32Array(d/8*2),u=new THREE.BufferAttribute(r,2),t.addAttribute("uv",u),c=0;this._ptr<f;)r[c]=this.readF32(),r[c+1]=1-this.readF32(),c+=2;else if(4===h)for(r=new Float32Array(d/12*3),u=new THREE.BufferAttribute(r,3),t.addAttribute("normal",u),c=0;this._ptr<f;)r[c]=-this.readF32(),r[c+1]=this.readF32(),r[c+2]=this.readF32(),c+=3;else this._ptr=f}this.parseUserAttributes(),t.computeBoundingSphere(),a++}return this.parseUserAttributes(),o},parseMeshPoseAnimation:function(e,t){var r,i,a,o,s,l,u,c,h,d=1,f=0,p={},m=[],g=(this.readUTF(),this.readU32()),v=this.getBlock(g);if(null!==v){for((l=v.geometry).morphTargets=[],t||(d=this.readU16()),r=this.readU16(),u=this.readU16(),c=0;c<u;)m.push(this.readU16()),c++;for(h=this.parseProperties({1:21,2:21}),p.looping=h.get(1,!0),p.stitchFinalFrame=h.get(2,!1),i=0;i<d;){for(this.readU16(),a=0;a<r;)for(c=0,o=this.readU32(),s=this._ptr+o;c<u;){if(1===m[c]){var y=new Float32Array(o/4);for(l.morphTargets.push({array:y}),f=0;this._ptr<s;)y[f]=this.readF32(),y[f+1]=this.readF32(),y[f+2]=this.readF32(),f+=3;a++}else this._ptr=s;c++}i++}return this.parseUserAttributes(),null}n.log("parseMeshPoseAnimation target mesh not found at:",g)},getBlock:function(e){return this._blocks[e].data},parseMatrix4:function(){var e=new THREE.Matrix4,t=e.elements;return t[0]=this.readF32(),t[1]=this.readF32(),t[2]=this.readF32(),t[3]=0,t[4]=this.readF32(),t[5]=this.readF32(),t[6]=this.readF32(),t[7]=0,t[8]=this.readF32(),t[9]=this.readF32(),t[10]=this.readF32(),t[11]=0,t[12]=-this.readF32(),t[13]=this.readF32(),t[14]=this.readF32(),t[15]=1,e},parseProperties:function(e){var t=this.readU32(),n=this._ptr+t,i=new r;if(e)for(;this._ptr<n;){var a,o=this.readU16(),s=this.readU32();e.hasOwnProperty(o)?(a=e[o],i.set(o,this.parseAttrValue(a,s))):this._ptr+=s}return i},parseUserAttributes:function(){return this._ptr=this.readU32()+this._ptr,null},parseAttrValue:function(e,t){var r,n;switch(e){case 1:r=1,n=this.readI8;break;case 2:r=2,n=this.readI16;break;case 3:r=4,n=this.readI32;break;case 21:case 4:r=1,n=this.readU8;break;case 5:r=2,n=this.readU16;break;case 6:case 23:r=4,n=this.readU32;break;case 7:r=4,n=this.readF32;break;case 8:case 41:case 42:case 43:case 44:case 45:case 46:case 47:r=8,n=this.readF64}if(r<t){var i,a,o;for(i=[],a=0,o=t/r;a<o;)i.push(n.call(this)),a++;return i}return n.call(this)},readU8:function(){return this._data.getUint8(this._ptr++)},readI8:function(){return this._data.getInt8(this._ptr++)},readU16:function(){var t=this._data.getUint16(this._ptr,e);return this._ptr+=2,t},readI16:function(){var t=this._data.getInt16(this._ptr,e);return this._ptr+=2,t},readU32:function(){var t=this._data.getUint32(this._ptr,e);return this._ptr+=4,t},readI32:function(){var t=this._data.getInt32(this._ptr,e);return this._ptr+=4,t},readF32:function(){var t=this._data.getFloat32(this._ptr,e);return this._ptr+=4,t},readF64:function(){var t=this._data.getFloat64(this._ptr,e);return this._ptr+=8,t},readUTF:function(){var e=this.readU16();return this.readUTFBytes(e)},readUTFBytes:function(t){for(var r=[],n=0;r.length<t;){var i=this._data.getUint8(this._ptr++,e);if(i<128)r[n++]=String.fromCharCode(i);else if(i>191&&i<224){var a=this._data.getUint8(this._ptr++,e);r[n++]=String.fromCharCode((31&i)<<6|63&a)}else{a=this._data.getUint8(this._ptr++,e);var o=this._data.getUint8(this._ptr++,e);r[n++]=String.fromCharCode((15&i)<<12|(63&a)<<6|63&o)}}return r.join("")}}}()},9088:()=>{THREE.AssimpJSONLoader=function(e){this.manager=void 0!==e?e:THREE.DefaultLoadingManager},THREE.AssimpJSONLoader.prototype={constructor:THREE.AssimpJSONLoader,crossOrigin:"Anonymous",load:function(e,t,r,n){var i=this,a=THREE.LoaderUtils.extractUrlBase(e);new THREE.FileLoader(this.manager).load(e,(function(e){var r=JSON.parse(e),o=r.__metadata__;if(void 0!==o){if("assimp2json"!==o.format)return void n("THREE.AssimpJSONLoader: Not an assimp2json scene.");if(o.version<100&&o.version>=200)return void n("THREE.AssimpJSONLoader: Unsupported assimp2json file format version.")}t(i.parse(r,a))}),r,n)},setCrossOrigin:function(e){this.crossOrigin=e},parse:function(e,t){function r(e,t){for(var r=new Array(e.length),n=0;n<e.length;++n)r[n]=t.call(this,e[n]);return r}var n=new THREE.TextureLoader(this.manager);n.setPath(t).setCrossOrigin(this.crossOrigin);var i=r(e.meshes,(function(e){var t,r,n,i=new THREE.BufferGeometry,a=[],o=e.vertices||[],s=e.normals||[],l=e.texturecoords||[],u=e.colors||[];for(l=l[0]||[],t=0,r=e.faces.length;t<r;t++)n=e.faces[t],a.push(n[0],n[1],n[2]);return i.setIndex(a),i.addAttribute("position",new THREE.Float32BufferAttribute(o,3)),s.length>0&&i.addAttribute("normal",new THREE.Float32BufferAttribute(s,3)),l.length>0&&i.addAttribute("uv",new THREE.Float32BufferAttribute(l,2)),u.length>0&&i.addAttribute("color",new THREE.Float32BufferAttribute(u,3)),i.computeBoundingSphere(),i})),a=r(e.materials,(function(e){var t=new THREE.MeshPhongMaterial;for(var r in e.properties){var i=e.properties[r],a=i.key,o=i.value;switch(a){case"$tex.file":var s=i.semantic;if(1===s||2===s||5===s||6===s){var l;switch(s){case 1:l="map";break;case 2:l="specularMap";break;case 5:l="bumpMap";break;case 6:l="normalMap"}var u=n.load(o);u.wrapS=u.wrapT=THREE.RepeatWrapping,t[l]=u}break;case"?mat.name":t.name=o;break;case"$clr.diffuse":t.color.fromArray(o);break;case"$clr.specular":t.specular.fromArray(o);break;case"$clr.emissive":t.emissive.fromArray(o);break;case"$mat.shininess":t.shininess=o;break;case"$mat.shadingm":t.flatShading=1===o;break;case"$mat.opacity":o<1&&(t.opacity=o,t.transparent=!0)}}return t}));return function e(t,r,n,i){var a,o,s=new THREE.Object3D;for(s.name=r.name||"",s.matrix=(new THREE.Matrix4).fromArray(r.transformation).transpose(),s.matrix.decompose(s.position,s.quaternion,s.scale),a=0;r.meshes&&a<r.meshes.length;a++)o=r.meshes[a],s.add(new THREE.Mesh(n[o],i[t.meshes[o].materialindex]));for(a=0;r.children&&a<r.children.length;a++)s.add(e(t,r.children[a],n,i));return s}(e,e.rootnode,i,a)}}},560:()=>{THREE.AssimpLoader=function(e){this.manager=void 0!==e?e:THREE.DefaultLoadingManager},THREE.AssimpLoader.prototype={constructor:THREE.AssimpLoader,crossOrigin:"Anonymous",load:function(e,t,r,n){var i=this,a=THREE.LoaderUtils.extractUrlBase(e),o=new THREE.FileLoader(this.manager);o.setResponseType("arraybuffer"),o.load(e,(function(e){t(i.parse(e,a))}),r,n)},setCrossOrigin:function(e){this.crossOrigin=e},parse:function(e,t){var r=new THREE.TextureLoader(this.manager);r.setPath(t).setCrossOrigin(this.crossOrigin);var n={KeyFrame:function(e,t){this.time=e,this.matrix=t.clone(),this.position=new THREE.Vector3,this.quaternion=new THREE.Quaternion,this.scale=new THREE.Vector3(1,1,1),this.matrix.decompose(this.position,this.quaternion,this.scale),this.clone=function(){return new n.KeyFrame(this.time,this.matrix)},this.lerp=function(e,t){var r=(t-=this.time)/(e.time-this.time),i=1-r,a=this.position,o=this.quaternion,s=e.position,l=e.quaternion;return n.KeyFrame.tempAniPos.x=a.x*i+s.x*r,n.KeyFrame.tempAniPos.y=a.y*i+s.y*r,n.KeyFrame.tempAniPos.z=a.z*i+s.z*r,n.KeyFrame.tempAniQuat.set(o.x,o.y,o.z,o.w),n.KeyFrame.tempAniQuat.slerp(l,r),n.KeyFrame.tempAniMatrix.compose(n.KeyFrame.tempAniPos,n.KeyFrame.tempAniQuat,n.KeyFrame.tempAniScale)}}};n.KeyFrame.tempAniPos=new THREE.Vector3,n.KeyFrame.tempAniQuat=new THREE.Quaternion,n.KeyFrame.tempAniScale=new THREE.Vector3(1,1,1),n.KeyFrame.tempAniMatrix=new THREE.Matrix4,n.KeyFrameTrack=function(){this.keys=[],this.target=null,this.time=0,this.length=0,this._accelTable={},this.fps=20,this.addKey=function(e){this.keys.push(e)},this.init=function(){if(this.sortKeys(),this.keys.length>0?this.length=this.keys[this.keys.length-1].time:this.length=0,this.fps)for(var e=0;e<this.length*this.fps;e++)for(var t=0;t<this.keys.length;t++){if(this.keys[t].time==e){this._accelTable[e]=t;break}if(this.keys[t].time<e/this.fps&&this.keys[t+1]&&this.keys[t+1].time>=e/this.fps){this._accelTable[e]=t;break}}},this.parseFromThree=function(e){var t=e.fps;this.target=e.node;for(var r=e.hierarchy[0].keys,i=0;i<r.length;i++)this.addKey(new n.KeyFrame(i/t||r[i].time,r[i].targets[0].data));this.init()},this.parseFromCollada=function(e){for(var t=e.keys,r=this.fps,i=0;i<t.length;i++)this.addKey(new n.KeyFrame(i/r||t[i].time,t[i].matrix));this.init()},this.sortKeys=function(){this.keys.sort(this.keySortFunc)},this.keySortFunc=function(e,t){return e.time-t.time},this.clone=function(){var e=new n.KeyFrameTrack;e.target=this.target,e.time=this.time,e.length=this.length;for(var t=0;t<this.keys.length;t++)e.addKey(this.keys[t].clone());return e.init(),e},this.reTarget=function(e,t){t||(t=n.TrackTargetNodeNameCompare),this.target=t(e,this.target)},this.keySearchAccel=function(e){return e*=this.fps,e=Math.floor(e),this._accelTable[e]||0},this.setTime=function(e){e=Math.abs(e),this.length&&(e=e%this.length+.05);for(var t=null,r=null,n=this.keySearchAccel(e);n<this.keys.length;n++){if(this.keys[n].time==e){t=this.keys[n],r=this.keys[n];break}if(this.keys[n].time<e&&this.keys[n+1]&&this.keys[n+1].time>e){t=this.keys[n],r=this.keys[n+1];break}if(this.keys[n].time<e&&n==this.keys.length-1){t=this.keys[n],(r=this.keys[0].clone()).time+=this.length+.05;break}}return t&&r&&t!==r?(this.target.matrixAutoUpdate=!1,this.target.matrix.copy(t.lerp(r,e)),void(this.target.matrixWorldNeedsUpdate=!0)):t&&r&&t==r?(this.target.matrixAutoUpdate=!1,this.target.matrix.copy(t.matrix),void(this.target.matrixWorldNeedsUpdate=!0)):void 0}},n.TrackTargetNodeNameCompare=function(e,t){return function e(t,r){if(t.name==r)return t;for(var n=0;n<t.children.length;n++){var i=e(t.children[n],r);if(i)return i}return null}(e,t.name)},n.Animation=function(){this.tracks=[],this.length=0,this.addTrack=function(e){this.tracks.push(e),this.length=Math.max(e.length,this.length)},this.setTime=function(e){this.time=e;for(var t=0;t<this.tracks.length;t++)this.tracks[t].setTime(e)},this.clone=function(e,t){t||(t=n.TrackTargetNodeNameCompare);var r=new n.Animation;r.target=e;for(var i=0;i<this.tracks.length;i++){var a=this.tracks[i].clone();a.reTarget(e,t),r.addTrack(a)}return r}};var i=4660,a=4661,o=4662,s=4663,l=4664,u=4665,c=4666,h=4667,d=4668,f=4669,p=4670,m=1,g=2,v=4,y=256,b=65536,E=1,x=4,w=1,T=3,_=1,S=6,M=8,R=10,A=4;function C(e){return y<<e}function L(e){return b<<e}function O(e,t){var r=new THREE.Bone;for(var n in r.matrix.copy(e.matrix),r.matrixWorld.copy(e.matrixWorld),r.position.copy(e.position),r.quaternion.copy(e.quaternion),r.scale.copy(e.scale),t.nodeCount++,r.name="bone_"+e.name+t.nodeCount.toString(),t.nodeToBoneMap[e.name]||(t.nodeToBoneMap[e.name]=[]),t.nodeToBoneMap[e.name].push(r),e.children){var i=O(e.children[n],t);i&&r.add(i)}return r}function I(e,t){for(var r=[],n=0;n<e.length;n++)r.push({i:e[n],w:t[n]});for(r.sort((function(e,t){return t.w-e.w}));r.length<4;)r.push({i:0,w:0});r.length>4&&(r.length=4);var i=0;for(n=0;n<4;n++)i+=r[n].w*r[n].w;i=Math.sqrt(i);for(n=0;n<4;n++)r[n].w=r[n].w/i,e[n]=r[n].i,t[n]=r[n].w}function P(e,t){if(0==e.name.indexOf("bone_"+t))return e;for(var r in e.children){var n=P(e.children[r],t);if(n)return n}}function H(){this.mPrimitiveTypes=0,this.mNumVertices=0,this.mNumFaces=0,this.mNumBones=0,this.mMaterialIndex=0,this.mVertices=[],this.mNormals=[],this.mTangents=[],this.mBitangents=[],this.mColors=[[]],this.mTextureCoords=[[]],this.mFaces=[],this.mBones=[],this.hookupSkeletons=function(e,t){if(0!=this.mBones.length){for(var r=[],n=[],i=e.findNode(this.mBones[0].mName);i.mParent&&i.mParent.isBone;)i=i.mParent;var a=O(l=i.toTHREE(e),e);this.threeNode.add(a);for(var o=0;o<this.mBones.length;o++){if(u=P(a,this.mBones[o].mName)){var s=u;r.push(s),n.push(this.mBones[o].mOffsetMatrix.toTHREE())}else{if(!(i=e.findNode(this.mBones[o].mName)))return;var l;(l=i.toTHREE(e)).parent,a=O(l,e);this.threeNode.add(a);var u;s=u=P(a,this.mBones[o].mName);r.push(s),n.push(this.mBones[o].mOffsetMatrix.toTHREE())}}var c=new THREE.Skeleton(r,n);this.threeNode.bind(c,new THREE.Matrix4),this.threeNode.material.skinning=!0}},this.toTHREE=function(e){if(this.threeNode)return this.threeNode;var t,r,n=new THREE.BufferGeometry;if(t=e.mMaterials[this.mMaterialIndex]?e.mMaterials[this.mMaterialIndex].toTHREE(e):new THREE.MeshLambertMaterial,n.setIndex(new THREE.BufferAttribute(new Uint32Array(this.mIndexArray),1)),n.addAttribute("position",new THREE.BufferAttribute(this.mVertexBuffer,3)),this.mNormalBuffer&&this.mNormalBuffer.length>0&&n.addAttribute("normal",new THREE.BufferAttribute(this.mNormalBuffer,3)),this.mColorBuffer&&this.mColorBuffer.length>0&&n.addAttribute("color",new THREE.BufferAttribute(this.mColorBuffer,4)),this.mTexCoordsBuffers[0]&&this.mTexCoordsBuffers[0].length>0&&n.addAttribute("uv",new THREE.BufferAttribute(new Float32Array(this.mTexCoordsBuffers[0]),2)),this.mTexCoordsBuffers[1]&&this.mTexCoordsBuffers[1].length>0&&n.addAttribute("uv1",new THREE.BufferAttribute(new Float32Array(this.mTexCoordsBuffers[1]),2)),this.mTangentBuffer&&this.mTangentBuffer.length>0&&n.addAttribute("tangents",new THREE.BufferAttribute(this.mTangentBuffer,3)),this.mBitangentBuffer&&this.mBitangentBuffer.length>0&&n.addAttribute("bitangents",new THREE.BufferAttribute(this.mBitangentBuffer,3)),this.mBones.length>0){for(var i=[],a=[],o=0;o<this.mBones.length;o++)for(var s=0;s<this.mBones[o].mWeights.length;s++){var l=this.mBones[o].mWeights[s];l&&(i[l.mVertexId]||(i[l.mVertexId]=[]),a[l.mVertexId]||(a[l.mVertexId]=[]),i[l.mVertexId].push(l.mWeight),a[l.mVertexId].push(parseInt(o)))}for(var o in a)I(a[o],i[o]);var u=[],c=[];for(o=0;o<i.length;o++)for(s=0;s<4;s++)i[o]&&a[o]?(u.push(i[o][s]),c.push(a[o][s])):(u.push(0),c.push(0));n.addAttribute("skinWeight",new THREE.BufferAttribute(new Float32Array(u),A)),n.addAttribute("skinIndex",new THREE.BufferAttribute(new Float32Array(c),A))}return 0==this.mBones.length&&(r=new THREE.Mesh(n,t)),this.mBones.length>0&&(r=new THREE.SkinnedMesh(n,t)),this.threeNode=r,r}}function k(){this.mNumIndices=0,this.mIndices=[]}function N(){this.x=0,this.y=0,this.z=0,this.toTHREE=function(){return new THREE.Vector3(this.x,this.y,this.z)}}function U(){this.r=0,this.g=0,this.b=0,this.a=0,this.toTHREE=function(){return new THREE.Color(this.r,this.g,this.b,1)}}function D(){this.x=0,this.y=0,this.z=0,this.w=0,this.toTHREE=function(){return new THREE.Quaternion(this.x,this.y,this.z,this.w)}}function F(){this.mVertexId=0,this.mWeight=0}function B(){this.data=[],this.toString=function(){var e="";return this.data.forEach((function(t){e+=String.fromCharCode(t)})),e.replace(/[^\x20-\x7E]+/g,"")}}function z(){this.mTime=0,this.mValue=null}function j(){this.mTime=0,this.mValue=null}function V(){this.mName="",this.mTransformation=[],this.mNumChildren=0,this.mNumMeshes=0,this.mMeshes=[],this.mChildren=[],this.toTHREE=function(e){if(this.threeNode)return this.threeNode;var t=new THREE.Object3D;t.name=this.mName,t.matrix=this.mTransformation.toTHREE();for(var r=0;r<this.mChildren.length;r++)t.add(this.mChildren[r].toTHREE(e));for(r=0;r<this.mMeshes.length;r++)t.add(e.mMeshes[this.mMeshes[r]].toTHREE(e));return this.threeNode=t,t.matrix.decompose(t.position,t.quaternion,t.scale),t}}function G(){this.mName="",this.mNumWeights=0,this.mOffsetMatrix=0}function W(){this.mKey="",this.mSemantic=0,this.mIndex=0,this.mData=[],this.mDataLength=0,this.mType=0,this.dataAsColor=function(){var e=new Uint8Array(this.mData).buffer,t=new DataView(e),r=t.getFloat32(0,!0),n=t.getFloat32(4,!0),i=t.getFloat32(8,!0);return new THREE.Color(r,n,i)},this.dataAsFloat=function(){var e=new Uint8Array(this.mData).buffer;return new DataView(e).getFloat32(0,!0)},this.dataAsBool=function(){var e=new Uint8Array(this.mData).buffer;return!!new DataView(e).getFloat32(0,!0)},this.dataAsString=function(){var e=new B;return e.data=this.mData,e.toString()},this.dataAsMap=function(){var e=new B;e.data=this.mData;var t=e.toString();return-1!=(t=t.replace(/\\/g,"/")).indexOf("/")&&(t=t.substr(t.lastIndexOf("/")+1)),r.load(t)}}var q={"?mat.name":"name","$mat.shadingm":"shading","$mat.twosided":"twoSided","$mat.wireframe":"wireframe","$clr.ambient":"ambient","$clr.diffuse":"color","$clr.specular":"specular","$clr.emissive":"emissive","$clr.transparent":"transparent","$clr.reflective":"reflect","$mat.shininess":"shininess","$mat.reflectivity":"reflectivity","$mat.refracti":"refraction","$tex.file":"map"},X={"?mat.name":"string","$mat.shadingm":"bool","$mat.twosided":"bool","$mat.wireframe":"bool","$clr.ambient":"color","$clr.diffuse":"color","$clr.specular":"color","$clr.emissive":"color","$clr.transparent":"color","$clr.reflective":"color","$mat.shininess":"float","$mat.reflectivity":"float","$mat.refracti":"float","$tex.file":"map"};function Y(){this.mNumAllocated=0,this.mNumProperties=0,this.mProperties=[],this.toTHREE=function(e){this.mProperties[0].dataAsString();for(var t=new THREE.MeshPhongMaterial,r=0;r<this.mProperties.length;r++)if("float"==X[this.mProperties[r].mKey]&&(t[q[this.mProperties[r].mKey]]=this.mProperties[r].dataAsFloat()),"color"==X[this.mProperties[r].mKey]&&(t[q[this.mProperties[r].mKey]]=this.mProperties[r].dataAsColor()),"bool"==X[this.mProperties[r].mKey]&&(t[q[this.mProperties[r].mKey]]=this.mProperties[r].dataAsBool()),"string"==X[this.mProperties[r].mKey]&&(t[q[this.mProperties[r].mKey]]=this.mProperties[r].dataAsString()),"map"==X[this.mProperties[r].mKey]){var n=this.mProperties[r];n.mSemantic==_&&(t.map=this.mProperties[r].dataAsMap()),n.mSemantic==S&&(t.normalMap=this.mProperties[r].dataAsMap()),n.mSemantic==R&&(t.lightMap=this.mProperties[r].dataAsMap()),n.mSemantic==M&&(t.alphaMap=this.mProperties[r].dataAsMap())}return t.ambient.r=.53,t.ambient.g=.53,t.ambient.b=.53,t.color.r=1,t.color.g=1,t.color.b=1,t}}function Z(e,t,r){var n=new THREE.Vector3,i=1-r;return n.x=e.x*r+t.x*i,n.y=e.y*r+t.y*i,n.z=e.z*r+t.z*i,n}function K(e,t,r){return e.clone().slerp(t,1-r)}function Q(e,t,r,n){if(1==e.length)return e[0].mValue.toTHREE();for(var i=1/0,a=null,o=null,s=0;s<e.length;s++){var l=Math.abs(e[s].mTime-t);l<i&&e[s].mTime<=t&&(i=l,a=e[s],o=e[s+1])}if(!a)return null;if(a&&o){var u=o.mTime-a.mTime,c=(a.mTime-t)/u;return n(a.mValue.toTHREE(),o.mValue.toTHREE(),c)}(o=e[0].clone()).mTime+=r;u=o.mTime-a.mTime,c=(a.mTime-t)/u;return n(a.mValue.toTHREE(),o.mValue.toTHREE(),c)}function J(){this.mNodeName="",this.mNumPositionKeys=0,this.mNumRotationKeys=0,this.mNumScalingKeys=0,this.mPositionKeys=[],this.mRotationKeys=[],this.mScalingKeys=[],this.mPreState="",this.mPostState="",this.init=function(e){function t(t){t.mTime/=e}e||(e=1),this.mPositionKeys.forEach(t),this.mRotationKeys.forEach(t),this.mScalingKeys.forEach(t)},this.sortKeys=function(){function e(e,t){return e.mTime-t.mTime}this.mPositionKeys.sort(e),this.mRotationKeys.sort(e),this.mScalingKeys.sort(e)},this.getLength=function(){return Math.max(Math.max.apply(null,this.mPositionKeys.map((function(e){return e.mTime}))),Math.max.apply(null,this.mRotationKeys.map((function(e){return e.mTime}))),Math.max.apply(null,this.mScalingKeys.map((function(e){return e.mTime}))))},this.toTHREE=function(e,t){this.sortKeys();for(var r=this.getLength(),i=new n.KeyFrameTrack,a=0;a<r;a+=.05){var o=new THREE.Matrix4,s=a,l=Q(this.mPositionKeys,s,r,Z),u=Q(this.mScalingKeys,s,r,Z),c=Q(this.mRotationKeys,s,r,K);o.compose(l,c,u);var h=new n.KeyFrame(s,o);i.addKey(h)}i.target=e.findNode(this.mNodeName).toTHREE();var d=[i];if(e.nodeToBoneMap[this.mNodeName])for(a=0;a<e.nodeToBoneMap[this.mNodeName].length;a++){var f=i.clone();f.target=e.nodeToBoneMap[this.mNodeName][a],d.push(f)}return d}}function $(){this.mName="",this.mDuration=0,this.mTicksPerSecond=0,this.mNumChannels=0,this.mChannels=[],this.toTHREE=function(e){var t=new n.Animation;for(var r in this.mChannels){this.mChannels[r].init(this.mTicksPerSecond);var i=this.mChannels[r].toTHREE(e);for(var a in i)i[a].init(),t.addTrack(i[a])}return t.length=Math.max.apply(null,t.tracks.map((function(e){return e.length}))),t}}function ee(){this.mWidth=0,this.mHeight=0,this.texAchFormatHint=[],this.pcData=[]}function te(){this.mName="",this.mType=0,this.mAttenuationConstant=0,this.mAttenuationLinear=0,this.mAttenuationQuadratic=0,this.mAngleInnerCone=0,this.mAngleOuterCone=0,this.mColorDiffuse=null,this.mColorSpecular=null,this.mColorAmbient=null}function re(){this.mName="",this.mPosition=null,this.mLookAt=null,this.mUp=null,this.mHorizontalFOV=0,this.mClipPlaneNear=0,this.mClipPlaneFar=0,this.mAspect=0}function ne(){this.mFlags=0,this.mNumMeshes=0,this.mNumMaterials=0,this.mNumAnimations=0,this.mNumTextures=0,this.mNumLights=0,this.mNumCameras=0,this.mRootNode=null,this.mMeshes=[],this.mMaterials=[],this.mAnimations=[],this.mLights=[],this.mCameras=[],this.nodeToBoneMap={},this.findNode=function(e,t){if(t||(t=this.mRootNode),t.mName==e)return t;for(var r=0;r<t.mChildren.length;r++){var n=this.findNode(e,t.mChildren[r]);if(n)return n}return null},this.toTHREE=function(){this.nodeCount=0,function(e){for(var t in e.mMeshes){var r=e.mMeshes[t];for(var n in r.mBones){var i=e.findNode(r.mBones[n].mName);i&&(i.isBone=!0)}}}(this);var e=this.mRootNode.toTHREE(this);for(var t in this.mMeshes)this.mMeshes[t].hookupSkeletons(this,e);if(this.mAnimations.length>0)var r=this.mAnimations[0].toTHREE(this);return{object:e,animation:r}}}function ie(){this.elements=[[],[],[],[]],this.toTHREE=function(){for(var e=new THREE.Matrix4,t=0;t<4;++t)for(var r=0;r<4;++r)e.elements[4*t+r]=this.elements[r][t];return e}}var ae=!0;function oe(e){var t=e.getFloat32(e.readOffset,ae);return e.readOffset+=4,t}function se(e){var t=e.getFloat64(e.readOffset,ae);return e.readOffset+=8,t}function le(e){var t=e.getUint16(e.readOffset,ae);return e.readOffset+=2,t}function ue(e){var t=e.getUint32(e.readOffset,ae);return e.readOffset+=4,t}function ce(e){var t=e.getUint32(e.readOffset,ae);return e.readOffset+=4,t}function he(e){var t=new N;return t.x=oe(e),t.y=oe(e),t.z=oe(e),t}function de(e){var t=new U;return t.r=oe(e),t.g=oe(e),t.b=oe(e),t}function fe(e){var t=new B,r=ue(e);return e.ReadBytes(t.data,1,r),t.toString()}function pe(e){var t=new F;return t.mVertexId=ue(e),t.mWeight=oe(e),t}function me(e){for(var t=new ie,r=0;r<4;++r)for(var n=0;n<4;++n)t.elements[r][n]=oe(e);return t}function ge(e){var t=new z;return t.mTime=se(e),t.mValue=he(e),t}function ve(e){var t=new j;return t.mTime=se(e),t.mValue=function(e){var t=new D;return t.w=oe(e),t.x=oe(e),t.y=oe(e),t.z=oe(e),t}(e),t}function ye(e,t,r){for(var n=0;n<r;n++)t[n]=ge(e)}function be(e,t,r){return e.Seek(sizeof(t)*r,He)}function Ee(e){if(!e)throw"asset failed"}function xe(e,t,r){Ee(ce(e)==d),ce(e);var n=new V;if(n.mParent=t,n.mDepth=r,n.mName=fe(e),n.mTransformation=me(e),n.mNumChildren=ue(e),n.mNumMeshes=ue(e),n.mNumMeshes){n.mMeshes=[];for(var i=0;i<n.mNumMeshes;++i)n.mMeshes[i]=ue(e)}if(n.mNumChildren){n.mChildren=[];for(i=0;i<n.mNumChildren;++i){var a=xe(e,n,r++);n.mChildren[i]=a}}return n}function we(e,t){return Ee(ce(e)==c),ce(e),t.mName=fe(e),t.mNumWeights=ue(e),t.mOffsetMatrix=me(e),Ie?be(e,t.mWeights,t.mNumWeights):(t.mWeights=[],function(e,t,r){for(var n=0;n<r;n++)t[n]=pe(e)}(e,t.mWeights,t.mNumWeights)),t}function Te(e,t){Ee(ce(e)==s),ce(e),t.mPrimitiveTypes=ue(e),t.mNumVertices=ue(e),t.mNumFaces=ue(e),t.mNumBones=ue(e),t.mMaterialIndex=ue(e),t.mNumUVComponents=[];var r=ue(e);r&m&&(Ie?be(e,t.mVertices,t.mNumVertices):(t.mVertices=[],t.mVertexBuffer=e.subArray32(e.readOffset,e.readOffset+3*t.mNumVertices*4),e.Seek(3*t.mNumVertices*4,He))),r&g&&(Ie?be(e,t.mNormals,t.mNumVertices):(t.mNormals=[],t.mNormalBuffer=e.subArray32(e.readOffset,e.readOffset+3*t.mNumVertices*4),e.Seek(3*t.mNumVertices*4,He))),r&v&&(Ie?(be(e,t.mTangents,t.mNumVertices),be(e,t.mBitangents,t.mNumVertices)):(t.mTangents=[],t.mTangentBuffer=e.subArray32(e.readOffset,e.readOffset+3*t.mNumVertices*4),e.Seek(3*t.mNumVertices*4,He),t.mBitangents=[],t.mBitangentBuffer=e.subArray32(e.readOffset,e.readOffset+3*t.mNumVertices*4),e.Seek(3*t.mNumVertices*4,He)));for(var n=0;n<E&&r&L(n);++n)Ie?be(e,t.mColors[n],t.mNumVertices):(t.mColors[n]=[],t.mColorBuffer=e.subArray32(e.readOffset,e.readOffset+4*t.mNumVertices*4),e.Seek(4*t.mNumVertices*4,He));t.mTexCoordsBuffers=[];for(n=0;n<x&&r&C(n);++n)if(t.mNumUVComponents[n]=ue(e),Ie)be(e,t.mTextureCoords[n],t.mNumVertices);else{t.mTextureCoords[n]=[],t.mTexCoordsBuffers[n]=[];for(var i=0;i<t.mNumVertices;i++)t.mTexCoordsBuffers[n].push(oe(e)),t.mTexCoordsBuffers[n].push(oe(e)),oe(e)}if(Ie)ue(e);else{t.mFaces=[];t.mIndexArray=[];for(var a=0;a<t.mNumFaces;++a){var o=t.mFaces[a]=new k;o.mNumIndices=le(e),o.mIndices=[];for(var l=0;l<o.mNumIndices;++l)t.mNumVertices<65536?o.mIndices[l]=le(e):o.mIndices[l]=ue(e);if(3===o.mNumIndices)t.mIndexArray.push(o.mIndices[0]),t.mIndexArray.push(o.mIndices[1]),t.mIndexArray.push(o.mIndices[2]);else{if(4!==o.mNumIndices)throw new Error("Sorry, can't currently triangulate polys. Use the triangulate preprocessor in Assimp.");t.mIndexArray.push(o.mIndices[0]),t.mIndexArray.push(o.mIndices[1]),t.mIndexArray.push(o.mIndices[2]),t.mIndexArray.push(o.mIndices[2]),t.mIndexArray.push(o.mIndices[3]),t.mIndexArray.push(o.mIndices[0])}}}if(t.mNumBones){t.mBones=[];for(l=0;l<t.mNumBones;++l)t.mBones[l]=new G,we(e,t.mBones[l])}}function _e(e,t){Ee(ce(e)==p),ce(e),t.mKey=fe(e),t.mSemantic=ue(e),t.mIndex=ue(e),t.mDataLength=ue(e),t.mType=ue(e),t.mData=[],e.ReadBytes(t.mData,1,t.mDataLength)}function Se(e,t){if(Ee(ce(e)==f),ce(e),t.mNumAllocated=t.mNumProperties=ue(e),t.mNumProperties){t.mProperties&&delete t.mProperties,t.mProperties=[];for(var r=0;r<t.mNumProperties;++r)t.mProperties[r]=new W,_e(e,t.mProperties[r])}}function Me(e,t){Ee(ce(e)==l),ce(e),t.mNodeName=fe(e),t.mNumPositionKeys=ue(e),t.mNumRotationKeys=ue(e),t.mNumScalingKeys=ue(e),t.mPreState=ue(e),t.mPostState=ue(e),t.mNumPositionKeys&&(Ie?be(e,t.mPositionKeys,t.mNumPositionKeys):(t.mPositionKeys=[],ye(e,t.mPositionKeys,t.mNumPositionKeys))),t.mNumRotationKeys&&(Ie?be(e,t.mRotationKeys,t.mNumRotationKeys):(t.mRotationKeys=[],function(e,t,r){for(var n=0;n<r;n++)t[n]=ve(e)}(e,t.mRotationKeys,t.mNumRotationKeys))),t.mNumScalingKeys&&(Ie?be(e,t.mScalingKeys,t.mNumScalingKeys):(t.mScalingKeys=[],ye(e,t.mScalingKeys,t.mNumScalingKeys)))}function Re(e,t){if(Ee(ce(e)==h),ce(e),t.mName=fe(e),t.mDuration=se(e),t.mTicksPerSecond=se(e),t.mNumChannels=ue(e),t.mNumChannels){t.mChannels=[];for(var r=0;r<t.mNumChannels;++r)t.mChannels[r]=new J,Me(e,t.mChannels[r])}}function Ae(e,t){Ee(ce(e)==o),ce(e),t.mWidth=ue(e),t.mHeight=ue(e),e.ReadBytes(t.achFormatHint,1,4),Ie||(t.mHeight?(t.pcData=[],e.ReadBytes(t.pcData,1,t.mWidth*t.mHeight*4)):(t.pcData=[],e.ReadBytes(t.pcData,1,t.mWidth)))}function Ce(e,t){Ee(ce(e)==a),ce(e),t.mName=fe(e),t.mType=ue(e),t.mType!=w&&(t.mAttenuationConstant=oe(e),t.mAttenuationLinear=oe(e),t.mAttenuationQuadratic=oe(e)),t.mColorDiffuse=de(e),t.mColorSpecular=de(e),t.mColorAmbient=de(e),t.mType==T&&(t.mAngleInnerCone=oe(e),t.mAngleOuterCone=oe(e))}function Le(e,t){Ee(ce(e)==i),ce(e),t.mName=fe(e),t.mPosition=he(e),t.mLookAt=he(e),t.mUp=he(e),t.mHorizontalFOV=oe(e),t.mClipPlaneNear=oe(e),t.mClipPlaneFar=oe(e),t.mAspect=oe(e)}function Oe(e,t){if(Ee(ce(e)==u),ce(e),t.mFlags=ue(e),t.mNumMeshes=ue(e),t.mNumMaterials=ue(e),t.mNumAnimations=ue(e),t.mNumTextures=ue(e),t.mNumLights=ue(e),t.mNumCameras=ue(e),t.mRootNode=new V,t.mRootNode=xe(e,null,0),t.mNumMeshes){t.mMeshes=[];for(var r=0;r<t.mNumMeshes;++r)t.mMeshes[r]=new H,Te(e,t.mMeshes[r])}if(t.mNumMaterials){t.mMaterials=[];for(r=0;r<t.mNumMaterials;++r)t.mMaterials[r]=new Y,Se(e,t.mMaterials[r])}if(t.mNumAnimations){t.mAnimations=[];for(r=0;r<t.mNumAnimations;++r)t.mAnimations[r]=new $,Re(e,t.mAnimations[r])}if(t.mNumTextures){t.mTextures=[];for(r=0;r<t.mNumTextures;++r)t.mTextures[r]=new ee,Ae(e,t.mTextures[r])}if(t.mNumLights){t.mLights=[];for(r=0;r<t.mNumLights;++r)t.mLights[r]=new te,Ce(e,t.mLights[r])}if(t.mNumCameras){t.mCameras=[];for(r=0;r<t.mNumCameras;++r)t.mCameras[r]=new re,Le(e,t.mCameras[r])}}var Ie,Pe,He=0,ke=1;return function(e){var t=new ne,r=new DataView(e);if(function(e){e.readOffset=0,e.Seek=function(t,r){r==He&&(e.readOffset+=t),r==ke&&(e.readOffset=t)},e.ReadBytes=function(e,t,r){for(var n,i,a=t*r,o=0;o<a;o++)e[o]=(i=void 0,i=(n=this).getUint8(n.readOffset),n.readOffset+=1,i)},e.subArray32=function(e,t){var r=this.buffer.slice(e,t);return new Float32Array(r)},e.subArrayUint16=function(e,t){var r=this.buffer.slice(e,t);return new Uint16Array(r)},e.subArrayUint8=function(e,t){var r=this.buffer.slice(e,t);return new Uint8Array(r)},e.subArrayUint32=function(e,t){var r=this.buffer.slice(e,t);return new Uint32Array(r)}}(r),r.Seek(44,He),ue(r),ue(r),ue(r),ue(r),Ie=le(r)>0,Pe=le(r)>0,Ie)throw"Shortened binaries are not supported!";if(r.Seek(256,He),r.Seek(128,He),r.Seek(64,He),!Pe)return Oe(r,t),t.toTHREE();var n=ce(r),i=r.FileSize()-r.Tell(),a=[];r.Read(a,1,i);var o=[];uncompress(o,n,a,i),Oe(new ArrayBuffer(o),t)}(e)}}},5750:(e,t,r)=>{var n=r(5108);THREE.BVHLoader=function(e){this.manager=void 0!==e?e:THREE.DefaultLoadingManager,this.animateBonePositions=!0,this.animateBoneRotations=!0},THREE.BVHLoader.prototype={constructor:THREE.BVHLoader,load:function(e,t,r,n){var i=this;new THREE.FileLoader(i.manager).load(e,(function(e){t(i.parse(e))}),r,n)},parse:function(e){function t(e,r,i){if("ENDSITE"!==i.type){var a={time:r,position:new THREE.Vector3,rotation:new THREE.Quaternion};i.frames.push(a);for(var o=new THREE.Quaternion,s=new THREE.Vector3(1,0,0),l=new THREE.Vector3(0,1,0),u=new THREE.Vector3(0,0,1),c=0;c<i.channels.length;c++)switch(i.channels[c]){case"Xposition":a.position.x=parseFloat(e.shift().trim());break;case"Yposition":a.position.y=parseFloat(e.shift().trim());break;case"Zposition":a.position.z=parseFloat(e.shift().trim());break;case"Xrotation":o.setFromAxisAngle(s,parseFloat(e.shift().trim())*Math.PI/180),a.rotation.multiply(o);break;case"Yrotation":o.setFromAxisAngle(l,parseFloat(e.shift().trim())*Math.PI/180),a.rotation.multiply(o);break;case"Zrotation":o.setFromAxisAngle(u,parseFloat(e.shift().trim())*Math.PI/180),a.rotation.multiply(o);break;default:n.warn("THREE.BVHLoader: Invalid channel type.")}for(c=0;c<i.children.length;c++)t(e,r,i.children[c])}}function r(e,t,a){var o={name:"",type:"",frames:[]};a.push(o);var s=t.split(/[\s]+/);"END"===s[0].toUpperCase()&&"SITE"===s[1].toUpperCase()?(o.type="ENDSITE",o.name="ENDSITE"):(o.name=s[1],o.type=s[0].toUpperCase()),"{"!==i(e)&&n.error("THREE.BVHLoader: Expected opening { after type & name"),"OFFSET"!==(s=i(e).split(/[\s]+/))[0]&&n.error("THREE.BVHLoader: Expected OFFSET but got: "+s[0]),4!==s.length&&n.error("THREE.BVHLoader: Invalid number of values for OFFSET.");var l=new THREE.Vector3(parseFloat(s[1]),parseFloat(s[2]),parseFloat(s[3]));if((isNaN(l.x)||isNaN(l.y)||isNaN(l.z))&&n.error("THREE.BVHLoader: Invalid values of OFFSET."),o.offset=l,"ENDSITE"!==o.type){"CHANNELS"!==(s=i(e).split(/[\s]+/))[0]&&n.error("THREE.BVHLoader: Expected CHANNELS definition.");var u=parseInt(s[1]);o.channels=s.splice(2,u),o.children=[]}for(;;){var c=i(e);if("}"===c)return o;o.children.push(r(e,c,a))}}function i(e){for(var t;0===(t=e.shift().trim()).length;);return t}var a=this,o=function(e){"HIERARCHY"!==i(e)&&n.error("THREE.BVHLoader: HIERARCHY expected.");var a=[],o=r(e,i(e),a);"MOTION"!==i(e)&&n.error("THREE.BVHLoader: MOTION expected.");var s=i(e).split(/[\s]+/),l=parseInt(s[1]);isNaN(l)&&n.error("THREE.BVHLoader: Failed to read number of frames."),s=i(e).split(/[\s]+/);var u=parseFloat(s[2]);isNaN(u)&&n.error("THREE.BVHLoader: Failed to read frame time.");for(var c=0;c<l;c++)t(s=i(e).split(/[\s]+/),c*u,o);return a}(e.split(/[\r\n]+/g)),s=[];!function e(t,r){var n=new THREE.Bone;if(r.push(n),n.position.add(t.offset),n.name=t.name,"ENDSITE"!==t.type)for(var i=0;i<t.children.length;i++)n.add(e(t.children[i],r));return n}(o[0],s);var l=function(e){for(var t=[],r=0;r<e.length;r++){var n=e[r];if("ENDSITE"!==n.type){for(var i=[],o=[],s=[],l=0;l<n.frames.length;l++){var u=n.frames[l];i.push(u.time),o.push(u.position.x+n.offset.x),o.push(u.position.y+n.offset.y),o.push(u.position.z+n.offset.z),s.push(u.rotation.x),s.push(u.rotation.y),s.push(u.rotation.z),s.push(u.rotation.w)}a.animateBonePositions&&t.push(new THREE.VectorKeyframeTrack(".bones["+n.name+"].position",i,o)),a.animateBoneRotations&&t.push(new THREE.QuaternionKeyframeTrack(".bones["+n.name+"].quaternion",i,s))}}return new THREE.AnimationClip("animation",-1,t)}(o);return{skeleton:new THREE.Skeleton(s),clip:l}}}},1471:(e,t,r)=>{var n=r(5108);THREE.BabylonLoader=function(e){this.manager=void 0!==e?e:THREE.DefaultLoadingManager},THREE.BabylonLoader.prototype={constructor:THREE.BabylonLoader,load:function(e,t,r,n){var i=this;new THREE.FileLoader(i.manager).load(e,(function(e){t(i.parse(JSON.parse(e)))}),r,n)},parse:function(e){function t(e){var t=new THREE.BufferGeometry,r=e.indices,n=e.positions,i=e.normals,a=e.uvs;t.setIndex(r);for(var o=2,s=n.length;o<s;o+=3)n[o]=-n[o];if(t.addAttribute("position",new THREE.Float32BufferAttribute(n,3)),i){for(o=2,s=i.length;o<s;o+=3)i[o]=-i[o];t.addAttribute("normal",new THREE.Float32BufferAttribute(i,3))}a&&t.addAttribute("uv",new THREE.Float32BufferAttribute(a,2));var l=e.subMeshes;if(l)for(o=0,s=l.length;o<s;o++){var u=l[o];t.addGroup(u.indexStart,u.indexCount)}return t}var r=function(e){for(var t={},r=0,i=e.materials.length;r<i;r++){var a=e.materials[r],o=new THREE.MeshPhongMaterial;o.name=a.name,o.color.fromArray(a.diffuse),o.emissive.fromArray(a.emissive),o.specular.fromArray(a.specular),o.shininess=a.specularPower,o.opacity=a.alpha,t[a.id]=o}if(e.multiMaterials)for(r=0,i=e.multiMaterials.length;r<i;r++){a=e.multiMaterials[r];n.warn("THREE.BabylonLoader: Multi materials not yet supported."),t[a.id]=new THREE.MeshPhongMaterial}return t}(e),i=function(e,r){for(var n={},i=new THREE.Scene,a=e.cameras,o=0,s=a.length;o<s;o++){var l=a[o],u=new THREE.PerspectiveCamera(l.fov/Math.PI*180,1.33,l.minZ,l.maxZ);u.name=l.name,u.position.fromArray(l.position),l.rotation&&u.rotation.fromArray(l.rotation),n[l.id]=u}var c=e.lights;for(o=0,s=c.length;o<s;o++){var h;switch((l=c[o]).type){case 0:h=new THREE.PointLight;break;case 1:h=new THREE.DirectionalLight;break;case 2:h=new THREE.SpotLight;break;case 3:h=new THREE.HemisphereLight}h.name=l.name,l.position&&h.position.set(l.position[0],l.position[1],-l.position[2]),h.color.fromArray(l.diffuse),l.groundColor&&h.groundColor.fromArray(l.groundColor),l.intensity&&(h.intensity=l.intensity),n[l.id]=h,i.add(h)}var d=e.meshes;for(o=0,s=d.length;o<s;o++){var f;if((l=d[o]).indices){var p=t(l);f=new THREE.Mesh(p,r[l.materialId])}else f=new THREE.Group;f.name=l.name,f.position.set(l.position[0],l.position[1],-l.position[2]),f.rotation.fromArray(l.rotation),l.rotationQuaternion&&f.quaternion.fromArray(l.rotationQuaternion),f.scale.fromArray(l.scaling),l.parentId?n[l.parentId].add(f):i.add(f),n[l.id]=f}return i}(e,r);return i}}},2029:(e,t,r)=>{var n=r(5108);THREE.ColladaLoader=function(e){this.manager=void 0!==e?e:THREE.DefaultLoadingManager},THREE.ColladaLoader.prototype={constructor:THREE.ColladaLoader,crossOrigin:"Anonymous",load:function(e,t,r,n){var i=this,a=void 0===i.path?THREE.LoaderUtils.extractUrlBase(e):i.path;new THREE.FileLoader(i.manager).load(e,(function(e){t(i.parse(e,a))}),r,n)},setPath:function(e){this.path=e},options:{set convertUpAxis(e){n.warn("THREE.ColladaLoader: options.convertUpAxis() has been removed. Up axis is converted automatically.")}},setCrossOrigin:function(e){this.crossOrigin=e},parse:function(e,t){function r(e,t){for(var r=[],n=e.childNodes,i=0,a=n.length;i<a;i++){var o=n[i];o.nodeName===t&&r.push(o)}return r}function i(e){if(0===e.length)return[];for(var t=e.trim().split(/\s+/),r=new Array(t.length),n=0,i=t.length;n<i;n++)r[n]=t[n];return r}function a(e){if(0===e.length)return[];for(var t=e.trim().split(/\s+/),r=new Array(t.length),n=0,i=t.length;n<i;n++)r[n]=parseFloat(t[n]);return r}function o(e){if(0===e.length)return[];for(var t=e.trim().split(/\s+/),r=new Array(t.length),n=0,i=t.length;n<i;n++)r[n]=parseInt(t[n]);return r}function s(e){return e.substring(1)}function l(e){return 0===Object.keys(e).length}function u(e){return void 0!==e?parseFloat(e.getAttribute("meter")):1}function c(e){return void 0!==e?e.textContent:"Y_UP"}function h(e,t,n,i){var a=r(e,t)[0];if(void 0!==a)for(var o=r(a,n),s=0;s<o.length;s++)i(o[s])}function d(e,t){for(var r in e){e[r].build=t(e[r])}}function f(e,t){return void 0!==e.build||(e.build=t(e)),e.build}function p(e){for(var t={inputs:{}},r=0,n=e.childNodes.length;r<n;r++){var i=e.childNodes[r];if(1===i.nodeType&&"input"===i.nodeName){var a=s(i.getAttribute("source")),o=i.getAttribute("semantic");t.inputs[o]=a}}return t}function m(e){var t={},r=e.getAttribute("target").split("/"),n=r.shift(),i=r.shift(),a=-1!==i.indexOf("("),o=-1!==i.indexOf(".");if(o)r=i.split("."),i=r.shift(),t.member=r.shift();else if(a){var l=i.split("(");i=l.shift();for(var u=0;u<l.length;u++)l[u]=parseInt(l[u].replace(/\)/,""));t.indices=l}return t.id=n,t.sid=i,t.arraySyntax=a,t.memberSyntax=o,t.sampler=s(e.getAttribute("source")),t}function g(e){var t=[],r=e.channels,n=e.samplers,i=e.sources;for(var a in r)if(r.hasOwnProperty(a)){var o=r[a],s=n[o.sampler],l=s.inputs.INPUT,u=s.inputs.OUTPUT;w(y(o,i[l],i[u]),t)}return t}function v(e){return f(Fe.animations[e],g)}function y(e,t,r){var i,a,o,s,l,u,c=Fe.nodes[e.id],h=Ae(c.id),d=c.transforms[e.sid],f=c.matrix.clone().transpose(),p={};switch(d){case"matrix":for(o=0,s=t.array.length;o<s;o++)if(i=t.array[o],a=o*r.stride,void 0===p[i]&&(p[i]={}),!0===e.arraySyntax){var m=r.array[a],g=e.indices[0]+4*e.indices[1];p[i][g]=m}else for(l=0,u=r.stride;l<u;l++)p[i][l]=r.array[a+l];break;case"translate":case"rotate":case"scale":n.warn('THREE.ColladaLoader: Animation transform type "%s" not yet implemented.',d)}var v=function(e,t){var r=[];for(var n in e)r.push({time:parseFloat(n),value:e[n]});r.sort(a);for(var i=0;i<16;i++)T(r,i,t.elements[i]);return r;function a(e,t){return e.time-t.time}}(p,f);return{name:h.uuid,keyframes:v}}var b=new THREE.Vector3,E=new THREE.Vector3,x=new THREE.Quaternion;function w(e,t){for(var r=e.keyframes,n=e.name,i=[],a=[],o=[],s=[],l=0,u=r.length;l<u;l++){var c=r[l],h=c.time,d=c.value;be.fromArray(d).transpose(),be.decompose(b,x,E),i.push(h),a.push(b.x,b.y,b.z),o.push(x.x,x.y,x.z,x.w),s.push(E.x,E.y,E.z)}return a.length>0&&t.push(new THREE.VectorKeyframeTrack(n+".position",i,a)),o.length>0&&t.push(new THREE.QuaternionKeyframeTrack(n+".quaternion",i,o)),s.length>0&&t.push(new THREE.VectorKeyframeTrack(n+".scale",i,s)),t}function T(e,t,r){var n,i,a,o=!0;for(i=0,a=e.length;i<a;i++)void 0===(n=e[i]).value[t]?n.value[t]=null:o=!1;if(!0===o)for(i=0,a=e.length;i<a;i++)(n=e[i]).value[t]=r;else!function(e,t){for(var r,n,i=0,a=e.length;i<a;i++){var o=e[i];if(null===o.value[t]){if(r=_(e,i,t),n=S(e,i,t),null===r){o.value[t]=n.value[t];continue}if(null===n){o.value[t]=r.value[t];continue}M(o,r,n,t)}}}(e,t)}function _(e,t,r){for(;t>=0;){var n=e[t];if(null!==n.value[r])return n;t--}return null}function S(e,t,r){for(;t<e.length;){var n=e[t];if(null!==n.value[r])return n;t++}return null}function M(e,t,r,n){r.time-t.time!=0?e.value[n]=(e.time-t.time)*(r.value[n]-t.value[n])/(r.time-t.time)+t.value[n]:e.value[n]=t.value[n]}function R(e){for(var t=[],r=e.name,n=e.end-e.start||-1,i=e.animations,a=0,o=i.length;a<o;a++)for(var s=v(i[a]),l=0,u=s.length;l<u;l++)t.push(s[l]);return new THREE.AnimationClip(r,n,t)}function A(e){return f(Fe.clips[e],R)}function C(e){for(var t={sources:{}},r=0,n=e.childNodes.length;r<n;r++){var i=e.childNodes[r];if(1===i.nodeType)switch(i.nodeName){case"bind_shape_matrix":t.bindShapeMatrix=a(i.textContent);break;case"source":var o=i.getAttribute("id");t.sources[o]=re(i);break;case"joints":t.joints=L(i);break;case"vertex_weights":t.vertexWeights=O(i)}}return t}function L(e){for(var t={inputs:{}},r=0,n=e.childNodes.length;r<n;r++){var i=e.childNodes[r];if(1===i.nodeType&&"input"===i.nodeName){var a=i.getAttribute("semantic"),o=s(i.getAttribute("source"));t.inputs[a]=o}}return t}function O(e){for(var t={inputs:{}},r=0,n=e.childNodes.length;r<n;r++){var i=e.childNodes[r];if(1===i.nodeType)switch(i.nodeName){case"input":var a=i.getAttribute("semantic"),l=s(i.getAttribute("source")),u=parseInt(i.getAttribute("offset"));t.inputs[a]={id:l,offset:u};break;case"vcount":t.vcount=o(i.textContent);break;case"v":t.v=o(i.textContent)}}return t}function I(e){var t={id:e.id},r=Fe.geometries[t.id];return void 0!==e.skin&&(t.skin=function(e){var t,r,n,i=4,a={joints:[],indices:{array:[],stride:i},weights:{array:[],stride:i}},o=e.sources,s=e.vertexWeights,l=s.vcount,u=s.v,c=s.inputs.JOINT.offset,h=s.inputs.WEIGHT.offset,d=e.sources[e.joints.inputs.JOINT],f=e.sources[e.joints.inputs.INV_BIND_MATRIX],p=o[s.inputs.WEIGHT.id].array,m=0;for(t=0,n=l.length;t<n;t++){var g=l[t],v=[];for(r=0;r<g;r++){var y=u[m+c],b=p[u[m+h]];v.push({index:y,weight:b}),m+=2}for(v.sort(T),r=0;r<i;r++){var E=v[r];void 0!==E?(a.indices.array.push(E.index),a.weights.array.push(E.weight)):(a.indices.array.push(0),a.weights.array.push(0))}}for(a.bindMatrix=(new THREE.Matrix4).fromArray(e.bindShapeMatrix).transpose(),t=0,n=d.array.length;t<n;t++){var x=d.array[t],w=(new THREE.Matrix4).fromArray(f.array,t*f.stride).transpose();a.joints.push({name:x,boneInverse:w})}return a;function T(e,t){return t.weight-e.weight}}(e.skin),r.sources.skinIndices=t.skin.indices,r.sources.skinWeights=t.skin.weights),t}function P(e){return void 0!==e.build?e.build:e.init_from}function H(e){for(var t={surfaces:{},samplers:{}},r=0,n=e.childNodes.length;r<n;r++){var i=e.childNodes[r];if(1===i.nodeType)switch(i.nodeName){case"newparam":k(i,t);break;case"technique":t.technique=D(i)}}return t}function k(e,t){for(var r=e.getAttribute("sid"),n=0,i=e.childNodes.length;n<i;n++){var a=e.childNodes[n];if(1===a.nodeType)switch(a.nodeName){case"surface":t.surfaces[r]=N(a);break;case"sampler2D":t.samplers[r]=U(a)}}}function N(e){for(var t={},r=0,n=e.childNodes.length;r<n;r++){var i=e.childNodes[r];if(1===i.nodeType&&"init_from"===i.nodeName)t.init_from=i.textContent}return t}function U(e){for(var t={},r=0,n=e.childNodes.length;r<n;r++){var i=e.childNodes[r];if(1===i.nodeType&&"source"===i.nodeName)t.source=i.textContent}return t}function D(e){for(var t={},r=0,n=e.childNodes.length;r<n;r++){var i=e.childNodes[r];if(1===i.nodeType)switch(i.nodeName){case"constant":case"lambert":case"blinn":case"phong":t.type=i.nodeName,t.parameters=F(i)}}return t}function F(e){for(var t={},r=0,n=e.childNodes.length;r<n;r++){var i=e.childNodes[r];if(1===i.nodeType)switch(i.nodeName){case"emission":case"diffuse":case"specular":case"shininess":case"transparent":case"transparency":t[i.nodeName]=B(i)}}return t}function B(e){for(var t={},r=0,n=e.childNodes.length;r<n;r++){var i=e.childNodes[r];if(1===i.nodeType)switch(i.nodeName){case"color":t[i.nodeName]=a(i.textContent);break;case"float":t[i.nodeName]=parseFloat(i.textContent);break;case"texture":t[i.nodeName]={id:i.getAttribute("texture"),extra:z(i)}}}return t}function z(e){for(var t={technique:{}},r=0,n=e.childNodes.length;r<n;r++){var i=e.childNodes[r];if(1===i.nodeType&&"extra"===i.nodeName)j(i,t)}return t}function j(e,t){for(var r=0,n=e.childNodes.length;r<n;r++){var i=e.childNodes[r];if(1===i.nodeType&&"technique"===i.nodeName)V(i,t)}}function V(e,t){for(var r=0,n=e.childNodes.length;r<n;r++){var i=e.childNodes[r];if(1===i.nodeType)switch(i.nodeName){case"repeatU":case"repeatV":case"offsetU":case"offsetV":t.technique[i.nodeName]=parseFloat(i.textContent);break;case"wrapU":case"wrapV":"TRUE"===i.textContent.toUpperCase()?t.technique[i.nodeName]=1:"FALSE"===i.textContent.toUpperCase()?t.technique[i.nodeName]=0:t.technique[i.nodeName]=parseInt(i.textContent)}}}function G(e){return e}function W(e){var t,r,i=(t=e.url,f(Fe.effects[t],G)),a=i.profile.technique;switch(a.type){case"phong":case"blinn":r=new THREE.MeshPhongMaterial;break;case"lambert":r=new THREE.MeshLambertMaterial;break;default:r=new THREE.MeshBasicMaterial}function o(e){var t=i.profile.samplers[e.id];if(void 0!==t){var r=i.profile.surfaces[t.source],a=ke.load(function(e){return f(Fe.images[e],P)}(r.init_from)),o=e.extra;if(void 0!==o&&void 0!==o.technique&&!1===l(o.technique)){var s=o.technique;a.wrapS=s.wrapU?THREE.RepeatWrapping:THREE.ClampToEdgeWrapping,a.wrapT=s.wrapV?THREE.RepeatWrapping:THREE.ClampToEdgeWrapping,a.offset.set(s.offsetU||0,s.offsetV||0),a.repeat.set(s.repeatU||1,s.repeatV||1)}else a.wrapS=THREE.RepeatWrapping,a.wrapT=THREE.RepeatWrapping;return a}return n.error("THREE.ColladaLoader: Undefined sampler",e.id),null}r.name=e.name;var s=a.parameters;for(var u in s){var c=s[u];switch(u){case"diffuse":c.color&&r.color.fromArray(c.color),c.texture&&(r.map=o(c.texture));break;case"specular":c.color&&r.specular&&r.specular.fromArray(c.color),c.texture&&(r.specularMap=o(c.texture));break;case"shininess":c.float&&r.shininess&&(r.shininess=c.float);break;case"emission":c.color&&r.emissive&&r.emissive.fromArray(c.color);break;case"transparent":r.transparent=!0;break;case"transparency":void 0!==c.float&&(r.opacity=c.float),r.transparent=!0}}return r}function q(e){return f(Fe.materials[e],W)}function X(e){for(var t=0;t<e.childNodes.length;t++){var r=e.childNodes[t];if("technique_common"===r.nodeName)return Y(r)}return{}}function Y(e){for(var t={},r=0;r<e.childNodes.length;r++){var n=e.childNodes[r];switch(n.nodeName){case"perspective":case"orthographic":t.technique=n.nodeName,t.parameters=Z(n)}}return t}function Z(e){for(var t={},r=0;r<e.childNodes.length;r++){var n=e.childNodes[r];switch(n.nodeName){case"xfov":case"yfov":case"xmag":case"ymag":case"znear":case"zfar":case"aspect_ratio":t[n.nodeName]=parseFloat(n.textContent)}}return t}function K(e){var t;switch(e.optics.technique){case"perspective":t=new THREE.PerspectiveCamera(e.optics.parameters.yfov,e.optics.parameters.aspect_ratio,e.optics.parameters.znear,e.optics.parameters.zfar);break;case"orthographic":var r=e.optics.parameters.ymag,n=e.optics.parameters.xmag,i=e.optics.parameters.aspect_ratio;n=void 0===n?r*i:n,r=void 0===r?n/i:r,n*=.5,r*=.5,t=new THREE.OrthographicCamera(-n,n,r,-r,e.optics.parameters.znear,e.optics.parameters.zfar);break;default:t=new THREE.PerspectiveCamera}return t.name=e.name,t}function Q(e){var t=Fe.cameras[e];return void 0!==t?f(t,K):(n.warn("THREE.ColladaLoader: Couldn't find camera with ID:",e),null)}function J(e){for(var t={},r=0,n=e.childNodes.length;r<n;r++){var i=e.childNodes[r];if(1===i.nodeType)switch(i.nodeName){case"directional":case"point":case"spot":case"ambient":t.technique=i.nodeName,t.parameters=$(i)}}return t}function $(e){for(var t={},r=0,n=e.childNodes.length;r<n;r++){var i=e.childNodes[r];if(1===i.nodeType)switch(i.nodeName){case"color":var o=a(i.textContent);t.color=(new THREE.Color).fromArray(o);break;case"falloff_angle":t.falloffAngle=parseFloat(i.textContent);break;case"quadratic_attenuation":var s=parseFloat(i.textContent);t.distance=s?Math.sqrt(1/s):0}}return t}function ee(e){var t;switch(e.technique){case"directional":t=new THREE.DirectionalLight;break;case"point":t=new THREE.PointLight;break;case"spot":t=new THREE.SpotLight;break;case"ambient":t=new THREE.AmbientLight}return e.parameters.color&&t.color.copy(e.parameters.color),e.parameters.distance&&(t.distance=e.parameters.distance),t}function te(e){var t=Fe.lights[e];return void 0!==t?f(t,ee):(n.warn("THREE.ColladaLoader: Couldn't find light with ID:",e),null)}function re(e){for(var t={array:[],stride:3},n=0;n<e.childNodes.length;n++){var o=e.childNodes[n];if(1===o.nodeType)switch(o.nodeName){case"float_array":t.array=a(o.textContent);break;case"Name_array":t.array=i(o.textContent);break;case"technique_common":var s=r(o,"accessor")[0];void 0!==s&&(t.stride=parseInt(s.getAttribute("stride")))}}return t}function ne(e){for(var t={},r=0;r<e.childNodes.length;r++){var n=e.childNodes[r];1===n.nodeType&&(t[n.getAttribute("semantic")]=s(n.getAttribute("source")))}return t}function ie(e){for(var t={type:e.nodeName,material:e.getAttribute("material"),count:parseInt(e.getAttribute("count")),inputs:{},stride:0},r=0,n=e.childNodes.length;r<n;r++){var i=e.childNodes[r];if(1===i.nodeType)switch(i.nodeName){case"input":var a=s(i.getAttribute("source")),l=i.getAttribute("semantic"),u=parseInt(i.getAttribute("offset"));t.inputs[l]={id:a,offset:u},t.stride=Math.max(t.stride,u+1);break;case"vcount":t.vcount=o(i.textContent);break;case"p":t.p=o(i.textContent)}}return t}function ae(e){var t={},r=e.sources,n=e.vertices,i=e.primitives;if(0===i.length)return{};var a=function(e){for(var t={},r=0;r<e.length;r++){var n=e[r];void 0===t[n.type]&&(t[n.type]=[]),t[n.type].push(n)}return t}(i);for(var o in a)t[o]=oe(a[o],r,n);return t}function oe(e,t,r){for(var i={},a={array:[],stride:0},o={array:[],stride:0},s={array:[],stride:0},l={array:[],stride:0},u=[],c=4,h=[],d=4,f=new THREE.BufferGeometry,p=[],m=0,g=0,v=0;v<e.length;v++){var y=e[v],b=y.inputs,E=1;for(var x in y.vcount&&4===y.vcount[0]&&(E=2),g="lines"===y.type||"linestrips"===y.type?2*y.count:3*y.count*E,f.addGroup(m,g,v),m+=g,y.material&&p.push(y.material),b){var w=b[x];switch(x){case"VERTEX":for(var T in r){var _=r[T];switch(T){case"POSITION":se(y,t[_],w.offset,a.array),a.stride=t[_].stride,t.skinWeights&&t.skinIndices&&(se(y,t.skinIndices,w.offset,u),se(y,t.skinWeights,w.offset,h));break;case"NORMAL":se(y,t[_],w.offset,o.array),o.stride=t[_].stride;break;case"COLOR":se(y,t[_],w.offset,l.array),l.stride=t[_].stride;break;case"TEXCOORD":se(y,t[_],w.offset,s.array),s.stride=t[_].stride;break;default:n.warn('THREE.ColladaLoader: Semantic "%s" not handled in geometry build process.',T)}}break;case"NORMAL":se(y,t[w.id],w.offset,o.array),o.stride=t[w.id].stride;break;case"COLOR":se(y,t[w.id],w.offset,l.array),l.stride=t[w.id].stride;break;case"TEXCOORD":se(y,t[w.id],w.offset,s.array),s.stride=t[w.id].stride}}}return a.array.length>0&&f.addAttribute("position",new THREE.Float32BufferAttribute(a.array,a.stride)),o.array.length>0&&f.addAttribute("normal",new THREE.Float32BufferAttribute(o.array,o.stride)),l.array.length>0&&f.addAttribute("color",new THREE.Float32BufferAttribute(l.array,l.stride)),s.array.length>0&&f.addAttribute("uv",new THREE.Float32BufferAttribute(s.array,s.stride)),u.length>0&&f.addAttribute("skinIndex",new THREE.Float32BufferAttribute(u,c)),h.length>0&&f.addAttribute("skinWeight",new THREE.Float32BufferAttribute(h,d)),i.data=f,i.type=e[0].type,i.materialKeys=p,i}function se(e,t,r,i){var a=e.p,o=e.stride,s=e.vcount;function l(e){for(var t=a[e+r]*h,n=t+h;t<n;t++)i.push(c[t])}var u=0,c=t.array,h=t.stride;if(void 0!==e.vcount){for(var d=0,f=0,p=s.length;f<p;f++){var m=s[f];if(4===m){var g=d+1*o,v=d+2*o,y=d+3*o;l(d+0*o),l(g),l(y),l(g),l(v),l(y)}else if(3===m){g=d+1*o,v=d+2*o;l(d+0*o),l(g),l(v)}else u=Math.max(u,m);d+=o*m}u>0&&n.log("THREE.ColladaLoader: Geometry has faces with more than 4 vertices.")}else for(f=0,p=a.length;f<p;f+=o)l(f)}function le(e){return f(Fe.geometries[e],ae)}function ue(e){return void 0!==e.build?e.build:e}function ce(e,t){for(var r=0;r<e.childNodes.length;r++){var n=e.childNodes[r];if(1===n.nodeType)switch(n.nodeName){case"joint":t.joints[n.getAttribute("sid")]=he(n);break;case"link":t.links.push(fe(n))}}}function he(e){for(var t,r=0;r<e.childNodes.length;r++){var n=e.childNodes[r];if(1===n.nodeType)switch(n.nodeName){case"prismatic":case"revolute":t=de(n)}}return t}function de(e,t){t={sid:e.getAttribute("sid"),name:e.getAttribute("name")||"",axis:new THREE.Vector3,limits:{min:0,max:0},type:e.nodeName,static:!1,zeroPosition:0,middlePosition:0};for(var r=0;r<e.childNodes.length;r++){var n=e.childNodes[r];if(1===n.nodeType)switch(n.nodeName){case"axis":var i=a(n.textContent);t.axis.fromArray(i);break;case"limits":var o=n.getElementsByTagName("max")[0],s=n.getElementsByTagName("min")[0];t.limits.max=parseFloat(o.textContent),t.limits.min=parseFloat(s.textContent)}}return t.limits.min>=t.limits.max&&(t.static=!0),t.middlePosition=(t.limits.min+t.limits.max)/2,t}function fe(e){for(var t={sid:e.getAttribute("sid"),name:e.getAttribute("name")||"",attachments:[],transforms:[]},r=0;r<e.childNodes.length;r++){var n=e.childNodes[r];if(1===n.nodeType)switch(n.nodeName){case"attachment_full":t.attachments.push(pe(n));break;case"matrix":case"translate":case"rotate":t.transforms.push(me(n))}}return t}function pe(e){for(var t={joint:e.getAttribute("joint").split("/").pop(),transforms:[],links:[]},r=0;r<e.childNodes.length;r++){var n=e.childNodes[r];if(1===n.nodeType)switch(n.nodeName){case"link":t.links.push(fe(n));break;case"matrix":case"translate":case"rotate":t.transforms.push(me(n))}}return t}function me(e){var t={type:e.nodeName},r=a(e.textContent);switch(t.type){case"matrix":t.obj=new THREE.Matrix4,t.obj.fromArray(r).transpose();break;case"translate":t.obj=new THREE.Vector3,t.obj.fromArray(r);break;case"rotate":t.obj=new THREE.Vector3,t.obj.fromArray(r),t.angle=THREE.Math.degToRad(r[3])}return t}function ge(e){for(var t={target:e.getAttribute("target").split("/").pop()},r=0;r<e.childNodes.length;r++){var n=e.childNodes[r];if(1===n.nodeType&&"axis"===n.nodeName){var i=n.getElementsByTagName("param")[0];t.axis=i.textContent;var a=t.axis.split("inst_").pop().split("axis")[0];t.jointIndex=a.substr(0,a.length-1)}}return t}function ve(e){return void 0!==e.build?e.build:e}function ye(e){for(var t=[],r=Ie.querySelector('[id="'+e.id+'"]'),n=0;n<r.childNodes.length;n++){var i=r.childNodes[n];if(1===i.nodeType)switch(i.nodeName){case"matrix":var o=a(i.textContent),s=(new THREE.Matrix4).fromArray(o).transpose();t.push({sid:i.getAttribute("sid"),type:i.nodeName,obj:s});break;case"translate":case"scale":o=a(i.textContent);var l=(new THREE.Vector3).fromArray(o);t.push({sid:i.getAttribute("sid"),type:i.nodeName,obj:l});break;case"rotate":o=a(i.textContent),l=(new THREE.Vector3).fromArray(o);var u=THREE.Math.degToRad(o[3]);t.push({sid:i.getAttribute("sid"),type:i.nodeName,obj:l,angle:u})}}return t}var be=new THREE.Matrix4,Ee=new THREE.Vector3;function xe(e){for(var t={name:e.getAttribute("name")||"",type:e.getAttribute("type"),id:e.getAttribute("id"),sid:e.getAttribute("sid"),matrix:new THREE.Matrix4,nodes:[],instanceCameras:[],instanceControllers:[],instanceLights:[],instanceGeometries:[],instanceNodes:[],transforms:{}},r=0;r<e.childNodes.length;r++){var i=e.childNodes[r];if(1===i.nodeType)switch(i.nodeName){case"node":t.nodes.push(i.getAttribute("id")),xe(i);break;case"instance_camera":t.instanceCameras.push(s(i.getAttribute("url")));break;case"instance_controller":t.instanceControllers.push(we(i));break;case"instance_light":t.instanceLights.push(s(i.getAttribute("url")));break;case"instance_geometry":t.instanceGeometries.push(we(i));break;case"instance_node":t.instanceNodes.push(s(i.getAttribute("url")));break;case"matrix":var o=a(i.textContent);t.matrix.multiply(be.fromArray(o).transpose()),t.transforms[i.getAttribute("sid")]=i.nodeName;break;case"translate":o=a(i.textContent);Ee.fromArray(o),t.matrix.multiply(be.makeTranslation(Ee.x,Ee.y,Ee.z)),t.transforms[i.getAttribute("sid")]=i.nodeName;break;case"rotate":o=a(i.textContent);var l=THREE.Math.degToRad(o[3]);t.matrix.multiply(be.makeRotationAxis(Ee.fromArray(o),l)),t.transforms[i.getAttribute("sid")]=i.nodeName;break;case"scale":o=a(i.textContent);t.matrix.scale(Ee.fromArray(o)),t.transforms[i.getAttribute("sid")]=i.nodeName;break;case"extra":break;default:n.log(i)}}return Fe.nodes[t.id]=t,t}function we(e){for(var t={id:s(e.getAttribute("url")),materials:{},skeletons:[]},r=0;r<e.childNodes.length;r++){var n=e.childNodes[r];switch(n.nodeName){case"bind_material":for(var i=n.getElementsByTagName("instance_material"),a=0;a<i.length;a++){var o=i[a],l=o.getAttribute("symbol"),u=o.getAttribute("target");t.materials[l]=s(u)}break;case"skeleton":t.skeletons.push(s(n.textContent))}}return t}function Te(e,t){var r,n,i,a=[],o=[];for(r=0;r<e.length;r++){_e(Ae(e[r]),t,a)}for(r=0;r<t.length;r++)for(n=0;n<a.length;n++)if((i=a[n]).bone.name===t[r].name){o[r]=i,i.processed=!0;break}for(r=0;r<a.length;r++)!1===(i=a[r]).processed&&(o.push(i),i.processed=!0);var s=[],l=[];for(r=0;r<o.length;r++)i=o[r],s.push(i.bone),l.push(i.boneInverse);return new THREE.Skeleton(s,l)}function _e(e,t,r){e.traverse((function(e){if(!0===e.isBone){for(var n,i=0;i<t.length;i++){var a=t[i];if(a.name===e.name){n=a.boneInverse;break}}void 0===n&&(n=new THREE.Matrix4),r.push({bone:e,boneInverse:n,processed:!1})}}))}function Se(e){for(var t,r=[],n=e.matrix,i=e.nodes,a=e.type,o=e.instanceCameras,s=e.instanceControllers,l=e.instanceLights,u=e.instanceGeometries,c=e.instanceNodes,h=0,d=i.length;h<d;h++)r.push(Ae(i[h]));for(h=0,d=o.length;h<d;h++){var p=Q(o[h]);null!==p&&r.push(p.clone())}for(h=0,d=s.length;h<d;h++)for(var m=s[h],g=(t=m.id,f(Fe.controllers[t],I)),v=Re(le(g.id),m.materials),y=Te(m.skeletons,g.skin.joints),b=0,E=v.length;b<E;b++){var x;(x=v[b]).isSkinnedMesh&&(x.bind(y,g.skin.bindMatrix),x.normalizeSkinWeights()),r.push(x)}for(h=0,d=l.length;h<d;h++){var w=te(l[h]);null!==w&&r.push(w.clone())}for(h=0,d=u.length;h<d;h++)for(b=0,E=(v=Re(le((m=u[h]).id),m.materials)).length;b<E;b++)r.push(v[b]);for(h=0,d=c.length;h<d;h++)r.push(Ae(c[h]).clone());if(0===i.length&&1===r.length)x=r[0];else{x="JOINT"===a?new THREE.Bone:new THREE.Group;for(h=0;h<r.length;h++)x.add(r[h])}return x.name="JOINT"===a?e.sid:e.name,x.matrix.copy(n),x.matrix.decompose(x.position,x.quaternion,x.scale),x}function Me(e,t){for(var r=[],n=0,i=e.length;n<i;n++){var a=t[e[n]];r.push(q(a))}return r}function Re(e,t){var r=[];for(var n in e){var i=e[n],a=Me(i.materialKeys,t);0===a.length&&("lines"===n||"linestrips"===n?a.push(new THREE.LineBasicMaterial):a.push(new THREE.MeshPhongMaterial));var o=void 0!==i.data.attributes.skinIndex;if(o)for(var s=0,l=a.length;s<l;s++)a[s].skinning=!0;var u,c=1===a.length?a[0]:a;switch(n){case"lines":u=new THREE.LineSegments(i.data,c);break;case"linestrips":u=new THREE.Line(i.data,c);break;case"triangles":case"polylist":u=o?new THREE.SkinnedMesh(i.data,c):new THREE.Mesh(i.data,c)}r.push(u)}return r}function Ae(e){return f(Fe.nodes[e],Se)}function Ce(e){var t=new THREE.Group;t.name=e.name;for(var r=e.children,n=0;n<r.length;n++){var i=r[n];null===i.id?t.add(Se(i)):t.add(Ae(i.id))}return t}function Le(e){return f(Fe.visualScenes[e],Ce)}if(n.time("THREE.ColladaLoader"),0===e.length)return{scene:new THREE.Scene};n.time("THREE.ColladaLoader: DOMParser");var Oe=(new DOMParser).parseFromString(e,"application/xml");n.timeEnd("THREE.ColladaLoader: DOMParser");var Ie=r(Oe,"COLLADA")[0],Pe=Ie.getAttribute("version");n.log("THREE.ColladaLoader: File version",Pe);var He=function(e){return{unit:u(r(e,"unit")[0]),upAxis:c(r(e,"up_axis")[0])}}(r(Ie,"asset")[0]),ke=new THREE.TextureLoader(this.manager);ke.setPath(t).setCrossOrigin(this.crossOrigin);var Ne=[],Ue={},De=0,Fe={animations:{},clips:{},controllers:{},images:{},effects:{},materials:{},cameras:{},lights:{},geometries:{},nodes:{},visualScenes:{},kinematicsModels:{},kinematicsScenes:{}};n.time("THREE.ColladaLoader: Parse"),h(Ie,"library_animations","animation",(function(e){for(var t={sources:{},samplers:{},channels:{}},r=0,i=e.childNodes.length;r<i;r++){var a,o=e.childNodes[r];if(1===o.nodeType)switch(o.nodeName){case"source":a=o.getAttribute("id"),t.sources[a]=re(o);break;case"sampler":a=o.getAttribute("id"),t.samplers[a]=p(o);break;case"channel":a=o.getAttribute("target"),t.channels[a]=m(o);break;default:n.log(o)}}Fe.animations[e.getAttribute("id")]=t})),h(Ie,"library_animation_clips","animation_clip",(function(e){for(var t={name:e.getAttribute("id")||"default",start:parseFloat(e.getAttribute("start")||0),end:parseFloat(e.getAttribute("end")||0),animations:[]},r=0,n=e.childNodes.length;r<n;r++){var i=e.childNodes[r];if(1===i.nodeType&&"instance_animation"===i.nodeName)t.animations.push(s(i.getAttribute("url")))}Fe.clips[e.getAttribute("id")]=t})),h(Ie,"library_controllers","controller",(function(e){for(var t={},r=0,i=e.childNodes.length;r<i;r++){var a=e.childNodes[r];if(1===a.nodeType)switch(a.nodeName){case"skin":t.id=s(a.getAttribute("source")),t.skin=C(a);break;case"morph":t.id=s(a.getAttribute("source")),n.warn("THREE.ColladaLoader: Morph target animation not supported yet.")}}Fe.controllers[e.getAttribute("id")]=t})),h(Ie,"library_images","image",(function(e){var t={init_from:r(e,"init_from")[0].textContent};Fe.images[e.getAttribute("id")]=t})),h(Ie,"library_effects","effect",(function(e){for(var t={},r=0,n=e.childNodes.length;r<n;r++){var i=e.childNodes[r];if(1===i.nodeType&&"profile_COMMON"===i.nodeName)t.profile=H(i)}Fe.effects[e.getAttribute("id")]=t})),h(Ie,"library_materials","material",(function(e){for(var t={name:e.getAttribute("name")},r=0,n=e.childNodes.length;r<n;r++){var i=e.childNodes[r];if(1===i.nodeType&&"instance_effect"===i.nodeName)t.url=s(i.getAttribute("url"))}Fe.materials[e.getAttribute("id")]=t})),h(Ie,"library_cameras","camera",(function(e){for(var t={name:e.getAttribute("name")},r=0,n=e.childNodes.length;r<n;r++){var i=e.childNodes[r];if(1===i.nodeType&&"optics"===i.nodeName)t.optics=X(i)}Fe.cameras[e.getAttribute("id")]=t})),h(Ie,"library_lights","light",(function(e){for(var t={},r=0,n=e.childNodes.length;r<n;r++){var i=e.childNodes[r];if(1===i.nodeType&&"technique_common"===i.nodeName)t=J(i)}Fe.lights[e.getAttribute("id")]=t})),h(Ie,"library_geometries","geometry",(function(e){var t={name:e.getAttribute("name"),sources:{},vertices:{},primitives:[]},i=r(e,"mesh")[0];if(void 0!==i){for(var a=0;a<i.childNodes.length;a++){var o=i.childNodes[a];if(1===o.nodeType){var s=o.getAttribute("id");switch(o.nodeName){case"source":t.sources[s]=re(o);break;case"vertices":t.vertices=ne(o);break;case"polygons":n.warn("THREE.ColladaLoader: Unsupported primitive type: ",o.nodeName);break;case"lines":case"linestrips":case"polylist":case"triangles":t.primitives.push(ie(o));break;default:n.log(o)}}}Fe.geometries[e.getAttribute("id")]=t}})),h(Ie,"library_nodes","node",xe),h(Ie,"library_visual_scenes","visual_scene",(function(e){var t={name:e.getAttribute("name"),children:[]};!function(e){for(var t=e.getElementsByTagName("node"),r=0;r<t.length;r++){var n=t[r];!1===n.hasAttribute("id")&&n.setAttribute("id","three_default_"+De++)}}(e);for(var n=r(e,"node"),i=0;i<n.length;i++)t.children.push(xe(n[i]));Fe.visualScenes[e.getAttribute("id")]=t})),h(Ie,"library_kinematics_models","kinematics_model",(function(e){for(var t={name:e.getAttribute("name")||"",joints:{},links:[]},r=0;r<e.childNodes.length;r++){var n=e.childNodes[r];if(1===n.nodeType&&"technique_common"===n.nodeName)ce(n,t)}Fe.kinematicsModels[e.getAttribute("id")]=t})),h(Ie,"scene","instance_kinematics_scene",(function(e){for(var t={bindJointAxis:[]},r=0;r<e.childNodes.length;r++){var n=e.childNodes[r];if(1===n.nodeType&&"bind_joint_axis"===n.nodeName)t.bindJointAxis.push(ge(n))}Fe.kinematicsScenes[s(e.getAttribute("url"))]=t})),n.timeEnd("THREE.ColladaLoader: Parse"),n.time("THREE.ColladaLoader: Build"),d(Fe.animations,g),d(Fe.clips,R),d(Fe.controllers,I),d(Fe.images,P),d(Fe.effects,G),d(Fe.materials,W),d(Fe.cameras,K),d(Fe.lights,ee),d(Fe.geometries,ae),d(Fe.visualScenes,Ce),n.timeEnd("THREE.ColladaLoader: Build"),function(){var e=Fe.clips;if(!0===l(e)){if(!1===l(Fe.animations)){var t=[];for(var r in Fe.animations)for(var n=v(r),i=0,a=n.length;i<a;i++)t.push(n[i]);Ne.push(new THREE.AnimationClip("default",-1,t))}}else for(var r in e)Ne.push(A(r))}(),function(){var e=Object.keys(Fe.kinematicsModels)[0],t=Object.keys(Fe.kinematicsScenes)[0],r=Object.keys(Fe.visualScenes)[0];if(void 0!==e&&void 0!==t){for(var i,a=(i=e,f(Fe.kinematicsModels[i],ue)),o=function(e){return f(Fe.kinematicsScenes[e],ve)}(t),s=Le(r),l=o.bindJointAxis,u={},c=0,h=l.length;c<h;c++){var d=l[c],p=Ie.querySelector('[sid="'+d.target+'"]');if(p){var m=p.parentElement;v(d.jointIndex,m)}}var g=new THREE.Matrix4;Ue={joints:a&&a.joints,getJointValue:function(e){var t=u[e];if(t)return t.position;n.warn("THREE.ColladaLoader: Joint "+e+" doesn't exist.")},setJointValue:function(e,t){var r=u[e];if(r){var i=r.joint;if(t>i.limits.max||t<i.limits.min)n.warn("THREE.ColladaLoader: Joint "+e+" value "+t+" outside of limits (min: "+i.limits.min+", max: "+i.limits.max+").");else if(i.static)n.warn("THREE.ColladaLoader: Joint "+e+" is static.");else{var a=r.object,o=i.axis,s=r.transforms;be.identity();for(var l=0;l<s.length;l++){var c=s[l];if(c.sid&&-1!==c.sid.indexOf(e))switch(i.type){case"revolute":be.multiply(g.makeRotationAxis(o,THREE.Math.degToRad(t)));break;case"prismatic":be.multiply(g.makeTranslation(o.x*t,o.y*t,o.z*t));break;default:n.warn("THREE.ColladaLoader: Unknown joint type: "+i.type)}else switch(c.type){case"matrix":be.multiply(c.obj);break;case"translate":be.multiply(g.makeTranslation(c.obj.x,c.obj.y,c.obj.z));break;case"scale":be.scale(c.obj);break;case"rotate":be.multiply(g.makeRotationAxis(c.obj,c.angle))}}a.matrix.copy(be),a.matrix.decompose(a.position,a.quaternion,a.scale),u[e].position=t}}else n.log("THREE.ColladaLoader: "+e+" does not exist.")}}}function v(e,t){var r=t.getAttribute("name"),n=a.joints[e];s.traverse((function(i){i.name===r&&(u[e]={object:i,transforms:ye(t),joint:n,position:n.zeroPosition})}))}}();var Be=function(e){return Le(s(r(e,"instance_visual_scene")[0].getAttribute("url")))}(r(Ie,"scene")[0]);return"Z_UP"===He.upAxis&&(Be.rotation.x=-Math.PI/2),Be.scale.multiplyScalar(He.unit),n.timeEnd("THREE.ColladaLoader"),{animations:Ne,kinematics:Ue,library:Fe,scene:Be}}}},1092:(e,t,r)=>{var n=r(5108);THREE.DDSLoader=function(){this._parser=THREE.DDSLoader.parse},THREE.DDSLoader.prototype=Object.create(THREE.CompressedTextureLoader.prototype),THREE.DDSLoader.prototype.constructor=THREE.DDSLoader,THREE.DDSLoader.parse=function(e,t){var r={mipmaps:[],width:0,height:0,format:null,mipmapCount:1};function i(e){return e.charCodeAt(0)+(e.charCodeAt(1)<<8)+(e.charCodeAt(2)<<16)+(e.charCodeAt(3)<<24)}function a(e,t,r,n){for(var i=r*n*4,a=new Uint8Array(e,t,i),o=new Uint8Array(i),s=0,l=0,u=0;u<n;u++)for(var c=0;c<r;c++){var h=a[l],d=a[++l],f=a[++l],p=a[++l];l++,o[s]=f,o[++s]=d,o[++s]=h,o[++s]=p,s++}return o}var o,s=i("DXT1"),l=i("DXT3"),u=i("DXT5"),c=i("ETC1"),h=new Int32Array(e,0,31);if(542327876!==h[0])return n.error("THREE.DDSLoader.parse: Invalid magic number in DDS header."),r;if(4&!h[20])return n.error("THREE.DDSLoader.parse: Unsupported format, must contain a FourCC code."),r;var d,f=h[21],p=!1;switch(f){case s:o=8,r.format=THREE.RGB_S3TC_DXT1_Format;break;case l:o=16,r.format=THREE.RGBA_S3TC_DXT3_Format;break;case u:o=16,r.format=THREE.RGBA_S3TC_DXT5_Format;break;case c:o=8,r.format=THREE.RGB_ETC1_Format;break;default:if(!(32===h[22]&&16711680&h[23]&&65280&h[24]&&255&h[25]&&4278190080&h[26]))return n.error("THREE.DDSLoader.parse: Unsupported FourCC code ",(d=f,String.fromCharCode(255&d,d>>8&255,d>>16&255,d>>24&255))),r;p=!0,o=64,r.format=THREE.RGBAFormat}r.mipmapCount=1,131072&h[2]&&!1!==t&&(r.mipmapCount=Math.max(1,h[7]));var m=h[28];if(r.isCubemap=!!(512&m),r.isCubemap&&(!(1024&m)||!(2048&m)||!(4096&m)||!(8192&m)||!(16384&m)||!(32768&m)))return n.error("THREE.DDSLoader.parse: Incomplete cubemap faces"),r;r.width=h[4],r.height=h[3];for(var g=h[1]+4,v=r.isCubemap?6:1,y=0;y<v;y++)for(var b=r.width,E=r.height,x=0;x<r.mipmapCount;x++){if(p)var w=(T=a(e,g,b,E)).length;else{w=Math.max(4,b)/4*Math.max(4,E)/4*o;var T=new Uint8Array(e,g,w)}var _={data:T,width:b,height:E};r.mipmaps.push(_),g+=w,b=Math.max(b>>1,1),E=Math.max(E>>1,1)}return r}},7006:(e,t,r)=>{var n=r(5108);!function(){function e(e){var t,r=e.properties.Content,i=e.properties.RelativeFilename||e.properties.Filename,a=i.slice(i.lastIndexOf(".")+1).toLowerCase();switch(a){case"bmp":t="image/bmp";break;case"jpg":case"jpeg":t="image/jpeg";break;case"png":t="image/png";break;case"tif":t="image/tiff";break;default:return void n.warn('FBXLoader: Image type "'+a+'" is not supported.')}if("string"==typeof r)return"data:"+t+";base64,"+r;var o=new Uint8Array(r);return window.URL.createObjectURL(new Blob([o],{type:t}))}function t(e,t,r,n){var i=function(e,t,r,n){var i,a=e.properties.FileName,o=e.properties.RelativeFilename,s=n.get(e.id).children;if(void 0!==s&&s.length>0&&r.has(s[0].ID))i=r.get(s[0].ID);else if(void 0!==o&&"/"!==o[0]&&null===o.match(/^[a-zA-Z]:/))i=o;else{var l=a.split(/[\\\/]/);i=l.length>0?l[l.length-1]:a}var u=t.path;0!==i.indexOf("blob:")&&0!==i.indexOf("data:")||t.setPath(void 0);var c=t.load(i);return t.setPath(u),c}(e,t,r,n);i.ID=e.id,i.name=e.attrName;var a=e.properties.WrapModeU,o=e.properties.WrapModeV,s=void 0!==a?a.value:0,l=void 0!==o?o.value:0;if(i.wrapS=0===s?THREE.RepeatWrapping:THREE.ClampToEdgeWrapping,i.wrapT=0===l?THREE.RepeatWrapping:THREE.ClampToEdgeWrapping,"Scaling"in e.properties){var u=e.properties.Scaling.value;i.repeat.x=u[0],i.repeat.y=u[1]}return i}function r(e,t,r,a){var o=t.id,s=t.attrName,l=t.properties.ShadingModel;if("object"==typeof l&&(l=l.value),!a.has(o))return null;var u,c=function(e,t,r,a,o){var s={};t.BumpFactor&&(s.bumpScale=t.BumpFactor.value);t.Diffuse&&(s.color=A(t.Diffuse));t.DisplacementFactor&&(s.displacementScale=t.DisplacementFactor.value);t.ReflectionFactor&&(s.reflectivity=t.ReflectionFactor.value);t.Specular&&(s.specular=A(t.Specular));t.Shininess&&(s.shininess=t.Shininess.value);t.Emissive&&(s.emissive=A(t.Emissive));t.EmissiveFactor&&(s.emissiveIntensity=parseFloat(t.EmissiveFactor.value));t.Opacity&&(s.opacity=parseFloat(t.Opacity.value));s.opacity<1&&(s.transparent=!0);return o.get(a).children.forEach((function(t){var a=t.relationship;switch(a){case"Bump":s.bumpMap=r.get(t.ID);break;case"DiffuseColor":s.map=i(e,r,t.ID,o);break;case"DisplacementColor":s.displacementMap=i(e,r,t.ID,o);break;case"EmissiveColor":s.emissiveMap=i(e,r,t.ID,o);break;case"NormalMap":s.normalMap=i(e,r,t.ID,o);break;case"ReflectionColor":s.envMap=i(e,r,t.ID,o),s.envMap.mapping=THREE.EquirectangularReflectionMapping;break;case"SpecularColor":s.specularMap=i(e,r,t.ID,o);break;case"TransparentColor":s.alphaMap=i(e,r,t.ID,o),s.transparent=!0;break;default:n.warn("THREE.FBXLoader: %s map is not supported in three.js, skipping texture.",a)}})),s}(e,t.properties,r,o,a);switch(l.toLowerCase()){case"phong":u=new THREE.MeshPhongMaterial;break;case"lambert":u=new THREE.MeshLambertMaterial;break;default:n.warn('THREE.FBXLoader: unknown material type "%s". Defaulting to MeshPhongMaterial.',l),u=new THREE.MeshPhongMaterial({color:3342591})}return u.setValues(c),u.name=s,u}function i(e,t,r,i){return"LayeredTexture"in e.Objects.subNodes&&r in e.Objects.subNodes.LayeredTexture&&(n.warn("THREE.FBXLoader: layered textures are not supported in three.js. Discarding all but first layer."),r=i.get(r).children[0].ID),t.get(r)}function a(e,t){var r=[];return e.children.forEach((function(e){var n=t[e.ID];if("Cluster"===n.attrType){var i={ID:e.ID,indices:[],weights:[],transform:(new THREE.Matrix4).fromArray(n.subNodes.Transform.properties.a),transformLink:(new THREE.Matrix4).fromArray(n.subNodes.TransformLink.properties.a)};"Indexes"in n.subNodes&&(i.indices=n.subNodes.Indexes.properties.a,i.weights=n.subNodes.Weights.properties.a),r.push(i)}})),{rawBones:r,bones:[]}}function o(e,t,r,i){switch(r.attrType){case"Mesh":return function(e,t,r,i){var a=t.parents.map((function(t){return e.Objects.subNodes.Model[t.ID]}));if(0===a.length)return;var o=t.children.reduce((function(e,t){return void 0!==i[t.ID]&&(e=i[t.ID]),e}),null),l=new THREE.Matrix4,u=a[0];if("GeometricRotation"in u.properties){var h=u.properties.GeometricRotation.value.map(THREE.Math.degToRad);h[3]="ZYX",l.makeRotationFromEuler((new THREE.Euler).fromArray(h))}"GeometricTranslation"in u.properties&&l.setPosition((new THREE.Vector3).fromArray(u.properties.GeometricTranslation.value));return function(e,t,r,i,a){var o=r.subNodes,l=o.Vertices.properties.a,u=o.PolygonVertexIndex.properties.a,h=[],d=[],f=[],p=[],m=[],g=[],v=[];if(o.LayerElementColor)var y=function(e){var t=e.properties.MappingInformationType,r=e.properties.ReferenceInformationType,n=e.subNodes.Colors.properties.a,i=[];"IndexToDirect"===r&&(i=e.subNodes.ColorIndex.properties.a);return{dataSize:4,buffer:n,indices:i,mappingType:t,referenceType:r}}(o.LayerElementColor[0]);if(o.LayerElementMaterial)var b=function(e){var t=e.properties.MappingInformationType,r=e.properties.ReferenceInformationType;if("NoMappingInformation"===t)return{dataSize:1,buffer:[0],indices:[0],mappingType:"AllSame",referenceType:r};for(var n=e.subNodes.Materials.properties.a,i=[],a=0;a<n.length;++a)i.push(a);return{dataSize:1,buffer:n,indices:i,mappingType:t,referenceType:r}}(o.LayerElementMaterial[0]);if(o.LayerElementNormal)var E=function(e){var t=e.properties.MappingInformationType,r=e.properties.ReferenceInformationType,n=e.subNodes.Normals.properties.a,i=[];"IndexToDirect"===r&&("NormalIndex"in e.subNodes?i=e.subNodes.NormalIndex.properties.a:"NormalsIndex"in e.subNodes&&(i=e.subNodes.NormalsIndex.properties.a));return{dataSize:3,buffer:n,indices:i,mappingType:t,referenceType:r}}(o.LayerElementNormal[0]);if(o.LayerElementUV)for(var x=[],w=0;o.LayerElementUV[w];)x.push(s(o.LayerElementUV[w])),w++;var T={};null!==i&&i.rawBones.forEach((function(e,t){e.indices.forEach((function(r,n){void 0===T[r]&&(T[r]=[]),T[r].push({id:t,weight:e.weights[n]})}))}));var _=0,S=0,M=!1,R=[],A=[],C=[],L=[],O=[],I=[];u.forEach((function(e,t){var r=!1;e<0&&(e^=-1,u[t]=e,r=!0);var a=[],o=[];if(R.push(3*e,3*e+1,3*e+2),y){var s=c(t,_,e,y);C.push(s[0],s[1],s[2])}if(i){if(void 0!==T[e]&&T[e].forEach((function(e){o.push(e.weight),a.push(e.id)})),o.length>4){M||(n.warn("THREE.FBXLoader: Vertex has more than 4 skinning weights assigned to vertex. Deleting additional weights."),M=!0);var w=[0,0,0,0],P=[0,0,0,0];o.forEach((function(e,t){var r=e,n=a[t];P.forEach((function(e,t,i){if(r>e){i[t]=r,r=e;var a=w[t];w[t]=n,n=a}}))})),a=w,o=P}for(;o.length<4;)o.push(0),a.push(0);for(var H=0;H<4;++H)O.push(o[H]),I.push(a[H])}if(E){s=c(t,_,e,E);A.push(s[0],s[1],s[2])}if(b&&"AllSame"!==b.mappingType)var k=c(t,_,e,b)[0];if(x&&x.forEach((function(r,n){var i=c(t,_,e,r);void 0===L[n]&&(L[n]=[]),L[n].push(i[0]),L[n].push(i[1])})),S++,r){for(H=2;H<S;H++)h.push(l[R[0]]),h.push(l[R[1]]),h.push(l[R[2]]),h.push(l[R[3*(H-1)]]),h.push(l[R[3*(H-1)+1]]),h.push(l[R[3*(H-1)+2]]),h.push(l[R[3*H]]),h.push(l[R[3*H+1]]),h.push(l[R[3*H+2]]),i&&(g.push(O[0]),g.push(O[1]),g.push(O[2]),g.push(O[3]),g.push(O[4*(H-1)]),g.push(O[4*(H-1)+1]),g.push(O[4*(H-1)+2]),g.push(O[4*(H-1)+3]),g.push(O[4*H]),g.push(O[4*H+1]),g.push(O[4*H+2]),g.push(O[4*H+3]),v.push(I[0]),v.push(I[1]),v.push(I[2]),v.push(I[3]),v.push(I[4*(H-1)]),v.push(I[4*(H-1)+1]),v.push(I[4*(H-1)+2]),v.push(I[4*(H-1)+3]),v.push(I[4*H]),v.push(I[4*H+1]),v.push(I[4*H+2]),v.push(I[4*H+3])),y&&(f.push(C[0]),f.push(C[1]),f.push(C[2]),f.push(C[3*(H-1)]),f.push(C[3*(H-1)+1]),f.push(C[3*(H-1)+2]),f.push(C[3*H]),f.push(C[3*H+1]),f.push(C[3*H+2])),b&&"AllSame"!==b.mappingType&&(m.push(k),m.push(k),m.push(k)),E&&(d.push(A[0]),d.push(A[1]),d.push(A[2]),d.push(A[3*(H-1)]),d.push(A[3*(H-1)+1]),d.push(A[3*(H-1)+2]),d.push(A[3*H]),d.push(A[3*H+1]),d.push(A[3*H+2])),x&&x.forEach((function(e,t){void 0===p[t]&&(p[t]=[]),p[t].push(L[t][0]),p[t].push(L[t][1]),p[t].push(L[t][2*(H-1)]),p[t].push(L[t][2*(H-1)+1]),p[t].push(L[t][2*H]),p[t].push(L[t][2*H+1])}));_++,r=!1,S=0,R=[],A=[],C=[],L=[],O=[],I=[]}}));var P=new THREE.BufferGeometry;P.name=r.name;var H=new THREE.Float32BufferAttribute(h,3);a.applyToBufferAttribute(H),P.addAttribute("position",H),f.length>0&&P.addAttribute("color",new THREE.Float32BufferAttribute(f,3));i&&(P.addAttribute("skinIndex",new THREE.Float32BufferAttribute(v,4)),P.addAttribute("skinWeight",new THREE.Float32BufferAttribute(g,4)),P.FBX_Deformer=i);d.length>0&&P.addAttribute("normal",new THREE.Float32BufferAttribute(d,3));if(p.forEach((function(e,t){var r="uv"+(t+1).toString();0===t&&(r="uv"),P.addAttribute(r,new THREE.Float32BufferAttribute(p[t],2))})),b&&"AllSame"!==b.mappingType){var k=m[0],N=0;if(m.forEach((function(e,t){e!==k&&(P.addGroup(N,t-N,k),k=e,N=t)})),P.groups.length>0){var U=P.groups[P.groups.length-1],D=U.start+U.count;D!==m.length&&P.addGroup(D,m.length-D,k)}0===P.groups.length&&P.addGroup(0,m.length,m[0])}return P}(0,0,r,o,l)}(e,t,r,i);case"NurbsCurve":return function(e){if(void 0===THREE.NURBSCurve)return n.error("THREE.FBXLoader: The loader relies on THREE.NURBSCurve for any nurbs present in the model. Nurbs will show up as empty geometry."),new THREE.BufferGeometry;var t=parseInt(e.properties.Order);if(isNaN(t))return n.error("THREE.FBXLoader: Invalid Order %s given for geometry ID: %s",e.properties.Order,e.id),new THREE.BufferGeometry;for(var r,i,a=t-1,o=e.subNodes.KnotVector.properties.a,s=[],l=e.subNodes.Points.properties.a,u=0,c=l.length;u<c;u+=4)s.push((new THREE.Vector4).fromArray(l,u));if("Closed"===e.properties.Form)s.push(s[0]);else if("Periodic"===e.properties.Form){r=a,i=o.length-1-r;for(u=0;u<a;++u)s.push(s[u])}var h=new THREE.NURBSCurve(a,o,s,r,i).getPoints(7*s.length),d=new Float32Array(3*h.length);h.forEach((function(e,t){e.toArray(d,3*t)}));var f=new THREE.BufferGeometry;return f.addAttribute("position",new THREE.BufferAttribute(d,3)),f}(r)}}function s(e){var t=e.properties.MappingInformationType,r=e.properties.ReferenceInformationType,n=e.subNodes.UV.properties.a,i=[];return"IndexToDirect"===r&&(i=e.subNodes.UVIndex.properties.a),{dataSize:2,buffer:n,indices:i,mappingType:t,referenceType:r}}THREE.FBXLoader=function(e){this.manager=void 0!==e?e:THREE.DefaultLoadingManager},Object.assign(THREE.FBXLoader.prototype,{load:function(e,t,r,n){var i=this,a=THREE.LoaderUtils.extractUrlBase(e),o=new THREE.FileLoader(this.manager);o.setResponseType("arraybuffer"),o.load(e,(function(r){try{var o=i.parse(r,a);t(o)}catch(t){window.setTimeout((function(){n&&n(t),i.manager.itemError(e)}),0)}}),r,n)},parse:function(i,s){var l,u,c;if(c="Kaydara FBX Binary  \0",(u=i).byteLength>=c.length&&c===C(u,0,c.length))l=(new w).parse(i);else{var y=C(i);if(!function(e){var t=["K","a","y","d","a","r","a","\\","F","B","X","\\","B","i","n","a","r","y","\\","\\"],r=0;function n(t){var n=e[t-1];return e=e.slice(r+t),r++,n}for(var i=0;i<t.length;++i){if(n(1)===t[i])return!1}return!0}(y))throw new Error("THREE.FBXLoader: Unknown format.");if(S(y)<7e3)throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+S(y));l=(new x).parse(y)}var b=function(e){var t=new Map;if("Connections"in e){e.Connections.properties.connections.forEach((function(e){var r=e[0],n=e[1],i=e[2];t.has(r)||t.set(r,{parents:[],children:[]});var a={ID:n,relationship:i};t.get(r).parents.push(a),t.has(n)||t.set(n,{parents:[],children:[]});var o={ID:r,relationship:i};t.get(n).children.push(o)}))}return t}(l),E=function(t){var r=new Map,n={},i=[];if("Video"in t.Objects.subNodes){var a=t.Objects.subNodes.Video;for(var o in a){var s=a[o],l=parseInt(o);if(s.properties.fileName in n&&i.push([l,n[s.properties.fileName]]),n[s.properties.fileName]=l,"Content"in s.properties&&""!==s.properties.Content){var u=e(a[o]);r.set(l,u)}}}return i.forEach((function(e){if(r.has(e[0])&&!r.has(e[1])){var t=r.get(e[0]);r.set(e[1],t)}else if(r.has(e[1])&&!r.has(e[0])){t=r.get(e[1]);r.set(e[0],t)}})),r}(l),T=function(e,r,n,i){var a=new Map;if("Texture"in e.Objects.subNodes){var o=e.Objects.subNodes.Texture;for(var s in o){var l=t(o[s],r,n,i);a.set(parseInt(s),l)}}return a}(l,new THREE.TextureLoader(this.manager).setPath(s),E,b),_=function(e,t,n){var i=new Map;if("Material"in e.Objects.subNodes){var a=e.Objects.subNodes.Material;for(var o in a){var s=r(e,a[o],t,n);null!==s&&i.set(parseInt(o),s)}}return i}(l,T,b),R=function(e,t){var r={};if("Deformer"in e.Objects.subNodes){var i=e.Objects.subNodes.Deformer;for(var o in i){if("Skin"===i[o].attrType){var s=t.get(parseInt(o)),l=a(s,i);l.ID=o,s.parents.length>1&&n.warn("THREE.FBXLoader: skeleton attached to more than one geometry is not supported."),l.geometryID=s.parents[0].ID,r[o]=l}}}return r}(l,b),A=function(e,t,r){var n=new Map;if("Geometry"in e.Objects.subNodes){var i=e.Objects.subNodes.Geometry;for(var a in i){var s=o(e,t.get(parseInt(a)),i[a],r);n.set(parseInt(a),s)}}return n}(l,b,R),L=function(e,t,r,i,a){var o=new THREE.Group,s=function(e,t,r,n,i){var a=new Map,o=e.Objects.subNodes.Model;for(var s in o){var l=parseInt(s),u=o[s],c=i.get(l),v=h(c,t,l,u.attrName);if(!v){switch(u.attrType){case"Camera":v=d(e,c);break;case"Light":v=f(e,c);break;case"Mesh":v=p(e,c,r,n);break;case"NurbsCurve":v=m(c,r);break;default:v=new THREE.Group}v.name=THREE.PropertyBinding.sanitizeNodeName(u.attrName),v.ID=l}g(e,v,u),a.set(l,v)}return a}(e,r,i,a,t),l=e.Objects.subNodes.Model;return s.forEach((function(r){var n=l[r.ID];!function(e,t,r,n,i){if("LookAtProperty"in r.properties){n.get(t.ID).children.forEach((function(r){if("LookAtProperty"===r.relationship){var n=e.Objects.subNodes.Model[r.ID];if("Lcl_Translation"in n.properties){var a=n.properties.Lcl_Translation.value;void 0!==t.target?(t.target.position.fromArray(a),i.add(t.target)):t.lookAt((new THREE.Vector3).fromArray(a))}}}))}}(e,r,n,t,o),t.get(r.ID).parents.forEach((function(e){var t=s.get(e.ID);void 0!==t&&t.add(r)})),null===r.parent&&o.add(r)})),function(e,t,r,n,i,a){a.updateMatrixWorld(!0);var o=new Map;if("Pose"in e.Objects.subNodes){var s=e.Objects.subNodes.Pose;for(var l in s)if("BindPose"===s[l].attrType){var u=s[l].subNodes.PoseNode;if(Array.isArray(u))u.forEach((function(e){var t=(new THREE.Matrix4).fromArray(e.subNodes.Matrix.properties.a);o.set(parseInt(e.properties.Node),t)}));else{var c=(new THREE.Matrix4).fromArray(u.subNodes.Matrix.properties.a);o.set(parseInt(u.properties.Node),c)}}}for(var h in t){var d=t[h];d.bones.forEach((function(e,t){if(o.has(e.ID)){var r=o.get(e.ID);e.matrixWorld.copy(r)}else e.matrixWorld.copy(d.rawBones[t].transformLink)})),i.get(parseInt(d.ID)).parents.forEach((function(e){if(r.has(e.ID)){var t=e.ID;i.get(t).parents.forEach((function(e){if(n.has(e.ID)){var t=n.get(e.ID);t.bind(new THREE.Skeleton(d.bones),t.matrixWorld)}}))}}))}a.updateMatrixWorld(!0)}(e,r,i,s,t,o),function(e,t,r){r.animations=[];var i=function(e,t){if(void 0===e.Objects.subNodes.AnimationCurve)return;var r=function(e){var t=e.Objects.subNodes.AnimationCurveNode,r=new Map;for(var n in t){var i=t[n];if(null!==i.attrName.match(/S|R|T/))var a={id:i.id,attr:i.attrName,curves:{}};r.set(a.id,a)}return r}(e);!function(e,t,r){var n=e.Objects.subNodes.AnimationCurve;for(var i in n){var a={id:n[i].id,times:n[i].subNodes.KeyTime.properties.a.map(M),values:n[i].subNodes.KeyValueFloat.properties.a},o=t.get(a.id);if(void 0!==o){var s=o.parents[0].ID,l=o.parents[0].relationship,u="";if(l.match(/X/))u="x";else if(l.match(/Y/))u="y";else{if(!l.match(/Z/))continue;u="z"}r.get(s).curves[u]=a}}}(e,t,r);var i=function(e,t,r){var n=e.Objects.subNodes.AnimationLayer,i=new Map;for(var a in n){var o=[],s=t.get(parseInt(a));if(void 0!==s)s.children.forEach((function(n,i){if(r.has(n.ID)){var a=r.get(n.ID);if(void 0===o[i]){var s;t.get(n.ID).parents.forEach((function(e){void 0!==e.relationship&&(s=e.ID)}));var l=e.Objects.subNodes.Model[s.toString()],u={modelName:THREE.PropertyBinding.sanitizeNodeName(l.attrName),initialPosition:[0,0,0],initialRotation:[0,0,0],initialScale:[1,1,1]};"Lcl_Translation"in l.properties&&(u.initialPosition=l.properties.Lcl_Translation.value),"Lcl_Rotation"in l.properties&&(u.initialRotation=l.properties.Lcl_Rotation.value),"Lcl_Scaling"in l.properties&&(u.initialScale=l.properties.Lcl_Scaling.value),"PreRotation"in l.properties&&(u.preRotations=l.properties.PreRotation.value),o[i]=u}o[i][a.attr]=a}})),i.set(parseInt(a),o)}return i}(e,t,r),a=function(e,t,r){var i=e.Objects.subNodes.AnimationStack,a={};for(var o in i){var s=t.get(parseInt(o)).children;s.length>1&&n.warn("THREE.FBXLoader: Encountered an animation stack with multiple layers, this is currently not supported. Ignoring subsequent layers.");var l=r.get(s[0].ID);a[o]={name:i[o].attrName,layer:l}}return a}(e,t,i);return a}(e,t);if(void 0===i)return;for(var a in i){var o=v(i[a]);r.animations.push(o)}}(e,t,o),function(e,t){if("GlobalSettings"in e&&"AmbientColor"in e.GlobalSettings.properties){var r=e.GlobalSettings.properties.AmbientColor.value,n=r[0],i=r[1],a=r[2];if(0!==n||0!==i||0!==a){var o=new THREE.Color(n,i,a);t.add(new THREE.AmbientLight(o,1))}}}(e,o),o}(l,b,R,A,_);return L}});var l=[],u={ByPolygonVertex:{Direct:function(e,t,r,n){var i=e*n.dataSize,a=e*n.dataSize+n.dataSize;return L(l,n.buffer,i,a)},IndexToDirect:function(e,t,r,n){var i=n.indices[e],a=i*n.dataSize,o=i*n.dataSize+n.dataSize;return L(l,n.buffer,a,o)}},ByPolygon:{Direct:function(e,t,r,n){var i=t*n.dataSize,a=t*n.dataSize+n.dataSize;return L(l,n.buffer,i,a)},IndexToDirect:function(e,t,r,n){var i=n.indices[t],a=i*n.dataSize,o=i*n.dataSize+n.dataSize;return L(l,n.buffer,a,o)}},ByVertice:{Direct:function(e,t,r,n){var i=r*n.dataSize,a=r*n.dataSize+n.dataSize;return L(l,n.buffer,i,a)}},AllSame:{IndexToDirect:function(e,t,r,n){var i=n.indices[0]*n.dataSize,a=n.indices[0]*n.dataSize+n.dataSize;return L(l,n.buffer,i,a)}}};function c(e,t,r,n){return u[n.mappingType][n.referenceType](e,t,r,n)}function h(e,t,r,n){var i=null;return e.parents.forEach((function(e){for(var a in t){var o=t[a];o.rawBones.forEach((function(t,a){if(t.ID===e.ID){var s=i;(i=new THREE.Bone).name=THREE.PropertyBinding.sanitizeNodeName(n),i.ID=r,o.bones[a]=i,null!==s&&i.add(s)}}))}})),i}function d(e,t){var r,i;if(t.children.forEach((function(t){var r=e.Objects.subNodes.NodeAttribute[t.ID];void 0!==r&&void 0!==r.properties&&(i=r.properties)})),void 0===i)r=new THREE.Object3D;else{var a=0;void 0!==i.CameraProjectionType&&1===i.CameraProjectionType.value&&(a=1);var o=1;void 0!==i.NearPlane&&(o=i.NearPlane.value/1e3);var s=1e3;void 0!==i.FarPlane&&(s=i.FarPlane.value/1e3);var l=window.innerWidth,u=window.innerHeight;void 0!==i.AspectWidth&&void 0!==i.AspectHeight&&(l=i.AspectWidth.value,u=i.AspectHeight.value);var c=l/u,h=45;switch(void 0!==i.FieldOfView&&(h=i.FieldOfView.value),a){case 0:r=new THREE.PerspectiveCamera(h,c,o,s);break;case 1:r=new THREE.OrthographicCamera(-l/2,l/2,u/2,-u/2,o,s);break;default:n.warn("THREE.FBXLoader: Unknown camera type "+a+"."),r=new THREE.Object3D}}return r}function f(e,t){var r,i;if(t.children.forEach((function(t){var r=e.Objects.subNodes.NodeAttribute[t.ID];void 0!==r&&void 0!==r.properties&&(i=r.properties)})),void 0===i)r=new THREE.Object3D;else{var a;a=void 0===i.LightType?0:i.LightType.value;var o=16777215;void 0!==i.Color&&(o=A(i.Color));var s=void 0===i.Intensity?1:i.Intensity.value/100;void 0!==i.CastLightOnObject&&0===i.CastLightOnObject.value&&(s=0);var l=0;void 0!==i.FarAttenuationEnd&&(l=void 0!==i.EnableFarAttenuation&&0===i.EnableFarAttenuation.value?0:i.FarAttenuationEnd.value/1e3);switch(a){case 0:r=new THREE.PointLight(o,s,l,1);break;case 1:r=new THREE.DirectionalLight(o,s);break;case 2:var u=Math.PI/3;void 0!==i.InnerAngle&&(u=THREE.Math.degToRad(i.InnerAngle.value));var c=0;void 0!==i.OuterAngle&&(c=THREE.Math.degToRad(i.OuterAngle.value),c=Math.max(c,1)),r=new THREE.SpotLight(o,s,l,u,c,1);break;default:n.warn("THREE.FBXLoader: Unknown light type "+i.LightType.value+", defaulting to a THREE.PointLight."),r=new THREE.PointLight(o,s)}void 0!==i.CastShadows&&1===i.CastShadows.value&&(r.castShadow=!0)}return r}function p(e,t,r,n){var i,a=null,o=null,s=[];return t.children.forEach((function(e){r.has(e.ID)&&(a=r.get(e.ID)),n.has(e.ID)&&s.push(n.get(e.ID))})),s.length>1?o=s:s.length>0?o=s[0]:(o=new THREE.MeshPhongMaterial({color:13421772}),s.push(o)),"color"in a.attributes&&s.forEach((function(e){e.vertexColors=THREE.VertexColors})),a.FBX_Deformer?(s.forEach((function(e){e.skinning=!0})),i=new THREE.SkinnedMesh(a,o)):i=new THREE.Mesh(a,o),i}function m(e,t){var r=e.children.reduce((function(e,r){return t.has(r.ID)&&(e=t.get(r.ID)),e}),null),n=new THREE.LineBasicMaterial({color:3342591,linewidth:1});return new THREE.Line(r,n)}function g(e,t,r){if("RotationOrder"in r.properties){var i=parseInt(r.properties.RotationOrder.value,10);i>0&&i<6?n.warn("THREE.FBXLoader: unsupported Euler Order: %s. Currently only XYZ order is supported. Animations and rotations may be incorrect.",["XYZ","XZY","YZX","ZXY","YXZ","ZYX","SphericXYZ"][i]):6===i&&n.warn("THREE.FBXLoader: unsupported Euler Order: Spherical XYZ. Animations and rotations may be incorrect.")}if("Lcl_Translation"in r.properties&&t.position.fromArray(r.properties.Lcl_Translation.value),"Lcl_Rotation"in r.properties){var a=r.properties.Lcl_Rotation.value.map(THREE.Math.degToRad);a.push("ZYX"),t.rotation.fromArray(a)}if("Lcl_Scaling"in r.properties&&t.scale.fromArray(r.properties.Lcl_Scaling.value),"PreRotation"in r.properties){var o=r.properties.PreRotation.value.map(THREE.Math.degToRad);o[3]="ZYX";var s=(new THREE.Euler).fromArray(o);s=(new THREE.Quaternion).setFromEuler(s);var l=(new THREE.Quaternion).setFromEuler(t.rotation);s.multiply(l),t.rotation.setFromQuaternion(s,"ZYX")}}function v(e){var t=[];return e.layer.forEach((function(e){t=t.concat(function(e){var t=[];if(void 0!==e.T){var r=y(e.modelName,e.T.curves,e.initialPosition,"position");void 0!==r&&t.push(r)}if(void 0!==e.R){var n=function(e,t,r,n){void 0!==t.x&&(t.x.values=t.x.values.map(THREE.Math.degToRad));void 0!==t.y&&(t.y.values=t.y.values.map(THREE.Math.degToRad));void 0!==t.z&&(t.z.values=t.z.values.map(THREE.Math.degToRad));var i=E(t),a=b(i,t,r);void 0!==n&&((n=n.map(THREE.Math.degToRad)).push("ZYX"),n=(new THREE.Euler).fromArray(n),n=(new THREE.Quaternion).setFromEuler(n));for(var o=new THREE.Quaternion,s=new THREE.Euler,l=[],u=0;u<a.length;u+=3)s.set(a[u],a[u+1],a[u+2],"ZYX"),o.setFromEuler(s),void 0!==n&&o.premultiply(n),o.toArray(l,u/3*4);return new THREE.QuaternionKeyframeTrack(e+".quaternion",i,l)}(e.modelName,e.R.curves,e.initialRotation,e.preRotations);void 0!==n&&t.push(n)}if(void 0!==e.S){var i=y(e.modelName,e.S.curves,e.initialScale,"scale");void 0!==i&&t.push(i)}return t}(e))})),new THREE.AnimationClip(e.name,-1,t)}function y(e,t,r,n){var i=E(t),a=b(i,t,r);return new THREE.VectorKeyframeTrack(e+"."+n,i,a)}function b(e,t,r){var n=r,i=[],a=-1,o=-1,s=-1;return e.forEach((function(e){if(t.x&&(a=t.x.times.indexOf(e)),t.y&&(o=t.y.times.indexOf(e)),t.z&&(s=t.z.times.indexOf(e)),-1!==a){var r=t.x.values[a];i.push(r),n[0]=r}else i.push(n[0]);if(-1!==o){var l=t.y.values[o];i.push(l),n[1]=l}else i.push(n[1]);if(-1!==s){var u=t.z.values[s];i.push(u),n[2]=u}else i.push(n[2])})),i}function E(e){var t=[];return void 0!==e.x&&(t=t.concat(e.x.times)),void 0!==e.y&&(t=t.concat(e.y.times)),void 0!==e.z&&(t=t.concat(e.z.times)),t=t.sort((function(e,t){return e-t})).filter((function(e,t,r){return r.indexOf(e)==t}))}function x(){}function w(){}function T(e,t){this.dv=new DataView(e),this.offset=0,this.littleEndian=void 0===t||t}function _(){}function S(e){var t=e.match(/FBXVersion: (\d+)/);if(t)return parseInt(t[1]);throw new Error("THREE.FBXLoader: Cannot find the version number for the file given.")}function M(e){return e/46186158e3}function R(e){return e.split(",").map((function(e){return parseFloat(e)}))}function A(e){var t=new THREE.Color;return"Color"===e.type?t.setScalar(e.value):t.fromArray(e.value)}function C(e,t,r){return void 0===t&&(t=0),void 0===r&&(r=e.byteLength),THREE.LoaderUtils.decodeText(new Uint8Array(e,t,r))}function L(e,t,r,n){for(var i=r,a=0;i<n;i++,a++)e[a]=t[i];return e}Object.assign(x.prototype,{getPrevNode:function(){return this.nodeStack[this.currentIndent-2]},getCurrentNode:function(){return this.nodeStack[this.currentIndent-1]},getCurrentProp:function(){return this.currentProp},pushStack:function(e){this.nodeStack.push(e),this.currentIndent+=1},popStack:function(){this.nodeStack.pop(),this.currentIndent-=1},setCurrentProp:function(e,t){this.currentProp=e,this.currentPropName=t},parse:function(e){this.currentIndent=0,this.allNodes=new _,this.nodeStack=[],this.currentProp=[],this.currentPropName="";var t=this,r=e.split("\n");return r.forEach((function(e,n){var i=e.match(/^[\s\t]*;/),a=e.match(/^[\s\t]*$/);if(!i&&!a){var o=e.match("^\\t{"+t.currentIndent+"}(\\w+):(.*){",""),s=e.match("^\\t{"+t.currentIndent+"}(\\w+):[\\s\\t\\r\\n](.*)"),l=e.match("^\\t{"+(t.currentIndent-1)+"}}");o?t.parseNodeBegin(e,o):s?t.parseNodeProperty(e,s,r[++n]):l?t.nodeEnd():e.match(/^[^\s\t}]/)&&t.parseNodePropertyContinued(e)}})),this.allNodes},parseNodeBegin:function(e,t){var r=t[1].trim().replace(/^"/,"").replace(/"$/,""),n=t[2].split(",").map((function(e){return e.trim().replace(/^"/,"").replace(/"$/,"")})),i={name:r,properties:{},subNodes:{}},a=this.parseNodeAttr(n),o=this.getCurrentNode();if(0===this.currentIndent)this.allNodes.add(r,i);else if(r in o.subNodes){var s=o.subNodes[r];this.isFlattenNode(o.subNodes[r])&&(""===a.id?(o.subNodes[r]=[],o.subNodes[r].push(s)):(o.subNodes[r]={},o.subNodes[r][s.id]=s)),""===a.id?o.subNodes[r].push(i):o.subNodes[r][a.id]=i}else"number"==typeof a.id||a.id.match(/^\d+$/)?(o.subNodes[r]={},o.subNodes[r][a.id]=i):o.subNodes[r]=i;n&&(i.id=a.id,i.attrName=a.name,i.attrType=a.type),this.pushStack(i)},parseNodeAttr:function(e){var t=e[0];""!==e[0]&&(t=parseInt(e[0]),isNaN(t)&&(t=e[0]));var r="",n="";return e.length>1&&(r=e[1].replace(/^(\w+)::/,""),n=e[2]),{id:t,name:r,type:n}},parseNodeProperty:function(e,t,r){var n=t[1].replace(/^"/,"").replace(/"$/,"").trim(),i=t[2].replace(/^"/,"").replace(/"$/,"").trim();"Content"===n&&","===i&&(i=r.replace(/"/g,"").replace(/,$/,"").trim());var a=this.getCurrentNode(),o=a.name;if(void 0!==o&&o.match(/Properties(\d)+/))return void this.parseNodeSpecialProperty(e,n,i);if("C"===n){var s=i.split(",").slice(1),l=parseInt(s[0]),u=parseInt(s[1]),c=i.split(",").slice(3);n="connections",function(e,t){for(var r=0,n=e.length,i=t.length;r<i;r++,n++)e[n]=t[r]}(i=[l,u],c=c.map((function(e){return e.trim().replace(/^"/,"")}))),void 0===a.properties[n]&&(a.properties[n]=[])}if("Node"===n){var h=parseInt(i);a.properties.id=h,a.id=h}n in a.properties?Array.isArray(a.properties[n])?a.properties[n].push(i):a.properties[n]+=i:Array.isArray(a.properties[n])?a.properties[n].push(i):a.properties[n]=i,this.setCurrentProp(a.properties,n),"a"===n&&","!==i.slice(-1)&&(a.properties.a=R(i))},parseNodePropertyContinued:function(e){if(this.currentProp[this.currentPropName]+=e,","!==e.slice(-1)){var t=this.getCurrentNode();t.properties.a=R(t.properties.a)}},parseNodeSpecialProperty:function(e,t,r){var n=r.split('",').map((function(e){return e.trim().replace(/^\"/,"").replace(/\s/,"_")})),i=n[0],a=n[1],o=n[2],s=n[3],l=n[4];switch(a){case"int":case"enum":case"bool":case"ULongLong":l=parseInt(l);break;case"double":case"Number":case"FieldOfView":l=parseFloat(l);break;case"ColorRGB":case"Vector3D":case"Lcl_Translation":case"Lcl_Rotation":case"Lcl_Scaling":l=R(l)}this.getPrevNode().properties[i]={type:a,type2:o,flag:s,value:l},this.setCurrentProp(this.getPrevNode().properties,i)},nodeEnd:function(){this.popStack()},isFlattenNode:function(e){return"subNodes"in e&&"properties"in e}}),Object.assign(w.prototype,{parse:function(e){var t=new T(e);t.skip(23);var r=t.getUint32();n.log("THREE.FBXLoader: FBX binary version: "+r);for(var i=new _;!this.endOfContent(t);){var a=this.parseNode(t,r);null!==a&&i.add(a.name,a)}return i},endOfContent:function(e){return e.size()%16==0?(e.getOffset()+160+16&-16)>=e.size():e.getOffset()+160+16>=e.size()},parseNode:function(e,t){var r=t>=7500?e.getUint64():e.getUint32(),n=t>=7500?e.getUint64():e.getUint32(),i=(t>=7500?e.getUint64():e.getUint32(),e.getUint8()),a=e.getString(i);if(0===r)return null;for(var o=[],s=0;s<n;s++)o.push(this.parseProperty(e));var l=o.length>0?o[0]:"",u=o.length>1?o[1]:"",c=o.length>2?o[2]:"",h={},d={},f=!1;for(1===n&&e.getOffset()===r&&(f=!0);r>e.getOffset();){var p=this.parseNode(e,t);if(null!==p)if(!0!==p.singleProperty)if("Connections"!==a||"C"!==p.name){if("Properties70"!==p.name)if("Properties70"!==a||"P"!==p.name)void 0===h[p.name]?"number"==typeof p.id?(h[p.name]={},h[p.name][p.id]=p):h[p.name]=p:""===p.id?(Array.isArray(h[p.name])||(h[p.name]=[h[p.name]]),h[p.name].push(p)):void 0===h[p.name][p.id]?h[p.name][p.id]=p:(Array.isArray(h[p.name][p.id])||(h[p.name][p.id]=[h[p.name][p.id]]),h[p.name][p.id].push(p));else{var m,g=p.propertyList[0],v=p.propertyList[1],y=p.propertyList[2],b=p.propertyList[3];0===g.indexOf("Lcl ")&&(g=g.replace("Lcl ","Lcl_")),0===v.indexOf("Lcl ")&&(v=v.replace("Lcl ","Lcl_")),m="ColorRGB"===v||"Vector"===v||"Vector3D"===v||0===v.indexOf("Lcl_")?[p.propertyList[4],p.propertyList[5],p.propertyList[6]]:p.propertyList[4],d[g]={type:v,type2:y,flag:b,value:m}}else Object.keys(p.properties).forEach((function(e){d[e]=p.properties[e]}))}else{var E=[];p.propertyList.forEach((function(e,t){E[t-1]=e})),void 0===d.connections&&(d.connections=[]),d.connections.push(E)}else{var x=p.propertyList[0];Array.isArray(x)?(h[p.name]=p,p.properties.a=x):d[p.name]=x}}return{singleProperty:f,id:l,attrName:u,attrType:c,name:a,properties:d,propertyList:o,subNodes:h}},parseProperty:function(e){var t=e.getChar();switch(t){case"C":return e.getBoolean();case"D":return e.getFloat64();case"F":return e.getFloat32();case"I":return e.getInt32();case"L":return e.getInt64();case"R":var r=e.getUint32();return e.getArrayBuffer(r);case"S":r=e.getUint32();return e.getString(r);case"Y":return e.getInt16();case"b":case"c":case"d":case"f":case"i":case"l":var n=e.getUint32(),i=e.getUint32(),a=e.getUint32();if(0===i)switch(t){case"b":case"c":return e.getBooleanArray(n);case"d":return e.getFloat64Array(n);case"f":return e.getFloat32Array(n);case"i":return e.getInt32Array(n);case"l":return e.getInt64Array(n)}if(void 0===window.Zlib)throw new Error("THREE.FBXLoader: External library Inflate.min.js required, obtain or import from https://github.com/imaya/zlib.js");var o=new T(new Zlib.Inflate(new Uint8Array(e.getArrayBuffer(a))).decompress().buffer);switch(t){case"b":case"c":return o.getBooleanArray(n);case"d":return o.getFloat64Array(n);case"f":return o.getFloat32Array(n);case"i":return o.getInt32Array(n);case"l":return o.getInt64Array(n)}default:throw new Error("THREE.FBXLoader: Unknown property type "+t)}}}),Object.assign(T.prototype,{getOffset:function(){return this.offset},size:function(){return this.dv.buffer.byteLength},skip:function(e){this.offset+=e},getBoolean:function(){return 1==(1&this.getUint8())},getBooleanArray:function(e){for(var t=[],r=0;r<e;r++)t.push(this.getBoolean());return t},getInt8:function(){var e=this.dv.getInt8(this.offset);return this.offset+=1,e},getInt8Array:function(e){for(var t=[],r=0;r<e;r++)t.push(this.getInt8());return t},getUint8:function(){var e=this.dv.getUint8(this.offset);return this.offset+=1,e},getUint8Array:function(e){for(var t=[],r=0;r<e;r++)t.push(this.getUint8());return t},getInt16:function(){var e=this.dv.getInt16(this.offset,this.littleEndian);return this.offset+=2,e},getInt16Array:function(e){for(var t=[],r=0;r<e;r++)t.push(this.getInt16());return t},getUint16:function(){var e=this.dv.getUint16(this.offset,this.littleEndian);return this.offset+=2,e},getUint16Array:function(e){for(var t=[],r=0;r<e;r++)t.push(this.getUint16());return t},getInt32:function(){var e=this.dv.getInt32(this.offset,this.littleEndian);return this.offset+=4,e},getInt32Array:function(e){for(var t=[],r=0;r<e;r++)t.push(this.getInt32());return t},getUint32:function(){var e=this.dv.getUint32(this.offset,this.littleEndian);return this.offset+=4,e},getUint32Array:function(e){for(var t=[],r=0;r<e;r++)t.push(this.getUint32());return t},getInt64:function(){var e,t;return this.littleEndian?(e=this.getUint32(),t=this.getUint32()):(t=this.getUint32(),e=this.getUint32()),2147483648&t?(t=4294967295&~t,4294967295===(e=4294967295&~e)&&(t=t+1&4294967295),-(4294967296*t+(e=e+1&4294967295))):4294967296*t+e},getInt64Array:function(e){for(var t=[],r=0;r<e;r++)t.push(this.getInt64());return t},getUint64:function(){var e,t;return this.littleEndian?(e=this.getUint32(),t=this.getUint32()):(t=this.getUint32(),e=this.getUint32()),4294967296*t+e},getUint64Array:function(e){for(var t=[],r=0;r<e;r++)t.push(this.getUint64());return t},getFloat32:function(){var e=this.dv.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e},getFloat32Array:function(e){for(var t=[],r=0;r<e;r++)t.push(this.getFloat32());return t},getFloat64:function(){var e=this.dv.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e},getFloat64Array:function(e){for(var t=[],r=0;r<e;r++)t.push(this.getFloat64());return t},getArrayBuffer:function(e){var t=this.dv.buffer.slice(this.offset,this.offset+e);return this.offset+=e,t},getChar:function(){return String.fromCharCode(this.getUint8())},getString:function(e){var t=THREE.LoaderUtils.decodeText(this.getUint8Array(e));return this.skip(e),t}}),Object.assign(_.prototype,{add:function(e,t){this[e]=t}})}()},5798:(e,t,r)=>{"use strict";var n=r(5108);void 0===THREE.LoaderSupport&&(THREE.LoaderSupport={}),THREE.LoaderSupport.Validator={isValid:function(e){return null!=e},verifyInput:function(e,t){return null==e?t:e}},THREE.LoaderSupport.ConsoleLogger=function(){function e(e,t){this.enabled=!1!==e,this.debug=!0===t}return e.prototype.setDebug=function(e){this.debug=!0===e},e.prototype.isDebug=function(){return this.isEnabled()&&this.debug},e.prototype.setEnabled=function(e){this.enabled=!0===e},e.prototype.isEnabled=function(){return this.enabled},e.prototype.logDebug=function(e){this.enabled&&this.debug&&n.info(e)},e.prototype.logInfo=function(e){this.enabled&&n.info(e)},e.prototype.logWarn=function(e){n.warn(e)},e.prototype.logError=function(e){n.error(e)},e.prototype.logTimeStart=function(e){this.enabled&&n.time(e)},e.prototype.logTimeEnd=function(e){this.enabled&&n.timeEnd(e)},e}(),THREE.LoaderSupport.Callbacks=function(){var e=THREE.LoaderSupport.Validator;function t(){this.onProgress=null,this.onMeshAlter=null,this.onLoad=null,this.onLoadMaterials=null}return t.prototype.setCallbackOnProgress=function(t){this.onProgress=e.verifyInput(t,this.onProgress)},t.prototype.setCallbackOnMeshAlter=function(t){this.onMeshAlter=e.verifyInput(t,this.onMeshAlter)},t.prototype.setCallbackOnLoad=function(t){this.onLoad=e.verifyInput(t,this.onLoad)},t.prototype.setCallbackOnLoadMaterials=function(t){this.onLoadMaterials=e.verifyInput(t,this.onLoadMaterials)},t}(),THREE.LoaderSupport.LoadedMeshUserOverride=function(){function e(e,t){this.disregardMesh=!0===e,this.alteredMesh=!0===t,this.meshes=[]}return e.prototype.addMesh=function(e){this.meshes.push(e),this.alteredMesh=!0},e.prototype.isDisregardMesh=function(){return this.disregardMesh},e.prototype.providesAlteredMeshes=function(){return this.alteredMesh},e}(),THREE.LoaderSupport.ResourceDescriptor=function(){var e=THREE.LoaderSupport.Validator;function t(t,r){var n=t.split("/");n.length<2?(this.path=null,this.name=t,this.url=t):(this.path=e.verifyInput(n.slice(0,n.length-1).join("/")+"/",null),this.name=e.verifyInput(n[n.length-1],null),this.url=t),this.extension=e.verifyInput(r,"default"),this.extension=this.extension.trim(),this.content=null}return t.prototype.setContent=function(t){this.content=e.verifyInput(t,null)},t}(),THREE.LoaderSupport.PrepData=function(){var e=THREE.LoaderSupport.Validator;function t(t){this.modelName=e.verifyInput(t,""),this.resources=[],this.streamMeshesTo=null,this.materialPerSmoothingGroup=!1,this.useIndices=!1,this.disregardNormals=!1,this.callbacks=new THREE.LoaderSupport.Callbacks,this.crossOrigin,this.useAsync=!1}return t.prototype.setStreamMeshesTo=function(t){this.streamMeshesTo=e.verifyInput(t,null)},t.prototype.setMaterialPerSmoothingGroup=function(e){this.materialPerSmoothingGroup=!0===e},t.prototype.setUseIndices=function(e){this.useIndices=!0===e},t.prototype.setDisregardNormals=function(e){this.disregardNormals=!0===e},t.prototype.getCallbacks=function(){return this.callbacks},t.prototype.setCrossOrigin=function(e){this.crossOrigin=e},t.prototype.addResource=function(e){this.resources.push(e)},t.prototype.setUseAsync=function(e){this.useAsync=!0===e},t.prototype.clone=function(){var e=new THREE.LoaderSupport.PrepData(this.modelName);return e.resources=this.resources,e.streamMeshesTo=this.streamMeshesTo,e.materialPerSmoothingGroup=this.materialPerSmoothingGroup,e.useIndices=this.useIndices,e.disregardNormals=this.disregardNormals,e.callbacks=this.callbacks,e.crossOrigin=this.crossOrigin,e.useAsync=this.useAsync,e},t}(),THREE.LoaderSupport.Builder=function(){var e=THREE.LoaderSupport.Validator,t=THREE.LoaderSupport.ConsoleLogger;function r(r){this.logger=e.verifyInput(r,new t),this.logger.logInfo("Using THREE.LoaderSupport.Builder version: 1.1.1"),this.callbacks=new THREE.LoaderSupport.Callbacks,this.materials=[]}return r.prototype.setMaterials=function(t){var r={cmd:"materialData",materials:{materialCloneInstructions:null,serializedMaterials:null,runtimeMaterials:e.isValid(this.callbacks.onLoadMaterials)?this.callbacks.onLoadMaterials(t):t}};this.updateMaterials(r)},r.prototype._setCallbacks=function(t){e.isValid(t.onProgress)&&this.callbacks.setCallbackOnProgress(t.onProgress),e.isValid(t.onMeshAlter)&&this.callbacks.setCallbackOnMeshAlter(t.onMeshAlter),e.isValid(t.onLoad)&&this.callbacks.setCallbackOnLoad(t.onLoad),e.isValid(t.onLoadMaterials)&&this.callbacks.setCallbackOnLoadMaterials(t.onLoadMaterials)},r.prototype.processPayload=function(e){return"meshData"===e.cmd?this.buildMeshes(e):"materialData"===e.cmd?(this.updateMaterials(e),null):void 0},r.prototype.buildMeshes=function(t){var r,n,i,a=t.params.meshName,o=new THREE.BufferGeometry;o.addAttribute("position",new THREE.BufferAttribute(new Float32Array(t.buffers.vertices),3)),e.isValid(t.buffers.indices)&&o.setIndex(new THREE.BufferAttribute(new Uint32Array(t.buffers.indices),1)),e.isValid(t.buffers.colors)&&o.addAttribute("color",new THREE.BufferAttribute(new Float32Array(t.buffers.colors),3)),e.isValid(t.buffers.normals)?o.addAttribute("normal",new THREE.BufferAttribute(new Float32Array(t.buffers.normals),3)):o.computeVertexNormals(),e.isValid(t.buffers.uvs)&&o.addAttribute("uv",new THREE.BufferAttribute(new Float32Array(t.buffers.uvs),2));var s=t.materials.materialNames,l=t.materials.multiMaterial,u=[];for(i in s)n=s[i],r=this.materials[n],l&&u.push(r);if(l){r=u;var c,h=t.materials.materialGroups;for(i in h)c=h[i],o.addGroup(c.start,c.count,c.index)}var d,f,p,m=[],g=this.callbacks.onMeshAlter,v=!0;if(e.isValid(g)&&(f=g({detail:{meshName:a,bufferGeometry:o,material:r}}),e.isValid(f))){if(!f.isDisregardMesh()&&f.providesAlteredMeshes())for(var y in f.meshes)m.push(f.meshes[y]);v=!1}if(v&&((d=new THREE.Mesh(o,r)).name=a,m.push(d)),e.isValid(m)&&m.length>0){var b=[];for(var y in m)d=m[y],b[y]=d.name;p="Adding mesh(es) ("+b.length+": "+b+") from input mesh: "+a,p+=" ("+(100*t.progress.numericalValue).toFixed(2)+"%)"}else p="Not adding mesh: "+a,p+=" ("+(100*t.progress.numericalValue).toFixed(2)+"%)";var E=this.callbacks.onProgress;e.isValid(E)&&E(new CustomEvent("BuilderEvent",{detail:{type:"progress",modelName:t.params.meshName,text:p,numericalValue:t.progress.numericalValue}}));return m},r.prototype.updateMaterials=function(t){var r,n,i=t.materials.materialCloneInstructions;if(e.isValid(i)){var a=i.materialNameOrg;r=this.materials[a].clone(),n=i.materialName,r.name=n;var o=i.materialProperties;for(var s in o)r.hasOwnProperty(s)&&o.hasOwnProperty(s)&&(r[s]=o[s]);this.materials[n]=r}var l=t.materials.serializedMaterials;if(e.isValid(l)&&Object.keys(l).length>0){var u,c=new THREE.MaterialLoader;for(n in l)u=l[n],e.isValid(u)&&(r=c.parse(u),this.logger.logInfo('De-serialized material with name "'+n+'" will be added.'),this.materials[n]=r)}if(l=t.materials.runtimeMaterials,e.isValid(l)&&Object.keys(l).length>0)for(n in l)r=l[n],this.logger.logInfo('Material with name "'+n+'" will be added.'),this.materials[n]=r},r.prototype.getMaterialsJSON=function(){var e,t={};for(var r in this.materials)e=this.materials[r],t[r]=e.toJSON();return t},r.prototype.getMaterials=function(){return this.materials},r}(),THREE.LoaderSupport.LoaderBase=function(){var e=THREE.LoaderSupport.Validator,t=THREE.LoaderSupport.ConsoleLogger;function r(r,n){this.manager=e.verifyInput(r,THREE.DefaultLoadingManager),this.logger=e.verifyInput(n,new t),this.modelName="",this.instanceNo=0,this.path="",this.useIndices=!1,this.disregardNormals=!1,this.loaderRootNode=new THREE.Group,this.builder=new THREE.LoaderSupport.Builder(this.logger),this._createDefaultMaterials(),this.callbacks=new THREE.LoaderSupport.Callbacks}return r.prototype._createDefaultMaterials=function(){var e=new THREE.MeshStandardMaterial({color:14479871});e.name="defaultMaterial";var t=new THREE.MeshStandardMaterial({color:14479871});t.name="vertexColorMaterial",t.vertexColors=THREE.VertexColors;var r={};r[e.name]=e,r[t.name]=t,this.builder.updateMaterials({cmd:"materialData",materials:{materialCloneInstructions:null,serializedMaterials:null,runtimeMaterials:r}})},r.prototype._applyPrepData=function(t){e.isValid(t)&&(this.setModelName(t.modelName),this.setStreamMeshesTo(t.streamMeshesTo),this.builder.setMaterials(t.materials),this.setUseIndices(t.useIndices),this.setDisregardNormals(t.disregardNormals),this._setCallbacks(t.getCallbacks()))},r.prototype._setCallbacks=function(t){e.isValid(t.onProgress)&&this.callbacks.setCallbackOnProgress(t.onProgress),e.isValid(t.onMeshAlter)&&this.callbacks.setCallbackOnMeshAlter(t.onMeshAlter),e.isValid(t.onLoad)&&this.callbacks.setCallbackOnLoad(t.onLoad),e.isValid(t.onLoadMaterials)&&this.callbacks.setCallbackOnLoadMaterials(t.onLoadMaterials),this.builder._setCallbacks(this.callbacks)},r.prototype.getLogger=function(){return this.logger},r.prototype.setModelName=function(t){this.modelName=e.verifyInput(t,this.modelName)},r.prototype.setPath=function(t){this.path=e.verifyInput(t,this.path)},r.prototype.setStreamMeshesTo=function(t){this.loaderRootNode=e.verifyInput(t,this.loaderRootNode)},r.prototype.setMaterials=function(e){this.builder.setMaterials(e)},r.prototype.setUseIndices=function(e){this.useIndices=!0===e},r.prototype.setDisregardNormals=function(e){this.disregardNormals=!0===e},r.prototype.onProgress=function(t,r,n){var i=e.isValid(r)?r:"",a={detail:{type:t,modelName:this.modelName,instanceNo:this.instanceNo,text:i,numericalValue:n}};e.isValid(this.callbacks.onProgress)&&this.callbacks.onProgress(a),this.logger.logDebug(i)},r}(),THREE.LoaderSupport.WorkerRunnerRefImpl=function(){function e(){var e=this;self.addEventListener("message",(function(t){e.processMessage(t.data)}),!1)}return e.prototype.applyProperties=function(e,t){var r,n,i;for(r in t)n="set"+r.substring(0,1).toLocaleUpperCase()+r.substring(1),i=t[r],"function"==typeof e[n]?e[n](i):e.hasOwnProperty(r)&&(e[r]=i)},e.prototype.processMessage=function(e){var t=e.logger.enabled,r=e.logger.enabled;if("run"===e.cmd){var i={callbackBuilder:function(e){self.postMessage(e)},callbackProgress:function(e){t&&r&&n.debug("WorkerRunner: progress: "+e)}},a=new Parser;"function"==typeof a.setLogConfig&&a.setLogConfig(t,r),this.applyProperties(a,e.params),this.applyProperties(a,e.materials),this.applyProperties(a,i),a.workerScope=self,a.parse(e.data.input,e.data.options),t&&n.log("WorkerRunner: Run complete!"),i.callbackBuilder({cmd:"complete",msg:"WorkerRunner completed run."})}else n.error("WorkerRunner: Received unknown command: "+e.cmd)},e}(),THREE.LoaderSupport.WorkerSupport=function(){var e=THREE.LoaderSupport.Validator,t=function(){function t(t){this.logger=e.verifyInput(t,new THREE.LoaderSupport.ConsoleLogger),this._reset()}return t.prototype._reset=function(){this.worker=null,this.runnerImplName=null,this.callbacks={builder:null,onLoad:null},this.terminateRequested=!1,this.queuedMessage=null,this.started=!1},t.prototype.initWorker=function(e,t){this.runnerImplName=t;var r=new Blob([e],{type:"application/javascript"});this.worker=new Worker(window.URL.createObjectURL(r)),this.worker.onmessage=this._receiveWorkerMessage,this.worker.runtimeRef=this,this._postMessage()},t.prototype._receiveWorkerMessage=function(e){var t=e.data;switch(t.cmd){case"meshData":case"materialData":case"imageData":this.runtimeRef.callbacks.builder(t);break;case"complete":this.runtimeRef.queuedMessage=null,this.started=!1,this.runtimeRef.callbacks.onLoad(t.msg),this.runtimeRef.terminateRequested&&(this.runtimeRef.logger.logInfo("WorkerSupport ["+this.runtimeRef.runnerImplName+"]: Run is complete. Terminating application on request!"),this.runtimeRef._terminate());break;case"error":this.runtimeRef.logger.logError("WorkerSupport ["+this.runtimeRef.runnerImplName+"]: Reported error: "+t.msg),this.runtimeRef.queuedMessage=null,this.started=!1,this.runtimeRef.callbacks.onLoad(t.msg),this.runtimeRef.terminateRequested&&(this.runtimeRef.logger.logInfo("WorkerSupport ["+this.runtimeRef.runnerImplName+"]: Run reported error. Terminating application on request!"),this.runtimeRef._terminate());break;default:this.runtimeRef.logger.logError("WorkerSupport ["+this.runtimeRef.runnerImplName+"]: Received unknown command: "+t.cmd)}},t.prototype.setCallbacks=function(t,r){this.callbacks.builder=e.verifyInput(t,this.callbacks.builder),this.callbacks.onLoad=e.verifyInput(r,this.callbacks.onLoad)},t.prototype.run=function(t){if(e.isValid(this.queuedMessage))n.warn("Already processing message. Rejecting new run instruction");else{if(this.queuedMessage=t,this.started=!0,!e.isValid(this.callbacks.builder))throw'Unable to run as no "builder" callback is set.';if(!e.isValid(this.callbacks.onLoad))throw'Unable to run as no "onLoad" callback is set.';"run"!==t.cmd&&(t.cmd="run"),e.isValid(t.logger)?(t.logger.enabled=e.verifyInput(t.logger.enabled,!0),t.logger.debug=e.verifyInput(t.logger.debug,!1)):t.logger={enabled:!0,debug:!1},this._postMessage()}},t.prototype._postMessage=function(){e.isValid(this.queuedMessage)&&e.isValid(this.worker)&&(this.queuedMessage.data.input instanceof ArrayBuffer?this.worker.postMessage(this.queuedMessage,[this.queuedMessage.data.input]):this.worker.postMessage(this.queuedMessage))},t.prototype.setTerminateRequested=function(t){this.terminateRequested=!0===t,this.terminateRequested&&e.isValid(this.worker)&&!e.isValid(this.queuedMessage)&&this.started&&(this.logger.logInfo("Worker is terminated immediately as it is not running!"),this._terminate())},t.prototype._terminate=function(){this.worker.terminate(),this._reset()},t}();function r(r){if(this.logger=e.verifyInput(r,new THREE.LoaderSupport.ConsoleLogger),this.logger.logInfo("Using THREE.LoaderSupport.WorkerSupport version: 2.0.1"),void 0===window.Worker)throw"This browser does not support web workers!";if(void 0===window.Blob)throw"This browser does not support Blob!";if("function"!=typeof window.URL.createObjectURL)throw"This browser does not support Object creation from URL!";this.loaderWorker=new t(this.logger)}r.prototype.validate=function(t,r,n,o){if(!e.isValid(this.loaderWorker.worker)){this.logger.logInfo("WorkerSupport: Building worker code..."),this.logger.logTimeStart("buildWebWorkerCode"),e.isValid(o)?this.logger.logInfo('WorkerSupport: Using "'+o.name+'" as Runncer class for worker.'):(o=THREE.LoaderSupport.WorkerRunnerRefImpl,this.logger.logInfo('WorkerSupport: Using DEFAULT "THREE.LoaderSupport.WorkerRunnerRefImpl" as Runncer class for worker.'));var s=t(i,a);s+=a(o.name,o.name,o),s+="new "+o.name+"();\n\n";var l=this;if(e.isValid(r)&&r.length>0){var u="",c=function(e,t){if(0===t.length)l.loaderWorker.initWorker(u+s,l.logger,o.name),l.logger.logTimeEnd("buildWebWorkerCode");else{var r=new THREE.FileLoader;r.setPath(e),r.setResponseType("text"),r.load(t[0],(function(r){u+=r,c(e,t)})),t.shift()}};c(n,r)}else this.loaderWorker.initWorker(s,this.logger,o.name),this.logger.logTimeEnd("buildWebWorkerCode")}},r.prototype.setCallbacks=function(e,t){this.loaderWorker.setCallbacks(e,t)},r.prototype.run=function(e){this.loaderWorker.run(e)},r.prototype.setTerminateRequested=function(e){this.loaderWorker.setTerminateRequested(e)};var i=function(e,t){var r,n=e+" = {\n";for(var i in t)"string"==typeof(r=t[i])||r instanceof String?n+="\t"+i+': "'+(r=(r=r.replace("\n","\\n")).replace("\r","\\r"))+'",\n':r instanceof Array?n+="\t"+i+": ["+r+"],\n":(Number.isInteger(r)||"function"==typeof r)&&(n+="\t"+i+": "+r+",\n");return n+="}\n\n"},a=function(e,t,r){var n,i=e+" = (function () {\n\n";for(var a in i=(i+="\t"+r.prototype.constructor.toString()+"\n\n").replace(r.name,t),r.prototype)"function"==typeof(n=r.prototype[a])&&(i+="\t"+t+".prototype."+a+" = "+n.toString()+";\n\n");return i+="\treturn "+t+";\n",i+="})();\n\n"};return r}(),THREE.LoaderSupport.WorkerDirector=function(){var e=THREE.LoaderSupport.Validator;function t(t,r){if(this.logger=e.verifyInput(r,new THREE.LoaderSupport.ConsoleLogger),this.logger.logInfo("Using THREE.LoaderSupport.WorkerDirector version: 2.1.0"),this.maxQueueSize=8192,this.maxWebWorkers=16,this.crossOrigin=null,!e.isValid(t))throw"Provided invalid classDef: "+t;this.workerDescription={classDef:t,globalCallbacks:{},workerSupports:{}},this.objectsCompleted=0,this.instructionQueue=[],this.instructionQueuePointer=0,this.callbackOnFinishedProcessing=null}return t.prototype.getMaxQueueSize=function(){return this.maxQueueSize},t.prototype.getMaxWebWorkers=function(){return this.maxWebWorkers},t.prototype.setCrossOrigin=function(e){this.crossOrigin=e},t.prototype.prepareWorkers=function(t,r,n){e.isValid(t)&&(this.workerDescription.globalCallbacks=t),this.maxQueueSize=Math.min(r,8192),this.maxWebWorkers=Math.min(n,16),this.maxWebWorkers=Math.min(this.maxWebWorkers,this.maxQueueSize),this.objectsCompleted=0,this.instructionQueue=[],this.instructionQueuePointer=0;for(var i=0;i<this.maxWebWorkers;i++)this.workerDescription.workerSupports[i]={instanceNo:i,inUse:!1,terminateRequested:!1,workerSupport:new THREE.LoaderSupport.WorkerSupport(this.logger),loader:null}},t.prototype.enqueueForRun=function(e){this.instructionQueue.length<this.maxQueueSize&&this.instructionQueue.push(e)},t.prototype.isRunning=function(){var e=Object.keys(this.workerDescription.workerSupports);return this.instructionQueue.length>0&&this.instructionQueuePointer<this.instructionQueue.length||e.length>0},t.prototype.processQueue=function(){var e,t;for(var r in this.workerDescription.workerSupports)(t=this.workerDescription.workerSupports[r]).inUse||(this.instructionQueuePointer<this.instructionQueue.length?(e=this.instructionQueue[this.instructionQueuePointer],this._kickWorkerRun(e,t),this.instructionQueuePointer++):this._deregister(t));this.isRunning()||null===this.callbackOnFinishedProcessing||(this.callbackOnFinishedProcessing(),this.callbackOnFinishedProcessing=null)},t.prototype._kickWorkerRun=function(t,r){r.inUse=!0,r.workerSupport.setTerminateRequested(r.terminateRequested),this.logger.logInfo("\nAssigning next item from queue to worker (queue length: "+this.instructionQueue.length+")\n\n");var n=this,i=t.getCallbacks(),a=this.workerDescription.globalCallbacks;r.loader=this._buildLoader(r.instanceNo);var o=new THREE.LoaderSupport.Callbacks;o.setCallbackOnLoad((function(t){e.isValid(a.onLoad)&&a.onLoad(t),e.isValid(i.onLoad)&&i.onLoad(t),n.objectsCompleted++,r.inUse=!1,n.processQueue()})),o.setCallbackOnProgress((function(t){e.isValid(a.onProgress)&&a.onProgress(t),e.isValid(i.onProgress)&&i.onProgress(t)})),o.setCallbackOnMeshAlter((function(t){e.isValid(a.onMeshAlter)&&a.onMeshAlter(t),e.isValid(i.onMeshAlter)&&i.onMeshAlter(t)})),t.callbacks=o,r.loader.run(t,r.workerSupport)},t.prototype._buildLoader=function(t){var r=this.workerDescription.classDef,n=Object.create(r.prototype);if(this.workerDescription.classDef.call(n,THREE.DefaultLoadingManager,this.logger),!n.hasOwnProperty("instanceNo"))throw r.name+' has no property "instanceNo".';if(n.instanceNo=t,!n.hasOwnProperty("workerSupport"))throw r.name+' has no property "workerSupport".';if("function"!=typeof n.run)throw r.name+' has no function "run".';return n.hasOwnProperty("callbacks")&&e.isValid(n.callbacks)||(this.logger.logWarn(r.name+' has an invalid property "callbacks". Will change to "THREE.LoaderSupport.Callbacks"'),n.callbacks=new THREE.LoaderSupport.Callbacks),n},t.prototype._deregister=function(t){if(e.isValid(t)){t.workerSupport.setTerminateRequested(!0),this.logger.logInfo("Requested termination of worker #"+t.instanceNo+".");var r=t.loader.callbacks;e.isValid(r.onProgress)&&r.onProgress({detail:{text:""}}),delete this.workerDescription.workerSupports[t.instanceNo]}},t.prototype.tearDown=function(t){for(var r in this.logger.logInfo("WorkerDirector received the deregister call. Terminating all workers!"),this.instructionQueuePointer=this.instructionQueue.length,this.callbackOnFinishedProcessing=e.verifyInput(t,null),this.workerDescription.workerSupports)this.workerDescription.workerSupports[r].terminateRequested=!0},t}()},4747:(e,t,r)=>{var n,i=r(5108);THREE.MD2Loader=function(e){this.manager=void 0!==e?e:THREE.DefaultLoadingManager},THREE.MD2Loader.prototype={constructor:THREE.MD2Loader,load:function(e,t,r,n){var i=this,a=new THREE.FileLoader(i.manager);a.setResponseType("arraybuffer"),a.load(e,(function(e){t(i.parse(e))}),r,n)},parse:(n=[[-.525731,0,.850651],[-.442863,.238856,.864188],[-.295242,0,.955423],[-.309017,.5,.809017],[-.16246,.262866,.951056],[0,0,1],[0,.850651,.525731],[-.147621,.716567,.681718],[.147621,.716567,.681718],[0,.525731,.850651],[.309017,.5,.809017],[.525731,0,.850651],[.295242,0,.955423],[.442863,.238856,.864188],[.16246,.262866,.951056],[-.681718,.147621,.716567],[-.809017,.309017,.5],[-.587785,.425325,.688191],[-.850651,.525731,0],[-.864188,.442863,.238856],[-.716567,.681718,.147621],[-.688191,.587785,.425325],[-.5,.809017,.309017],[-.238856,.864188,.442863],[-.425325,.688191,.587785],[-.716567,.681718,-.147621],[-.5,.809017,-.309017],[-.525731,.850651,0],[0,.850651,-.525731],[-.238856,.864188,-.442863],[0,.955423,-.295242],[-.262866,.951056,-.16246],[0,1,0],[0,.955423,.295242],[-.262866,.951056,.16246],[.238856,.864188,.442863],[.262866,.951056,.16246],[.5,.809017,.309017],[.238856,.864188,-.442863],[.262866,.951056,-.16246],[.5,.809017,-.309017],[.850651,.525731,0],[.716567,.681718,.147621],[.716567,.681718,-.147621],[.525731,.850651,0],[.425325,.688191,.587785],[.864188,.442863,.238856],[.688191,.587785,.425325],[.809017,.309017,.5],[.681718,.147621,.716567],[.587785,.425325,.688191],[.955423,.295242,0],[1,0,0],[.951056,.16246,.262866],[.850651,-.525731,0],[.955423,-.295242,0],[.864188,-.442863,.238856],[.951056,-.16246,.262866],[.809017,-.309017,.5],[.681718,-.147621,.716567],[.850651,0,.525731],[.864188,.442863,-.238856],[.809017,.309017,-.5],[.951056,.16246,-.262866],[.525731,0,-.850651],[.681718,.147621,-.716567],[.681718,-.147621,-.716567],[.850651,0,-.525731],[.809017,-.309017,-.5],[.864188,-.442863,-.238856],[.951056,-.16246,-.262866],[.147621,.716567,-.681718],[.309017,.5,-.809017],[.425325,.688191,-.587785],[.442863,.238856,-.864188],[.587785,.425325,-.688191],[.688191,.587785,-.425325],[-.147621,.716567,-.681718],[-.309017,.5,-.809017],[0,.525731,-.850651],[-.525731,0,-.850651],[-.442863,.238856,-.864188],[-.295242,0,-.955423],[-.16246,.262866,-.951056],[0,0,-1],[.295242,0,-.955423],[.16246,.262866,-.951056],[-.442863,-.238856,-.864188],[-.309017,-.5,-.809017],[-.16246,-.262866,-.951056],[0,-.850651,-.525731],[-.147621,-.716567,-.681718],[.147621,-.716567,-.681718],[0,-.525731,-.850651],[.309017,-.5,-.809017],[.442863,-.238856,-.864188],[.16246,-.262866,-.951056],[.238856,-.864188,-.442863],[.5,-.809017,-.309017],[.425325,-.688191,-.587785],[.716567,-.681718,-.147621],[.688191,-.587785,-.425325],[.587785,-.425325,-.688191],[0,-.955423,-.295242],[0,-1,0],[.262866,-.951056,-.16246],[0,-.850651,.525731],[0,-.955423,.295242],[.238856,-.864188,.442863],[.262866,-.951056,.16246],[.5,-.809017,.309017],[.716567,-.681718,.147621],[.525731,-.850651,0],[-.238856,-.864188,-.442863],[-.5,-.809017,-.309017],[-.262866,-.951056,-.16246],[-.850651,-.525731,0],[-.716567,-.681718,-.147621],[-.716567,-.681718,.147621],[-.525731,-.850651,0],[-.5,-.809017,.309017],[-.238856,-.864188,.442863],[-.262866,-.951056,.16246],[-.864188,-.442863,.238856],[-.809017,-.309017,.5],[-.688191,-.587785,.425325],[-.681718,-.147621,.716567],[-.442863,-.238856,.864188],[-.587785,-.425325,.688191],[-.309017,-.5,.809017],[-.147621,-.716567,.681718],[-.425325,-.688191,.587785],[-.16246,-.262866,.951056],[.442863,-.238856,.864188],[.16246,-.262866,.951056],[.309017,-.5,.809017],[.147621,-.716567,.681718],[0,-.525731,.850651],[.425325,-.688191,.587785],[.587785,-.425325,.688191],[.688191,-.587785,.425325],[-.955423,.295242,0],[-.951056,.16246,.262866],[-1,0,0],[-.850651,0,.525731],[-.955423,-.295242,0],[-.951056,-.16246,.262866],[-.864188,.442863,-.238856],[-.951056,.16246,-.262866],[-.809017,.309017,-.5],[-.864188,-.442863,-.238856],[-.951056,-.16246,-.262866],[-.809017,-.309017,-.5],[-.681718,.147621,-.716567],[-.681718,-.147621,-.716567],[-.850651,0,-.525731],[-.688191,.587785,-.425325],[-.587785,.425325,-.688191],[-.425325,.688191,-.587785],[-.425325,-.688191,-.587785],[-.587785,-.425325,-.688191],[-.688191,-.587785,-.425325]],function(e){i.time("MD2Loader");for(var t=new DataView(e),r={},a=["ident","version","skinwidth","skinheight","framesize","num_skins","num_vertices","num_st","num_tris","num_glcmds","num_frames","offset_skins","offset_st","offset_tris","offset_frames","offset_glcmds","offset_end"],o=0;o<a.length;o++)r[a[o]]=t.getInt32(4*o,!0);if(844121161===r.ident&&8===r.version){if(r.offset_end===t.byteLength){for(var s=new THREE.Geometry,l=[],u=r.offset_st,c=(o=0,r.num_st);o<c;o++){var h=t.getInt16(u+0,!0),d=t.getInt16(u+2,!0);l.push(new THREE.Vector2(h/r.skinwidth,1-d/r.skinheight)),u+=4}for(u=r.offset_tris,o=0,c=r.num_tris;o<c;o++){var f=t.getUint16(u+0,!0),p=t.getUint16(u+2,!0),m=t.getUint16(u+4,!0);s.faces.push(new THREE.Face3(f,p,m)),s.faceVertexUvs[0].push([l[t.getUint16(u+6,!0)],l[t.getUint16(u+8,!0)],l[t.getUint16(u+10,!0)]]),u+=12}var g=new THREE.Vector3,v=new THREE.Vector3,y=[];for(u=r.offset_frames,o=0,c=r.num_frames;o<c;o++){v.set(t.getFloat32(u+0,!0),t.getFloat32(u+4,!0),t.getFloat32(u+8,!0)),g.set(t.getFloat32(u+12,!0),t.getFloat32(u+16,!0),t.getFloat32(u+20,!0)),u+=24;for(var b=0;b<16;b++){var E=t.getUint8(u+b,!0);if(0===E)break;y[b]=E}var x={name:String.fromCharCode.apply(null,y),vertices:[],normals:[]};for(u+=16,b=0;b<r.num_vertices;b++){var w=t.getUint8(u++,!0),T=t.getUint8(u++,!0),_=t.getUint8(u++,!0),S=n[t.getUint8(u++,!0)],M=new THREE.Vector3(w*v.x+g.x,_*v.z+g.z,T*v.y+g.y),R=new THREE.Vector3(S[0],S[2],S[1]);x.vertices.push(M),x.normals.push(R)}s.morphTargets.push(x)}s.vertices=s.morphTargets[0].vertices;for(var A=s.morphTargets[0],C=(b=0,s.faces.length);b<C;b++)(O=s.faces[b]).vertexNormals=[A.normals[O.a],A.normals[O.b],A.normals[O.c]];for(o=0,c=s.morphTargets.length;o<c;o++){A=s.morphTargets[o];var L=[];for(b=0,C=s.faces.length;b<C;b++){var O=s.faces[b];L.push({a:A.normals[O.a],b:A.normals[O.b],c:A.normals[O.c]})}s.morphNormals.push({vertexNormals:L})}return s.animations=THREE.AnimationClip.CreateClipsFromMorphTargetSequences(s.morphTargets,10),i.timeEnd("MD2Loader"),s}i.error("Corrupted MD2 file")}else i.error("Not a valid MD2 file")})}},1229:(e,t,r)=>{var n,i=r(5108);THREE.MMDLoader=function(e){THREE.Loader.call(this),this.manager=void 0!==e?e:THREE.DefaultLoadingManager,this.parser=new MMDParser.Parser,this.textureCrossOrigin=null},THREE.MMDLoader.prototype=Object.create(THREE.Loader.prototype),THREE.MMDLoader.prototype.constructor=THREE.MMDLoader,THREE.MMDLoader.prototype.defaultToonTextures=["data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAL0lEQVRYR+3QQREAAAzCsOFfNJPBJ1XQS9r2hsUAAQIECBAgQIAAAQIECBAgsBZ4MUx/ofm2I/kAAAAASUVORK5CYII=","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAN0lEQVRYR+3WQREAMBACsZ5/bWiiMvgEBTt5cW37hjsBBAgQIECAwFwgyfYPCCBAgAABAgTWAh8aBHZBl14e8wAAAABJRU5ErkJggg==","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAOUlEQVRYR+3WMREAMAwDsYY/yoDI7MLwIiP40+RJklfcCCBAgAABAgTqArfb/QMCCBAgQIAAgbbAB3z/e0F3js2cAAAAAElFTkSuQmCC","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAN0lEQVRYR+3WQREAMBACsZ5/B5ilMvgEBTt5cW37hjsBBAgQIECAwFwgyfYPCCBAgAABAgTWAh81dWyx0gFwKAAAAABJRU5ErkJggg==","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAOklEQVRYR+3WoREAMAwDsWb/UQtCy9wxTOQJ/oQ8SXKKGwEECBAgQIBAXeDt7f4BAQQIECBAgEBb4AOz8Hzx7WLY4wAAAABJRU5ErkJggg==","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABPUlEQVRYR+1XwW7CMAy1+f9fZOMysSEOEweEOPRNdm3HbdOyIhAcklPrOs/PLy9RygBALxzcCDQFmgJNgaZAU6Ap0BR4PwX8gsRMVLssMRH5HcpzJEaWL7EVg9F1IHRlyqQohgVr4FGUlUcMJSjcUlDw0zvjeun70cLWmneoyf7NgBTQSniBTQQSuJAZsOnnaczjIMb5hCiuHKxokCrJfVnrctyZL0PkJAJe1HMil4nxeyi3Ypfn1kX51jpPvo/JeCNC4PhVdHdJw2XjBR8brF8PEIhNVn12AgP7uHsTBguBn53MUZCqv7Lp07Pn5k1Ro+uWmUNn7D+M57rtk7aG0Vo73xyF/fbFf0bPJjDXngnGocDTdFhygZjwUQrMNrDcmZlQT50VJ/g/UwNyHpu778+yW+/ksOz/BFo54P4AsUXMfRq7XWsAAAAASUVORK5CYII=","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAACMElEQVRYR+2Xv4pTQRTGf2dubhLdICiii2KnYKHVolhauKWPoGAnNr6BD6CvIVaihYuI2i1ia0BY0MZGRHQXjZj/mSPnnskfNWiWZUlzJ5k7M2cm833nO5Mziej2DWWJRUoCpQKlAntSQCqgw39/iUWAGmh37jrRnVsKlgpiqmkoGVABA7E57fvY+pJDdgKqF6HzFCSADkDq+F6AHABtQ+UMVE5D7zXod7fFNhTEckTbj5XQgHzNN+5tQvc5NG7C6BNkp6D3EmpXHDR+dQAjFLchW3VS9rlw3JBh+B7ys5Cf9z0GW1C/7P32AyBAOAz1q4jGliIH3YPuBnSfQX4OGreTIgEYQb/pBDtPnEQ4CivXYPAWBk13oHrB54yA9QuSn2H4AcKRpEILDt0BUzj+RLR1V5EqjD66NPRBVpLcQwjHoHYJOhsQv6U4mnzmrIXJCFr4LDwm/xBUoboG9XX4cc9VKdYoSA2yk5NQLJaKDUjTBoveG3Z2TElTxwjNK4M3LEZgUdDdruvcXzKBpStgp2NPiWi3ks9ZXxIoFVi+AvHLdc9TqtjL3/aYjpPlrzOcEnK62Szhimdd7xX232zFDTgtxezOu3WNMRLjiKgjtOhHVMd1loynVHvOgjuIIJMaELEqhJAV/RCSLbWTcfPFakFgFlALTRRvx+ok6Hlp/Q+v3fmx90bMyUzaEAhmM3KvHlXTL5DxnbGf/1M8RNNACLL5MNtPxP/mypJAqcDSFfgFhpYqWUzhTEAAAAAASUVORK5CYII=","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAL0lEQVRYR+3QQREAAAzCsOFfNJPBJ1XQS9r2hsUAAQIECBAgQIAAAQIECBAgsBZ4MUx/ofm2I/kAAAAASUVORK5CYII=","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAL0lEQVRYR+3QQREAAAzCsOFfNJPBJ1XQS9r2hsUAAQIECBAgQIAAAQIECBAgsBZ4MUx/ofm2I/kAAAAASUVORK5CYII=","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAL0lEQVRYR+3QQREAAAzCsOFfNJPBJ1XQS9r2hsUAAQIECBAgQIAAAQIECBAgsBZ4MUx/ofm2I/kAAAAASUVORK5CYII=","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAL0lEQVRYR+3QQREAAAzCsOFfNJPBJ1XQS9r2hsUAAQIECBAgQIAAAQIECBAgsBZ4MUx/ofm2I/kAAAAASUVORK5CYII="],THREE.MMDLoader.prototype.setTextureCrossOrigin=function(e){this.textureCrossOrigin=e},THREE.MMDLoader.prototype.load=function(e,t,r,n,i){var a=this;this.loadModel(e,(function(e){a.loadVmds(t,(function(t){a.pourVmdIntoModel(e,t),r(e)}),n,i)}),n,i)},THREE.MMDLoader.prototype.loadModel=function(e,t,r,n){var i=this,a=THREE.LoaderUtils.extractUrlBase(e),o=this.extractExtension(e);this.loadFileAsBuffer(e,(function(e){t(i.createModel(e,o,a,r,n))}),r,n)},THREE.MMDLoader.prototype.createModel=function(e,t,r,n,i){return this.createMesh(this.parseModel(e,t),r,n,i)},THREE.MMDLoader.prototype.loadVmd=function(e,t,r,n){var i=this;this.loadFileAsBuffer(e,(function(e){t(i.parseVmd(e))}),r,n)},THREE.MMDLoader.prototype.loadVmds=function(e,t,r,n){var i=this,a=[];e=e.slice(),function o(){var s=e.shift();i.loadVmd(s,(function(r){a.push(r),e.length>0?o():t(i.mergeVmds(a))}),r,n)}()},THREE.MMDLoader.prototype.loadAudio=function(e,t,r,n){var i=new THREE.AudioListener,a=new THREE.Audio(i);new THREE.AudioLoader(this.manager).load(e,(function(e){a.setBuffer(e),t(a,i)}),r,n)},THREE.MMDLoader.prototype.loadVpd=function(e,t,r,n,i){var a=this;(i&&"unicode"===i.charcode?this.loadFileAsText:this.loadFileAsShiftJISText).bind(this)(e,(function(e){t(a.parseVpd(e))}),r,n)},THREE.MMDLoader.prototype.parseModel=function(e,t){switch(t.toLowerCase()){case"pmd":return this.parsePmd(e);case"pmx":return this.parsePmx(e);default:throw"extension "+t+" is not supported."}},THREE.MMDLoader.prototype.parsePmd=function(e){return this.parser.parsePmd(e,!0)},THREE.MMDLoader.prototype.parsePmx=function(e){return this.parser.parsePmx(e,!0)},THREE.MMDLoader.prototype.parseVmd=function(e){return this.parser.parseVmd(e,!0)},THREE.MMDLoader.prototype.parseVpd=function(e){return this.parser.parseVpd(e,!0)},THREE.MMDLoader.prototype.mergeVmds=function(e){return this.parser.mergeVmds(e)},THREE.MMDLoader.prototype.pourVmdIntoModel=function(e,t,r){this.createAnimation(e,t,r)},THREE.MMDLoader.prototype.pourVmdIntoCamera=function(e,t,r){var n=new THREE.MMDLoader.DataCreationHelper;!function(){for(var i,a,o=n.createOrderedMotionArray(t.cameras),s=[],l=[],u=[],c=[],h=[],d=[],f=[],p=[],m=[],g=new THREE.Quaternion,v=new THREE.Euler,y=new THREE.Vector3,b=new THREE.Vector3,E=function(e,t){e.push(t.x),e.push(t.y),e.push(t.z)},x=function(e,t,r){e.push(t[4*r+0]/127),e.push(t[4*r+1]/127),e.push(t[4*r+2]/127),e.push(t[4*r+3]/127)},w=function(e,t,r,n,i){if(r.length>2){r=r.slice(),n=n.slice(),i=i.slice();for(var a=n.length/r.length,o=3===a?12:4,s=1,l=2,u=r.length;l<u;l++){for(var c=0;c<a;c++)if(n[s*a+c]!==n[(s-1)*a+c]||n[s*a+c]!==n[l*a+c]){s++;break}if(l>s){r[s]=r[l];for(c=0;c<a;c++)n[s*a+c]=n[l*a+c];for(c=0;c<o;c++)i[s*o+c]=i[l*o+c]}}r.length=s+1,n.length=(s+1)*a,i.length=(s+1)*o}return new THREE.MMDLoader[t](e,r,n,i)},T=0;T<o.length;T++){var _=o[T],S=_.frameNum/30,M=_.position,R=_.rotation,A=_.distance,C=_.fov,L=_.interpolation;y.set(0,0,-A),b.set(M[0],M[1],M[2]),v.set(-R[0],-R[1],-R[2]),g.setFromEuler(v),y.add(b),y.applyQuaternion(g),s.length>0&&S<s[s.length-1]+.05&&(s[s.length-1]=S-1e-13),s.push(S),E(l,b),(i=u).push((a=g).x),i.push(a.y),i.push(a.z),i.push(a.w),E(c,y),h.push(C);for(var O=0;O<3;O++)x(d,L,O);x(f,L,3);for(O=0;O<3;O++)x(p,L,4);x(m,L,5)}if(0!==s.length){var I=[];I.push(w(".center","VectorKeyframeTrackEx",s,l,d)),I.push(w(".quaternion","QuaternionKeyframeTrackEx",s,u,f)),I.push(w(".position","VectorKeyframeTrackEx",s,c,p)),I.push(w(".fov","NumberKeyframeTrackEx",s,h,m));var P=new THREE.AnimationClip(void 0===r?THREE.Math.generateUUID():r,-1,I);void 0===e.center&&(e.center=new THREE.Vector3(0,0,0)),void 0===e.animations&&(e.animations=[]),e.animations.push(P)}}()},THREE.MMDLoader.prototype.extractExtension=function(e){var t=e.lastIndexOf(".");return t<0?null:e.slice(t+1)},THREE.MMDLoader.prototype.loadFile=function(e,t,r,n,i,a){var o=new THREE.FileLoader(this.manager);return void 0!==a&&o.setMimeType(a),o.setResponseType(i),o.load(e,(function(e){t(e)}),r,n)},THREE.MMDLoader.prototype.loadFileAsBuffer=function(e,t,r,n){this.loadFile(e,t,r,n,"arraybuffer")},THREE.MMDLoader.prototype.loadFileAsText=function(e,t,r,n){this.loadFile(e,t,r,n,"text")},THREE.MMDLoader.prototype.loadFileAsShiftJISText=function(e,t,r,n){this.loadFile(e,t,r,n,"text","text/plain; charset=shift_jis")},THREE.MMDLoader.prototype.createMesh=function(e,t,r,n){var a=this,o=new THREE.BufferGeometry,s=[],l={vertices:[],uvs:[],normals:[],skinIndices:[],skinWeights:[],indices:[]};return function(){for(var t=0;t<e.metadata.vertexCount;t++){for(var r=e.vertices[t],n=0,i=r.position.length;n<i;n++)l.vertices.push(r.position[n]);for(n=0,i=r.normal.length;n<i;n++)l.normals.push(r.normal[n]);for(n=0,i=r.uv.length;n<i;n++)l.uvs.push(r.uv[n]);for(n=0;n<4;n++)l.skinIndices.push(r.skinIndices.length-1>=n?r.skinIndices[n]:0);for(n=0;n<4;n++)l.skinWeights.push(r.skinWeights.length-1>=n?r.skinWeights[n]:0)}}(),function(){for(var t=0;t<e.metadata.faceCount;t++)for(var r=e.faces[t],n=0,i=r.indices.length;n<i;n++)l.indices.push(r.indices[n])}(),function(){for(var t=[],r=e.rigidBodies,n={},i=0,a=r.length;i<a;i++){var s=r[i],l=n[s.boneIndex];l=void 0===l?s.type:Math.max(s.type,l),n[s.boneIndex]=l}for(i=0;i<e.metadata.boneCount;i++){var u={},c=e.bones[i];u.parent=c.parentIndex,u.name=c.name,u.pos=[c.position[0],c.position[1],c.position[2]],u.rotq=[0,0,0,1],u.scl=[1,1,1],-1!==u.parent&&(u.pos[0]-=e.bones[u.parent].position[0],u.pos[1]-=e.bones[u.parent].position[1],u.pos[2]-=e.bones[u.parent].position[2]),u.rigidBodyType=void 0!==n[i]?n[i]:-1,t.push(u)}o.bones=t}(),function(){var t=[];if("pmd"===e.metadata.format)for(var r=0;r<e.metadata.ikCount;r++){var n=e.iks[r];(a={}).target=n.target,a.effector=n.effector,a.iteration=n.iteration,a.maxAngle=4*n.maxAngle,a.links=[];for(var i=0;i<n.links.length;i++){(s={}).index=n.links[i].index,e.bones[s.index].name.indexOf("ã²ã")>=0&&(s.limitation=new THREE.Vector3(1,0,0)),a.links.push(s)}t.push(a)}else for(r=0;r<e.metadata.boneCount;r++){if(void 0!==(n=e.bones[r].ik)){var a;(a={}).target=r,a.effector=n.effector,a.iteration=n.iteration,a.maxAngle=n.maxAngle,a.links=[];for(i=0;i<n.links.length;i++){var s;(s={}).index=n.links[i].index,s.enabled=!0,1===n.links[i].angleLimitation&&(s.limitation=new THREE.Vector3(1,0,0)),a.links.push(s)}t.push(a)}}o.iks=t}(),function(){if("pmd"!==e.metadata.format){for(var t=[],r=0;r<e.metadata.boneCount;r++){var n=e.bones[r],i=n.grant;if(void 0!==i){var a={};a.index=r,a.parentIndex=i.parentIndex,a.ratio=i.ratio,a.isLocal=i.isLocal,a.affectRotation=i.affectRotation,a.affectPosition=i.affectPosition,a.transformationClass=n.transformationClass,t.push(a)}}t.sort((function(e,t){return e.transformationClass-t.transformationClass})),o.grants=t}}(),function(){function t(e,t,r,n){e.array[3*t+0]+=r.position[0]*n,e.array[3*t+1]+=r.position[1]*n,e.array[3*t+2]+=r.position[2]*n}function r(r,n,i){for(var a=0;a<n.elementCount;a++){var o=n.elements[a];t(r,"pmd"===e.metadata.format?e.morphs[0].elements[o.index].index:o.index,o,i)}}for(var n=[],i=[],a=0;a<e.metadata.morphCount;a++){var s=e.morphs[a],u={name:s.name},c=new THREE.Float32BufferAttribute(3*e.metadata.vertexCount,3);c.name=s.name;for(var h=0;h<3*e.metadata.vertexCount;h++)c.array[h]=l.vertices[h];if("pmd"===e.metadata.format)0!==a&&r(c,s,1);else if(0===s.type)for(h=0;h<s.elementCount;h++){var d=e.morphs[s.elements[h].index],f=s.elements[h].ratio;1===d.type&&r(c,d,f)}else 1===s.type?r(c,s,1):2===s.type||3===s.type||4===s.type||5===s.type||6===s.type||7===s.type||s.type;n.push(u),i.push(c)}o.morphTargets=n,o.morphAttributes.position=i}(),function(){var l={},u=new THREE.TextureLoader(a.manager),c=new THREE.TGALoader(a.manager),h=document.createElement("canvas"),d=h.getContext("2d"),f=0,p=[];function m(e,o){var s;if(void 0===o&&(o={}),!0===o.defaultTexturePath)try{s=a.defaultToonTextures[parseInt(e.match("toon([0-9]{2}).bmp$")[1])]}catch(t){i.warn("THREE.MMDLoader: "+e+" seems like not right default texture path. Using toon00.bmp instead."),s=a.defaultToonTextures[0]}else s=t+e;if(void 0!==l[s])return s;var f=THREE.Loader.Handlers.get(s);null===f&&(f=e.indexOf(".tga")>=0?c:u);var p=f.load(s,(function(e){if(!0===o.isToonTexture){var t=e.image,r=t.width,n=t.height;h.width=r,h.height=n,d.clearRect(0,0,r,n),d.translate(r/2,n/2),d.rotate(.5*Math.PI),d.translate(-r/2,-n/2),d.drawImage(t,0,0),e.image=d.getImageData(0,0,r,n)}e.flipY=!1,e.wrapS=THREE.RepeatWrapping,e.wrapT=THREE.RepeatWrapping;for(var i=0;i<p.readyCallbacks.length;i++)p.readyCallbacks[i](p);delete p.readyCallbacks}),r,n);return!0===o.sphericalReflectionMapping&&(p.mapping=THREE.SphericalReflectionMapping),p.readyCallbacks=[],l[s]=p,s}function g(e,t){return void 0===t[e]&&i.warn("THREE.MMDLoader: Undefined texture",e),t[e]}null!==a.textureCrossOrigin&&u.setCrossOrigin(a.textureCrossOrigin);for(var v=0;v<e.metadata.materialCount;v++){var y=e.materials[v],b={};if(b.faceOffset=f,b.faceNum=y.faceCount,f+=y.faceCount,b.name=y.name,b.color=new THREE.Color(y.diffuse[0],y.diffuse[1],y.diffuse[2]),b.opacity=y.diffuse[3],b.specular=new THREE.Color(y.specular[0],y.specular[1],y.specular[2]),b.shininess=y.shininess,1===b.opacity?(b.side=THREE.FrontSide,b.transparent=!1):(b.side=THREE.DoubleSide,b.transparent=!0),"pmd"===e.metadata.format){if(y.fileName){var E=y.fileName,x=[],w=E.lastIndexOf("*");w>=0?(x.push(E.slice(0,w)),x.push(E.slice(w+1))):x.push(E);for(var T=0;T<x.length;T++){(_=x[T]).indexOf(".sph")>=0||_.indexOf(".spa")>=0?(b.envMap=m(_,{sphericalReflectionMapping:!0}),_.indexOf(".sph")>=0?b.envMapType=THREE.MultiplyOperation:b.envMapType=THREE.AddOperation):b.map=m(_)}}}else{if(-1!==y.textureIndex){var _=e.textures[y.textureIndex];b.map=m(_)}if(-1!==y.envTextureIndex&&(1===y.envFlag||2==y.envFlag)){_=e.textures[y.envTextureIndex];b.envMap=m(_,{sphericalReflectionMapping:!0}),1===y.envFlag?b.envMapType=THREE.MultiplyOperation:b.envMapType=THREE.AddOperation}}var S=void 0===b.map?1:.2;b.emissive=new THREE.Color(y.ambient[0]*S,y.ambient[1]*S,y.ambient[2]*S),p.push(b)}for(v=0;v<p.length;v++){var M=p[v],R=e.materials[v];y=new THREE.MeshToonMaterial;if(o.addGroup(3*M.faceOffset,3*M.faceNum,v),void 0!==M.name&&(y.name=M.name),y.skinning=o.bones.length>0,y.morphTargets=o.morphTargets.length>0,y.lights=!0,y.side="pmx"===e.metadata.format&&1==(1&R.flag)?THREE.DoubleSide:M.side,y.transparent=M.transparent,y.fog=!0,y.blending=THREE.CustomBlending,y.blendSrc=THREE.SrcAlphaFactor,y.blendDst=THREE.OneMinusSrcAlphaFactor,y.blendSrcAlpha=THREE.SrcAlphaFactor,y.blendDstAlpha=THREE.DstAlphaFactor,void 0!==M.map){function A(e){e.map.readyCallbacks.push((function(t){function r(e,t){var r=e.width,n=e.height,i=Math.round(t.x*r)%r,a=Math.round(t.y*n)%n;i<0&&(i+=r),a<0&&(a+=n);var o=a*r+i;return e.data[4*o+3]}var n=void 0!==t.image.data?t.image:function(e){var t=document.createElement("canvas");t.width=e.width,t.height=e.height;var r=t.getContext("2d");return r.drawImage(e,0,0),r.getImageData(0,0,t.width,t.height)}(t.image),i=o.index.array.slice(3*e.faceOffset,3*e.faceOffset+3*e.faceNum);(function(e,t,n){var i=e.width,a=e.height;if(e.data.length/(i*a)!=4)return!1;for(var o=0;o<n.length;o+=3){for(var s={x:0,y:0},l=0;l<3;l++){var u=n[3*o+l],c={x:t[2*u+0],y:t[2*u+1]};if(r(e,c)<253)return!0;s.x+=c.x,s.y+=c.y}if(s.x/=3,s.y/=3,r(e,s)<253)return!0}return!1})(n,o.attributes.uv.array,i)&&(e.transparent=!0),delete e.faceOffset,delete e.faceNum}))}y.faceOffset=M.faceOffset,y.faceNum=M.faceNum,y.map=g(M.map,l),A(y)}if(void 0!==M.envMap&&(y.envMap=g(M.envMap,l),y.combine=M.envMapType),y.opacity=M.opacity,y.color=M.color,void 0!==M.emissive&&(y.emissive=M.emissive),y.specular=M.specular,y.shininess=Math.max(M.shininess,1e-4),"pmd"===e.metadata.format){function C(e){return 10===e.length&&null!==e.match(/toon(10|0[0-9]).bmp/)}y.outlineParameters={thickness:1===R.edgeFlag?.003:0,color:new THREE.Color(0,0,0),alpha:1},0===y.outlineParameters.thickness&&(y.outlineParameters.visible=!1);var L=m(O=-1===R.toonIndex?"toon00.bmp":e.toonTextures[R.toonIndex].fileName,{isToonTexture:!0,defaultTexturePath:C(O)});y.gradientMap=g(L,l)}else{var O,I;if(y.outlineParameters={thickness:R.edgeSize/300,color:new THREE.Color(R.edgeColor[0],R.edgeColor[1],R.edgeColor[2]),alpha:R.edgeColor[3]},0!=(16&R.flag)&&0!==y.outlineParameters.thickness||(y.outlineParameters.visible=!1),-1===R.toonIndex||0!==R.toonFlag){var P=R.toonIndex+1;O="toon"+(P<10?"0"+P:P)+".bmp",I=!0}else O=e.textures[R.toonIndex],I=!1;L=m(O,{isToonTexture:!0,defaultTexturePath:I});y.gradientMap=g(L,l)}s.push(y)}if("pmx"===e.metadata.format){function H(e,t){if(8===e.type)for(var r=0;r<t.length;r++){var n=t[r];if(-1!==n.index){var i=s[n.index];i.opacity!==n.diffuse[3]&&(i.transparent=!0)}}}for(v=0;v<e.morphs.length;v++){var k=e.morphs[v],N=k.elements;if(0===k.type)for(T=0;T<N.length;T++){var U=e.morphs[N[T].index];H(U,U.elements)}else H(k,N)}}}(),function(){for(var t=[],r=[],n=0;n<e.metadata.rigidBodyCount;n++){for(var i=e.rigidBodies[n],a=Object.keys(i),s={},l=0;l<a.length;l++){s[h=a[l]]=i[h]}if("pmx"===e.metadata.format&&-1!==s.boneIndex){var u=e.bones[s.boneIndex];s.position[0]-=u.position[0],s.position[1]-=u.position[1],s.position[2]-=u.position[2]}t.push(s)}for(n=0;n<e.metadata.constraintCount;n++){var c=e.constraints[n];for(a=Object.keys(c),s={},l=0;l<a.length;l++){var h;s[h=a[l]]=c[h]}var d=t[s.rigidBodyIndex1],f=t[s.rigidBodyIndex2];0!==d.type&&2===f.type&&-1!==d.boneIndex&&-1!==f.boneIndex&&e.bones[f.boneIndex].parentIndex===d.boneIndex&&(f.type=1),r.push(s)}o.rigidBodies=t,o.constraints=r}(),o.setIndex(l.indices),o.addAttribute("position",new THREE.Float32BufferAttribute(l.vertices,3)),o.addAttribute("normal",new THREE.Float32BufferAttribute(l.normals,3)),o.addAttribute("uv",new THREE.Float32BufferAttribute(l.uvs,2)),o.addAttribute("skinIndex",new THREE.Float32BufferAttribute(l.skinIndices,4)),o.addAttribute("skinWeight",new THREE.Float32BufferAttribute(l.skinWeights,4)),o.computeBoundingSphere(),o.mmdFormat=e.metadata.format,new THREE.SkinnedMesh(o,s)},THREE.MMDLoader.prototype.createAnimation=function(e,t,r){var n=new THREE.MMDLoader.DataCreationHelper;!function(){if(0!==t.metadata.motionCount){for(var i=e.geometry.bones,a=n.createOrderedMotionArrays(i,t.motions,"boneName"),o=[],s=function(e,t,r){e.push(t[r+0]/127),e.push(t[r+8]/127),e.push(t[r+4]/127),e.push(t[r+12]/127)},l=0;l<a.length;l++){for(var u=[],c=[],h=[],d=[],f=[],p=i[l],m=a[l],g=0;g<m.length;g++){var v=m[g].frameNum/30,y=m[g].position,b=m[g].rotation,E=m[g].interpolation;u.push(v);for(var x=0;x<3;x++)c.push(p.pos[x]+y[x]);for(x=0;x<4;x++)h.push(b[x]);for(x=0;x<3;x++)s(d,E,x);s(f,E,3)}if(0!==u.length){var w=".bones["+p.name+"]";o.push(new THREE.MMDLoader.VectorKeyframeTrackEx(w+".position",u,c,d)),o.push(new THREE.MMDLoader.QuaternionKeyframeTrackEx(w+".quaternion",u,h,f))}}var T=new THREE.AnimationClip(void 0===r?THREE.Math.generateUUID():r,-1,o);void 0===e.geometry.animations&&(e.geometry.animations=[]),e.geometry.animations.push(T)}}(),function(){if(0!==t.metadata.morphCount){for(var i=n.createOrderedMotionArrays(e.geometry.morphTargets,t.morphs,"morphName"),a=[],o=0;o<i.length;o++){for(var s=[],l=[],u=i[o],c=0;c<u.length;c++)s.push(u[c].frameNum/30),l.push(u[c].weight);0!==s.length&&a.push(new THREE.NumberKeyframeTrack(".morphTargetInfluences["+o+"]",s,l))}var h=new THREE.AnimationClip(void 0===r?THREE.Math.generateUUID():r+"Morph",-1,a);void 0===e.geometry.animations&&(e.geometry.animations=[]),e.geometry.animations.push(h)}}()},THREE.MMDLoader.DataCreationHelper=function(){},THREE.MMDLoader.DataCreationHelper.prototype={constructor:THREE.MMDLoader.DataCreationHelper,toCharcodeStrings:function(e){for(var t="",r=0;r<e.length;r++)t+="0x"+("0000"+e[r].charCodeAt().toString(16)).substr(-4);return t},createDictionary:function(e){for(var t={},r=0;r<e.length;r++)t[e[r].name]=r;return t},initializeMotionArrays:function(e){for(var t=[],r=0;r<e.length;r++)t[r]=[];return t},sortMotionArray:function(e){e.sort((function(e,t){return e.frameNum-t.frameNum}))},sortMotionArrays:function(e){for(var t=0;t<e.length;t++)this.sortMotionArray(e[t])},createMotionArray:function(e){for(var t=[],r=0;r<e.length;r++)t.push(e[r]);return t},createMotionArrays:function(e,t,r,n){for(var i=0;i<e.length;i++){var a=e[i],o=r[a[n]];void 0!==o&&t[o].push(a)}},createOrderedMotionArray:function(e){var t=this.createMotionArray(e);return this.sortMotionArray(t),t},createOrderedMotionArrays:function(e,t,r){var n=this.createDictionary(e),i=this.initializeMotionArrays(e);return this.createMotionArrays(t,i,n,r),this.sortMotionArrays(i),i}},THREE.MMDLoader.VectorKeyframeTrackEx=function(e,t,r,n){this.interpolationParameters=new Float32Array(n),THREE.VectorKeyframeTrack.call(this,e,t,r)},THREE.MMDLoader.VectorKeyframeTrackEx.prototype=Object.create(THREE.VectorKeyframeTrack.prototype),THREE.MMDLoader.VectorKeyframeTrackEx.prototype.constructor=THREE.MMDLoader.VectorKeyframeTrackEx,THREE.MMDLoader.VectorKeyframeTrackEx.prototype.TimeBufferType=Float64Array,THREE.MMDLoader.VectorKeyframeTrackEx.prototype.InterpolantFactoryMethodCubicBezier=function(e){return new THREE.MMDLoader.CubicBezierInterpolation(this.times,this.values,this.getValueSize(),e,this.interpolationParameters)},THREE.MMDLoader.VectorKeyframeTrackEx.prototype.setInterpolation=function(e){this.createInterpolant=this.InterpolantFactoryMethodCubicBezier},THREE.MMDLoader.QuaternionKeyframeTrackEx=function(e,t,r,n){this.interpolationParameters=new Float32Array(n),THREE.QuaternionKeyframeTrack.call(this,e,t,r)},THREE.MMDLoader.QuaternionKeyframeTrackEx.prototype=Object.create(THREE.QuaternionKeyframeTrack.prototype),THREE.MMDLoader.QuaternionKeyframeTrackEx.prototype.constructor=THREE.MMDLoader.QuaternionKeyframeTrackEx,THREE.MMDLoader.QuaternionKeyframeTrackEx.prototype.TimeBufferType=Float64Array,THREE.MMDLoader.QuaternionKeyframeTrackEx.prototype.InterpolantFactoryMethodCubicBezier=function(e){return new THREE.MMDLoader.CubicBezierInterpolation(this.times,this.values,this.getValueSize(),e,this.interpolationParameters)},THREE.MMDLoader.QuaternionKeyframeTrackEx.prototype.setInterpolation=function(e){this.createInterpolant=this.InterpolantFactoryMethodCubicBezier},THREE.MMDLoader.NumberKeyframeTrackEx=function(e,t,r,n){this.interpolationParameters=new Float32Array(n),THREE.NumberKeyframeTrack.call(this,e,t,r)},THREE.MMDLoader.NumberKeyframeTrackEx.prototype=Object.create(THREE.NumberKeyframeTrack.prototype),THREE.MMDLoader.NumberKeyframeTrackEx.prototype.constructor=THREE.MMDLoader.NumberKeyframeTrackEx,THREE.MMDLoader.NumberKeyframeTrackEx.prototype.TimeBufferType=Float64Array,THREE.MMDLoader.NumberKeyframeTrackEx.prototype.InterpolantFactoryMethodCubicBezier=function(e){return new THREE.MMDLoader.CubicBezierInterpolation(this.times,this.values,this.getValueSize(),e,this.interpolationParameters)},THREE.MMDLoader.NumberKeyframeTrackEx.prototype.setInterpolation=function(e){this.createInterpolant=this.InterpolantFactoryMethodCubicBezier},THREE.MMDLoader.CubicBezierInterpolation=function(e,t,r,n,i){THREE.Interpolant.call(this,e,t,r,n),this.params=i},THREE.MMDLoader.CubicBezierInterpolation.prototype=Object.create(THREE.LinearInterpolant.prototype),THREE.MMDLoader.CubicBezierInterpolation.prototype.constructor=THREE.MMDLoader.CubicBezierInterpolation,THREE.MMDLoader.CubicBezierInterpolation.prototype.interpolate_=function(e,t,r,n){var i=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=e*o,l=s-o,u=(r-t)/(n-t);if(4===o){var c=this.params[4*e+0],h=this.params[4*e+1],d=this.params[4*e+2],f=this.params[4*e+3],p=this._calculate(c,h,d,f,u);THREE.Quaternion.slerpFlat(i,0,a,l,a,s,p)}else if(3===o)for(var m=0;m!==o;++m){c=this.params[12*e+4*m+0],h=this.params[12*e+4*m+1],d=this.params[12*e+4*m+2],f=this.params[12*e+4*m+3],p=this._calculate(c,h,d,f,u);i[m]=a[l+m]*(1-p)+a[s+m]*p}else{c=this.params[4*e+0],h=this.params[4*e+1],d=this.params[4*e+2],f=this.params[4*e+3],p=this._calculate(c,h,d,f,u);i[0]=a[l]*(1-p)+a[s]*p}return i},THREE.MMDLoader.CubicBezierInterpolation.prototype._calculate=function(e,t,r,n,i){for(var a,o,s,l=.5,u=l,c=1-u,h=Math,d=0;d<15;d++){var f=(a=3*c*c*u)*e+(o=3*c*u*u)*t+(s=u*u*u)-i;if(h.abs(f)<1e-5)break;l/=2,c=1-(u+=f<0?l:-l)}return a*r+o*n+s},THREE.MMDAudioManager=function(e,t,r){var n=null==r?{}:r;this.audio=e,this.listener=t,this.elapsedTime=0,this.currentTime=0,this.delayTime=void 0!==n.delayTime?n.delayTime:0,this.audioDuration=this.audio.buffer.duration,this.duration=this.audioDuration+this.delayTime},THREE.MMDAudioManager.prototype={constructor:THREE.MMDAudioManager,control:function(e){this.elapsed+=e,this.currentTime+=e,this.checkIfStopAudio()&&this.audio.stop(),this.checkIfStartAudio()&&this.audio.play()},checkIfStartAudio:function(){if(this.audio.isPlaying)return!1;for(;this.currentTime>=this.duration;)this.currentTime-=this.duration;return!(this.currentTime<this.delayTime)&&(this.audio.startTime=this.currentTime-this.delayTime,!0)},checkIfStopAudio:function(){return!!this.audio.isPlaying&&this.currentTime>=this.duration}},THREE.MMDGrantSolver=function(e){this.mesh=e},THREE.MMDGrantSolver.prototype={constructor:THREE.MMDGrantSolver,update:(n=new THREE.Quaternion,function(){for(var e=0;e<this.mesh.geometry.grants.length;e++){var t=this.mesh.geometry.grants[e],r=this.mesh.skeleton.bones[t.index],i=this.mesh.skeleton.bones[t.parentIndex];t.isLocal?(t.affectPosition,t.affectRotation):(t.affectPosition,t.affectRotation&&(n.set(0,0,0,1),n.slerp(i.quaternion,t.ratio),r.quaternion.multiply(n)))}})},THREE.MMDHelper=function(){this.meshes=[],this.doAnimation=!0,this.doIk=!0,this.doGrant=!0,this.doPhysics=!0,this.doCameraAnimation=!0,this.sharedPhysics=!1,this.masterPhysics=null,this.audioManager=null,this.camera=null},THREE.MMDHelper.prototype={constructor:THREE.MMDHelper,add:function(e){if(!(e instanceof THREE.SkinnedMesh))throw new Error("THREE.MMDHelper.add() accepts only THREE.SkinnedMesh instance.");void 0===e.mixer&&(e.mixer=null),void 0===e.ikSolver&&(e.ikSolver=null),void 0===e.grantSolver&&(e.grantSolver=null),void 0===e.physics&&(e.physics=null),void 0===e.looped&&(e.looped=!1),this.meshes.push(e),this.initBackupBones(e)},setAudio:function(e,t,r){this.audioManager=new THREE.MMDAudioManager(e,t,r)},setCamera:function(e){e.mixer=null,this.camera=e},setPhysicses:function(e){for(var t=0;t<this.meshes.length;t++)this.setPhysics(this.meshes[t],e)},setPhysics:function(e,t){if(void 0===(t=void 0===t?{}:Object.assign({},t)).world&&this.sharedPhysics){var r=this.getMasterPhysics();null!==r&&(t.world=r.world)}var n=void 0!==t.warmup?t.warmup:60,i=new THREE.MMDPhysics(e,t);null!==e.mixer&&void 0!==e.mixer&&!0!==t.preventAnimationWarmup&&(this.animateOneMesh(0,e),i.reset()),i.warmup(n),this.updateIKParametersDependingOnPhysicsEnabled(e,!0),e.physics=i},getMasterPhysics:function(){if(null!==this.masterPhysics)return this.masterPhysics;for(var e=0,t=this.meshes.length;e<t;e++){var r=this.meshes[e].physics;if(null!=r)return this.masterPhysics=r,this.masterPhysics}return null},enablePhysics:function(e){this.doPhysics=!0===e;for(var t=0,r=this.meshes.length;t<r;t++)this.updateIKParametersDependingOnPhysicsEnabled(this.meshes[t],e)},updateIKParametersDependingOnPhysicsEnabled:function(e,t){for(var r=e.geometry.iks,n=e.geometry.bones,i=0,a=r.length;i<a;i++)for(var o=r[i].links,s=0,l=o.length;s<l;s++){var u=o[s];u.enabled=!0!==t||!(n[u.index].rigidBodyType>0)}},setAnimations:function(){for(var e=0;e<this.meshes.length;e++)this.setAnimation(this.meshes[e])},setAnimation:function(e){if(void 0!==e.geometry.animations){e.mixer=new THREE.AnimationMixer(e),e.mixer.addEventListener("loop",(function(e){e.action._clip.tracks.length>0&&0!==e.action._clip.tracks[0].name.indexOf(".bones")||(e.target._root.looped=!0)}));for(var t=!1,r=!1,n=0;n<e.geometry.animations.length;n++){var i=e.geometry.animations[n],a=e.mixer.clipAction(i);i.tracks.length>0&&0===i.tracks[0].name.indexOf(".morphTargetInfluences")?r||(a.play(),r=!0):t||(a.play(),t=!0)}t&&(e.ikSolver=new THREE.CCDIKSolver(e),void 0!==e.geometry.grants&&(e.grantSolver=new THREE.MMDGrantSolver(e)))}},setCameraAnimation:function(e){void 0!==e.animations&&(e.mixer=new THREE.AnimationMixer(e),e.mixer.clipAction(e.animations[0]).play())},unifyAnimationDuration:function(e){e=void 0===e?{}:e;for(var t=0,r=this.camera,n=this.audioManager,i=0;i<this.meshes.length;i++){if(null!==(s=this.meshes[i].mixer))for(var a=0;a<s._actions.length;a++){var o=s._actions[a];t=Math.max(t,o._clip.duration)}}if(null!==r&&null!==r.mixer){var s=r.mixer;for(i=0;i<s._actions.length;i++){o=s._actions[i];t=Math.max(t,o._clip.duration)}}null!==n&&(t=Math.max(t,n.duration)),void 0!==e.afterglow&&(t+=e.afterglow);for(i=0;i<this.meshes.length;i++){if(null!==(s=this.meshes[i].mixer))for(a=0;a<s._actions.length;a++){(o=s._actions[a])._clip.duration=t}}if(null!==r&&null!==r.mixer)for(s=r.mixer,i=0;i<s._actions.length;i++){(o=s._actions[i])._clip.duration=t}null!==n&&(n.duration=t)},controlAudio:function(e){null!==this.audioManager&&this.audioManager.control(e)},animate:function(e){this.controlAudio(e);for(var t=0;t<this.meshes.length;t++)this.animateOneMesh(e,this.meshes[t]);this.sharedPhysics&&this.updateSharedPhysics(e),this.animateCamera(e)},animateOneMesh:function(e,t){var r=t.mixer,n=t.ikSolver,i=t.grantSolver,a=t.physics;null!==r&&!0===this.doAnimation&&(this.restoreBones(t),r.update(e),this.backupBones(t)),null!==n&&!0===this.doIk&&n.update(),null!==i&&!0===this.doGrant&&i.update(),!0===t.looped&&(null!==a&&a.reset(),t.looped=!1),null!==a&&this.doPhysics&&!this.sharedPhysics&&a.update(e)},updateSharedPhysics:function(e){if(0!==this.meshes.length&&this.doPhysics&&this.sharedPhysics){var t=this.getMasterPhysics();if(null!==t){for(var r=0,n=this.meshes.length;r<n;r++){null!=(i=this.meshes[r].physics)&&i.updateRigidBodies()}t.stepSimulation(e);for(r=0,n=this.meshes.length;r<n;r++){var i;null!=(i=this.meshes[r].physics)&&i.updateBones()}}}},animateCamera:function(e){if(null!==this.camera){var t=this.camera.mixer;null!==t&&void 0!==this.camera.center&&!0===this.doCameraAnimation&&(t.update(e),this.camera.updateProjectionMatrix(),this.camera.up.set(0,1,0),this.camera.up.applyQuaternion(this.camera.quaternion),this.camera.lookAt(this.camera.center))}},poseAsVpd:function(e,t,r){void 0===r&&(r={}),!0!==r.preventResetPose&&e.pose();for(var n=e.skeleton.bones,i=t.bones,a={},o=0;o<n.length;o++)a[n[o].name]=o;var s=new THREE.Vector3,l=new THREE.Quaternion;for(o=0;o<i.length;o++){var u=i[o],c=a[u.name];if(void 0!==c){var h=n[c],d=u.translation,f=u.quaternion;s.set(d[0],d[1],d[2]),l.set(f[0],f[1],f[2],f[3]),h.position.add(s),h.quaternion.multiply(l)}}(e.updateMatrixWorld(!0),!0!==r.preventIk)&&new THREE.CCDIKSolver(e).update(r.saveOriginalBonesBeforeIK);!0!==r.preventGrant&&void 0!==e.geometry.grants&&new THREE.MMDGrantSolver(e).update()},initBackupBones:function(e){e.skeleton.backupBones=[];for(var t=0;t<e.skeleton.bones.length;t++)e.skeleton.backupBones.push(e.skeleton.bones[t].clone())},backupBones:function(e){e.skeleton.backupBoneIsSaved=!0;for(var t=0;t<e.skeleton.bones.length;t++){var r=e.skeleton.backupBones[t],n=e.skeleton.bones[t];r.position.copy(n.position),r.quaternion.copy(n.quaternion)}},restoreBones:function(e){if(!0===e.skeleton.backupBoneIsSaved){e.skeleton.backupBoneIsSaved=!1;for(var t=0;t<e.skeleton.bones.length;t++){var r=e.skeleton.bones[t],n=e.skeleton.backupBones[t];r.position.copy(n.position),r.quaternion.copy(n.quaternion)}}}}},5435:(e,t,r)=>{var n=r(5108);THREE.MTLLoader=function(e){this.manager=void 0!==e?e:THREE.DefaultLoadingManager},THREE.MTLLoader.prototype={constructor:THREE.MTLLoader,load:function(e,t,r,n){var i=this,a=new THREE.FileLoader(this.manager);a.setPath(this.path),a.load(e,(function(e){t(i.parse(e))}),r,n)},setPath:function(e){this.path=e},setTexturePath:function(e){this.texturePath=e},setBaseUrl:function(e){n.warn("THREE.MTLLoader: .setBaseUrl() is deprecated. Use .setTexturePath( path ) for texture path or .setPath( path ) for general base path instead."),this.setTexturePath(e)},setCrossOrigin:function(e){this.crossOrigin=e},setMaterialOptions:function(e){this.materialOptions=e},parse:function(e){for(var t=e.split("\n"),r={},n=/\s+/,i={},a=0;a<t.length;a++){var o=t[a];if(0!==(o=o.trim()).length&&"#"!==o.charAt(0)){var s=o.indexOf(" "),l=s>=0?o.substring(0,s):o;l=l.toLowerCase();var u=s>=0?o.substring(s+1):"";if(u=u.trim(),"newmtl"===l)r={name:u},i[u]=r;else if(r)if("ka"===l||"kd"===l||"ks"===l){var c=u.split(n,3);r[l]=[parseFloat(c[0]),parseFloat(c[1]),parseFloat(c[2])]}else r[l]=u}}var h=new THREE.MTLLoader.MaterialCreator(this.texturePath||this.path,this.materialOptions);return h.setCrossOrigin(this.crossOrigin),h.setManager(this.manager),h.setMaterials(i),h}},THREE.MTLLoader.MaterialCreator=function(e,t){this.baseUrl=e||"",this.options=t,this.materialsInfo={},this.materials={},this.materialsArray=[],this.nameLookup={},this.side=this.options&&this.options.side?this.options.side:THREE.FrontSide,this.wrap=this.options&&this.options.wrap?this.options.wrap:THREE.RepeatWrapping},THREE.MTLLoader.MaterialCreator.prototype={constructor:THREE.MTLLoader.MaterialCreator,crossOrigin:"Anonymous",setCrossOrigin:function(e){this.crossOrigin=e},setManager:function(e){this.manager=e},setMaterials:function(e){this.materialsInfo=this.convert(e),this.materials={},this.materialsArray=[],this.nameLookup={}},convert:function(e){if(!this.options)return e;var t={};for(var r in e){var n=e[r],i={};for(var a in t[r]=i,n){var o=!0,s=n[a],l=a.toLowerCase();switch(l){case"kd":case"ka":case"ks":this.options&&this.options.normalizeRGB&&(s=[s[0]/255,s[1]/255,s[2]/255]),this.options&&this.options.ignoreZeroRGBs&&0===s[0]&&0===s[1]&&0===s[2]&&(o=!1)}o&&(i[l]=s)}}return t},preload:function(){for(var e in this.materialsInfo)this.create(e)},getIndex:function(e){return this.nameLookup[e]},getAsArray:function(){var e=0;for(var t in this.materialsInfo)this.materialsArray[e]=this.create(t),this.nameLookup[t]=e,e++;return this.materialsArray},create:function(e){return void 0===this.materials[e]&&this.createMaterial_(e),this.materials[e]},createMaterial_:function(e){var t=this,r=this.materialsInfo[e],n={name:e,side:this.side};function i(e,r){if(!n[e]){var i,a,o=t.getTextureParams(r,n),s=t.loadTexture((i=t.baseUrl,"string"!=typeof(a=o.url)||""===a?"":/^https?:\/\//i.test(a)?a:i+a));s.repeat.copy(o.scale),s.offset.copy(o.offset),s.wrapS=t.wrap,s.wrapT=t.wrap,n[e]=s}}for(var a in r){var o,s=r[a];if(""!==s)switch(a.toLowerCase()){case"kd":n.color=(new THREE.Color).fromArray(s);break;case"ks":n.specular=(new THREE.Color).fromArray(s);break;case"map_kd":i("map",s);break;case"map_ks":i("specularMap",s);break;case"norm":i("normalMap",s);break;case"map_bump":case"bump":i("bumpMap",s);break;case"ns":n.shininess=parseFloat(s);break;case"d":(o=parseFloat(s))<1&&(n.opacity=o,n.transparent=!0);break;case"tr":(o=parseFloat(s))>0&&(n.opacity=1-o,n.transparent=!0)}}return this.materials[e]=new THREE.MeshPhongMaterial(n),this.materials[e]},getTextureParams:function(e,t){var r,n={scale:new THREE.Vector2(1,1),offset:new THREE.Vector2(0,0)},i=e.split(/\s+/);return(r=i.indexOf("-bm"))>=0&&(t.bumpScale=parseFloat(i[r+1]),i.splice(r,2)),(r=i.indexOf("-s"))>=0&&(n.scale.set(parseFloat(i[r+1]),parseFloat(i[r+2])),i.splice(r,4)),(r=i.indexOf("-o"))>=0&&(n.offset.set(parseFloat(i[r+1]),parseFloat(i[r+2])),i.splice(r,4)),n.url=i.join(" ").trim(),n},loadTexture:function(e,t,r,n,i){var a,o=THREE.Loader.Handlers.get(e),s=void 0!==this.manager?this.manager:THREE.DefaultLoadingManager;return null===o&&(o=new THREE.TextureLoader(s)),o.setCrossOrigin&&o.setCrossOrigin(this.crossOrigin),a=o.load(e,r,n,i),void 0!==t&&(a.mapping=t),a}}},4422:(e,t,r)=>{var n=r(5108);THREE.OBJLoader=function(){var e=/^[og]\s*(.+)?/,t=/^mtllib /,r=/^usemtl /;function i(){var e={objects:[],object:{},vertices:[],normals:[],colors:[],uvs:[],materialLibraries:[],startObject:function(e,t){if(this.object&&!1===this.object.fromDeclaration)return this.object.name=e,void(this.object.fromDeclaration=!1!==t);var r=this.object&&"function"==typeof this.object.currentMaterial?this.object.currentMaterial():void 0;if(this.object&&"function"==typeof this.object._finalize&&this.object._finalize(!0),this.object={name:e||"",fromDeclaration:!1!==t,geometry:{vertices:[],normals:[],colors:[],uvs:[]},materials:[],smooth:!0,startMaterial:function(e,t){var r=this._finalize(!1);r&&(r.inherited||r.groupCount<=0)&&this.materials.splice(r.index,1);var n={index:this.materials.length,name:e||"",mtllib:Array.isArray(t)&&t.length>0?t[t.length-1]:"",smooth:void 0!==r?r.smooth:this.smooth,groupStart:void 0!==r?r.groupEnd:0,groupEnd:-1,groupCount:-1,inherited:!1,clone:function(e){var t={index:"number"==typeof e?e:this.index,name:this.name,mtllib:this.mtllib,smooth:this.smooth,groupStart:0,groupEnd:-1,groupCount:-1,inherited:!1};return t.clone=this.clone.bind(t),t}};return this.materials.push(n),n},currentMaterial:function(){if(this.materials.length>0)return this.materials[this.materials.length-1]},_finalize:function(e){var t=this.currentMaterial();if(t&&-1===t.groupEnd&&(t.groupEnd=this.geometry.vertices.length/3,t.groupCount=t.groupEnd-t.groupStart,t.inherited=!1),e&&this.materials.length>1)for(var r=this.materials.length-1;r>=0;r--)this.materials[r].groupCount<=0&&this.materials.splice(r,1);return e&&0===this.materials.length&&this.materials.push({name:"",smooth:this.smooth}),t}},r&&r.name&&"function"==typeof r.clone){var n=r.clone(0);n.inherited=!0,this.object.materials.push(n)}this.objects.push(this.object)},finalize:function(){this.object&&"function"==typeof this.object._finalize&&this.object._finalize(!0)},parseVertexIndex:function(e,t){var r=parseInt(e,10);return 3*(r>=0?r-1:r+t/3)},parseNormalIndex:function(e,t){var r=parseInt(e,10);return 3*(r>=0?r-1:r+t/3)},parseUVIndex:function(e,t){var r=parseInt(e,10);return 2*(r>=0?r-1:r+t/2)},addVertex:function(e,t,r){var n=this.vertices,i=this.object.geometry.vertices;i.push(n[e+0],n[e+1],n[e+2]),i.push(n[t+0],n[t+1],n[t+2]),i.push(n[r+0],n[r+1],n[r+2])},addVertexLine:function(e){var t=this.vertices;this.object.geometry.vertices.push(t[e+0],t[e+1],t[e+2])},addNormal:function(e,t,r){var n=this.normals,i=this.object.geometry.normals;i.push(n[e+0],n[e+1],n[e+2]),i.push(n[t+0],n[t+1],n[t+2]),i.push(n[r+0],n[r+1],n[r+2])},addColor:function(e,t,r){var n=this.colors,i=this.object.geometry.colors;i.push(n[e+0],n[e+1],n[e+2]),i.push(n[t+0],n[t+1],n[t+2]),i.push(n[r+0],n[r+1],n[r+2])},addUV:function(e,t,r){var n=this.uvs,i=this.object.geometry.uvs;i.push(n[e+0],n[e+1]),i.push(n[t+0],n[t+1]),i.push(n[r+0],n[r+1])},addUVLine:function(e){var t=this.uvs;this.object.geometry.uvs.push(t[e+0],t[e+1])},addFace:function(e,t,r,n,i,a,o,s,l){var u=this.vertices.length,c=this.parseVertexIndex(e,u),h=this.parseVertexIndex(t,u),d=this.parseVertexIndex(r,u);if(this.addVertex(c,h,d),void 0!==n){var f=this.uvs.length;c=this.parseUVIndex(n,f),h=this.parseUVIndex(i,f),d=this.parseUVIndex(a,f),this.addUV(c,h,d)}if(void 0!==o){var p=this.normals.length;c=this.parseNormalIndex(o,p),h=o===s?c:this.parseNormalIndex(s,p),d=o===l?c:this.parseNormalIndex(l,p),this.addNormal(c,h,d)}this.colors.length>0&&this.addColor(c,h,d)},addLineGeometry:function(e,t){this.object.geometry.type="Line";for(var r=this.vertices.length,n=this.uvs.length,i=0,a=e.length;i<a;i++)this.addVertexLine(this.parseVertexIndex(e[i],r));var o=0;for(a=t.length;o<a;o++)this.addUVLine(this.parseUVIndex(t[o],n))}};return e.startObject("",!1),e}function a(e){this.manager=void 0!==e?e:THREE.DefaultLoadingManager,this.materials=null}return a.prototype={constructor:a,load:function(e,t,r,n){var i=this,a=new THREE.FileLoader(i.manager);a.setPath(this.path),a.load(e,(function(e){t(i.parse(e))}),r,n)},setPath:function(e){this.path=e},setMaterials:function(e){return this.materials=e,this},parse:function(a){n.time("OBJLoader");var o=new i;-1!==a.indexOf("\r\n")&&(a=a.replace(/\r\n/g,"\n")),-1!==a.indexOf("\\\n")&&(a=a.replace(/\\\n/g,""));for(var s=a.split("\n"),l="",u="",c=[],h="function"==typeof"".trimLeft,d=0,f=s.length;d<f;d++)if(l=s[d],0!==(l=h?l.trimLeft():l.trim()).length&&"#"!==(u=l.charAt(0)))if("v"===u){var p=l.split(/\s+/);switch(p[0]){case"v":o.vertices.push(parseFloat(p[1]),parseFloat(p[2]),parseFloat(p[3])),8===p.length&&o.colors.push(parseFloat(p[4]),parseFloat(p[5]),parseFloat(p[6]));break;case"vn":o.normals.push(parseFloat(p[1]),parseFloat(p[2]),parseFloat(p[3]));break;case"vt":o.uvs.push(parseFloat(p[1]),parseFloat(p[2]))}}else if("f"===u){for(var m=l.substr(1).trim().split(/\s+/),g=[],v=0,y=m.length;v<y;v++){var b=m[v];if(b.length>0){var E=b.split("/");g.push(E)}}var x=g[0];for(v=1,y=g.length-1;v<y;v++){var w=g[v],T=g[v+1];o.addFace(x[0],w[0],T[0],x[1],w[1],T[1],x[2],w[2],T[2])}}else if("l"===u){var _=l.substring(1).trim().split(" "),S=[],M=[];if(-1===l.indexOf("/"))S=_;else for(var R=0,A=_.length;R<A;R++){var C=_[R].split("/");""!==C[0]&&S.push(C[0]),""!==C[1]&&M.push(C[1])}o.addLineGeometry(S,M)}else if(null!==(c=e.exec(l))){var L=(" "+c[0].substr(1).trim()).substr(1);o.startObject(L)}else if(r.test(l))o.object.startMaterial(l.substring(7).trim(),o.materialLibraries);else if(t.test(l))o.materialLibraries.push(l.substring(7).trim());else{if("s"!==u){if("\0"===l)continue;throw new Error('THREE.OBJLoader: Unexpected line: "'+l+'"')}if((c=l.split(" ")).length>1){var O=c[1].trim().toLowerCase();o.object.smooth="0"!==O&&"off"!==O}else o.object.smooth=!0;(V=o.object.currentMaterial())&&(V.smooth=o.object.smooth)}o.finalize();var I=new THREE.Group;I.materialLibraries=[].concat(o.materialLibraries);for(d=0,f=o.objects.length;d<f;d++){var P=o.objects[d],H=P.geometry,k=P.materials,N="Line"===H.type;if(0!==H.vertices.length){var U=new THREE.BufferGeometry;U.addAttribute("position",new THREE.Float32BufferAttribute(H.vertices,3)),H.normals.length>0?U.addAttribute("normal",new THREE.Float32BufferAttribute(H.normals,3)):U.computeVertexNormals(),H.colors.length>0&&U.addAttribute("color",new THREE.Float32BufferAttribute(H.colors,3)),H.uvs.length>0&&U.addAttribute("uv",new THREE.Float32BufferAttribute(H.uvs,2));for(var D,F=[],B=0,z=k.length;B<z;B++){var j=k[B],V=void 0;if(null!==this.materials&&(V=this.materials.create(j.name),N&&V&&!(V instanceof THREE.LineBasicMaterial))){var G=new THREE.LineBasicMaterial;G.copy(V),V=G}V||((V=N?new THREE.LineBasicMaterial:new THREE.MeshPhongMaterial).name=j.name),V.flatShading=!j.smooth,F.push(V)}if(F.length>1){for(B=0,z=k.length;B<z;B++){j=k[B];U.addGroup(j.groupStart,j.groupCount,B)}D=N?new THREE.LineSegments(U,F):new THREE.Mesh(U,F)}else D=N?new THREE.LineSegments(U,F[0]):new THREE.Mesh(U,F[0]);D.name=P.name,I.add(D)}}return n.timeEnd("OBJLoader"),I}},a}()},1441:(e,t,r)=>{"use strict";var n=r(5108);void 0===THREE.OBJLoader2&&(THREE.OBJLoader2={}),void 0===THREE.LoaderSupport&&n.error('"THREE.LoaderSupport" is not available. "THREE.OBJLoader2" requires it. Please include "LoaderSupport.js" in your HTML.'),THREE.OBJLoader2=function(){var e=THREE.LoaderSupport.LoaderBase,t=THREE.LoaderSupport.Validator,r=THREE.LoaderSupport.ConsoleLogger;function i(e,r){THREE.LoaderSupport.LoaderBase.call(this,e,r),this.logger.logInfo("Using THREE.OBJLoader2 version: 2.2.1"),this.materialPerSmoothingGroup=!1,this.fileLoader=t.verifyInput(this.fileLoader,new THREE.FileLoader(this.manager)),this.workerSupport=null,this.terminateWorkerOnLoad=!0}i.prototype=Object.create(THREE.LoaderSupport.LoaderBase.prototype),i.prototype.constructor=i,i.prototype.setMaterialPerSmoothingGroup=function(e){this.materialPerSmoothingGroup=!0===e},i.prototype.load=function(e,r,n,i,a,o){var s=this;if(!t.isValid(n)){var l=0,u=0;n=function(t){if(t.lengthComputable&&(u=t.loaded/t.total)>l){l=u;var r='Download of "'+e+'": '+(100*u).toFixed(2)+"%";s.onProgress("progressLoad",r,u)}}}t.isValid(i)||(i=function(t){var r='Error occurred while downloading "'+e+'"';s.logger.logError(r+": "+t),s.onProgress("error",r,-1)}),this.fileLoader.setPath(this.path),this.fileLoader.setResponseType("arraybuffer"),this.fileLoader.load(e,(function(e){if(o)s.parseAsync(e,r);else{var t=new THREE.LoaderSupport.Callbacks;t.setCallbackOnMeshAlter(a),s._setCallbacks(t),r({detail:{loaderRootNode:s.parse(e),modelName:s.modelName,instanceNo:s.instanceNo}})}}),n,i)},i.prototype.run=function(e,r){this._applyPrepData(e);var n=this._checkFiles(e.resources);t.isValid(r)&&(this.terminateWorkerOnLoad=!1,this.workerSupport=r,this.logger=r.logger);var i=this;this._loadMtl(n.mtl,(function(r){i.builder.setMaterials(r),t.isValid(n.obj.content)?e.useAsync?i.parseAsync(n.obj.content,i.callbacks.onLoad):i.parse(n.obj.content):(i.setPath(n.obj.path),i.load(n.obj.name,i.callbacks.onLoad,null,null,i.callbacks.onMeshAlter,e.useAsync))}),e.crossOrigin)},i.prototype._applyPrepData=function(e){THREE.LoaderSupport.LoaderBase.prototype._applyPrepData.call(this,e),t.isValid(e)&&this.setMaterialPerSmoothingGroup(e.materialPerSmoothingGroup)},i.prototype.parse=function(e){this.logger.logTimeStart("OBJLoader2 parse: "+this.modelName);var t=new o;t.setLogConfig(this.logger.enabled,this.logger.debug),t.setMaterialPerSmoothingGroup(this.materialPerSmoothingGroup),t.setUseIndices(this.useIndices),t.setDisregardNormals(this.disregardNormals),t.setMaterials(this.builder.getMaterials());var r=this;t.setCallbackBuilder((function(e){var t,n=r.builder.processPayload(e);for(var i in n)t=n[i],r.loaderRootNode.add(t)}));if(t.setCallbackProgress((function(e,t){r.onProgress("progressParse",e,t)})),e instanceof ArrayBuffer||e instanceof Uint8Array)this.logger.logInfo("Parsing arrayBuffer..."),t.parse(e);else{if(!("string"==typeof e||e instanceof String))throw"Provided content was neither of type String nor Uint8Array! Aborting...";this.logger.logInfo("Parsing text..."),t.parseText(e)}return this.logger.logTimeEnd("OBJLoader2 parse: "+this.modelName),this.loaderRootNode},i.prototype.parseAsync=function(n,i){this.logger.logTimeStart("OBJLoader2 parseAsync: "+this.modelName);var u=this;this.workerSupport=t.verifyInput(this.workerSupport,new THREE.LoaderSupport.WorkerSupport(this.logger));this.workerSupport.validate((function(n,i){var u="";return u+="/**\n",u+="  * This code was constructed by OBJLoader2 buildCode.\n",u+="  */\n\n",u+=n("Validator",t),u+=i("ConsoleLogger","ConsoleLogger",r),u+=i("LoaderBase","LoaderBase",e),u+=n("Consts",a),u+=i("Parser","Parser",o),u+=i("RawMesh","RawMesh",s),u+=i("RawMeshSubGroup","RawMeshSubGroup",l)}),!1),this.workerSupport.setCallbacks((function(e){var t,r=u.builder.processPayload(e);for(var n in r)t=r[n],u.loaderRootNode.add(t)}),(function(){i({detail:{loaderRootNode:u.loaderRootNode,modelName:u.modelName,instanceNo:u.instanceNo}}),u.logger.logTimeEnd("OBJLoader2 parseAsync: "+u.modelName)})),u.terminateWorkerOnLoad&&this.workerSupport.setTerminateRequested(!0);var c={},h=this.builder.getMaterials();for(var d in h)c[d]=d;this.workerSupport.run({params:{useAsync:!0,materialPerSmoothingGroup:this.materialPerSmoothingGroup,useIndices:this.useIndices,disregardNormals:this.disregardNormals},logger:{debug:this.logger.debug,enabled:this.logger.enabled},materials:{materials:c},data:{input:n,options:null}})};var a={CODE_LF:10,CODE_CR:13,CODE_SPACE:32,CODE_SLASH:47,STRING_LF:"\n",STRING_CR:"\r",STRING_SPACE:" ",STRING_SLASH:"/",LINE_F:"f",LINE_G:"g",LINE_L:"l",LINE_O:"o",LINE_S:"s",LINE_V:"v",LINE_VT:"vt",LINE_VN:"vn",LINE_MTLLIB:"mtllib",LINE_USEMTL:"usemtl"},o=function(){var e=THREE.LoaderSupport.ConsoleLogger;function r(){this.callbackProgress=null,this.callbackBuilder=null,this.materials={},this.rawMesh=null,this.useAsync=!1,this.materialPerSmoothingGroup=!1,this.useIndices=!1,this.disregardNormals=!1,this.inputObjectCount=1,this.outputObjectCount=1,this.counts={vertices:0,faces:0,doubleIndicesCount:0},this.logger=new e,this.totalBytes=0}return r.prototype.setUseAsync=function(e){this.useAsync=e},r.prototype.setMaterialPerSmoothingGroup=function(e){this.materialPerSmoothingGroup=e},r.prototype.setUseIndices=function(e){this.useIndices=e},r.prototype.setDisregardNormals=function(e){this.disregardNormals=e},r.prototype.setMaterials=function(e){this.materials=t.verifyInput(e,this.materials),this.materials=t.verifyInput(this.materials,{})},r.prototype.setCallbackBuilder=function(e){if(this.callbackBuilder=e,!t.isValid(this.callbackBuilder))throw'Unable to run as no "builder" callback is set.'},r.prototype.setCallbackProgress=function(e){this.callbackProgress=e},r.prototype.setLogConfig=function(e,t){this.logger.setEnabled(e),this.logger.setDebug(t)},r.prototype.configure=function(){if(this.rawMesh=new s(this.materialPerSmoothingGroup,this.useIndices,this.disregardNormals),this.logger.isEnabled()){var e=Object.keys(this.materials),t="OBJLoader2.Parser configuration:"+(e.length>0?"\n\tmaterialNames:\n\t\t- "+e.join("\n\t\t- "):"\n\tmaterialNames: None")+"\n\tuseAsync: "+this.useAsync+"\n\tmaterialPerSmoothingGroup: "+this.materialPerSmoothingGroup+"\n\tuseIndices: "+this.useIndices+"\n\tdisregardNormals: "+this.disregardNormals+"\n\tcallbackBuilderName: "+this.callbackBuilder.name+"\n\tcallbackProgressName: "+this.callbackProgress.name;this.logger.logInfo(t)}},r.prototype.parse=function(e){this.logger.logTimeStart("OBJLoader2.Parser.parse"),this.configure();var t=new Uint8Array(e),r=t.byteLength;this.totalBytes=r;for(var n,i=new Array(128),o=0,s=new Array(16),l=0,u="",c=0;c<r;c++)switch(n=t[c]){case a.CODE_SPACE:u.length>0&&(i[o++]=u),s[l++]=0,u="";break;case a.CODE_SLASH:u.length>0&&(i[o++]=u),s[l++]=1,u="";break;case a.CODE_LF:u.length>0&&(i[o++]=u),u="",this.processLine(i,o,s,l,c),o=0,l=0;break;case a.CODE_CR:break;default:u+=String.fromCharCode(n)}this.finalize(c),this.logger.logTimeEnd("OBJLoader2.Parser.parse")},r.prototype.parseText=function(e){this.logger.logTimeStart("OBJLoader2.Parser.parseText"),this.configure();var t=e.length;this.totalBytes=t;for(var r,n=new Array(128),i=0,o=new Array(16),s=0,l="",u=0;u<t;u++)switch(r=e[u]){case a.STRING_SPACE:l.length>0&&(n[i++]=l),o[s++]=0,l="";break;case a.STRING_SLASH:l.length>0&&(n[i++]=l),o[s++]=1,l="";break;case a.STRING_LF:l.length>0&&(n[i++]=l),l="",this.processLine(n,i,o,s,u),i=0,s=0;break;case a.STRING_CR:break;default:l+=r}this.finalize(u),this.logger.logTimeEnd("OBJLoader2.Parser.parseText")},r.prototype.processLine=function(e,t,r,n,i){if(!(t<1)){var o=function(e,t){for(var r=0,n=0;n<t;n++)r+=e[n];return r},s=function(e,t,r){var n="";if(2===t)n=e[1];else{for(var i=t-1,a=1;a<i;a++)n+=e[a]+(0===r[a]?" ":"/");n+=e[i]}return n},l=function(e,t){for(var r=0;r<t;r++)e[r]=""};switch(e[0]){case a.LINE_V:this.rawMesh.pushVertex(e,t>4);break;case a.LINE_VT:this.rawMesh.pushUv(e);break;case a.LINE_VN:this.rawMesh.pushNormal(e);break;case a.LINE_F:this.rawMesh.processFaces(e,t,o(r,n));break;case a.LINE_L:this.rawMesh.processLines(e,t,o(r,n));break;case a.LINE_S:this.rawMesh.pushSmoothingGroup(e[1]),l(e,t);break;case a.LINE_G:this.processCompletedMesh(i),this.rawMesh.pushGroup(s(e,t,r)),l(e,t);break;case a.LINE_O:this.rawMesh.pushObject(s(e,t,r)),l(e,t);break;case a.LINE_MTLLIB:this.rawMesh.pushMtllib(s(e,t,r)),l(e,t);break;case a.LINE_USEMTL:this.rawMesh.pushUsemtl(s(e,t,r)),l(e,t)}}},r.prototype.createRawMeshReport=function(e,t){var r=e.createReport(t);return"Input Object number: "+t+"\n\tObject name: "+r.objectName+"\n\tGroup name: "+r.groupName+"\n\tMtllib name: "+r.mtllibName+"\n\tVertex count: "+r.vertexCount+"\n\tNormal count: "+r.normalCount+"\n\tUV count: "+r.uvCount+"\n\tSmoothingGroup count: "+r.smoothingGroupCount+"\n\tMaterial count: "+r.mtlCount+"\n\tReal RawMeshSubGroup count: "+r.subGroups},r.prototype.processCompletedMesh=function(e){var r=this.rawMesh.finalize();if(t.isValid(r)){if(this.rawMesh.colors.length>0&&this.rawMesh.colors.length!==this.rawMesh.vertices.length)throw"Vertex Colors were detected, but vertex count and color count do not match!";this.logger.isDebug()&&this.logger.logDebug(this.createRawMeshReport(this.rawMesh,this.inputObjectCount)),this.inputObjectCount++,this.buildMesh(r,e);var n=e/this.totalBytes;return this.callbackProgress("Completed [o: "+this.rawMesh.objectName+" g:"+this.rawMesh.groupName+"] Total progress: "+(100*n).toFixed(2)+"%",n),this.rawMesh.reset(this.rawMesh.smoothingGroup.splitMaterials),!0}return!1},r.prototype.finalize=function(e){if(this.logger.logInfo("Global output object count: "+this.outputObjectCount),this.processCompletedMesh(e)&&this.logger.isEnabled()){var t="Overall counts: \n\tVertices: "+this.counts.vertices+"\n\tFaces: "+this.counts.faces+"\n\tMultiple definitions: "+this.counts.doubleIndicesCount;this.logger.logInfo(t)}},r.prototype.buildMesh=function(e,r){var n=e.subGroups,i=new Float32Array(e.absoluteVertexCount);this.counts.vertices+=e.absoluteVertexCount/3,this.counts.faces+=e.faceCount,this.counts.doubleIndicesCount+=e.doubleIndicesCount;var a,o,s,l,u,c,h,d=e.absoluteIndexCount>0?new Uint32Array(e.absoluteIndexCount):null,f=e.absoluteColorCount>0?new Float32Array(e.absoluteColorCount):null,p=e.absoluteNormalCount>0?new Float32Array(e.absoluteNormalCount):null,m=e.absoluteUvCount>0?new Float32Array(e.absoluteUvCount):null,g=t.isValid(f),v=[],y=n.length>1,b=0,E=[],x=[],w=0,T=0,_=0,S=0,M=0,R=0,A=0;for(var C in n)if(n.hasOwnProperty(C)){if(c=(h=(a=n[C]).materialName)+(g?"_vertexColor":"")+(0===a.smoothingGroup?"_flat":""),l=this.materials[h],u=this.materials[c],!t.isValid(l)&&!t.isValid(u)){var L=g?"vertexColorMaterial":"defaultMaterial";l=this.materials[L],this.logger.logWarn('object_group "'+a.objectName+"_"+a.groupName+'" was defined with unresolvable material "'+h+'"! Assigning "'+L+'".'),(h=L)===c&&(u=l,c=L)}if(!t.isValid(u)){var O={materialNameOrg:h,materialName:c,materialProperties:{vertexColors:g?2:0,flatShading:0===a.smoothingGroup}},I={cmd:"materialData",materials:{materialCloneInstructions:O}};this.callbackBuilder(I),this.useAsync&&(this.materials[c]=O)}if(y?((o=E[c])||(o=b,E[c]=b,v.push(c),b++),s={start:R,count:A=this.useIndices?a.indices.length:a.vertices.length/3,index:o},x.push(s),R+=A):v.push(c),i.set(a.vertices,w),w+=a.vertices.length,d&&(d.set(a.indices,T),T+=a.indices.length),f&&(f.set(a.colors,_),_+=a.colors.length),p&&(p.set(a.normals,S),S+=a.normals.length),m&&(m.set(a.uvs,M),M+=a.uvs.length),this.logger.isDebug()){var P=t.isValid(o)?"\n\t\tmaterialIndex: "+o:"",H="Output Object no.: "+this.outputObjectCount+"\n\t\tgroupName: "+a.groupName+P+"\n\t\tmaterialName: "+a.materialName+"\n\t\tsmoothingGroup: "+a.smoothingGroup+"\n\t\tobjectName: "+a.objectName+"\n\t\t#vertices: "+a.vertices.length/3+"\n\t\t#indices: "+a.indices.length+"\n\t\t#colors: "+a.colors.length/3+"\n\t\t#uvs: "+a.uvs.length/2+"\n\t\t#normals: "+a.normals.length/3;this.logger.logDebug(H)}}this.outputObjectCount++,this.callbackBuilder({cmd:"meshData",progress:{numericalValue:r/this.totalBytes},params:{meshName:e.name},materials:{multiMaterial:y,materialNames:v,materialGroups:x},buffers:{vertices:i,indices:d,colors:f,normals:p,uvs:m}},[i.buffer],t.isValid(d)?[d.buffer]:null,t.isValid(f)?[f.buffer]:null,t.isValid(p)?[p.buffer]:null,t.isValid(m)?[m.buffer]:null)},r}(),s=function(){function e(e,t,r){this.vertices=[],this.colors=[],this.normals=[],this.uvs=[],this.useIndices=!0===t,this.disregardNormals=!0===r,this.objectName="",this.groupName="",this.activeMtlName="",this.mtllibName="",this.reset(e)}return e.prototype.reset=function(e){this.subGroups=[],this.subGroupInUse=null,this.smoothingGroup={splitMaterials:!0===e,normalized:-1,real:-1},this.pushSmoothingGroup(1),this.doubleIndicesCount=0,this.faceCount=0,this.mtlCount=0,this.smoothingGroupCount=0},e.prototype.pushVertex=function(e,t){this.vertices.push(parseFloat(e[1])),this.vertices.push(parseFloat(e[2])),this.vertices.push(parseFloat(e[3])),t&&(this.colors.push(parseFloat(e[4])),this.colors.push(parseFloat(e[5])),this.colors.push(parseFloat(e[6])))},e.prototype.pushUv=function(e){this.uvs.push(parseFloat(e[1])),this.uvs.push(parseFloat(e[2]))},e.prototype.pushNormal=function(e){this.normals.push(parseFloat(e[1])),this.normals.push(parseFloat(e[2])),this.normals.push(parseFloat(e[3]))},e.prototype.pushGroup=function(e){this.groupName=t.verifyInput(e,"")},e.prototype.pushObject=function(e){this.objectName=t.verifyInput(e,"")},e.prototype.pushMtllib=function(e){this.mtllibName=t.verifyInput(e,"")},e.prototype.pushUsemtl=function(e){this.activeMtlName!==e&&t.isValid(e)&&(this.activeMtlName=e,this.mtlCount++,this.verifyIndex())},e.prototype.pushSmoothingGroup=function(e){var t=parseInt(e);isNaN(t)&&(t="off"===e?0:1);var r=this.smoothingGroup.normalized;this.smoothingGroup.normalized=this.smoothingGroup.splitMaterials?t:0===t?0:1,this.smoothingGroup.real=t,r!==t&&(this.smoothingGroupCount++,this.verifyIndex())},e.prototype.verifyIndex=function(){var e=this.activeMtlName+"|"+this.smoothingGroup.normalized;this.subGroupInUse=this.subGroups[e],t.isValid(this.subGroupInUse)||(this.subGroupInUse=new l(this.objectName,this.groupName,this.activeMtlName,this.smoothingGroup.normalized),this.subGroups[e]=this.subGroupInUse)},e.prototype.processFaces=function(e,t,r){var n,i,a=t-1;if(0===r)for(n=2,i=a;n<i;n++)this.buildFace(e[1]),this.buildFace(e[n]),this.buildFace(e[n+1]);else if(a===2*r)for(n=3,i=a-2;n<i;n+=2)this.buildFace(e[1],e[2]),this.buildFace(e[n],e[n+1]),this.buildFace(e[n+2],e[n+3]);else if(2*a==3*r)for(n=4,i=a-3;n<i;n+=3)this.buildFace(e[1],e[2],e[3]),this.buildFace(e[n],e[n+1],e[n+2]),this.buildFace(e[n+3],e[n+4],e[n+5]);else for(n=3,i=a-2;n<i;n+=2)this.buildFace(e[1],void 0,e[2]),this.buildFace(e[n],void 0,e[n+1]),this.buildFace(e[n+2],void 0,e[n+3])},e.prototype.buildFace=function(e,r,n){var i=this.subGroupInUse;this.disregardNormals&&(n=void 0);var a=this,o=function(){var t=parseInt(e),o=3*(t>0?t-1:t+a.vertices.length/3),s=i.vertices;s.push(a.vertices[o++]),s.push(a.vertices[o++]),s.push(a.vertices[o]);var l=a.colors.length>0?o:null;if(null!==l){var u=i.colors;u.push(a.colors[l++]),u.push(a.colors[l++]),u.push(a.colors[l])}if(r){var c=parseInt(r),h=2*(c>0?c-1:c+a.uvs.length/2),d=i.uvs;d.push(a.uvs[h++]),d.push(a.uvs[h])}if(n){var f=parseInt(n),p=3*(f>0?f-1:f+a.normals.length/3),m=i.normals;m.push(a.normals[p++]),m.push(a.normals[p++]),m.push(a.normals[p])}};if(this.useIndices){var s=e+(r?"_"+r:"_n")+(n?"_"+n:"_n"),l=i.indexMappings[s];t.isValid(l)?this.doubleIndicesCount++:(l=i.vertices.length/3,o(),i.indexMappings[s]=l,i.indexMappingsCount++),i.indices.push(l)}else o();this.faceCount++},e.prototype.processLines=function(e,t,r){var n,i=1,a=t-1;if(a===2*r)for(n=a-2;i<n;i+=2)this.vertices.push(parseInt(e[i])),this.uvs.push(parseInt(e[i+1]));else for(n=a-1;i<n;i++)this.vertices.push(parseInt(e[i]))},e.prototype.finalize=function(){var e,t,r=[],n=0,i=0,a=0,o=0,s=0,l=0;for(var u in this.subGroups)if((e=this.subGroups[u]).vertices.length>0){if((t=e.indices).length>0&&i>0)for(var c in t)t[c]=t[c]+i;r.push(e),n+=e.vertices.length,i+=e.indexMappingsCount,a+=e.indices.length,o+=e.colors.length,l+=e.uvs.length,s+=e.normals.length}var h=null;return r.length>0&&(h={name:""!==this.groupName?this.groupName:this.objectName,subGroups:r,absoluteVertexCount:n,absoluteIndexCount:a,absoluteColorCount:o,absoluteNormalCount:s,absoluteUvCount:l,faceCount:this.faceCount,doubleIndicesCount:this.doubleIndicesCount}),h},e.prototype.createReport=function(){return{objectName:this.objectName,groupName:this.groupName,mtllibName:this.mtllibName,vertexCount:this.vertices.length/3,normalCount:this.normals.length/3,uvCount:this.uvs.length/2,smoothingGroupCount:this.smoothingGroupCount,mtlCount:this.mtlCount,subGroups:this.subGroups.length}},e}(),l=function(){function e(e,t,r,n){this.objectName=e,this.groupName=t,this.materialName=r,this.smoothingGroup=n,this._init()}return e.prototype._init=function(){this.vertices=[],this.indexMappingsCount=0,this.indexMappings=[],this.indices=[],this.colors=[],this.uvs=[],this.normals=[]},e}();return i.prototype._checkFiles=function(e){var r,n={mtl:null,obj:null};for(var i in e)if(r=e[i],t.isValid(r.name))if(t.isValid(r.content)){if("OBJ"===r.extension){if(!(r.content instanceof Uint8Array))throw"Provided content is not of type arraybuffer! Aborting...";n.obj=r}else if("MTL"===r.extension&&t.isValid(r.name)){if(!("string"==typeof r.content||r.content instanceof String))throw"Provided  content is not of type String! Aborting...";n.mtl=r}else if("ZIP"!==r.extension)throw'Unidentified resource "'+r.name+'": '+r.url}else{if(!("string"==typeof r.name||r.name instanceof String))throw"Provided file is not properly defined! Aborting...";if("OBJ"===r.extension)n.obj=r;else if("MTL"===r.extension)n.mtl=r;else if("ZIP"!==r.extension)throw'Unidentified resource "'+r.name+'": '+r.url}return n},i.prototype.loadMtl=function(e,t,r,n){var i=new THREE.LoaderSupport.ResourceDescriptor(e,"MTL");i.setContent(t),this._loadMtl(i,r,n)},i.prototype._loadMtl=function(e,r,i){void 0===THREE.MTLLoader&&n.error('"THREE.MTLLoader" is not available. "THREE.OBJLoader2" requires it for loading MTL files.'),t.isValid(e)&&this.logger.logTimeStart("Loading MTL: "+e.name);var a=[],o=this,s=function(n){var i=[];if(t.isValid(n))for(var s in n.preload(),i=n.materials)i.hasOwnProperty(s)&&(a[s]=i[s]);t.isValid(e)&&o.logger.logTimeEnd("Loading MTL: "+e.name),r(a)},l=new THREE.MTLLoader;if(i=t.verifyInput(i,"anonymous"),l.setCrossOrigin(i),t.isValid(e)&&(t.isValid(e.content)||t.isValid(e.url))){if(l.setPath(e.path),t.isValid(e.content))s(t.isValid(e.content)?l.parse(e.content):null);else if(t.isValid(e.url)){l.load(e.name,s,void 0,(function(t){var r='Error occurred while downloading "'+e.url+'"';throw o.logger.logError(r+": "+t),r}))}}else s()},i}()},6507:(e,t,r)=>{var n=r(5108);THREE.PCDLoader=function(e){this.manager=void 0!==e?e:THREE.DefaultLoadingManager,this.littleEndian=!0},THREE.PCDLoader.prototype={constructor:THREE.PCDLoader,load:function(e,t,r,n){var i=this,a=new THREE.FileLoader(i.manager);a.setResponseType("arraybuffer"),a.load(e,(function(r){t(i.parse(r,e))}),r,n)},parse:function(e,t){var r=THREE.LoaderUtils.decodeText(e),i=function(e){var t={},r=e.search(/[\r\n]DATA\s(\S*)\s/i),n=/[\r\n]DATA\s(\S*)\s/i.exec(e.substr(r-1));if(t.data=n[1],t.headerLen=n[0].length+r,t.str=e.substr(0,t.headerLen),t.str=t.str.replace(/\#.*/gi,""),t.version=/VERSION (.*)/i.exec(t.str),t.fields=/FIELDS (.*)/i.exec(t.str),t.size=/SIZE (.*)/i.exec(t.str),t.type=/TYPE (.*)/i.exec(t.str),t.count=/COUNT (.*)/i.exec(t.str),t.width=/WIDTH (.*)/i.exec(t.str),t.height=/HEIGHT (.*)/i.exec(t.str),t.viewpoint=/VIEWPOINT (.*)/i.exec(t.str),t.points=/POINTS (.*)/i.exec(t.str),null!==t.version&&(t.version=parseFloat(t.version[1])),null!==t.fields&&(t.fields=t.fields[1].split(" ")),null!==t.type&&(t.type=t.type[1].split(" ")),null!==t.width&&(t.width=parseInt(t.width[1])),null!==t.height&&(t.height=parseInt(t.height[1])),null!==t.viewpoint&&(t.viewpoint=t.viewpoint[1]),null!==t.points&&(t.points=parseInt(t.points[1],10)),null===t.points&&(t.points=t.width*t.height),null!==t.size&&(t.size=t.size[1].split(" ").map((function(e){return parseInt(e,10)}))),null!==t.count)t.count=t.count[1].split(" ").map((function(e){return parseInt(e,10)}));else{t.count=[];for(var i=0,a=t.fields.length;i<a;i++)t.count.push(1)}t.offset={};var o=0;for(i=0,a=t.fields.length;i<a;i++)"ascii"===t.data?t.offset[t.fields[i]]=i:(t.offset[t.fields[i]]=o,o+=t.size[i]);return t.rowSize=o,t}(r),a=[],o=[],s=[];if("ascii"===i.data)for(var l=i.offset,u=r.substr(i.headerLen).split("\n"),c=0,h=u.length;c<h;c++){var d=u[c].split(" ");if(void 0!==l.x&&(a.push(parseFloat(d[l.x])),a.push(parseFloat(d[l.y])),a.push(parseFloat(d[l.z]))),void 0!==l.rgb){var f=new Float32Array([parseFloat(d[l.rgb])]),p=new DataView(f.buffer,0);s.push(p.getUint8(0)/255),s.push(p.getUint8(1)/255),s.push(p.getUint8(2)/255)}void 0!==l.normal_x&&(o.push(parseFloat(d[l.normal_x])),o.push(parseFloat(d[l.normal_y])),o.push(parseFloat(d[l.normal_z])))}if("binary_compressed"!==i.data){if("binary"===i.data){p=new DataView(e,i.headerLen),l=i.offset,c=0;for(var m=0;c<i.points;c++,m+=i.rowSize)void 0!==l.x&&(a.push(p.getFloat32(m+l.x,this.littleEndian)),a.push(p.getFloat32(m+l.y,this.littleEndian)),a.push(p.getFloat32(m+l.z,this.littleEndian))),void 0!==l.rgb&&(s.push(p.getUint8(m+l.rgb+0)/255),s.push(p.getUint8(m+l.rgb+1)/255),s.push(p.getUint8(m+l.rgb+2)/255)),void 0!==l.normal_x&&(o.push(p.getFloat32(m+l.normal_x,this.littleEndian)),o.push(p.getFloat32(m+l.normal_y,this.littleEndian)),o.push(p.getFloat32(m+l.normal_z,this.littleEndian)))}var g=new THREE.BufferGeometry;a.length>0&&g.addAttribute("position",new THREE.Float32BufferAttribute(a,3)),o.length>0&&g.addAttribute("normal",new THREE.Float32BufferAttribute(o,3)),s.length>0&&g.addAttribute("color",new THREE.Float32BufferAttribute(s,3)),g.computeBoundingSphere();var v=new THREE.PointsMaterial({size:.005});s.length>0?v.vertexColors=!0:v.color.setHex(16777215*Math.random());var y=new THREE.Points(g,v),b=t.split("").reverse().join("");return b=(b=/([^\/]*)/.exec(b))[1].split("").reverse().join(""),y.name=b,y}n.error("THREE.PCDLoader: binary_compressed files are not supported")}}},7153:()=>{THREE.PDBLoader=function(e){this.manager=void 0!==e?e:THREE.DefaultLoadingManager},THREE.PDBLoader.prototype={constructor:THREE.PDBLoader,load:function(e,t,r,n){var i=this;new THREE.FileLoader(i.manager).load(e,(function(e){t(i.parse(e))}),r,n)},parse:function(e){function t(e){return e.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function r(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()}function n(e,t){var r=parseInt(p[m].substr(e,t));if(r){var n=function(e,t){return"s"+Math.min(e,t)+"e"+Math.max(e,t)}(v,r);void 0===f[n]&&(h.push([v-1,r-1,1]),f[n]=h.length-1)}}for(var i,a,o,s,l,u={h:[255,255,255],he:[217,255,255],li:[204,128,255],be:[194,255,0],b:[255,181,181],c:[144,144,144],n:[48,80,248],o:[255,13,13],f:[144,224,80],ne:[179,227,245],na:[171,92,242],mg:[138,255,0],al:[191,166,166],si:[240,200,160],p:[255,128,0],s:[255,255,48],cl:[31,240,31],ar:[128,209,227],k:[143,64,212],ca:[61,255,0],sc:[230,230,230],ti:[191,194,199],v:[166,166,171],cr:[138,153,199],mn:[156,122,199],fe:[224,102,51],co:[240,144,160],ni:[80,208,80],cu:[200,128,51],zn:[125,128,176],ga:[194,143,143],ge:[102,143,143],as:[189,128,227],se:[255,161,0],br:[166,41,41],kr:[92,184,209],rb:[112,46,176],sr:[0,255,0],y:[148,255,255],zr:[148,224,224],nb:[115,194,201],mo:[84,181,181],tc:[59,158,158],ru:[36,143,143],rh:[10,125,140],pd:[0,105,133],ag:[192,192,192],cd:[255,217,143],in:[166,117,115],sn:[102,128,128],sb:[158,99,181],te:[212,122,0],i:[148,0,148],xe:[66,158,176],cs:[87,23,143],ba:[0,201,0],la:[112,212,255],ce:[255,255,199],pr:[217,255,199],nd:[199,255,199],pm:[163,255,199],sm:[143,255,199],eu:[97,255,199],gd:[69,255,199],tb:[48,255,199],dy:[31,255,199],ho:[0,255,156],er:[0,230,117],tm:[0,212,82],yb:[0,191,56],lu:[0,171,36],hf:[77,194,255],ta:[77,166,255],w:[33,148,214],re:[38,125,171],os:[38,102,150],ir:[23,84,135],pt:[208,208,224],au:[255,209,35],hg:[184,184,208],tl:[166,84,77],pb:[87,89,97],bi:[158,79,181],po:[171,92,0],at:[117,79,69],rn:[66,130,150],fr:[66,0,102],ra:[0,125,0],ac:[112,171,250],th:[0,186,255],pa:[0,161,255],u:[0,143,255],np:[0,128,255],pu:[0,107,255],am:[84,92,242],cm:[120,92,227],bk:[138,79,227],cf:[161,54,212],es:[179,31,212],fm:[179,31,186],md:[179,13,166],no:[189,13,135],lr:[199,0,102],rf:[204,0,89],db:[209,0,79],sg:[217,0,69],bh:[224,0,56],hs:[230,0,46],mt:[235,0,38],ds:[235,0,38],rg:[235,0,38],cn:[235,0,38],uut:[235,0,38],uuq:[235,0,38],uup:[235,0,38],uuh:[235,0,38],uus:[235,0,38],uuo:[235,0,38]},c=[],h=[],d={},f={},p=e.split("\n"),m=0,g=p.length;m<g;m++)if("ATOM"===p[m].substr(0,4)||"HETATM"===p[m].substr(0,6))i=parseFloat(p[m].substr(30,7)),a=parseFloat(p[m].substr(38,7)),o=parseFloat(p[m].substr(46,7)),s=parseInt(p[m].substr(6,5))-1,""===(l=t(p[m].substr(76,2)).toLowerCase())&&(l=t(p[m].substr(12,2)).toLowerCase()),c[s]=[i,a,o,u[l],r(l)],void 0===d[l]?d[l]=1:d[l]+=1;else if("CONECT"===p[m].substr(0,6)){var v=parseInt(p[m].substr(6,5));n(11,5),n(16,5),n(21,5),n(26,5)}return function(){var e,t,r={geometryAtoms:new THREE.BufferGeometry,geometryBonds:new THREE.BufferGeometry,json:{atoms:c,bonds:h}},n=r.geometryAtoms,i=r.geometryBonds,a=[],o=[],s=[];for(e=0,t=c.length;e<t;e++){var l=c[e],u=l[0],d=l[1],f=l[2];a.push(u,d,f);var p=l[3][0]/255,m=l[3][1]/255,g=l[3][2]/255;o.push(p,m,g)}for(e=0,t=h.length;e<t;e++){var v=h[e],y=v[0],b=v[1];s.push(a[3*y+0]),s.push(a[3*y+1]),s.push(a[3*y+2]),s.push(a[3*b+0]),s.push(a[3*b+1]),s.push(a[3*b+2])}return n.addAttribute("position",new THREE.Float32BufferAttribute(a,3)),n.addAttribute("color",new THREE.Float32BufferAttribute(o,3)),i.addAttribute("position",new THREE.Float32BufferAttribute(s,3)),r}()}}},681:(e,t,r)=>{var n=r(5108);THREE.PLYLoader=function(e){this.manager=void 0!==e?e:THREE.DefaultLoadingManager,this.propertyNameMapping={}},THREE.PLYLoader.prototype={constructor:THREE.PLYLoader,load:function(e,t,r,n){var i=this,a=new THREE.FileLoader(this.manager);a.setResponseType("arraybuffer"),a.load(e,(function(e){t(i.parse(e))}),r,n)},setPropertyNameMapping:function(e){this.propertyNameMapping=e},parse:function(e){function t(e){var t="",r=0,i=/ply([\s\S]*)end_header\s/.exec(e);null!==i&&(t=i[1],r=i[0].length);var a,o,s,l,u,c,d={comments:[],elements:[],headerLength:r},f=t.split("\n");for(var p=0;p<f.length;p++){var m=f[p];if(""!==(m=m.trim()))switch(o=(s=m.split(/\s+/)).shift(),m=s.join(" "),o){case"format":d.format=s[0],d.version=s[1];break;case"comment":d.comments.push(m);break;case"element":void 0!==a&&d.elements.push(a),(a={}).name=s[0],a.count=parseInt(s[1]),a.properties=[];break;case"property":a.properties.push((l=s,u=h.propertyNameMapping,c=void 0,"list"===(c={type:l[0]}).type?(c.name=l[3],c.countType=l[1],c.itemType=l[2]):c.name=l[1],c.name in u&&(c.name=u[c.name]),c));break;default:n.log("unhandled",o,s)}}return void 0!==a&&d.elements.push(a),d}function r(e,t){switch(t){case"char":case"uchar":case"short":case"ushort":case"int":case"uint":case"int8":case"uint8":case"int16":case"uint16":case"int32":case"uint32":return parseInt(e);case"float":case"double":case"float32":case"float64":return parseFloat(e)}}function i(e,t){for(var n=t.split(/\s+/),i={},a=0;a<e.length;a++)if("list"===e[a].type){for(var o=[],s=r(n.shift(),e[a].countType),l=0;l<s;l++)o.push(r(n.shift(),e[a].itemType));i[e[a].name]=o}else i[e[a].name]=r(n.shift(),e[a].type);return i}function a(e,t){var r,n={indices:[],vertices:[],normals:[],uvs:[],colors:[]},a="";null!==(r=/end_header\s([\s\S]*)$/.exec(e))&&(a=r[1]);for(var l=a.split("\n"),u=0,c=0,h=0;h<l.length;h++){var d=l[h];if(""!==(d=d.trim())){c>=t.elements[u].count&&(u++,c=0);var f=i(t.elements[u].properties,d);s(n,t.elements[u].name,f),c++}}return o(n)}function o(e){var t=new THREE.BufferGeometry;return e.indices.length>0&&t.setIndex(e.indices),t.addAttribute("position",new THREE.Float32BufferAttribute(e.vertices,3)),e.normals.length>0&&t.addAttribute("normal",new THREE.Float32BufferAttribute(e.normals,3)),e.uvs.length>0&&t.addAttribute("uv",new THREE.Float32BufferAttribute(e.uvs,2)),e.colors.length>0&&t.addAttribute("color",new THREE.Float32BufferAttribute(e.colors,3)),t.computeBoundingSphere(),t}function s(e,t,r){if("vertex"===t)e.vertices.push(r.x,r.y,r.z),"nx"in r&&"ny"in r&&"nz"in r&&e.normals.push(r.nx,r.ny,r.nz),"s"in r&&"t"in r&&e.uvs.push(r.s,r.t),"red"in r&&"green"in r&&"blue"in r&&e.colors.push(r.red/255,r.green/255,r.blue/255);else if("face"===t){var n=r.vertex_indices||r.vertex_index;3===n.length?e.indices.push(n[0],n[1],n[2]):4===n.length&&(e.indices.push(n[0],n[1],n[3]),e.indices.push(n[1],n[2],n[3]))}}function l(e,t,r,n){switch(r){case"int8":case"char":return[e.getInt8(t),1];case"uint8":case"uchar":return[e.getUint8(t),1];case"int16":case"short":return[e.getInt16(t,n),2];case"uint16":case"ushort":return[e.getUint16(t,n),2];case"int32":case"int":return[e.getInt32(t,n),4];case"uint32":case"uint":return[e.getUint32(t,n),4];case"float32":case"float":return[e.getFloat32(t,n),4];case"float64":case"double":return[e.getFloat64(t,n),8]}}function u(e,t,r,n){for(var i,a={},o=0,s=0;s<r.length;s++)if("list"===r[s].type){var u=[],c=(i=l(e,t+o,r[s].countType,n))[0];o+=i[1];for(var h=0;h<c;h++)i=l(e,t+o,r[s].itemType,n),u.push(i[0]),o+=i[1];a[r[s].name]=u}else i=l(e,t+o,r[s].type,n),a[r[s].name]=i[0],o+=i[1];return[a,o]}var c,h=this;if(e instanceof ArrayBuffer){var d=THREE.LoaderUtils.decodeText(new Uint8Array(e)),f=t(d);c="ascii"===f.format?a(d,f):function(e,t){for(var r,n={indices:[],vertices:[],normals:[],uvs:[],colors:[]},i="binary_little_endian"===t.format,a=new DataView(e,t.headerLength),l=0,c=0;c<t.elements.length;c++)for(var h=0;h<t.elements[c].count;h++){l+=(r=u(a,l,t.elements[c].properties,i))[1];var d=r[0];s(n,t.elements[c].name,d)}return o(n)}(e,f)}else c=a(e,t(e));return c}}},7776:(e,t,r)=>{var n=r(5108);!function(e){"use strict";var t=null;function r(){if(null===t){var e=new ArrayBuffer(2),r=new Uint8Array(e),n=new Uint16Array(e);r[0]=170,r[1]=187,t=43707===n[0]}return t}var i=[null,Float32Array,null,Int8Array,Int16Array,null,Int32Array,Uint8Array,Uint16Array,null,Uint32Array],a={Uint16Array:"getUint16",Uint32Array:"getUint32",Int16Array:"getInt16",Int32Array:"getInt32",Float32Array:"getFloat32",Float64Array:"getFloat64"};function o(e,t,n,i,o){var s,l=t.BYTES_PER_ELEMENT;if(o===r()||1===l)s=new t(e,n,i);else{var u=new DataView(e,n,i*l),c=a[t.name],h=!o,d=0;for(s=new t(i);d<i;d++)s[d]=u[c](d*l,h)}return s}e.PRWMLoader=function(t){this.manager=void 0!==t?t:e.DefaultLoadingManager},e.PRWMLoader.prototype={constructor:e.PRWMLoader,load:function(t,n,i,a){var o=this,s=new e.FileLoader(o.manager);s.setResponseType("arraybuffer"),t=t.replace(/\*/g,r()?"be":"le"),s.load(t,(function(e){n(o.parse(e))}),i,a)},parse:function(t){n.time("PRWMLoader");var r,a,s=function(e){var t=new Uint8Array(e),r=t[0],n=t[1],a=!!(n>>7&1),s=n>>6&1,l=1==(n>>5&1),u=31&n,c=0,h=0;if(l?(c=(t[2]<<16)+(t[3]<<8)+t[4],h=(t[5]<<16)+(t[6]<<8)+t[7]):(c=t[2]+(t[3]<<8)+(t[4]<<16),h=t[5]+(t[6]<<8)+(t[7]<<16)),0===r)throw new Error("PRWM decoder: Invalid format version: 0");if(1!==r)throw new Error("PRWM decoder: Unsupported format version: "+r);if(!a){if(0!==s)throw new Error("PRWM decoder: Indices type must be set to 0 for non-indexed geometries");if(0!==h)throw new Error("PRWM decoder: Number of indices must be set to 0 for non-indexed geometries")}var d,f,p,m,g,v,y,b,E=8,x={};for(b=0;b<u;b++){for(d="";E<t.length&&(f=t[E],E++,0!==f);)d+=String.fromCharCode(f);p=(n=t[E])>>7&1,m=1+(n>>4&3),E++,v=o(e,g=i[15&n],E=4*Math.ceil(E/4),m*c,l),E+=g.BYTES_PER_ELEMENT*m*c,x[d]={type:p,cardinality:m,values:v}}return E=4*Math.ceil(E/4),y=null,a&&(y=o(e,1===s?Uint32Array:Uint16Array,E,h,l)),{version:r,attributes:x,indices:y}}(t),l=Object.keys(s.attributes),u=new e.BufferGeometry;for(a=0;a<l.length;a++)r=s.attributes[l[a]],u.addAttribute(l[a],new e.BufferAttribute(r.values,r.cardinality,r.normalized));return null!==s.indices&&u.setIndex(new e.BufferAttribute(s.indices,1)),n.timeEnd("PRWMLoader"),u}},e.PRWMLoader.isBigEndianPlatform=function(){return r()}}(THREE)},8090:(e,t,r)=>{var n=r(5108);THREE.STLLoader=function(e){this.manager=void 0!==e?e:THREE.DefaultLoadingManager},THREE.STLLoader.prototype={constructor:THREE.STLLoader,load:function(e,t,r,n){var i=this,a=new THREE.FileLoader(i.manager);a.setResponseType("arraybuffer"),a.load(e,(function(e){try{t(i.parse(e))}catch(e){n&&n(e)}}),r,n)},parse:function(e){var t,r=function(e){if("string"==typeof e){for(var t=new Uint8Array(e.length),r=0;r<e.length;r++)t[r]=255&e.charCodeAt(r);return t.buffer||t}return e}(e);return function(e){var t;if(50,84+50*(t=new DataView(e)).getUint32(80,!0)===t.byteLength)return!0;for(var r=[115,111,108,105,100],n=0;n<5;n++)if(r[n]!=t.getUint8(n,!1))return!0;return!1}(r)?function(e){for(var t,r,n,i,a,o,s,l,u=new DataView(e),c=u.getUint32(80,!0),h=!1,d=0;d<70;d++)1129270351==u.getUint32(d,!1)&&82==u.getUint8(d+4)&&61==u.getUint8(d+5)&&(h=!0,i=[],a=u.getUint8(d+6)/255,o=u.getUint8(d+7)/255,s=u.getUint8(d+8)/255,l=u.getUint8(d+9)/255);for(var f=new THREE.BufferGeometry,p=[],m=[],g=0;g<c;g++){var v=84+50*g,y=u.getFloat32(v,!0),b=u.getFloat32(v+4,!0),E=u.getFloat32(v+8,!0);if(h){var x=u.getUint16(v+48,!0);0==(32768&x)?(t=(31&x)/31,r=(x>>5&31)/31,n=(x>>10&31)/31):(t=a,r=o,n=s)}for(var w=1;w<=3;w++){var T=v+12*w;p.push(u.getFloat32(T,!0)),p.push(u.getFloat32(T+4,!0)),p.push(u.getFloat32(T+8,!0)),m.push(y,b,E),h&&i.push(t,r,n)}}return f.addAttribute("position",new THREE.BufferAttribute(new Float32Array(p),3)),f.addAttribute("normal",new THREE.BufferAttribute(new Float32Array(m),3)),h&&(f.addAttribute("color",new THREE.BufferAttribute(new Float32Array(i),3)),f.hasColors=!0,f.alpha=l),f}(r):function(e){for(var t,r=new THREE.BufferGeometry,i=/facet([\s\S]*?)endfacet/g,a=0,o=/[\s]+([+-]?(?:\d+.\d+|\d+.|\d+|.\d+)(?:[eE][+-]?\d+)?)/.source,s=new RegExp("vertex"+o+o+o,"g"),l=new RegExp("normal"+o+o+o,"g"),u=[],c=[],h=new THREE.Vector3;null!==(t=i.exec(e));){for(var d=0,f=0,p=t[0];null!==(t=l.exec(p));)h.x=parseFloat(t[1]),h.y=parseFloat(t[2]),h.z=parseFloat(t[3]),f++;for(;null!==(t=s.exec(p));)u.push(parseFloat(t[1]),parseFloat(t[2]),parseFloat(t[3])),c.push(h.x,h.y,h.z),d++;1!==f&&n.error("THREE.STLLoader: Something isn't right with the normal of face number "+a),3!==d&&n.error("THREE.STLLoader: Something isn't right with the vertices of face number "+a),a++}return r.addAttribute("position",new THREE.Float32BufferAttribute(u,3)),r.addAttribute("normal",new THREE.Float32BufferAttribute(c,3)),r}("string"!=typeof(t=e)?THREE.LoaderUtils.decodeText(new Uint8Array(t)):t)}}},9142:(e,t,r)=>{"use strict";var n=r(5108);THREE.TDSLoader=function(e){this.manager=void 0!==e?e:THREE.DefaultLoadingManager,this.debug=!1,this.group=null,this.position=0,this.materials=[],this.meshes=[]},THREE.TDSLoader.prototype={constructor:THREE.TDSLoader,load:function(e,t,r,n){var i=this,a=void 0!==this.path?this.path:THREE.LoaderUtils.extractUrlBase(e),o=new THREE.FileLoader(this.manager);o.setResponseType("arraybuffer"),o.load(e,(function(e){t(i.parse(e,a))}),r,n)},parse:function(e,t){this.group=new THREE.Group,this.position=0,this.materials=[],this.meshes=[],this.readFile(e,t);for(var r=0;r<this.meshes.length;r++)this.group.add(this.meshes[r]);return this.group},readFile:function(e,t){var r=new DataView(e),n=this.readChunk(r);if(n.id===a||n.id===o||n.id===i)for(var l=this.nextChunk(r,n);0!==l;){if(l===s){var u=this.readDWord(r);this.debugMessage("3DS file version: "+u)}else l===d?(this.resetPosition(r),this.readMeshData(r,t)):this.debugMessage("Unknown main chunk: "+l.toString(16));l=this.nextChunk(r,n)}this.debugMessage("Parsed "+this.meshes.length+" meshes")},readMeshData:function(e,t){for(var r=this.readChunk(e),n=this.nextChunk(e,r);0!==n;){if(n===f){var i=+this.readDWord(e);this.debugMessage("Mesh Version: "+i)}else if(n===p){var a=this.readFloat(e);this.debugMessage("Master scale: "+a),this.group.scale.set(a,a,a)}else n===H?(this.debugMessage("Named Object"),this.resetPosition(e),this.readNamedObject(e)):n===m?(this.debugMessage("Material"),this.resetPosition(e),this.readMaterialEntry(e,t)):this.debugMessage("Unknown MDATA chunk: "+n.toString(16));n=this.nextChunk(e,r)}},readNamedObject:function(e){var t=this.readChunk(e),r=this.readString(e,64);t.cur=this.position;for(var n=this.nextChunk(e,t);0!==n;){if(n===k){this.resetPosition(e);var i=this.readMesh(e);i.name=r,this.meshes.push(i)}else this.debugMessage("Unknown named object chunk: "+n.toString(16));n=this.nextChunk(e,t)}this.endChunk(t)},readMaterialEntry:function(e,t){for(var r=this.readChunk(e),n=this.nextChunk(e,r),i=new THREE.MeshPhongMaterial;0!==n;){if(n===g)i.name=this.readString(e,64),this.debugMessage("   Name: "+i.name);else if(n===T)this.debugMessage("   Wireframe"),i.wireframe=!0;else if(n===_){var a=this.readByte(e);i.wireframeLinewidth=a,this.debugMessage("   Wireframe Thickness: "+a)}else if(n===x)i.side=THREE.DoubleSide,this.debugMessage("   DoubleSided");else if(n===w)this.debugMessage("   Additive Blending"),i.blending=THREE.AdditiveBlending;else if(n===y)this.debugMessage("   Diffuse Color"),i.color=this.readColor(e);else if(n===b)this.debugMessage("   Specular Color"),i.specular=this.readColor(e);else if(n===v)this.debugMessage("   Ambient color"),i.color=this.readColor(e);else if(n===E){var o=this.readWord(e);i.shininess=o,this.debugMessage("   Shininess : "+o)}else n===S?(this.debugMessage("   ColorMap"),this.resetPosition(e),i.map=this.readMap(e,t)):n===R?(this.debugMessage("   BumpMap"),this.resetPosition(e),i.bumpMap=this.readMap(e,t)):n===M?(this.debugMessage("   OpacityMap"),this.resetPosition(e),i.alphaMap=this.readMap(e,t)):n===A?(this.debugMessage("   SpecularMap"),this.resetPosition(e),i.specularMap=this.readMap(e,t)):this.debugMessage("   Unknown material chunk: "+n.toString(16));n=this.nextChunk(e,r)}this.endChunk(r),this.materials[i.name]=i},readMesh:function(e){var t=this.readChunk(e),r=this.nextChunk(e,t),n=null,i=[];n=new THREE.Geometry;var a=new THREE.MeshPhongMaterial,o=new THREE.Mesh(n,a);for(o.name="mesh";0!==r;){if(r===N){var s=this.readWord(e);this.debugMessage("   Vertex: "+s);for(var l=0;l<s;l++)n.vertices.push(new THREE.Vector3(this.readFloat(e),this.readFloat(e),this.readFloat(e)))}else if(r===U)this.resetPosition(e),this.readFaceArray(e,o);else if(r===F){var u=this.readWord(e);this.debugMessage("   UV: "+u),i=[];for(l=0;l<u;l++)i.push(new THREE.Vector2(this.readFloat(e),this.readFloat(e)))}else if(r===B){this.debugMessage("   Tranformation Matrix (TODO)");var c=[];for(l=0;l<12;l++)c[l]=this.readFloat(e);var h=new THREE.Matrix4;h.elements[0]=c[0],h.elements[1]=c[6],h.elements[2]=c[3],h.elements[3]=c[9],h.elements[4]=c[2],h.elements[5]=c[8],h.elements[6]=c[5],h.elements[7]=c[11],h.elements[8]=c[1],h.elements[9]=c[7],h.elements[10]=c[4],h.elements[11]=c[10],h.elements[12]=0,h.elements[13]=0,h.elements[14]=0,h.elements[15]=1,h.transpose();var d=new THREE.Matrix4;d.getInverse(h,!0),n.applyMatrix(d),h.decompose(o.position,o.quaternion,o.scale)}else this.debugMessage("   Unknown mesh chunk: "+r.toString(16));r=this.nextChunk(e,t)}if(this.endChunk(t),i.length>0){var f=[];for(l=0;l<n.faces.length;l++)f.push([i[n.faces[l].a],i[n.faces[l].b],i[n.faces[l].c]]);n.faceVertexUvs[0]=f}return n.computeVertexNormals(),o},readFaceArray:function(e,t){var r=this.readChunk(e),n=this.readWord(e);this.debugMessage("   Faces: "+n);for(var i=0;i<n;++i){t.geometry.faces.push(new THREE.Face3(this.readWord(e),this.readWord(e),this.readWord(e)));this.readWord(e)}for(;this.position<r.end;){if((r=this.readChunk(e)).id===D){this.debugMessage("      Material Group"),this.resetPosition(e);var a=this.readMaterialGroup(e),o=this.materials[a.name];void 0!==o&&(t.material=o,""===o.name&&(o.name=t.name))}else this.debugMessage("      Unknown face array chunk: "+r.toString(16));this.endChunk(r)}this.endChunk(r)},readMap:function(e,t){var r=this.readChunk(e),n=this.nextChunk(e,r),i={},a=new THREE.TextureLoader(this.manager);for(a.setPath(t);0!==n;){if(n===C){var o=this.readString(e,128);i=a.load(o),this.debugMessage("      File: "+t+o)}else n===I?(i.offset.x=this.readFloat(e),this.debugMessage("      OffsetX: "+i.offset.x)):n===P?(i.offset.y=this.readFloat(e),this.debugMessage("      OffsetY: "+i.offset.y)):n===L?(i.repeat.x=this.readFloat(e),this.debugMessage("      RepeatX: "+i.repeat.x)):n===O?(i.repeat.y=this.readFloat(e),this.debugMessage("      RepeatY: "+i.repeat.y)):this.debugMessage("      Unknown map chunk: "+n.toString(16));n=this.nextChunk(e,r)}return this.endChunk(r),i},readMaterialGroup:function(e){this.readChunk(e);var t=this.readString(e,64),r=this.readWord(e);this.debugMessage("         Name: "+t),this.debugMessage("         Faces: "+r);for(var n=[],i=0;i<r;++i)n.push(this.readWord(e));return{name:t,index:n}},readColor:function(e){var t=this.readChunk(e),r=new THREE.Color;if(t.id===u||t.id===c){var n=this.readByte(e),i=this.readByte(e),a=this.readByte(e);r.setRGB(n/255,i/255,a/255),this.debugMessage("      Color: "+r.r+", "+r.g+", "+r.b)}else if(t.id===l||t.id===h){n=this.readFloat(e),i=this.readFloat(e),a=this.readFloat(e);r.setRGB(n,i,a),this.debugMessage("      Color: "+r.r+", "+r.g+", "+r.b)}else this.debugMessage("      Unknown color chunk: "+t.toString(16));return this.endChunk(t),r},readChunk:function(e){var t={};return t.cur=this.position,t.id=this.readWord(e),t.size=this.readDWord(e),t.end=t.cur+t.size,t.cur+=6,t},endChunk:function(e){this.position=e.end},nextChunk:function(e,t){if(t.cur>=t.end)return 0;this.position=t.cur;try{var r=this.readChunk(e);return t.cur+=r.size,r.id}catch(e){return this.debugMessage("Unable to read chunk at "+this.position),0}},resetPosition:function(){this.position-=6},readByte:function(e){var t=e.getUint8(this.position,!0);return this.position+=1,t},readFloat:function(e){try{var t=e.getFloat32(this.position,!0);return this.position+=4,t}catch(t){this.debugMessage(t+" "+this.position+" "+e.byteLength)}},readInt:function(e){var t=e.getInt32(this.position,!0);return this.position+=4,t},readShort:function(e){var t=e.getInt16(this.position,!0);return this.position+=2,t},readDWord:function(e){var t=e.getUint32(this.position,!0);return this.position+=4,t},readWord:function(e){var t=e.getUint16(this.position,!0);return this.position+=2,t},readString:function(e,t){for(var r="",n=0;n<t;n++){var i=this.readByte(e);if(!i)break;r+=String.fromCharCode(i)}return r},setPath:function(e){return this.path=e,this},debugMessage:function(e){this.debug&&n.log(e)}};var i=19789,a=15786,o=49725,s=2,l=16,u=17,c=18,h=19,d=15677,f=15678,p=256,m=45055,g=40960,v=40976,y=40992,b=41008,E=41024,x=41089,w=41091,T=41093,_=41095,S=41472,M=41488,R=41520,A=41476,C=41728,L=41812,O=41814,I=41816,P=41818,H=16384,k=16640,N=16656,U=16672,D=16688,F=16704,B=16736},9137:(e,t,r)=>{var n=r(5108);THREE.TGALoader=function(e){this.manager=void 0!==e?e:THREE.DefaultLoadingManager},THREE.TGALoader.prototype={constructor:THREE.TGALoader,load:function(e,t,r,n){var i=this,a=new THREE.Texture,o=new THREE.FileLoader(this.manager);return o.setResponseType("arraybuffer"),o.load(e,(function(e){a.image=i.parse(e),a.needsUpdate=!0,void 0!==t&&t(a)}),r,n),a},parse:function(e){var t=0,r=1,i=2,a=3,o=9,s=10,l=11,u=48,c=4,h=0,d=1,f=2,p=3;e.length<19&&n.error("THREE.TGALoader: Not enough data to contain header.");var m=new Uint8Array(e),g=0,v={id_length:m[g++],colormap_type:m[g++],image_type:m[g++],colormap_index:m[g++]|m[g++]<<8,colormap_length:m[g++]|m[g++]<<8,colormap_size:m[g++],origin:[m[g++]|m[g++]<<8,m[g++]|m[g++]<<8],width:m[g++]|m[g++]<<8,height:m[g++]|m[g++]<<8,pixel_size:m[g++],flags:m[g++]};!function(e){switch(e.image_type){case r:case o:(e.colormap_length>256||24!==e.colormap_size||1!==e.colormap_type)&&n.error("THREE.TGALoader: Invalid type colormap data for indexed type.");break;case i:case a:case s:case l:e.colormap_type&&n.error("THREE.TGALoader: Invalid type colormap data for colormap type.");break;case t:n.error("THREE.TGALoader: No data.");default:n.error('THREE.TGALoader: Invalid type "%s".',e.image_type)}(e.width<=0||e.height<=0)&&n.error("THREE.TGALoader: Invalid image size."),8!==e.pixel_size&&16!==e.pixel_size&&24!==e.pixel_size&&32!==e.pixel_size&&n.error('THREE.TGALoader: Invalid pixel size "%s".',e.pixel_size)}(v),v.id_length+g>e.length&&n.error("THREE.TGALoader: No data."),g+=v.id_length;var y=!1,b=!1,E=!1;switch(v.image_type){case o:y=!0,b=!0;break;case r:b=!0;break;case s:y=!0;break;case i:break;case l:y=!0,E=!0;break;case a:E=!0}var x=document.createElement("canvas");x.width=v.width,x.height=v.height;var w=x.getContext("2d"),T=w.createImageData(v.width,v.height),_=function(e,t,r,n,i){var a,o,s,l;if(o=r.pixel_size>>3,s=r.width*r.height*o,t&&(l=i.subarray(n,n+=r.colormap_length*(r.colormap_size>>3))),e){var u,c,h;a=new Uint8Array(s);for(var d=0,f=new Uint8Array(o);d<s;)if(c=1+(127&(u=i[n++])),128&u){for(h=0;h<o;++h)f[h]=i[n++];for(h=0;h<c;++h)a.set(f,d+h*o);d+=o*c}else{for(c*=o,h=0;h<c;++h)a[d+h]=i[n++];d+=c}}else a=i.subarray(n,n+=t?r.width*r.height:s);return{pixel_data:a,palettes:l}}(y,b,v,g,m);!function(e,t,r,i,a){var o,s,l,m,g,y;switch((v.flags&u)>>c){default:case f:o=0,l=1,g=t,s=0,m=1,y=r;break;case h:o=0,l=1,g=t,s=r-1,m=-1,y=-1;break;case p:o=t-1,l=-1,g=-1,s=0,m=1,y=r;break;case d:o=t-1,l=-1,g=-1,s=r-1,m=-1,y=-1}if(E)switch(v.pixel_size){case 8:!function(e,t,r,n,i,a,o,s){var l,u,c,h=0,d=v.width;for(c=t;c!==n;c+=r)for(u=i;u!==o;u+=a,h++)l=s[h],e[4*(u+d*c)+0]=l,e[4*(u+d*c)+1]=l,e[4*(u+d*c)+2]=l,e[4*(u+d*c)+3]=255}(e,s,m,y,o,l,g,i);break;case 16:!function(e,t,r,n,i,a,o,s){var l,u,c=0,h=v.width;for(u=t;u!==n;u+=r)for(l=i;l!==o;l+=a,c+=2)e[4*(l+h*u)+0]=s[c+0],e[4*(l+h*u)+1]=s[c+0],e[4*(l+h*u)+2]=s[c+0],e[4*(l+h*u)+3]=s[c+1]}(e,s,m,y,o,l,g,i);break;default:n.error("THREE.TGALoader: Format not supported.")}else switch(v.pixel_size){case 8:!function(e,t,r,n,i,a,o,s,l){var u,c,h,d=l,f=0,p=v.width;for(h=t;h!==n;h+=r)for(c=i;c!==o;c+=a,f++)u=s[f],e[4*(c+p*h)+3]=255,e[4*(c+p*h)+2]=d[3*u+0],e[4*(c+p*h)+1]=d[3*u+1],e[4*(c+p*h)+0]=d[3*u+2]}(e,s,m,y,o,l,g,i,a);break;case 16:!function(e,t,r,n,i,a,o,s){var l,u,c,h=0,d=v.width;for(c=t;c!==n;c+=r)for(u=i;u!==o;u+=a,h+=2)l=s[h+0]+(s[h+1]<<8),e[4*(u+d*c)+0]=(31744&l)>>7,e[4*(u+d*c)+1]=(992&l)>>2,e[4*(u+d*c)+2]=(31&l)>>3,e[4*(u+d*c)+3]=32768&l?0:255}(e,s,m,y,o,l,g,i);break;case 24:!function(e,t,r,n,i,a,o,s){var l,u,c=0,h=v.width;for(u=t;u!==n;u+=r)for(l=i;l!==o;l+=a,c+=3)e[4*(l+h*u)+3]=255,e[4*(l+h*u)+2]=s[c+0],e[4*(l+h*u)+1]=s[c+1],e[4*(l+h*u)+0]=s[c+2]}(e,s,m,y,o,l,g,i);break;case 32:!function(e,t,r,n,i,a,o,s){var l,u,c=0,h=v.width;for(u=t;u!==n;u+=r)for(l=i;l!==o;l+=a,c+=4)e[4*(l+h*u)+2]=s[c+0],e[4*(l+h*u)+1]=s[c+1],e[4*(l+h*u)+0]=s[c+2],e[4*(l+h*u)+3]=s[c+3]}(e,s,m,y,o,l,g,i);break;default:n.error("THREE.TGALoader: Format not supported.")}}(T.data,v.width,v.height,_.pixel_data,_.palettes);return w.putImageData(T,0,0),x}}},7481:(e,t,r)=>{var n=r(5108);THREE.TTFLoader=function(e){this.manager=void 0!==e?e:THREE.DefaultLoadingManager,this.reversed=!1},THREE.TTFLoader.prototype={constructor:THREE.TTFLoader,load:function(e,t,r,n){var i=this,a=new THREE.FileLoader(this.manager);a.setResponseType("arraybuffer"),a.load(e,(function(e){t(i.parse(e))}),r,n)},parse:function(e){function t(e){var t,r=[];e.forEach((function(e){"m"===e.type.toLowerCase()?(t=[e],r.push(t)):"z"!==e.type.toLowerCase()&&t.push(e)}));var n=[];return r.forEach((function(e){var t={type:"m",x:e[e.length-1].x,y:e[e.length-1].y};n.push(t);for(var r=e.length-1;r>0;r--){var i=e[r];t={type:i.type};void 0!==i.x2&&void 0!==i.y2?(t.x1=i.x2,t.y1=i.y2,t.x2=i.x1,t.y2=i.y1):void 0!==i.x1&&void 0!==i.y1&&(t.x1=i.x1,t.y1=i.y1),t.x=e[r-1].x,t.y=e[r-1].y,n.push(t)}})),n}return"undefined"==typeof opentype?(n.warn("THREE.TTFLoader: The loader requires opentype.js. Make sure it's included before using the loader."),null):function(e,r){for(var n=Math.round,i={},a=1e5/(72*(e.unitsPerEm||2048)),o=0;o<e.glyphs.length;o++){var s=e.glyphs.glyphs[o];if(void 0!==s.unicode){var l={ha:n(s.advanceWidth*a),x_min:n(s.xMin*a),x_max:n(s.xMax*a),o:""};r&&(s.path.commands=t(s.path.commands)),s.path.commands.forEach((function(e,t){"c"===e.type.toLowerCase()&&(e.type="b"),l.o+=e.type.toLowerCase()+" ",void 0!==e.x&&void 0!==e.y&&(l.o+=n(e.x*a)+" "+n(e.y*a)+" "),void 0!==e.x1&&void 0!==e.y1&&(l.o+=n(e.x1*a)+" "+n(e.y1*a)+" "),void 0!==e.x2&&void 0!==e.y2&&(l.o+=n(e.x2*a)+" "+n(e.y2*a)+" ")})),i[String.fromCharCode(s.unicode)]=l}}return{glyphs:i,familyName:e.familyName,ascender:n(e.ascender*a),descender:n(e.descender*a),underlinePosition:e.tables.post.underlinePosition,underlineThickness:e.tables.post.underlineThickness,boundingBox:{xMin:e.tables.head.xMin,xMax:e.tables.head.xMax,yMin:e.tables.head.yMin,yMax:e.tables.head.yMax},resolution:1e3,original_font_information:e.tables.name}}(opentype.parse(e),this.reversed)}}},8866:()=>{THREE.UTF8Loader=function(){},THREE.UTF8Loader.prototype.load=function(e,t,r){this.downloadModelJson(e,t,r)},THREE.UTF8Loader.BufferGeometryCreator=function(){},THREE.UTF8Loader.BufferGeometryCreator.prototype.create=function(e,t){var r,n,i=t.length/3,a=new THREE.BufferGeometry,o=new Float32Array(3*i*3),s=new Float32Array(3*i*3),l=new Float32Array(3*i*2),u=e.length;for(n=0,r=0;r<u;r+=8)o[n++]=e[r],o[n++]=e[r+1],o[n++]=e[r+2];for(n=0,r=3;r<u;r+=8)l[n++]=e[r],l[n++]=e[r+1];for(n=0,r=5;r<u;r+=8)s[n++]=e[r],s[n++]=e[r+1],s[n++]=e[r+2];return a.setIndex(new THREE.BufferAttribute(t,1)),a.addAttribute("position",new THREE.BufferAttribute(o,3)),a.addAttribute("normal",new THREE.BufferAttribute(s,3)),a.addAttribute("uv",new THREE.BufferAttribute(l,2)),a.computeBoundingSphere(),a};var e={decodeOffsets:[-4095,-4095,-4095,0,0,-511,-511,-511],decodeScales:[1/8191,1/8191,1/8191,1/1023,1/1023,1/1023,1/1023,1/1023]};function t(e,t,r){(new THREE.FileLoader).load(e,t,r)}THREE.UTF8Loader.prototype.decompressAttribsInner_=function(e,t,r,n,i,a,o,s){for(var l=0,u=t;u<r;u++){var c=e.charCodeAt(u);l+=c>>1^-(1&c),n[i]=s*(l+o),i+=a}},THREE.UTF8Loader.prototype.decompressIndices_=function(e,t,r,n,i){for(var a=0,o=0;o<r;o++){var s=e.charCodeAt(t++);n[i++]=a-s,0===s&&a++}},THREE.UTF8Loader.prototype.decompressAABBs_=function(e,t,r,n,i){for(var a=6*r,o=t+a,s=0,l=new Float32Array(a),u=t;u<o;u+=6){var c=e.charCodeAt(u+0)+n[0],h=e.charCodeAt(u+1)+n[1],d=e.charCodeAt(u+2)+n[2],f=e.charCodeAt(u+3)+1>>1,p=e.charCodeAt(u+4)+1>>1,m=e.charCodeAt(u+5)+1>>1;l[s++]=i[0]*(c+f),l[s++]=i[1]*(h+p),l[s++]=i[2]*(d+m),l[s++]=i[0]*f,l[s++]=i[1]*p,l[s++]=i[2]*m}return l},THREE.UTF8Loader.prototype.decompressMesh=function(e,t,r,n,i,a){for(var o=r.decodeScales.length,s=r.decodeOffsets,l=r.decodeScales,u=t.attribRange[0],c=t.attribRange[1],h=u,d=new Float32Array(o*c),f=0;f<o;f++){var p=h+c,m=l[f];m&&this.decompressAttribsInner_(e,h,p,d,f,o,s[f],m),h=p}var g=3*t.indexRange[1],v=new Uint16Array(g);this.decompressIndices_(e,h,g,v,0);var y=void 0,b=t.bboxes;b&&(y=this.decompressAABBs_(e,b,t.names.length,s,l)),a(n,i,d,v,y,t)},THREE.UTF8Loader.prototype.copyAttrib=function(e,t,r,n){for(var i=0;i<e;i++)r[i]=t[e*n+i]},THREE.UTF8Loader.prototype.decodeAttrib2=function(e,t,r,n,i,a,o,s,l,u){for(var c=0;c<5;c++){var h=e.charCodeAt(i+a*c+u),d=h>>1^-(1&h);l[c]+=d,s[t*u+c]=l[c],o[t*u+c]=n[c]*(l[c]+r[c])}},THREE.UTF8Loader.prototype.accumulateNormal=function(e,t,r,n,i){var a=n[8*e],o=n[8*e+1],s=n[8*e+2],l=n[8*t],u=n[8*t+1],c=n[8*t+2],h=n[8*r],d=n[8*r+1],f=n[8*r+2];l-=a,h-=a,a=(u-=o)*(f-=s)-(c-=s)*(d-=o),o=c*h-l*f,s=l*d-u*h,i[3*e]+=a,i[3*e+1]+=o,i[3*e+2]+=s,i[3*t]+=a,i[3*t+1]+=o,i[3*t+2]+=s,i[3*r]+=a,i[3*r+1]+=o,i[3*r+2]+=s},THREE.UTF8Loader.prototype.decompressMesh2=function(e,t,r,n,i,a){for(var o=r.decodeScales.length,s=r.decodeOffsets,l=r.decodeScales,u=t.attribRange[0],c=t.attribRange[1],h=t.codeRange[0],d=3*t.codeRange[2],f=new Uint16Array(d),p=new Int32Array(3*c),m=new Uint16Array(o),g=new Uint16Array(o*c),v=new Float32Array(o*c),y=0,b=0,E=0;E<d;E+=3){var x=e.charCodeAt(h++),w=Math.min(E,96);if(x<w){var T,_,S,M=x%3,R=E-(x-M);switch(M){case 0:T=f[R+2],_=f[R+1],S=f[R+0];break;case 1:T=f[R+0],_=f[R+2],S=f[R+1];break;case 2:T=f[R+1],_=f[R+0],S=f[R+2]}f[b++]=T,f[b++]=_;var A=y-(x=e.charCodeAt(h++));if(f[b++]=A,0===x){for(var C=0;C<5;C++){var L=e.charCodeAt(u+c*C+y),O=(L>>1^-(1&L))+g[o*T+C]+g[o*_+C]-g[o*S+C];m[C]=O,g[o*y+C]=O,v[o*y+C]=l[C]*(O+s[C])}y++}else this.copyAttrib(o,g,m,A);this.accumulateNormal(T,_,A,g,p)}else{var I=y-(x-w);f[b++]=I,x===w?this.decodeAttrib2(e,o,s,l,u,c,v,g,m,y++):this.copyAttrib(o,g,m,I);var P=y-(x=e.charCodeAt(h++));f[b++]=P,0===x?this.decodeAttrib2(e,o,s,l,u,c,v,g,m,y++):this.copyAttrib(o,g,m,P);var H=y-(x=e.charCodeAt(h++));if(f[b++]=H,0===x){for(C=0;C<5;C++)m[C]=(g[o*I+C]+g[o*P+C])/2;this.decodeAttrib2(e,o,s,l,u,c,v,g,m,y++)}else this.copyAttrib(o,g,m,H);this.accumulateNormal(I,P,H,g,p)}}for(E=0;E<c;E++){var k=p[3*E],N=p[3*E+1],U=p[3*E+2],D=511/Math.sqrt(k*k+N*N+U*U),F=e.charCodeAt(u+5*c+E),B=e.charCodeAt(u+6*c+E),z=e.charCodeAt(u+7*c+E);v[o*E+5]=D*k+(F>>1^-(1&F)),v[o*E+6]=D*N+(B>>1^-(1&B)),v[o*E+7]=D*U+(z>>1^-(1&z))}a(n,i,v,f,void 0,t)},THREE.UTF8Loader.prototype.downloadMesh=function(e,r,n,i,a){var o=this,s=0;t(e,(function(e){!function(e){for(;s<n.length;){var t=n[s],l=t.indexRange;if(l){var u=l[0]+3*l[1];if(e.length<u)break;o.decompressMesh(e,t,i,r,s,a)}else{var c=t.codeRange;if(u=c[0]+c[1],e.length<u)break;o.decompressMesh2(e,t,i,r,s,a)}++s}}(e)}))},THREE.UTF8Loader.prototype.downloadMeshes=function(e,t,r,n){for(var i in t){var a=t[i];this.downloadMesh(e+i,i,a,r,n)}},THREE.UTF8Loader.prototype.createMeshCallback=function(e,t,r){var n=0,i=0,a={},o={},s={},l=t.urls;for(var u in l)a[u]=l[u].length,o[u]=0,i++,s[u]=new THREE.Object3D;var c=new THREE.Object3D,h=new THREE.MTLLoader.MaterialCreator(e,t.options);h.setMaterials(t.materials),h.preload();var d=new THREE.UTF8Loader.BufferGeometryCreator;return function(e,t,l,u,f,p){var m=d.create(l,u),g=h.create(p.material),v=new THREE.Mesh(m,g);s[e].add(v),o[e]++,o[e]===a[e]&&(n++,c.add(s[e]),n===i&&r(c))}},THREE.UTF8Loader.prototype.downloadModel=function(e,t,r,n){var i=this.createMeshCallback(t,r,n);this.downloadMeshes(e,r.urls,r.decodeParams,i)},THREE.UTF8Loader.prototype.downloadModelJson=function(r,n,i){var a,o;a=r,o=function(t){t.decodeParams||(i&&i.decodeParams?t.decodeParams=i.decodeParams:t.decodeParams=e),t.options=i;var a=r.substr(0,r.lastIndexOf("/")+1),o=a;i&&i.geometryBase&&"/"!==(a=i.geometryBase).charAt(a.length-1)&&(a+="/"),i&&i.materialBase&&"/"!==(o=i.materialBase).charAt(o.length-1)&&(o+="/"),this.downloadModel(a,o,t,n)}.bind(this),t(a,(function(e){o(JSON.parse(e))}),(function(){}))}},4562:(e,t,r)=>{var n=r(5108);THREE.VRMLLoader=function(e){this.manager=void 0!==e?e:THREE.DefaultLoadingManager},THREE.VRMLLoader.prototype={constructor:THREE.VRMLLoader,isRecordingPoints:!1,isRecordingFaces:!1,points:[],indexes:[],isRecordingAngles:!1,isRecordingColors:!1,angles:[],colors:[],recordingFieldname:null,crossOrigin:"Anonymous",load:function(e,t,r,n){var i=this;new THREE.FileLoader(this.manager).load(e,(function(e){t(i.parse(e))}),r,n)},setCrossOrigin:function(e){this.crossOrigin=e},parse:function(e){var t=this.texturePath||"",r=new THREE.TextureLoader(this.manager);r.setCrossOrigin(this.crossOrigin);for(var i=new THREE.Scene,a=e.split("\n"),o=a.length-1;o>-1;o--){var s=a[o];if(/{.*[{\[]/.test(s))(l=s.split("{").join("{\n").split("\n")).unshift(1),l.unshift(o),a.splice.apply(a,l);else if(/\].*}/.test(s)){var l;(l=s.split("]").join("]\n").split("\n")).unshift(1),l.unshift(o),a.splice.apply(a,l)}if(/}.*}/.test(s))(l=s.split("}").join("}\n").split("\n")).unshift(1),l.unshift(o),a.splice.apply(a,l);/^\b[^\s]+\b$/.test(s.trim())?(a[o+1]=s+" "+a[o+1].trim(),a.splice(o,1)):s.indexOf("coord")>-1&&s.indexOf("[")<0&&s.indexOf("{")<0&&(a[o]+=" Coordinate {}")}var u=a.shift();return/V1.0/.exec(u)?n.warn("THREE.VRMLLoader: V1.0 not supported yet."):/V2.0/.exec(u)&&function(e,i){var a={},o=/(\b|\-|\+)([\d\.e]+)/,s=/([\d\.\+\-e]+)\s+([\d\.\+\-e]+)/g,l=/([\d\.\+\-e]+)\s+([\d\.\+\-e]+)\s+([\d\.\+\-e]+)/g;function u(e,t,r,n,i){for(var a=!0===i?1:-1,o=[],s={},l={},u=0;u<r.length;u++){var c={x:a*(Math.cos(r[u])*t),y:a*(Math.sin(r[u])*t)};o.push(c)}for(var h=e.index,d=e.attributes.position,f=new THREE.BufferAttribute(new Float32Array(3*e.attributes.position.count),3),p=new THREE.Vector3,m=new THREE.Color,g=0;g<h.count;g++){var v=h.getX(g);p.fromBufferAttribute(d,v);for(var y=0;y<n.length;y++)if(0===y?(s.x=0,s.y=!0===i?t:-1*t):(s.x=o[y-1].x,s.y=o[y-1].y),void 0!==(l=o[y]))if(!0==(!0===i?p.y<=s.y&&p.y>l.y:p.y>=s.y&&p.y<l.y)){var b=n[y],E=n[y+1],x=Math.abs(p.y-s.y)/(s.y-l.y);m.copy(b).lerp(E,x),f.setXYZ(v,m.r,m.g,m.b)}else{var w=n[!0===i?n.length-1:0];f.setXYZ(v,w.r,w.g,w.b)}}e.addAttribute("color",f)}var c=[];function h(e,t){for(var r,i,a,u=[],h={},d=/[^\s,\[\]]+/g;null!==(r=d.exec(t));)u.push(r[0]);switch(i=u[0]){case"skyAngle":case"groundAngle":this.recordingFieldname=i,this.isRecordingAngles=!0,this.angles=[];break;case"skyColor":case"groundColor":this.recordingFieldname=i,this.isRecordingColors=!0,this.colors=[];break;case"point":this.recordingFieldname=i,this.isRecordingPoints=!0,this.points=[];break;case"coordIndex":case"texCoordIndex":this.recordingFieldname=i,this.isRecordingFaces=!0,this.indexes=[]}if(this.isRecordingFaces){if(u.length>0)for(var f=0;f<u.length;f++)/(-?\d+)/.test(u[f])&&("-1"===u[f]?(c.length>0&&this.indexes.push(c),c=[]):c.push(parseInt(u[f])));/]/.exec(t)&&(c.length>0&&this.indexes.push(c),c=[],this.isRecordingFaces=!1,e[this.recordingFieldname]=this.indexes)}else if(this.isRecordingPoints){if("Coordinate"==e.nodeType)for(;null!==(u=l.exec(t));)a={x:parseFloat(u[1]),y:parseFloat(u[2]),z:parseFloat(u[3])},this.points.push(a);if("TextureCoordinate"==e.nodeType)for(;null!==(u=s.exec(t));)a={x:parseFloat(u[1]),y:parseFloat(u[2])},this.points.push(a);/]/.exec(t)&&(this.isRecordingPoints=!1,e.points=this.points)}else if(this.isRecordingAngles){if(u.length>0)for(f=0;f<u.length;f++)o.test(u[f])&&this.angles.push(parseFloat(u[f]));/]/.exec(t)&&(this.isRecordingAngles=!1,e[this.recordingFieldname]=this.angles)}else if(this.isRecordingColors){for(;null!==(u=l.exec(t));){var p={r:parseFloat(u[1]),g:parseFloat(u[2]),b:parseFloat(u[3])};this.colors.push(p)}/]/.exec(t)&&(this.isRecordingColors=!1,e[this.recordingFieldname]=this.colors)}else if("NULL"!==u[u.length-1]&&"children"!==i){switch(i){case"diffuseColor":case"emissiveColor":case"specularColor":case"color":if(4!==u.length){n.warn("THREE.VRMLLoader: Invalid color format detected for %s.",i);break}h={r:parseFloat(u[1]),g:parseFloat(u[2]),b:parseFloat(u[3])};break;case"location":case"direction":case"translation":case"scale":case"size":if(4!==u.length){n.warn("THREE.VRMLLoader: Invalid vector format detected for %s.",i);break}h={x:parseFloat(u[1]),y:parseFloat(u[2]),z:parseFloat(u[3])};break;case"intensity":case"cutOffAngle":case"radius":case"topRadius":case"bottomRadius":case"height":case"transparency":case"shininess":case"ambientIntensity":if(2!==u.length){n.warn("THREE.VRMLLoader: Invalid single float value specification detected for %s.",i);break}h=parseFloat(u[1]);break;case"rotation":if(5!==u.length){n.warn("THREE.VRMLLoader: Invalid quaternion format detected for %s.",i);break}h={x:parseFloat(u[1]),y:parseFloat(u[2]),z:parseFloat(u[3]),w:parseFloat(u[4])};break;case"on":case"ccw":case"solid":case"colorPerVertex":case"convex":if(2!==u.length){n.warn("THREE.VRMLLoader: Invalid format detected for %s.",i);break}h="TRUE"===u[1]}e[i]=h}return h}!function e(o,s){var l;if("string"!=typeof o){l=s,o.string.indexOf("AmbientLight")>-1&&"PointLight"===o.nodeType&&(o.nodeType="AmbientLight");var c=void 0===o.on||o.on,h=void 0!==o.intensity?o.intensity:1,d=new THREE.Color;if(o.color&&d.copy(o.color),"AmbientLight"===o.nodeType)(l=new THREE.AmbientLight(d,h)).visible=c,s.add(l);else if("PointLight"===o.nodeType){var f=0;void 0!==o.radius&&o.radius<1e3&&(f=o.radius),(l=new THREE.PointLight(d,h,f)).visible=c,s.add(l)}else if("SpotLight"===o.nodeType){h=1,f=0;var p=Math.PI/3;c=!0,void 0!==o.radius&&o.radius<1e3&&(f=o.radius),void 0!==o.cutOffAngle&&(p=o.cutOffAngle),(l=new THREE.SpotLight(d,h,f,p,0)).visible=c,s.add(l)}else if("Transform"===o.nodeType||"Group"===o.nodeType){if(l=new THREE.Object3D,/DEF/.exec(o.string)&&(l.name=/DEF\s+([^\s]+)/.exec(o.string)[1],a[l.name]=l),void 0!==o.translation){var m=o.translation;l.position.set(m.x,m.y,m.z)}if(void 0!==o.rotation){var g=o.rotation;l.quaternion.setFromAxisAngle(new THREE.Vector3(g.x,g.y,g.z),g.w)}if(void 0!==o.scale){var v=o.scale;l.scale.set(v.x,v.y,v.z)}s.add(l)}else if("Shape"===o.nodeType)l=new THREE.Mesh,/DEF/.exec(o.string)&&(l.name=/DEF\s+([^\s]+)/.exec(o.string)[1],a[l.name]=l),s.add(l);else if("Background"===o.nodeType){var y=2e4,b=new THREE.SphereBufferGeometry(y,20,20),E=new THREE.MeshBasicMaterial({fog:!1,side:THREE.BackSide});if(o.skyColor.length>1)u(b,y,o.skyAngle,o.skyColor,!0),E.vertexColors=THREE.VertexColors;else{var x=o.skyColor[0];E.color.setRGB(x.r,x.b,x.g)}if(i.add(new THREE.Mesh(b,E)),void 0!==o.groundColor){y=12e3;var w=new THREE.SphereBufferGeometry(y,20,20,0,2*Math.PI,.5*Math.PI,1.5*Math.PI),T=new THREE.MeshBasicMaterial({fog:!1,side:THREE.BackSide,vertexColors:THREE.VertexColors});u(w,y,o.groundAngle,o.groundColor,!1),i.add(new THREE.Mesh(w,T))}}else{if(/geometry/.exec(o.string)){if("Box"===o.nodeType)v=o.size,s.geometry=new THREE.BoxBufferGeometry(v.x,v.y,v.z);else if("Cylinder"===o.nodeType)s.geometry=new THREE.CylinderBufferGeometry(o.radius,o.radius,o.height);else if("Cone"===o.nodeType)s.geometry=new THREE.CylinderBufferGeometry(o.topRadius,o.bottomRadius,o.height);else if("Sphere"===o.nodeType)s.geometry=new THREE.SphereBufferGeometry(o.radius);else if("IndexedFaceSet"===o.nodeType){var _,S,M,R,A,C=new THREE.BufferGeometry,L=[],O=[];for(B=0,M=o.children.length;B<M;B++){if("TextureCoordinate"===(z=o.children[B]).nodeType&&z.points)for(R=0,A=z.points.length;R<A;R++)S=z.points[R],O.push(S.x,S.y);if("Coordinate"===z.nodeType){if(z.points)for(R=0,A=z.points.length;R<A;R++)_=z.points[R],L.push(_.x,_.y,_.z);if(z.string.indexOf("DEF")>-1){var I=/DEF\s+([^\s]+)/.exec(z.string)[1];a[I]=L.slice(0)}z.string.indexOf("USE")>-1&&(X=/USE\s+([^\s]+)/.exec(z.string)[1],L=a[X])}}var P=0;if(o.coordIndex){var H=[],k=[];for(_=new THREE.Vector3,S=new THREE.Vector2,B=0,M=o.coordIndex.length;B<M;B++){var N=o.coordIndex[B];for(P=0;N.length>=3&&P<N.length-2;){void 0===o.ccw&&(o.ccw=!0);var U=N[0],D=N[P+(o.ccw?1:2)],F=N[P+(o.ccw?2:1)];_.fromArray(L,3*U),S.fromArray(O,2*U),H.push(_.x,_.y,_.z),k.push(S.x,S.y),_.fromArray(L,3*D),S.fromArray(O,2*D),H.push(_.x,_.y,_.z),k.push(S.x,S.y),_.fromArray(L,3*F),S.fromArray(O,2*F),H.push(_.x,_.y,_.z),k.push(S.x,S.y),P++}}L=H,O=k}else s.parent.remove(s);!1===o.solid&&(s.material.side=THREE.DoubleSide),C.solid=o.solid,C.addAttribute("position",new THREE.Float32BufferAttribute(L,3)),O.length>0&&C.addAttribute("uv",new THREE.Float32BufferAttribute(O,2)),C.computeVertexNormals(),C.computeBoundingSphere(),/DEF/.exec(o.string)&&(C.name=/DEF ([^\s]+)/.exec(o.string)[1],a[C.name]=C),s.geometry=C}return}if(/appearance/.exec(o.string)){for(var B=0;B<o.children.length;B++){var z;if("Material"===(z=o.children[B]).nodeType){var j=new THREE.MeshPhongMaterial;if(void 0!==z.diffuseColor){var V=z.diffuseColor;j.color.setRGB(V.r,V.g,V.b)}if(void 0!==z.emissiveColor){var G=z.emissiveColor;j.emissive.setRGB(G.r,G.g,G.b)}void 0!==z.specularColor&&(v=z.specularColor,j.specular.setRGB(v.r,v.g,v.b)),void 0!==z.transparency&&(m=z.transparency,j.opacity=Math.abs(1-m),j.transparent=!0),/DEF/.exec(o.string)&&(j.name=/DEF ([^\s]+)/.exec(o.string)[1],a[j.name]=j),s.material=j}if("ImageTexture"===z.nodeType){var W=/"([^"]+)"/.exec(z.children[0]);W&&(s.material.name=W[1],s.material.map=r.load(t+W[1]))}}return}}B=0;for(var q=o.children.length;B<q;B++)e(o.children[B],l)}else if(/USE/.exec(o)){var X=/USE\s+?([^\s]+)/.exec(o)[1];null==a[X]?n.warn("THREE.VRMLLoader: %s is not defined.",X):/appearance/.exec(o)&&X?s.material=a[X].clone():/geometry/.exec(o)&&X?(s.geometry=a[X].clone(),void 0!==a[X].solid&&!1===a[X].solid&&(s.geometry.solid=!1,s.material.side=THREE.DoubleSide)):X&&(l=a[X].clone(),s.add(l))}}(function(e){for(var t,r,n={string:"Scene",children:[]},i=n,a=0;a<e.length;a++){var o="",s=e[a];if(null===/^\s+?$/g.exec(s)&&""!==(s=s.trim())){if(/#/.exec(s)){var l=s.split("#");s=l[0],o=l[1]}if(t=/([^\s]*){1}(?:\s+)?{/.exec(s)){var u={nodeType:t[1],string:s,parent:i,children:[],comment:o};i.children.push(u),i=u,/}/.exec(s)&&(r=/{(.*)}/.exec(s)[1],u.children.push(r),h(i,r),i=i.parent)}else/}/.exec(s)?i=i.parent:""!==s&&(h(i,s),i.children.push(s))}}return n}(e),i)}(a,i),i}}},8220:()=>{THREE.VTKLoader=function(e){this.manager=void 0!==e?e:THREE.DefaultLoadingManager},Object.assign(THREE.VTKLoader.prototype,THREE.EventDispatcher.prototype,{load:function(e,t,r,n){var i=this,a=new THREE.FileLoader(i.manager);a.setResponseType("arraybuffer"),a.load(e,(function(e){t(i.parse(e))}),r,n)},parse:function(e){function t(e,t){var r=e.length,n=new Int32Array(r+t.length);return n.set(e),n.set(t,r),n}function r(e){for(var t="",r=new Uint8Array(e),n=0,i=r.length;i--;)t+=String.fromCharCode(r[n++]);return t}var n=THREE.LoaderUtils.decodeText(new Uint8Array(e,0,250)).split("\n");return-1!==n[0].indexOf("xml")?function(e){function r(e){var t,r,n,i,a,o,s="undefined"!=typeof Uint8Array?Uint8Array:Array,l=[],u=[],c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",h=64;for(t=0;t<h;t++)l[t]=c[t];for(t=0;t<h;++t)u[c.charCodeAt(t)]=t;if(u["-".charCodeAt(0)]=62,u["_".charCodeAt(0)]=63,(h=e.length)%4>0)throw new Error("Invalid string. Length must be a multiple of 4");o=new s(3*h/4-(a="="===e[h-2]?2:"="===e[h-1]?1:0)),n=a>0?h-4:h;var d=0;for(t=0,r=0;t<n;t+=4,r+=3)i=u[e.charCodeAt(t)]<<18|u[e.charCodeAt(t+1)]<<12|u[e.charCodeAt(t+2)]<<6|u[e.charCodeAt(t+3)],o[d++]=(16711680&i)>>16,o[d++]=(65280&i)>>8,o[d++]=255&i;return 2===a?(i=u[e.charCodeAt(t)]<<2|u[e.charCodeAt(t+1)]>>4,o[d++]=255&i):1===a&&(i=u[e.charCodeAt(t)]<<10|u[e.charCodeAt(t+1)]<<4|u[e.charCodeAt(t+2)]>>2,o[d++]=i>>8&255,o[d++]=255&i),o}function n(e,n){var i,o,s,l,u=0;if("UInt64"===a.attributes.header_type?u=8:"UInt32"===a.attributes.header_type&&(u=4),"binary"===e.attributes.format&&n){var c,h,d,f,p,m;if("Float32"===e.attributes.type)var g=new Float32Array;else"Int64"===e.attributes.type&&(g=new Int32Array);h=(c=r(e["#text"]))[0];for(var v=1;v<u-1;v++)h|=c[v]<<v*u;for(f=(h+3)*u,m=f+=f%3>0?3-f%3:0,(p=[]).push(m),d=3*u,v=0;v<h;v++){for(var y=c[v*u+d],b=1;b<u-1;b++)y|=c[v*u+d+b]<<8*b;m+=y,p.push(m)}for(v=0;v<p.length-1;v++)E=(E=new Zlib.Inflate(c.slice(p[v],p[v+1]),{resize:!0,verify:!0}).decompress()).buffer,"Float32"===e.attributes.type?(o=E=new Float32Array(E),s=void 0,l=void 0,s=(i=g).length,(l=new Float32Array(s+o.length)).set(i),l.set(o,s),g=l):"Int64"===e.attributes.type&&(g=t(g,E=new Int32Array(E)));delete e["#text"],"Float32"===e.attributes.type?"binary"===e.attributes.format&&(n||(g=g.filter((function(e,t){if(0!==t)return!0})))):"Int64"===e.attributes.type&&"binary"===e.attributes.format&&(n||(g=g.filter((function(e,t){if(0!==t)return!0}))),g=g.filter((function(e,t){if(t%2!=1)return!0})))}else{if("binary"!==e.attributes.format||n)if(e["#text"])var E=e["#text"].split(/\s+/).filter((function(e){if(""!==e)return e}));else E=new Int32Array(0).buffer;else E=(E=r(e["#text"])).slice(u).buffer;delete e["#text"],"Float32"===e.attributes.type?g=new Float32Array(E):"Int32"===e.attributes.type?g=new Int32Array(E):"Int64"===e.attributes.type&&(g=new Int32Array(E),"binary"===e.attributes.format&&(g=g.filter((function(e,t){if(t%2!=1)return!0}))))}return g}var i=null;if(window.DOMParser)try{i=(new DOMParser).parseFromString(e,"text/xml")}catch(e){i=null}else{if(!window.ActiveXObject)throw new Error("Cannot parse xml string!");try{if((i=new ActiveXObject("Microsoft.XMLDOM")).async=!1,!i.loadXML())throw new Error(i.parseError.reason+i.parseError.srcText)}catch(e){i=null}}var a=function e(t){var r={};if(1===t.nodeType){if(t.attributes&&t.attributes.length>0){r.attributes={};for(var n=0;n<t.attributes.length;n++){var i=t.attributes.item(n);r.attributes[i.nodeName]=i.nodeValue.trim()}}}else 3===t.nodeType&&(r=t.nodeValue.trim());if(t.hasChildNodes())for(var a=0;a<t.childNodes.length;a++){var o=t.childNodes.item(a),s=o.nodeName;if(void 0===r[s])""!==(u=e(o))&&(r[s]=u);else{if(void 0===r[s].push){var l=r[s];r[s]=[l]}var u;""!==(u=e(o))&&r[s].push(u)}}return r}(i.documentElement),o=[],s=[],l=[];if(a.PolyData){for(var u=a.PolyData.Piece,c=a.attributes.hasOwnProperty("compressor"),h=["PointData","Points","Strips","Polys"],d=0,f=h.length;d<f;){var p=u[h[d]];if(p&&p.DataArray){if("[object Array]"===Object.prototype.toString.call(p.DataArray))var m=p.DataArray;else m=[p.DataArray];for(var g=0,v=m.length;g<v;)"#text"in m[g]&&m[g]["#text"].length>0&&(m[g].text=n(m[g],c)),g++;switch(h[d]){case"PointData":var y=parseInt(u.attributes.NumberOfPoints),b=p.attributes.Normals;if(y>0)for(var E=0,x=m.length;E<x;E++)if(b===m[E].attributes.Name){var w=m[E].attributes.NumberOfComponents;(s=new Float32Array(y*w)).set(m[E].text,0)}break;case"Points":(y=parseInt(u.attributes.NumberOfPoints))>0&&(w=p.DataArray.attributes.NumberOfComponents,(o=new Float32Array(y*w)).set(p.DataArray.text,0));break;case"Strips":var T=parseInt(u.attributes.NumberOfStrips);if(T>0){var _=new Int32Array(p.DataArray[0].text.length),S=new Int32Array(p.DataArray[1].text.length);_.set(p.DataArray[0].text,0),S.set(p.DataArray[1].text,0);var M=T+_.length;l=new Uint32Array(3*M-9*T);var R=0;for(E=0,x=T;E<x;E++){for(var A=[],C=0,L=S[E],O=0;C<L-O;C++)A.push(_[C]),E>0&&(O=S[E-1]);var I=0;for(L=S[E],O=0;I<L-O-2;I++)I%2?(l[R++]=A[I],l[R++]=A[I+2],l[R++]=A[I+1]):(l[R++]=A[I],l[R++]=A[I+1],l[R++]=A[I+2]),E>0&&(O=S[E-1])}}break;case"Polys":var P=parseInt(u.attributes.NumberOfPolys);if(P>0){_=new Int32Array(p.DataArray[0].text.length),S=new Int32Array(p.DataArray[1].text.length),_.set(p.DataArray[0].text,0),S.set(p.DataArray[1].text,0),M=P+_.length,l=new Uint32Array(3*M-9*P),R=0;var H=0;for(E=0,x=P,O=0;E<x;){var k=[];for(C=0,L=S[E];C<L-O;)k.push(_[H++]),C++;for(I=1;I<L-O-1;)l[R++]=k[0],l[R++]=k[I],l[R++]=k[I+1],I++;O=S[++E-1]}}}}d++}var N=new THREE.BufferGeometry;return N.setIndex(new THREE.BufferAttribute(l,1)),N.addAttribute("position",new THREE.BufferAttribute(o,3)),s.length===o.length&&N.addAttribute("normal",new THREE.BufferAttribute(s,3)),N}}(r(e)):n[2].includes("ASCII")?function(e){var t,r,n=[],i=[],a=[],o=[],s=/(\-?\d+\.?[\d\-\+e]*)\s+(\-?\d+\.?[\d\-\+e]*)\s+(\-?\d+\.?[\d\-\+e]*)/g,l=/^(\d+)\s+([\s\d]*)/,u=/^POINTS /,c=/^POLYGONS /,h=/^TRIANGLE_STRIPS /,d=/^POINT_DATA[ ]+(\d+)/,f=/^CELL_DATA[ ]+(\d+)/,p=/^COLOR_SCALARS[ ]+(\w+)[ ]+3/,m=/^NORMALS[ ]+(\w+)[ ]+(\w+)/,g=!1,v=!1,y=!1,b=!1,E=!1,x=!1,w=!1,T=e.split("\n");for(var _ in T){var S=T[_];if(g)for(;null!==(t=s.exec(S));){var M=parseFloat(t[1]),R=parseFloat(t[2]),A=parseFloat(t[3]);i.push(M,R,A)}else if(v){if(null!==(t=l.exec(S))){var C=parseInt(t[1]),L=t[2].split(/\s+/);if(C>=3)for(var O=parseInt(L[0]),I=1,P=0;P<C-2;++P)H=parseInt(L[I]),k=parseInt(L[I+1]),n.push(O,H,k),I++}}else if(y){if(null!==(t=l.exec(S))){var H,k;if(C=parseInt(t[1]),L=t[2].split(/\s+/),C>=3)for(P=0;P<C-2;P++)P%2==1?(O=parseInt(L[P]),H=parseInt(L[P+2]),k=parseInt(L[P+1]),n.push(O,H,k)):(O=parseInt(L[P]),H=parseInt(L[P+1]),k=parseInt(L[P+2]),n.push(O,H,k))}}else if(b||E)if(x)for(;null!==(t=s.exec(S));){var N=parseFloat(t[1]),U=parseFloat(t[2]),D=parseFloat(t[3]);a.push(N,U,D)}else if(w)for(;null!==(t=s.exec(S));){var F=parseFloat(t[1]),B=parseFloat(t[2]),z=parseFloat(t[3]);o.push(F,B,z)}null!==c.exec(S)?(v=!0,g=!1,y=!1):null!==u.exec(S)?(v=!1,g=!0,y=!1):null!==h.exec(S)?(v=!1,g=!1,y=!0):null!==d.exec(S)?(b=!0,g=!1,v=!1,y=!1):null!==f.exec(S)?(E=!0,g=!1,v=!1,y=!1):null!==p.exec(S)?(x=!0,w=!1,g=!1,v=!1,y=!1):null!==m.exec(S)&&(w=!0,x=!1,g=!1,v=!1,y=!1)}var j="point";if(a.length===n.length&&(j="cell"),"point"===j)(r=new THREE.BufferGeometry).setIndex(new THREE.BufferAttribute(new Uint32Array(n),1)),r.addAttribute("position",new THREE.BufferAttribute(new Float32Array(i),3)),a.length===i.length&&r.addAttribute("color",new THREE.BufferAttribute(new Float32Array(a),3)),o.length===i.length&&r.addAttribute("normal",new THREE.BufferAttribute(new Float32Array(o),3));else{r=new THREE.Geometry;var V,G,W,q,X=n.length/3,Y=i.length/3;for(P=0;P<Y;++P)M=i[3*P+0],R=i[3*P+1],A=i[3*P+2],r.vertices.push(new THREE.Vector3(M,R,A));for(_=0;_<X;++_)G=n[3*_+0],W=n[3*_+1],q=n[3*_+2],r.faces.push(new THREE.Face3(G,W,q));if(a.length===3*X)for(_=0;_<X;++_)V=r.faces[_],N=a[3*_+0],U=a[3*_+1],D=a[3*_+2],V.color=(new THREE.Color).setRGB(N,U,D)}return r}(r(e)):function(e){var t,r,n,i,a,o,s,l=new Uint8Array(e),u=new DataView(e),c=[],h=[],d=[],f=[],p=0;function m(e,t){for(var r=t,n=e[r],i=[];10!==n;)i.push(String.fromCharCode(n)),n=e[++r];return{start:t,end:r,next:r+1,parsedString:i.join("")}}for(;;){if(0===(s=(o=m(l,p)).parsedString).indexOf("POINTS")){for(f.push(s),t=4*(i=parseInt(s.split(" ")[1],10))*3,c=new Float32Array(3*i),r=o.next,n=0;n<i;n++)c[3*n]=u.getFloat32(r,!1),c[3*n+1]=u.getFloat32(r+4,!1),c[3*n+2]=u.getFloat32(r+8,!1),r+=12;o.next=o.next+t+1}else if(0===s.indexOf("TRIANGLE_STRIPS")){var g=parseInt(s.split(" ")[1],10);t=4*(x=parseInt(s.split(" ")[2],10)),d=new Uint32Array(3*x-9*g);var v=0;for(r=o.next,n=0;n<g;n++){var y=u.getInt32(r,!1),b=[];for(r+=4,a=0;a<y;a++)b.push(u.getInt32(r,!1)),r+=4;for(var E=0;E<y-2;E++)E%2?(d[v++]=b[E],d[v++]=b[E+2],d[v++]=b[E+1]):(d[v++]=b[E],d[v++]=b[E+1],d[v++]=b[E+2])}o.next=o.next+t+1}else if(0===s.indexOf("POLYGONS")){var x;for(g=parseInt(s.split(" ")[1],10),t=4*(x=parseInt(s.split(" ")[2],10)),d=new Uint32Array(3*x-9*g),v=0,r=o.next,n=0;n<g;n++){for(y=u.getInt32(r,!1),b=[],r+=4,a=0;a<y;a++)b.push(u.getInt32(r,!1)),r+=4;for(E=1;E<y-1;E++)d[v++]=b[0],d[v++]=b[E],d[v++]=b[E+1]}o.next=o.next+t+1}else if(0===s.indexOf("POINT_DATA")){for(i=parseInt(s.split(" ")[1],10),o=m(l,o.next),t=4*i*3,h=new Float32Array(3*i),r=o.next,n=0;n<i;n++)h[3*n]=u.getFloat32(r,!1),h[3*n+1]=u.getFloat32(r+4,!1),h[3*n+2]=u.getFloat32(r+8,!1),r+=12;o.next=o.next+t}if((p=o.next)>=l.byteLength)break}var w=new THREE.BufferGeometry;return w.setIndex(new THREE.BufferAttribute(d,1)),w.addAttribute("position",new THREE.BufferAttribute(c,3)),h.length===c.length&&w.addAttribute("normal",new THREE.BufferAttribute(h,3)),w}(e)}})},4638:function(e,t,r){var n=r(5108);e.exports=function(){"use strict";var e=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},t=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),r=function t(){e(this,t),this.boneName="",this.BoneIndex=0,this.Indeces=[],this.Weights=[],this.initMatrix=null,this.OffsetMatrix=null},i=function t(){e(this,t),this.animeName="",this.boneName="",this.targetBone=null,this.keyType=4,this.frameStartLv=0,this.keyFrames=[],this.InverseMx=null},a=function(){function r(t){e(this,r),this.fps=30,this.name="xanimation",this.length=0,this.hierarchy=[],this.putFlags=t,void 0===this.putFlags.putPos&&(this.putFlags.putPos=!0),void 0===this.putFlags.putRot&&(this.putFlags.putRot=!0),void 0===this.putFlags.putScl&&(this.putFlags.putScl=!0)}return t(r,[{key:"make",value:function(e){for(var t=0;t<e.length;t++)this.hierarchy.push(this.makeBonekeys(e[t]));this.length=this.hierarchy[0].keys[this.hierarchy[0].keys.length-1].time}},{key:"clone",value:function(){return Object.assign({},this)}},{key:"makeBonekeys",value:function(e){var t={};return t.name=e.boneName,t.parent="",t.keys=this.keyFrameRefactor(e),t.copy=function(){return Object.assign({},this)},t}},{key:"keyFrameRefactor",value:function(e){for(var t=[],r=0;r<e.keyFrames.length;r++){var n={};n.time=e.keyFrames[r].time*this.fps,e.keyFrames[r].pos&&this.putFlags.putPos&&(n.pos=e.keyFrames[r].pos),e.keyFrames[r].rot&&this.putFlags.putRot&&(n.rot=e.keyFrames[r].rot),e.keyFrames[r].scl&&this.putFlags.putScl&&(n.scl=e.keyFrames[r].scl),e.keyFrames[r].matrix&&(n.matrix=e.keyFrames[r].matrix,this.putFlags.putPos&&(n.pos=(new THREE.Vector3).setFromMatrixPosition(n.matrix)),this.putFlags.putRot&&(n.rot=(new THREE.Quaternion).setFromRotationMatrix(n.matrix)),this.putFlags.putScl&&(n.scl=(new THREE.Vector3).setFromMatrixScale(n.matrix))),t.push(n)}return t}}]),r}(),o=function t(){e(this,t),this.index=0,this.Frame=0,this.time=0,this.matrix=null},s=function(){function s(t,r){e(this,s),this.debug=!1,this.manager=void 0!==t?t:new THREE.DefaultLoadingManager,this.texloader=void 0!==r?r:new THREE.TextureLoader,this.url="",this.baseDir="",this._putMatLength=0,this._nowMat=null,this._tmpUvArray=[],this._facesNormal=[],this._nowFrameName="",this.frameHierarchie=[],this.Hierarchies={},this.HieStack=[],this._currentObject={},this._currentFrame={},this._data=null,this.onLoad=null,this.IsUvYReverse=!0,this.Meshes=[],this.animations=[],this.animTicksPerSecond=30,this._currentGeo=null,this._currentAnime=null,this._currentAnimeFrames=null}return t(s,[{key:"_setArgOption",value:function(e){if(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;t<e.length;t++)switch(t){case 0:this.url=e[t];break;case 1:this.options=e[t]}void 0===this.options&&(this.options={})}}},{key:"load",value:function(e,t,r,n){var i=this;this._setArgOption(e);var a=new THREE.FileLoader(this.manager);a.setResponseType("arraybuffer"),a.load(this.url,(function(e){i._parse(e,t)}),r,n)}},{key:"fromResponsedData",value:function(e,t,r){this._setArgOption(t),this._parse(e,r)}},{key:"_readLine",value:function(e){for(var t=0;;){var r=-1;if(-1===(r=e.indexOf("//",t))&&(r=e.indexOf("#",t)),!(r>-1&&r<2))break;var n=-1;t=(n=e.indexOf("\r\n",t))>0?n+2:(n=e.indexOf("\r",t))>0?n+1:e.indexOf("\n",t)+1}return e.substr(t)}},{key:"_readLine",value:function(e){for(var t=0;;){var r=-1;if(-1===(r=e.indexOf("//",t))&&(r=e.indexOf("#",t)),!(r>-1&&r<2))break;var n=-1;t=(n=e.indexOf("\r\n",t))>0?n+2:(n=e.indexOf("\r",t))>0?n+1:e.indexOf("\n",t)+1}return e.substr(t)}},{key:"_isBinary",value:function(e){var t=new DataView(e),r=50;if(84+t.getUint32(80,!0)*r===t.byteLength)return!0;for(var n=t.byteLength,i=0;i<n;i++)if(t.getUint8(i,!1)>127)return!0;return!1}},{key:"ensureBinary",value:function(e){if("string"==typeof e){for(var t=new Uint8Array(e.length),r=0;r<e.length;r++)t[r]=255&e.charCodeAt(r);return t.buffer||t}return e}},{key:"ensureString",value:function(e){return"string"!=typeof e?THREE.LoaderUtils.decodeText(new Uint8Array(e)):e}},{key:"_parse",value:function(e,t){var r=this.ensureBinary(e);return this._data=this.ensureString(e),this.onLoad=t,this._isBinary(r)?this._parseBinary(r):this._parseASCII()}},{key:"_parseBinary",value:function(e){return this._parseASCII(THREE.LoaderUtils.decodeText(new Uint8Array(e)))}},{key:"_parseASCII",value:function(){this.url.lastIndexOf("/")>0&&(this.baseDir=this.url.substr(0,this.url.lastIndexOf("/")+1));var e=16;this.Hierarchies.children=[],this._hierarchieParse(this.Hierarchies,e),this._changeRoot(),this._currentObject=this.Hierarchies.children.shift(),this.mainloop()}},{key:"_hierarchieParse",value:function(e,t){for(var r=t;;){var n=this._data.indexOf("{",r)+1,i=this._data.indexOf("}",r),a=this._data.indexOf("{",n)+1;if(!(n>0&&i>n)){r=-1===n?this._data.length:i+1;break}var o={children:[]},s=this._readLine(this._data.substr(r,n-r-1)).trim(),l=s.split(/ /g);if(l.length>0?(o.type=l[0],l.length>=2?o.name=l[1]:o.name=l[0]+this.Hierarchies.children.length):(o.name=s,o.type=""),"Animation"===o.type){o.data=this._data.substr(a,i-a).trim();var u=this._hierarchieParse(o,i+1);r=u.end,o.children=u.parent.children}else{var c=this._data.lastIndexOf(";",a>0?Math.min(a,i):i);if(o.data=this._data.substr(n,c-n).trim(),a<=0||i<a)r=i+1;else{var h=Math.max(c+1,n),d=this._hierarchieParse(o,h);r=d.end,o.children=d.parent.children}}o.parent=e,"template"!=o.type&&e.children.push(o)}return{parent:e,end:r}}},{key:"mainloop",value:function(){var e=this;this.mainProc(),this._currentObject.parent||this._currentObject.children.length>0||!this._currentObject.worked?setTimeout((function(){e.mainloop()}),1):setTimeout((function(){e.onLoad({models:e.Meshes,animations:e.animations})}),1)}},{key:"mainProc",value:function(){for(var e=!1;;){if(!this._currentObject.worked){switch(this._currentObject.type){case"template":case"VertexDuplicationIndices":break;case"AnimTicksPerSecond":this.animTicksPerSecond=parseInt(this._currentObject.data);break;case"Frame":this._setFrame();break;case"FrameTransformMatrix":this._setFrameTransformMatrix();break;case"Mesh":this._changeRoot(),this._currentGeo={},this._currentGeo.name=this._currentObject.name.trim(),this._currentGeo.parentName=this._getParentName(this._currentObject).trim(),this._currentGeo.VertexSetedBoneCount=[],this._currentGeo.Geometry=new THREE.Geometry,this._currentGeo.Materials=[],this._currentGeo.normalVectors=[],this._currentGeo.BoneInfs=[],this._currentGeo.baseFrame=this._currentFrame,this._makeBoneFrom_CurrentFrame(),this._readVertexDatas(),e=!0;break;case"MeshNormals":this._readVertexDatas();break;case"MeshTextureCoords":this._setMeshTextureCoords();break;case"MeshMaterialList":this._setMeshMaterialList();break;case"Material":this._setMaterial();break;case"SkinWeights":this._setSkinWeights();break;case"AnimationSet":this._changeRoot(),this._currentAnime={},this._currentAnime.name=this._currentObject.name.trim(),this._currentAnime.AnimeFrames=[];break;case"Animation":this._currentAnimeFrames&&this._currentAnime.AnimeFrames.push(this._currentAnimeFrames),this._currentAnimeFrames=new i,this._currentAnimeFrames.boneName=this._currentObject.data.trim();break;case"AnimationKey":this._readAnimationKey(),e=!0}this._currentObject.worked=!0}if(this._currentObject.children.length>0){if(this._currentObject=this._currentObject.children.shift(),this.debug&&n.log("processing "+this._currentObject.name),e)break}else if(this._currentObject.worked&&this._currentObject.parent&&!this._currentObject.parent.parent&&this._changeRoot(),this._currentObject.parent?this._currentObject=this._currentObject.parent:e=!0,e)break}}},{key:"_changeRoot",value:function(){null!=this._currentGeo&&this._currentGeo.name&&this._makeOutputGeometry(),this._currentGeo={},null!=this._currentAnime&&this._currentAnime.name&&(this._currentAnimeFrames&&(this._currentAnime.AnimeFrames.push(this._currentAnimeFrames),this._currentAnimeFrames=null),this._makeOutputAnimation()),this._currentAnime={}}},{key:"_getParentName",value:function(e){return e.parent?e.parent.name?e.parent.name:this._getParentName(e.parent):""}},{key:"_setFrame",value:function(){this._nowFrameName=this._currentObject.name.trim(),this._currentFrame={},this._currentFrame.name=this._nowFrameName,this._currentFrame.children=[],this._currentObject.parent&&this._currentObject.parent.name&&(this._currentFrame.parentName=this._currentObject.parent.name),this.frameHierarchie.push(this._nowFrameName),this.HieStack[this._nowFrameName]=this._currentFrame}},{key:"_setFrameTransformMatrix",value:function(){this._currentFrame.FrameTransformMatrix=new THREE.Matrix4;var e=this._currentObject.data.split(",");this._ParseMatrixData(this._currentFrame.FrameTransformMatrix,e),this._makeBoneFrom_CurrentFrame()}},{key:"_makeBoneFrom_CurrentFrame",value:function(){if(this._currentFrame.FrameTransformMatrix){var e=new THREE.Bone;if(e.name=this._currentFrame.name,e.applyMatrix(this._currentFrame.FrameTransformMatrix),e.matrixWorld=e.matrix,e.FrameTransformMatrix=this._currentFrame.FrameTransformMatrix,this._currentFrame.putBone=e,this._currentFrame.parentName)for(var t in this.HieStack)this.HieStack[t].name===this._currentFrame.parentName&&this.HieStack[t].putBone.add(this._currentFrame.putBone)}}},{key:"_readVertexDatas",value:function(){for(var e=0,t=0,r=0,n=0,i=0;;){var a=!1;if(0===r)e=this._readInt1(e).endRead,r=1,i=0,(n=this._currentObject.data.indexOf(";;",e)+1)<=0&&(n=this._currentObject.data.length);else{var o=0;switch(t){case 0:o=this._currentObject.data.indexOf(",",e)+1;break;case 1:o=this._currentObject.data.indexOf(";,",e)+1}switch((0===o||o>n)&&(o=n,r=0,a=!0),this._currentObject.type){case"Mesh":switch(t){case 0:this._readVertex1(this._currentObject.data.substr(e,o-e));break;case 1:this._readFace1(this._currentObject.data.substr(e,o-e))}break;case"MeshNormals":switch(t){case 0:this._readNormalVector1(this._currentObject.data.substr(e,o-e));break;case 1:this._readNormalFace1(this._currentObject.data.substr(e,o-e),i)}}e=o+1,i++,a&&t++}if(e>=this._currentObject.data.length)break}}},{key:"_readInt1",value:function(e){var t=this._currentObject.data.indexOf(";",e);return{refI:parseInt(this._currentObject.data.substr(e,t-e)),endRead:t+1}}},{key:"_readVertex1",value:function(e){var t=this._readLine(e.trim()).substr(0,e.length-2).split(";");this._currentGeo.Geometry.vertices.push(new THREE.Vector3(parseFloat(t[0]),parseFloat(t[1]),parseFloat(t[2]))),this._currentGeo.Geometry.skinIndices.push(new THREE.Vector4(0,0,0,0)),this._currentGeo.Geometry.skinWeights.push(new THREE.Vector4(1,0,0,0)),this._currentGeo.VertexSetedBoneCount.push(0)}},{key:"_readFace1",value:function(e){var t=this._readLine(e.trim()).substr(2,e.length-4).split(",");this._currentGeo.Geometry.faces.push(new THREE.Face3(parseInt(t[0],10),parseInt(t[1],10),parseInt(t[2],10),new THREE.Vector3(1,1,1).normalize()))}},{key:"_readNormalVector1",value:function(e){var t=this._readLine(e.trim()).substr(0,e.length-2).split(";");this._currentGeo.normalVectors.push(new THREE.Vector3(parseFloat(t[0]),parseFloat(t[1]),parseFloat(t[2])))}},{key:"_readNormalFace1",value:function(e,t){var r=this._readLine(e.trim()).substr(2,e.length-4).split(","),n=parseInt(r[0],10),i=this._currentGeo.normalVectors[n];n=parseInt(r[1],10);var a=this._currentGeo.normalVectors[n];n=parseInt(r[2],10);var o=this._currentGeo.normalVectors[n];this._currentGeo.Geometry.faces[t].vertexNormals=[i,a,o]}},{key:"_setMeshNormals",value:function(){for(var e=0,t=0,r=0;;){if(0===t)if(0===r)e=this._readInt1(0).endRead,r=1;else{var n=this._currentObject.data.indexOf(",",e)+1;-1===n&&(n=this._currentObject.data.indexOf(";;",e)+1,t=2,r=0);var i=this._currentObject.data.substr(e,n-e),a=this._readLine(i.trim()).split(";");this._currentGeo.normalVectors.push([parseFloat(a[0]),parseFloat(a[1]),parseFloat(a[2])]),e=n+1}if(e>=this._currentObject.data.length)break}}},{key:"_setMeshTextureCoords",value:function(){this._tmpUvArray=[],this._currentGeo.Geometry.faceVertexUvs=[],this._currentGeo.Geometry.faceVertexUvs.push([]);for(var e=0,t=0,r=0;;){if(0===t)if(0===r)e=this._readInt1(0).endRead,r=1;else{var n=this._currentObject.data.indexOf(",",e)+1;0===n&&(n=this._currentObject.data.length,t=2,r=0);var i=this._currentObject.data.substr(e,n-e),a=this._readLine(i.trim()).split(";");this.IsUvYReverse?this._tmpUvArray.push(new THREE.Vector2(parseFloat(a[0]),1-parseFloat(a[1]))):this._tmpUvArray.push(new THREE.Vector2(parseFloat(a[0]),parseFloat(a[1]))),e=n+1}if(e>=this._currentObject.data.length)break}this._currentGeo.Geometry.faceVertexUvs[0]=[];for(var o=0;o<this._currentGeo.Geometry.faces.length;o++)this._currentGeo.Geometry.faceVertexUvs[0][o]=[],this._currentGeo.Geometry.faceVertexUvs[0][o].push(this._tmpUvArray[this._currentGeo.Geometry.faces[o].a]),this._currentGeo.Geometry.faceVertexUvs[0][o].push(this._tmpUvArray[this._currentGeo.Geometry.faces[o].b]),this._currentGeo.Geometry.faceVertexUvs[0][o].push(this._tmpUvArray[this._currentGeo.Geometry.faces[o].c]);this._currentGeo.Geometry.uvsNeedUpdate=!0}},{key:"_setMeshMaterialList",value:function(){for(var e=0,t=0,r=0;;){if(r<2)e=this._readInt1(e).endRead,r++;else{var n=this._currentObject.data.indexOf(";",e);-1===n&&(n=this._currentObject.data.length,t=3,r=0);for(var i=this._currentObject.data.substr(e,n-e),a=this._readLine(i.trim()).split(","),o=0;o<a.length;o++)this._currentGeo.Geometry.faces[o].materialIndex=parseInt(a[o]);e=this._currentObject.data.length}if(e>=this._currentObject.data.length||t>=3)break}}},{key:"_setMaterial",value:function(){var e=new THREE.MeshPhongMaterial({color:16777215*Math.random()});e.side=THREE.FrontSide,e.name=this._currentObject.name;var t=0,r=this._currentObject.data.indexOf(";;",t),i=this._currentObject.data.substr(t,r-t),a=this._readLine(i.trim()).split(";");e.color.r=parseFloat(a[0]),e.color.g=parseFloat(a[1]),e.color.b=parseFloat(a[2]),t=r+2,r=this._currentObject.data.indexOf(";",t),i=this._currentObject.data.substr(t,r-t),e.shininess=parseFloat(this._readLine(i)),t=r+1,r=this._currentObject.data.indexOf(";;",t),i=this._currentObject.data.substr(t,r-t);var o=this._readLine(i.trim()).split(";");e.specular.r=parseFloat(o[0]),e.specular.g=parseFloat(o[1]),e.specular.b=parseFloat(o[2]),t=r+2,-1===(r=this._currentObject.data.indexOf(";;",t))&&(r=this._currentObject.data.length),i=this._currentObject.data.substr(t,r-t);var s=this._readLine(i.trim()).split(";");e.emissive.r=parseFloat(s[0]),e.emissive.g=parseFloat(s[1]),e.emissive.b=parseFloat(s[2]);for(var l=null;this._currentObject.children.length>0;){l=this._currentObject.children.shift(),this.debug&&n.log("processing "+l.name);var u=l.data.substr(1,l.data.length-2);switch(l.type){case"TextureFilename":e.map=this.texloader.load(this.baseDir+u);break;case"BumpMapFilename":e.bumpMap=this.texloader.load(this.baseDir+u),e.bumpScale=.05;break;case"NormalMapFilename":e.normalMap=this.texloader.load(this.baseDir+u),e.normalScale=new THREE.Vector2(2,2);break;case"EmissiveMapFilename":e.emissiveMap=this.texloader.load(this.baseDir+u);break;case"LightMapFilename":e.lightMap=this.texloader.load(this.baseDir+u)}}this._currentGeo.Materials.push(e)}},{key:"_setSkinWeights",value:function(){var e=new r,t=0,n=this._currentObject.data.indexOf(";",t),i=this._currentObject.data.substr(t,n-t);t=n+1,e.boneName=i.substr(1,i.length-2),e.BoneIndex=this._currentGeo.BoneInfs.length,t=(n=this._currentObject.data.indexOf(";",t))+1,n=this._currentObject.data.indexOf(";",t),i=this._currentObject.data.substr(t,n-t);for(var a=this._readLine(i.trim()).split(","),o=0;o<a.length;o++)e.Indeces.push(parseInt(a[o]));t=n+1,n=this._currentObject.data.indexOf(";",t),i=this._currentObject.data.substr(t,n-t);for(var s=this._readLine(i.trim()).split(","),l=0;l<s.length;l++)e.Weights.push(parseFloat(s[l]));t=n+1,(n=this._currentObject.data.indexOf(";",t))<=0&&(n=this._currentObject.data.length),i=this._currentObject.data.substr(t,n-t);var u=this._readLine(i.trim()).split(",");e.OffsetMatrix=new THREE.Matrix4,this._ParseMatrixData(e.OffsetMatrix,u),this._currentGeo.BoneInfs.push(e)}},{key:"_makePutBoneList",value:function(e,t){var r=!1;for(var n in this.HieStack)if(this.HieStack[n].name===e||r){r=!0;var i=new THREE.Bone;if(i.name=this.HieStack[n].name,i.applyMatrix(this.HieStack[n].FrameTransformMatrix),i.matrixWorld=i.matrix,i.FrameTransformMatrix=this.HieStack[n].FrameTransformMatrix,i.pos=(new THREE.Vector3).setFromMatrixPosition(i.FrameTransformMatrix).toArray(),i.rotq=(new THREE.Quaternion).setFromRotationMatrix(i.FrameTransformMatrix).toArray(),i.scl=(new THREE.Vector3).setFromMatrixScale(i.FrameTransformMatrix).toArray(),this.HieStack[n].parentName&&this.HieStack[n].parentName.length>0)for(var a=0;a<t.length;a++)if(this.HieStack[n].parentName===t[a].name){t[a].add(i),i.parent=a;break}t.push(i)}}},{key:"_makeOutputGeometry",value:function(){this._currentGeo.Geometry.computeBoundingBox(),this._currentGeo.Geometry.computeBoundingSphere(),this._currentGeo.Geometry.verticesNeedUpdate=!0,this._currentGeo.Geometry.normalsNeedUpdate=!0,this._currentGeo.Geometry.colorsNeedUpdate=!0,this._currentGeo.Geometry.uvsNeedUpdate=!0,this._currentGeo.Geometry.groupsNeedUpdate=!0;var e=null;if(this._currentGeo.BoneInfs.length>0){var t=[];this._makePutBoneList(this._currentGeo.baseFrame.parentName,t);for(var r=0;r<this._currentGeo.BoneInfs.length;r++){for(var i=0,a=0;a<t.length;a++)if(t[a].name===this._currentGeo.BoneInfs[r].boneName){i=a,t[a].OffsetMatrix=new THREE.Matrix4,t[a].OffsetMatrix.copy(this._currentGeo.BoneInfs[r].OffsetMatrix);break}for(var o=0;o<this._currentGeo.BoneInfs[r].Indeces.length;o++){var s=this._currentGeo.BoneInfs[r].Indeces[o],l=this._currentGeo.BoneInfs[r].Weights[o];switch(this._currentGeo.VertexSetedBoneCount[s]){case 0:this._currentGeo.Geometry.skinIndices[s].x=i,this._currentGeo.Geometry.skinWeights[s].x=l;break;case 1:this._currentGeo.Geometry.skinIndices[s].y=i,this._currentGeo.Geometry.skinWeights[s].y=l;break;case 2:this._currentGeo.Geometry.skinIndices[s].z=i,this._currentGeo.Geometry.skinWeights[s].z=l;break;case 3:this._currentGeo.Geometry.skinIndices[s].w=i,this._currentGeo.Geometry.skinWeights[s].w=l}this._currentGeo.VertexSetedBoneCount[s]++,this._currentGeo.VertexSetedBoneCount[s]>4&&n.log("warn! over 4 bone weight! :"+s)}}for(var u=0;u<this._currentGeo.Materials.length;u++)this._currentGeo.Materials[u].skinning=!0;for(var c=[],h=0;h<t.length;h++)t[h].OffsetMatrix?c.push(t[h].OffsetMatrix):c.push(new THREE.Matrix4);var d=(new THREE.BufferGeometry).fromGeometry(this._currentGeo.Geometry);d.bones=t,(e=new THREE.SkinnedMesh(d,1===this._currentGeo.Materials.length?this._currentGeo.Materials[0]:this._currentGeo.Materials)).skeleton.boneInverses=c}else{var f=(new THREE.BufferGeometry).fromGeometry(this._currentGeo.Geometry);e=new THREE.Mesh(f,1===this._currentGeo.Materials.length?this._currentGeo.Materials[0]:this._currentGeo.Materials)}e.name=this._currentGeo.name;var p=new THREE.Matrix4,m=this._currentGeo.baseFrame.putBone;if(m&&m.parent){for(;m=m.parent;)p.multiply(m.FrameTransformMatrix);e.applyMatrix(p)}this.Meshes.push(e)}},{key:"_readAnimationKey",value:function(){var e=0,t=this._currentObject.data.indexOf(";",e),r=this._currentObject.data.substr(e,t-e);e=t+1;var n=parseInt(this._readLine(r));e=(t=this._currentObject.data.indexOf(";",e))+1,r=this._currentObject.data.substr(e);for(var i=this._readLine(r.trim()).split(";;,"),a=0;a<i.length;a++){var s=i[a].split(";"),l=new o;if(l.type=n,l.Frame=parseInt(s[0]),l.index=this._currentAnimeFrames.keyFrames.length,l.time=l.Frame,4!=n){for(var u=!1,c=0;c<this._currentAnimeFrames.keyFrames.length;c++)if(this._currentAnimeFrames.keyFrames[c].Frame===l.Frame){l=this._currentAnimeFrames.keyFrames[c],u=!0;break}var h=s[2].split(",");switch(n){case 0:l.rot=new THREE.Quaternion(parseFloat(h[1]),parseFloat(h[2]),parseFloat(h[3]),-1*parseFloat(h[0]));break;case 1:l.scl=new THREE.Vector3(parseFloat(h[0]),parseFloat(h[1]),parseFloat(h[2]));break;case 2:l.pos=new THREE.Vector3(parseFloat(h[0]),parseFloat(h[1]),parseFloat(h[2]))}u||this._currentAnimeFrames.keyFrames.push(l)}else l.matrix=new THREE.Matrix4,this._ParseMatrixData(l.matrix,s[2].split(",")),this._currentAnimeFrames.keyFrames.push(l)}}},{key:"_makeOutputAnimation",value:function(){var e=new a(this.options);e.fps=this.animTicksPerSecond,e.name=this._currentAnime.name,e.make(this._currentAnime.AnimeFrames),this.animations.push(e)}},{key:"assignAnimation",value:function(e,t,r){var n=e,i=t,a=r||!0;if(n||(n=this.Meshes[0]),i||(i=this.animations[0]),!n||!i)return null;var o={};o.fps=i.fps,o.name=i.name,o.length=i.length,o.hierarchy=[];for(var s=0;s<n.skeleton.bones.length;s++){for(var l=!1,u=0;u<i.hierarchy.length;u++)if(n.skeleton.bones[s].name===i.hierarchy[u].name){l=!0;var c=i.hierarchy[u].copy();if(c.parent=-1,n.skeleton.bones[s].parent&&"Bone"===n.skeleton.bones[s].parent.type)for(var h=0;h<o.hierarchy.length;h++)o.hierarchy[h].name===n.skeleton.bones[s].parent.name&&(c.parent=h,c.parentName=n.skeleton.bones[s].parent.name);o.hierarchy.push(c);break}if(!l){var d=i.hierarchy[0].copy();d.name=n.skeleton.bones[s].name,d.parent=-1;for(var f=0;f<d.keys.length;f++)d.keys[f].pos&&d.keys[f].pos.set(0,0,0),d.keys[f].scl&&d.keys[f].scl.set(1,1,1),d.keys[f].rot&&d.keys[f].rot.set(0,0,0,1);o.hierarchy.push(d)}}return n.geometry.animations||(n.geometry.animations=[]),a&&(n.geometry.animations.push(THREE.AnimationClip.parseAnimation(o,n.skeleton.bones)),n.animationMixer||(n.animationMixer=new THREE.AnimationMixer(n))),o}},{key:"_ParseMatrixData",value:function(e,t){e.set(parseFloat(t[0]),parseFloat(t[4]),parseFloat(t[8]),parseFloat(t[12]),parseFloat(t[1]),parseFloat(t[5]),parseFloat(t[9]),parseFloat(t[13]),parseFloat(t[2]),parseFloat(t[6]),parseFloat(t[10]),parseFloat(t[14]),parseFloat(t[3]),parseFloat(t[7]),parseFloat(t[11]),parseFloat(t[15]))}}]),s}();return s}()},3258:(e,t,r)=>{var n=r(5108);THREE.CTMLoader=function(){THREE.Loader.call(this)},THREE.CTMLoader.prototype=Object.create(THREE.Loader.prototype),THREE.CTMLoader.prototype.constructor=THREE.CTMLoader,THREE.CTMLoader.prototype.loadParts=function(e,t,r){r=r||{};var n=this,i=new XMLHttpRequest,a=r.basePath?r.basePath:THREE.LoaderUtils.extractUrlBase(e);i.onreadystatechange=function(){if(4===i.readyState&&(200===i.status||0===i.status)){var e=JSON.parse(i.responseText),o=[],s=[],l=0;for(var u=0;u<e.materials.length;u++)o[u]=n.createMaterial(e.materials[u],a);var c=a+e.data,h={useWorker:r.useWorker,worker:r.worker,offsets:e.offsets};n.load(c,(function(r){l+=1,s.push(r),l===e.offsets.length&&t(s,o)}),h)}},i.open("GET",e,!0),i.setRequestHeader("Content-Type","text/plain"),i.send(null)},THREE.CTMLoader.prototype.load=function(e,t,r){var i=this,a=void 0!==(r=r||{}).offsets?r.offsets:[0],o=new XMLHttpRequest;o.onreadystatechange=function(){if(4===o.readyState)if(200===o.status||0===o.status){var s=new Uint8Array(o.response),l=Date.now();if(r.useWorker){var u=r.worker||new Worker("js/loaders/ctm/CTMWorker.js");u.onmessage=function(e){for(var r=e.data,a=0;a<r.length;a++){var o=r[a],s=Date.now();i.createModel(o,t);var u=Date.now();n.log("model load time [worker]: "+(u-s)+" ms, total: "+(u-l))}},u.postMessage({data:s,offsets:a},[s.buffer])}else for(var c=0;c<a.length;c++){var h=new CTM.Stream(s);h.offset=a[c];var d=new CTM.File(h);i.createModel(d,t)}}else n.error("Couldn't load ["+e+"] ["+o.status+"]");else 3===o.readyState||2===o.readyState&&o.getResponseHeader("Content-Length")},o.open("GET",e,!0),o.responseType="arraybuffer",o.send(null)},THREE.CTMLoader.prototype.createModel=function(e,t){var r=function(){THREE.BufferGeometry.call(this),this.materials=[];var t,r,n=e.body.indices,i=e.body.vertices,a=e.body.normals,o=e.body.uvMaps;void 0!==o&&o.length>0&&(t=o[0].uv);var s=e.body.attrMaps;void 0!==s&&s.length>0&&"Color"===s[0].name&&(r=s[0].attr),this.setIndex(new THREE.BufferAttribute(n,1)),this.addAttribute("position",new THREE.BufferAttribute(i,3)),void 0!==a&&this.addAttribute("normal",new THREE.BufferAttribute(a,3)),void 0!==t&&this.addAttribute("uv",new THREE.BufferAttribute(t,2)),void 0!==r&&this.addAttribute("color",new THREE.BufferAttribute(r,4))};(r.prototype=Object.create(THREE.BufferGeometry.prototype)).constructor=r;var n=new r;void 0===n.attributes.normal&&n.computeVertexNormals(),t(n)}},8538:e=>{var t,r,n,i=i||{};e.exports=i,i.CompressionMethod={RAW:5718354,MG1:3229517,MG2:3295053},i.Flags={NORMALS:1},i.File=function(e){this.load(e)},i.File.prototype.load=function(e){this.header=new i.FileHeader(e),this.body=new i.FileBody(this.header),this.getReader().read(e,this.body)},i.File.prototype.getReader=function(){var e;switch(this.header.compressionMethod){case i.CompressionMethod.RAW:e=new i.ReaderRAW;break;case i.CompressionMethod.MG1:e=new i.ReaderMG1;break;case i.CompressionMethod.MG2:e=new i.ReaderMG2}return e},i.FileHeader=function(e){e.readInt32(),this.fileFormat=e.readInt32(),this.compressionMethod=e.readInt32(),this.vertexCount=e.readInt32(),this.triangleCount=e.readInt32(),this.uvMapCount=e.readInt32(),this.attrMapCount=e.readInt32(),this.flags=e.readInt32(),this.comment=e.readString()},i.FileHeader.prototype.hasNormals=function(){return this.flags&i.Flags.NORMALS},i.FileBody=function(e){var t=3*e.triangleCount,r=3*e.vertexCount,n=e.hasNormals()?3*e.vertexCount:0,i=2*e.vertexCount,a=4*e.vertexCount,o=0,s=new ArrayBuffer(4*(t+r+n+i*e.uvMapCount+a*e.attrMapCount));if(this.indices=new Uint32Array(s,0,t),this.vertices=new Float32Array(s,4*t,r),e.hasNormals()&&(this.normals=new Float32Array(s,4*(t+r),n)),e.uvMapCount)for(this.uvMaps=[],o=0;o<e.uvMapCount;++o)this.uvMaps[o]={uv:new Float32Array(s,4*(t+r+n+o*i),i)};if(e.attrMapCount)for(this.attrMaps=[],o=0;o<e.attrMapCount;++o)this.attrMaps[o]={attr:new Float32Array(s,4*(t+r+n+i*e.uvMapCount+o*a),a)}},i.FileMG2Header=function(e){e.readInt32(),this.vertexPrecision=e.readFloat32(),this.normalPrecision=e.readFloat32(),this.lowerBoundx=e.readFloat32(),this.lowerBoundy=e.readFloat32(),this.lowerBoundz=e.readFloat32(),this.higherBoundx=e.readFloat32(),this.higherBoundy=e.readFloat32(),this.higherBoundz=e.readFloat32(),this.divx=e.readInt32(),this.divy=e.readInt32(),this.divz=e.readInt32(),this.sizex=(this.higherBoundx-this.lowerBoundx)/this.divx,this.sizey=(this.higherBoundy-this.lowerBoundy)/this.divy,this.sizez=(this.higherBoundz-this.lowerBoundz)/this.divz},i.ReaderRAW=function(){},i.ReaderRAW.prototype.read=function(e,t){this.readIndices(e,t.indices),this.readVertices(e,t.vertices),t.normals&&this.readNormals(e,t.normals),t.uvMaps&&this.readUVMaps(e,t.uvMaps),t.attrMaps&&this.readAttrMaps(e,t.attrMaps)},i.ReaderRAW.prototype.readIndices=function(e,t){e.readInt32(),e.readArrayInt32(t)},i.ReaderRAW.prototype.readVertices=function(e,t){e.readInt32(),e.readArrayFloat32(t)},i.ReaderRAW.prototype.readNormals=function(e,t){e.readInt32(),e.readArrayFloat32(t)},i.ReaderRAW.prototype.readUVMaps=function(e,t){for(var r=0;r<t.length;++r)e.readInt32(),t[r].name=e.readString(),t[r].filename=e.readString(),e.readArrayFloat32(t[r].uv)},i.ReaderRAW.prototype.readAttrMaps=function(e,t){for(var r=0;r<t.length;++r)e.readInt32(),t[r].name=e.readString(),e.readArrayFloat32(t[r].attr)},i.ReaderMG1=function(){},i.ReaderMG1.prototype.read=function(e,t){this.readIndices(e,t.indices),this.readVertices(e,t.vertices),t.normals&&this.readNormals(e,t.normals),t.uvMaps&&this.readUVMaps(e,t.uvMaps),t.attrMaps&&this.readAttrMaps(e,t.attrMaps)},i.ReaderMG1.prototype.readIndices=function(e,t){e.readInt32(),e.readInt32();var r=new i.InterleavedStream(t,3);LZMA.decompress(e,e,r,r.data.length),i.restoreIndices(t,t.length)},i.ReaderMG1.prototype.readVertices=function(e,t){e.readInt32(),e.readInt32();var r=new i.InterleavedStream(t,1);LZMA.decompress(e,e,r,r.data.length)},i.ReaderMG1.prototype.readNormals=function(e,t){e.readInt32(),e.readInt32();var r=new i.InterleavedStream(t,3);LZMA.decompress(e,e,r,r.data.length)},i.ReaderMG1.prototype.readUVMaps=function(e,t){for(var r=0;r<t.length;++r){e.readInt32(),t[r].name=e.readString(),t[r].filename=e.readString(),e.readInt32();var n=new i.InterleavedStream(t[r].uv,2);LZMA.decompress(e,e,n,n.data.length)}},i.ReaderMG1.prototype.readAttrMaps=function(e,t){for(var r=0;r<t.length;++r){e.readInt32(),t[r].name=e.readString(),e.readInt32();var n=new i.InterleavedStream(t[r].attr,4);LZMA.decompress(e,e,n,n.data.length)}},i.ReaderMG2=function(){},i.ReaderMG2.prototype.read=function(e,t){this.MG2Header=new i.FileMG2Header(e),this.readVertices(e,t.vertices),this.readIndices(e,t.indices),t.normals&&this.readNormals(e,t),t.uvMaps&&this.readUVMaps(e,t.uvMaps),t.attrMaps&&this.readAttrMaps(e,t.attrMaps)},i.ReaderMG2.prototype.readVertices=function(e,t){e.readInt32(),e.readInt32();var r=new i.InterleavedStream(t,3);LZMA.decompress(e,e,r,r.data.length);var n=this.readGridIndices(e,t);i.restoreVertices(t,this.MG2Header,n,this.MG2Header.vertexPrecision)},i.ReaderMG2.prototype.readGridIndices=function(e,t){e.readInt32(),e.readInt32();var r=new Uint32Array(t.length/3),n=new i.InterleavedStream(r,1);return LZMA.decompress(e,e,n,n.data.length),i.restoreGridIndices(r,r.length),r},i.ReaderMG2.prototype.readIndices=function(e,t){e.readInt32(),e.readInt32();var r=new i.InterleavedStream(t,3);LZMA.decompress(e,e,r,r.data.length),i.restoreIndices(t,t.length)},i.ReaderMG2.prototype.readNormals=function(e,t){e.readInt32(),e.readInt32();var r=new i.InterleavedStream(t.normals,3);LZMA.decompress(e,e,r,r.data.length);var n=i.calcSmoothNormals(t.indices,t.vertices);i.restoreNormals(t.normals,n,this.MG2Header.normalPrecision)},i.ReaderMG2.prototype.readUVMaps=function(e,t){for(var r=0;r<t.length;++r){e.readInt32(),t[r].name=e.readString(),t[r].filename=e.readString();var n=e.readFloat32();e.readInt32();var a=new i.InterleavedStream(t[r].uv,2);LZMA.decompress(e,e,a,a.data.length),i.restoreMap(t[r].uv,2,n)}},i.ReaderMG2.prototype.readAttrMaps=function(e,t){for(var r=0;r<t.length;++r){e.readInt32(),t[r].name=e.readString();var n=e.readFloat32();e.readInt32();var a=new i.InterleavedStream(t[r].attr,4);LZMA.decompress(e,e,a,a.data.length),i.restoreMap(t[r].attr,4,n)}},i.restoreIndices=function(e,t){var r=3;for(t>0&&(e[2]+=e[0],e[1]+=e[0]);r<t;r+=3)e[r]+=e[r-3],e[r]===e[r-3]?e[r+1]+=e[r-2]:e[r+1]+=e[r],e[r+2]+=e[r]},i.restoreGridIndices=function(e,t){for(var r=1;r<t;++r)e[r]+=e[r-1]},i.restoreVertices=function(e,t,r,n){for(var i,a,o,s,l,u=new Uint32Array(e.buffer,e.byteOffset,e.length),c=t.divx,h=c*t.divy,d=2147483647,f=0,p=0,m=0,g=r.length;p<g;m+=3)o=i=r[p++],o-=~~((l=~~(o/h))*h),o-=~~((s=~~(o/c))*c),a=u[m],i===d&&(a+=f),e[m]=t.lowerBoundx+o*t.sizex+n*a,e[m+1]=t.lowerBoundy+s*t.sizey+n*u[m+1],e[m+2]=t.lowerBoundz+l*t.sizez+n*u[m+2],d=i,f=a},i.restoreNormals=function(e,t,r){for(var n,i,a,o,s,l,u,c,h,d,f=new Uint32Array(e.buffer,e.byteOffset,e.length),p=0,m=e.length,g=1.5707963267948966;p<m;p+=3)n=f[p]*r,0===(i=f[p+1])?(e[p]=t[p]*n,e[p+1]=t[p+1]*n,e[p+2]=t[p+2]*n):(a=i<=4?(f[p+2]-2)*g:(4*f[p+2]/i-2)*g,i*=r*g,s=(o=n*Math.sin(i))*Math.cos(a),l=o*Math.sin(a),u=n*Math.cos(i),h=t[p+1],c=t[p]-t[p+2],(d=Math.sqrt(2*h*h+c*c))>1e-20&&(c/=d,h/=d),e[p]=t[p]*u+(t[p+1]*h-t[p+2]*c)*l-h*s,e[p+1]=t[p+1]*u-(t[p+2]+t[p])*h*l+c*s,e[p+2]=t[p+2]*u+(t[p]*c+t[p+1]*h)*l+h*s)},i.restoreMap=function(e,t,r){for(var n,i,a,o=new Uint32Array(e.buffer,e.byteOffset,e.length),s=0,l=e.length;s<t;++s)for(n=0,a=s;a<l;a+=t)n+=1&(i=o[a])?-(i+1>>1):i>>1,e[a]=n*r},i.calcSmoothNormals=function(e,t){var r,n,i,a,o,s,l,u,c,h,d,f,p,m,g,v=new Float32Array(t.length);for(m=0,g=e.length;m<g;)r=3*e[m++],n=3*e[m++],i=3*e[m++],l=t[n]-t[r],h=t[i]-t[r],u=t[n+1]-t[r+1],d=t[i+1]-t[r+1],c=t[n+2]-t[r+2],a=u*(f=t[i+2]-t[r+2])-c*d,o=c*h-l*f,s=l*d-u*h,(p=Math.sqrt(a*a+o*o+s*s))>1e-10&&(a/=p,o/=p,s/=p),v[r]+=a,v[r+1]+=o,v[r+2]+=s,v[n]+=a,v[n+1]+=o,v[n+2]+=s,v[i]+=a,v[i+1]+=o,v[i+2]+=s;for(m=0,g=v.length;m<g;m+=3)(p=Math.sqrt(v[m]*v[m]+v[m+1]*v[m+1]+v[m+2]*v[m+2]))>1e-10&&(v[m]/=p,v[m+1]/=p,v[m+2]/=p);return v},i.isLittleEndian=(t=new ArrayBuffer(2),r=new Uint8Array(t),n=new Uint16Array(t),r[0]=1,1===n[0]),i.InterleavedStream=function(e,t){this.data=new Uint8Array(e.buffer,e.byteOffset,e.byteLength),this.offset=i.isLittleEndian?3:0,this.count=4*t,this.len=this.data.length},i.InterleavedStream.prototype.writeByte=function(e){this.data[this.offset]=e,this.offset+=this.count,this.offset>=this.len&&(this.offset-=this.len-4,this.offset>=this.count&&(this.offset-=this.count+(i.isLittleEndian?1:-1)))},i.Stream=function(e){this.data=e,this.offset=0},i.Stream.prototype.TWO_POW_MINUS23=Math.pow(2,-23),i.Stream.prototype.TWO_POW_MINUS126=Math.pow(2,-126),i.Stream.prototype.readByte=function(){return 255&this.data[this.offset++]},i.Stream.prototype.readInt32=function(){var e=this.readByte();return e|=this.readByte()<<8,(e|=this.readByte()<<16)|this.readByte()<<24},i.Stream.prototype.readFloat32=function(){var e=this.readByte();e+=this.readByte()<<8;var t=this.readByte(),r=this.readByte();e+=(127&t)<<16;var n=(127&r)<<1|(128&t)>>>7,i=128&r?-1:1;return 255===n?0!==e?NaN:i*(1/0):n>0?i*(1+e*this.TWO_POW_MINUS23)*Math.pow(2,n-127):0!==e?i*e*this.TWO_POW_MINUS126:0*i},i.Stream.prototype.readString=function(){var e=this.readInt32();return this.offset+=e,String.fromCharCode.apply(null,this.data.subarray(this.offset-e,this.offset))},i.Stream.prototype.readArrayInt32=function(e){for(var t=0,r=e.length;t<r;)e[t++]=this.readInt32();return e},i.Stream.prototype.readArrayFloat32=function(e){for(var t=0,r=e.length;t<r;)e[t++]=this.readFloat32();return e}},5042:e=>{var t=t||{};e.exports=t,t.OutWindow=function(){this._windowSize=0},t.OutWindow.prototype.create=function(e){this._buffer&&this._windowSize===e||(this._buffer=[]),this._windowSize=e,this._pos=0,this._streamPos=0},t.OutWindow.prototype.flush=function(){var e=this._pos-this._streamPos;if(0!==e){for(;e--;)this._stream.writeByte(this._buffer[this._streamPos++]);this._pos>=this._windowSize&&(this._pos=0),this._streamPos=this._pos}},t.OutWindow.prototype.releaseStream=function(){this.flush(),this._stream=null},t.OutWindow.prototype.setStream=function(e){this.releaseStream(),this._stream=e},t.OutWindow.prototype.init=function(e){e||(this._streamPos=0,this._pos=0)},t.OutWindow.prototype.copyBlock=function(e,t){var r=this._pos-e-1;for(r<0&&(r+=this._windowSize);t--;)r>=this._windowSize&&(r=0),this._buffer[this._pos++]=this._buffer[r++],this._pos>=this._windowSize&&this.flush()},t.OutWindow.prototype.putByte=function(e){this._buffer[this._pos++]=e,this._pos>=this._windowSize&&this.flush()},t.OutWindow.prototype.getByte=function(e){var t=this._pos-e-1;return t<0&&(t+=this._windowSize),this._buffer[t]},t.RangeDecoder=function(){},t.RangeDecoder.prototype.setStream=function(e){this._stream=e},t.RangeDecoder.prototype.releaseStream=function(){this._stream=null},t.RangeDecoder.prototype.init=function(){var e=5;for(this._code=0,this._range=-1;e--;)this._code=this._code<<8|this._stream.readByte()},t.RangeDecoder.prototype.decodeDirectBits=function(e){for(var t,r=0,n=e;n--;)this._range>>>=1,t=this._code-this._range>>>31,this._code-=this._range&t-1,r=r<<1|1-t,0==(4278190080&this._range)&&(this._code=this._code<<8|this._stream.readByte(),this._range<<=8);return r},t.RangeDecoder.prototype.decodeBit=function(e,t){var r=e[t],n=(this._range>>>11)*r;return(2147483648^this._code)<(2147483648^n)?(this._range=n,e[t]+=2048-r>>>5,0==(4278190080&this._range)&&(this._code=this._code<<8|this._stream.readByte(),this._range<<=8),0):(this._range-=n,this._code-=n,e[t]-=r>>>5,0==(4278190080&this._range)&&(this._code=this._code<<8|this._stream.readByte(),this._range<<=8),1)},t.initBitModels=function(e,t){for(;t--;)e[t]=1024},t.BitTreeDecoder=function(e){this._models=[],this._numBitLevels=e},t.BitTreeDecoder.prototype.init=function(){t.initBitModels(this._models,1<<this._numBitLevels)},t.BitTreeDecoder.prototype.decode=function(e){for(var t=1,r=this._numBitLevels;r--;)t=t<<1|e.decodeBit(this._models,t);return t-(1<<this._numBitLevels)},t.BitTreeDecoder.prototype.reverseDecode=function(e){for(var t,r=1,n=0,i=0;i<this._numBitLevels;++i)r=r<<1|(t=e.decodeBit(this._models,r)),n|=t<<i;return n},t.reverseDecode2=function(e,t,r,n){for(var i,a=1,o=0,s=0;s<n;++s)a=a<<1|(i=r.decodeBit(e,t+a)),o|=i<<s;return o},t.LenDecoder=function(){this._choice=[],this._lowCoder=[],this._midCoder=[],this._highCoder=new t.BitTreeDecoder(8),this._numPosStates=0},t.LenDecoder.prototype.create=function(e){for(;this._numPosStates<e;++this._numPosStates)this._lowCoder[this._numPosStates]=new t.BitTreeDecoder(3),this._midCoder[this._numPosStates]=new t.BitTreeDecoder(3)},t.LenDecoder.prototype.init=function(){var e=this._numPosStates;for(t.initBitModels(this._choice,2);e--;)this._lowCoder[e].init(),this._midCoder[e].init();this._highCoder.init()},t.LenDecoder.prototype.decode=function(e,t){return 0===e.decodeBit(this._choice,0)?this._lowCoder[t].decode(e):0===e.decodeBit(this._choice,1)?8+this._midCoder[t].decode(e):16+this._highCoder.decode(e)},t.Decoder2=function(){this._decoders=[]},t.Decoder2.prototype.init=function(){t.initBitModels(this._decoders,768)},t.Decoder2.prototype.decodeNormal=function(e){var t=1;do{t=t<<1|e.decodeBit(this._decoders,t)}while(t<256);return 255&t},t.Decoder2.prototype.decodeWithMatchByte=function(e,t){var r,n,i=1;do{if(r=t>>7&1,t<<=1,i=i<<1|(n=e.decodeBit(this._decoders,(1+r<<8)+i)),r!==n){for(;i<256;)i=i<<1|e.decodeBit(this._decoders,i);break}}while(i<256);return 255&i},t.LiteralDecoder=function(){},t.LiteralDecoder.prototype.create=function(e,r){var n;if(!this._coders||this._numPrevBits!==r||this._numPosBits!==e)for(this._numPosBits=e,this._posMask=(1<<e)-1,this._numPrevBits=r,this._coders=[],n=1<<this._numPrevBits+this._numPosBits;n--;)this._coders[n]=new t.Decoder2},t.LiteralDecoder.prototype.init=function(){for(var e=1<<this._numPrevBits+this._numPosBits;e--;)this._coders[e].init()},t.LiteralDecoder.prototype.getDecoder=function(e,t){return this._coders[((e&this._posMask)<<this._numPrevBits)+((255&t)>>>8-this._numPrevBits)]},t.Decoder=function(){this._outWindow=new t.OutWindow,this._rangeDecoder=new t.RangeDecoder,this._isMatchDecoders=[],this._isRepDecoders=[],this._isRepG0Decoders=[],this._isRepG1Decoders=[],this._isRepG2Decoders=[],this._isRep0LongDecoders=[],this._posSlotDecoder=[],this._posDecoders=[],this._posAlignDecoder=new t.BitTreeDecoder(4),this._lenDecoder=new t.LenDecoder,this._repLenDecoder=new t.LenDecoder,this._literalDecoder=new t.LiteralDecoder,this._dictionarySize=-1,this._dictionarySizeCheck=-1,this._posSlotDecoder[0]=new t.BitTreeDecoder(6),this._posSlotDecoder[1]=new t.BitTreeDecoder(6),this._posSlotDecoder[2]=new t.BitTreeDecoder(6),this._posSlotDecoder[3]=new t.BitTreeDecoder(6)},t.Decoder.prototype.setDictionarySize=function(e){return!(e<0)&&(this._dictionarySize!==e&&(this._dictionarySize=e,this._dictionarySizeCheck=Math.max(this._dictionarySize,1),this._outWindow.create(Math.max(this._dictionarySizeCheck,4096))),!0)},t.Decoder.prototype.setLcLpPb=function(e,t,r){var n=1<<r;return!(e>8||t>4||r>4)&&(this._literalDecoder.create(t,e),this._lenDecoder.create(n),this._repLenDecoder.create(n),this._posStateMask=n-1,!0)},t.Decoder.prototype.init=function(){var e=4;for(this._outWindow.init(!1),t.initBitModels(this._isMatchDecoders,192),t.initBitModels(this._isRep0LongDecoders,192),t.initBitModels(this._isRepDecoders,12),t.initBitModels(this._isRepG0Decoders,12),t.initBitModels(this._isRepG1Decoders,12),t.initBitModels(this._isRepG2Decoders,12),t.initBitModels(this._posDecoders,114),this._literalDecoder.init();e--;)this._posSlotDecoder[e].init();this._lenDecoder.init(),this._repLenDecoder.init(),this._posAlignDecoder.init(),this._rangeDecoder.init()},t.Decoder.prototype.decode=function(e,r,n){var i,a,o,s,l,u,c=0,h=0,d=0,f=0,p=0,m=0,g=0;for(this._rangeDecoder.setStream(e),this._outWindow.setStream(r),this.init();n<0||m<n;)if(i=m&this._posStateMask,0===this._rangeDecoder.decodeBit(this._isMatchDecoders,(c<<4)+i))a=this._literalDecoder.getDecoder(m++,g),g=c>=7?a.decodeWithMatchByte(this._rangeDecoder,this._outWindow.getByte(h)):a.decodeNormal(this._rangeDecoder),this._outWindow.putByte(g),c=c<4?0:c-(c<10?3:6);else{if(1===this._rangeDecoder.decodeBit(this._isRepDecoders,c))o=0,0===this._rangeDecoder.decodeBit(this._isRepG0Decoders,c)?0===this._rangeDecoder.decodeBit(this._isRep0LongDecoders,(c<<4)+i)&&(c=c<7?9:11,o=1):(0===this._rangeDecoder.decodeBit(this._isRepG1Decoders,c)?s=d:(0===this._rangeDecoder.decodeBit(this._isRepG2Decoders,c)?s=f:(s=p,p=f),f=d),d=h,h=s),0===o&&(o=2+this._repLenDecoder.decode(this._rangeDecoder,i),c=c<7?8:11);else if(p=f,f=d,d=h,o=2+this._lenDecoder.decode(this._rangeDecoder,i),c=c<7?7:10,(l=this._posSlotDecoder[o<=5?o-2:3].decode(this._rangeDecoder))>=4){if(h=(2|1&l)<<(u=(l>>1)-1),l<14)h+=t.reverseDecode2(this._posDecoders,h-l-1,this._rangeDecoder,u);else if(h+=this._rangeDecoder.decodeDirectBits(u-4)<<4,(h+=this._posAlignDecoder.reverseDecode(this._rangeDecoder))<0){if(-1===h)break;return!1}}else h=l;if(h>=m||h>=this._dictionarySizeCheck)return!1;this._outWindow.copyBlock(h,o),m+=o,g=this._outWindow.getByte(0)}return this._outWindow.flush(),this._outWindow.releaseStream(),this._rangeDecoder.releaseStream(),!0},t.Decoder.prototype.setDecoderProperties=function(e){var t,r,n,i,a;return!(e.size<5)&&(r=(t=e.readByte())%9,n=(t=~~(t/9))%5,i=~~(t/5),!!this.setLcLpPb(r,n,i)&&(a=e.readByte(),a|=e.readByte()<<8,a|=e.readByte()<<16,a+=16777216*e.readByte(),this.setDictionarySize(a)))},t.decompress=function(e,r,n,i){var a=new t.Decoder;if(!a.setDecoderProperties(e))throw"Incorrect stream properties";if(!a.decode(r,n,i))throw"Error in data stream";return!0}},6727:()=>{THREE.Reflector=function(e,t){THREE.Mesh.call(this,e),this.type="Reflector";var r=this,n=void 0!==(t=t||{}).color?new THREE.Color(t.color):new THREE.Color(8355711),i=t.textureWidth||512,a=t.textureHeight||512,o=t.clipBias||0,s=t.shader||THREE.Reflector.ReflectorShader,l=void 0!==t.recursion?t.recursion:0,u=new THREE.Plane,c=new THREE.Vector3,h=new THREE.Vector3,d=new THREE.Vector3,f=new THREE.Matrix4,p=new THREE.Vector3(0,0,-1),m=new THREE.Vector4,g=new THREE.Vector4,v=new THREE.Vector3,y=new THREE.Vector3,b=new THREE.Vector4,E=new THREE.Matrix4,x=new THREE.PerspectiveCamera,w={minFilter:THREE.LinearFilter,magFilter:THREE.LinearFilter,format:THREE.RGBFormat,stencilBuffer:!1},T=new THREE.WebGLRenderTarget(i,a,w);THREE.Math.isPowerOfTwo(i)&&THREE.Math.isPowerOfTwo(a)||(T.texture.generateMipmaps=!1);var _=new THREE.ShaderMaterial({uniforms:THREE.UniformsUtils.clone(s.uniforms),fragmentShader:s.fragmentShader,vertexShader:s.vertexShader});_.uniforms.tDiffuse.value=T.texture,_.uniforms.color.value=n,_.uniforms.textureMatrix.value=E,this.material=_,this.onBeforeRender=function(e,t,n){if("recursion"in n.userData){if(n.userData.recursion===l)return;n.userData.recursion++}if(h.setFromMatrixPosition(r.matrixWorld),d.setFromMatrixPosition(n.matrixWorld),f.extractRotation(r.matrixWorld),c.set(0,0,1),c.applyMatrix4(f),v.subVectors(h,d),!(v.dot(c)>0)){v.reflect(c).negate(),v.add(h),f.extractRotation(n.matrixWorld),p.set(0,0,-1),p.applyMatrix4(f),p.add(d),y.subVectors(h,p),y.reflect(c).negate(),y.add(h),x.position.copy(v),x.up.set(0,1,0),x.up.applyMatrix4(f),x.up.reflect(c),x.lookAt(y),x.far=n.far,x.updateMatrixWorld(),x.projectionMatrix.copy(n.projectionMatrix),x.userData.recursion=0,E.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),E.multiply(x.projectionMatrix),E.multiply(x.matrixWorldInverse),E.multiply(r.matrixWorld),u.setFromNormalAndCoplanarPoint(c,h),u.applyMatrix4(x.matrixWorldInverse),m.set(u.normal.x,u.normal.y,u.normal.z,u.constant);var i=x.projectionMatrix;b.x=(Math.sign(m.x)+i.elements[8])/i.elements[0],b.y=(Math.sign(m.y)+i.elements[9])/i.elements[5],b.z=-1,b.w=(1+i.elements[10])/i.elements[14],m.multiplyScalar(2/m.dot(b)),i.elements[2]=m.x,i.elements[6]=m.y,i.elements[10]=m.z+1-o,i.elements[14]=m.w,r.visible=!1;var a=e.getRenderTarget(),s=e.vr.enabled,w=e.shadowMap.autoUpdate;e.vr.enabled=!1,e.shadowMap.autoUpdate=!1,e.render(t,x,T,!0),e.vr.enabled=s,e.shadowMap.autoUpdate=w,e.setRenderTarget(a);var _=n.bounds;if(void 0!==_){var S=e.getSize(),M=e.getPixelRatio();g.x=_.x*S.width*M,g.y=_.y*S.height*M,g.z=_.z*S.width*M,g.w=_.w*S.height*M,e.state.viewport(g)}r.visible=!0}},this.getRenderTarget=function(){return T}},THREE.Reflector.prototype=Object.create(THREE.Mesh.prototype),THREE.Reflector.prototype.constructor=THREE.Reflector,THREE.Reflector.ReflectorShader={uniforms:{color:{type:"c",value:null},tDiffuse:{type:"t",value:null},textureMatrix:{type:"m4",value:null}},vertexShader:["uniform mat4 textureMatrix;","varying vec4 vUv;","void main() {","\tvUv = textureMatrix * vec4( position, 1.0 );","\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform vec3 color;","uniform sampler2D tDiffuse;","varying vec4 vUv;","float blendOverlay( float base, float blend ) {","\treturn( base < 0.5 ? ( 2.0 * base * blend ) : ( 1.0 - 2.0 * ( 1.0 - base ) * ( 1.0 - blend ) ) );","}","vec3 blendOverlay( vec3 base, vec3 blend ) {","\treturn vec3( blendOverlay( base.r, blend.r ), blendOverlay( base.g, blend.g ), blendOverlay( base.b, blend.b ) );","}","void main() {","\tvec4 base = texture2DProj( tDiffuse, vUv );","\tgl_FragColor = vec4( blendOverlay( base.rgb, color ), 1.0 );","}"].join("\n")}},5770:()=>{THREE.Refractor=function(e,t){THREE.Mesh.call(this,e),this.type="Refractor";var r=this,n=void 0!==(t=t||{}).color?new THREE.Color(t.color):new THREE.Color(8355711),i=t.textureWidth||512,a=t.textureHeight||512,o=t.clipBias||0,s=t.shader||THREE.Refractor.RefractorShader,l=new THREE.PerspectiveCamera;l.matrixAutoUpdate=!1,l.userData.refractor=!0;var u=new THREE.Plane,c=new THREE.Matrix4,h={minFilter:THREE.LinearFilter,magFilter:THREE.LinearFilter,format:THREE.RGBFormat,stencilBuffer:!1},d=new THREE.WebGLRenderTarget(i,a,h);THREE.Math.isPowerOfTwo(i)&&THREE.Math.isPowerOfTwo(a)||(d.texture.generateMipmaps=!1),this.material=new THREE.ShaderMaterial({uniforms:THREE.UniformsUtils.clone(s.uniforms),vertexShader:s.vertexShader,fragmentShader:s.fragmentShader,transparent:!0}),this.material.uniforms.color.value=n,this.material.uniforms.tDiffuse.value=d.texture,this.material.uniforms.textureMatrix.value=c;var f,p,m,g,v,y,b,E,x=(f=new THREE.Vector3,p=new THREE.Vector3,m=new THREE.Matrix4,g=new THREE.Vector3,v=new THREE.Vector3,function(e){return f.setFromMatrixPosition(r.matrixWorld),p.setFromMatrixPosition(e.matrixWorld),g.subVectors(f,p),m.extractRotation(r.matrixWorld),v.set(0,0,1),v.applyMatrix4(m),g.dot(v)<0}),w=function(){var e=new THREE.Vector3,t=new THREE.Vector3,n=new THREE.Quaternion,i=new THREE.Vector3;return function(){r.matrixWorld.decompose(t,n,i),e.set(0,0,1).applyQuaternion(n).normalize(),e.negate(),u.setFromNormalAndCoplanarPoint(e,t)}}(),T=(y=new THREE.Plane,b=new THREE.Vector4,E=new THREE.Vector4,function(e){l.matrixWorld.copy(e.matrixWorld),l.matrixWorldInverse.getInverse(l.matrixWorld),l.projectionMatrix.copy(e.projectionMatrix),l.far=e.far,y.copy(u),y.applyMatrix4(l.matrixWorldInverse),b.set(y.normal.x,y.normal.y,y.normal.z,y.constant);var t=l.projectionMatrix;E.x=(Math.sign(b.x)+t.elements[8])/t.elements[0],E.y=(Math.sign(b.y)+t.elements[9])/t.elements[5],E.z=-1,E.w=(1+t.elements[10])/t.elements[14],b.multiplyScalar(2/b.dot(E)),t.elements[2]=b.x,t.elements[6]=b.y,t.elements[10]=b.z+1-o,t.elements[14]=b.w});var _,S=(_=new THREE.Vector4,function(e,t,n){r.visible=!1;var i=e.getRenderTarget(),a=e.vr.enabled,o=e.shadowMap.autoUpdate;e.vr.enabled=!1,e.shadowMap.autoUpdate=!1,e.render(t,l,d,!0),e.vr.enabled=a,e.shadowMap.autoUpdate=o,e.setRenderTarget(i);var s=n.bounds;if(void 0!==s){var u=e.getSize(),c=e.getPixelRatio();_.x=s.x*u.width*c,_.y=s.y*u.height*c,_.z=s.z*u.width*c,_.w=s.w*u.height*c,e.state.viewport(_)}r.visible=!0});this.onBeforeRender=function(e,t,n){!0!==n.userData.refractor&&!0!=!x(n)&&(w(),function(e){c.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),c.multiply(e.projectionMatrix),c.multiply(e.matrixWorldInverse),c.multiply(r.matrixWorld)}(n),T(n),S(e,t,n))},this.getRenderTarget=function(){return d}},THREE.Refractor.prototype=Object.create(THREE.Mesh.prototype),THREE.Refractor.prototype.constructor=THREE.Refractor,THREE.Refractor.RefractorShader={uniforms:{color:{type:"c",value:null},tDiffuse:{type:"t",value:null},textureMatrix:{type:"m4",value:null}},vertexShader:["uniform mat4 textureMatrix;","varying vec4 vUv;","void main() {","\tvUv = textureMatrix * vec4( position, 1.0 );","\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform vec3 color;","uniform sampler2D tDiffuse;","varying vec4 vUv;","float blendOverlay( float base, float blend ) {","\treturn( base < 0.5 ? ( 2.0 * base * blend ) : ( 1.0 - 2.0 * ( 1.0 - base ) * ( 1.0 - blend ) ) );","}","vec3 blendOverlay( vec3 base, vec3 blend ) {","\treturn vec3( blendOverlay( base.r, blend.r ), blendOverlay( base.g, blend.g ), blendOverlay( base.b, blend.b ) );","}","void main() {","\tvec4 base = texture2DProj( tDiffuse, vUv );","\tgl_FragColor = vec4( blendOverlay( base.rgb, color ), 1.0 );","}"].join("\n")}},922:(e,t,r)=>{var n=r(5108);THREE.Water=function(e,t){THREE.Mesh.call(this,e),this.type="Water";var r=this,i=void 0!==(t=t||{}).color?new THREE.Color(t.color):new THREE.Color(16777215),a=t.textureWidth||512,o=t.textureHeight||512,s=t.clipBias||0,l=t.flowDirection||new THREE.Vector2(1,0),u=t.flowSpeed||.03,c=t.reflectivity||.02,h=t.scale||1,d=t.shader||THREE.Water.WaterShader,f=new THREE.TextureLoader,p=t.flowMap||void 0,m=t.normalMap0||f.load("textures/water/Water_1_M_Normal.jpg"),g=t.normalMap1||f.load("textures/water/Water_2_M_Normal.jpg"),v=.15,y=.075,b=new THREE.Matrix4,E=new THREE.Clock;if(void 0!==THREE.Reflector)if(void 0!==THREE.Refractor){var x=new THREE.Reflector(e,{textureWidth:a,textureHeight:o,clipBias:s}),w=new THREE.Refractor(e,{textureWidth:a,textureHeight:o,clipBias:s});x.matrixAutoUpdate=!1,w.matrixAutoUpdate=!1,this.material=new THREE.ShaderMaterial({uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib.fog,d.uniforms]),vertexShader:d.vertexShader,fragmentShader:d.fragmentShader,transparent:!0,fog:!0}),void 0!==p?(this.material.defines.USE_FLOWMAP="",this.material.uniforms.tFlowMap={type:"t",value:p}):this.material.uniforms.flowDirection={type:"v2",value:l},m.wrapS=m.wrapT=THREE.RepeatWrapping,g.wrapS=g.wrapT=THREE.RepeatWrapping,this.material.uniforms.tReflectionMap.value=x.getRenderTarget().texture,this.material.uniforms.tRefractionMap.value=w.getRenderTarget().texture,this.material.uniforms.tNormalMap0.value=m,this.material.uniforms.tNormalMap1.value=g,this.material.uniforms.color.value=i,this.material.uniforms.reflectivity.value=c,this.material.uniforms.textureMatrix.value=b,this.material.uniforms.config.value.x=0,this.material.uniforms.config.value.y=y,this.material.uniforms.config.value.z=y,this.material.uniforms.config.value.w=h,this.onBeforeRender=function(e,t,n){var i,a;!function(e){b.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),b.multiply(e.projectionMatrix),b.multiply(e.matrixWorldInverse),b.multiply(r.matrixWorld)}(n),i=E.getDelta(),(a=r.material.uniforms.config).value.x+=u*i,a.value.y=a.value.x+y,a.value.x>=v?(a.value.x=0,a.value.y=y):a.value.y>=v&&(a.value.y=a.value.y-v),r.visible=!1,x.matrixWorld.copy(r.matrixWorld),w.matrixWorld.copy(r.matrixWorld),x.onBeforeRender(e,t,n),w.onBeforeRender(e,t,n),r.visible=!0}}else n.error("THREE.Water: Required component THREE.Refractor not found.");else n.error("THREE.Water: Required component THREE.Reflector not found.")},THREE.Water.prototype=Object.create(THREE.Mesh.prototype),THREE.Water.prototype.constructor=THREE.Water,THREE.Water.WaterShader={uniforms:{color:{type:"c",value:null},reflectivity:{type:"f",value:0},tReflectionMap:{type:"t",value:null},tRefractionMap:{type:"t",value:null},tNormalMap0:{type:"t",value:null},tNormalMap1:{type:"t",value:null},textureMatrix:{type:"m4",value:null},config:{type:"v4",value:new THREE.Vector4}},vertexShader:["#include <fog_pars_vertex>","uniform mat4 textureMatrix;","varying vec4 vCoord;","varying vec2 vUv;","varying vec3 vToEye;","void main() {","\tvUv = uv;","\tvCoord = textureMatrix * vec4( position, 1.0 );","\tvec4 worldPosition = modelMatrix * vec4( position, 1.0 );","\tvToEye = cameraPosition - worldPosition.xyz;","\tvec4 mvPosition =  viewMatrix * worldPosition;","\tgl_Position = projectionMatrix * mvPosition;","\t#include <fog_vertex>","}"].join("\n"),fragmentShader:["#include <fog_pars_fragment>","uniform sampler2D tReflectionMap;","uniform sampler2D tRefractionMap;","uniform sampler2D tNormalMap0;","uniform sampler2D tNormalMap1;","#ifdef USE_FLOWMAP","\tuniform sampler2D tFlowMap;","#else","\tuniform vec2 flowDirection;","#endif","uniform vec3 color;","uniform float reflectivity;","uniform vec4 config;","varying vec4 vCoord;","varying vec2 vUv;","varying vec3 vToEye;","void main() {","\tfloat flowMapOffset0 = config.x;","\tfloat flowMapOffset1 = config.y;","\tfloat halfCycle = config.z;","\tfloat scale = config.w;","\tvec3 toEye = normalize( vToEye );","\tvec2 flow;","\t#ifdef USE_FLOWMAP","\t\tflow = texture2D( tFlowMap, vUv ).rg * 2.0 - 1.0;","\t#else","\t\tflow = flowDirection;","\t#endif","\tflow.x *= - 1.0;","\tvec4 normalColor0 = texture2D( tNormalMap0, ( vUv * scale ) + flow * flowMapOffset0 );","\tvec4 normalColor1 = texture2D( tNormalMap1, ( vUv * scale ) + flow * flowMapOffset1 );","\tfloat flowLerp = abs( halfCycle - flowMapOffset0 ) / halfCycle;","\tvec4 normalColor = mix( normalColor0, normalColor1, flowLerp );","\tvec3 normal = normalize( vec3( normalColor.r * 2.0 - 1.0, normalColor.b,  normalColor.g * 2.0 - 1.0 ) );","\tfloat theta = max( dot( toEye, normal ), 0.0 );","\tfloat reflectance = reflectivity + ( 1.0 - reflectivity ) * pow( ( 1.0 - theta ), 5.0 );","\tvec3 coord = vCoord.xyz / vCoord.w;","\tvec2 uv = coord.xy + coord.z * normal.xz * 0.05;","\tvec4 reflectColor = texture2D( tReflectionMap, uv );","\tvec4 refractColor = texture2D( tRefractionMap, uv );","\tgl_FragColor = vec4( color, 1.0 ) * mix( refractColor, reflectColor, reflectance );","\t#include <tonemapping_fragment>","\t#include <encodings_fragment>","\t#include <fog_fragment>","}"].join("\n")}},522:(e,t,r)=>{var n=r(5108);THREE.EffectComposer=function(e,t){if(this.renderer=e,void 0===t){var r={minFilter:THREE.LinearFilter,magFilter:THREE.LinearFilter,format:THREE.RGBAFormat,stencilBuffer:!1},i=e.getDrawingBufferSize();(t=new THREE.WebGLRenderTarget(i.width,i.height,r)).texture.name="EffectComposer.rt1"}this.renderTarget1=t,this.renderTarget2=t.clone(),this.renderTarget2.texture.name="EffectComposer.rt2",this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2,this.passes=[],void 0===THREE.CopyShader&&n.error("THREE.EffectComposer relies on THREE.CopyShader"),void 0===THREE.ShaderPass&&n.error("THREE.EffectComposer relies on THREE.ShaderPass"),this.copyPass=new THREE.ShaderPass(THREE.CopyShader)},Object.assign(THREE.EffectComposer.prototype,{swapBuffers:function(){var e=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=e},addPass:function(e){this.passes.push(e);var t=this.renderer.getDrawingBufferSize();e.setSize(t.width,t.height)},insertPass:function(e,t){this.passes.splice(t,0,e)},render:function(e){var t,r,n=!1,i=this.passes.length;for(r=0;r<i;r++)if(!1!==(t=this.passes[r]).enabled){if(t.render(this.renderer,this.writeBuffer,this.readBuffer,e,n),t.needsSwap){if(n){var a=this.renderer.context;a.stencilFunc(a.NOTEQUAL,1,4294967295),this.copyPass.render(this.renderer,this.writeBuffer,this.readBuffer,e),a.stencilFunc(a.EQUAL,1,4294967295)}this.swapBuffers()}void 0!==THREE.MaskPass&&(t instanceof THREE.MaskPass?n=!0:t instanceof THREE.ClearMaskPass&&(n=!1))}},reset:function(e){if(void 0===e){var t=this.renderer.getDrawingBufferSize();(e=this.renderTarget1.clone()).setSize(t.width,t.height)}this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.renderTarget1=e,this.renderTarget2=e.clone(),this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2},setSize:function(e,t){this.renderTarget1.setSize(e,t),this.renderTarget2.setSize(e,t);for(var r=0;r<this.passes.length;r++)this.passes[r].setSize(e,t)}}),THREE.Pass=function(){this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1},Object.assign(THREE.Pass.prototype,{setSize:function(e,t){},render:function(e,t,r,i,a){n.error("THREE.Pass: .render() must be implemented in derived pass.")}})},2139:()=>{THREE.MaskPass=function(e,t){THREE.Pass.call(this),this.scene=e,this.camera=t,this.clear=!0,this.needsSwap=!1,this.inverse=!1},THREE.MaskPass.prototype=Object.assign(Object.create(THREE.Pass.prototype),{constructor:THREE.MaskPass,render:function(e,t,r,n,i){var a,o,s=e.context,l=e.state;l.buffers.color.setMask(!1),l.buffers.depth.setMask(!1),l.buffers.color.setLocked(!0),l.buffers.depth.setLocked(!0),this.inverse?(a=0,o=1):(a=1,o=0),l.buffers.stencil.setTest(!0),l.buffers.stencil.setOp(s.REPLACE,s.REPLACE,s.REPLACE),l.buffers.stencil.setFunc(s.ALWAYS,a,4294967295),l.buffers.stencil.setClear(o),e.render(this.scene,this.camera,r,this.clear),e.render(this.scene,this.camera,t,this.clear),l.buffers.color.setLocked(!1),l.buffers.depth.setLocked(!1),l.buffers.stencil.setFunc(s.EQUAL,1,4294967295),l.buffers.stencil.setOp(s.KEEP,s.KEEP,s.KEEP)}}),THREE.ClearMaskPass=function(){THREE.Pass.call(this),this.needsSwap=!1},THREE.ClearMaskPass.prototype=Object.create(THREE.Pass.prototype),Object.assign(THREE.ClearMaskPass.prototype,{render:function(e,t,r,n,i){e.state.buffers.stencil.setTest(!1)}})},7651:()=>{THREE.RenderPass=function(e,t,r,n,i){THREE.Pass.call(this),this.scene=e,this.camera=t,this.overrideMaterial=r,this.clearColor=n,this.clearAlpha=void 0!==i?i:0,this.clear=!0,this.clearDepth=!1,this.needsSwap=!1},THREE.RenderPass.prototype=Object.assign(Object.create(THREE.Pass.prototype),{constructor:THREE.RenderPass,render:function(e,t,r,n,i){var a,o,s=e.autoClear;e.autoClear=!1,this.scene.overrideMaterial=this.overrideMaterial,this.clearColor&&(a=e.getClearColor().getHex(),o=e.getClearAlpha(),e.setClearColor(this.clearColor,this.clearAlpha)),this.clearDepth&&e.clearDepth(),e.render(this.scene,this.camera,this.renderToScreen?null:r,this.clear),this.clearColor&&e.setClearColor(a,o),this.scene.overrideMaterial=null,e.autoClear=s}})},6187:()=>{THREE.ShaderPass=function(e,t){THREE.Pass.call(this),this.textureID=void 0!==t?t:"tDiffuse",e instanceof THREE.ShaderMaterial?(this.uniforms=e.uniforms,this.material=e):e&&(this.uniforms=THREE.UniformsUtils.clone(e.uniforms),this.material=new THREE.ShaderMaterial({defines:e.defines||{},uniforms:this.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader})),this.camera=new THREE.OrthographicCamera(-1,1,1,-1,0,1),this.scene=new THREE.Scene,this.quad=new THREE.Mesh(new THREE.PlaneBufferGeometry(2,2),null),this.quad.frustumCulled=!1,this.scene.add(this.quad)},THREE.ShaderPass.prototype=Object.assign(Object.create(THREE.Pass.prototype),{constructor:THREE.ShaderPass,render:function(e,t,r,n,i){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=r.texture),this.quad.material=this.material,this.renderToScreen?e.render(this.scene,this.camera):e.render(this.scene,this.camera,t,this.clear)}})},3926:(e,t,r)=>{var n=r(5108);THREE.CSS2DObject=function(e){THREE.Object3D.call(this),this.element=e,this.element.style.position="absolute",this.addEventListener("removed",(function(e){null!==this.element.parentNode&&this.element.parentNode.removeChild(this.element)}))},THREE.CSS2DObject.prototype=Object.create(THREE.Object3D.prototype),THREE.CSS2DObject.prototype.constructor=THREE.CSS2DObject,THREE.CSS2DRenderer=function(){var e,t;n.log("THREE.CSS2DRenderer",THREE.REVISION);var r=new THREE.Vector3,i=new THREE.Matrix4,a=new THREE.Matrix4,o=document.createElement("div");o.style.overflow="hidden",this.domElement=o,this.setSize=function(r,n){e=r/2,t=n/2,o.style.width=r+"px",o.style.height=n+"px"};var s=function(n,i){if(n instanceof THREE.CSS2DObject){r.setFromMatrixPosition(n.matrixWorld),r.applyMatrix4(a);var l=n.element,u="translate(-50%,-50%) translate("+(r.x*e+e)+"px,"+(-r.y*t+t)+"px)";l.style.WebkitTransform=u,l.style.MozTransform=u,l.style.oTransform=u,l.style.transform=u,l.parentNode!==o&&o.appendChild(l)}for(var c=0,h=n.children.length;c<h;c++)s(n.children[c],i)};this.render=function(e,t){e.updateMatrixWorld(),null===t.parent&&t.updateMatrixWorld(),i.copy(t.matrixWorldInverse),a.multiplyMatrices(t.projectionMatrix,i),s(e,t)}}},9887:(e,t,r)=>{var n=r(5108);THREE.SpriteCanvasMaterial=function(e){THREE.Material.call(this),this.type="SpriteCanvasMaterial",this.color=new THREE.Color(16777215),this.program=function(){},this.setValues(e)},THREE.SpriteCanvasMaterial.prototype=Object.create(THREE.Material.prototype),THREE.SpriteCanvasMaterial.prototype.constructor=THREE.SpriteCanvasMaterial,THREE.SpriteCanvasMaterial.prototype.isSpriteCanvasMaterial=!0,THREE.SpriteCanvasMaterial.prototype.clone=function(){var e=new THREE.SpriteCanvasMaterial;return e.copy(this),e.color.copy(this.color),e.program=this.program,e},THREE.CanvasRenderer=function(e){n.log("THREE.CanvasRenderer",THREE.REVISION),e=e||{};var t,r,i,a,o,s,l,u,c,h,d,f,p,m,g,v,y,b,E,x=this,w=new THREE.Projector,T=void 0!==e.canvas?e.canvas:document.createElement("canvas"),_=T.width,S=T.height,M=Math.floor(_/2),R=Math.floor(S/2),A=0,C=0,L=_,O=S,I=1,P=T.getContext("2d",{alpha:!0===e.alpha}),H=new THREE.Color(0),k=!0===e.alpha?0:1,N=1,U=0,D=null,F=null,B=null,z=null,j=null,V=[],G=new THREE.Color,W=new THREE.Color,q=new THREE.Color,X=new THREE.Color,Y={},Z=new THREE.Box2,K=new THREE.Box2,Q=new THREE.Box2,J=new THREE.Color,$=new THREE.Color,ee=new THREE.Color,te=new THREE.Vector3,re=new THREE.Vector3,ne=new THREE.Vector3,ie=new THREE.Matrix3;function ae(e,t,r){fe(r.opacity),pe(r.blending);var n=t.scale.x*M,i=t.scale.y*R,a=Math.sqrt(n*n+i*i);if(Q.min.set(e.x-a,e.y-a),Q.max.set(e.x+a,e.y+a),r.isSpriteMaterial){var o=r.map;if(null!==o){var s=Y[o.id];if(void 0!==s&&s.version===o.version||(s=ce(o),Y[o.id]=s),void 0!==s.canvas){be(s.canvas);var l=o.image,u=l.width*o.offset.x,c=l.height*o.offset.y,h=l.width*o.repeat.x,d=l.height*o.repeat.y,f=n/h,p=i/d;P.save(),P.translate(e.x,e.y),0!==r.rotation&&P.rotate(r.rotation),P.translate(-n/2,-i/2),P.scale(f,p),P.translate(-u,-c),P.fillRect(u,c,h,d),P.restore()}}else be(r.color.getStyle()),P.save(),P.translate(e.x,e.y),0!==r.rotation&&P.rotate(r.rotation),P.scale(n,-i),P.fillRect(-.5,-.5,1,1),P.restore()}else r.isSpriteCanvasMaterial?(ye(r.color.getStyle()),be(r.color.getStyle()),P.save(),P.translate(e.x,e.y),0!==r.rotation&&P.rotate(r.rotation),P.scale(n,i),r.program(P),P.restore()):r.isPointsMaterial&&(be(r.color.getStyle()),P.save(),P.translate(e.x,e.y),0!==r.rotation&&P.rotate(r.rotation),P.scale(n*r.size,-i*r.size),P.fillRect(-.5,-.5,1,1),P.restore())}function oe(e,t,r,n){if(fe(n.opacity),pe(n.blending),P.beginPath(),P.moveTo(e.positionScreen.x,e.positionScreen.y),P.lineTo(t.positionScreen.x,t.positionScreen.y),n.isLineBasicMaterial){if(me(n.linewidth),ge(n.linecap),ve(n.linejoin),n.vertexColors!==THREE.VertexColors)ye(n.color.getStyle());else{var i=r.vertexColors[0].getStyle(),a=r.vertexColors[1].getStyle();if(i===a)ye(i);else{try{var o=P.createLinearGradient(e.positionScreen.x,e.positionScreen.y,t.positionScreen.x,t.positionScreen.y);o.addColorStop(0,i),o.addColorStop(1,a)}catch(e){o=i}ye(o)}}n.isLineDashedMaterial&&Ee([n.dashSize,n.gapSize]),P.stroke(),Q.expandByScalar(2*n.linewidth),n.isLineDashedMaterial&&Ee([])}}function se(e,t,r,n,a,o,s,w){var T,_,S,M,R,A;if(x.info.render.vertices+=3,x.info.render.faces++,fe(w.opacity),pe(w.blending),l=e.positionScreen.x,u=e.positionScreen.y,c=t.positionScreen.x,h=t.positionScreen.y,d=r.positionScreen.x,f=r.positionScreen.y,T=l,_=u,S=c,M=h,R=d,A=f,P.beginPath(),P.moveTo(T,_),P.lineTo(S,M),P.lineTo(R,A),P.closePath(),(w.isMeshLambertMaterial||w.isMeshPhongMaterial||w.isMeshStandardMaterial)&&null===w.map)W.copy(w.color),q.copy(w.emissive),w.vertexColors===THREE.FaceColors&&W.multiply(s.color),G.copy(J),re.copy(e.positionWorld).add(t.positionWorld).add(r.positionWorld).divideScalar(3),function(e,t,r){for(var n=0,a=i.length;n<a;n++){var o=i[n];if(X.copy(o.color),o.isDirectionalLight){var s=te.setFromMatrixPosition(o.matrixWorld).normalize();if((l=t.dot(s))<=0)continue;l*=o.intensity,r.add(X.multiplyScalar(l))}else if(o.isPointLight){var l;if(s=te.setFromMatrixPosition(o.matrixWorld),(l=t.dot(te.subVectors(s,e).normalize()))<=0)continue;if(0==(l*=0==o.distance?1:1-Math.min(e.distanceTo(s)/o.distance,1)))continue;l*=o.intensity,r.add(X.multiplyScalar(l))}}}(re,s.normalModel,G),G.multiply(W).add(q),!0===w.wireframe?le(G,w.wireframeLinewidth,w.wireframeLinecap,w.wireframeLinejoin):ue(G);else if(w.isMeshBasicMaterial||w.isMeshLambertMaterial||w.isMeshPhongMaterial||w.isMeshStandardMaterial){if(null!==w.map)w.map.mapping===THREE.UVMapping&&(p=s.uvs,he(l,u,c,h,d,f,p[n].x,p[n].y,p[a].x,p[a].y,p[o].x,p[o].y,w.map));else null!==w.envMap?w.envMap.mapping===THREE.SphericalReflectionMapping&&(ne.copy(s.vertexNormalsModel[n]).applyMatrix3(ie),m=.5*ne.x+.5,g=.5*ne.y+.5,ne.copy(s.vertexNormalsModel[a]).applyMatrix3(ie),v=.5*ne.x+.5,y=.5*ne.y+.5,ne.copy(s.vertexNormalsModel[o]).applyMatrix3(ie),b=.5*ne.x+.5,E=.5*ne.y+.5,he(l,u,c,h,d,f,m,g,v,y,b,E,w.envMap)):(G.copy(w.color),w.vertexColors===THREE.FaceColors&&G.multiply(s.color),!0===w.wireframe?le(G,w.wireframeLinewidth,w.wireframeLinecap,w.wireframeLinejoin):ue(G))}else w.isMeshNormalMaterial?(ne.copy(s.normalModel).applyMatrix3(ie),G.setRGB(ne.x,ne.y,ne.z).multiplyScalar(.5).addScalar(.5),!0===w.wireframe?le(G,w.wireframeLinewidth,w.wireframeLinecap,w.wireframeLinejoin):ue(G)):(G.setRGB(1,1,1),!0===w.wireframe?le(G,w.wireframeLinewidth,w.wireframeLinecap,w.wireframeLinejoin):ue(G))}function le(e,t,r,n){me(t),ge(r),ve(n),ye(e.getStyle()),P.stroke(),Q.expandByScalar(2*t)}function ue(e){be(e.getStyle()),P.fill()}function ce(e){if(0===e.version||e instanceof THREE.CompressedTexture||e instanceof THREE.DataTexture)return{canvas:void 0,version:e.version};var t=e.image;if(!1===t.complete)return{canvas:void 0,version:0};var r=e.wrapS===THREE.RepeatWrapping||e.wrapS===THREE.MirroredRepeatWrapping,n=e.wrapT===THREE.RepeatWrapping||e.wrapT===THREE.MirroredRepeatWrapping,i=e.wrapS===THREE.MirroredRepeatWrapping,a=e.wrapT===THREE.MirroredRepeatWrapping,o=document.createElement("canvas");o.width=t.width*(i?2:1),o.height=t.height*(a?2:1);var s=o.getContext("2d");s.setTransform(1,0,0,-1,0,t.height),s.drawImage(t,0,0),!0===i&&(s.setTransform(-1,0,0,-1,t.width,t.height),s.drawImage(t,-t.width,0)),!0===a&&(s.setTransform(1,0,0,1,0,0),s.drawImage(t,0,t.height)),!0===i&&!0===a&&(s.setTransform(-1,0,0,1,t.width,0),s.drawImage(t,-t.width,t.height));var l="no-repeat";!0===r&&!0===n?l="repeat":!0===r?l="repeat-x":!0===n&&(l="repeat-y");var u=P.createPattern(o,l);return e.onUpdate&&e.onUpdate(e),{canvas:u,version:e.version}}function he(e,t,r,n,i,a,o,s,l,u,c,h,d){var f=Y[d.id];if(void 0!==f&&f.version===d.version||(f=ce(d),Y[d.id]=f),void 0===f.canvas)return be("rgba( 0, 0, 0, 1)"),void P.fill();be(f.canvas);var p,m,g,v,y,b,E,x,w=d.offset.x/d.repeat.x,T=d.offset.y/d.repeat.y,_=d.image.width*d.repeat.x,S=d.image.height*d.repeat.y;l=(l+w)*_,u=(u+T)*S,c=(c+w)*_,h=(h+T)*S,r-=e,n-=t,i-=e,a-=t,0!==(E=(l-=o=(o+w)*_)*(h-=s=(s+T)*S)-(c-=o)*(u-=s))&&(y=e-(p=(h*r-u*i)*(x=1/E))*o-(g=(l*i-c*r)*x)*s,b=t-(m=(h*n-u*a)*x)*o-(v=(l*a-c*n)*x)*s,P.save(),P.transform(p,m,g,v,y,b),P.fill(),P.restore())}function de(e,t,r){var n,i=t.x-e.x,a=t.y-e.y,o=i*i+a*a;0!==o&&(i*=n=r/Math.sqrt(o),a*=n,t.x+=i,t.y+=a,e.x-=i,e.y-=a)}function fe(e){N!==e&&(P.globalAlpha=e,N=e)}function pe(e){U!==e&&(e===THREE.NormalBlending?P.globalCompositeOperation="source-over":e===THREE.AdditiveBlending?P.globalCompositeOperation="lighter":e===THREE.SubtractiveBlending?P.globalCompositeOperation="darker":e===THREE.MultiplyBlending&&(P.globalCompositeOperation="multiply"),U=e)}function me(e){B!==e&&(P.lineWidth=e,B=e)}function ge(e){z!==e&&(P.lineCap=e,z=e)}function ve(e){j!==e&&(P.lineJoin=e,j=e)}function ye(e){D!==e&&(P.strokeStyle=e,D=e)}function be(e){F!==e&&(P.fillStyle=e,F=e)}function Ee(e){V.length!==e.length&&(P.setLineDash(e),V=e)}void 0===P.setLineDash&&(P.setLineDash=function(){}),this.domElement=T,this.autoClear=!0,this.sortObjects=!0,this.sortElements=!0,this.info={render:{vertices:0,faces:0}},this.supportsVertexTextures=function(){},this.setFaceCulling=function(){},this.getContext=function(){return P},this.getContextAttributes=function(){return P.getContextAttributes()},this.getPixelRatio=function(){return I},this.setPixelRatio=function(e){void 0!==e&&(I=e)},this.setSize=function(e,t,r){_=e*I,S=t*I,T.width=_,T.height=S,M=Math.floor(_/2),R=Math.floor(S/2),!1!==r&&(T.style.width=e+"px",T.style.height=t+"px"),Z.min.set(-M,-R),Z.max.set(M,R),K.min.set(-M,-R),K.max.set(M,R),N=1,U=0,D=null,F=null,B=null,z=null,j=null,this.setViewport(0,0,e,t)},this.setViewport=function(e,t,r,n){A=e*I,C=t*I,L=r*I,O=n*I},this.setScissor=function(){},this.setScissorTest=function(){},this.setClearColor=function(e,t){H.set(e),k=void 0!==t?t:1,K.min.set(-M,-R),K.max.set(M,R)},this.setClearColorHex=function(e,t){n.warn("THREE.CanvasRenderer: .setClearColorHex() is being removed. Use .setClearColor() instead."),this.setClearColor(e,t)},this.getClearColor=function(){return H},this.getClearAlpha=function(){return k},this.getMaxAnisotropy=function(){return 0},this.clear=function(){!1===K.isEmpty()&&(K.intersect(Z),K.expandByScalar(2),K.min.x=K.min.x+M,K.min.y=-K.min.y+R,K.max.x=K.max.x+M,K.max.y=-K.max.y+R,k<1&&P.clearRect(0|K.min.x,0|K.max.y,K.max.x-K.min.x|0,K.min.y-K.max.y|0),k>0&&(fe(1),pe(THREE.NormalBlending),be("rgba("+Math.floor(255*H.r)+","+Math.floor(255*H.g)+","+Math.floor(255*H.b)+","+k+")"),P.fillRect(0|K.min.x,0|K.max.y,K.max.x-K.min.x|0,K.min.y-K.max.y|0)),K.makeEmpty())},this.clearColor=function(){},this.clearDepth=function(){},this.clearStencil=function(){},this.render=function(e,l){if(void 0!==l.isCamera){var u=e.background;u&&u.isColor?(fe(1),pe(THREE.NormalBlending),be(u.getStyle()),P.fillRect(0,0,_,S)):!0===this.autoClear&&this.clear(),x.info.render.vertices=0,x.info.render.faces=0,P.setTransform(L/_,0,0,-O/S,A,S-C),P.translate(M,R),t=w.projectScene(e,l,this.sortObjects,this.sortElements),r=t.elements,i=t.lights,ie.getNormalMatrix(l.matrixWorldInverse),function(){J.setRGB(0,0,0),$.setRGB(0,0,0),ee.setRGB(0,0,0);for(var e=0,t=i.length;e<t;e++){var r=i[e],n=r.color;r.isAmbientLight?J.add(n):r.isDirectionalLight?$.add(n):r.isPointLight&&ee.add(n)}}();for(var c=0,h=r.length;c<h;c++){var d=r[c],f=d.material;if(void 0!==f&&0!==f.opacity){if(Q.makeEmpty(),d instanceof THREE.RenderableSprite)(a=d).x*=M,a.y*=R,ae(a,d,f);else if(d instanceof THREE.RenderableLine)a=d.v1,o=d.v2,a.positionScreen.x*=M,a.positionScreen.y*=R,o.positionScreen.x*=M,o.positionScreen.y*=R,Q.setFromPoints([a.positionScreen,o.positionScreen]),!0===Z.intersectsBox(Q)&&oe(a,o,d,f);else if(d instanceof THREE.RenderableFace){if(a=d.v1,o=d.v2,s=d.v3,a.positionScreen.z<-1||a.positionScreen.z>1)continue;if(o.positionScreen.z<-1||o.positionScreen.z>1)continue;if(s.positionScreen.z<-1||s.positionScreen.z>1)continue;a.positionScreen.x*=M,a.positionScreen.y*=R,o.positionScreen.x*=M,o.positionScreen.y*=R,s.positionScreen.x*=M,s.positionScreen.y*=R,f.overdraw>0&&(de(a.positionScreen,o.positionScreen,f.overdraw),de(o.positionScreen,s.positionScreen,f.overdraw),de(s.positionScreen,a.positionScreen,f.overdraw)),Q.setFromPoints([a.positionScreen,o.positionScreen,s.positionScreen]),!0===Z.intersectsBox(Q)&&se(a,o,s,0,1,2,d,f)}K.union(Q)}}P.setTransform(1,0,0,1,0,0)}else n.error("THREE.CanvasRenderer.render: camera is not an instance of THREE.Camera.")}}},1319:(e,t,r)=>{var n=r(5108);THREE.RenderableObject=function(){this.id=0,this.object=null,this.z=0,this.renderOrder=0},THREE.RenderableFace=function(){this.id=0,this.v1=new THREE.RenderableVertex,this.v2=new THREE.RenderableVertex,this.v3=new THREE.RenderableVertex,this.normalModel=new THREE.Vector3,this.vertexNormalsModel=[new THREE.Vector3,new THREE.Vector3,new THREE.Vector3],this.vertexNormalsLength=0,this.color=new THREE.Color,this.material=null,this.uvs=[new THREE.Vector2,new THREE.Vector2,new THREE.Vector2],this.z=0,this.renderOrder=0},THREE.RenderableVertex=function(){this.position=new THREE.Vector3,this.positionWorld=new THREE.Vector3,this.positionScreen=new THREE.Vector4,this.visible=!0},THREE.RenderableVertex.prototype.copy=function(e){this.positionWorld.copy(e.positionWorld),this.positionScreen.copy(e.positionScreen)},THREE.RenderableLine=function(){this.id=0,this.v1=new THREE.RenderableVertex,this.v2=new THREE.RenderableVertex,this.vertexColors=[new THREE.Color,new THREE.Color],this.material=null,this.z=0,this.renderOrder=0},THREE.RenderableSprite=function(){this.id=0,this.object=null,this.x=0,this.y=0,this.z=0,this.rotation=0,this.scale=new THREE.Vector2,this.material=null,this.renderOrder=0},THREE.Projector=function(){var e,t,r,i,a,o,s,l,u,c,h,d=[],f=0,p=[],m=0,g=[],v=0,y=[],b=0,E=[],x=0,w={objects:[],lights:[],elements:[]},T=new THREE.Vector3,_=new THREE.Vector4,S=new THREE.Box3(new THREE.Vector3(-1,-1,-1),new THREE.Vector3(1,1,1)),M=new THREE.Box3,R=new Array(3),A=new THREE.Matrix4,C=new THREE.Matrix4,L=new THREE.Matrix4,O=new THREE.Matrix3,I=new THREE.Frustum,P=new THREE.Vector4,H=new THREE.Vector4;this.projectVector=function(e,t){n.warn("THREE.Projector: .projectVector() is now vector.project()."),e.project(t)},this.unprojectVector=function(e,t){n.warn("THREE.Projector: .unprojectVector() is now vector.unproject()."),e.unproject(t)},this.pickingRay=function(){n.error("THREE.Projector: .pickingRay() is now raycaster.setFromCamera().")};var k=new function(){var e=[],t=[],n=[],i=null,o=null,l=new THREE.Matrix3;function u(e){var t=e.position,r=e.positionWorld,n=e.positionScreen;r.copy(t).applyMatrix4(h),n.copy(r).applyMatrix4(C);var i=1/n.w;n.x*=i,n.y*=i,n.z*=i,e.visible=n.x>=-1&&n.x<=1&&n.y>=-1&&n.y<=1&&n.z>=-1&&n.z<=1}function c(e,t,r){return!0===e.visible||!0===t.visible||!0===r.visible||(R[0]=e.positionScreen,R[1]=t.positionScreen,R[2]=r.positionScreen,S.intersectsBox(M.setFromPoints(R)))}function d(e,t,r){return(r.positionScreen.x-e.positionScreen.x)*(t.positionScreen.y-e.positionScreen.y)-(r.positionScreen.y-e.positionScreen.y)*(t.positionScreen.x-e.positionScreen.x)<0}return{setObject:function(r){o=(i=r).material,l.getNormalMatrix(i.matrixWorld),e.length=0,t.length=0,n.length=0},projectVertex:u,checkTriangleVisibility:c,checkBackfaceCulling:d,pushVertex:function(e,t,n){(r=F()).position.set(e,t,n),u(r)},pushNormal:function(t,r,n){e.push(t,r,n)},pushColor:function(e,r,n){t.push(e,r,n)},pushUv:function(e,t){n.push(e,t)},pushLine:function(e,r){var n=p[e],a=p[r];n.positionScreen.copy(n.position).applyMatrix4(L),a.positionScreen.copy(a.position).applyMatrix4(L),!0===V(n.positionScreen,a.positionScreen)&&(n.positionScreen.multiplyScalar(1/n.positionScreen.w),a.positionScreen.multiplyScalar(1/a.positionScreen.w),(s=z()).id=i.id,s.v1.copy(n),s.v2.copy(a),s.z=Math.max(n.positionScreen.z,a.positionScreen.z),s.renderOrder=i.renderOrder,s.material=i.material,i.material.vertexColors===THREE.VertexColors&&(s.vertexColors[0].fromArray(t,3*e),s.vertexColors[1].fromArray(t,3*r)),w.elements.push(s))},pushTriangle:function(t,r,s){var u=p[t],h=p[r],f=p[s];if(!1!==c(u,h,f)&&(o.side===THREE.DoubleSide||!0===d(u,h,f))){(a=B()).id=i.id,a.v1.copy(u),a.v2.copy(h),a.v3.copy(f),a.z=(u.positionScreen.z+h.positionScreen.z+f.positionScreen.z)/3,a.renderOrder=i.renderOrder,a.normalModel.fromArray(e,3*t),a.normalModel.applyMatrix3(l).normalize();for(var m=0;m<3;m++){var g=a.vertexNormalsModel[m];g.fromArray(e,3*arguments[m]),g.applyMatrix3(l).normalize(),a.uvs[m].fromArray(n,2*arguments[m])}a.vertexNormalsLength=3,a.material=i.material,w.elements.push(a)}}}};function N(e){if(!1!==e.visible){if(e instanceof THREE.Light)w.lights.push(e);else if(e instanceof THREE.Mesh||e instanceof THREE.Line||e instanceof THREE.Points){if(!1===e.material.visible)return;if(!0===e.frustumCulled&&!1===I.intersectsObject(e))return;U(e)}else if(e instanceof THREE.Sprite){if(!1===e.material.visible)return;if(!0===e.frustumCulled&&!1===I.intersectsSprite(e))return;U(e)}for(var t=e.children,r=0,n=t.length;r<n;r++)N(t[r])}}function U(r){e=function(){if(t===f){var e=new THREE.RenderableObject;return d.push(e),f++,t++,e}return d[t++]}(),e.id=r.id,e.object=r,T.setFromMatrixPosition(r.matrixWorld),T.applyMatrix4(C),e.z=T.z,e.renderOrder=r.renderOrder,w.objects.push(e)}function D(e,t,r){var n=1/e.w;e.z*=n,e.z>=-1&&e.z<=1&&((u=function(){if(c===x){var e=new THREE.RenderableSprite;return E.push(e),x++,c++,e}return E[c++]}()).id=t.id,u.x=e.x*n,u.y=e.y*n,u.z=e.z,u.renderOrder=t.renderOrder,u.object=t,u.rotation=t.rotation,u.scale.x=t.scale.x*Math.abs(u.x-(e.x+r.projectionMatrix.elements[0])/(e.w+r.projectionMatrix.elements[12])),u.scale.y=t.scale.y*Math.abs(u.y-(e.y+r.projectionMatrix.elements[5])/(e.w+r.projectionMatrix.elements[13])),u.material=t.material,w.elements.push(u))}function F(){if(i===m){var e=new THREE.RenderableVertex;return p.push(e),m++,i++,e}return p[i++]}function B(){if(o===v){var e=new THREE.RenderableFace;return g.push(e),v++,o++,e}return g[o++]}function z(){if(l===b){var e=new THREE.RenderableLine;return y.push(e),b++,l++,e}return y[l++]}function j(e,t){return e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:e.id!==t.id?e.id-t.id:0}function V(e,t){var r=0,n=1,i=e.z+e.w,a=t.z+t.w,o=-e.z+e.w,s=-t.z+t.w;return i>=0&&a>=0&&o>=0&&s>=0||!(i<0&&a<0||o<0&&s<0)&&(i<0?r=Math.max(r,i/(i-a)):a<0&&(n=Math.min(n,i/(i-a))),o<0?r=Math.max(r,o/(o-s)):s<0&&(n=Math.min(n,o/(o-s))),!(n<r)&&(e.lerp(t,r),t.lerp(e,1-n),!0))}this.projectScene=function(e,r,n,u){o=0,l=0,c=0,w.elements.length=0,!0===e.autoUpdate&&e.updateMatrixWorld(),null===r.parent&&r.updateMatrixWorld(),A.copy(r.matrixWorldInverse),C.multiplyMatrices(r.projectionMatrix,A),I.setFromMatrix(C),t=0,w.objects.length=0,w.lights.length=0,N(e),!0===n&&w.objects.sort(j);for(var d=w.objects,f=0,m=d.length;f<m;f++){var g=d[f].object,v=g.geometry;if(k.setObject(g),h=g.matrixWorld,i=0,g instanceof THREE.Mesh){if(v instanceof THREE.BufferGeometry){var y=v.attributes,b=v.groups;if(void 0===y.position)continue;for(var E=0,x=(xe=y.position.array).length;E<x;E+=3)k.pushVertex(xe[E],xe[E+1],xe[E+2]);if(void 0!==y.normal){var S=y.normal.array;for(E=0,x=S.length;E<x;E+=3)k.pushNormal(S[E],S[E+1],S[E+2])}if(void 0!==y.uv){var M=y.uv.array;for(E=0,x=M.length;E<x;E+=2)k.pushUv(M[E],M[E+1])}if(null!==v.index){var R=v.index.array;if(b.length>0)for(var U=0;U<b.length;U++){var G=b[U];for(E=G.start,x=G.start+G.count;E<x;E+=3)k.pushTriangle(R[E],R[E+1],R[E+2])}else for(E=0,x=R.length;E<x;E+=3)k.pushTriangle(R[E],R[E+1],R[E+2])}else for(E=0,x=xe.length/3;E<x;E+=3)k.pushTriangle(E,E+1,E+2)}else if(v instanceof THREE.Geometry){var W=v.vertices,q=v.faces,X=v.faceVertexUvs[0];O.getNormalMatrix(h);for(var Y=g.material,Z=Array.isArray(Y),K=0,Q=W.length;K<Q;K++){var J=W[K];if(T.copy(J),!0===Y.morphTargets)for(var $=v.morphTargets,ee=g.morphTargetInfluences,te=0,re=$.length;te<re;te++){var ne=ee[te];if(0!==ne){var ie=$[te].vertices[K];T.x+=(ie.x-J.x)*ne,T.y+=(ie.y-J.y)*ne,T.z+=(ie.z-J.z)*ne}}k.pushVertex(T.x,T.y,T.z)}for(var ae=0,oe=q.length;ae<oe;ae++){var se=q[ae];if(void 0!==(Y=!0===Z?g.material[se.materialIndex]:g.material)){var le=Y.side,ue=p[se.a],ce=p[se.b],he=p[se.c];if(!1!==k.checkTriangleVisibility(ue,ce,he)){var de=k.checkBackfaceCulling(ue,ce,he);if(le!==THREE.DoubleSide){if(le===THREE.FrontSide&&!1===de)continue;if(le===THREE.BackSide&&!0===de)continue}(a=B()).id=g.id,a.v1.copy(ue),a.v2.copy(ce),a.v3.copy(he),a.normalModel.copy(se.normal),!1!==de||le!==THREE.BackSide&&le!==THREE.DoubleSide||a.normalModel.negate(),a.normalModel.applyMatrix3(O).normalize();for(var fe=se.vertexNormals,pe=0,me=Math.min(fe.length,3);pe<me;pe++){var ge=a.vertexNormalsModel[pe];ge.copy(fe[pe]),!1!==de||le!==THREE.BackSide&&le!==THREE.DoubleSide||ge.negate(),ge.applyMatrix3(O).normalize()}a.vertexNormalsLength=fe.length;var ve=X[ae];if(void 0!==ve)for(var ye=0;ye<3;ye++)a.uvs[ye].copy(ve[ye]);a.color=se.color,a.material=Y,a.z=(ue.positionScreen.z+ce.positionScreen.z+he.positionScreen.z)/3,a.renderOrder=g.renderOrder,w.elements.push(a)}}}}}else if(g instanceof THREE.Line){if(L.multiplyMatrices(C,h),v instanceof THREE.BufferGeometry){if(void 0!==(y=v.attributes).position){for(E=0,x=(xe=y.position.array).length;E<x;E+=3)k.pushVertex(xe[E],xe[E+1],xe[E+2]);if(void 0!==y.color){var be=y.color.array;for(E=0,x=be.length;E<x;E+=3)k.pushColor(be[E],be[E+1],be[E+2])}if(null!==v.index)for(E=0,x=(R=v.index.array).length;E<x;E+=2)k.pushLine(R[E],R[E+1]);else{var Ee=g instanceof THREE.LineSegments?2:1;for(E=0,x=xe.length/3-1;E<x;E+=Ee)k.pushLine(E,E+1)}}}else if(v instanceof THREE.Geometry){if(0===(W=g.geometry.vertices).length)continue;(ue=F()).positionScreen.copy(W[0]).applyMatrix4(L);for(Ee=g instanceof THREE.LineSegments?2:1,K=1,Q=W.length;K<Q;K++)(ue=F()).positionScreen.copy(W[K]).applyMatrix4(L),(K+1)%Ee>0||(ce=p[i-2],P.copy(ue.positionScreen),H.copy(ce.positionScreen),!0===V(P,H)&&(P.multiplyScalar(1/P.w),H.multiplyScalar(1/H.w),(s=z()).id=g.id,s.v1.positionScreen.copy(P),s.v2.positionScreen.copy(H),s.z=Math.max(P.z,H.z),s.renderOrder=g.renderOrder,s.material=g.material,g.material.vertexColors===THREE.VertexColors&&(s.vertexColors[0].copy(g.geometry.colors[K]),s.vertexColors[1].copy(g.geometry.colors[K-1])),w.elements.push(s)))}}else if(g instanceof THREE.Points){if(L.multiplyMatrices(C,h),v instanceof THREE.Geometry)for(K=0,Q=(W=g.geometry.vertices).length;K<Q;K++){J=W[K];_.set(J.x,J.y,J.z,1),_.applyMatrix4(L),D(_,g,r)}else if(v instanceof THREE.BufferGeometry){if(void 0!==(y=v.attributes).position){var xe;for(E=0,x=(xe=y.position.array).length;E<x;E+=3)_.set(xe[E],xe[E+1],xe[E+2],1),_.applyMatrix4(L),D(_,g,r)}}}else g instanceof THREE.Sprite&&(_.set(h.elements[12],h.elements[13],h.elements[14],1),_.applyMatrix4(C),D(_,g,r))}return!0===u&&w.elements.sort(j),w}}},3172:()=>{THREE.ColorCorrectionShader={uniforms:{tDiffuse:{value:null},powRGB:{value:new THREE.Vector3(2,2,2)},mulRGB:{value:new THREE.Vector3(1,1,1)},addRGB:{value:new THREE.Vector3(0,0,0)}},vertexShader:["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform sampler2D tDiffuse;","uniform vec3 powRGB;","uniform vec3 mulRGB;","uniform vec3 addRGB;","varying vec2 vUv;","void main() {","gl_FragColor = texture2D( tDiffuse, vUv );","gl_FragColor.rgb = mulRGB * pow( ( gl_FragColor.rgb + addRGB ), powRGB );","}"].join("\n")}},9092:()=>{THREE.CopyShader={uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform float opacity;","uniform sampler2D tDiffuse;","varying vec2 vUv;","void main() {","vec4 texel = texture2D( tDiffuse, vUv );","gl_FragColor = opacity * texel;","}"].join("\n")}},6289:()=>{THREE.ShaderLib.ocean_sim_vertex={vertexShader:["varying vec2 vUV;","void main (void) {","vUV = position.xy * 0.5 + 0.5;","gl_Position = vec4(position, 1.0 );","}"].join("\n")},THREE.ShaderLib.ocean_subtransform={uniforms:{u_input:{value:null},u_transformSize:{value:512},u_subtransformSize:{value:250}},fragmentShader:["precision highp float;","#include <common>","uniform sampler2D u_input;","uniform float u_transformSize;","uniform float u_subtransformSize;","varying vec2 vUV;","vec2 multiplyComplex (vec2 a, vec2 b) {","return vec2(a[0] * b[0] - a[1] * b[1], a[1] * b[0] + a[0] * b[1]);","}","void main (void) {","#ifdef HORIZONTAL","float index = vUV.x * u_transformSize - 0.5;","#else","float index = vUV.y * u_transformSize - 0.5;","#endif","float evenIndex = floor(index / u_subtransformSize) * (u_subtransformSize * 0.5) + mod(index, u_subtransformSize * 0.5);","#ifdef HORIZONTAL","vec4 even = texture2D(u_input, vec2(evenIndex + 0.5, gl_FragCoord.y) / u_transformSize).rgba;","vec4 odd = texture2D(u_input, vec2(evenIndex + u_transformSize * 0.5 + 0.5, gl_FragCoord.y) / u_transformSize).rgba;","#else","vec4 even = texture2D(u_input, vec2(gl_FragCoord.x, evenIndex + 0.5) / u_transformSize).rgba;","vec4 odd = texture2D(u_input, vec2(gl_FragCoord.x, evenIndex + u_transformSize * 0.5 + 0.5) / u_transformSize).rgba;","#endif","float twiddleArgument = -2.0 * PI * (index / u_subtransformSize);","vec2 twiddle = vec2(cos(twiddleArgument), sin(twiddleArgument));","vec2 outputA = even.xy + multiplyComplex(twiddle, odd.xy);","vec2 outputB = even.zw + multiplyComplex(twiddle, odd.zw);","gl_FragColor = vec4(outputA, outputB);","}"].join("\n")},THREE.ShaderLib.ocean_initial_spectrum={uniforms:{u_wind:{value:new THREE.Vector2(10,10)},u_resolution:{value:512},u_size:{value:250}},fragmentShader:["precision highp float;","#include <common>","const float G = 9.81;","const float KM = 370.0;","const float CM = 0.23;","uniform vec2 u_wind;","uniform float u_resolution;","uniform float u_size;","float omega (float k) {","return sqrt(G * k * (1.0 + pow2(k / KM)));","}","float tanh (float x) {","return (1.0 - exp(-2.0 * x)) / (1.0 + exp(-2.0 * x));","}","void main (void) {","vec2 coordinates = gl_FragCoord.xy - 0.5;","float n = (coordinates.x < u_resolution * 0.5) ? coordinates.x : coordinates.x - u_resolution;","float m = (coordinates.y < u_resolution * 0.5) ? coordinates.y : coordinates.y - u_resolution;","vec2 K = (2.0 * PI * vec2(n, m)) / u_size;","float k = length(K);","float l_wind = length(u_wind);","float Omega = 0.84;","float kp = G * pow2(Omega / l_wind);","float c = omega(k) / k;","float cp = omega(kp) / kp;","float Lpm = exp(-1.25 * pow2(kp / k));","float gamma = 1.7;","float sigma = 0.08 * (1.0 + 4.0 * pow(Omega, -3.0));","float Gamma = exp(-pow2(sqrt(k / kp) - 1.0) / 2.0 * pow2(sigma));","float Jp = pow(gamma, Gamma);","float Fp = Lpm * Jp * exp(-Omega / sqrt(10.0) * (sqrt(k / kp) - 1.0));","float alphap = 0.006 * sqrt(Omega);","float Bl = 0.5 * alphap * cp / c * Fp;","float z0 = 0.000037 * pow2(l_wind) / G * pow(l_wind / cp, 0.9);","float uStar = 0.41 * l_wind / log(10.0 / z0);","float alpham = 0.01 * ((uStar < CM) ? (1.0 + log(uStar / CM)) : (1.0 + 3.0 * log(uStar / CM)));","float Fm = exp(-0.25 * pow2(k / KM - 1.0));","float Bh = 0.5 * alpham * CM / c * Fm * Lpm;","float a0 = log(2.0) / 4.0;","float am = 0.13 * uStar / CM;","float Delta = tanh(a0 + 4.0 * pow(c / cp, 2.5) + am * pow(CM / c, 2.5));","float cosPhi = dot(normalize(u_wind), normalize(K));","float S = (1.0 / (2.0 * PI)) * pow(k, -4.0) * (Bl + Bh) * (1.0 + Delta * (2.0 * cosPhi * cosPhi - 1.0));","float dk = 2.0 * PI / u_size;","float h = sqrt(S / 2.0) * dk;","if (K.x == 0.0 && K.y == 0.0) {","h = 0.0;","}","gl_FragColor = vec4(h, 0.0, 0.0, 0.0);","}"].join("\n")},THREE.ShaderLib.ocean_phase={uniforms:{u_phases:{value:null},u_deltaTime:{value:null},u_resolution:{value:null},u_size:{value:null}},fragmentShader:["precision highp float;","#include <common>","const float G = 9.81;","const float KM = 370.0;","varying vec2 vUV;","uniform sampler2D u_phases;","uniform float u_deltaTime;","uniform float u_resolution;","uniform float u_size;","float omega (float k) {","return sqrt(G * k * (1.0 + k * k / KM * KM));","}","void main (void) {","float deltaTime = 1.0 / 60.0;","vec2 coordinates = gl_FragCoord.xy - 0.5;","float n = (coordinates.x < u_resolution * 0.5) ? coordinates.x : coordinates.x - u_resolution;","float m = (coordinates.y < u_resolution * 0.5) ? coordinates.y : coordinates.y - u_resolution;","vec2 waveVector = (2.0 * PI * vec2(n, m)) / u_size;","float phase = texture2D(u_phases, vUV).r;","float deltaPhase = omega(length(waveVector)) * u_deltaTime;","phase = mod(phase + deltaPhase, 2.0 * PI);","gl_FragColor = vec4(phase, 0.0, 0.0, 0.0);","}"].join("\n")},THREE.ShaderLib.ocean_spectrum={uniforms:{u_size:{value:null},u_resolution:{value:null},u_choppiness:{value:null},u_phases:{value:null},u_initialSpectrum:{value:null}},fragmentShader:["precision highp float;","#include <common>","const float G = 9.81;","const float KM = 370.0;","varying vec2 vUV;","uniform float u_size;","uniform float u_resolution;","uniform float u_choppiness;","uniform sampler2D u_phases;","uniform sampler2D u_initialSpectrum;","vec2 multiplyComplex (vec2 a, vec2 b) {","return vec2(a[0] * b[0] - a[1] * b[1], a[1] * b[0] + a[0] * b[1]);","}","vec2 multiplyByI (vec2 z) {","return vec2(-z[1], z[0]);","}","float omega (float k) {","return sqrt(G * k * (1.0 + k * k / KM * KM));","}","void main (void) {","vec2 coordinates = gl_FragCoord.xy - 0.5;","float n = (coordinates.x < u_resolution * 0.5) ? coordinates.x : coordinates.x - u_resolution;","float m = (coordinates.y < u_resolution * 0.5) ? coordinates.y : coordinates.y - u_resolution;","vec2 waveVector = (2.0 * PI * vec2(n, m)) / u_size;","float phase = texture2D(u_phases, vUV).r;","vec2 phaseVector = vec2(cos(phase), sin(phase));","vec2 h0 = texture2D(u_initialSpectrum, vUV).rg;","vec2 h0Star = texture2D(u_initialSpectrum, vec2(1.0 - vUV + 1.0 / u_resolution)).rg;","h0Star.y *= -1.0;","vec2 h = multiplyComplex(h0, phaseVector) + multiplyComplex(h0Star, vec2(phaseVector.x, -phaseVector.y));","vec2 hX = -multiplyByI(h * (waveVector.x / length(waveVector))) * u_choppiness;","vec2 hZ = -multiplyByI(h * (waveVector.y / length(waveVector))) * u_choppiness;","if (waveVector.x == 0.0 && waveVector.y == 0.0) {","h = vec2(0.0);","hX = vec2(0.0);","hZ = vec2(0.0);","}","gl_FragColor = vec4(hX + multiplyByI(h), hZ);","}"].join("\n")},THREE.ShaderLib.ocean_normals={uniforms:{u_displacementMap:{value:null},u_resolution:{value:null},u_size:{value:null}},fragmentShader:["precision highp float;","varying vec2 vUV;","uniform sampler2D u_displacementMap;","uniform float u_resolution;","uniform float u_size;","void main (void) {","float texel = 1.0 / u_resolution;","float texelSize = u_size / u_resolution;","vec3 center = texture2D(u_displacementMap, vUV).rgb;","vec3 right = vec3(texelSize, 0.0, 0.0) + texture2D(u_displacementMap, vUV + vec2(texel, 0.0)).rgb - center;","vec3 left = vec3(-texelSize, 0.0, 0.0) + texture2D(u_displacementMap, vUV + vec2(-texel, 0.0)).rgb - center;","vec3 top = vec3(0.0, 0.0, -texelSize) + texture2D(u_displacementMap, vUV + vec2(0.0, -texel)).rgb - center;","vec3 bottom = vec3(0.0, 0.0, texelSize) + texture2D(u_displacementMap, vUV + vec2(0.0, texel)).rgb - center;","vec3 topRight = cross(right, top);","vec3 topLeft = cross(top, left);","vec3 bottomLeft = cross(left, bottom);","vec3 bottomRight = cross(bottom, right);","gl_FragColor = vec4(normalize(topRight + topLeft + bottomLeft + bottomRight), 1.0);","}"].join("\n")},THREE.ShaderLib.ocean_main={uniforms:{u_displacementMap:{value:null},u_normalMap:{value:null},u_geometrySize:{value:null},u_size:{value:null},u_projectionMatrix:{value:null},u_viewMatrix:{value:null},u_cameraPosition:{value:null},u_skyColor:{value:null},u_oceanColor:{value:null},u_sunDirection:{value:null},u_exposure:{value:null}},vertexShader:["precision highp float;","varying vec3 vPos;","varying vec2 vUV;","uniform mat4 u_projectionMatrix;","uniform mat4 u_viewMatrix;","uniform float u_size;","uniform float u_geometrySize;","uniform sampler2D u_displacementMap;","void main (void) {","vec3 newPos = position + texture2D(u_displacementMap, uv).rgb * (u_geometrySize / u_size);","vPos = newPos;","vUV = uv;","gl_Position = u_projectionMatrix * u_viewMatrix * vec4(newPos, 1.0);","}"].join("\n"),fragmentShader:["precision highp float;","varying vec3 vPos;","varying vec2 vUV;","uniform sampler2D u_displacementMap;","uniform sampler2D u_normalMap;","uniform vec3 u_cameraPosition;","uniform vec3 u_oceanColor;","uniform vec3 u_skyColor;","uniform vec3 u_sunDirection;","uniform float u_exposure;","vec3 hdr (vec3 color, float exposure) {","return 1.0 - exp(-color * exposure);","}","void main (void) {","vec3 normal = texture2D(u_normalMap, vUV).rgb;","vec3 view = normalize(u_cameraPosition - vPos);","float fresnel = 0.02 + 0.98 * pow(1.0 - dot(normal, view), 5.0);","vec3 sky = fresnel * u_skyColor;","float diffuse = clamp(dot(normal, normalize(u_sunDirection)), 0.0, 1.0);","vec3 water = (1.0 - fresnel) * u_oceanColor * u_skyColor * diffuse;","vec3 color = sky + water;","gl_FragColor = vec4(hdr(color, u_exposure), 1.0);","}"].join("\n")}},5602:()=>{THREE.VignetteShader={uniforms:{tDiffuse:{value:null},offset:{value:1},darkness:{value:1}},vertexShader:["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform float offset;","uniform float darkness;","uniform sampler2D tDiffuse;","varying vec2 vUv;","void main() {","vec4 texel = texture2D( tDiffuse, vUv );","vec2 uv = ( vUv - vec2( 0.5 ) ) * vec2( offset );","gl_FragColor = vec4( mix( texel.rgb, vec3( 1.0 - darkness ), dot( uv, uv ) ), texel.a );","}"].join("\n")}},2884:()=>{THREE.WaterRefractionShader={uniforms:{color:{type:"c",value:null},time:{type:"f",value:0},tDiffuse:{type:"t",value:null},tDudv:{type:"t",value:null},textureMatrix:{type:"m4",value:null}},vertexShader:["uniform mat4 textureMatrix;","varying vec2 vUv;","varying vec4 vUvRefraction;","void main() {","\tvUv = uv;","\tvUvRefraction = textureMatrix * vec4( position, 1.0 );","\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform vec3 color;","uniform float time;","uniform sampler2D tDiffuse;","uniform sampler2D tDudv;","varying vec2 vUv;","varying vec4 vUvRefraction;","float blendOverlay( float base, float blend ) {","\treturn( base < 0.5 ? ( 2.0 * base * blend ) : ( 1.0 - 2.0 * ( 1.0 - base ) * ( 1.0 - blend ) ) );","}","vec3 blendOverlay( vec3 base, vec3 blend ) {","\treturn vec3( blendOverlay( base.r, blend.r ), blendOverlay( base.g, blend.g ),blendOverlay( base.b, blend.b ) );","}","void main() {"," float waveStrength = 0.1;"," float waveSpeed = 0.03;","\tvec2 distortedUv = texture2D( tDudv, vec2( vUv.x + time * waveSpeed, vUv.y ) ).rg * waveStrength;","\tdistortedUv = vUv.xy + vec2( distortedUv.x, distortedUv.y + time * waveSpeed );","\tvec2 distortion = ( texture2D( tDudv, distortedUv ).rg * 2.0 - 1.0 ) * waveStrength;"," vec4 uv = vec4( vUvRefraction );"," uv.xy += distortion;","\tvec4 base = texture2DProj( tDiffuse, uv );","\tgl_FragColor = vec4( blendOverlay( base.rgb, color ), 1.0 );","}"].join("\n")}},1542:(e,t,r)=>{var n,i,a,o=r(5108);THREE.GeometryUtils={merge:function(e,t,r){var n;o.warn("THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead."),t instanceof THREE.Mesh&&(t.matrixAutoUpdate&&t.updateMatrix(),n=t.matrix,t=t.geometry),e.merge(t,n,r)},randomPointInTriangle:(a=new THREE.Vector3,function(e,t,r){var n=new THREE.Vector3,i=Math.random(),o=Math.random();i+o>1&&(i=1-i,o=1-o);var s=1-i-o;return n.copy(e),n.multiplyScalar(i),a.copy(t),a.multiplyScalar(o),n.add(a),a.copy(r),a.multiplyScalar(s),n.add(a),n}),randomPointInFace:function(e,t){var r,n,i;return r=t.vertices[e.a],n=t.vertices[e.b],i=t.vertices[e.c],THREE.GeometryUtils.randomPointInTriangle(r,n,i)},randomPointsInGeometry:function(e,t){var r,n,i,a,o,s=e.faces,l=e.vertices,u=s.length,c=0,h=[];for(n=0;n<u;n++)i=l[(r=s[n]).a],a=l[r.b],o=l[r.c],r._area=THREE.GeometryUtils.triangleArea(i,a,o),c+=r._area,h[n]=c;function d(e){var t=function t(r,n){if(n<r)return r;var i=r+Math.floor((n-r)/2);return h[i]>e?t(r,i-1):h[i]<e?t(i+1,n):i}(0,h.length-1);return t}var f,p=[],m={};for(n=0;n<t;n++)f=d(Math.random()*c),p[n]=THREE.GeometryUtils.randomPointInFace(s[f],e),m[f]?m[f]+=1:m[f]=1;return p},randomPointsInBufferGeometry:function(e,t){var r,n,i,a,o=e.attributes.position.array,s=0,l=[];n=new THREE.Vector3,i=new THREE.Vector3,a=new THREE.Vector3;var u=o.length/9;for(r=0;r<u;r++)n.set(o[9*r+0],o[9*r+1],o[9*r+2]),i.set(o[9*r+3],o[9*r+4],o[9*r+5]),a.set(o[9*r+6],o[9*r+7],o[9*r+8]),s+=THREE.GeometryUtils.triangleArea(n,i,a),l.push(s);function c(e){var t=function t(r,n){if(n<r)return r;var i=r+Math.floor((n-r)/2);return l[i]>e?t(r,i-1):l[i]<e?t(i+1,n):i}(0,l.length-1);return t}var h,d=[];for(r=0;r<t;r++)h=c(Math.random()*s),n.set(o[9*h+0],o[9*h+1],o[9*h+2]),i.set(o[9*h+3],o[9*h+4],o[9*h+5]),a.set(o[9*h+6],o[9*h+7],o[9*h+8]),d[r]=THREE.GeometryUtils.randomPointInTriangle(n,i,a);return d},triangleArea:(n=new THREE.Vector3,i=new THREE.Vector3,function(e,t,r){return n.subVectors(t,e),i.subVectors(r,e),n.cross(i),.5*n.length()}),center:function(e){return o.warn("THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead."),e.center()}}},9427:function(e,t,r){var n=r(5108);!function(e){"use strict";function t(){}void 0===Number.EPSILON&&(Number.EPSILON=Math.pow(2,-52)),void 0===Number.isInteger&&(Number.isInteger=function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e}),void 0===Math.sign&&(Math.sign=function(e){return e<0?-1:e>0?1:+e}),"name"in Function.prototype==0&&Object.defineProperty(Function.prototype,"name",{get:function(){return this.toString().match(/^\s*function\s*([^\(\s]*)/)[1]}}),void 0===Object.assign&&(Object.assign=function(e){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),r=1;r<arguments.length;r++){var n=arguments[r];if(null!=n)for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t}),Object.assign(t.prototype,{addEventListener:function(e,t){void 0===this._listeners&&(this._listeners={});var r=this._listeners;void 0===r[e]&&(r[e]=[]),-1===r[e].indexOf(t)&&r[e].push(t)},hasEventListener:function(e,t){if(void 0===this._listeners)return!1;var r=this._listeners;return void 0!==r[e]&&-1!==r[e].indexOf(t)},removeEventListener:function(e,t){if(void 0!==this._listeners){var r=this._listeners[e];if(void 0!==r){var n=r.indexOf(t);-1!==n&&r.splice(n,1)}}},dispatchEvent:function(e){if(void 0!==this._listeners){var t=this._listeners[e.type];if(void 0!==t){e.target=this;for(var r=t.slice(0),n=0,i=r.length;n<i;n++)r[n].call(this,e)}}}});var r,i,a,o,s,l,u,c,h,d="89",f={LEFT:0,MIDDLE:1,RIGHT:2},p=0,m=1,g=2,v=3,y=0,b=1,E=0,x=1,w=2,T=0,_=1,S=2,M=1,R=2,A=0,C=1,L=2,O=0,I=1,P=2,H=3,k=4,N=5,U=100,D=101,F=102,B=103,z=104,j=200,V=201,G=202,W=203,q=204,X=205,Y=206,Z=207,K=208,Q=209,J=210,$=0,ee=1,te=2,re=3,ne=4,ie=5,ae=6,oe=7,se=0,le=1,ue=2,ce=0,he=1,de=2,fe=3,pe=4,me=300,ge=301,ve=302,ye=303,be=304,Ee=305,xe=306,we=307,Te=1e3,_e=1001,Se=1002,Me=1003,Re=1004,Ae=1005,Ce=1006,Le=1007,Oe=1008,Ie=1009,Pe=1010,He=1011,ke=1012,Ne=1013,Ue=1014,De=1015,Fe=1016,Be=1017,ze=1018,je=1019,Ve=1020,Ge=1021,We=1022,qe=1023,Xe=1024,Ye=1025,Ze=qe,Ke=1026,Qe=1027,Je=2001,$e=2002,et=2003,tt=2004,rt=2100,nt=2101,it=2102,at=2103,ot=2151,st=2200,lt=2201,ut=2202,ct=2300,ht=2301,dt=2302,ft=2400,pt=2401,mt=2402,gt=0,vt=1,yt=2,bt=3e3,Et=3001,xt=3007,wt=3002,Tt=3003,_t=3004,St=3005,Mt=3006,Rt=3200,At=3201,Ct={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){for(var e=[],t=0;t<256;t++)e[t]=(t<16?"0":"")+t.toString(16).toUpperCase();return function(){var t=4294967295*Math.random()|0,r=4294967295*Math.random()|0,n=4294967295*Math.random()|0,i=4294967295*Math.random()|0;return e[255&t]+e[t>>8&255]+e[t>>16&255]+e[t>>24&255]+"-"+e[255&r]+e[r>>8&255]+"-"+e[r>>16&15|64]+e[r>>24&255]+"-"+e[63&n|128]+e[n>>8&255]+"-"+e[n>>16&255]+e[n>>24&255]+e[255&i]+e[i>>8&255]+e[i>>16&255]+e[i>>24&255]}}(),clamp:function(e,t,r){return Math.max(t,Math.min(r,e))},euclideanModulo:function(e,t){return(e%t+t)%t},mapLinear:function(e,t,r,n,i){return n+(e-t)*(i-n)/(r-t)},lerp:function(e,t,r){return(1-r)*e+r*t},smoothstep:function(e,t,r){return e<=t?0:e>=r?1:(e=(e-t)/(r-t))*e*(3-2*e)},smootherstep:function(e,t,r){return e<=t?0:e>=r?1:(e=(e-t)/(r-t))*e*e*(e*(6*e-15)+10)},randInt:function(e,t){return e+Math.floor(Math.random()*(t-e+1))},randFloat:function(e,t){return e+Math.random()*(t-e)},randFloatSpread:function(e){return e*(.5-Math.random())},degToRad:function(e){return e*Ct.DEG2RAD},radToDeg:function(e){return e*Ct.RAD2DEG},isPowerOfTwo:function(e){return 0==(e&e-1)&&0!==e},ceilPowerOfTwo:function(e){return Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))},floorPowerOfTwo:function(e){return Math.pow(2,Math.floor(Math.log(e)/Math.LN2))}};function Lt(e,t){this.x=e||0,this.y=t||0}function Ot(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&n.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}function It(e,t,r,n){this._x=e||0,this._y=t||0,this._z=r||0,this._w=void 0!==n?n:1}function Pt(e,t,r){this.x=e||0,this.y=t||0,this.z=r||0}function Ht(){this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&n.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}Object.defineProperties(Lt.prototype,{width:{get:function(){return this.x},set:function(e){this.x=e}},height:{get:function(){return this.y},set:function(e){this.y=e}}}),Object.assign(Lt.prototype,{isVector2:!0,set:function(e,t){return this.x=e,this.y=t,this},setScalar:function(e){return this.x=e,this.y=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y)},copy:function(e){return this.x=e.x,this.y=e.y,this},add:function(e,t){return void 0!==t?(n.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this)},addScalar:function(e){return this.x+=e,this.y+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this},sub:function(e,t){return void 0!==t?(n.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this)},subScalar:function(e){return this.x-=e,this.y-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this},multiply:function(e){return this.x*=e.x,this.y*=e.y,this},multiplyScalar:function(e){return this.x*=e,this.y*=e,this},divide:function(e){return this.x/=e.x,this.y/=e.y,this},divideScalar:function(e){return this.multiplyScalar(1/e)},applyMatrix3:function(e){var t=this.x,r=this.y,n=e.elements;return this.x=n[0]*t+n[3]*r+n[6],this.y=n[1]*t+n[4]*r+n[7],this},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this},clampScalar:(c=new Lt,h=new Lt,function(e,t){return c.set(e,e),h.set(t,t),this.clamp(c,h)}),clampLength:function(e,t){var r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this},negate:function(){return this.x=-this.x,this.y=-this.y,this},dot:function(e){return this.x*e.x+this.y*e.y},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)},normalize:function(){return this.divideScalar(this.length()||1)},angle:function(){var e=Math.atan2(this.y,this.x);return e<0&&(e+=2*Math.PI),e},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){var t=this.x-e.x,r=this.y-e.y;return t*t+r*r},manhattanDistanceTo:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)},setLength:function(e){return this.normalize().multiplyScalar(e)},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this},lerpVectors:function(e,t,r){return this.subVectors(t,e).multiplyScalar(r).add(e)},equals:function(e){return e.x===this.x&&e.y===this.y},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e},fromBufferAttribute:function(e,t,r){return void 0!==r&&n.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this},rotateAround:function(e,t){var r=Math.cos(t),n=Math.sin(t),i=this.x-e.x,a=this.y-e.y;return this.x=i*r-a*n+e.x,this.y=i*n+a*r+e.y,this}}),Object.assign(Ot.prototype,{isMatrix4:!0,set:function(e,t,r,n,i,a,o,s,l,u,c,h,d,f,p,m){var g=this.elements;return g[0]=e,g[4]=t,g[8]=r,g[12]=n,g[1]=i,g[5]=a,g[9]=o,g[13]=s,g[2]=l,g[6]=u,g[10]=c,g[14]=h,g[3]=d,g[7]=f,g[11]=p,g[15]=m,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},clone:function(){return(new Ot).fromArray(this.elements)},copy:function(e){var t=this.elements,r=e.elements;return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],t[9]=r[9],t[10]=r[10],t[11]=r[11],t[12]=r[12],t[13]=r[13],t[14]=r[14],t[15]=r[15],this},copyPosition:function(e){var t=this.elements,r=e.elements;return t[12]=r[12],t[13]=r[13],t[14]=r[14],this},extractBasis:function(e,t,r){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),r.setFromMatrixColumn(this,2),this},makeBasis:function(e,t,r){return this.set(e.x,t.x,r.x,0,e.y,t.y,r.y,0,e.z,t.z,r.z,0,0,0,0,1),this},extractRotation:(u=new Pt,function(e){var t=this.elements,r=e.elements,n=1/u.setFromMatrixColumn(e,0).length(),i=1/u.setFromMatrixColumn(e,1).length(),a=1/u.setFromMatrixColumn(e,2).length();return t[0]=r[0]*n,t[1]=r[1]*n,t[2]=r[2]*n,t[4]=r[4]*i,t[5]=r[5]*i,t[6]=r[6]*i,t[8]=r[8]*a,t[9]=r[9]*a,t[10]=r[10]*a,this}),makeRotationFromEuler:function(e){e&&e.isEuler||n.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var t=this.elements,r=e.x,i=e.y,a=e.z,o=Math.cos(r),s=Math.sin(r),l=Math.cos(i),u=Math.sin(i),c=Math.cos(a),h=Math.sin(a);if("XYZ"===e.order){var d=o*c,f=o*h,p=s*c,m=s*h;t[0]=l*c,t[4]=-l*h,t[8]=u,t[1]=f+p*u,t[5]=d-m*u,t[9]=-s*l,t[2]=m-d*u,t[6]=p+f*u,t[10]=o*l}else if("YXZ"===e.order){var g=l*c,v=l*h,y=u*c,b=u*h;t[0]=g+b*s,t[4]=y*s-v,t[8]=o*u,t[1]=o*h,t[5]=o*c,t[9]=-s,t[2]=v*s-y,t[6]=b+g*s,t[10]=o*l}else if("ZXY"===e.order)g=l*c,v=l*h,y=u*c,b=u*h,t[0]=g-b*s,t[4]=-o*h,t[8]=y+v*s,t[1]=v+y*s,t[5]=o*c,t[9]=b-g*s,t[2]=-o*u,t[6]=s,t[10]=o*l;else if("ZYX"===e.order)d=o*c,f=o*h,p=s*c,m=s*h,t[0]=l*c,t[4]=p*u-f,t[8]=d*u+m,t[1]=l*h,t[5]=m*u+d,t[9]=f*u-p,t[2]=-u,t[6]=s*l,t[10]=o*l;else if("YZX"===e.order){var E=o*l,x=o*u,w=s*l,T=s*u;t[0]=l*c,t[4]=T-E*h,t[8]=w*h+x,t[1]=h,t[5]=o*c,t[9]=-s*c,t[2]=-u*c,t[6]=x*h+w,t[10]=E-T*h}else"XZY"===e.order&&(E=o*l,x=o*u,w=s*l,T=s*u,t[0]=l*c,t[4]=-h,t[8]=u*c,t[1]=E*h+T,t[5]=o*c,t[9]=x*h-w,t[2]=w*h-x,t[6]=s*c,t[10]=T*h+E);return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this},makeRotationFromQuaternion:function(e){var t=this.elements,r=e._x,n=e._y,i=e._z,a=e._w,o=r+r,s=n+n,l=i+i,u=r*o,c=r*s,h=r*l,d=n*s,f=n*l,p=i*l,m=a*o,g=a*s,v=a*l;return t[0]=1-(d+p),t[4]=c-v,t[8]=h+g,t[1]=c+v,t[5]=1-(u+p),t[9]=f-m,t[2]=h-g,t[6]=f+m,t[10]=1-(u+d),t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this},lookAt:(o=new Pt,s=new Pt,l=new Pt,function(e,t,r){var n=this.elements;return l.subVectors(e,t),0===l.lengthSq()&&(l.z=1),l.normalize(),o.crossVectors(r,l),0===o.lengthSq()&&(1===Math.abs(r.z)?l.x+=1e-4:l.z+=1e-4,l.normalize(),o.crossVectors(r,l)),o.normalize(),s.crossVectors(l,o),n[0]=o.x,n[4]=s.x,n[8]=l.x,n[1]=o.y,n[5]=s.y,n[9]=l.y,n[2]=o.z,n[6]=s.z,n[10]=l.z,this}),multiply:function(e,t){return void 0!==t?(n.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(e,t)):this.multiplyMatrices(this,e)},premultiply:function(e){return this.multiplyMatrices(e,this)},multiplyMatrices:function(e,t){var r=e.elements,n=t.elements,i=this.elements,a=r[0],o=r[4],s=r[8],l=r[12],u=r[1],c=r[5],h=r[9],d=r[13],f=r[2],p=r[6],m=r[10],g=r[14],v=r[3],y=r[7],b=r[11],E=r[15],x=n[0],w=n[4],T=n[8],_=n[12],S=n[1],M=n[5],R=n[9],A=n[13],C=n[2],L=n[6],O=n[10],I=n[14],P=n[3],H=n[7],k=n[11],N=n[15];return i[0]=a*x+o*S+s*C+l*P,i[4]=a*w+o*M+s*L+l*H,i[8]=a*T+o*R+s*O+l*k,i[12]=a*_+o*A+s*I+l*N,i[1]=u*x+c*S+h*C+d*P,i[5]=u*w+c*M+h*L+d*H,i[9]=u*T+c*R+h*O+d*k,i[13]=u*_+c*A+h*I+d*N,i[2]=f*x+p*S+m*C+g*P,i[6]=f*w+p*M+m*L+g*H,i[10]=f*T+p*R+m*O+g*k,i[14]=f*_+p*A+m*I+g*N,i[3]=v*x+y*S+b*C+E*P,i[7]=v*w+y*M+b*L+E*H,i[11]=v*T+y*R+b*O+E*k,i[15]=v*_+y*A+b*I+E*N,this},multiplyScalar:function(e){var t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this},applyToBufferAttribute:function(){var e=new Pt;return function(t){for(var r=0,n=t.count;r<n;r++)e.x=t.getX(r),e.y=t.getY(r),e.z=t.getZ(r),e.applyMatrix4(this),t.setXYZ(r,e.x,e.y,e.z);return t}}(),determinant:function(){var e=this.elements,t=e[0],r=e[4],n=e[8],i=e[12],a=e[1],o=e[5],s=e[9],l=e[13],u=e[2],c=e[6],h=e[10],d=e[14];return e[3]*(+i*s*c-n*l*c-i*o*h+r*l*h+n*o*d-r*s*d)+e[7]*(+t*s*d-t*l*h+i*a*h-n*a*d+n*l*u-i*s*u)+e[11]*(+t*l*c-t*o*d-i*a*c+r*a*d+i*o*u-r*l*u)+e[15]*(-n*o*u-t*s*c+t*o*h+n*a*c-r*a*h+r*s*u)},transpose:function(){var e,t=this.elements;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this},setPosition:function(e){var t=this.elements;return t[12]=e.x,t[13]=e.y,t[14]=e.z,this},getInverse:function(e,t){var r=this.elements,i=e.elements,a=i[0],o=i[1],s=i[2],l=i[3],u=i[4],c=i[5],h=i[6],d=i[7],f=i[8],p=i[9],m=i[10],g=i[11],v=i[12],y=i[13],b=i[14],E=i[15],x=p*b*d-y*m*d+y*h*g-c*b*g-p*h*E+c*m*E,w=v*m*d-f*b*d-v*h*g+u*b*g+f*h*E-u*m*E,T=f*y*d-v*p*d+v*c*g-u*y*g-f*c*E+u*p*E,_=v*p*h-f*y*h-v*c*m+u*y*m+f*c*b-u*p*b,S=a*x+o*w+s*T+l*_;if(0===S){var M="THREE.Matrix4: .getInverse() can't invert matrix, determinant is 0";if(!0===t)throw new Error(M);return n.warn(M),this.identity()}var R=1/S;return r[0]=x*R,r[1]=(y*m*l-p*b*l-y*s*g+o*b*g+p*s*E-o*m*E)*R,r[2]=(c*b*l-y*h*l+y*s*d-o*b*d-c*s*E+o*h*E)*R,r[3]=(p*h*l-c*m*l-p*s*d+o*m*d+c*s*g-o*h*g)*R,r[4]=w*R,r[5]=(f*b*l-v*m*l+v*s*g-a*b*g-f*s*E+a*m*E)*R,r[6]=(v*h*l-u*b*l-v*s*d+a*b*d+u*s*E-a*h*E)*R,r[7]=(u*m*l-f*h*l+f*s*d-a*m*d-u*s*g+a*h*g)*R,r[8]=T*R,r[9]=(v*p*l-f*y*l-v*o*g+a*y*g+f*o*E-a*p*E)*R,r[10]=(u*y*l-v*c*l+v*o*d-a*y*d-u*o*E+a*c*E)*R,r[11]=(f*c*l-u*p*l-f*o*d+a*p*d+u*o*g-a*c*g)*R,r[12]=_*R,r[13]=(f*y*s-v*p*s+v*o*m-a*y*m-f*o*b+a*p*b)*R,r[14]=(v*c*s-u*y*s-v*o*h+a*y*h+u*o*b-a*c*b)*R,r[15]=(u*p*s-f*c*s+f*o*h-a*p*h-u*o*m+a*c*m)*R,this},scale:function(e){var t=this.elements,r=e.x,n=e.y,i=e.z;return t[0]*=r,t[4]*=n,t[8]*=i,t[1]*=r,t[5]*=n,t[9]*=i,t[2]*=r,t[6]*=n,t[10]*=i,t[3]*=r,t[7]*=n,t[11]*=i,this},getMaxScaleOnAxis:function(){var e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],r=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],n=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,r,n))},makeTranslation:function(e,t,r){return this.set(1,0,0,e,0,1,0,t,0,0,1,r,0,0,0,1),this},makeRotationX:function(e){var t=Math.cos(e),r=Math.sin(e);return this.set(1,0,0,0,0,t,-r,0,0,r,t,0,0,0,0,1),this},makeRotationY:function(e){var t=Math.cos(e),r=Math.sin(e);return this.set(t,0,r,0,0,1,0,0,-r,0,t,0,0,0,0,1),this},makeRotationZ:function(e){var t=Math.cos(e),r=Math.sin(e);return this.set(t,-r,0,0,r,t,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(e,t){var r=Math.cos(t),n=Math.sin(t),i=1-r,a=e.x,o=e.y,s=e.z,l=i*a,u=i*o;return this.set(l*a+r,l*o-n*s,l*s+n*o,0,l*o+n*s,u*o+r,u*s-n*a,0,l*s-n*o,u*s+n*a,i*s*s+r,0,0,0,0,1),this},makeScale:function(e,t,r){return this.set(e,0,0,0,0,t,0,0,0,0,r,0,0,0,0,1),this},makeShear:function(e,t,r){return this.set(1,t,r,0,e,1,r,0,e,t,1,0,0,0,0,1),this},compose:function(e,t,r){return this.makeRotationFromQuaternion(t),this.scale(r),this.setPosition(e),this},decompose:(i=new Pt,a=new Ot,function(e,t,r){var n=this.elements,o=i.set(n[0],n[1],n[2]).length(),s=i.set(n[4],n[5],n[6]).length(),l=i.set(n[8],n[9],n[10]).length();this.determinant()<0&&(o=-o),e.x=n[12],e.y=n[13],e.z=n[14],a.copy(this);var u=1/o,c=1/s,h=1/l;return a.elements[0]*=u,a.elements[1]*=u,a.elements[2]*=u,a.elements[4]*=c,a.elements[5]*=c,a.elements[6]*=c,a.elements[8]*=h,a.elements[9]*=h,a.elements[10]*=h,t.setFromRotationMatrix(a),r.x=o,r.y=s,r.z=l,this}),makePerspective:function(e,t,r,i,a,o){void 0===o&&n.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");var s=this.elements,l=2*a/(t-e),u=2*a/(r-i),c=(t+e)/(t-e),h=(r+i)/(r-i),d=-(o+a)/(o-a),f=-2*o*a/(o-a);return s[0]=l,s[4]=0,s[8]=c,s[12]=0,s[1]=0,s[5]=u,s[9]=h,s[13]=0,s[2]=0,s[6]=0,s[10]=d,s[14]=f,s[3]=0,s[7]=0,s[11]=-1,s[15]=0,this},makeOrthographic:function(e,t,r,n,i,a){var o=this.elements,s=1/(t-e),l=1/(r-n),u=1/(a-i),c=(t+e)*s,h=(r+n)*l,d=(a+i)*u;return o[0]=2*s,o[4]=0,o[8]=0,o[12]=-c,o[1]=0,o[5]=2*l,o[9]=0,o[13]=-h,o[2]=0,o[6]=0,o[10]=-2*u,o[14]=-d,o[3]=0,o[7]=0,o[11]=0,o[15]=1,this},equals:function(e){for(var t=this.elements,r=e.elements,n=0;n<16;n++)if(t[n]!==r[n])return!1;return!0},fromArray:function(e,t){void 0===t&&(t=0);for(var r=0;r<16;r++)this.elements[r]=e[r+t];return this},toArray:function(e,t){void 0===e&&(e=[]),void 0===t&&(t=0);var r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e[t+9]=r[9],e[t+10]=r[10],e[t+11]=r[11],e[t+12]=r[12],e[t+13]=r[13],e[t+14]=r[14],e[t+15]=r[15],e}}),Object.assign(It,{slerp:function(e,t,r,n){return r.copy(e).slerp(t,n)},slerpFlat:function(e,t,r,n,i,a,o){var s=r[n+0],l=r[n+1],u=r[n+2],c=r[n+3],h=i[a+0],d=i[a+1],f=i[a+2],p=i[a+3];if(c!==p||s!==h||l!==d||u!==f){var m=1-o,g=s*h+l*d+u*f+c*p,v=g>=0?1:-1,y=1-g*g;if(y>Number.EPSILON){var b=Math.sqrt(y),E=Math.atan2(b,g*v);m=Math.sin(m*E)/b,o=Math.sin(o*E)/b}var x=o*v;if(s=s*m+h*x,l=l*m+d*x,u=u*m+f*x,c=c*m+p*x,m===1-o){var w=1/Math.sqrt(s*s+l*l+u*u+c*c);s*=w,l*=w,u*=w,c*=w}}e[t]=s,e[t+1]=l,e[t+2]=u,e[t+3]=c}}),Object.defineProperties(It.prototype,{x:{get:function(){return this._x},set:function(e){this._x=e,this.onChangeCallback()}},y:{get:function(){return this._y},set:function(e){this._y=e,this.onChangeCallback()}},z:{get:function(){return this._z},set:function(e){this._z=e,this.onChangeCallback()}},w:{get:function(){return this._w},set:function(e){this._w=e,this.onChangeCallback()}}}),Object.assign(It.prototype,{set:function(e,t,r,n){return this._x=e,this._y=t,this._z=r,this._w=n,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this.onChangeCallback(),this},setFromEuler:function(e,t){if(!e||!e.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var r=e._x,n=e._y,i=e._z,a=e.order,o=Math.cos,s=Math.sin,l=o(r/2),u=o(n/2),c=o(i/2),h=s(r/2),d=s(n/2),f=s(i/2);return"XYZ"===a?(this._x=h*u*c+l*d*f,this._y=l*d*c-h*u*f,this._z=l*u*f+h*d*c,this._w=l*u*c-h*d*f):"YXZ"===a?(this._x=h*u*c+l*d*f,this._y=l*d*c-h*u*f,this._z=l*u*f-h*d*c,this._w=l*u*c+h*d*f):"ZXY"===a?(this._x=h*u*c-l*d*f,this._y=l*d*c+h*u*f,this._z=l*u*f+h*d*c,this._w=l*u*c-h*d*f):"ZYX"===a?(this._x=h*u*c-l*d*f,this._y=l*d*c+h*u*f,this._z=l*u*f-h*d*c,this._w=l*u*c+h*d*f):"YZX"===a?(this._x=h*u*c+l*d*f,this._y=l*d*c+h*u*f,this._z=l*u*f-h*d*c,this._w=l*u*c-h*d*f):"XZY"===a&&(this._x=h*u*c-l*d*f,this._y=l*d*c-h*u*f,this._z=l*u*f+h*d*c,this._w=l*u*c+h*d*f),!1!==t&&this.onChangeCallback(),this},setFromAxisAngle:function(e,t){var r=t/2,n=Math.sin(r);return this._x=e.x*n,this._y=e.y*n,this._z=e.z*n,this._w=Math.cos(r),this.onChangeCallback(),this},setFromRotationMatrix:function(e){var t,r=e.elements,n=r[0],i=r[4],a=r[8],o=r[1],s=r[5],l=r[9],u=r[2],c=r[6],h=r[10],d=n+s+h;return d>0?(t=.5/Math.sqrt(d+1),this._w=.25/t,this._x=(c-l)*t,this._y=(a-u)*t,this._z=(o-i)*t):n>s&&n>h?(t=2*Math.sqrt(1+n-s-h),this._w=(c-l)/t,this._x=.25*t,this._y=(i+o)/t,this._z=(a+u)/t):s>h?(t=2*Math.sqrt(1+s-n-h),this._w=(a-u)/t,this._x=(i+o)/t,this._y=.25*t,this._z=(l+c)/t):(t=2*Math.sqrt(1+h-n-s),this._w=(o-i)/t,this._x=(a+u)/t,this._y=(l+c)/t,this._z=.25*t),this.onChangeCallback(),this},setFromUnitVectors:function(){var e,t=new Pt,r=1e-6;return function(n,i){return void 0===t&&(t=new Pt),(e=n.dot(i)+1)<r?(e=0,Math.abs(n.x)>Math.abs(n.z)?t.set(-n.y,n.x,0):t.set(0,-n.z,n.y)):t.crossVectors(n,i),this._x=t.x,this._y=t.y,this._z=t.z,this._w=e,this.normalize()}}(),inverse:function(){return this.conjugate().normalize()},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this.onChangeCallback(),this},dot:function(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this.onChangeCallback(),this},multiply:function(e,t){return void 0!==t?(n.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(e,t)):this.multiplyQuaternions(this,e)},premultiply:function(e){return this.multiplyQuaternions(e,this)},multiplyQuaternions:function(e,t){var r=e._x,n=e._y,i=e._z,a=e._w,o=t._x,s=t._y,l=t._z,u=t._w;return this._x=r*u+a*o+n*l-i*s,this._y=n*u+a*s+i*o-r*l,this._z=i*u+a*l+r*s-n*o,this._w=a*u-r*o-n*s-i*l,this.onChangeCallback(),this},slerp:function(e,t){if(0===t)return this;if(1===t)return this.copy(e);var r=this._x,n=this._y,i=this._z,a=this._w,o=a*e._w+r*e._x+n*e._y+i*e._z;if(o<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,o=-o):this.copy(e),o>=1)return this._w=a,this._x=r,this._y=n,this._z=i,this;var s=Math.sqrt(1-o*o);if(Math.abs(s)<.001)return this._w=.5*(a+this._w),this._x=.5*(r+this._x),this._y=.5*(n+this._y),this._z=.5*(i+this._z),this;var l=Math.atan2(s,o),u=Math.sin((1-t)*l)/s,c=Math.sin(t*l)/s;return this._w=a*u+this._w*c,this._x=r*u+this._x*c,this._y=n*u+this._y*c,this._z=i*u+this._z*c,this.onChangeCallback(),this},equals:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w},fromArray:function(e,t){return void 0===t&&(t=0),this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this.onChangeCallback(),this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e},onChange:function(e){return this.onChangeCallback=e,this},onChangeCallback:function(){}}),Object.assign(Pt.prototype,{isVector3:!0,set:function(e,t,r){return this.x=e,this.y=t,this.z=r,this},setScalar:function(e){return this.x=e,this.y=e,this.z=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setZ:function(e){return this.z=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this},add:function(e,t){return void 0!==t?(n.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this)},addScalar:function(e){return this.x+=e,this.y+=e,this.z+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this},sub:function(e,t){return void 0!==t?(n.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this)},subScalar:function(e){return this.x-=e,this.y-=e,this.z-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this},multiply:function(e,t){return void 0!==t?(n.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(e,t)):(this.x*=e.x,this.y*=e.y,this.z*=e.z,this)},multiplyScalar:function(e){return this.x*=e,this.y*=e,this.z*=e,this},multiplyVectors:function(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this},applyEuler:(r=new It,function(e){return e&&e.isEuler||n.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(r.setFromEuler(e))}),applyAxisAngle:function(){var e=new It;return function(t,r){return this.applyQuaternion(e.setFromAxisAngle(t,r))}}(),applyMatrix3:function(e){var t=this.x,r=this.y,n=this.z,i=e.elements;return this.x=i[0]*t+i[3]*r+i[6]*n,this.y=i[1]*t+i[4]*r+i[7]*n,this.z=i[2]*t+i[5]*r+i[8]*n,this},applyMatrix4:function(e){var t=this.x,r=this.y,n=this.z,i=e.elements,a=1/(i[3]*t+i[7]*r+i[11]*n+i[15]);return this.x=(i[0]*t+i[4]*r+i[8]*n+i[12])*a,this.y=(i[1]*t+i[5]*r+i[9]*n+i[13])*a,this.z=(i[2]*t+i[6]*r+i[10]*n+i[14])*a,this},applyQuaternion:function(e){var t=this.x,r=this.y,n=this.z,i=e.x,a=e.y,o=e.z,s=e.w,l=s*t+a*n-o*r,u=s*r+o*t-i*n,c=s*n+i*r-a*t,h=-i*t-a*r-o*n;return this.x=l*s+h*-i+u*-o-c*-a,this.y=u*s+h*-a+c*-i-l*-o,this.z=c*s+h*-o+l*-a-u*-i,this},project:function(){var e=new Ot;return function(t){return e.multiplyMatrices(t.projectionMatrix,e.getInverse(t.matrixWorld)),this.applyMatrix4(e)}}(),unproject:function(){var e=new Ot;return function(t){return e.multiplyMatrices(t.matrixWorld,e.getInverse(t.projectionMatrix)),this.applyMatrix4(e)}}(),transformDirection:function(e){var t=this.x,r=this.y,n=this.z,i=e.elements;return this.x=i[0]*t+i[4]*r+i[8]*n,this.y=i[1]*t+i[5]*r+i[9]*n,this.z=i[2]*t+i[6]*r+i[10]*n,this.normalize()},divide:function(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this},divideScalar:function(e){return this.multiplyScalar(1/e)},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this},clampScalar:function(){var e=new Pt,t=new Pt;return function(r,n){return e.set(r,r,r),t.set(n,n,n),this.clamp(e,t)}}(),clampLength:function(e,t){var r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(e){return this.normalize().multiplyScalar(e)},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this},lerpVectors:function(e,t,r){return this.subVectors(t,e).multiplyScalar(r).add(e)},cross:function(e,t){return void 0!==t?(n.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(e,t)):this.crossVectors(this,e)},crossVectors:function(e,t){var r=e.x,n=e.y,i=e.z,a=t.x,o=t.y,s=t.z;return this.x=n*s-i*o,this.y=i*a-r*s,this.z=r*o-n*a,this},projectOnVector:function(e){var t=e.dot(this)/e.lengthSq();return this.copy(e).multiplyScalar(t)},projectOnPlane:function(){var e=new Pt;return function(t){return e.copy(this).projectOnVector(t),this.sub(e)}}(),reflect:function(){var e=new Pt;return function(t){return this.sub(e.copy(t).multiplyScalar(2*this.dot(t)))}}(),angleTo:function(e){var t=this.dot(e)/Math.sqrt(this.lengthSq()*e.lengthSq());return Math.acos(Ct.clamp(t,-1,1))},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){var t=this.x-e.x,r=this.y-e.y,n=this.z-e.z;return t*t+r*r+n*n},manhattanDistanceTo:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)},setFromSpherical:function(e){var t=Math.sin(e.phi)*e.radius;return this.x=t*Math.sin(e.theta),this.y=Math.cos(e.phi)*e.radius,this.z=t*Math.cos(e.theta),this},setFromCylindrical:function(e){return this.x=e.radius*Math.sin(e.theta),this.y=e.y,this.z=e.radius*Math.cos(e.theta),this},setFromMatrixPosition:function(e){var t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this},setFromMatrixScale:function(e){var t=this.setFromMatrixColumn(e,0).length(),r=this.setFromMatrixColumn(e,1).length(),n=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=r,this.z=n,this},setFromMatrixColumn:function(e,t){return this.fromArray(e.elements,4*t)},equals:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this.z=e[t+2],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e},fromBufferAttribute:function(e,t,r){return void 0!==r&&n.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}}),Object.assign(Ht.prototype,{isMatrix3:!0,set:function(e,t,r,n,i,a,o,s,l){var u=this.elements;return u[0]=e,u[1]=n,u[2]=o,u[3]=t,u[4]=i,u[5]=s,u[6]=r,u[7]=a,u[8]=l,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},clone:function(){return(new this.constructor).fromArray(this.elements)},copy:function(e){var t=this.elements,r=e.elements;return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],this},setFromMatrix4:function(e){var t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this},applyToBufferAttribute:function(){var e=new Pt;return function(t){for(var r=0,n=t.count;r<n;r++)e.x=t.getX(r),e.y=t.getY(r),e.z=t.getZ(r),e.applyMatrix3(this),t.setXYZ(r,e.x,e.y,e.z);return t}}(),multiply:function(e){return this.multiplyMatrices(this,e)},premultiply:function(e){return this.multiplyMatrices(e,this)},multiplyMatrices:function(e,t){var r=e.elements,n=t.elements,i=this.elements,a=r[0],o=r[3],s=r[6],l=r[1],u=r[4],c=r[7],h=r[2],d=r[5],f=r[8],p=n[0],m=n[3],g=n[6],v=n[1],y=n[4],b=n[7],E=n[2],x=n[5],w=n[8];return i[0]=a*p+o*v+s*E,i[3]=a*m+o*y+s*x,i[6]=a*g+o*b+s*w,i[1]=l*p+u*v+c*E,i[4]=l*m+u*y+c*x,i[7]=l*g+u*b+c*w,i[2]=h*p+d*v+f*E,i[5]=h*m+d*y+f*x,i[8]=h*g+d*b+f*w,this},multiplyScalar:function(e){var t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this},determinant:function(){var e=this.elements,t=e[0],r=e[1],n=e[2],i=e[3],a=e[4],o=e[5],s=e[6],l=e[7],u=e[8];return t*a*u-t*o*l-r*i*u+r*o*s+n*i*l-n*a*s},getInverse:function(e,t){e&&e.isMatrix4&&n.error("THREE.Matrix3: .getInverse() no longer takes a Matrix4 argument.");var r=e.elements,i=this.elements,a=r[0],o=r[1],s=r[2],l=r[3],u=r[4],c=r[5],h=r[6],d=r[7],f=r[8],p=f*u-c*d,m=c*h-f*l,g=d*l-u*h,v=a*p+o*m+s*g;if(0===v){var y="THREE.Matrix3: .getInverse() can't invert matrix, determinant is 0";if(!0===t)throw new Error(y);return n.warn(y),this.identity()}var b=1/v;return i[0]=p*b,i[1]=(s*d-f*o)*b,i[2]=(c*o-s*u)*b,i[3]=m*b,i[4]=(f*a-s*h)*b,i[5]=(s*l-c*a)*b,i[6]=g*b,i[7]=(o*h-d*a)*b,i[8]=(u*a-o*l)*b,this},transpose:function(){var e,t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this},getNormalMatrix:function(e){return this.setFromMatrix4(e).getInverse(this).transpose()},transposeIntoArray:function(e){var t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this},setUvTransform:function(e,t,r,n,i,a,o){var s=Math.cos(i),l=Math.sin(i);this.set(r*s,r*l,-r*(s*a+l*o)+a+e,-n*l,n*s,-n*(-l*a+s*o)+o+t,0,0,1)},scale:function(e,t){var r=this.elements;return r[0]*=e,r[3]*=e,r[6]*=e,r[1]*=t,r[4]*=t,r[7]*=t,this},rotate:function(e){var t=Math.cos(e),r=Math.sin(e),n=this.elements,i=n[0],a=n[3],o=n[6],s=n[1],l=n[4],u=n[7];return n[0]=t*i+r*s,n[3]=t*a+r*l,n[6]=t*o+r*u,n[1]=-r*i+t*s,n[4]=-r*a+t*l,n[7]=-r*o+t*u,this},translate:function(e,t){var r=this.elements;return r[0]+=e*r[2],r[3]+=e*r[5],r[6]+=e*r[8],r[1]+=t*r[2],r[4]+=t*r[5],r[7]+=t*r[8],this},equals:function(e){for(var t=this.elements,r=e.elements,n=0;n<9;n++)if(t[n]!==r[n])return!1;return!0},fromArray:function(e,t){void 0===t&&(t=0);for(var r=0;r<9;r++)this.elements[r]=e[r+t];return this},toArray:function(e,t){void 0===e&&(e=[]),void 0===t&&(t=0);var r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e}});var kt=0;function Nt(e,t,r,n,i,a,o,s,l,u){Object.defineProperty(this,"id",{value:kt++}),this.uuid=Ct.generateUUID(),this.name="",this.image=void 0!==e?e:Nt.DEFAULT_IMAGE,this.mipmaps=[],this.mapping=void 0!==t?t:Nt.DEFAULT_MAPPING,this.wrapS=void 0!==r?r:_e,this.wrapT=void 0!==n?n:_e,this.magFilter=void 0!==i?i:Ce,this.minFilter=void 0!==a?a:Oe,this.anisotropy=void 0!==l?l:1,this.format=void 0!==o?o:qe,this.type=void 0!==s?s:Ie,this.offset=new Lt(0,0),this.repeat=new Lt(1,1),this.center=new Lt(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Ht,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=void 0!==u?u:bt,this.version=0,this.onUpdate=null}function Ut(e,t,r,n){this.x=e||0,this.y=t||0,this.z=r||0,this.w=void 0!==n?n:1}function Dt(e,t,r){this.uuid=Ct.generateUUID(),this.width=e,this.height=t,this.scissor=new Ut(0,0,e,t),this.scissorTest=!1,this.viewport=new Ut(0,0,e,t),void 0===(r=r||{}).minFilter&&(r.minFilter=Ce),this.texture=new Nt(void 0,void 0,r.wrapS,r.wrapT,r.magFilter,r.minFilter,r.format,r.type,r.anisotropy,r.encoding),this.depthBuffer=void 0===r.depthBuffer||r.depthBuffer,this.stencilBuffer=void 0===r.stencilBuffer||r.stencilBuffer,this.depthTexture=void 0!==r.depthTexture?r.depthTexture:null}function Ft(e,t,r){Dt.call(this,e,t,r),this.activeCubeFace=0,this.activeMipMapLevel=0}function Bt(e,t,r,n,i,a,o,s,l,u,c,h){Nt.call(this,null,a,o,s,l,u,n,i,c,h),this.image={data:e,width:t,height:r},this.magFilter=void 0!==l?l:Me,this.minFilter=void 0!==u?u:Me,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}function zt(e,t,r,n,i,a,o,s,l,u){e=void 0!==e?e:[],t=void 0!==t?t:ge,Nt.call(this,e,t,r,n,i,a,o,s,l,u),this.flipY=!1}Nt.DEFAULT_IMAGE=void 0,Nt.DEFAULT_MAPPING=me,Nt.prototype=Object.assign(Object.create(t.prototype),{constructor:Nt,isTexture:!0,clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.name=e.name,this.image=e.image,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this},toJSON:function(e){var t=void 0===e||"string"==typeof e;if(!t&&void 0!==e.textures[this.uuid])return e.textures[this.uuid];function r(e){var t;if(e instanceof HTMLCanvasElement)t=e;else{(t=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")).width=e.width,t.height=e.height;var r=t.getContext("2d");e instanceof ImageData?r.putImageData(e,0,0):r.drawImage(e,0,0,e.width,e.height)}return t.width>2048||t.height>2048?t.toDataURL("image/jpeg",.6):t.toDataURL("image/png")}var n={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY};if(void 0!==this.image){var i=this.image;void 0===i.uuid&&(i.uuid=Ct.generateUUID()),t||void 0!==e.images[i.uuid]||(e.images[i.uuid]={uuid:i.uuid,url:r(i)}),n.image=i.uuid}return t||(e.textures[this.uuid]=n),n},dispose:function(){this.dispatchEvent({type:"dispose"})},transformUv:function(e){if(this.mapping===me){if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case Te:e.x=e.x-Math.floor(e.x);break;case _e:e.x=e.x<0?0:1;break;case Se:1===Math.abs(Math.floor(e.x)%2)?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x)}if(e.y<0||e.y>1)switch(this.wrapT){case Te:e.y=e.y-Math.floor(e.y);break;case _e:e.y=e.y<0?0:1;break;case Se:1===Math.abs(Math.floor(e.y)%2)?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y)}this.flipY&&(e.y=1-e.y)}}}),Object.defineProperty(Nt.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}}),Object.assign(Ut.prototype,{isVector4:!0,set:function(e,t,r,n){return this.x=e,this.y=t,this.z=r,this.w=n,this},setScalar:function(e){return this.x=e,this.y=e,this.z=e,this.w=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setZ:function(e){return this.z=e,this},setW:function(e){return this.w=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this},add:function(e,t){return void 0!==t?(n.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this)},addScalar:function(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this},sub:function(e,t){return void 0!==t?(n.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this)},subScalar:function(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this},multiplyScalar:function(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this},applyMatrix4:function(e){var t=this.x,r=this.y,n=this.z,i=this.w,a=e.elements;return this.x=a[0]*t+a[4]*r+a[8]*n+a[12]*i,this.y=a[1]*t+a[5]*r+a[9]*n+a[13]*i,this.z=a[2]*t+a[6]*r+a[10]*n+a[14]*i,this.w=a[3]*t+a[7]*r+a[11]*n+a[15]*i,this},divideScalar:function(e){return this.multiplyScalar(1/e)},setAxisAngleFromQuaternion:function(e){this.w=2*Math.acos(e.w);var t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this},setAxisAngleFromRotationMatrix:function(e){var t,r,n,i,a=.01,o=.1,s=e.elements,l=s[0],u=s[4],c=s[8],h=s[1],d=s[5],f=s[9],p=s[2],m=s[6],g=s[10];if(Math.abs(u-h)<a&&Math.abs(c-p)<a&&Math.abs(f-m)<a){if(Math.abs(u+h)<o&&Math.abs(c+p)<o&&Math.abs(f+m)<o&&Math.abs(l+d+g-3)<o)return this.set(1,0,0,0),this;t=Math.PI;var v=(l+1)/2,y=(d+1)/2,b=(g+1)/2,E=(u+h)/4,x=(c+p)/4,w=(f+m)/4;return v>y&&v>b?v<a?(r=0,n=.707106781,i=.707106781):(n=E/(r=Math.sqrt(v)),i=x/r):y>b?y<a?(r=.707106781,n=0,i=.707106781):(r=E/(n=Math.sqrt(y)),i=w/n):b<a?(r=.707106781,n=.707106781,i=0):(r=x/(i=Math.sqrt(b)),n=w/i),this.set(r,n,i,t),this}var T=Math.sqrt((m-f)*(m-f)+(c-p)*(c-p)+(h-u)*(h-u));return Math.abs(T)<.001&&(T=1),this.x=(m-f)/T,this.y=(c-p)/T,this.z=(h-u)/T,this.w=Math.acos((l+d+g-1)/2),this},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this},clampScalar:function(){var e,t;return function(r,n){return void 0===e&&(e=new Ut,t=new Ut),e.set(r,r,r,r),t.set(n,n,n,n),this.clamp(e,t)}}(),clampLength:function(e,t){var r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(e){return this.normalize().multiplyScalar(e)},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this},lerpVectors:function(e,t,r){return this.subVectors(t,e).multiplyScalar(r).add(e)},equals:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e},fromBufferAttribute:function(e,t,r){return void 0!==r&&n.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}}),Dt.prototype=Object.assign(Object.create(t.prototype),{constructor:Dt,isWebGLRenderTarget:!0,setSize:function(e,t){this.width===e&&this.height===t||(this.width=e,this.height=t,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.width=e.width,this.height=e.height,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.depthTexture=e.depthTexture,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Ft.prototype=Object.create(Dt.prototype),Ft.prototype.constructor=Ft,Ft.prototype.isWebGLRenderTargetCube=!0,Bt.prototype=Object.create(Nt.prototype),Bt.prototype.constructor=Bt,Bt.prototype.isDataTexture=!0,zt.prototype=Object.create(Nt.prototype),zt.prototype.constructor=zt,zt.prototype.isCubeTexture=!0,Object.defineProperty(zt.prototype,"images",{get:function(){return this.image},set:function(e){this.image=e}});var jt=new Nt,Vt=new zt;function Gt(){this.seq=[],this.map={}}var Wt=[],qt=[],Xt=new Float32Array(16),Yt=new Float32Array(9);function Zt(e,t,r){var n=e[0];if(n<=0||n>0)return e;var i=t*r,a=Wt[i];if(void 0===a&&(a=new Float32Array(i),Wt[i]=a),0!==t){n.toArray(a,0);for(var o=1,s=0;o!==t;++o)s+=r,e[o].toArray(a,s)}return a}function Kt(e,t){var r=qt[t];void 0===r&&(r=new Int32Array(t),qt[t]=r);for(var n=0;n!==t;++n)r[n]=e.allocTextureUnit();return r}function Qt(e,t){e.uniform1f(this.addr,t)}function Jt(e,t){e.uniform1i(this.addr,t)}function $t(e,t){void 0===t.x?e.uniform2fv(this.addr,t):e.uniform2f(this.addr,t.x,t.y)}function er(e,t){void 0!==t.x?e.uniform3f(this.addr,t.x,t.y,t.z):void 0!==t.r?e.uniform3f(this.addr,t.r,t.g,t.b):e.uniform3fv(this.addr,t)}function tr(e,t){void 0===t.x?e.uniform4fv(this.addr,t):e.uniform4f(this.addr,t.x,t.y,t.z,t.w)}function rr(e,t){e.uniformMatrix2fv(this.addr,!1,t.elements||t)}function nr(e,t){void 0===t.elements?e.uniformMatrix3fv(this.addr,!1,t):(Yt.set(t.elements),e.uniformMatrix3fv(this.addr,!1,Yt))}function ir(e,t){void 0===t.elements?e.uniformMatrix4fv(this.addr,!1,t):(Xt.set(t.elements),e.uniformMatrix4fv(this.addr,!1,Xt))}function ar(e,t,r){var n=r.allocTextureUnit();e.uniform1i(this.addr,n),r.setTexture2D(t||jt,n)}function or(e,t,r){var n=r.allocTextureUnit();e.uniform1i(this.addr,n),r.setTextureCube(t||Vt,n)}function sr(e,t){e.uniform2iv(this.addr,t)}function lr(e,t){e.uniform3iv(this.addr,t)}function ur(e,t){e.uniform4iv(this.addr,t)}function cr(e){switch(e){case 5126:return Qt;case 35664:return $t;case 35665:return er;case 35666:return tr;case 35674:return rr;case 35675:return nr;case 35676:return ir;case 35678:case 36198:return ar;case 35680:return or;case 5124:case 35670:return Jt;case 35667:case 35671:return sr;case 35668:case 35672:return lr;case 35669:case 35673:return ur}}function hr(e,t){e.uniform1fv(this.addr,t)}function dr(e,t){e.uniform1iv(this.addr,t)}function fr(e,t){e.uniform2fv(this.addr,Zt(t,this.size,2))}function pr(e,t){e.uniform3fv(this.addr,Zt(t,this.size,3))}function mr(e,t){e.uniform4fv(this.addr,Zt(t,this.size,4))}function gr(e,t){e.uniformMatrix2fv(this.addr,!1,Zt(t,this.size,4))}function vr(e,t){e.uniformMatrix3fv(this.addr,!1,Zt(t,this.size,9))}function yr(e,t){e.uniformMatrix4fv(this.addr,!1,Zt(t,this.size,16))}function br(e,t,r){var n=t.length,i=Kt(r,n);e.uniform1iv(this.addr,i);for(var a=0;a!==n;++a)r.setTexture2D(t[a]||jt,i[a])}function Er(e,t,r){var n=t.length,i=Kt(r,n);e.uniform1iv(this.addr,i);for(var a=0;a!==n;++a)r.setTextureCube(t[a]||Vt,i[a])}function xr(e){switch(e){case 5126:return hr;case 35664:return fr;case 35665:return pr;case 35666:return mr;case 35674:return gr;case 35675:return vr;case 35676:return yr;case 35678:return br;case 35680:return Er;case 5124:case 35670:return dr;case 35667:case 35671:return sr;case 35668:case 35672:return lr;case 35669:case 35673:return ur}}function wr(e,t,r){this.id=e,this.addr=r,this.setValue=cr(t.type)}function Tr(e,t,r){this.id=e,this.addr=r,this.size=t.size,this.setValue=xr(t.type)}function _r(e){this.id=e,Gt.call(this)}_r.prototype.setValue=function(e,t){for(var r=this.seq,n=0,i=r.length;n!==i;++n){var a=r[n];a.setValue(e,t[a.id])}};var Sr=/([\w\d_]+)(\])?(\[|\.)?/g;function Mr(e,t){e.seq.push(t),e.map[t.id]=t}function Rr(e,t,r){var n=e.name,i=n.length;for(Sr.lastIndex=0;;){var a=Sr.exec(n),o=Sr.lastIndex,s=a[1],l="]"===a[2],u=a[3];if(l&&(s|=0),void 0===u||"["===u&&o+2===i){Mr(r,void 0===u?new wr(s,e,t):new Tr(s,e,t));break}var c=r.map[s];void 0===c&&Mr(r,c=new _r(s)),r=c}}function Ar(e,t,r){Gt.call(this),this.renderer=r;for(var n=e.getProgramParameter(t,e.ACTIVE_UNIFORMS),i=0;i<n;++i){var a=e.getActiveUniform(t,i),o=a.name;Rr(a,e.getUniformLocation(t,o),this)}}Ar.prototype.setValue=function(e,t,r){var n=this.map[t];void 0!==n&&n.setValue(e,r,this.renderer)},Ar.prototype.setOptional=function(e,t,r){var n=t[r];void 0!==n&&this.setValue(e,r,n)},Ar.upload=function(e,t,r,n){for(var i=0,a=t.length;i!==a;++i){var o=t[i],s=r[o.id];!1!==s.needsUpdate&&o.setValue(e,s.value,n)}},Ar.seqWithValue=function(e,t){for(var r=[],n=0,i=e.length;n!==i;++n){var a=e[n];a.id in t&&r.push(a)}return r};var Cr={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Lr(e,t,r){return void 0===t&&void 0===r?this.set(e):this.setRGB(e,t,r)}Object.assign(Lr.prototype,{isColor:!0,r:1,g:1,b:1,set:function(e){return e&&e.isColor?this.copy(e):"number"==typeof e?this.setHex(e):"string"==typeof e&&this.setStyle(e),this},setScalar:function(e){return this.r=e,this.g=e,this.b=e,this},setHex:function(e){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,this},setRGB:function(e,t,r){return this.r=e,this.g=t,this.b=r,this},setHSL:function(){function e(e,t,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?e+6*(t-e)*r:r<.5?t:r<2/3?e+6*(t-e)*(2/3-r):e}return function(t,r,n){if(t=Ct.euclideanModulo(t,1),r=Ct.clamp(r,0,1),n=Ct.clamp(n,0,1),0===r)this.r=this.g=this.b=n;else{var i=n<=.5?n*(1+r):n+r-n*r,a=2*n-i;this.r=e(a,i,t+1/3),this.g=e(a,i,t),this.b=e(a,i,t-1/3)}return this}}(),setStyle:function(e){function t(t){void 0!==t&&parseFloat(t)<1&&n.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}var r;if(r=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(e)){var i,a=r[1],o=r[2];switch(a){case"rgb":case"rgba":if(i=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(o))return this.r=Math.min(255,parseInt(i[1],10))/255,this.g=Math.min(255,parseInt(i[2],10))/255,this.b=Math.min(255,parseInt(i[3],10))/255,t(i[5]),this;if(i=/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(o))return this.r=Math.min(100,parseInt(i[1],10))/100,this.g=Math.min(100,parseInt(i[2],10))/100,this.b=Math.min(100,parseInt(i[3],10))/100,t(i[5]),this;break;case"hsl":case"hsla":if(i=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(o)){var s=parseFloat(i[1])/360,l=parseInt(i[2],10)/100,u=parseInt(i[3],10)/100;return t(i[5]),this.setHSL(s,l,u)}}}else if(r=/^\#([A-Fa-f0-9]+)$/.exec(e)){var c,h=(c=r[1]).length;if(3===h)return this.r=parseInt(c.charAt(0)+c.charAt(0),16)/255,this.g=parseInt(c.charAt(1)+c.charAt(1),16)/255,this.b=parseInt(c.charAt(2)+c.charAt(2),16)/255,this;if(6===h)return this.r=parseInt(c.charAt(0)+c.charAt(1),16)/255,this.g=parseInt(c.charAt(2)+c.charAt(3),16)/255,this.b=parseInt(c.charAt(4)+c.charAt(5),16)/255,this}return e&&e.length>0&&(void 0!==(c=Cr[e])?this.setHex(c):n.warn("THREE.Color: Unknown color "+e)),this},clone:function(){return new this.constructor(this.r,this.g,this.b)},copy:function(e){return this.r=e.r,this.g=e.g,this.b=e.b,this},copyGammaToLinear:function(e,t){return void 0===t&&(t=2),this.r=Math.pow(e.r,t),this.g=Math.pow(e.g,t),this.b=Math.pow(e.b,t),this},copyLinearToGamma:function(e,t){void 0===t&&(t=2);var r=t>0?1/t:1;return this.r=Math.pow(e.r,r),this.g=Math.pow(e.g,r),this.b=Math.pow(e.b,r),this},convertGammaToLinear:function(){var e=this.r,t=this.g,r=this.b;return this.r=e*e,this.g=t*t,this.b=r*r,this},convertLinearToGamma:function(){return this.r=Math.sqrt(this.r),this.g=Math.sqrt(this.g),this.b=Math.sqrt(this.b),this},getHex:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(e){var t,r,n=e||{h:0,s:0,l:0},i=this.r,a=this.g,o=this.b,s=Math.max(i,a,o),l=Math.min(i,a,o),u=(l+s)/2;if(l===s)t=0,r=0;else{var c=s-l;switch(r=u<=.5?c/(s+l):c/(2-s-l),s){case i:t=(a-o)/c+(a<o?6:0);break;case a:t=(o-i)/c+2;break;case o:t=(i-a)/c+4}t/=6}return n.h=t,n.s=r,n.l=u,n},getStyle:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"},offsetHSL:function(e,t,r){var n=this.getHSL();return n.h+=e,n.s+=t,n.l+=r,this.setHSL(n.h,n.s,n.l),this},add:function(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this},addColors:function(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this},addScalar:function(e){return this.r+=e,this.g+=e,this.b+=e,this},sub:function(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this},multiply:function(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this},multiplyScalar:function(e){return this.r*=e,this.g*=e,this.b*=e,this},lerp:function(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this},equals:function(e){return e.r===this.r&&e.g===this.g&&e.b===this.b},fromArray:function(e,t){return void 0===t&&(t=0),this.r=e[t],this.g=e[t+1],this.b=e[t+2],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e},toJSON:function(){return this.getHex()}});var Or={common:{diffuse:{value:new Lr(15658734)},opacity:{value:1},map:{value:null},uvTransform:{value:new Ht},alphaMap:{value:null}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new Lt(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Lr(16777215)}},lights:{ambientLightColor:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}}},points:{diffuse:{value:new Lr(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},uvTransform:{value:new Ht}}},Ir={merge:function(e){for(var t={},r=0;r<e.length;r++){var n=this.clone(e[r]);for(var i in n)t[i]=n[i]}return t},clone:function(e){var t={};for(var r in e)for(var n in t[r]={},e[r]){var i=e[r][n];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture)?t[r][n]=i.clone():Array.isArray(i)?t[r][n]=i.slice():t[r][n]=i}return t}},Pr={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif\n",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif\n",alphatest_fragment:"#ifdef ALPHATEST\n\tif ( diffuseColor.a < ALPHATEST ) discard;\n#endif\n",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\n\t#endif\n#endif\n",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"\nvec3 transformed = vec3( position );\n",beginnormal_vertex:"\nvec3 objectNormal = vec3( normal );\n",bsdfs:"float punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\tif( decayExponent > 0.0 ) {\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tfloat maxDistanceCutoffFactor = pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\treturn distanceFalloff * maxDistanceCutoffFactor;\n#else\n\t\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n#endif\n\t}\n\treturn 1.0;\n}\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\n}\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\treturn 1.0 / ( gl * gv );\n}\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNL = saturate( dot( geometry.normal, incidentLight.direction ) );\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( G * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE  = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS  = 0.5 / LUT_SIZE;\n\tfloat theta = acos( dot( N, V ) );\n\tvec2 uv = vec2(\n\t\tsqrt( saturate( roughness ) ),\n\t\tsaturate( theta / ( 0.5 * PI ) ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.86267 + (0.49788 + 0.01436 * y ) * y;\n\tfloat b = 3.45068 + (4.18814 + y) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = (x > 0.0) ? v : 0.5 * inversesqrt( 1.0 - x * x ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tvec3 result = vec3( LTC_ClippedSphereFormFactor( vectorFormFactor ) );\n\treturn result;\n}\nvec3 BRDF_Specular_GGX_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 AB = vec2( -1.04, 1.04 ) * a004 + r.zw;\n\treturn specularColor * AB.x + AB.y;\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n}\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\n\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\n}\n",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 );\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif\n",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; ++ i ) {\n\t\tvec4 plane = clippingPlanes[ i ];\n\t\tif ( dot( vViewPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t\t\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; ++ i ) {\n\t\t\tvec4 plane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vViewPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\tif ( clipped ) discard;\n\t\n\t#endif\n#endif\n",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\t#if ! defined( PHYSICAL ) && ! defined( PHONG )\n\t\tvarying vec3 vViewPosition;\n\t#endif\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif\n",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )\n\tvarying vec3 vViewPosition;\n#endif\n",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n",color_fragment:"#ifdef USE_COLOR\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif\n",color_pars_vertex:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif",color_vertex:"#ifdef USE_COLOR\n\tvColor.xyz = color.xyz;\n#endif",common:"#define PI 3.14159265359\n#define PI2 6.28318530718\n#define PI_HALF 1.5707963267949\n#define RECIPROCAL_PI 0.31830988618\n#define RECIPROCAL_PI2 0.15915494\n#define LOG2 1.442695\n#define EPSILON 1e-6\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#define whiteCompliment(a) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract(sin(sn) * c);\n}\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\n\treturn - distance * planeNormal + point;\n}\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n}\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\treturn dot( weights, color.rgb );\n}\n",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n#define cubeUV_textureSize (1024.0)\nint getFaceFromDirection(vec3 direction) {\n\tvec3 absDirection = abs(direction);\n\tint face = -1;\n\tif( absDirection.x > absDirection.z ) {\n\t\tif(absDirection.x > absDirection.y )\n\t\t\tface = direction.x > 0.0 ? 0 : 3;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\telse {\n\t\tif(absDirection.z > absDirection.y )\n\t\t\tface = direction.z > 0.0 ? 2 : 5;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\treturn face;\n}\n#define cubeUV_maxLods1  (log2(cubeUV_textureSize*0.25) - 1.0)\n#define cubeUV_rangeClamp (exp2((6.0 - 1.0) * 2.0))\nvec2 MipLevelInfo( vec3 vec, float roughnessLevel, float roughness ) {\n\tfloat scale = exp2(cubeUV_maxLods1 - roughnessLevel);\n\tfloat dxRoughness = dFdx(roughness);\n\tfloat dyRoughness = dFdy(roughness);\n\tvec3 dx = dFdx( vec * scale * dxRoughness );\n\tvec3 dy = dFdy( vec * scale * dyRoughness );\n\tfloat d = max( dot( dx, dx ), dot( dy, dy ) );\n\td = clamp(d, 1.0, cubeUV_rangeClamp);\n\tfloat mipLevel = 0.5 * log2(d);\n\treturn vec2(floor(mipLevel), fract(mipLevel));\n}\n#define cubeUV_maxLods2 (log2(cubeUV_textureSize*0.25) - 2.0)\n#define cubeUV_rcpTextureSize (1.0 / cubeUV_textureSize)\nvec2 getCubeUV(vec3 direction, float roughnessLevel, float mipLevel) {\n\tmipLevel = roughnessLevel > cubeUV_maxLods2 - 3.0 ? 0.0 : mipLevel;\n\tfloat a = 16.0 * cubeUV_rcpTextureSize;\n\tvec2 exp2_packed = exp2( vec2( roughnessLevel, mipLevel ) );\n\tvec2 rcp_exp2_packed = vec2( 1.0 ) / exp2_packed;\n\tfloat powScale = exp2_packed.x * exp2_packed.y;\n\tfloat scale = rcp_exp2_packed.x * rcp_exp2_packed.y * 0.25;\n\tfloat mipOffset = 0.75*(1.0 - rcp_exp2_packed.y) * rcp_exp2_packed.x;\n\tbool bRes = mipLevel == 0.0;\n\tscale =  bRes && (scale < a) ? a : scale;\n\tvec3 r;\n\tvec2 offset;\n\tint face = getFaceFromDirection(direction);\n\tfloat rcpPowScale = 1.0 / powScale;\n\tif( face == 0) {\n\t\tr = vec3(direction.x, -direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 1) {\n\t\tr = vec3(direction.y, direction.x, direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 2) {\n\t\tr = vec3(direction.z, direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 3) {\n\t\tr = vec3(direction.x, direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\telse if( face == 4) {\n\t\tr = vec3(direction.y, direction.x, -direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\telse {\n\t\tr = vec3(direction.z, -direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\tr = normalize(r);\n\tfloat texelOffset = 0.5 * cubeUV_rcpTextureSize;\n\tvec2 s = ( r.yz / abs( r.x ) + vec2( 1.0 ) ) * 0.5;\n\tvec2 base = offset + vec2( texelOffset );\n\treturn base + s * ( scale - 2.0 * texelOffset );\n}\n#define cubeUV_maxLods3 (log2(cubeUV_textureSize*0.25) - 3.0)\nvec4 textureCubeUV(vec3 reflectedDirection, float roughness ) {\n\tfloat roughnessVal = roughness* cubeUV_maxLods3;\n\tfloat r1 = floor(roughnessVal);\n\tfloat r2 = r1 + 1.0;\n\tfloat t = fract(roughnessVal);\n\tvec2 mipInfo = MipLevelInfo(reflectedDirection, r1, roughness);\n\tfloat s = mipInfo.y;\n\tfloat level0 = mipInfo.x;\n\tfloat level1 = level0 + 1.0;\n\tlevel1 = level1 > 5.0 ? 5.0 : level1;\n\tlevel0 += min( floor( s + 0.5 ), 5.0 );\n\tvec2 uv_10 = getCubeUV(reflectedDirection, r1, level0);\n\tvec4 color10 = envMapTexelToLinear(texture2D(envMap, uv_10));\n\tvec2 uv_20 = getCubeUV(reflectedDirection, r2, level0);\n\tvec4 color20 = envMapTexelToLinear(texture2D(envMap, uv_20));\n\tvec4 result = mix(color10, color20, t);\n\treturn vec4(result.rgb, 1.0);\n}\n#endif\n",defaultnormal_vertex:"vec3 transformedNormal = normalMatrix * objectNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif\n",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, uv ).x * displacementScale + displacementBias );\n#endif\n",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif\n",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif\n",encodings_fragment:"  gl_FragColor = linearToOutputTexel( gl_FragColor );\n",encodings_pars_fragment:"\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.xyz, vec3( gammaFactor ) ), value.w );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.xyz, vec3( 1.0 / gammaFactor ) ), value.w );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.w );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.w );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n\tfloat maxComponent = max( max( value.r, value.g ), value.b );\n\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.xyz * value.w * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.x, max( value.g, value.b ) );\n\tfloat M      = clamp( maxRGB / maxRange, 0.0, 1.0 );\n\tM            = ceil( M * 255.0 ) / 255.0;\n\treturn vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.x, max( value.g, value.b ) );\n\tfloat D      = max( maxRange / maxRGB, 1.0 );\n\tD            = min( floor( D ) / 255.0, 1.0 );\n\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value )  {\n\tvec3 Xp_Y_XYZp = value.rgb * cLogLuvM;\n\tXp_Y_XYZp = max(Xp_Y_XYZp, vec3(1e-6, 1e-6, 1e-6));\n\tvec4 vResult;\n\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n\tvResult.w = fract(Le);\n\tvResult.z = (Le - (floor(vResult.w*255.0))/255.0)/255.0;\n\treturn vResult;\n}\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n\tfloat Le = value.z * 255.0 + value.w;\n\tvec3 Xp_Y_XYZp;\n\tXp_Y_XYZp.y = exp2((Le - 127.0) / 2.0);\n\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n\tvec3 vRGB = Xp_Y_XYZp.rgb * cLogLuvInverseM;\n\treturn vec4( max(vRGB, 0.0), 1.0 );\n}\n",envmap_fragment:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\tvec2 sampleUV;\n\t\treflectVec = normalize( reflectVec );\n\t\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\tvec4 envColor = texture2D( envMap, sampleUV );\n\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\treflectVec = normalize( reflectVec );\n\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) );\n\t\tvec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\tenvColor = envMapTexelToLinear( envColor );\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif\n",envmap_pars_fragment:"#if defined( USE_ENVMAP ) || defined( PHYSICAL )\n\tuniform float reflectivity;\n\tuniform float envMapIntensity;\n#endif\n#ifdef USE_ENVMAP\n\t#if ! defined( PHYSICAL ) && ( defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) )\n\t\tvarying vec3 vWorldPosition;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\tuniform float flipEnvMap;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( PHYSICAL )\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif\n",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif\n",envmap_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif\n",fog_vertex:"\n#ifdef USE_FOG\nfogDepth = -mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n  varying float fogDepth;\n#endif\n",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = whiteCompliment( exp2( - fogDensity * fogDensity * fogDepth * fogDepth * LOG2 ) );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, fogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif\n",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float fogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif\n",gradientmap_pars_fragment:"#ifdef TOON\n\tuniform sampler2D gradientMap;\n\tvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\t\tfloat dotNL = dot( normal, lightDirection );\n\t\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t\t#ifdef USE_GRADIENTMAP\n\t\t\treturn texture2D( gradientMap, coord ).rgb;\n\t\t#else\n\t\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t\t#endif\n\t}\n#endif\n",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\treflectedLight.indirectDiffuse += PI * texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n#endif\n",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\n#if NUM_POINT_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_DIR_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvLightFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n\t\t#endif\n\t}\n#endif\n",lights_pars:"uniform vec3 ambientLightColor;\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treturn irradiance;\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tdirectLight.color = directionalLight.color;\n\t\tdirectLight.direction = directionalLight.direction;\n\t\tdirectLight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t\tfloat shadowCameraNear;\n\t\tfloat shadowCameraFar;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tdirectLight.color = pointLight.color;\n\t\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\n\t\tdirectLight.visible = ( directLight.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight  ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tfloat angleCos = dot( directLight.direction, spotLight.direction );\n\t\tif ( angleCos > spotLight.coneCos ) {\n\t\t\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\t\tdirectLight.color = spotLight.color;\n\t\t\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tdirectLight.visible = true;\n\t\t} else {\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t\tdirectLight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltcMat;\tuniform sampler2D ltcMag;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n\t\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tirradiance *= PI;\n\t\t#endif\n\t\treturn irradiance;\n\t}\n#endif\n#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\n\t\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\tvec4 envMapColor = textureCubeUV( queryVec, 1.0 );\n\t\t#else\n\t\t\tvec4 envMapColor = vec4( 0.0 );\n\t\t#endif\n\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t}\n\tfloat getSpecularMIPLevel( const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\tfloat maxMIPLevelScalar = float( maxMIPLevel );\n\t\tfloat desiredMIPLevel = maxMIPLevelScalar + 0.79248 - 0.5 * log2( pow2( blinnShininessExponent ) + 1.0 );\n\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n\t}\n\tvec3 getLightProbeIndirectRadiance( const in GeometricContext geometry, const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( -geometry.viewDir, geometry.normal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( -geometry.viewDir, geometry.normal, refractionRatio );\n\t\t#endif\n\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\tfloat specularMIPLevel = getSpecularMIPLevel( blinnShininessExponent, maxMIPLevel );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\tvec4 envMapColor = textureCubeUV(queryReflectVec, BlinnExponentToGGXRoughness(blinnShininessExponent));\n\t\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\t\tvec2 sampleUV;\n\t\t\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\t\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0,0.0,1.0 ) );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#endif\n\t\treturn envMapColor.rgb * envMapIntensity;\n\t}\n#endif\n",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;\n",lights_phong_pars_fragment:"varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct BlinnPhongMaterial {\n\tvec3\tdiffuseColor;\n\tvec3\tspecularColor;\n\tfloat\tspecularShininess;\n\tfloat\tspecularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\t#ifdef TOON\n\t\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\t#else\n\t\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\t\tvec3 irradiance = dotNL * directLight.color;\n\t#endif\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)\n",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nmaterial.specularRoughness = clamp( roughnessFactor, 0.04, 1.0 );\n#ifdef STANDARD\n\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.clearCoat = saturate( clearCoat );\tmaterial.clearCoatRoughness = clamp( clearCoatRoughness, 0.04, 1.0 );\n#endif\n",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3\tdiffuseColor;\n\tfloat\tspecularRoughness;\n\tvec3\tspecularColor;\n\t#ifndef STANDARD\n\t\tfloat clearCoat;\n\t\tfloat clearCoatRoughness;\n\t#endif\n};\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\nfloat clearCoatDHRApprox( const in float roughness, const in float dotNL ) {\n\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.specularRoughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos - halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos + halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos + halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos - halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tfloat norm = texture2D( ltcMag, uv ).a;\n\t\tvec4 t = texture2D( ltcMat, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3(   1,   0, t.y ),\n\t\t\tvec3(   0, t.z,   0 ),\n\t\t\tvec3( t.w,   0, t.x )\n\t\t);\n\t\treflectedLight.directSpecular += lightColor * material.specularColor * norm * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\t#ifndef STANDARD\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR = 0.0;\n\t#endif\n\treflectedLight.directSpecular += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry, material.specularColor, material.specularRoughness );\n\treflectedLight.directDiffuse += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\t#ifndef STANDARD\n\t\treflectedLight.directSpecular += irradiance * material.clearCoat * BRDF_Specular_GGX( directLight, geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\t#endif\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 clearCoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t#ifndef STANDARD\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\tfloat dotNL = dotNV;\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR = 0.0;\n\t#endif\n\treflectedLight.indirectSpecular += ( 1.0 - clearCoatDHR ) * radiance * BRDF_Specular_GGX_Environment( geometry, material.specularColor, material.specularRoughness );\n\t#ifndef STANDARD\n\t\treflectedLight.indirectSpecular += clearCoatRadiance * material.clearCoat * BRDF_Specular_GGX_Environment( geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\t#endif\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\n#define Material_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.specularRoughness )\n#define Material_ClearCoat_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.clearCoatRoughness )\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}\n",lights_template:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = normalize( vViewPosition );\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( pointLight.shadow, directLight.visible ) ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( spotLight.shadow, directLight.visible ) ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( directionalLight.shadow, directLight.visible ) ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\t#ifdef USE_LIGHTMAP\n\t\tvec3 lightMapIrradiance = texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t}\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tirradiance += getLightProbeIndirectIrradiance( geometry, 8 );\n\t#endif\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tvec3 radiance = getLightProbeIndirectRadiance( geometry, Material_BlinnShininessExponent( material ), 8 );\n\t#ifndef STANDARD\n\t\tvec3 clearCoatRadiance = getLightProbeIndirectRadiance( geometry, Material_ClearCoat_BlinnShininessExponent( material ), 8 );\n\t#else\n\t\tvec3 clearCoatRadiance = vec3( 0.0 );\n\t#endif\n\tRE_IndirectSpecular( radiance, clearCoatRadiance, geometry, material, reflectedLight );\n#endif\n",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#ifdef USE_LOGDEPTHBUF\n\tuniform float logDepthBufFC;\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t#endif\n#endif\n",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t#endif\n\tuniform float logDepthBufFC;\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t#else\n\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\tgl_Position.z *= gl_Position.w;\n\t#endif\n#endif\n",map_fragment:"#ifdef USE_MAP\n\tvec4 texelColor = texture2D( map, vUv );\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n#endif\n",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n",map_particle_fragment:"#ifdef USE_MAP\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n\tvec4 mapTexel = texture2D( map, uv );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n#endif\n",map_particle_pars_fragment:"#ifdef USE_MAP\n\tuniform mat3 uvTransform;\n\tuniform sampler2D map;\n#endif\n",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif\n",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal += ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];\n\tobjectNormal += ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];\n\tobjectNormal += ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];\n\tobjectNormal += ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];\n#endif\n",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\t#ifndef USE_MORPHNORMALS\n\tuniform float morphTargetInfluences[ 8 ];\n\t#else\n\tuniform float morphTargetInfluences[ 4 ];\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];\n\ttransformed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];\n\ttransformed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];\n\ttransformed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];\n\t#ifndef USE_MORPHNORMALS\n\ttransformed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];\n\ttransformed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];\n\ttransformed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];\n\ttransformed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];\n\t#endif\n#endif\n",normal_fragment:"#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t#endif\n#endif\n#ifdef USE_NORMALMAP\n\tnormal = perturbNormal2Arb( -vViewPosition, normal );\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n#endif\n",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {\n\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tvec3 S = normalize( q0 * st1.t - q1 * st0.t );\n\t\tvec3 T = normalize( -q0 * st1.s + q1 * st0.s );\n\t\tvec3 N = normalize( surf_norm );\n\t\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t\tmapN.xy = normalScale * mapN.xy;\n\t\tmat3 tsn = mat3( S, T, N );\n\t\treturn normalize( tsn * mapN );\n\t}\n#endif\n",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn (( near + viewZ ) * far ) / (( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}\n",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif\n",project_vertex:"vec4 mvPosition = modelViewMatrix * vec4( transformed, 1.0 );\ngl_Position = projectionMatrix * mvPosition;\n",dithering_fragment:"#if defined( DITHERING )\n  gl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif\n",dithering_pars_fragment:"#if defined( DITHERING )\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif\n",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif\n",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tfloat texture2DShadowLerp( sampler2D depths, vec2 size, vec2 uv, float compare ) {\n\t\tconst vec2 offset = vec2( 0.0, 1.0 );\n\t\tvec2 texelSize = vec2( 1.0 ) / size;\n\t\tvec2 centroidUV = floor( uv * size + 0.5 ) / size;\n\t\tfloat lb = texture2DCompare( depths, centroidUV + texelSize * offset.xx, compare );\n\t\tfloat lt = texture2DCompare( depths, centroidUV + texelSize * offset.xy, compare );\n\t\tfloat rb = texture2DCompare( depths, centroidUV + texelSize * offset.yx, compare );\n\t\tfloat rt = texture2DCompare( depths, centroidUV + texelSize * offset.yy, compare );\n\t\tvec2 f = fract( uv * size + 0.5 );\n\t\tfloat a = mix( lb, lt, f.y );\n\t\tfloat b = mix( rb, rt, f.y );\n\t\tfloat c = mix( a, b, f.x );\n\t\treturn c;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tshadow = (\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif\n",shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n#endif\n",shadowmap_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n#endif\n",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\tDirectionalLight directionalLight;\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tshadow *= bool( directionalLight.shadow ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\tSpotLight spotLight;\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tshadow *= bool( spotLight.shadow ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\tPointLight pointLight;\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tshadow *= bool( pointLight.shadow ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#endif\n\t#endif\n\treturn shadow;\n}\n",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif\n",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif\n",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n#endif\n",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n  gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif\n",tonemapping_pars_fragment:"#ifndef saturate\n\t#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nuniform float toneMappingWhitePoint;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\n#define Uncharted2Helper( x ) max( ( ( x * ( 0.15 * x + 0.10 * 0.50 ) + 0.20 * 0.02 ) / ( x * ( 0.15 * x + 0.50 ) + 0.20 * 0.30 ) ) - 0.02 / 0.30, vec3( 0.0 ) )\nvec3 Uncharted2ToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( Uncharted2Helper( color ) / Uncharted2Helper( vec3( toneMappingWhitePoint ) ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\n",uv_pars_fragment:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n\tuniform mat3 uvTransform;\n#endif\n",uv_vertex:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = uv2;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )\n\tvec4 worldPosition = modelMatrix * vec4( transformed, 1.0 );\n#endif\n",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldPosition;\nvoid main() {\n\tgl_FragColor = textureCube( tCube, vec3( tFlip * vWorldPosition.x, vWorldPosition.yz ) );\n\tgl_FragColor.a *= opacity;\n}\n",cube_vert:"varying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvWorldPosition = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}\n",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( gl_FragCoord.z ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( gl_FragCoord.z );\n\t#endif\n}\n",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n}\n",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}\n",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}\n",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldPosition );\n\tvec2 sampleUV;\n\tsampleUV.y = asin( clamp( direction.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\tsampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n}\n",equirect_vert:"varying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvWorldPosition = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}\n",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\tvLineDistance = scale * lineDistance;\n\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}\n",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\treflectedLight.indirectDiffuse += texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_ENVMAP\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}\n",meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <bsdfs>\n#include <lights_pars>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\treflectedLight.indirectDiffuse = getAmbientLightIrradiance( ambientLightColor );\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}\n",meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_template>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}\n",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",meshphysical_frag:"#define PHYSICAL\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifndef STANDARD\n\tuniform float clearCoat;\n\tuniform float clearCoatRoughness;\n#endif\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <lights_pars>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_template>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}\n",meshphysical_vert:"#define PHYSICAL\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",normal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\nvoid main() {\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n}\n",normal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}\n",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#ifdef USE_SIZEATTENUATION\n\t\tgl_PointSize = size * ( scale / - mvPosition.z );\n\t#else\n\t\tgl_PointSize = size;\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <fog_fragment>\n}\n",shadow_vert:"#include <fog_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n"},Hr={basic:{uniforms:Ir.merge([Or.common,Or.specularmap,Or.envmap,Or.aomap,Or.lightmap,Or.fog]),vertexShader:Pr.meshbasic_vert,fragmentShader:Pr.meshbasic_frag},lambert:{uniforms:Ir.merge([Or.common,Or.specularmap,Or.envmap,Or.aomap,Or.lightmap,Or.emissivemap,Or.fog,Or.lights,{emissive:{value:new Lr(0)}}]),vertexShader:Pr.meshlambert_vert,fragmentShader:Pr.meshlambert_frag},phong:{uniforms:Ir.merge([Or.common,Or.specularmap,Or.envmap,Or.aomap,Or.lightmap,Or.emissivemap,Or.bumpmap,Or.normalmap,Or.displacementmap,Or.gradientmap,Or.fog,Or.lights,{emissive:{value:new Lr(0)},specular:{value:new Lr(1118481)},shininess:{value:30}}]),vertexShader:Pr.meshphong_vert,fragmentShader:Pr.meshphong_frag},standard:{uniforms:Ir.merge([Or.common,Or.envmap,Or.aomap,Or.lightmap,Or.emissivemap,Or.bumpmap,Or.normalmap,Or.displacementmap,Or.roughnessmap,Or.metalnessmap,Or.fog,Or.lights,{emissive:{value:new Lr(0)},roughness:{value:.5},metalness:{value:.5},envMapIntensity:{value:1}}]),vertexShader:Pr.meshphysical_vert,fragmentShader:Pr.meshphysical_frag},points:{uniforms:Ir.merge([Or.points,Or.fog]),vertexShader:Pr.points_vert,fragmentShader:Pr.points_frag},dashed:{uniforms:Ir.merge([Or.common,Or.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Pr.linedashed_vert,fragmentShader:Pr.linedashed_frag},depth:{uniforms:Ir.merge([Or.common,Or.displacementmap]),vertexShader:Pr.depth_vert,fragmentShader:Pr.depth_frag},normal:{uniforms:Ir.merge([Or.common,Or.bumpmap,Or.normalmap,Or.displacementmap,{opacity:{value:1}}]),vertexShader:Pr.normal_vert,fragmentShader:Pr.normal_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Pr.cube_vert,fragmentShader:Pr.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Pr.equirect_vert,fragmentShader:Pr.equirect_frag},distanceRGBA:{uniforms:Ir.merge([Or.common,Or.displacementmap,{referencePosition:{value:new Pt},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Pr.distanceRGBA_vert,fragmentShader:Pr.distanceRGBA_frag},shadow:{uniforms:Ir.merge([Or.lights,Or.fog,{color:{value:new Lr(0)},opacity:{value:1}}]),vertexShader:Pr.shadow_vert,fragmentShader:Pr.shadow_frag}};function kr(e,t){this.min=void 0!==e?e:new Lt(1/0,1/0),this.max=void 0!==t?t:new Lt(-1/0,-1/0)}function Nr(e,t,r,n,i){var a,o,s,l,u,c,h,d;function f(){var e=new Float32Array([-1,-1,0,0,1,-1,1,0,1,1,1,1,-1,1,0,1]),n=new Uint16Array([0,1,2,0,2,3]);a=t.createBuffer(),o=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,a),t.bufferData(t.ARRAY_BUFFER,e,t.STATIC_DRAW),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,o),t.bufferData(t.ELEMENT_ARRAY_BUFFER,n,t.STATIC_DRAW),h=t.createTexture(),d=t.createTexture(),r.bindTexture(t.TEXTURE_2D,h),t.texImage2D(t.TEXTURE_2D,0,t.RGB,16,16,0,t.RGB,t.UNSIGNED_BYTE,null),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),r.bindTexture(t.TEXTURE_2D,d),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,16,16,0,t.RGBA,t.UNSIGNED_BYTE,null),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),s={vertexShader:["uniform lowp int renderType;","uniform vec3 screenPosition;","uniform vec2 scale;","uniform float rotation;","uniform sampler2D occlusionMap;","attribute vec2 position;","attribute vec2 uv;","varying vec2 vUV;","varying float vVisibility;","void main() {","\tvUV = uv;","\tvec2 pos = position;","\tif ( renderType == 2 ) {","\t\tvec4 visibility = texture2D( occlusionMap, vec2( 0.1, 0.1 ) );","\t\tvisibility += texture2D( occlusionMap, vec2( 0.5, 0.1 ) );","\t\tvisibility += texture2D( occlusionMap, vec2( 0.9, 0.1 ) );","\t\tvisibility += texture2D( occlusionMap, vec2( 0.9, 0.5 ) );","\t\tvisibility += texture2D( occlusionMap, vec2( 0.9, 0.9 ) );","\t\tvisibility += texture2D( occlusionMap, vec2( 0.5, 0.9 ) );","\t\tvisibility += texture2D( occlusionMap, vec2( 0.1, 0.9 ) );","\t\tvisibility += texture2D( occlusionMap, vec2( 0.1, 0.5 ) );","\t\tvisibility += texture2D( occlusionMap, vec2( 0.5, 0.5 ) );","\t\tvVisibility =        visibility.r / 9.0;","\t\tvVisibility *= 1.0 - visibility.g / 9.0;","\t\tvVisibility *=       visibility.b / 9.0;","\t\tvVisibility *= 1.0 - visibility.a / 9.0;","\t\tpos.x = cos( rotation ) * position.x - sin( rotation ) * position.y;","\t\tpos.y = sin( rotation ) * position.x + cos( rotation ) * position.y;","\t}","\tgl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );","}"].join("\n"),fragmentShader:["uniform lowp int renderType;","uniform sampler2D map;","uniform float opacity;","uniform vec3 color;","varying vec2 vUV;","varying float vVisibility;","void main() {","\tif ( renderType == 0 ) {","\t\tgl_FragColor = vec4( 1.0, 0.0, 1.0, 0.0 );","\t} else if ( renderType == 1 ) {","\t\tgl_FragColor = texture2D( map, vUV );","\t} else {","\t\tvec4 texture = texture2D( map, vUV );","\t\ttexture.a *= opacity * vVisibility;","\t\tgl_FragColor = texture;","\t\tgl_FragColor.rgb *= color;","\t}","}"].join("\n")},l=p(s),u={vertex:t.getAttribLocation(l,"position"),uv:t.getAttribLocation(l,"uv")},c={renderType:t.getUniformLocation(l,"renderType"),map:t.getUniformLocation(l,"map"),occlusionMap:t.getUniformLocation(l,"occlusionMap"),opacity:t.getUniformLocation(l,"opacity"),color:t.getUniformLocation(l,"color"),scale:t.getUniformLocation(l,"scale"),rotation:t.getUniformLocation(l,"rotation"),screenPosition:t.getUniformLocation(l,"screenPosition")}}function p(e){var r=t.createProgram(),n=t.createShader(t.FRAGMENT_SHADER),a=t.createShader(t.VERTEX_SHADER),o="precision "+i.precision+" float;\n";return t.shaderSource(n,o+e.fragmentShader),t.shaderSource(a,o+e.vertexShader),t.compileShader(n),t.compileShader(a),t.attachShader(r,n),t.attachShader(r,a),t.linkProgram(r),r}this.render=function(e,i,s,p){if(0!==e.length){var m=new Pt,g=p.w/p.z,v=.5*p.z,y=.5*p.w,b=16/p.w,E=new Lt(b*g,b),x=new Pt(1,1,0),w=new Lt(1,1),T=new kr;T.min.set(p.x,p.y),T.max.set(p.x+(p.z-16),p.y+(p.w-16)),void 0===l&&f(),r.useProgram(l),r.initAttributes(),r.enableAttribute(u.vertex),r.enableAttribute(u.uv),r.disableUnusedAttributes(),t.uniform1i(c.occlusionMap,0),t.uniform1i(c.map,1),t.bindBuffer(t.ARRAY_BUFFER,a),t.vertexAttribPointer(u.vertex,2,t.FLOAT,!1,16,0),t.vertexAttribPointer(u.uv,2,t.FLOAT,!1,16,8),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,o),r.disable(t.CULL_FACE),r.buffers.depth.setMask(!1);for(var _=0,S=e.length;_<S;_++){b=16/p.w,E.set(b*g,b);var M=e[_];if(m.set(M.matrixWorld.elements[12],M.matrixWorld.elements[13],M.matrixWorld.elements[14]),m.applyMatrix4(s.matrixWorldInverse),m.applyMatrix4(s.projectionMatrix),x.copy(m),w.x=p.x+x.x*v+v-8,w.y=p.y+x.y*y+y-8,!0===T.containsPoint(w)){r.activeTexture(t.TEXTURE0),r.bindTexture(t.TEXTURE_2D,null),r.activeTexture(t.TEXTURE1),r.bindTexture(t.TEXTURE_2D,h),t.copyTexImage2D(t.TEXTURE_2D,0,t.RGB,w.x,w.y,16,16,0),t.uniform1i(c.renderType,0),t.uniform2f(c.scale,E.x,E.y),t.uniform3f(c.screenPosition,x.x,x.y,x.z),r.disable(t.BLEND),r.enable(t.DEPTH_TEST),t.drawElements(t.TRIANGLES,6,t.UNSIGNED_SHORT,0),r.activeTexture(t.TEXTURE0),r.bindTexture(t.TEXTURE_2D,d),t.copyTexImage2D(t.TEXTURE_2D,0,t.RGBA,w.x,w.y,16,16,0),t.uniform1i(c.renderType,1),r.disable(t.DEPTH_TEST),r.activeTexture(t.TEXTURE1),r.bindTexture(t.TEXTURE_2D,h),t.drawElements(t.TRIANGLES,6,t.UNSIGNED_SHORT,0),M.positionScreen.copy(x),M.customUpdateCallback?M.customUpdateCallback(M):M.updateLensFlares(),t.uniform1i(c.renderType,2),r.enable(t.BLEND);for(var R=0,A=M.lensFlares.length;R<A;R++){var C=M.lensFlares[R];C.opacity>.001&&C.scale>.001&&(x.x=C.x,x.y=C.y,x.z=C.z,b=C.size*C.scale/p.w,E.x=b*g,E.y=b,t.uniform3f(c.screenPosition,x.x,x.y,x.z),t.uniform2f(c.scale,E.x,E.y),t.uniform1f(c.rotation,C.rotation),t.uniform1f(c.opacity,C.opacity),t.uniform3f(c.color,C.color.r,C.color.g,C.color.b),r.setBlending(C.blending,C.blendEquation,C.blendSrc,C.blendDst),n.setTexture2D(C.texture,1),t.drawElements(t.TRIANGLES,6,t.UNSIGNED_SHORT,0))}}}r.enable(t.CULL_FACE),r.enable(t.DEPTH_TEST),r.buffers.depth.setMask(!0),r.reset()}}}function Ur(e,t,r,n,i,a,o,s,l){Nt.call(this,e,t,r,n,i,a,o,s,l),this.needsUpdate=!0}function Dr(e,t,r,n,i){var a,o,s,l,u,c,h=new Pt,d=new It,f=new Pt;function p(){var e=new Float32Array([-.5,-.5,0,0,.5,-.5,1,0,.5,.5,1,1,-.5,.5,0,1]),r=new Uint16Array([0,1,2,0,2,3]);a=t.createBuffer(),o=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,a),t.bufferData(t.ARRAY_BUFFER,e,t.STATIC_DRAW),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,o),t.bufferData(t.ELEMENT_ARRAY_BUFFER,r,t.STATIC_DRAW),s=m(),l={position:t.getAttribLocation(s,"position"),uv:t.getAttribLocation(s,"uv")},u={uvOffset:t.getUniformLocation(s,"uvOffset"),uvScale:t.getUniformLocation(s,"uvScale"),rotation:t.getUniformLocation(s,"rotation"),scale:t.getUniformLocation(s,"scale"),color:t.getUniformLocation(s,"color"),map:t.getUniformLocation(s,"map"),opacity:t.getUniformLocation(s,"opacity"),modelViewMatrix:t.getUniformLocation(s,"modelViewMatrix"),projectionMatrix:t.getUniformLocation(s,"projectionMatrix"),fogType:t.getUniformLocation(s,"fogType"),fogDensity:t.getUniformLocation(s,"fogDensity"),fogNear:t.getUniformLocation(s,"fogNear"),fogFar:t.getUniformLocation(s,"fogFar"),fogColor:t.getUniformLocation(s,"fogColor"),fogDepth:t.getUniformLocation(s,"fogDepth"),alphaTest:t.getUniformLocation(s,"alphaTest")};var n=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");n.width=8,n.height=8;var i=n.getContext("2d");i.fillStyle="white",i.fillRect(0,0,8,8),c=new Ur(n)}function m(){var e=t.createProgram(),r=t.createShader(t.VERTEX_SHADER),n=t.createShader(t.FRAGMENT_SHADER);return t.shaderSource(r,["precision "+i.precision+" float;","#define SHADER_NAME SpriteMaterial","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform float rotation;","uniform vec2 scale;","uniform vec2 uvOffset;","uniform vec2 uvScale;","attribute vec2 position;","attribute vec2 uv;","varying vec2 vUV;","varying float fogDepth;","void main() {","\tvUV = uvOffset + uv * uvScale;","\tvec2 alignedPosition = position * scale;","\tvec2 rotatedPosition;","\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;","\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;","\tvec4 mvPosition;","\tmvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );","\tmvPosition.xy += rotatedPosition;","\tgl_Position = projectionMatrix * mvPosition;","\tfogDepth = - mvPosition.z;","}"].join("\n")),t.shaderSource(n,["precision "+i.precision+" float;","#define SHADER_NAME SpriteMaterial","uniform vec3 color;","uniform sampler2D map;","uniform float opacity;","uniform int fogType;","uniform vec3 fogColor;","uniform float fogDensity;","uniform float fogNear;","uniform float fogFar;","uniform float alphaTest;","varying vec2 vUV;","varying float fogDepth;","void main() {","\tvec4 texture = texture2D( map, vUV );","\tgl_FragColor = vec4( color * texture.xyz, texture.a * opacity );","\tif ( gl_FragColor.a < alphaTest ) discard;","\tif ( fogType > 0 ) {","\t\tfloat fogFactor = 0.0;","\t\tif ( fogType == 1 ) {","\t\t\tfogFactor = smoothstep( fogNear, fogFar, fogDepth );","\t\t} else {","\t\t\tconst float LOG2 = 1.442695;","\t\t\tfogFactor = exp2( - fogDensity * fogDensity * fogDepth * fogDepth * LOG2 );","\t\t\tfogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );","\t\t}","\t\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );","\t}","}"].join("\n")),t.compileShader(r),t.compileShader(n),t.attachShader(e,r),t.attachShader(e,n),t.linkProgram(e),e}function g(e,t){return e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:t.id-e.id}this.render=function(i,m,v){if(0!==i.length){void 0===s&&p(),r.useProgram(s),r.initAttributes(),r.enableAttribute(l.position),r.enableAttribute(l.uv),r.disableUnusedAttributes(),r.disable(t.CULL_FACE),r.enable(t.BLEND),t.bindBuffer(t.ARRAY_BUFFER,a),t.vertexAttribPointer(l.position,2,t.FLOAT,!1,16,0),t.vertexAttribPointer(l.uv,2,t.FLOAT,!1,16,8),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,o),t.uniformMatrix4fv(u.projectionMatrix,!1,v.projectionMatrix.elements),r.activeTexture(t.TEXTURE0),t.uniform1i(u.map,0);var y=0,b=0,E=m.fog;E?(t.uniform3f(u.fogColor,E.color.r,E.color.g,E.color.b),E.isFog?(t.uniform1f(u.fogNear,E.near),t.uniform1f(u.fogFar,E.far),t.uniform1i(u.fogType,1),y=1,b=1):E.isFogExp2&&(t.uniform1f(u.fogDensity,E.density),t.uniform1i(u.fogType,2),y=2,b=2)):(t.uniform1i(u.fogType,0),y=0,b=0);for(var x=0,w=i.length;x<w;x++)(_=i[x]).modelViewMatrix.multiplyMatrices(v.matrixWorldInverse,_.matrixWorld),_.z=-_.modelViewMatrix.elements[14];i.sort(g);var T=[];for(x=0,w=i.length;x<w;x++){var _,S=(_=i[x]).material;if(!1!==S.visible){_.onBeforeRender(e,m,v,void 0,S,void 0),t.uniform1f(u.alphaTest,S.alphaTest),t.uniformMatrix4fv(u.modelViewMatrix,!1,_.modelViewMatrix.elements),_.matrixWorld.decompose(h,d,f),T[0]=f.x,T[1]=f.y;var M=0;m.fog&&S.fog&&(M=b),y!==M&&(t.uniform1i(u.fogType,M),y=M),null!==S.map?(t.uniform2f(u.uvOffset,S.map.offset.x,S.map.offset.y),t.uniform2f(u.uvScale,S.map.repeat.x,S.map.repeat.y)):(t.uniform2f(u.uvOffset,0,0),t.uniform2f(u.uvScale,1,1)),t.uniform1f(u.opacity,S.opacity),t.uniform3f(u.color,S.color.r,S.color.g,S.color.b),t.uniform1f(u.rotation,S.rotation),t.uniform2fv(u.scale,T),r.setBlending(S.blending,S.blendEquation,S.blendSrc,S.blendDst,S.blendEquationAlpha,S.blendSrcAlpha,S.blendDstAlpha,S.premultipliedAlpha),r.buffers.depth.setTest(S.depthTest),r.buffers.depth.setMask(S.depthWrite),r.buffers.color.setMask(S.colorWrite),n.setTexture2D(S.map||c,0),t.drawElements(t.TRIANGLES,6,t.UNSIGNED_SHORT,0),_.onAfterRender(e,m,v,void 0,S,void 0)}}r.enable(t.CULL_FACE),r.reset()}}}Hr.physical={uniforms:Ir.merge([Hr.standard.uniforms,{clearCoat:{value:0},clearCoatRoughness:{value:0}}]),vertexShader:Pr.meshphysical_vert,fragmentShader:Pr.meshphysical_frag},Object.assign(kr.prototype,{set:function(e,t){return this.min.copy(e),this.max.copy(t),this},setFromPoints:function(e){this.makeEmpty();for(var t=0,r=e.length;t<r;t++)this.expandByPoint(e[t]);return this},setFromCenterAndSize:function(){var e=new Lt;return function(t,r){var n=e.copy(r).multiplyScalar(.5);return this.min.copy(t).sub(n),this.max.copy(t).add(n),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.min.copy(e.min),this.max.copy(e.max),this},makeEmpty:function(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},getCenter:function(e){var t=e||new Lt;return this.isEmpty()?t.set(0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(e){var t=e||new Lt;return this.isEmpty()?t.set(0,0):t.subVectors(this.max,this.min)},expandByPoint:function(e){return this.min.min(e),this.max.max(e),this},expandByVector:function(e){return this.min.sub(e),this.max.add(e),this},expandByScalar:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this},containsPoint:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)},containsBox:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y},getParameter:function(e,t){return(t||new Lt).set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))},intersectsBox:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)},clampPoint:function(e,t){return(t||new Lt).copy(e).clamp(this.min,this.max)},distanceToPoint:function(){var e=new Lt;return function(t){return e.copy(t).clamp(this.min,this.max).sub(t).length()}}(),intersect:function(e){return this.min.max(e.min),this.max.min(e.max),this},union:function(e){return this.min.min(e.min),this.max.max(e.max),this},translate:function(e){return this.min.add(e),this.max.add(e),this},equals:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}),Ur.prototype=Object.create(Nt.prototype),Ur.prototype.constructor=Ur;var Fr,Br,zr,jr,Vr,Gr,Wr,qr=0;function Xr(){Object.defineProperty(this,"id",{value:qr++}),this.uuid=Ct.generateUUID(),this.name="",this.type="Material",this.fog=!0,this.lights=!0,this.blending=I,this.side=T,this.flatShading=!1,this.vertexColors=A,this.opacity=1,this.transparent=!1,this.blendSrc=q,this.blendDst=X,this.blendEquation=U,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=re,this.depthTest=!0,this.depthWrite=!0,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaTest=0,this.premultipliedAlpha=!1,this.overdraw=0,this.visible=!0,this.userData={},this.needsUpdate=!0}function Yr(e){Xr.call(this),this.type="MeshDepthMaterial",this.depthPacking=Rt,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.setValues(e)}function Zr(e){Xr.call(this),this.type="MeshDistanceMaterial",this.referencePosition=new Pt,this.nearDistance=1,this.farDistance=1e3,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.lights=!1,this.setValues(e)}function Kr(e,t){this.min=void 0!==e?e:new Pt(1/0,1/0,1/0),this.max=void 0!==t?t:new Pt(-1/0,-1/0,-1/0)}function Qr(e,t){this.center=void 0!==e?e:new Pt,this.radius=void 0!==t?t:0}function Jr(e,t){this.normal=void 0!==e?e:new Pt(1,0,0),this.constant=void 0!==t?t:0}function $r(e,t,r,n,i,a){this.planes=[void 0!==e?e:new Jr,void 0!==t?t:new Jr,void 0!==r?r:new Jr,void 0!==n?n:new Jr,void 0!==i?i:new Jr,void 0!==a?a:new Jr]}function en(e,t,r){for(var i=new $r,a=new Ot,o=new Lt,s=new Lt(r,r),l=new Pt,u=new Pt,c=1,h=2,d=1+(c|h),f=new Array(d),p=new Array(d),m={},g=[new Pt(1,0,0),new Pt(-1,0,0),new Pt(0,0,1),new Pt(0,0,-1),new Pt(0,1,0),new Pt(0,-1,0)],v=[new Pt(0,1,0),new Pt(0,1,0),new Pt(0,1,0),new Pt(0,1,0),new Pt(0,0,1),new Pt(0,0,-1)],y=[new Ut,new Ut,new Ut,new Ut,new Ut,new Ut],b=0;b!==d;++b){var E=0!=(b&c),w=0!=(b&h),M=new Yr({depthPacking:At,morphTargets:E,skinning:w});f[b]=M;var R=new Zr({morphTargets:E,skinning:w});p[b]=R}var A=this;function C(t,r,i,a,o,s){var l=t.geometry,u=null,d=f,g=t.customDepthMaterial;if(i&&(d=p,g=t.customDistanceMaterial),g)u=g;else{var v=!1;r.morphTargets&&(l&&l.isBufferGeometry?v=l.morphAttributes&&l.morphAttributes.position&&l.morphAttributes.position.length>0:l&&l.isGeometry&&(v=l.morphTargets&&l.morphTargets.length>0)),t.isSkinnedMesh&&!1===r.skinning&&n.warn("THREE.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:",t);var y=t.isSkinnedMesh&&r.skinning,b=0;v&&(b|=c),y&&(b|=h),u=d[b]}if(e.localClippingEnabled&&!0===r.clipShadows&&0!==r.clippingPlanes.length){var E=u.uuid,x=r.uuid,w=m[E];void 0===w&&(w={},m[E]=w);var M=w[x];void 0===M&&(M=u.clone(),w[x]=M),u=M}u.visible=r.visible,u.wireframe=r.wireframe;var R=r.side;return A.renderSingleSided&&R==S&&(R=T),A.renderReverseSided&&(R===T?R=_:R===_&&(R=T)),u.side=R,u.clipShadows=r.clipShadows,u.clippingPlanes=r.clippingPlanes,u.clipIntersection=r.clipIntersection,u.wireframeLinewidth=r.wireframeLinewidth,u.linewidth=r.linewidth,i&&u.isMeshDistanceMaterial&&(u.referencePosition.copy(a),u.nearDistance=o,u.farDistance=s),u}function L(r,n,a,o){if(!1!==r.visible){if(r.layers.test(n.layers)&&(r.isMesh||r.isLine||r.isPoints)&&r.castShadow&&(!r.frustumCulled||i.intersectsObject(r))){r.modelViewMatrix.multiplyMatrices(a.matrixWorldInverse,r.matrixWorld);var s=t.update(r),l=r.material;if(Array.isArray(l))for(var c=s.groups,h=0,d=c.length;h<d;h++){var f=c[h],p=l[f.materialIndex];if(p&&p.visible){var m=C(r,p,o,u,a.near,a.far);e.renderBufferDirect(a,null,s,m,r,f)}}else l.visible&&(m=C(r,l,o,u,a.near,a.far),e.renderBufferDirect(a,null,s,m,r,null))}for(var g=r.children,v=0,y=g.length;v<y;v++)L(g[v],n,a,o)}}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=x,this.renderReverseSided=!0,this.renderSingleSided=!0,this.render=function(t,r,c){if(!1!==A.enabled&&(!1!==A.autoUpdate||!1!==A.needsUpdate)&&0!==t.length){var h,d=e.context,f=e.state;f.disable(d.BLEND),f.buffers.color.setClear(1,1,1,1),f.buffers.depth.setTest(!0),f.setScissorTest(!1);for(var p=0,m=t.length;p<m;p++){var b=t[p],E=b.shadow,x=b&&b.isPointLight;if(void 0!==E){var w=E.camera;if(o.copy(E.mapSize),o.min(s),x){var T=o.x,_=o.y;y[0].set(2*T,_,T,_),y[1].set(0,_,T,_),y[2].set(3*T,_,T,_),y[3].set(T,_,T,_),y[4].set(3*T,0,T,_),y[5].set(T,0,T,_),o.x*=4,o.y*=2}if(null===E.map){var S={minFilter:Me,magFilter:Me,format:qe};E.map=new Dt(o.x,o.y,S),E.map.texture.name=b.name+".shadowMap",w.updateProjectionMatrix()}E.isSpotLightShadow&&E.update(b);var M=E.map,R=E.matrix;u.setFromMatrixPosition(b.matrixWorld),w.position.copy(u),x?(h=6,R.makeTranslation(-u.x,-u.y,-u.z)):(h=1,l.setFromMatrixPosition(b.target.matrixWorld),w.lookAt(l),w.updateMatrixWorld(),R.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),R.multiply(w.projectionMatrix),R.multiply(w.matrixWorldInverse)),e.setRenderTarget(M),e.clear();for(var C=0;C<h;C++){if(x){l.copy(w.position),l.add(g[C]),w.up.copy(v[C]),w.lookAt(l),w.updateMatrixWorld();var O=y[C];f.viewport(O)}a.multiplyMatrices(w.projectionMatrix,w.matrixWorldInverse),i.setFromMatrix(a),L(r,c,w,x)}}else n.warn("THREE.WebGLShadowMap:",b,"has no shadow.")}A.needsUpdate=!1}}}function tn(e){var t={};function r(t,r){var i=t.array,a=t.dynamic?e.DYNAMIC_DRAW:e.STATIC_DRAW,o=e.createBuffer();e.bindBuffer(r,o),e.bufferData(r,i,a),t.onUploadCallback();var s=e.FLOAT;return i instanceof Float32Array?s=e.FLOAT:i instanceof Float64Array?n.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):i instanceof Uint16Array?s=e.UNSIGNED_SHORT:i instanceof Int16Array?s=e.SHORT:i instanceof Uint32Array?s=e.UNSIGNED_INT:i instanceof Int32Array?s=e.INT:i instanceof Int8Array?s=e.BYTE:i instanceof Uint8Array&&(s=e.UNSIGNED_BYTE),{buffer:o,type:s,bytesPerElement:i.BYTES_PER_ELEMENT,version:t.version}}function i(t,r,i){var a=r.array,o=r.updateRange;e.bindBuffer(i,t),!1===r.dynamic?e.bufferData(i,a,e.STATIC_DRAW):-1===o.count?e.bufferSubData(i,0,a):0===o.count?n.error("THREE.WebGLObjects.updateBuffer: dynamic THREE.BufferAttribute marked as needsUpdate but updateRange.count is 0, ensure you are using set methods or updating manually."):(e.bufferSubData(i,o.offset*a.BYTES_PER_ELEMENT,a.subarray(o.offset,o.offset+o.count)),o.count=-1)}function a(e){return e.isInterleavedBufferAttribute&&(e=e.data),t[e.uuid]}function o(r){r.isInterleavedBufferAttribute&&(r=r.data);var n=t[r.uuid];n&&(e.deleteBuffer(n.buffer),delete t[r.uuid])}function s(e,n){e.isInterleavedBufferAttribute&&(e=e.data);var a=t[e.uuid];void 0===a?t[e.uuid]=r(e,n):a.version<e.version&&(i(a.buffer,e,n),a.version=e.version)}return{get:a,remove:o,update:s}}function rn(e,t,r,n){this._x=e||0,this._y=t||0,this._z=r||0,this._order=n||rn.DefaultOrder}function nn(){this.mask=1}Xr.prototype=Object.assign(Object.create(t.prototype),{constructor:Xr,isMaterial:!0,onBeforeCompile:function(){},setValues:function(e){if(void 0!==e)for(var t in e){var r=e[t];if(void 0!==r)if("shading"!==t){var i=this[t];void 0!==i?i&&i.isColor?i.set(r):i&&i.isVector3&&r&&r.isVector3?i.copy(r):this[t]="overdraw"===t?Number(r):r:n.warn("THREE."+this.type+": '"+t+"' is not a property of this material.")}else n.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=r===M;else n.warn("THREE.Material: '"+t+"' parameter is undefined.")}},toJSON:function(e){var t=void 0===e||"string"==typeof e;t&&(e={textures:{},images:{}});var r={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function n(e){var t=[];for(var r in e){var n=e[r];delete n.metadata,t.push(n)}return t}if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),this.color&&this.color.isColor&&(r.color=this.color.getHex()),void 0!==this.roughness&&(r.roughness=this.roughness),void 0!==this.metalness&&(r.metalness=this.metalness),this.emissive&&this.emissive.isColor&&(r.emissive=this.emissive.getHex()),1!==this.emissiveIntensity&&(r.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(r.specular=this.specular.getHex()),void 0!==this.shininess&&(r.shininess=this.shininess),void 0!==this.clearCoat&&(r.clearCoat=this.clearCoat),void 0!==this.clearCoatRoughness&&(r.clearCoatRoughness=this.clearCoatRoughness),this.map&&this.map.isTexture&&(r.map=this.map.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(r.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(r.lightMap=this.lightMap.toJSON(e).uuid),this.bumpMap&&this.bumpMap.isTexture&&(r.bumpMap=this.bumpMap.toJSON(e).uuid,r.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(r.normalMap=this.normalMap.toJSON(e).uuid,r.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(r.displacementMap=this.displacementMap.toJSON(e).uuid,r.displacementScale=this.displacementScale,r.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(r.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(r.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(r.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(r.specularMap=this.specularMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(r.envMap=this.envMap.toJSON(e).uuid,r.reflectivity=this.reflectivity),this.gradientMap&&this.gradientMap.isTexture&&(r.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.size&&(r.size=this.size),void 0!==this.sizeAttenuation&&(r.sizeAttenuation=this.sizeAttenuation),this.blending!==I&&(r.blending=this.blending),!0===this.flatShading&&(r.flatShading=this.flatShading),this.side!==T&&(r.side=this.side),this.vertexColors!==A&&(r.vertexColors=this.vertexColors),this.opacity<1&&(r.opacity=this.opacity),!0===this.transparent&&(r.transparent=this.transparent),r.depthFunc=this.depthFunc,r.depthTest=this.depthTest,r.depthWrite=this.depthWrite,0!==this.rotation&&(r.rotation=this.rotation),1!==this.linewidth&&(r.linewidth=this.linewidth),void 0!==this.dashSize&&(r.dashSize=this.dashSize),void 0!==this.gapSize&&(r.gapSize=this.gapSize),void 0!==this.scale&&(r.scale=this.scale),!0===this.dithering&&(r.dithering=!0),this.alphaTest>0&&(r.alphaTest=this.alphaTest),!0===this.premultipliedAlpha&&(r.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(r.wireframe=this.wireframe),this.wireframeLinewidth>1&&(r.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(r.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(r.wireframeLinejoin=this.wireframeLinejoin),!0===this.morphTargets&&(r.morphTargets=!0),!0===this.skinning&&(r.skinning=!0),!1===this.visible&&(r.visible=!1),"{}"!==JSON.stringify(this.userData)&&(r.userData=this.userData),t){var i=n(e.textures),a=n(e.images);i.length>0&&(r.textures=i),a.length>0&&(r.images=a)}return r},clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.name=e.name,this.fog=e.fog,this.lights=e.lights,this.blending=e.blending,this.side=e.side,this.flatShading=e.flatShading,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.premultipliedAlpha=e.premultipliedAlpha,this.overdraw=e.overdraw,this.visible=e.visible,this.userData=JSON.parse(JSON.stringify(e.userData)),this.clipShadows=e.clipShadows,this.clipIntersection=e.clipIntersection;var t=e.clippingPlanes,r=null;if(null!==t){var n=t.length;r=new Array(n);for(var i=0;i!==n;++i)r[i]=t[i].clone()}return this.clippingPlanes=r,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Yr.prototype=Object.create(Xr.prototype),Yr.prototype.constructor=Yr,Yr.prototype.isMeshDepthMaterial=!0,Yr.prototype.copy=function(e){return Xr.prototype.copy.call(this,e),this.depthPacking=e.depthPacking,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this},Zr.prototype=Object.create(Xr.prototype),Zr.prototype.constructor=Zr,Zr.prototype.isMeshDistanceMaterial=!0,Zr.prototype.copy=function(e){return Xr.prototype.copy.call(this,e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this},Object.assign(Kr.prototype,{isBox3:!0,set:function(e,t){return this.min.copy(e),this.max.copy(t),this},setFromArray:function(e){for(var t=1/0,r=1/0,n=1/0,i=-1/0,a=-1/0,o=-1/0,s=0,l=e.length;s<l;s+=3){var u=e[s],c=e[s+1],h=e[s+2];u<t&&(t=u),c<r&&(r=c),h<n&&(n=h),u>i&&(i=u),c>a&&(a=c),h>o&&(o=h)}return this.min.set(t,r,n),this.max.set(i,a,o),this},setFromBufferAttribute:function(e){for(var t=1/0,r=1/0,n=1/0,i=-1/0,a=-1/0,o=-1/0,s=0,l=e.count;s<l;s++){var u=e.getX(s),c=e.getY(s),h=e.getZ(s);u<t&&(t=u),c<r&&(r=c),h<n&&(n=h),u>i&&(i=u),c>a&&(a=c),h>o&&(o=h)}return this.min.set(t,r,n),this.max.set(i,a,o),this},setFromPoints:function(e){this.makeEmpty();for(var t=0,r=e.length;t<r;t++)this.expandByPoint(e[t]);return this},setFromCenterAndSize:function(){var e=new Pt;return function(t,r){var n=e.copy(r).multiplyScalar(.5);return this.min.copy(t).sub(n),this.max.copy(t).add(n),this}}(),setFromObject:function(e){return this.makeEmpty(),this.expandByObject(e)},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.min.copy(e.min),this.max.copy(e.max),this},makeEmpty:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},getCenter:function(e){var t=e||new Pt;return this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(e){var t=e||new Pt;return this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)},expandByPoint:function(e){return this.min.min(e),this.max.max(e),this},expandByVector:function(e){return this.min.sub(e),this.max.add(e),this},expandByScalar:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this},expandByObject:function(){var e,t,r,n=new Pt;function i(i){var a=i.geometry;if(void 0!==a)if(a.isGeometry){var o=a.vertices;for(t=0,r=o.length;t<r;t++)n.copy(o[t]),n.applyMatrix4(i.matrixWorld),e.expandByPoint(n)}else if(a.isBufferGeometry){var s=a.attributes.position;if(void 0!==s)for(t=0,r=s.count;t<r;t++)n.fromBufferAttribute(s,t).applyMatrix4(i.matrixWorld),e.expandByPoint(n)}}return function(t){return e=this,t.updateMatrixWorld(!0),t.traverse(i),this}}(),containsPoint:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)},containsBox:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z},getParameter:function(e,t){return(t||new Pt).set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))},intersectsBox:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)},intersectsSphere:(Wr=new Pt,function(e){return this.clampPoint(e.center,Wr),Wr.distanceToSquared(e.center)<=e.radius*e.radius}),intersectsPlane:function(e){var t,r;return e.normal.x>0?(t=e.normal.x*this.min.x,r=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,r=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,r+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,r+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,r+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,r+=e.normal.z*this.min.z),t<=e.constant&&r>=e.constant},clampPoint:function(e,t){return(t||new Pt).copy(e).clamp(this.min,this.max)},distanceToPoint:function(){var e=new Pt;return function(t){return e.copy(t).clamp(this.min,this.max).sub(t).length()}}(),getBoundingSphere:function(){var e=new Pt;return function(t){var r=t||new Qr;return this.getCenter(r.center),r.radius=.5*this.getSize(e).length(),r}}(),intersect:function(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this},union:function(e){return this.min.min(e.min),this.max.max(e.max),this},applyMatrix4:(Gr=[new Pt,new Pt,new Pt,new Pt,new Pt,new Pt,new Pt,new Pt],function(e){return this.isEmpty()||(Gr[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Gr[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Gr[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Gr[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Gr[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Gr[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Gr[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Gr[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Gr)),this}),translate:function(e){return this.min.add(e),this.max.add(e),this},equals:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}),Object.assign(Qr.prototype,{set:function(e,t){return this.center.copy(e),this.radius=t,this},setFromPoints:(Vr=new Kr,function(e,t){var r=this.center;void 0!==t?r.copy(t):Vr.setFromPoints(e).getCenter(r);for(var n=0,i=0,a=e.length;i<a;i++)n=Math.max(n,r.distanceToSquared(e[i]));return this.radius=Math.sqrt(n),this}),clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.center.copy(e.center),this.radius=e.radius,this},empty:function(){return this.radius<=0},containsPoint:function(e){return e.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(e){return e.distanceTo(this.center)-this.radius},intersectsSphere:function(e){var t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t},intersectsBox:function(e){return e.intersectsSphere(this)},intersectsPlane:function(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius},clampPoint:function(e,t){var r=this.center.distanceToSquared(e),n=t||new Pt;return n.copy(e),r>this.radius*this.radius&&(n.sub(this.center).normalize(),n.multiplyScalar(this.radius).add(this.center)),n},getBoundingBox:function(e){var t=e||new Kr;return t.set(this.center,this.center),t.expandByScalar(this.radius),t},applyMatrix4:function(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this},translate:function(e){return this.center.add(e),this},equals:function(e){return e.center.equals(this.center)&&e.radius===this.radius}}),Object.assign(Jr.prototype,{set:function(e,t){return this.normal.copy(e),this.constant=t,this},setComponents:function(e,t,r,n){return this.normal.set(e,t,r),this.constant=n,this},setFromNormalAndCoplanarPoint:function(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this},setFromCoplanarPoints:function(){var e=new Pt,t=new Pt;return function(r,n,i){var a=e.subVectors(i,n).cross(t.subVectors(r,n)).normalize();return this.setFromNormalAndCoplanarPoint(a,r),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.normal.copy(e.normal),this.constant=e.constant,this},normalize:function(){var e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this},negate:function(){return this.constant*=-1,this.normal.negate(),this},distanceToPoint:function(e){return this.normal.dot(e)+this.constant},distanceToSphere:function(e){return this.distanceToPoint(e.center)-e.radius},projectPoint:function(e,t){return(t||new Pt).copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)},intersectLine:function(){var e=new Pt;return function(t,r){var n=r||new Pt,i=t.delta(e),a=this.normal.dot(i);if(0===a)return 0===this.distanceToPoint(t.start)?n.copy(t.start):void 0;var o=-(t.start.dot(this.normal)+this.constant)/a;return o<0||o>1?void 0:n.copy(i).multiplyScalar(o).add(t.start)}}(),intersectsLine:function(e){var t=this.distanceToPoint(e.start),r=this.distanceToPoint(e.end);return t<0&&r>0||r<0&&t>0},intersectsBox:function(e){return e.intersectsPlane(this)},intersectsSphere:function(e){return e.intersectsPlane(this)},coplanarPoint:function(e){return(e||new Pt).copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(){var e=new Pt,t=new Ht;return function(r,n){var i=n||t.getNormalMatrix(r),a=this.coplanarPoint(e).applyMatrix4(r),o=this.normal.applyMatrix3(i).normalize();return this.constant=-a.dot(o),this}}(),translate:function(e){return this.constant-=e.dot(this.normal),this},equals:function(e){return e.normal.equals(this.normal)&&e.constant===this.constant}}),Object.assign($r.prototype,{set:function(e,t,r,n,i,a){var o=this.planes;return o[0].copy(e),o[1].copy(t),o[2].copy(r),o[3].copy(n),o[4].copy(i),o[5].copy(a),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){for(var t=this.planes,r=0;r<6;r++)t[r].copy(e.planes[r]);return this},setFromMatrix:function(e){var t=this.planes,r=e.elements,n=r[0],i=r[1],a=r[2],o=r[3],s=r[4],l=r[5],u=r[6],c=r[7],h=r[8],d=r[9],f=r[10],p=r[11],m=r[12],g=r[13],v=r[14],y=r[15];return t[0].setComponents(o-n,c-s,p-h,y-m).normalize(),t[1].setComponents(o+n,c+s,p+h,y+m).normalize(),t[2].setComponents(o+i,c+l,p+d,y+g).normalize(),t[3].setComponents(o-i,c-l,p-d,y-g).normalize(),t[4].setComponents(o-a,c-u,p-f,y-v).normalize(),t[5].setComponents(o+a,c+u,p+f,y+v).normalize(),this},intersectsObject:(jr=new Qr,function(e){var t=e.geometry;return null===t.boundingSphere&&t.computeBoundingSphere(),jr.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(jr)}),intersectsSprite:function(){var e=new Qr;return function(t){return e.center.set(0,0,0),e.radius=.7071067811865476,e.applyMatrix4(t.matrixWorld),this.intersectsSphere(e)}}(),intersectsSphere:function(e){for(var t=this.planes,r=e.center,n=-e.radius,i=0;i<6;i++)if(t[i].distanceToPoint(r)<n)return!1;return!0},intersectsBox:(Br=new Pt,zr=new Pt,function(e){for(var t=this.planes,r=0;r<6;r++){var n=t[r];Br.x=n.normal.x>0?e.min.x:e.max.x,zr.x=n.normal.x>0?e.max.x:e.min.x,Br.y=n.normal.y>0?e.min.y:e.max.y,zr.y=n.normal.y>0?e.max.y:e.min.y,Br.z=n.normal.z>0?e.min.z:e.max.z,zr.z=n.normal.z>0?e.max.z:e.min.z;var i=n.distanceToPoint(Br),a=n.distanceToPoint(zr);if(i<0&&a<0)return!1}return!0}),containsPoint:function(e){for(var t=this.planes,r=0;r<6;r++)if(t[r].distanceToPoint(e)<0)return!1;return!0}}),rn.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"],rn.DefaultOrder="XYZ",Object.defineProperties(rn.prototype,{x:{get:function(){return this._x},set:function(e){this._x=e,this.onChangeCallback()}},y:{get:function(){return this._y},set:function(e){this._y=e,this.onChangeCallback()}},z:{get:function(){return this._z},set:function(e){this._z=e,this.onChangeCallback()}},order:{get:function(){return this._order},set:function(e){this._order=e,this.onChangeCallback()}}}),Object.assign(rn.prototype,{isEuler:!0,set:function(e,t,r,n){return this._x=e,this._y=t,this._z=r,this._order=n||this._order,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._order)},copy:function(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this.onChangeCallback(),this},setFromRotationMatrix:function(e,t,r){var i=Ct.clamp,a=e.elements,o=a[0],s=a[4],l=a[8],u=a[1],c=a[5],h=a[9],d=a[2],f=a[6],p=a[10];return"XYZ"===(t=t||this._order)?(this._y=Math.asin(i(l,-1,1)),Math.abs(l)<.99999?(this._x=Math.atan2(-h,p),this._z=Math.atan2(-s,o)):(this._x=Math.atan2(f,c),this._z=0)):"YXZ"===t?(this._x=Math.asin(-i(h,-1,1)),Math.abs(h)<.99999?(this._y=Math.atan2(l,p),this._z=Math.atan2(u,c)):(this._y=Math.atan2(-d,o),this._z=0)):"ZXY"===t?(this._x=Math.asin(i(f,-1,1)),Math.abs(f)<.99999?(this._y=Math.atan2(-d,p),this._z=Math.atan2(-s,c)):(this._y=0,this._z=Math.atan2(u,o))):"ZYX"===t?(this._y=Math.asin(-i(d,-1,1)),Math.abs(d)<.99999?(this._x=Math.atan2(f,p),this._z=Math.atan2(u,o)):(this._x=0,this._z=Math.atan2(-s,c))):"YZX"===t?(this._z=Math.asin(i(u,-1,1)),Math.abs(u)<.99999?(this._x=Math.atan2(-h,c),this._y=Math.atan2(-d,o)):(this._x=0,this._y=Math.atan2(l,p))):"XZY"===t?(this._z=Math.asin(-i(s,-1,1)),Math.abs(s)<.99999?(this._x=Math.atan2(f,c),this._y=Math.atan2(l,o)):(this._x=Math.atan2(-h,p),this._y=0)):n.warn("THREE.Euler: .setFromRotationMatrix() given unsupported order: "+t),this._order=t,!1!==r&&this.onChangeCallback(),this},setFromQuaternion:function(){var e=new Ot;return function(t,r,n){return e.makeRotationFromQuaternion(t),this.setFromRotationMatrix(e,r,n)}}(),setFromVector3:function(e,t){return this.set(e.x,e.y,e.z,t||this._order)},reorder:(Fr=new It,function(e){return Fr.setFromEuler(this),this.setFromQuaternion(Fr,e)}),equals:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order},fromArray:function(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this.onChangeCallback(),this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e},toVector3:function(e){return e?e.set(this._x,this._y,this._z):new Pt(this._x,this._y,this._z)},onChange:function(e){return this.onChangeCallback=e,this},onChangeCallback:function(){}}),Object.assign(nn.prototype,{set:function(e){this.mask=1<<e|0},enable:function(e){this.mask|=1<<e|0},toggle:function(e){this.mask^=1<<e|0},disable:function(e){this.mask&=~(1<<e|0)},test:function(e){return 0!=(this.mask&e.mask)}});var an,on,sn,ln,un=0;function cn(){Object.defineProperty(this,"id",{value:un++}),this.uuid=Ct.generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=cn.DefaultUp.clone();var e=new Pt,t=new rn,r=new It,n=new Pt(1,1,1);function i(){r.setFromEuler(t,!1)}function a(){t.setFromQuaternion(r,void 0,!1)}t.onChange(i),r.onChange(a),Object.defineProperties(this,{position:{enumerable:!0,value:e},rotation:{enumerable:!0,value:t},quaternion:{enumerable:!0,value:r},scale:{enumerable:!0,value:n},modelViewMatrix:{value:new Ot},normalMatrix:{value:new Ht}}),this.matrix=new Ot,this.matrixWorld=new Ot,this.matrixAutoUpdate=cn.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new nn,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.userData={}}function hn(){cn.call(this),this.type="Camera",this.matrixWorldInverse=new Ot,this.projectionMatrix=new Ot}function dn(e,t,r,n,i,a){hn.call(this),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=r,this.bottom=n,this.near=void 0!==i?i:.1,this.far=void 0!==a?a:2e3,this.updateProjectionMatrix()}function fn(e,t,r,n,i,a){this.a=e,this.b=t,this.c=r,this.normal=n&&n.isVector3?n:new Pt,this.vertexNormals=Array.isArray(n)?n:[],this.color=i&&i.isColor?i:new Lr,this.vertexColors=Array.isArray(i)?i:[],this.materialIndex=void 0!==a?a:0}cn.DefaultUp=new Pt(0,1,0),cn.DefaultMatrixAutoUpdate=!0,cn.prototype=Object.assign(Object.create(t.prototype),{constructor:cn,isObject3D:!0,onBeforeRender:function(){},onAfterRender:function(){},applyMatrix:function(e){this.matrix.multiplyMatrices(e,this.matrix),this.matrix.decompose(this.position,this.quaternion,this.scale)},applyQuaternion:function(e){return this.quaternion.premultiply(e),this},setRotationFromAxisAngle:function(e,t){this.quaternion.setFromAxisAngle(e,t)},setRotationFromEuler:function(e){this.quaternion.setFromEuler(e,!0)},setRotationFromMatrix:function(e){this.quaternion.setFromRotationMatrix(e)},setRotationFromQuaternion:function(e){this.quaternion.copy(e)},rotateOnAxis:(ln=new It,function(e,t){return ln.setFromAxisAngle(e,t),this.quaternion.multiply(ln),this}),rotateOnWorldAxis:function(){var e=new It;return function(t,r){return e.setFromAxisAngle(t,r),this.quaternion.premultiply(e),this}}(),rotateX:function(){var e=new Pt(1,0,0);return function(t){return this.rotateOnAxis(e,t)}}(),rotateY:function(){var e=new Pt(0,1,0);return function(t){return this.rotateOnAxis(e,t)}}(),rotateZ:function(){var e=new Pt(0,0,1);return function(t){return this.rotateOnAxis(e,t)}}(),translateOnAxis:function(){var e=new Pt;return function(t,r){return e.copy(t).applyQuaternion(this.quaternion),this.position.add(e.multiplyScalar(r)),this}}(),translateX:function(){var e=new Pt(1,0,0);return function(t){return this.translateOnAxis(e,t)}}(),translateY:function(){var e=new Pt(0,1,0);return function(t){return this.translateOnAxis(e,t)}}(),translateZ:function(){var e=new Pt(0,0,1);return function(t){return this.translateOnAxis(e,t)}}(),localToWorld:function(e){return e.applyMatrix4(this.matrixWorld)},worldToLocal:(sn=new Ot,function(e){return e.applyMatrix4(sn.getInverse(this.matrixWorld))}),lookAt:function(){var e=new Ot,t=new Pt;return function(r,n,i){r.isVector3?t.copy(r):t.set(r,n,i),this.isCamera?e.lookAt(this.position,t,this.up):e.lookAt(t,this.position,this.up),this.quaternion.setFromRotationMatrix(e)}}(),add:function(e){if(arguments.length>1){for(var t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(n.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(null!==e.parent&&e.parent.remove(e),e.parent=this,e.dispatchEvent({type:"added"}),this.children.push(e)):n.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)},remove:function(e){if(arguments.length>1){for(var t=0;t<arguments.length;t++)this.remove(arguments[t]);return this}var r=this.children.indexOf(e);return-1!==r&&(e.parent=null,e.dispatchEvent({type:"removed"}),this.children.splice(r,1)),this},getObjectById:function(e){return this.getObjectByProperty("id",e)},getObjectByName:function(e){return this.getObjectByProperty("name",e)},getObjectByProperty:function(e,t){if(this[e]===t)return this;for(var r=0,n=this.children.length;r<n;r++){var i=this.children[r].getObjectByProperty(e,t);if(void 0!==i)return i}},getWorldPosition:function(e){var t=e||new Pt;return this.updateMatrixWorld(!0),t.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:(an=new Pt,on=new Pt,function(e){var t=e||new It;return this.updateMatrixWorld(!0),this.matrixWorld.decompose(an,t,on),t}),getWorldRotation:function(){var e=new It;return function(t){var r=t||new rn;return this.getWorldQuaternion(e),r.setFromQuaternion(e,this.rotation.order,!1)}}(),getWorldScale:function(){var e=new Pt,t=new It;return function(r){var n=r||new Pt;return this.updateMatrixWorld(!0),this.matrixWorld.decompose(e,t,n),n}}(),getWorldDirection:function(){var e=new It;return function(t){var r=t||new Pt;return this.getWorldQuaternion(e),r.set(0,0,1).applyQuaternion(e)}}(),raycast:function(){},traverse:function(e){e(this);for(var t=this.children,r=0,n=t.length;r<n;r++)t[r].traverse(e)},traverseVisible:function(e){if(!1!==this.visible){e(this);for(var t=this.children,r=0,n=t.length;r<n;r++)t[r].traverseVisible(e)}},traverseAncestors:function(e){var t=this.parent;null!==t&&(e(t),t.traverseAncestors(e))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);for(var t=this.children,r=0,n=t.length;r<n;r++)t[r].updateMatrixWorld(e)},toJSON:function(e){var t=void 0===e||"string"==typeof e,r={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{}},r.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});var n={};function i(t,r){return void 0===t[r.uuid]&&(t[r.uuid]=r.toJSON(e)),r.uuid}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),!0===this.castShadow&&(n.castShadow=!0),!0===this.receiveShadow&&(n.receiveShadow=!0),!1===this.visible&&(n.visible=!1),"{}"!==JSON.stringify(this.userData)&&(n.userData=this.userData),n.matrix=this.matrix.toArray(),void 0!==this.geometry){n.geometry=i(e.geometries,this.geometry);var a=this.geometry.parameters;if(void 0!==a&&void 0!==a.shapes){var o=a.shapes;if(Array.isArray(o))for(var s=0,l=o.length;s<l;s++){var u=o[s];i(e.shapes,u)}else i(e.shapes,o)}}if(void 0!==this.material)if(Array.isArray(this.material)){var c=[];for(s=0,l=this.material.length;s<l;s++)c.push(i(e.materials,this.material[s]));n.material=c}else n.material=i(e.materials,this.material);if(this.children.length>0)for(n.children=[],s=0;s<this.children.length;s++)n.children.push(this.children[s].toJSON(e).object);if(t){var h=m(e.geometries),d=m(e.materials),f=m(e.textures),p=m(e.images);o=m(e.shapes),h.length>0&&(r.geometries=h),d.length>0&&(r.materials=d),f.length>0&&(r.textures=f),p.length>0&&(r.images=p),o.length>0&&(r.shapes=o)}return r.object=n,r;function m(e){var t=[];for(var r in e){var n=e[r];delete n.metadata,t.push(n)}return t}},clone:function(e){return(new this.constructor).copy(this,e)},copy:function(e,t){if(void 0===t&&(t=!0),this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),!0===t)for(var r=0;r<e.children.length;r++){var n=e.children[r];this.add(n.clone())}return this}}),hn.prototype=Object.assign(Object.create(cn.prototype),{constructor:hn,isCamera:!0,copy:function(e,t){return cn.prototype.copy.call(this,e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this},getWorldDirection:function(){var e=new It;return function(t){var r=t||new Pt;return this.getWorldQuaternion(e),r.set(0,0,-1).applyQuaternion(e)}}(),updateMatrixWorld:function(e){cn.prototype.updateMatrixWorld.call(this,e),this.matrixWorldInverse.getInverse(this.matrixWorld)},clone:function(){return(new this.constructor).copy(this)}}),dn.prototype=Object.assign(Object.create(hn.prototype),{constructor:dn,isOrthographicCamera:!0,copy:function(e,t){return hn.prototype.copy.call(this,e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this},setViewOffset:function(e,t,r,n,i,a){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=r,this.view.offsetY=n,this.view.width=i,this.view.height=a,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),r=(this.right+this.left)/2,n=(this.top+this.bottom)/2,i=r-e,a=r+e,o=n+t,s=n-t;if(null!==this.view&&this.view.enabled){var l=this.zoom/(this.view.width/this.view.fullWidth),u=this.zoom/(this.view.height/this.view.fullHeight),c=(this.right-this.left)/this.view.width,h=(this.top-this.bottom)/this.view.height;a=(i+=c*(this.view.offsetX/l))+c*(this.view.width/l),s=(o-=h*(this.view.offsetY/u))-h*(this.view.height/u)}this.projectionMatrix.makeOrthographic(i,a,o,s,this.near,this.far)},toJSON:function(e){var t=cn.prototype.toJSON.call(this,e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}),Object.assign(fn.prototype,{clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.a=e.a,this.b=e.b,this.c=e.c,this.normal.copy(e.normal),this.color.copy(e.color),this.materialIndex=e.materialIndex;for(var t=0,r=e.vertexNormals.length;t<r;t++)this.vertexNormals[t]=e.vertexNormals[t].clone();for(t=0,r=e.vertexColors.length;t<r;t++)this.vertexColors[t]=e.vertexColors[t].clone();return this}});var pn,mn=0;function gn(){Object.defineProperty(this,"id",{value:mn+=2}),this.uuid=Ct.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.elementsNeedUpdate=!1,this.verticesNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.lineDistancesNeedUpdate=!1,this.groupsNeedUpdate=!1}function vn(e,t,r){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.uuid=Ct.generateUUID(),this.name="",this.array=e,this.itemSize=t,this.count=void 0!==e?e.length/t:0,this.normalized=!0===r,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.onUploadCallback=function(){},this.version=0}function yn(e,t,r){vn.call(this,new Int8Array(e),t,r)}function bn(e,t,r){vn.call(this,new Uint8Array(e),t,r)}function En(e,t,r){vn.call(this,new Uint8ClampedArray(e),t,r)}function xn(e,t,r){vn.call(this,new Int16Array(e),t,r)}function wn(e,t,r){vn.call(this,new Uint16Array(e),t,r)}function Tn(e,t,r){vn.call(this,new Int32Array(e),t,r)}function _n(e,t,r){vn.call(this,new Uint32Array(e),t,r)}function Sn(e,t,r){vn.call(this,new Float32Array(e),t,r)}function Mn(e,t,r){vn.call(this,new Float64Array(e),t,r)}function Rn(){this.indices=[],this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingBox=null,this.boundingSphere=null,this.verticesNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.groupsNeedUpdate=!1}function An(e){if(0===e.length)return-1/0;for(var t=e[0],r=1,n=e.length;r<n;++r)e[r]>t&&(t=e[r]);return t}gn.prototype=Object.assign(Object.create(t.prototype),{constructor:gn,isGeometry:!0,applyMatrix:function(e){for(var t=(new Ht).getNormalMatrix(e),r=0,n=this.vertices.length;r<n;r++)this.vertices[r].applyMatrix4(e);for(r=0,n=this.faces.length;r<n;r++){var i=this.faces[r];i.normal.applyMatrix3(t).normalize();for(var a=0,o=i.vertexNormals.length;a<o;a++)i.vertexNormals[a].applyMatrix3(t).normalize()}return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this.verticesNeedUpdate=!0,this.normalsNeedUpdate=!0,this},rotateX:function(){var e=new Ot;return function(t){return e.makeRotationX(t),this.applyMatrix(e),this}}(),rotateY:function(){var e=new Ot;return function(t){return e.makeRotationY(t),this.applyMatrix(e),this}}(),rotateZ:function(){var e=new Ot;return function(t){return e.makeRotationZ(t),this.applyMatrix(e),this}}(),translate:function(){var e=new Ot;return function(t,r,n){return e.makeTranslation(t,r,n),this.applyMatrix(e),this}}(),scale:function(){var e=new Ot;return function(t,r,n){return e.makeScale(t,r,n),this.applyMatrix(e),this}}(),lookAt:(pn=new cn,function(e){pn.lookAt(e),pn.updateMatrix(),this.applyMatrix(pn.matrix)}),fromBufferGeometry:function(e){var t=this,r=null!==e.index?e.index.array:void 0,n=e.attributes,i=n.position.array,a=void 0!==n.normal?n.normal.array:void 0,o=void 0!==n.color?n.color.array:void 0,s=void 0!==n.uv?n.uv.array:void 0,l=void 0!==n.uv2?n.uv2.array:void 0;void 0!==l&&(this.faceVertexUvs[1]=[]);for(var u=[],c=[],h=[],d=0,f=0;d<i.length;d+=3,f+=2)t.vertices.push(new Pt(i[d],i[d+1],i[d+2])),void 0!==a&&u.push(new Pt(a[d],a[d+1],a[d+2])),void 0!==o&&t.colors.push(new Lr(o[d],o[d+1],o[d+2])),void 0!==s&&c.push(new Lt(s[f],s[f+1])),void 0!==l&&h.push(new Lt(l[f],l[f+1]));function p(e,r,n,i){var d=new fn(e,r,n,void 0!==a?[u[e].clone(),u[r].clone(),u[n].clone()]:[],void 0!==o?[t.colors[e].clone(),t.colors[r].clone(),t.colors[n].clone()]:[],i);t.faces.push(d),void 0!==s&&t.faceVertexUvs[0].push([c[e].clone(),c[r].clone(),c[n].clone()]),void 0!==l&&t.faceVertexUvs[1].push([h[e].clone(),h[r].clone(),h[n].clone()])}var m=e.groups;if(m.length>0)for(d=0;d<m.length;d++)for(var g=m[d],v=g.start,y=(f=v,v+g.count);f<y;f+=3)void 0!==r?p(r[f],r[f+1],r[f+2],g.materialIndex):p(f,f+1,f+2,g.materialIndex);else if(void 0!==r)for(d=0;d<r.length;d+=3)p(r[d],r[d+1],r[d+2]);else for(d=0;d<i.length/3;d+=3)p(d,d+1,d+2);return this.computeFaceNormals(),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),this},center:function(){this.computeBoundingBox();var e=this.boundingBox.getCenter().negate();return this.translate(e.x,e.y,e.z),e},normalize:function(){this.computeBoundingSphere();var e=this.boundingSphere.center,t=this.boundingSphere.radius,r=0===t?1:1/t,n=new Ot;return n.set(r,0,0,-r*e.x,0,r,0,-r*e.y,0,0,r,-r*e.z,0,0,0,1),this.applyMatrix(n),this},computeFaceNormals:function(){for(var e=new Pt,t=new Pt,r=0,n=this.faces.length;r<n;r++){var i=this.faces[r],a=this.vertices[i.a],o=this.vertices[i.b],s=this.vertices[i.c];e.subVectors(s,o),t.subVectors(a,o),e.cross(t),e.normalize(),i.normal.copy(e)}},computeVertexNormals:function(e){var t,r,n,i,a,o;for(void 0===e&&(e=!0),o=new Array(this.vertices.length),t=0,r=this.vertices.length;t<r;t++)o[t]=new Pt;if(e){var s,l,u,c=new Pt,h=new Pt;for(n=0,i=this.faces.length;n<i;n++)a=this.faces[n],s=this.vertices[a.a],l=this.vertices[a.b],u=this.vertices[a.c],c.subVectors(u,l),h.subVectors(s,l),c.cross(h),o[a.a].add(c),o[a.b].add(c),o[a.c].add(c)}else for(this.computeFaceNormals(),n=0,i=this.faces.length;n<i;n++)o[(a=this.faces[n]).a].add(a.normal),o[a.b].add(a.normal),o[a.c].add(a.normal);for(t=0,r=this.vertices.length;t<r;t++)o[t].normalize();for(n=0,i=this.faces.length;n<i;n++){var d=(a=this.faces[n]).vertexNormals;3===d.length?(d[0].copy(o[a.a]),d[1].copy(o[a.b]),d[2].copy(o[a.c])):(d[0]=o[a.a].clone(),d[1]=o[a.b].clone(),d[2]=o[a.c].clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeFlatVertexNormals:function(){var e,t,r;for(this.computeFaceNormals(),e=0,t=this.faces.length;e<t;e++){var n=(r=this.faces[e]).vertexNormals;3===n.length?(n[0].copy(r.normal),n[1].copy(r.normal),n[2].copy(r.normal)):(n[0]=r.normal.clone(),n[1]=r.normal.clone(),n[2]=r.normal.clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeMorphNormals:function(){var e,t,r,n,i;for(r=0,n=this.faces.length;r<n;r++)for((i=this.faces[r]).__originalFaceNormal?i.__originalFaceNormal.copy(i.normal):i.__originalFaceNormal=i.normal.clone(),i.__originalVertexNormals||(i.__originalVertexNormals=[]),e=0,t=i.vertexNormals.length;e<t;e++)i.__originalVertexNormals[e]?i.__originalVertexNormals[e].copy(i.vertexNormals[e]):i.__originalVertexNormals[e]=i.vertexNormals[e].clone();var a=new gn;for(a.faces=this.faces,e=0,t=this.morphTargets.length;e<t;e++){if(!this.morphNormals[e]){this.morphNormals[e]={},this.morphNormals[e].faceNormals=[],this.morphNormals[e].vertexNormals=[];var o=this.morphNormals[e].faceNormals,s=this.morphNormals[e].vertexNormals;for(r=0,n=this.faces.length;r<n;r++)l=new Pt,u={a:new Pt,b:new Pt,c:new Pt},o.push(l),s.push(u)}var l,u,c=this.morphNormals[e];for(a.vertices=this.morphTargets[e].vertices,a.computeFaceNormals(),a.computeVertexNormals(),r=0,n=this.faces.length;r<n;r++)i=this.faces[r],l=c.faceNormals[r],u=c.vertexNormals[r],l.copy(i.normal),u.a.copy(i.vertexNormals[0]),u.b.copy(i.vertexNormals[1]),u.c.copy(i.vertexNormals[2])}for(r=0,n=this.faces.length;r<n;r++)(i=this.faces[r]).normal=i.__originalFaceNormal,i.vertexNormals=i.__originalVertexNormals},computeLineDistances:function(){for(var e=0,t=this.vertices,r=0,n=t.length;r<n;r++)r>0&&(e+=t[r].distanceTo(t[r-1])),this.lineDistances[r]=e},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new Kr),this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new Qr),this.boundingSphere.setFromPoints(this.vertices)},merge:function(e,t,r){if(e&&e.isGeometry){var i,a=this.vertices.length,o=this.vertices,s=e.vertices,l=this.faces,u=e.faces,c=this.faceVertexUvs[0],h=e.faceVertexUvs[0],d=this.colors,f=e.colors;void 0===r&&(r=0),void 0!==t&&(i=(new Ht).getNormalMatrix(t));for(var p=0,m=s.length;p<m;p++){var g=s[p].clone();void 0!==t&&g.applyMatrix4(t),o.push(g)}for(p=0,m=f.length;p<m;p++)d.push(f[p].clone());for(p=0,m=u.length;p<m;p++){var v,y,b,E=u[p],x=E.vertexNormals,w=E.vertexColors;(v=new fn(E.a+a,E.b+a,E.c+a)).normal.copy(E.normal),void 0!==i&&v.normal.applyMatrix3(i).normalize();for(var T=0,_=x.length;T<_;T++)y=x[T].clone(),void 0!==i&&y.applyMatrix3(i).normalize(),v.vertexNormals.push(y);for(v.color.copy(E.color),T=0,_=w.length;T<_;T++)b=w[T],v.vertexColors.push(b.clone());v.materialIndex=E.materialIndex+r,l.push(v)}for(p=0,m=h.length;p<m;p++){var S=h[p],M=[];if(void 0!==S){for(T=0,_=S.length;T<_;T++)M.push(S[T].clone());c.push(M)}}}else n.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",e)},mergeMesh:function(e){e&&e.isMesh?(e.matrixAutoUpdate&&e.updateMatrix(),this.merge(e.geometry,e.matrix)):n.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",e)},mergeVertices:function(){var e,t,r,n,i,a,o,s,l={},u=[],c=[],h=4,d=Math.pow(10,h);for(r=0,n=this.vertices.length;r<n;r++)e=this.vertices[r],void 0===l[t=Math.round(e.x*d)+"_"+Math.round(e.y*d)+"_"+Math.round(e.z*d)]?(l[t]=r,u.push(this.vertices[r]),c[r]=u.length-1):c[r]=c[l[t]];var f=[];for(r=0,n=this.faces.length;r<n;r++){(i=this.faces[r]).a=c[i.a],i.b=c[i.b],i.c=c[i.c],a=[i.a,i.b,i.c];for(var p=0;p<3;p++)if(a[p]===a[(p+1)%3]){f.push(r);break}}for(r=f.length-1;r>=0;r--){var m=f[r];for(this.faces.splice(m,1),o=0,s=this.faceVertexUvs.length;o<s;o++)this.faceVertexUvs[o].splice(m,1)}var g=this.vertices.length-u.length;return this.vertices=u,g},setFromPoints:function(e){this.vertices=[];for(var t=0,r=e.length;t<r;t++){var n=e[t];this.vertices.push(new Pt(n.x,n.y,n.z||0))}return this},sortFacesByMaterialIndex:function(){for(var e=this.faces,t=e.length,r=0;r<t;r++)e[r]._id=r;function n(e,t){return e.materialIndex-t.materialIndex}e.sort(n);var i,a,o=this.faceVertexUvs[0],s=this.faceVertexUvs[1];for(o&&o.length===t&&(i=[]),s&&s.length===t&&(a=[]),r=0;r<t;r++){var l=e[r]._id;i&&i.push(o[l]),a&&a.push(s[l])}i&&(this.faceVertexUvs[0]=i),a&&(this.faceVertexUvs[1]=a)},toJSON:function(){var e={metadata:{version:4.5,type:"Geometry",generator:"Geometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),void 0!==this.parameters){var t=this.parameters;for(var r in t)void 0!==t[r]&&(e[r]=t[r]);return e}for(var n=[],i=0;i<this.vertices.length;i++){var a=this.vertices[i];n.push(a.x,a.y,a.z)}var o=[],s=[],l={},u=[],c={},h=[],d={};for(i=0;i<this.faces.length;i++){var f=this.faces[i],p=!0,m=!1,g=void 0!==this.faceVertexUvs[0][i],v=f.normal.length()>0,y=f.vertexNormals.length>0,b=1!==f.color.r||1!==f.color.g||1!==f.color.b,E=f.vertexColors.length>0,x=0;if(x=S(x,0,0),x=S(x,1,p),x=S(x,2,m),x=S(x,3,g),x=S(x,4,v),x=S(x,5,y),x=S(x,6,b),x=S(x,7,E),o.push(x),o.push(f.a,f.b,f.c),o.push(f.materialIndex),g){var w=this.faceVertexUvs[0][i];o.push(A(w[0]),A(w[1]),A(w[2]))}if(v&&o.push(M(f.normal)),y){var T=f.vertexNormals;o.push(M(T[0]),M(T[1]),M(T[2]))}if(b&&o.push(R(f.color)),E){var _=f.vertexColors;o.push(R(_[0]),R(_[1]),R(_[2]))}}function S(e,t,r){return r?e|1<<t:e&~(1<<t)}function M(e){var t=e.x.toString()+e.y.toString()+e.z.toString();return void 0!==l[t]||(l[t]=s.length/3,s.push(e.x,e.y,e.z)),l[t]}function R(e){var t=e.r.toString()+e.g.toString()+e.b.toString();return void 0!==c[t]||(c[t]=u.length,u.push(e.getHex())),c[t]}function A(e){var t=e.x.toString()+e.y.toString();return void 0!==d[t]||(d[t]=h.length/2,h.push(e.x,e.y)),d[t]}return e.data={},e.data.vertices=n,e.data.normals=s,u.length>0&&(e.data.colors=u),h.length>0&&(e.data.uvs=[h]),e.data.faces=o,e},clone:function(){return(new gn).copy(this)},copy:function(e){var t,r,n,i,a,o;this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.name=e.name;var s=e.vertices;for(t=0,r=s.length;t<r;t++)this.vertices.push(s[t].clone());var l=e.colors;for(t=0,r=l.length;t<r;t++)this.colors.push(l[t].clone());var u=e.faces;for(t=0,r=u.length;t<r;t++)this.faces.push(u[t].clone());for(t=0,r=e.faceVertexUvs.length;t<r;t++){var c=e.faceVertexUvs[t];for(void 0===this.faceVertexUvs[t]&&(this.faceVertexUvs[t]=[]),n=0,i=c.length;n<i;n++){var h=c[n],d=[];for(a=0,o=h.length;a<o;a++){var f=h[a];d.push(f.clone())}this.faceVertexUvs[t].push(d)}}var p=e.morphTargets;for(t=0,r=p.length;t<r;t++){var m={};if(m.name=p[t].name,void 0!==p[t].vertices)for(m.vertices=[],n=0,i=p[t].vertices.length;n<i;n++)m.vertices.push(p[t].vertices[n].clone());if(void 0!==p[t].normals)for(m.normals=[],n=0,i=p[t].normals.length;n<i;n++)m.normals.push(p[t].normals[n].clone());this.morphTargets.push(m)}var g=e.morphNormals;for(t=0,r=g.length;t<r;t++){var v={};if(void 0!==g[t].vertexNormals)for(v.vertexNormals=[],n=0,i=g[t].vertexNormals.length;n<i;n++){var y=g[t].vertexNormals[n],b={};b.a=y.a.clone(),b.b=y.b.clone(),b.c=y.c.clone(),v.vertexNormals.push(b)}if(void 0!==g[t].faceNormals)for(v.faceNormals=[],n=0,i=g[t].faceNormals.length;n<i;n++)v.faceNormals.push(g[t].faceNormals[n].clone());this.morphNormals.push(v)}var E=e.skinWeights;for(t=0,r=E.length;t<r;t++)this.skinWeights.push(E[t].clone());var x=e.skinIndices;for(t=0,r=x.length;t<r;t++)this.skinIndices.push(x[t].clone());var w=e.lineDistances;for(t=0,r=w.length;t<r;t++)this.lineDistances.push(w[t]);var T=e.boundingBox;null!==T&&(this.boundingBox=T.clone());var _=e.boundingSphere;return null!==_&&(this.boundingSphere=_.clone()),this.elementsNeedUpdate=e.elementsNeedUpdate,this.verticesNeedUpdate=e.verticesNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.lineDistancesNeedUpdate=e.lineDistancesNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Object.defineProperty(vn.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}}),Object.assign(vn.prototype,{isBufferAttribute:!0,setArray:function(e){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.count=void 0!==e?e.length/this.itemSize:0,this.array=e},setDynamic:function(e){return this.dynamic=e,this},copy:function(e){return this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.dynamic=e.dynamic,this},copyAt:function(e,t,r){e*=this.itemSize,r*=t.itemSize;for(var n=0,i=this.itemSize;n<i;n++)this.array[e+n]=t.array[r+n];return this},copyArray:function(e){return this.array.set(e),this},copyColorsArray:function(e){for(var t=this.array,r=0,i=0,a=e.length;i<a;i++){var o=e[i];void 0===o&&(n.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",i),o=new Lr),t[r++]=o.r,t[r++]=o.g,t[r++]=o.b}return this},copyIndicesArray:function(e){for(var t=this.array,r=0,n=0,i=e.length;n<i;n++){var a=e[n];t[r++]=a.a,t[r++]=a.b,t[r++]=a.c}return this},copyVector2sArray:function(e){for(var t=this.array,r=0,i=0,a=e.length;i<a;i++){var o=e[i];void 0===o&&(n.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",i),o=new Lt),t[r++]=o.x,t[r++]=o.y}return this},copyVector3sArray:function(e){for(var t=this.array,r=0,i=0,a=e.length;i<a;i++){var o=e[i];void 0===o&&(n.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",i),o=new Pt),t[r++]=o.x,t[r++]=o.y,t[r++]=o.z}return this},copyVector4sArray:function(e){for(var t=this.array,r=0,i=0,a=e.length;i<a;i++){var o=e[i];void 0===o&&(n.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",i),o=new Ut),t[r++]=o.x,t[r++]=o.y,t[r++]=o.z,t[r++]=o.w}return this},set:function(e,t){return void 0===t&&(t=0),this.array.set(e,t),this},getX:function(e){return this.array[e*this.itemSize]},setX:function(e,t){return this.array[e*this.itemSize]=t,this},getY:function(e){return this.array[e*this.itemSize+1]},setY:function(e,t){return this.array[e*this.itemSize+1]=t,this},getZ:function(e){return this.array[e*this.itemSize+2]},setZ:function(e,t){return this.array[e*this.itemSize+2]=t,this},getW:function(e){return this.array[e*this.itemSize+3]},setW:function(e,t){return this.array[e*this.itemSize+3]=t,this},setXY:function(e,t,r){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=r,this},setXYZ:function(e,t,r,n){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=r,this.array[e+2]=n,this},setXYZW:function(e,t,r,n,i){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=r,this.array[e+2]=n,this.array[e+3]=i,this},onUpload:function(e){return this.onUploadCallback=e,this},clone:function(){return new this.constructor(this.array,this.itemSize).copy(this)}}),yn.prototype=Object.create(vn.prototype),yn.prototype.constructor=yn,bn.prototype=Object.create(vn.prototype),bn.prototype.constructor=bn,En.prototype=Object.create(vn.prototype),En.prototype.constructor=En,xn.prototype=Object.create(vn.prototype),xn.prototype.constructor=xn,wn.prototype=Object.create(vn.prototype),wn.prototype.constructor=wn,Tn.prototype=Object.create(vn.prototype),Tn.prototype.constructor=Tn,_n.prototype=Object.create(vn.prototype),_n.prototype.constructor=_n,Sn.prototype=Object.create(vn.prototype),Sn.prototype.constructor=Sn,Mn.prototype=Object.create(vn.prototype),Mn.prototype.constructor=Mn,Object.assign(Rn.prototype,{computeGroups:function(e){for(var t,r=[],n=void 0,i=e.faces,a=0;a<i.length;a++){var o=i[a];o.materialIndex!==n&&(n=o.materialIndex,void 0!==t&&(t.count=3*a-t.start,r.push(t)),t={start:3*a,materialIndex:n})}void 0!==t&&(t.count=3*a-t.start,r.push(t)),this.groups=r},fromGeometry:function(e){var t,r=e.faces,i=e.vertices,a=e.faceVertexUvs,o=a[0]&&a[0].length>0,s=a[1]&&a[1].length>0,l=e.morphTargets,u=l.length;if(u>0){t=[];for(var c=0;c<u;c++)t[c]=[];this.morphTargets.position=t}var h,d=e.morphNormals,f=d.length;if(f>0){for(h=[],c=0;c<f;c++)h[c]=[];this.morphTargets.normal=h}var p=e.skinIndices,m=e.skinWeights,g=p.length===i.length,v=m.length===i.length;for(c=0;c<r.length;c++){var y=r[c];this.vertices.push(i[y.a],i[y.b],i[y.c]);var b=y.vertexNormals;if(3===b.length)this.normals.push(b[0],b[1],b[2]);else{var E=y.normal;this.normals.push(E,E,E)}var x,w=y.vertexColors;if(3===w.length)this.colors.push(w[0],w[1],w[2]);else{var T=y.color;this.colors.push(T,T,T)}!0===o&&(void 0!==(x=a[0][c])?this.uvs.push(x[0],x[1],x[2]):(n.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",c),this.uvs.push(new Lt,new Lt,new Lt))),!0===s&&(void 0!==(x=a[1][c])?this.uvs2.push(x[0],x[1],x[2]):(n.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",c),this.uvs2.push(new Lt,new Lt,new Lt)));for(var _=0;_<u;_++){var S=l[_].vertices;t[_].push(S[y.a],S[y.b],S[y.c])}for(_=0;_<f;_++){var M=d[_].vertexNormals[c];h[_].push(M.a,M.b,M.c)}g&&this.skinIndices.push(p[y.a],p[y.b],p[y.c]),v&&this.skinWeights.push(m[y.a],m[y.b],m[y.c])}return this.computeGroups(e),this.verticesNeedUpdate=e.verticesNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,this}});var Cn,Ln,On,In,Pn,Hn,kn,Nn=1;function Un(){Object.defineProperty(this,"id",{value:Nn+=2}),this.uuid=Ct.generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0}}function Dn(e,t,r,n,i,a){gn.call(this),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:r,widthSegments:n,heightSegments:i,depthSegments:a},this.fromBufferGeometry(new Fn(e,t,r,n,i,a)),this.mergeVertices()}function Fn(e,t,r,n,i,a){Un.call(this),this.type="BoxBufferGeometry",this.parameters={width:e,height:t,depth:r,widthSegments:n,heightSegments:i,depthSegments:a};var o=this;e=e||1,t=t||1,r=r||1,n=Math.floor(n)||1,i=Math.floor(i)||1,a=Math.floor(a)||1;var s=[],l=[],u=[],c=[],h=0,d=0;function f(e,t,r,n,i,a,f,p,m,g,v){var y,b,E=a/m,x=f/g,w=a/2,T=f/2,_=p/2,S=m+1,M=g+1,R=0,A=0,C=new Pt;for(b=0;b<M;b++){var L=b*x-T;for(y=0;y<S;y++){var O=y*E-w;C[e]=O*n,C[t]=L*i,C[r]=_,l.push(C.x,C.y,C.z),C[e]=0,C[t]=0,C[r]=p>0?1:-1,u.push(C.x,C.y,C.z),c.push(y/m),c.push(1-b/g),R+=1}}for(b=0;b<g;b++)for(y=0;y<m;y++){var I=h+y+S*b,P=h+y+S*(b+1),H=h+(y+1)+S*(b+1),k=h+(y+1)+S*b;s.push(I,P,k),s.push(P,H,k),A+=6}o.addGroup(d,A,v),d+=A,h+=R}f("z","y","x",-1,-1,r,t,e,a,i,0),f("z","y","x",1,-1,r,t,-e,a,i,1),f("x","z","y",1,1,e,r,t,n,a,2),f("x","z","y",1,-1,e,r,-t,n,a,3),f("x","y","z",1,-1,e,t,r,n,i,4),f("x","y","z",-1,-1,e,t,-r,n,i,5),this.setIndex(s),this.addAttribute("position",new Sn(l,3)),this.addAttribute("normal",new Sn(u,3)),this.addAttribute("uv",new Sn(c,2))}function Bn(e,t,r,n){gn.call(this),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:r,heightSegments:n},this.fromBufferGeometry(new zn(e,t,r,n)),this.mergeVertices()}function zn(e,t,r,n){Un.call(this),this.type="PlaneBufferGeometry",this.parameters={width:e,height:t,widthSegments:r,heightSegments:n};var i,a,o=(e=e||1)/2,s=(t=t||1)/2,l=Math.floor(r)||1,u=Math.floor(n)||1,c=l+1,h=u+1,d=e/l,f=t/u,p=[],m=[],g=[],v=[];for(a=0;a<h;a++){var y=a*f-s;for(i=0;i<c;i++){var b=i*d-o;m.push(b,-y,0),g.push(0,0,1),v.push(i/l),v.push(1-a/u)}}for(a=0;a<u;a++)for(i=0;i<l;i++){var E=i+c*a,x=i+c*(a+1),w=i+1+c*(a+1),T=i+1+c*a;p.push(E,x,T),p.push(x,w,T)}this.setIndex(p),this.addAttribute("position",new Sn(m,3)),this.addAttribute("normal",new Sn(g,3)),this.addAttribute("uv",new Sn(v,2))}function jn(e){Xr.call(this),this.type="MeshBasicMaterial",this.color=new Lr(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=se,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.lights=!1,this.setValues(e)}function Vn(e){Xr.call(this),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,void 0!==e&&(void 0!==e.attributes&&n.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(e))}function Gn(e,t){this.origin=void 0!==e?e:new Pt,this.direction=void 0!==t?t:new Pt}function Wn(e,t){this.start=void 0!==e?e:new Pt,this.end=void 0!==t?t:new Pt}function qn(e,t,r){this.a=void 0!==e?e:new Pt,this.b=void 0!==t?t:new Pt,this.c=void 0!==r?r:new Pt}function Xn(e,t){cn.call(this),this.type="Mesh",this.geometry=void 0!==e?e:new Un,this.material=void 0!==t?t:new jn({color:16777215*Math.random()}),this.drawMode=gt,this.updateMorphTargets()}function Yn(e,t,r,n){var i,a,o,s=new Lr(0),l=0;function u(t,n,u,h){var d=n.background;null===d?c(s,l):d&&d.isColor&&(c(d,1),h=!0),(e.autoClear||h)&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),d&&d.isCubeTexture?(void 0===o&&((o=new Xn(new Fn(1,1,1),new Vn({uniforms:Hr.cube.uniforms,vertexShader:Hr.cube.vertexShader,fragmentShader:Hr.cube.fragmentShader,side:_,depthTest:!0,depthWrite:!1,fog:!1}))).geometry.removeAttribute("normal"),o.geometry.removeAttribute("uv"),o.onBeforeRender=function(e,t,r){this.matrixWorld.copyPosition(r.matrixWorld)},r.update(o.geometry)),o.material.uniforms.tCube.value=d,t.push(o,o.geometry,o.material,0,null)):d&&d.isTexture&&(void 0===i&&(i=new dn(-1,1,1,-1,0,1),a=new Xn(new zn(2,2),new jn({depthTest:!1,depthWrite:!1,fog:!1})),r.update(a.geometry)),a.material.map=d,e.renderBufferDirect(i,null,a.geometry,a.material,a,null))}function c(e,r){t.buffers.color.setClear(e.r,e.g,e.b,r,n)}return{getClearColor:function(){return s},setClearColor:function(e,t){s.set(e),c(s,l=void 0!==t?t:1)},getClearAlpha:function(){return l},setClearAlpha:function(e){c(s,l=e)},render:u}}function Zn(e,t){return e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.program&&t.program&&e.program!==t.program?e.program.id-t.program.id:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function Kn(e,t){return e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}function Qn(){var e=[],t=0,r=[],n=[];function i(){t=0,r.length=0,n.length=0}function a(i,a,o,s,l){var u=e[t];void 0===u?(u={id:i.id,object:i,geometry:a,material:o,program:o.program,renderOrder:i.renderOrder,z:s,group:l},e[t]=u):(u.id=i.id,u.object=i,u.geometry=a,u.material=o,u.program=o.program,u.renderOrder=i.renderOrder,u.z=s,u.group=l),(!0===o.transparent?n:r).push(u),t++}function o(){r.length>1&&r.sort(Zn),n.length>1&&n.sort(Kn)}return{opaque:r,transparent:n,init:i,push:a,sort:o}}function Jn(){var e={};function t(t,r){var n=t.id+","+r.id,i=e[n];return void 0===i&&(i=new Qn,e[n]=i),i}function r(){e={}}return{get:t,dispose:r}}function $n(e,t){return Math.abs(t[1])-Math.abs(e[1])}function ei(e){var t={},r=new Float32Array(8);function n(n,i,a,o){var s=n.morphTargetInfluences,l=s.length,u=t[i.id];if(void 0===u){u=[];for(var c=0;c<l;c++)u[c]=[c,0];t[i.id]=u}var h=a.morphTargets&&i.morphAttributes.position,d=a.morphNormals&&i.morphAttributes.normal;for(c=0;c<l;c++)0!==(f=u[c])[1]&&(h&&i.removeAttribute("morphTarget"+c),d&&i.removeAttribute("morphNormal"+c));for(c=0;c<l;c++)(f=u[c])[0]=c,f[1]=s[c];for(u.sort($n),c=0;c<8;c++){var f;if(f=u[c]){var p=f[0],m=f[1];if(m){h&&i.addAttribute("morphTarget"+c,h[p]),d&&i.addAttribute("morphNormal"+c,d[p]),r[c]=m;continue}}r[c]=0}o.getUniforms().setValue(e,"morphTargetInfluences",r)}return{update:n}}function ti(e,t,r){var i,a,o;function s(e){i=e}function l(e){a=e.type,o=e.bytesPerElement}function u(t,n){e.drawElements(i,n,a,t*o),r.calls++,r.vertices+=n,i===e.TRIANGLES?r.faces+=n/3:i===e.POINTS&&(r.points+=n)}function c(s,l,u){var c=t.get("ANGLE_instanced_arrays");null!==c?(c.drawElementsInstancedANGLE(i,u,a,l*o,s.maxInstancedCount),r.calls++,r.vertices+=u*s.maxInstancedCount,i===e.TRIANGLES?r.faces+=s.maxInstancedCount*u/3:i===e.POINTS&&(r.points+=s.maxInstancedCount*u)):n.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.")}this.setMode=s,this.setIndex=l,this.render=u,this.renderInstances=c}function ri(e,t,r){var i;function a(e){i=e}function o(t,n){e.drawArrays(i,t,n),r.calls++,r.vertices+=n,i===e.TRIANGLES?r.faces+=n/3:i===e.POINTS&&(r.points+=n)}function s(a,o,s){var l=t.get("ANGLE_instanced_arrays");if(null!==l){var u=a.attributes.position;u.isInterleavedBufferAttribute?(s=u.data.count,l.drawArraysInstancedANGLE(i,0,s,a.maxInstancedCount)):l.drawArraysInstancedANGLE(i,o,s,a.maxInstancedCount),r.calls++,r.vertices+=s*a.maxInstancedCount,i===e.TRIANGLES?r.faces+=a.maxInstancedCount*s/3:i===e.POINTS&&(r.points+=a.maxInstancedCount*s)}else n.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.")}this.setMode=a,this.render=o,this.renderInstances=s}function ni(e,t,r){var n={},i={};function a(e){var o=e.target,s=n[o.id];for(var l in null!==s.index&&t.remove(s.index),s.attributes)t.remove(s.attributes[l]);o.removeEventListener("dispose",a),delete n[o.id];var u=i[o.id];u&&(t.remove(u),delete i[o.id]),(u=i[s.id])&&(t.remove(u),delete i[s.id]),r.geometries--}function o(e,t){var i=n[t.id];return i||(t.addEventListener("dispose",a),t.isBufferGeometry?i=t:t.isGeometry&&(void 0===t._bufferGeometry&&(t._bufferGeometry=(new Un).setFromObject(e)),i=t._bufferGeometry),n[t.id]=i,r.geometries++,i)}function s(r){var n=r.index,i=r.attributes;for(var a in null!==n&&t.update(n,e.ELEMENT_ARRAY_BUFFER),i)t.update(i[a],e.ARRAY_BUFFER);var o=r.morphAttributes;for(var a in o)for(var s=o[a],l=0,u=s.length;l<u;l++)t.update(s[l],e.ARRAY_BUFFER)}function l(r){var n=i[r.id];if(n)return n;var a,o=[],s=r.index,l=r.attributes;if(null!==s)for(var u=0,c=(a=s.array).length;u<c;u+=3){var h=a[u+0],d=a[u+1],f=a[u+2];o.push(h,d,d,f,f,h)}else for(u=0,c=(a=l.position.array).length/3-1;u<c;u+=3)h=u+0,d=u+1,f=u+2,o.push(h,d,d,f,f,h);return n=new(An(o)>65535?_n:wn)(o,1),t.update(n,e.ELEMENT_ARRAY_BUFFER),i[r.id]=n,n}return{get:o,update:s,getWireframeAttribute:l}}function ii(){var e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];var r;switch(t.type){case"DirectionalLight":r={direction:new Pt,color:new Lr,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new Lt};break;case"SpotLight":r={position:new Pt,direction:new Pt,color:new Lr,distance:0,coneCos:0,penumbraCos:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new Lt};break;case"PointLight":r={position:new Pt,color:new Lr,distance:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new Lt,shadowCameraNear:1,shadowCameraFar:1e3};break;case"HemisphereLight":r={direction:new Pt,skyColor:new Lr,groundColor:new Lr};break;case"RectAreaLight":r={color:new Lr,position:new Pt,halfWidth:new Pt,halfHeight:new Pt}}return e[t.id]=r,r}}}function ai(){var e=new ii,t={hash:"",ambient:[0,0,0],directional:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],point:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]},r=new Pt,n=new Ot,i=new Ot;function a(a,o,s){for(var l=0,u=0,c=0,h=0,d=0,f=0,p=0,m=0,g=s.matrixWorldInverse,v=0,y=a.length;v<y;v++){var b=a[v],E=b.color,x=b.intensity,w=b.distance,T=b.shadow&&b.shadow.map?b.shadow.map.texture:null;if(b.isAmbientLight)l+=E.r*x,u+=E.g*x,c+=E.b*x;else if(b.isDirectionalLight){if((S=e.get(b)).color.copy(b.color).multiplyScalar(b.intensity),S.direction.setFromMatrixPosition(b.matrixWorld),r.setFromMatrixPosition(b.target.matrixWorld),S.direction.sub(r),S.direction.transformDirection(g),S.shadow=b.castShadow,b.castShadow){var _=b.shadow;S.shadowBias=_.bias,S.shadowRadius=_.radius,S.shadowMapSize=_.mapSize}t.directionalShadowMap[h]=T,t.directionalShadowMatrix[h]=b.shadow.matrix,t.directional[h]=S,h++}else if(b.isSpotLight)(S=e.get(b)).position.setFromMatrixPosition(b.matrixWorld),S.position.applyMatrix4(g),S.color.copy(E).multiplyScalar(x),S.distance=w,S.direction.setFromMatrixPosition(b.matrixWorld),r.setFromMatrixPosition(b.target.matrixWorld),S.direction.sub(r),S.direction.transformDirection(g),S.coneCos=Math.cos(b.angle),S.penumbraCos=Math.cos(b.angle*(1-b.penumbra)),S.decay=0===b.distance?0:b.decay,S.shadow=b.castShadow,b.castShadow&&(_=b.shadow,S.shadowBias=_.bias,S.shadowRadius=_.radius,S.shadowMapSize=_.mapSize),t.spotShadowMap[f]=T,t.spotShadowMatrix[f]=b.shadow.matrix,t.spot[f]=S,f++;else if(b.isRectAreaLight)(S=e.get(b)).color.copy(E).multiplyScalar(x/(b.width*b.height)),S.position.setFromMatrixPosition(b.matrixWorld),S.position.applyMatrix4(g),i.identity(),n.copy(b.matrixWorld),n.premultiply(g),i.extractRotation(n),S.halfWidth.set(.5*b.width,0,0),S.halfHeight.set(0,.5*b.height,0),S.halfWidth.applyMatrix4(i),S.halfHeight.applyMatrix4(i),t.rectArea[p]=S,p++;else if(b.isPointLight)(S=e.get(b)).position.setFromMatrixPosition(b.matrixWorld),S.position.applyMatrix4(g),S.color.copy(b.color).multiplyScalar(b.intensity),S.distance=b.distance,S.decay=0===b.distance?0:b.decay,S.shadow=b.castShadow,b.castShadow&&(_=b.shadow,S.shadowBias=_.bias,S.shadowRadius=_.radius,S.shadowMapSize=_.mapSize,S.shadowCameraNear=_.camera.near,S.shadowCameraFar=_.camera.far),t.pointShadowMap[d]=T,t.pointShadowMatrix[d]=b.shadow.matrix,t.point[d]=S,d++;else if(b.isHemisphereLight){var S;(S=e.get(b)).direction.setFromMatrixPosition(b.matrixWorld),S.direction.transformDirection(g),S.direction.normalize(),S.skyColor.copy(b.color).multiplyScalar(x),S.groundColor.copy(b.groundColor).multiplyScalar(x),t.hemi[m]=S,m++}}t.ambient[0]=l,t.ambient[1]=u,t.ambient[2]=c,t.directional.length=h,t.spot.length=f,t.rectArea.length=p,t.point.length=d,t.hemi.length=m,t.hash=h+","+d+","+f+","+p+","+m+","+o.length}return{setup:a,state:t}}function oi(e,t){var r={};function n(n){var i=t.frame,a=n.geometry,o=e.get(n,a);return r[o.id]!==i&&(a.isGeometry&&o.updateFromObject(n),e.update(o),r[o.id]=i),o}function i(){r={}}return{update:n,clear:i}}function si(e){for(var t=e.split("\n"),r=0;r<t.length;r++)t[r]=r+1+": "+t[r];return t.join("\n")}function li(e,t,r){var i=e.createShader(t);return e.shaderSource(i,r),e.compileShader(i),!1===e.getShaderParameter(i,e.COMPILE_STATUS)&&n.error("THREE.WebGLShader: Shader couldn't compile."),""!==e.getShaderInfoLog(i)&&n.warn("THREE.WebGLShader: gl.getShaderInfoLog()",t===e.VERTEX_SHADER?"vertex":"fragment",e.getShaderInfoLog(i),si(r)),i}Un.prototype=Object.assign(Object.create(t.prototype),{constructor:Un,isBufferGeometry:!0,getIndex:function(){return this.index},setIndex:function(e){Array.isArray(e)?this.index=new(An(e)>65535?_n:wn)(e,1):this.index=e},addAttribute:function(e,t){return t&&t.isBufferAttribute||t&&t.isInterleavedBufferAttribute?"index"===e?(n.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),void this.setIndex(t)):(this.attributes[e]=t,this):(n.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),void this.addAttribute(e,new vn(arguments[1],arguments[2])))},getAttribute:function(e){return this.attributes[e]},removeAttribute:function(e){return delete this.attributes[e],this},addGroup:function(e,t,r){this.groups.push({start:e,count:t,materialIndex:void 0!==r?r:0})},clearGroups:function(){this.groups=[]},setDrawRange:function(e,t){this.drawRange.start=e,this.drawRange.count=t},applyMatrix:function(e){var t=this.attributes.position;void 0!==t&&(e.applyToBufferAttribute(t),t.needsUpdate=!0);var r=this.attributes.normal;return void 0!==r&&((new Ht).getNormalMatrix(e).applyToBufferAttribute(r),r.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this},rotateX:function(){var e=new Ot;return function(t){return e.makeRotationX(t),this.applyMatrix(e),this}}(),rotateY:function(){var e=new Ot;return function(t){return e.makeRotationY(t),this.applyMatrix(e),this}}(),rotateZ:function(){var e=new Ot;return function(t){return e.makeRotationZ(t),this.applyMatrix(e),this}}(),translate:function(){var e=new Ot;return function(t,r,n){return e.makeTranslation(t,r,n),this.applyMatrix(e),this}}(),scale:function(){var e=new Ot;return function(t,r,n){return e.makeScale(t,r,n),this.applyMatrix(e),this}}(),lookAt:function(){var e=new cn;return function(t){e.lookAt(t),e.updateMatrix(),this.applyMatrix(e.matrix)}}(),center:function(){this.computeBoundingBox();var e=this.boundingBox.getCenter().negate();return this.translate(e.x,e.y,e.z),e},setFromObject:function(e){var t=e.geometry;if(e.isPoints||e.isLine){var r=new Sn(3*t.vertices.length,3),n=new Sn(3*t.colors.length,3);if(this.addAttribute("position",r.copyVector3sArray(t.vertices)),this.addAttribute("color",n.copyColorsArray(t.colors)),t.lineDistances&&t.lineDistances.length===t.vertices.length){var i=new Sn(t.lineDistances.length,1);this.addAttribute("lineDistance",i.copyArray(t.lineDistances))}null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone())}else e.isMesh&&t&&t.isGeometry&&this.fromGeometry(t);return this},setFromPoints:function(e){for(var t=[],r=0,n=e.length;r<n;r++){var i=e[r];t.push(i.x,i.y,i.z||0)}return this.addAttribute("position",new Sn(t,3)),this},updateFromObject:function(e){var t,r=e.geometry;if(e.isMesh){var n=r.__directGeometry;if(!0===r.elementsNeedUpdate&&(n=void 0,r.elementsNeedUpdate=!1),void 0===n)return this.fromGeometry(r);n.verticesNeedUpdate=r.verticesNeedUpdate,n.normalsNeedUpdate=r.normalsNeedUpdate,n.colorsNeedUpdate=r.colorsNeedUpdate,n.uvsNeedUpdate=r.uvsNeedUpdate,n.groupsNeedUpdate=r.groupsNeedUpdate,r.verticesNeedUpdate=!1,r.normalsNeedUpdate=!1,r.colorsNeedUpdate=!1,r.uvsNeedUpdate=!1,r.groupsNeedUpdate=!1,r=n}return!0===r.verticesNeedUpdate&&(void 0!==(t=this.attributes.position)&&(t.copyVector3sArray(r.vertices),t.needsUpdate=!0),r.verticesNeedUpdate=!1),!0===r.normalsNeedUpdate&&(void 0!==(t=this.attributes.normal)&&(t.copyVector3sArray(r.normals),t.needsUpdate=!0),r.normalsNeedUpdate=!1),!0===r.colorsNeedUpdate&&(void 0!==(t=this.attributes.color)&&(t.copyColorsArray(r.colors),t.needsUpdate=!0),r.colorsNeedUpdate=!1),r.uvsNeedUpdate&&(void 0!==(t=this.attributes.uv)&&(t.copyVector2sArray(r.uvs),t.needsUpdate=!0),r.uvsNeedUpdate=!1),r.lineDistancesNeedUpdate&&(void 0!==(t=this.attributes.lineDistance)&&(t.copyArray(r.lineDistances),t.needsUpdate=!0),r.lineDistancesNeedUpdate=!1),r.groupsNeedUpdate&&(r.computeGroups(e.geometry),this.groups=r.groups,r.groupsNeedUpdate=!1),this},fromGeometry:function(e){return e.__directGeometry=(new Rn).fromGeometry(e),this.fromDirectGeometry(e.__directGeometry)},fromDirectGeometry:function(e){var t=new Float32Array(3*e.vertices.length);if(this.addAttribute("position",new vn(t,3).copyVector3sArray(e.vertices)),e.normals.length>0){var r=new Float32Array(3*e.normals.length);this.addAttribute("normal",new vn(r,3).copyVector3sArray(e.normals))}if(e.colors.length>0){var n=new Float32Array(3*e.colors.length);this.addAttribute("color",new vn(n,3).copyColorsArray(e.colors))}if(e.uvs.length>0){var i=new Float32Array(2*e.uvs.length);this.addAttribute("uv",new vn(i,2).copyVector2sArray(e.uvs))}if(e.uvs2.length>0){var a=new Float32Array(2*e.uvs2.length);this.addAttribute("uv2",new vn(a,2).copyVector2sArray(e.uvs2))}if(e.indices.length>0){var o=new(An(e.indices)>65535?Uint32Array:Uint16Array)(3*e.indices.length);this.setIndex(new vn(o,1).copyIndicesArray(e.indices))}for(var s in this.groups=e.groups,e.morphTargets){for(var l=[],u=e.morphTargets[s],c=0,h=u.length;c<h;c++){var d=u[c],f=new Sn(3*d.length,3);l.push(f.copyVector3sArray(d))}this.morphAttributes[s]=l}if(e.skinIndices.length>0){var p=new Sn(4*e.skinIndices.length,4);this.addAttribute("skinIndex",p.copyVector4sArray(e.skinIndices))}if(e.skinWeights.length>0){var m=new Sn(4*e.skinWeights.length,4);this.addAttribute("skinWeight",m.copyVector4sArray(e.skinWeights))}return null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),this},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new Kr);var e=this.attributes.position;void 0!==e?this.boundingBox.setFromBufferAttribute(e):this.boundingBox.makeEmpty(),(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&n.error('THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)},computeBoundingSphere:function(){var e=new Kr,t=new Pt;return function(){null===this.boundingSphere&&(this.boundingSphere=new Qr);var r=this.attributes.position;if(r){var i=this.boundingSphere.center;e.setFromBufferAttribute(r),e.getCenter(i);for(var a=0,o=0,s=r.count;o<s;o++)t.x=r.getX(o),t.y=r.getY(o),t.z=r.getZ(o),a=Math.max(a,i.distanceToSquared(t));this.boundingSphere.radius=Math.sqrt(a),isNaN(this.boundingSphere.radius)&&n.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}}(),computeFaceNormals:function(){},computeVertexNormals:function(){var e=this.index,t=this.attributes,r=this.groups;if(t.position){var n=t.position.array;if(void 0===t.normal)this.addAttribute("normal",new vn(new Float32Array(n.length),3));else for(var i=t.normal.array,a=0,o=i.length;a<o;a++)i[a]=0;var s,l,u,c=t.normal.array,h=new Pt,d=new Pt,f=new Pt,p=new Pt,m=new Pt;if(e){var g=e.array;0===r.length&&this.addGroup(0,g.length);for(var v=0,y=r.length;v<y;++v){var b=r[v],E=b.start;for(a=E,o=E+b.count;a<o;a+=3)s=3*g[a+0],l=3*g[a+1],u=3*g[a+2],h.fromArray(n,s),d.fromArray(n,l),f.fromArray(n,u),p.subVectors(f,d),m.subVectors(h,d),p.cross(m),c[s]+=p.x,c[s+1]+=p.y,c[s+2]+=p.z,c[l]+=p.x,c[l+1]+=p.y,c[l+2]+=p.z,c[u]+=p.x,c[u+1]+=p.y,c[u+2]+=p.z}}else for(a=0,o=n.length;a<o;a+=9)h.fromArray(n,a),d.fromArray(n,a+3),f.fromArray(n,a+6),p.subVectors(f,d),m.subVectors(h,d),p.cross(m),c[a]=p.x,c[a+1]=p.y,c[a+2]=p.z,c[a+3]=p.x,c[a+4]=p.y,c[a+5]=p.z,c[a+6]=p.x,c[a+7]=p.y,c[a+8]=p.z;this.normalizeNormals(),t.normal.needsUpdate=!0}},merge:function(e,t){if(e&&e.isBufferGeometry){void 0===t&&(t=0);var r=this.attributes;for(var i in r)if(void 0!==e.attributes[i])for(var a=r[i].array,o=e.attributes[i],s=o.array,l=0,u=o.itemSize*t;l<s.length;l++,u++)a[u]=s[l];return this}n.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",e)},normalizeNormals:function(){var e=new Pt;return function(){for(var t=this.attributes.normal,r=0,n=t.count;r<n;r++)e.x=t.getX(r),e.y=t.getY(r),e.z=t.getZ(r),e.normalize(),t.setXYZ(r,e.x,e.y,e.z)}}(),toNonIndexed:function(){if(null===this.index)return n.warn("THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed."),this;var e=new Un,t=this.index.array,r=this.attributes;for(var i in r){for(var a=r[i],o=a.array,s=a.itemSize,l=new o.constructor(t.length*s),u=0,c=0,h=0,d=t.length;h<d;h++){u=t[h]*s;for(var f=0;f<s;f++)l[c++]=o[u++]}e.addAttribute(i,new vn(l,s))}return e},toJSON:function(){var e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),void 0!==this.parameters){var t=this.parameters;for(var r in t)void 0!==t[r]&&(e[r]=t[r]);return e}e.data={attributes:{}};var n=this.index;if(null!==n){var i=Array.prototype.slice.call(n.array);e.data.index={type:n.array.constructor.name,array:i}}var a=this.attributes;for(var r in a){var o=a[r];i=Array.prototype.slice.call(o.array),e.data.attributes[r]={itemSize:o.itemSize,type:o.array.constructor.name,array:i,normalized:o.normalized}}var s=this.groups;s.length>0&&(e.data.groups=JSON.parse(JSON.stringify(s)));var l=this.boundingSphere;return null!==l&&(e.data.boundingSphere={center:l.center.toArray(),radius:l.radius}),e},clone:function(){return(new Un).copy(this)},copy:function(e){var t,r,n;this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.name=e.name;var i=e.index;null!==i&&this.setIndex(i.clone());var a=e.attributes;for(t in a){var o=a[t];this.addAttribute(t,o.clone())}var s=e.morphAttributes;for(t in s){var l=[],u=s[t];for(r=0,n=u.length;r<n;r++)l.push(u[r].clone());this.morphAttributes[t]=l}var c=e.groups;for(r=0,n=c.length;r<n;r++){var h=c[r];this.addGroup(h.start,h.count,h.materialIndex)}var d=e.boundingBox;null!==d&&(this.boundingBox=d.clone());var f=e.boundingSphere;return null!==f&&(this.boundingSphere=f.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Dn.prototype=Object.create(gn.prototype),Dn.prototype.constructor=Dn,Fn.prototype=Object.create(Un.prototype),Fn.prototype.constructor=Fn,Bn.prototype=Object.create(gn.prototype),Bn.prototype.constructor=Bn,zn.prototype=Object.create(Un.prototype),zn.prototype.constructor=zn,jn.prototype=Object.create(Xr.prototype),jn.prototype.constructor=jn,jn.prototype.isMeshBasicMaterial=!0,jn.prototype.copy=function(e){return Xr.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this},Vn.prototype=Object.create(Xr.prototype),Vn.prototype.constructor=Vn,Vn.prototype.isShaderMaterial=!0,Vn.prototype.copy=function(e){return Xr.prototype.copy.call(this,e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Ir.clone(e.uniforms),this.defines=e.defines,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.lights=e.lights,this.clipping=e.clipping,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this.extensions=e.extensions,this},Vn.prototype.toJSON=function(e){var t=Xr.prototype.toJSON.call(this,e);return t.uniforms=this.uniforms,t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t},Object.assign(Gn.prototype,{set:function(e,t){return this.origin.copy(e),this.direction.copy(t),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this},at:function(e,t){return(t||new Pt).copy(this.direction).multiplyScalar(e).add(this.origin)},lookAt:function(e){return this.direction.copy(e).sub(this.origin).normalize(),this},recast:function(){var e=new Pt;return function(t){return this.origin.copy(this.at(t,e)),this}}(),closestPointToPoint:function(e,t){var r=t||new Pt;r.subVectors(e,this.origin);var n=r.dot(this.direction);return n<0?r.copy(this.origin):r.copy(this.direction).multiplyScalar(n).add(this.origin)},distanceToPoint:function(e){return Math.sqrt(this.distanceSqToPoint(e))},distanceSqToPoint:function(){var e=new Pt;return function(t){var r=e.subVectors(t,this.origin).dot(this.direction);return r<0?this.origin.distanceToSquared(t):(e.copy(this.direction).multiplyScalar(r).add(this.origin),e.distanceToSquared(t))}}(),distanceSqToSegment:(Pn=new Pt,Hn=new Pt,kn=new Pt,function(e,t,r,n){Pn.copy(e).add(t).multiplyScalar(.5),Hn.copy(t).sub(e).normalize(),kn.copy(this.origin).sub(Pn);var i,a,o,s,l=.5*e.distanceTo(t),u=-this.direction.dot(Hn),c=kn.dot(this.direction),h=-kn.dot(Hn),d=kn.lengthSq(),f=Math.abs(1-u*u);if(f>0)if(a=u*c-h,s=l*f,(i=u*h-c)>=0)if(a>=-s)if(a<=s){var p=1/f;o=(i*=p)*(i+u*(a*=p)+2*c)+a*(u*i+a+2*h)+d}else a=l,o=-(i=Math.max(0,-(u*a+c)))*i+a*(a+2*h)+d;else a=-l,o=-(i=Math.max(0,-(u*a+c)))*i+a*(a+2*h)+d;else a<=-s?o=-(i=Math.max(0,-(-u*l+c)))*i+(a=i>0?-l:Math.min(Math.max(-l,-h),l))*(a+2*h)+d:a<=s?(i=0,o=(a=Math.min(Math.max(-l,-h),l))*(a+2*h)+d):o=-(i=Math.max(0,-(u*l+c)))*i+(a=i>0?l:Math.min(Math.max(-l,-h),l))*(a+2*h)+d;else a=u>0?-l:l,o=-(i=Math.max(0,-(u*a+c)))*i+a*(a+2*h)+d;return r&&r.copy(this.direction).multiplyScalar(i).add(this.origin),n&&n.copy(Hn).multiplyScalar(a).add(Pn),o}),intersectSphere:function(){var e=new Pt;return function(t,r){e.subVectors(t.center,this.origin);var n=e.dot(this.direction),i=e.dot(e)-n*n,a=t.radius*t.radius;if(i>a)return null;var o=Math.sqrt(a-i),s=n-o,l=n+o;return s<0&&l<0?null:s<0?this.at(l,r):this.at(s,r)}}(),intersectsSphere:function(e){return this.distanceToPoint(e.center)<=e.radius},distanceToPlane:function(e){var t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;var r=-(this.origin.dot(e.normal)+e.constant)/t;return r>=0?r:null},intersectPlane:function(e,t){var r=this.distanceToPlane(e);return null===r?null:this.at(r,t)},intersectsPlane:function(e){var t=e.distanceToPoint(this.origin);return 0===t||e.normal.dot(this.direction)*t<0},intersectBox:function(e,t){var r,n,i,a,o,s,l=1/this.direction.x,u=1/this.direction.y,c=1/this.direction.z,h=this.origin;return l>=0?(r=(e.min.x-h.x)*l,n=(e.max.x-h.x)*l):(r=(e.max.x-h.x)*l,n=(e.min.x-h.x)*l),u>=0?(i=(e.min.y-h.y)*u,a=(e.max.y-h.y)*u):(i=(e.max.y-h.y)*u,a=(e.min.y-h.y)*u),r>a||i>n?null:((i>r||r!=r)&&(r=i),(a<n||n!=n)&&(n=a),c>=0?(o=(e.min.z-h.z)*c,s=(e.max.z-h.z)*c):(o=(e.max.z-h.z)*c,s=(e.min.z-h.z)*c),r>s||o>n?null:((o>r||r!=r)&&(r=o),(s<n||n!=n)&&(n=s),n<0?null:this.at(r>=0?r:n,t)))},intersectsBox:(In=new Pt,function(e){return null!==this.intersectBox(e,In)}),intersectTriangle:function(){var e=new Pt,t=new Pt,r=new Pt,n=new Pt;return function(i,a,o,s,l){t.subVectors(a,i),r.subVectors(o,i),n.crossVectors(t,r);var u,c=this.direction.dot(n);if(c>0){if(s)return null;u=1}else{if(!(c<0))return null;u=-1,c=-c}e.subVectors(this.origin,i);var h=u*this.direction.dot(r.crossVectors(e,r));if(h<0)return null;var d=u*this.direction.dot(t.cross(e));if(d<0)return null;if(h+d>c)return null;var f=-u*e.dot(n);return f<0?null:this.at(f/c,l)}}(),applyMatrix4:function(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this},equals:function(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}}),Object.assign(Wn.prototype,{set:function(e,t){return this.start.copy(e),this.end.copy(t),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.start.copy(e.start),this.end.copy(e.end),this},getCenter:function(e){return(e||new Pt).addVectors(this.start,this.end).multiplyScalar(.5)},delta:function(e){return(e||new Pt).subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},at:function(e,t){var r=t||new Pt;return this.delta(r).multiplyScalar(e).add(this.start)},closestPointToPointParameter:(Ln=new Pt,On=new Pt,function(e,t){Ln.subVectors(e,this.start),On.subVectors(this.end,this.start);var r=On.dot(On),n=On.dot(Ln)/r;return t&&(n=Ct.clamp(n,0,1)),n}),closestPointToPoint:function(e,t,r){var n=this.closestPointToPointParameter(e,t),i=r||new Pt;return this.delta(i).multiplyScalar(n).add(this.start)},applyMatrix4:function(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this},equals:function(e){return e.start.equals(this.start)&&e.end.equals(this.end)}}),Object.assign(qn,{normal:(Cn=new Pt,function(e,t,r,n){var i=n||new Pt;i.subVectors(r,t),Cn.subVectors(e,t),i.cross(Cn);var a=i.lengthSq();return a>0?i.multiplyScalar(1/Math.sqrt(a)):i.set(0,0,0)}),barycoordFromPoint:function(){var e=new Pt,t=new Pt,r=new Pt;return function(n,i,a,o,s){e.subVectors(o,i),t.subVectors(a,i),r.subVectors(n,i);var l=e.dot(e),u=e.dot(t),c=e.dot(r),h=t.dot(t),d=t.dot(r),f=l*h-u*u,p=s||new Pt;if(0===f)return p.set(-2,-1,-1);var m=1/f,g=(h*c-u*d)*m,v=(l*d-u*c)*m;return p.set(1-g-v,v,g)}}(),containsPoint:function(){var e=new Pt;return function(t,r,n,i){var a=qn.barycoordFromPoint(t,r,n,i,e);return a.x>=0&&a.y>=0&&a.x+a.y<=1}}()}),Object.assign(qn.prototype,{set:function(e,t,r){return this.a.copy(e),this.b.copy(t),this.c.copy(r),this},setFromPointsAndIndices:function(e,t,r,n){return this.a.copy(e[t]),this.b.copy(e[r]),this.c.copy(e[n]),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this},area:function(){var e=new Pt,t=new Pt;return function(){return e.subVectors(this.c,this.b),t.subVectors(this.a,this.b),.5*e.cross(t).length()}}(),midpoint:function(e){return(e||new Pt).addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},normal:function(e){return qn.normal(this.a,this.b,this.c,e)},plane:function(e){return(e||new Jr).setFromCoplanarPoints(this.a,this.b,this.c)},barycoordFromPoint:function(e,t){return qn.barycoordFromPoint(e,this.a,this.b,this.c,t)},containsPoint:function(e){return qn.containsPoint(e,this.a,this.b,this.c)},closestPointToPoint:function(){var e=new Jr,t=[new Wn,new Wn,new Wn],r=new Pt,n=new Pt;return function(i,a){var o=a||new Pt,s=1/0;if(e.setFromCoplanarPoints(this.a,this.b,this.c),e.projectPoint(i,r),!0===this.containsPoint(r))o.copy(r);else{t[0].set(this.a,this.b),t[1].set(this.b,this.c),t[2].set(this.c,this.a);for(var l=0;l<t.length;l++){t[l].closestPointToPoint(r,!0,n);var u=r.distanceToSquared(n);u<s&&(s=u,o.copy(n))}}return o}}(),equals:function(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}),Xn.prototype=Object.assign(Object.create(cn.prototype),{constructor:Xn,isMesh:!0,setDrawMode:function(e){this.drawMode=e},copy:function(e){return cn.prototype.copy.call(this,e),this.drawMode=e.drawMode,void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this},updateMorphTargets:function(){var e,t,r,n=this.geometry;if(n.isBufferGeometry){var i=n.morphAttributes,a=Object.keys(i);if(a.length>0){var o=i[a[0]];if(void 0!==o)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},e=0,t=o.length;e<t;e++)r=o[e].name||String(e),this.morphTargetInfluences.push(0),this.morphTargetDictionary[r]=e}}else{var s=n.morphTargets;if(void 0!==s&&s.length>0)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},e=0,t=s.length;e<t;e++)r=s[e].name||String(e),this.morphTargetInfluences.push(0),this.morphTargetDictionary[r]=e}},raycast:function(){var e=new Ot,t=new Gn,r=new Qr,n=new Pt,i=new Pt,a=new Pt,o=new Pt,s=new Pt,l=new Pt,u=new Lt,c=new Lt,h=new Lt,d=new Pt,f=new Pt,p=new Pt;function m(e,t,r,n,i,a,o){return qn.barycoordFromPoint(e,t,r,n,d),i.multiplyScalar(d.x),a.multiplyScalar(d.y),o.multiplyScalar(d.z),i.add(a).add(o),i.clone()}function g(e,t,r,n,i,a,o,s){if(null===(t.side===_?n.intersectTriangle(o,a,i,!0,s):n.intersectTriangle(i,a,o,t.side!==S,s)))return null;p.copy(s),p.applyMatrix4(e.matrixWorld);var l=r.ray.origin.distanceTo(p);return l<r.near||l>r.far?null:{distance:l,point:p.clone(),object:e}}function v(e,t,r,o,s,l,d,p){n.fromBufferAttribute(o,l),i.fromBufferAttribute(o,d),a.fromBufferAttribute(o,p);var v=g(e,e.material,t,r,n,i,a,f);return v&&(s&&(u.fromBufferAttribute(s,l),c.fromBufferAttribute(s,d),h.fromBufferAttribute(s,p),v.uv=m(f,n,i,a,u,c,h)),v.face=new fn(l,d,p,qn.normal(n,i,a)),v.faceIndex=l),v}return function(d,p){var y,b=this.geometry,E=this.material,x=this.matrixWorld;if(void 0!==E&&(null===b.boundingSphere&&b.computeBoundingSphere(),r.copy(b.boundingSphere),r.applyMatrix4(x),!1!==d.ray.intersectsSphere(r)&&(e.getInverse(x),t.copy(d.ray).applyMatrix4(e),null===b.boundingBox||!1!==t.intersectsBox(b.boundingBox))))if(b.isBufferGeometry){var w,T,_,S,M,R=b.index,A=b.attributes.position,C=b.attributes.uv;if(null!==R)for(S=0,M=R.count;S<M;S+=3)w=R.getX(S),T=R.getX(S+1),_=R.getX(S+2),(y=v(this,d,t,A,C,w,T,_))&&(y.faceIndex=Math.floor(S/3),p.push(y));else if(void 0!==A)for(S=0,M=A.count;S<M;S+=3)(y=v(this,d,t,A,C,w=S,T=S+1,_=S+2))&&(y.index=w,p.push(y))}else if(b.isGeometry){var L,O,I,P,H=Array.isArray(E),k=b.vertices,N=b.faces,U=b.faceVertexUvs[0];U.length>0&&(P=U);for(var D=0,F=N.length;D<F;D++){var B=N[D],z=H?E[B.materialIndex]:E;if(void 0!==z){if(L=k[B.a],O=k[B.b],I=k[B.c],!0===z.morphTargets){var j=b.morphTargets,V=this.morphTargetInfluences;n.set(0,0,0),i.set(0,0,0),a.set(0,0,0);for(var G=0,W=j.length;G<W;G++){var q=V[G];if(0!==q){var X=j[G].vertices;n.addScaledVector(o.subVectors(X[B.a],L),q),i.addScaledVector(s.subVectors(X[B.b],O),q),a.addScaledVector(l.subVectors(X[B.c],I),q)}}n.add(L),i.add(O),a.add(I),L=n,O=i,I=a}if(y=g(this,z,d,t,L,O,I,f)){if(P&&P[D]){var Y=P[D];u.copy(Y[0]),c.copy(Y[1]),h.copy(Y[2]),y.uv=m(f,L,O,I,u,c,h)}y.face=B,y.faceIndex=D,p.push(y)}}}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}});var ui,ci,hi,di,fi,pi,mi=0;function gi(e){switch(e){case bt:return["Linear","( value )"];case Et:return["sRGB","( value )"];case wt:return["RGBE","( value )"];case _t:return["RGBM","( value, 7.0 )"];case St:return["RGBM","( value, 16.0 )"];case Mt:return["RGBD","( value, 256.0 )"];case xt:return["Gamma","( value, float( GAMMA_FACTOR ) )"];default:throw new Error("unsupported encoding: "+e)}}function vi(e,t){var r=gi(t);return"vec4 "+e+"( vec4 value ) { return "+r[0]+"ToLinear"+r[1]+"; }"}function yi(e,t){var r=gi(t);return"vec4 "+e+"( vec4 value ) { return LinearTo"+r[0]+r[1]+"; }"}function bi(e,t){var r;switch(t){case he:r="Linear";break;case de:r="Reinhard";break;case fe:r="Uncharted2";break;case pe:r="OptimizedCineon";break;default:throw new Error("unsupported toneMapping: "+t)}return"vec3 "+e+"( vec3 color ) { return "+r+"ToneMapping( color ); }"}function Ei(e,t,r){return[(e=e||{}).derivatives||t.envMapCubeUV||t.bumpMap||t.normalMap||t.flatShading?"#extension GL_OES_standard_derivatives : enable":"",(e.fragDepth||t.logarithmicDepthBuffer)&&r.get("EXT_frag_depth")?"#extension GL_EXT_frag_depth : enable":"",e.drawBuffers&&r.get("WEBGL_draw_buffers")?"#extension GL_EXT_draw_buffers : require":"",(e.shaderTextureLOD||t.envMap)&&r.get("EXT_shader_texture_lod")?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Ti).join("\n")}function xi(e){var t=[];for(var r in e){var n=e[r];!1!==n&&t.push("#define "+r+" "+n)}return t.join("\n")}function wi(e,t){for(var r={},n=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES),i=0;i<n;i++){var a=e.getActiveAttrib(t,i).name;r[a]=e.getAttribLocation(t,a)}return r}function Ti(e){return""!==e}function _i(e,t){return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights)}function Si(e){var t=/^[ \t]*#include +<([\w\d.]+)>/gm;function r(e,t){var r=Pr[t];if(void 0===r)throw new Error("Can not resolve #include <"+t+">");return Si(r)}return e.replace(t,r)}function Mi(e){var t=/for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g;function r(e,t,r,n){for(var i="",a=parseInt(t);a<parseInt(r);a++)i+=n.replace(/\[ i \]/g,"[ "+a+" ]");return i}return e.replace(t,r)}function Ri(e,t,r,i,a,o){var s=e.context,l=i.defines,u=a.vertexShader,c=a.fragmentShader,h="SHADOWMAP_TYPE_BASIC";o.shadowMapType===x?h="SHADOWMAP_TYPE_PCF":o.shadowMapType===w&&(h="SHADOWMAP_TYPE_PCF_SOFT");var d="ENVMAP_TYPE_CUBE",f="ENVMAP_MODE_REFLECTION",p="ENVMAP_BLENDING_MULTIPLY";if(o.envMap){switch(i.envMap.mapping){case ge:case ve:d="ENVMAP_TYPE_CUBE";break;case xe:case we:d="ENVMAP_TYPE_CUBE_UV";break;case ye:case be:d="ENVMAP_TYPE_EQUIREC";break;case Ee:d="ENVMAP_TYPE_SPHERE"}switch(i.envMap.mapping){case ve:case be:f="ENVMAP_MODE_REFRACTION"}switch(i.combine){case se:p="ENVMAP_BLENDING_MULTIPLY";break;case le:p="ENVMAP_BLENDING_MIX";break;case ue:p="ENVMAP_BLENDING_ADD"}}var m,g,v=e.gammaFactor>0?e.gammaFactor:1,y=Ei(i.extensions,o,t),b=xi(l),E=s.createProgram();i.isRawShaderMaterial?((m=[b].filter(Ti).join("\n")).length>0&&(m+="\n"),(g=[y,b].filter(Ti).join("\n")).length>0&&(g+="\n")):(m=["precision "+o.precision+" float;","precision "+o.precision+" int;","#define SHADER_NAME "+a.name,b,o.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+v,"#define MAX_BONES "+o.maxBones,o.useFog&&o.fog?"#define USE_FOG":"",o.useFog&&o.fogExp?"#define FOG_EXP2":"",o.map?"#define USE_MAP":"",o.envMap?"#define USE_ENVMAP":"",o.envMap?"#define "+f:"",o.lightMap?"#define USE_LIGHTMAP":"",o.aoMap?"#define USE_AOMAP":"",o.emissiveMap?"#define USE_EMISSIVEMAP":"",o.bumpMap?"#define USE_BUMPMAP":"",o.normalMap?"#define USE_NORMALMAP":"",o.displacementMap&&o.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",o.specularMap?"#define USE_SPECULARMAP":"",o.roughnessMap?"#define USE_ROUGHNESSMAP":"",o.metalnessMap?"#define USE_METALNESSMAP":"",o.alphaMap?"#define USE_ALPHAMAP":"",o.vertexColors?"#define USE_COLOR":"",o.flatShading?"#define FLAT_SHADED":"",o.skinning?"#define USE_SKINNING":"",o.useVertexTexture?"#define BONE_TEXTURE":"",o.morphTargets?"#define USE_MORPHTARGETS":"",o.morphNormals&&!1===o.flatShading?"#define USE_MORPHNORMALS":"",o.doubleSided?"#define DOUBLE_SIDED":"",o.flipSided?"#define FLIP_SIDED":"","#define NUM_CLIPPING_PLANES "+o.numClippingPlanes,o.shadowMapEnabled?"#define USE_SHADOWMAP":"",o.shadowMapEnabled?"#define "+h:"",o.sizeAttenuation?"#define USE_SIZEATTENUATION":"",o.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",o.logarithmicDepthBuffer&&t.get("EXT_frag_depth")?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_COLOR","\tattribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(Ti).join("\n"),g=[y,"precision "+o.precision+" float;","precision "+o.precision+" int;","#define SHADER_NAME "+a.name,b,o.alphaTest?"#define ALPHATEST "+o.alphaTest:"","#define GAMMA_FACTOR "+v,o.useFog&&o.fog?"#define USE_FOG":"",o.useFog&&o.fogExp?"#define FOG_EXP2":"",o.map?"#define USE_MAP":"",o.envMap?"#define USE_ENVMAP":"",o.envMap?"#define "+d:"",o.envMap?"#define "+f:"",o.envMap?"#define "+p:"",o.lightMap?"#define USE_LIGHTMAP":"",o.aoMap?"#define USE_AOMAP":"",o.emissiveMap?"#define USE_EMISSIVEMAP":"",o.bumpMap?"#define USE_BUMPMAP":"",o.normalMap?"#define USE_NORMALMAP":"",o.specularMap?"#define USE_SPECULARMAP":"",o.roughnessMap?"#define USE_ROUGHNESSMAP":"",o.metalnessMap?"#define USE_METALNESSMAP":"",o.alphaMap?"#define USE_ALPHAMAP":"",o.vertexColors?"#define USE_COLOR":"",o.gradientMap?"#define USE_GRADIENTMAP":"",o.flatShading?"#define FLAT_SHADED":"",o.doubleSided?"#define DOUBLE_SIDED":"",o.flipSided?"#define FLIP_SIDED":"","#define NUM_CLIPPING_PLANES "+o.numClippingPlanes,"#define UNION_CLIPPING_PLANES "+(o.numClippingPlanes-o.numClipIntersection),o.shadowMapEnabled?"#define USE_SHADOWMAP":"",o.shadowMapEnabled?"#define "+h:"",o.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",o.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",o.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",o.logarithmicDepthBuffer&&t.get("EXT_frag_depth")?"#define USE_LOGDEPTHBUF_EXT":"",o.envMap&&t.get("EXT_shader_texture_lod")?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;",o.toneMapping!==ce?"#define TONE_MAPPING":"",o.toneMapping!==ce?Pr.tonemapping_pars_fragment:"",o.toneMapping!==ce?bi("toneMapping",o.toneMapping):"",o.dithering?"#define DITHERING":"",o.outputEncoding||o.mapEncoding||o.envMapEncoding||o.emissiveMapEncoding?Pr.encodings_pars_fragment:"",o.mapEncoding?vi("mapTexelToLinear",o.mapEncoding):"",o.envMapEncoding?vi("envMapTexelToLinear",o.envMapEncoding):"",o.emissiveMapEncoding?vi("emissiveMapTexelToLinear",o.emissiveMapEncoding):"",o.outputEncoding?yi("linearToOutputTexel",o.outputEncoding):"",o.depthPacking?"#define DEPTH_PACKING "+i.depthPacking:"","\n"].filter(Ti).join("\n")),u=_i(u=Si(u),o),c=_i(c=Si(c),o),i.isShaderMaterial||(u=Mi(u),c=Mi(c));var T=m+u,_=g+c,S=li(s,s.VERTEX_SHADER,T),M=li(s,s.FRAGMENT_SHADER,_);s.attachShader(E,S),s.attachShader(E,M),void 0!==i.index0AttributeName?s.bindAttribLocation(E,0,i.index0AttributeName):!0===o.morphTargets&&s.bindAttribLocation(E,0,"position"),s.linkProgram(E);var R,A,C=s.getProgramInfoLog(E),L=s.getShaderInfoLog(S),O=s.getShaderInfoLog(M),I=!0,P=!0;return!1===s.getProgramParameter(E,s.LINK_STATUS)?(I=!1,n.error("THREE.WebGLProgram: shader error: ",s.getError(),"gl.VALIDATE_STATUS",s.getProgramParameter(E,s.VALIDATE_STATUS),"gl.getProgramInfoLog",C,L,O)):""!==C?n.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",C):""!==L&&""!==O||(P=!1),P&&(this.diagnostics={runnable:I,material:i,programLog:C,vertexShader:{log:L,prefix:m},fragmentShader:{log:O,prefix:g}}),s.deleteShader(S),s.deleteShader(M),this.getUniforms=function(){return void 0===R&&(R=new Ar(s,E,e)),R},this.getAttributes=function(){return void 0===A&&(A=wi(s,E)),A},this.destroy=function(){s.deleteProgram(E),this.program=void 0},Object.defineProperties(this,{uniforms:{get:function(){return n.warn("THREE.WebGLProgram: .uniforms is now .getUniforms()."),this.getUniforms()}},attributes:{get:function(){return n.warn("THREE.WebGLProgram: .attributes is now .getAttributes()."),this.getAttributes()}}}),this.id=mi++,this.code=r,this.usedTimes=1,this.program=E,this.vertexShader=S,this.fragmentShader=M,this}function Ai(e,t,r){var i=[],a={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"phong",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow"},o=["precision","supportsVertexTextures","map","mapEncoding","envMap","envMapMode","envMapEncoding","lightMap","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","displacementMap","specularMap","roughnessMap","metalnessMap","gradientMap","alphaMap","combine","vertexColors","fog","useFog","fogExp","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","maxMorphTargets","maxMorphNormals","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","alphaTest","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking","dithering"];function s(e){var t=e.skeleton.bones;if(r.floatVertexTextures)return 1024;var i=r.maxVertexUniforms,a=Math.floor((i-20)/4),o=Math.min(a,t.length);return o<t.length?(n.warn("THREE.WebGLRenderer: Skeleton has "+t.length+" bones. This GPU supports "+o+"."),0):o}function l(e,t){var r;return e?e.isTexture?r=e.encoding:e.isWebGLRenderTarget&&(n.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),r=e.texture.encoding):r=bt,r===bt&&t&&(r=xt),r}this.getParameters=function(t,i,o,u,c,h,d){var f=a[t.type],p=d.isSkinnedMesh?s(d):0,m=r.precision;null!==t.precision&&(m=r.getMaxPrecision(t.precision))!==t.precision&&n.warn("THREE.WebGLProgram.getParameters:",t.precision,"not supported, using",m,"instead.");var g=e.getRenderTarget();return{shaderID:f,precision:m,supportsVertexTextures:r.vertexTextures,outputEncoding:l(g?g.texture:null,e.gammaOutput),map:!!t.map,mapEncoding:l(t.map,e.gammaInput),envMap:!!t.envMap,envMapMode:t.envMap&&t.envMap.mapping,envMapEncoding:l(t.envMap,e.gammaInput),envMapCubeUV:!!t.envMap&&(t.envMap.mapping===xe||t.envMap.mapping===we),lightMap:!!t.lightMap,aoMap:!!t.aoMap,emissiveMap:!!t.emissiveMap,emissiveMapEncoding:l(t.emissiveMap,e.gammaInput),bumpMap:!!t.bumpMap,normalMap:!!t.normalMap,displacementMap:!!t.displacementMap,roughnessMap:!!t.roughnessMap,metalnessMap:!!t.metalnessMap,specularMap:!!t.specularMap,alphaMap:!!t.alphaMap,gradientMap:!!t.gradientMap,combine:t.combine,vertexColors:t.vertexColors,fog:!!u,useFog:t.fog,fogExp:u&&u.isFogExp2,flatShading:t.flatShading,sizeAttenuation:t.sizeAttenuation,logarithmicDepthBuffer:r.logarithmicDepthBuffer,skinning:t.skinning&&p>0,maxBones:p,useVertexTexture:r.floatVertexTextures,morphTargets:t.morphTargets,morphNormals:t.morphNormals,maxMorphTargets:e.maxMorphTargets,maxMorphNormals:e.maxMorphNormals,numDirLights:i.directional.length,numPointLights:i.point.length,numSpotLights:i.spot.length,numRectAreaLights:i.rectArea.length,numHemiLights:i.hemi.length,numClippingPlanes:c,numClipIntersection:h,dithering:t.dithering,shadowMapEnabled:e.shadowMap.enabled&&d.receiveShadow&&o.length>0,shadowMapType:e.shadowMap.type,toneMapping:e.toneMapping,physicallyCorrectLights:e.physicallyCorrectLights,premultipliedAlpha:t.premultipliedAlpha,alphaTest:t.alphaTest,doubleSided:t.side===S,flipSided:t.side===_,depthPacking:void 0!==t.depthPacking&&t.depthPacking}},this.getProgramCode=function(t,r){var n=[];if(r.shaderID?n.push(r.shaderID):(n.push(t.fragmentShader),n.push(t.vertexShader)),void 0!==t.defines)for(var i in t.defines)n.push(i),n.push(t.defines[i]);for(var a=0;a<o.length;a++)n.push(r[o[a]]);return n.push(t.onBeforeCompile.toString()),n.push(e.gammaOutput),n.join()},this.acquireProgram=function(r,n,a,o){for(var s,l=0,u=i.length;l<u;l++){var c=i[l];if(c.code===o){++(s=c).usedTimes;break}}return void 0===s&&(s=new Ri(e,t,o,r,n,a),i.push(s)),s},this.releaseProgram=function(e){if(0==--e.usedTimes){var t=i.indexOf(e);i[t]=i[i.length-1],i.pop(),e.destroy()}},this.programs=i}function Ci(e,t,r,i,a,o,s){var l="undefined"!=typeof WebGL2RenderingContext&&e instanceof window.WebGL2RenderingContext,u={};function c(e,t){if(e.width>t||e.height>t){var r=t/Math.max(e.width,e.height),i=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");return i.width=Math.floor(e.width*r),i.height=Math.floor(e.height*r),i.getContext("2d").drawImage(e,0,0,e.width,e.height,0,0,i.width,i.height),n.warn("THREE.WebGLRenderer: image is too big ("+e.width+"x"+e.height+"). Resized to "+i.width+"x"+i.height,e),i}return e}function h(e){return Ct.isPowerOfTwo(e.width)&&Ct.isPowerOfTwo(e.height)}function d(e){if(e instanceof HTMLImageElement||e instanceof HTMLCanvasElement||e instanceof ImageBitmap){var t=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");return t.width=Ct.floorPowerOfTwo(e.width),t.height=Ct.floorPowerOfTwo(e.height),t.getContext("2d").drawImage(e,0,0,t.width,t.height),n.warn("THREE.WebGLRenderer: image is not power of two ("+e.width+"x"+e.height+"). Resized to "+t.width+"x"+t.height,e),t}return e}function f(e){return e.wrapS!==_e||e.wrapT!==_e||e.minFilter!==Me&&e.minFilter!==Ce}function p(e,t){return e.generateMipmaps&&t&&e.minFilter!==Me&&e.minFilter!==Ce}function m(t){return t===Me||t===Re||t===Ae?e.NEAREST:e.LINEAR}function g(e){var t=e.target;t.removeEventListener("dispose",g),y(t),t.isVideoTexture&&delete u[t.id],s.textures--}function v(e){var t=e.target;t.removeEventListener("dispose",v),b(t),s.textures--}function y(t){var r=i.get(t);if(t.image&&r.__image__webglTextureCube)e.deleteTexture(r.__image__webglTextureCube);else{if(void 0===r.__webglInit)return;e.deleteTexture(r.__webglTexture)}i.remove(t)}function b(t){var r=i.get(t),n=i.get(t.texture);if(t){if(void 0!==n.__webglTexture&&e.deleteTexture(n.__webglTexture),t.depthTexture&&t.depthTexture.dispose(),t.isWebGLRenderTargetCube)for(var a=0;a<6;a++)e.deleteFramebuffer(r.__webglFramebuffer[a]),r.__webglDepthbuffer&&e.deleteRenderbuffer(r.__webglDepthbuffer[a]);else e.deleteFramebuffer(r.__webglFramebuffer),r.__webglDepthbuffer&&e.deleteRenderbuffer(r.__webglDepthbuffer);i.remove(t.texture),i.remove(t)}}function E(t,a){var o=i.get(t);if(t.version>0&&o.__version!==t.version){var s=t.image;if(void 0===s)n.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined",t);else{if(!1!==s.complete)return void _(o,t,a);n.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete",t)}}r.activeTexture(e.TEXTURE0+a),r.bindTexture(e.TEXTURE_2D,o.__webglTexture)}function x(t,l){var u=i.get(t);if(6===t.image.length)if(t.version>0&&u.__version!==t.version){u.__image__webglTextureCube||(t.addEventListener("dispose",g),u.__image__webglTextureCube=e.createTexture(),s.textures++),r.activeTexture(e.TEXTURE0+l),r.bindTexture(e.TEXTURE_CUBE_MAP,u.__image__webglTextureCube),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,t.flipY);for(var d=t&&t.isCompressedTexture,f=t.image[0]&&t.image[0].isDataTexture,m=[],v=0;v<6;v++)m[v]=d||f?f?t.image[v].image:t.image[v]:c(t.image[v],a.maxCubemapSize);var y=h(m[0]),b=o.convert(t.format),E=o.convert(t.type);for(T(e.TEXTURE_CUBE_MAP,t,y),v=0;v<6;v++)if(d)for(var x,w=m[v].mipmaps,_=0,S=w.length;_<S;_++)x=w[_],t.format!==qe&&t.format!==We?r.getCompressedTextureFormats().indexOf(b)>-1?r.compressedTexImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+v,_,b,x.width,x.height,0,x.data):n.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):r.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+v,_,b,x.width,x.height,0,b,E,x.data);else f?r.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+v,0,b,m[v].width,m[v].height,0,b,E,m[v].data):r.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+v,0,b,b,E,m[v]);p(t,y)&&e.generateMipmap(e.TEXTURE_CUBE_MAP),u.__version=t.version,t.onUpdate&&t.onUpdate(t)}else r.activeTexture(e.TEXTURE0+l),r.bindTexture(e.TEXTURE_CUBE_MAP,u.__image__webglTextureCube)}function w(t,n){r.activeTexture(e.TEXTURE0+n),r.bindTexture(e.TEXTURE_CUBE_MAP,i.get(t).__webglTexture)}function T(r,s,l){var u;if(l?(e.texParameteri(r,e.TEXTURE_WRAP_S,o.convert(s.wrapS)),e.texParameteri(r,e.TEXTURE_WRAP_T,o.convert(s.wrapT)),e.texParameteri(r,e.TEXTURE_MAG_FILTER,o.convert(s.magFilter)),e.texParameteri(r,e.TEXTURE_MIN_FILTER,o.convert(s.minFilter))):(e.texParameteri(r,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(r,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),s.wrapS===_e&&s.wrapT===_e||n.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping.",s),e.texParameteri(r,e.TEXTURE_MAG_FILTER,m(s.magFilter)),e.texParameteri(r,e.TEXTURE_MIN_FILTER,m(s.minFilter)),s.minFilter!==Me&&s.minFilter!==Ce&&n.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.",s)),u=t.get("EXT_texture_filter_anisotropic")){if(s.type===De&&null===t.get("OES_texture_float_linear"))return;if(s.type===Fe&&null===t.get("OES_texture_half_float_linear"))return;(s.anisotropy>1||i.get(s).__currentAnisotropy)&&(e.texParameterf(r,u.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(s.anisotropy,a.getMaxAnisotropy())),i.get(s).__currentAnisotropy=s.anisotropy)}}function _(t,i,m){void 0===t.__webglInit&&(t.__webglInit=!0,i.addEventListener("dispose",g),t.__webglTexture=e.createTexture(),i.isVideoTexture&&(u[i.id]=i),s.textures++),r.activeTexture(e.TEXTURE0+m),r.bindTexture(e.TEXTURE_2D,t.__webglTexture),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,i.flipY),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i.premultiplyAlpha),e.pixelStorei(e.UNPACK_ALIGNMENT,i.unpackAlignment);var v=c(i.image,a.maxTextureSize);f(i)&&!1===h(v)&&(v=d(v));var y=h(v),b=o.convert(i.format),E=o.convert(i.type);T(e.TEXTURE_2D,i,y);var x,w=i.mipmaps;if(i.isDepthTexture){var _=e.DEPTH_COMPONENT;if(i.type===De){if(!l)throw new Error("Float Depth Texture only supported in WebGL2.0");_=e.DEPTH_COMPONENT32F}else l&&(_=e.DEPTH_COMPONENT16);i.format===Ke&&_===e.DEPTH_COMPONENT&&i.type!==ke&&i.type!==Ue&&(n.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),i.type=ke,E=o.convert(i.type)),i.format===Qe&&(_=e.DEPTH_STENCIL,i.type!==Ve&&(n.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),i.type=Ve,E=o.convert(i.type))),r.texImage2D(e.TEXTURE_2D,0,_,v.width,v.height,0,b,E,null)}else if(i.isDataTexture)if(w.length>0&&y){for(var S=0,M=w.length;S<M;S++)x=w[S],r.texImage2D(e.TEXTURE_2D,S,b,x.width,x.height,0,b,E,x.data);i.generateMipmaps=!1}else r.texImage2D(e.TEXTURE_2D,0,b,v.width,v.height,0,b,E,v.data);else if(i.isCompressedTexture)for(S=0,M=w.length;S<M;S++)x=w[S],i.format!==qe&&i.format!==We?r.getCompressedTextureFormats().indexOf(b)>-1?r.compressedTexImage2D(e.TEXTURE_2D,S,b,x.width,x.height,0,x.data):n.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):r.texImage2D(e.TEXTURE_2D,S,b,x.width,x.height,0,b,E,x.data);else if(w.length>0&&y){for(S=0,M=w.length;S<M;S++)x=w[S],r.texImage2D(e.TEXTURE_2D,S,b,b,E,x);i.generateMipmaps=!1}else r.texImage2D(e.TEXTURE_2D,0,b,b,E,v);p(i,y)&&e.generateMipmap(e.TEXTURE_2D),t.__version=i.version,i.onUpdate&&i.onUpdate(i)}function S(t,n,a,s){var l=o.convert(n.texture.format),u=o.convert(n.texture.type);r.texImage2D(s,0,l,n.width,n.height,0,l,u,null),e.bindFramebuffer(e.FRAMEBUFFER,t),e.framebufferTexture2D(e.FRAMEBUFFER,a,s,i.get(n.texture).__webglTexture,0),e.bindFramebuffer(e.FRAMEBUFFER,null)}function M(t,r){e.bindRenderbuffer(e.RENDERBUFFER,t),r.depthBuffer&&!r.stencilBuffer?(e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_COMPONENT16,r.width,r.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.RENDERBUFFER,t)):r.depthBuffer&&r.stencilBuffer?(e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,r.width,r.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.RENDERBUFFER,t)):e.renderbufferStorage(e.RENDERBUFFER,e.RGBA4,r.width,r.height),e.bindRenderbuffer(e.RENDERBUFFER,null)}function R(t,r){if(r&&r.isWebGLRenderTargetCube)throw new Error("Depth Texture with cube render targets is not supported");if(e.bindFramebuffer(e.FRAMEBUFFER,t),!r.depthTexture||!r.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");i.get(r.depthTexture).__webglTexture&&r.depthTexture.image.width===r.width&&r.depthTexture.image.height===r.height||(r.depthTexture.image.width=r.width,r.depthTexture.image.height=r.height,r.depthTexture.needsUpdate=!0),E(r.depthTexture,0);var n=i.get(r.depthTexture).__webglTexture;if(r.depthTexture.format===Ke)e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.TEXTURE_2D,n,0);else{if(r.depthTexture.format!==Qe)throw new Error("Unknown depthTexture format");e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.TEXTURE_2D,n,0)}}function A(t){var r=i.get(t),n=!0===t.isWebGLRenderTargetCube;if(t.depthTexture){if(n)throw new Error("target.depthTexture not supported in Cube render targets");R(r.__webglFramebuffer,t)}else if(n){r.__webglDepthbuffer=[];for(var a=0;a<6;a++)e.bindFramebuffer(e.FRAMEBUFFER,r.__webglFramebuffer[a]),r.__webglDepthbuffer[a]=e.createRenderbuffer(),M(r.__webglDepthbuffer[a],t)}else e.bindFramebuffer(e.FRAMEBUFFER,r.__webglFramebuffer),r.__webglDepthbuffer=e.createRenderbuffer(),M(r.__webglDepthbuffer,t);e.bindFramebuffer(e.FRAMEBUFFER,null)}function C(t){var n=i.get(t),a=i.get(t.texture);t.addEventListener("dispose",v),a.__webglTexture=e.createTexture(),s.textures++;var o=!0===t.isWebGLRenderTargetCube,l=h(t);if(o){n.__webglFramebuffer=[];for(var u=0;u<6;u++)n.__webglFramebuffer[u]=e.createFramebuffer()}else n.__webglFramebuffer=e.createFramebuffer();if(o){for(r.bindTexture(e.TEXTURE_CUBE_MAP,a.__webglTexture),T(e.TEXTURE_CUBE_MAP,t.texture,l),u=0;u<6;u++)S(n.__webglFramebuffer[u],t,e.COLOR_ATTACHMENT0,e.TEXTURE_CUBE_MAP_POSITIVE_X+u);p(t.texture,l)&&e.generateMipmap(e.TEXTURE_CUBE_MAP),r.bindTexture(e.TEXTURE_CUBE_MAP,null)}else r.bindTexture(e.TEXTURE_2D,a.__webglTexture),T(e.TEXTURE_2D,t.texture,l),S(n.__webglFramebuffer,t,e.COLOR_ATTACHMENT0,e.TEXTURE_2D),p(t.texture,l)&&e.generateMipmap(e.TEXTURE_2D),r.bindTexture(e.TEXTURE_2D,null);t.depthBuffer&&A(t)}function L(t){var n=t.texture;if(p(n,h(t))){var a=t.isWebGLRenderTargetCube?e.TEXTURE_CUBE_MAP:e.TEXTURE_2D,o=i.get(n).__webglTexture;r.bindTexture(a,o),e.generateMipmap(a),r.bindTexture(a,null)}}function O(){for(var e in u)u[e].update()}this.setTexture2D=E,this.setTextureCube=x,this.setTextureCubeDynamic=w,this.setupRenderTarget=C,this.updateRenderTargetMipmap=L,this.updateVideoTextures=O}function Li(){var e={};function t(t){var r=t.uuid,n=e[r];return void 0===n&&(n={},e[r]=n),n}function r(t){delete e[t.uuid]}function n(){e={}}return{get:t,remove:r,clear:n}}function Oi(e,t,r){function i(){var t=!1,r=new Ut,n=null,i=new Ut(0,0,0,0);return{setMask:function(r){n===r||t||(e.colorMask(r,r,r,r),n=r)},setLocked:function(e){t=e},setClear:function(t,n,a,o,s){!0===s&&(t*=o,n*=o,a*=o),r.set(t,n,a,o),!1===i.equals(r)&&(e.clearColor(t,n,a,o),i.copy(r))},reset:function(){t=!1,n=null,i.set(-1,0,0,0)}}}function a(){var t=!1,r=null,n=null,i=null;return{setTest:function(t){t?le(e.DEPTH_TEST):ue(e.DEPTH_TEST)},setMask:function(n){r===n||t||(e.depthMask(n),r=n)},setFunc:function(t){if(n!==t){if(t)switch(t){case $:e.depthFunc(e.NEVER);break;case ee:e.depthFunc(e.ALWAYS);break;case te:e.depthFunc(e.LESS);break;case re:e.depthFunc(e.LEQUAL);break;case ne:e.depthFunc(e.EQUAL);break;case ie:e.depthFunc(e.GEQUAL);break;case ae:e.depthFunc(e.GREATER);break;case oe:e.depthFunc(e.NOTEQUAL);break;default:e.depthFunc(e.LEQUAL)}else e.depthFunc(e.LEQUAL);n=t}},setLocked:function(e){t=e},setClear:function(t){i!==t&&(e.clearDepth(t),i=t)},reset:function(){t=!1,r=null,n=null,i=null}}}function o(){var t=!1,r=null,n=null,i=null,a=null,o=null,s=null,l=null,u=null;return{setTest:function(t){t?le(e.STENCIL_TEST):ue(e.STENCIL_TEST)},setMask:function(n){r===n||t||(e.stencilMask(n),r=n)},setFunc:function(t,r,o){n===t&&i===r&&a===o||(e.stencilFunc(t,r,o),n=t,i=r,a=o)},setOp:function(t,r,n){o===t&&s===r&&l===n||(e.stencilOp(t,r,n),o=t,s=r,l=n)},setLocked:function(e){t=e},setClear:function(t){u!==t&&(e.clearStencil(t),u=t)},reset:function(){t=!1,r=null,n=null,i=null,a=null,o=null,s=null,l=null,u=null}}}var s=new i,l=new a,u=new o,c=e.getParameter(e.MAX_VERTEX_ATTRIBS),h=new Uint8Array(c),d=new Uint8Array(c),f=new Uint8Array(c),v={},y=null,b=null,E=null,x=null,w=null,T=null,M=null,R=null,A=null,C=!1,L=null,U=null,D=null,F=null,B=null,z=e.getParameter(e.MAX_COMBINED_TEXTURE_IMAGE_UNITS),j=parseFloat(/^WebGL\ ([0-9])/.exec(e.getParameter(e.VERSION))[1]),V=parseFloat(j)>=1,G=null,W={},q=new Ut,X=new Ut;function Y(t,r,n){var i=new Uint8Array(4),a=e.createTexture();e.bindTexture(t,a),e.texParameteri(t,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(t,e.TEXTURE_MAG_FILTER,e.NEAREST);for(var o=0;o<n;o++)e.texImage2D(r+o,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,i);return a}var Z={};function K(){for(var e=0,t=h.length;e<t;e++)h[e]=0}function Q(r){h[r]=1,0===d[r]&&(e.enableVertexAttribArray(r),d[r]=1),0!==f[r]&&(t.get("ANGLE_instanced_arrays").vertexAttribDivisorANGLE(r,0),f[r]=0)}function J(r,n){h[r]=1,0===d[r]&&(e.enableVertexAttribArray(r),d[r]=1),f[r]!==n&&(t.get("ANGLE_instanced_arrays").vertexAttribDivisorANGLE(r,n),f[r]=n)}function se(){for(var t=0,r=d.length;t!==r;++t)d[t]!==h[t]&&(e.disableVertexAttribArray(t),d[t]=0)}function le(t){!0!==v[t]&&(e.enable(t),v[t]=!0)}function ue(t){!1!==v[t]&&(e.disable(t),v[t]=!1)}function ce(){if(null===y&&(y=[],t.get("WEBGL_compressed_texture_pvrtc")||t.get("WEBGL_compressed_texture_s3tc")||t.get("WEBGL_compressed_texture_etc1")))for(var r=e.getParameter(e.COMPRESSED_TEXTURE_FORMATS),n=0;n<r.length;n++)y.push(r[n]);return y}function he(t){return b!==t&&(e.useProgram(t),b=t,!0)}function de(t,n,i,a,o,s,l,u){if(t!==O?le(e.BLEND):ue(e.BLEND),t!==N){if(t!==E||u!==C)switch(t){case P:u?(e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD),e.blendFuncSeparate(e.ONE,e.ONE,e.ONE,e.ONE)):(e.blendEquation(e.FUNC_ADD),e.blendFunc(e.SRC_ALPHA,e.ONE));break;case H:u?(e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD),e.blendFuncSeparate(e.ZERO,e.ZERO,e.ONE_MINUS_SRC_COLOR,e.ONE_MINUS_SRC_ALPHA)):(e.blendEquation(e.FUNC_ADD),e.blendFunc(e.ZERO,e.ONE_MINUS_SRC_COLOR));break;case k:u?(e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD),e.blendFuncSeparate(e.ZERO,e.SRC_COLOR,e.ZERO,e.SRC_ALPHA)):(e.blendEquation(e.FUNC_ADD),e.blendFunc(e.ZERO,e.SRC_COLOR));break;default:u?(e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD),e.blendFuncSeparate(e.ONE,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA)):(e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD),e.blendFuncSeparate(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA))}x=null,w=null,T=null,M=null,R=null,A=null}else o=o||n,s=s||i,l=l||a,n===x&&o===M||(e.blendEquationSeparate(r.convert(n),r.convert(o)),x=n,M=o),i===w&&a===T&&s===R&&l===A||(e.blendFuncSeparate(r.convert(i),r.convert(a),r.convert(s),r.convert(l)),w=i,T=a,R=s,A=l);E=t,C=u}function fe(t,r){t.side===S?ue(e.CULL_FACE):le(e.CULL_FACE);var n=t.side===_;r&&(n=!n),pe(n),!0===t.transparent?de(t.blending,t.blendEquation,t.blendSrc,t.blendDst,t.blendEquationAlpha,t.blendSrcAlpha,t.blendDstAlpha,t.premultipliedAlpha):de(O),l.setFunc(t.depthFunc),l.setTest(t.depthTest),l.setMask(t.depthWrite),s.setMask(t.colorWrite),ve(t.polygonOffset,t.polygonOffsetFactor,t.polygonOffsetUnits)}function pe(t){L!==t&&(t?e.frontFace(e.CW):e.frontFace(e.CCW),L=t)}function me(t){t!==p?(le(e.CULL_FACE),t!==U&&(t===m?e.cullFace(e.BACK):t===g?e.cullFace(e.FRONT):e.cullFace(e.FRONT_AND_BACK))):ue(e.CULL_FACE),U=t}function ge(t){t!==D&&(V&&e.lineWidth(t),D=t)}function ve(t,r,n){t?(le(e.POLYGON_OFFSET_FILL),F===r&&B===n||(e.polygonOffset(r,n),F=r,B=n)):ue(e.POLYGON_OFFSET_FILL)}function ye(t){t?le(e.SCISSOR_TEST):ue(e.SCISSOR_TEST)}function be(t){void 0===t&&(t=e.TEXTURE0+z-1),G!==t&&(e.activeTexture(t),G=t)}function Ee(t,r){null===G&&be();var n=W[G];void 0===n&&(n={type:void 0,texture:void 0},W[G]=n),n.type===t&&n.texture===r||(e.bindTexture(t,r||Z[t]),n.type=t,n.texture=r)}function xe(){try{e.compressedTexImage2D.apply(e,arguments)}catch(e){n.error("THREE.WebGLState:",e)}}function we(){try{e.texImage2D.apply(e,arguments)}catch(e){n.error("THREE.WebGLState:",e)}}function Te(t){!1===q.equals(t)&&(e.scissor(t.x,t.y,t.z,t.w),q.copy(t))}function _e(t){!1===X.equals(t)&&(e.viewport(t.x,t.y,t.z,t.w),X.copy(t))}function Se(){for(var t=0;t<d.length;t++)1===d[t]&&(e.disableVertexAttribArray(t),d[t]=0);v={},y=null,G=null,W={},b=null,E=null,L=null,U=null,s.reset(),l.reset(),u.reset()}return Z[e.TEXTURE_2D]=Y(e.TEXTURE_2D,e.TEXTURE_2D,1),Z[e.TEXTURE_CUBE_MAP]=Y(e.TEXTURE_CUBE_MAP,e.TEXTURE_CUBE_MAP_POSITIVE_X,6),s.setClear(0,0,0,1),l.setClear(1),u.setClear(0),le(e.DEPTH_TEST),l.setFunc(re),pe(!1),me(m),le(e.CULL_FACE),le(e.BLEND),de(I),{buffers:{color:s,depth:l,stencil:u},initAttributes:K,enableAttribute:Q,enableAttributeAndDivisor:J,disableUnusedAttributes:se,enable:le,disable:ue,getCompressedTextureFormats:ce,useProgram:he,setBlending:de,setMaterial:fe,setFlipSided:pe,setCullFace:me,setLineWidth:ge,setPolygonOffset:ve,setScissorTest:ye,activeTexture:be,bindTexture:Ee,compressedTexImage2D:xe,texImage2D:we,scissor:Te,viewport:_e,reset:Se}}function Ii(e,t,r){var i;function a(){if(void 0!==i)return i;var r=t.get("EXT_texture_filter_anisotropic");return i=null!==r?e.getParameter(r.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0}function o(t){if("highp"===t){if(e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.HIGH_FLOAT).precision>0&&e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_FLOAT).precision>0)return"highp";t="mediump"}return"mediump"===t&&e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.MEDIUM_FLOAT).precision>0&&e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}var s=void 0!==r.precision?r.precision:"highp",l=o(s);l!==s&&(n.warn("THREE.WebGLRenderer:",s,"not supported, using",l,"instead."),s=l);var u=!0===r.logarithmicDepthBuffer,c=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),h=e.getParameter(e.MAX_VERTEX_TEXTURE_IMAGE_UNITS),d=e.getParameter(e.MAX_TEXTURE_SIZE),f=e.getParameter(e.MAX_CUBE_MAP_TEXTURE_SIZE),p=e.getParameter(e.MAX_VERTEX_ATTRIBS),m=e.getParameter(e.MAX_VERTEX_UNIFORM_VECTORS),g=e.getParameter(e.MAX_VARYING_VECTORS),v=e.getParameter(e.MAX_FRAGMENT_UNIFORM_VECTORS),y=h>0,b=!!t.get("OES_texture_float");return{getMaxAnisotropy:a,getMaxPrecision:o,precision:s,logarithmicDepthBuffer:u,maxTextures:c,maxVertexTextures:h,maxTextureSize:d,maxCubemapSize:f,maxAttributes:p,maxVertexUniforms:m,maxVaryings:g,maxFragmentUniforms:v,vertexTextures:y,floatFragmentTextures:b,floatVertexTextures:y&&b}}function Pi(e,t,r,n){hn.call(this),this.type="PerspectiveCamera",this.fov=void 0!==e?e:50,this.zoom=1,this.near=void 0!==r?r:.1,this.far=void 0!==n?n:2e3,this.focus=10,this.aspect=void 0!==t?t:1,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}function Hi(e){Pi.call(this),this.cameras=e||[]}function ki(e){var t=this,r=null,n=null,i=null;"undefined"!=typeof window&&"VRFrameData"in window&&(n=new window.VRFrameData);var a=new Ot,o=new Pi;o.bounds=new Ut(0,0,.5,1),o.layers.enable(1);var s=new Pi;s.bounds=new Ut(.5,0,.5,1),s.layers.enable(2);var l,u,c=new Hi([o,s]);function h(){if(null!==r&&r.isPresenting){var n=r.getEyeParameters("left"),i=n.renderWidth,a=n.renderHeight;u=e.getPixelRatio(),l=e.getSize(),e.setDrawingBufferSize(2*i,a,1)}else t.enabled&&e.setDrawingBufferSize(l.width,l.height,u)}c.layers.enable(1),c.layers.enable(2),"undefined"!=typeof window&&window.addEventListener("vrdisplaypresentchange",h,!1),this.enabled=!1,this.getDevice=function(){return r},this.setDevice=function(e){void 0!==e&&(r=e)},this.setPoseTarget=function(e){void 0!==e&&(i=e)},this.getCamera=function(e){if(null===r)return e;r.depthNear=e.near,r.depthFar=e.far,r.getFrameData(n);var t=n.pose,l=null!==i?i:e;if(null!==t.position?l.position.fromArray(t.position):l.position.set(0,0,0),null!==t.orientation&&l.quaternion.fromArray(t.orientation),l.updateMatrixWorld(),!1===r.isPresenting)return e;o.near=e.near,s.near=e.near,o.far=e.far,s.far=e.far,c.matrixWorld.copy(e.matrixWorld),c.matrixWorldInverse.copy(e.matrixWorldInverse),o.matrixWorldInverse.fromArray(n.leftViewMatrix),s.matrixWorldInverse.fromArray(n.rightViewMatrix);var u=l.parent;null!==u&&(a.getInverse(u.matrixWorld),o.matrixWorldInverse.multiply(a),s.matrixWorldInverse.multiply(a)),o.matrixWorld.getInverse(o.matrixWorldInverse),s.matrixWorld.getInverse(s.matrixWorldInverse),o.projectionMatrix.fromArray(n.leftProjectionMatrix),s.projectionMatrix.fromArray(n.rightProjectionMatrix),c.projectionMatrix.copy(o.projectionMatrix);var h=r.getLayers();if(h.length){var d=h[0];null!==d.leftBounds&&4===d.leftBounds.length&&o.bounds.fromArray(d.leftBounds),null!==d.rightBounds&&4===d.rightBounds.length&&s.bounds.fromArray(d.rightBounds)}return c},this.submitFrame=function(){r&&r.isPresenting&&r.submitFrame()},this.dispose=function(){"undefined"!=typeof window&&window.removeEventListener("vrdisplaypresentchange",h)}}function Ni(e){var t={};return{get:function(r){if(void 0!==t[r])return t[r];var i;switch(r){case"WEBGL_depth_texture":i=e.getExtension("WEBGL_depth_texture")||e.getExtension("MOZ_WEBGL_depth_texture")||e.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;case"WEBGL_compressed_texture_etc1":i=e.getExtension("WEBGL_compressed_texture_etc1");break;default:i=e.getExtension(r)}return null===i&&n.warn("THREE.WebGLRenderer: "+r+" extension not supported."),t[r]=i,i}}}function Ui(){var e=this,t=null,r=0,n=!1,i=!1,a=new Jr,o=new Ht,s={value:null,needsUpdate:!1};function l(){s.value!==t&&(s.value=t,s.needsUpdate=r>0),e.numPlanes=r,e.numIntersection=0}function u(t,r,n,i){var l=null!==t?t.length:0,u=null;if(0!==l){if(u=s.value,!0!==i||null===u){var c=n+4*l,h=r.matrixWorldInverse;o.getNormalMatrix(h),(null===u||u.length<c)&&(u=new Float32Array(c));for(var d=0,f=n;d!==l;++d,f+=4)a.copy(t[d]).applyMatrix4(h,o),a.normal.toArray(u,f),u[f+3]=a.constant}s.value=u,s.needsUpdate=!0}return e.numPlanes=l,u}this.uniform=s,this.numPlanes=0,this.numIntersection=0,this.init=function(e,i,a){var o=0!==e.length||i||0!==r||n;return n=i,t=u(e,a,0),r=e.length,o},this.beginShadows=function(){i=!0,u(null)},this.endShadows=function(){i=!1,l()},this.setState=function(e,a,o,c,h,d){if(!n||null===e||0===e.length||i&&!o)i?u(null):l();else{var f=i?0:r,p=4*f,m=h.clippingState||null;s.value=m,m=u(e,c,p,d);for(var g=0;g!==p;++g)m[g]=t[g];h.clippingState=m,this.numIntersection=a?this.numPlanes:0,this.numPlanes+=f}}}function Di(e,t){function r(r){var n;if(r===Te)return e.REPEAT;if(r===_e)return e.CLAMP_TO_EDGE;if(r===Se)return e.MIRRORED_REPEAT;if(r===Me)return e.NEAREST;if(r===Re)return e.NEAREST_MIPMAP_NEAREST;if(r===Ae)return e.NEAREST_MIPMAP_LINEAR;if(r===Ce)return e.LINEAR;if(r===Le)return e.LINEAR_MIPMAP_NEAREST;if(r===Oe)return e.LINEAR_MIPMAP_LINEAR;if(r===Ie)return e.UNSIGNED_BYTE;if(r===Be)return e.UNSIGNED_SHORT_4_4_4_4;if(r===ze)return e.UNSIGNED_SHORT_5_5_5_1;if(r===je)return e.UNSIGNED_SHORT_5_6_5;if(r===Pe)return e.BYTE;if(r===He)return e.SHORT;if(r===ke)return e.UNSIGNED_SHORT;if(r===Ne)return e.INT;if(r===Ue)return e.UNSIGNED_INT;if(r===De)return e.FLOAT;if(r===Fe&&null!==(n=t.get("OES_texture_half_float")))return n.HALF_FLOAT_OES;if(r===Ge)return e.ALPHA;if(r===We)return e.RGB;if(r===qe)return e.RGBA;if(r===Xe)return e.LUMINANCE;if(r===Ye)return e.LUMINANCE_ALPHA;if(r===Ke)return e.DEPTH_COMPONENT;if(r===Qe)return e.DEPTH_STENCIL;if(r===U)return e.FUNC_ADD;if(r===D)return e.FUNC_SUBTRACT;if(r===F)return e.FUNC_REVERSE_SUBTRACT;if(r===j)return e.ZERO;if(r===V)return e.ONE;if(r===G)return e.SRC_COLOR;if(r===W)return e.ONE_MINUS_SRC_COLOR;if(r===q)return e.SRC_ALPHA;if(r===X)return e.ONE_MINUS_SRC_ALPHA;if(r===Y)return e.DST_ALPHA;if(r===Z)return e.ONE_MINUS_DST_ALPHA;if(r===K)return e.DST_COLOR;if(r===Q)return e.ONE_MINUS_DST_COLOR;if(r===J)return e.SRC_ALPHA_SATURATE;if((r===Je||r===$e||r===et||r===tt)&&null!==(n=t.get("WEBGL_compressed_texture_s3tc"))){if(r===Je)return n.COMPRESSED_RGB_S3TC_DXT1_EXT;if(r===$e)return n.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(r===et)return n.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(r===tt)return n.COMPRESSED_RGBA_S3TC_DXT5_EXT}if((r===rt||r===nt||r===it||r===at)&&null!==(n=t.get("WEBGL_compressed_texture_pvrtc"))){if(r===rt)return n.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(r===nt)return n.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(r===it)return n.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(r===at)return n.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(r===ot&&null!==(n=t.get("WEBGL_compressed_texture_etc1")))return n.COMPRESSED_RGB_ETC1_WEBGL;if((r===B||r===z)&&null!==(n=t.get("EXT_blend_minmax"))){if(r===B)return n.MIN_EXT;if(r===z)return n.MAX_EXT}return r===Ve&&null!==(n=t.get("WEBGL_depth_texture"))?n.UNSIGNED_INT_24_8_WEBGL:0}return{convert:r}}function Fi(e){n.log("THREE.WebGLRenderer",d);var t=void 0!==(e=e||{}).canvas?e.canvas:document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),r=void 0!==e.context?e.context:null,i=void 0!==e.alpha&&e.alpha,a=void 0===e.depth||e.depth,o=void 0===e.stencil||e.stencil,s=void 0!==e.antialias&&e.antialias,l=void 0===e.premultipliedAlpha||e.premultipliedAlpha,u=void 0!==e.preserveDrawingBuffer&&e.preserveDrawingBuffer,c=void 0!==e.powerPreference?e.powerPreference:"default",h=[],f=[],p=null,m=[],g=[];this.domElement=t,this.context=null,this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.gammaInput=!1,this.gammaOutput=!1,this.physicallyCorrectLights=!1,this.toneMapping=he,this.toneMappingExposure=1,this.toneMappingWhitePoint=1,this.maxMorphTargets=8,this.maxMorphNormals=4;var v,b,E,x,w,T,_,S,M,R,C,L,O,I,P,H,k,N,U,D=this,F=!1,B=null,z=null,j=-1,V="",G=null,W=null,q=new Ut,X=new Ut,Y=null,Z=0,K=t.width,Q=t.height,J=1,$=new Ut(0,0,K,Q),ee=new Ut(0,0,K,Q),te=!1,re=new $r,ne=new Ui,ie=!1,ae=!1,oe=new Ot,se=new Pt,le={geometries:0,textures:0},ue={frame:0,calls:0,vertices:0,faces:0,points:0};function ce(){return null===B?J:1}this.info={render:ue,memory:le,programs:null};try{var de={alpha:i,depth:a,stencil:o,antialias:s,premultipliedAlpha:l,preserveDrawingBuffer:u,powerPreference:c};if(t.addEventListener("webglcontextlost",ge,!1),t.addEventListener("webglcontextrestored",ve,!1),null===(v=r||t.getContext("webgl",de)||t.getContext("experimental-webgl",de)))throw null!==t.getContext("webgl")?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.");void 0===v.getShaderPrecisionFormat&&(v.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(e){n.error("THREE.WebGLRenderer: "+e.message)}function fe(){(b=new Ni(v)).get("WEBGL_depth_texture"),b.get("OES_texture_float"),b.get("OES_texture_float_linear"),b.get("OES_texture_half_float"),b.get("OES_texture_half_float_linear"),b.get("OES_standard_derivatives"),b.get("OES_element_index_uint"),b.get("ANGLE_instanced_arrays"),U=new Di(v,b),E=new Ii(v,b,e),(x=new Oi(v,b,U)).scissor(X.copy(ee).multiplyScalar(J)),x.viewport(q.copy($).multiplyScalar(J)),w=new Li,T=new Ci(v,b,x,w,E,U,le),_=new tn(v),S=new ni(v,_,le),M=new oi(S,ue),I=new ei(v),C=new Ai(D,b,E),R=new ai,L=new Jn,O=new Yn(D,x,S,l),P=new ri(v,b,ue),H=new ti(v,b,ue),k=new Nr(D,v,x,T,E),N=new Dr(D,v,x,T,E),D.info.programs=C.programs,D.context=v,D.capabilities=E,D.extensions=b,D.properties=w,D.renderLists=L,D.state=x}fe();var pe=new ki(D);this.vr=pe;var me=new en(D,M,E.maxTextureSize);function ge(e){e.preventDefault(),n.log("THREE.WebGLRenderer: Context Lost."),F=!0}function ve(){n.log("THREE.WebGLRenderer: Context Restored."),F=!1,fe()}function ye(e){var t=e.target;t.removeEventListener("dispose",ye),be(t)}function be(e){Ee(e),w.remove(e)}function Ee(e){var t=w.get(e).program;e.program=void 0,void 0!==t&&C.releaseProgram(t)}function xe(e,t,r){e.render((function(e){D.renderBufferImmediate(e,t,r)}))}function we(e,t,r,i){if(r&&r.isInstancedBufferGeometry&&null===b.get("ANGLE_instanced_arrays"))n.error("THREE.WebGLRenderer.setupVertexAttributes: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");else{void 0===i&&(i=0),x.initAttributes();var a=r.attributes,o=t.getAttributes(),s=e.defaultAttributeValues;for(var l in o){var u=o[l];if(u>=0){var c=a[l];if(void 0!==c){var h=c.normalized,d=c.itemSize,f=_.get(c);if(void 0===f)continue;var p=f.buffer,m=f.type,g=f.bytesPerElement;if(c.isInterleavedBufferAttribute){var y=c.data,E=y.stride,w=c.offset;y&&y.isInstancedInterleavedBuffer?(x.enableAttributeAndDivisor(u,y.meshPerAttribute),void 0===r.maxInstancedCount&&(r.maxInstancedCount=y.meshPerAttribute*y.count)):x.enableAttribute(u),v.bindBuffer(v.ARRAY_BUFFER,p),v.vertexAttribPointer(u,d,m,h,E*g,(i*E+w)*g)}else c.isInstancedBufferAttribute?(x.enableAttributeAndDivisor(u,c.meshPerAttribute),void 0===r.maxInstancedCount&&(r.maxInstancedCount=c.meshPerAttribute*c.count)):x.enableAttribute(u),v.bindBuffer(v.ARRAY_BUFFER,p),v.vertexAttribPointer(u,d,m,h,0,i*d*g)}else if(void 0!==s){var T=s[l];if(void 0!==T)switch(T.length){case 2:v.vertexAttrib2fv(u,T);break;case 3:v.vertexAttrib3fv(u,T);break;case 4:v.vertexAttrib4fv(u,T);break;default:v.vertexAttrib1fv(u,T)}}}}x.disableUnusedAttributes()}}this.shadowMap=me,this.getContext=function(){return v},this.getContextAttributes=function(){return v.getContextAttributes()},this.forceContextLoss=function(){var e=b.get("WEBGL_lose_context");e&&e.loseContext()},this.forceContextRestore=function(){var e=b.get("WEBGL_lose_context");e&&e.restoreContext()},this.getPixelRatio=function(){return J},this.setPixelRatio=function(e){void 0!==e&&(J=e,this.setSize(K,Q,!1))},this.getSize=function(){return{width:K,height:Q}},this.setSize=function(e,r,i){var a=pe.getDevice();a&&a.isPresenting?n.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(K=e,Q=r,t.width=e*J,t.height=r*J,!1!==i&&(t.style.width=e+"px",t.style.height=r+"px"),this.setViewport(0,0,e,r))},this.getDrawingBufferSize=function(){return{width:K*J,height:Q*J}},this.setDrawingBufferSize=function(e,r,n){K=e,Q=r,J=n,t.width=e*n,t.height=r*n,this.setViewport(0,0,e,r)},this.setViewport=function(e,t,r,n){$.set(e,Q-t-n,r,n),x.viewport(q.copy($).multiplyScalar(J))},this.setScissor=function(e,t,r,n){ee.set(e,Q-t-n,r,n),x.scissor(X.copy(ee).multiplyScalar(J))},this.setScissorTest=function(e){x.setScissorTest(te=e)},this.getClearColor=function(){return O.getClearColor()},this.setClearColor=function(){O.setClearColor.apply(O,arguments)},this.getClearAlpha=function(){return O.getClearAlpha()},this.setClearAlpha=function(){O.setClearAlpha.apply(O,arguments)},this.clear=function(e,t,r){var n=0;(void 0===e||e)&&(n|=v.COLOR_BUFFER_BIT),(void 0===t||t)&&(n|=v.DEPTH_BUFFER_BIT),(void 0===r||r)&&(n|=v.STENCIL_BUFFER_BIT),v.clear(n)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.clearTarget=function(e,t,r,n){this.setRenderTarget(e),this.clear(t,r,n)},this.dispose=function(){t.removeEventListener("webglcontextlost",ge,!1),t.removeEventListener("webglcontextrestored",ve,!1),L.dispose(),pe.dispose()},this.renderBufferImmediate=function(e,t,r){x.initAttributes();var n=w.get(e);e.hasPositions&&!n.position&&(n.position=v.createBuffer()),e.hasNormals&&!n.normal&&(n.normal=v.createBuffer()),e.hasUvs&&!n.uv&&(n.uv=v.createBuffer()),e.hasColors&&!n.color&&(n.color=v.createBuffer());var i=t.getAttributes();if(e.hasPositions&&(v.bindBuffer(v.ARRAY_BUFFER,n.position),v.bufferData(v.ARRAY_BUFFER,e.positionArray,v.DYNAMIC_DRAW),x.enableAttribute(i.position),v.vertexAttribPointer(i.position,3,v.FLOAT,!1,0,0)),e.hasNormals){if(v.bindBuffer(v.ARRAY_BUFFER,n.normal),!r.isMeshPhongMaterial&&!r.isMeshStandardMaterial&&!r.isMeshNormalMaterial&&!0===r.flatShading)for(var a=0,o=3*e.count;a<o;a+=9){var s=e.normalArray,l=(s[a+0]+s[a+3]+s[a+6])/3,u=(s[a+1]+s[a+4]+s[a+7])/3,c=(s[a+2]+s[a+5]+s[a+8])/3;s[a+0]=l,s[a+1]=u,s[a+2]=c,s[a+3]=l,s[a+4]=u,s[a+5]=c,s[a+6]=l,s[a+7]=u,s[a+8]=c}v.bufferData(v.ARRAY_BUFFER,e.normalArray,v.DYNAMIC_DRAW),x.enableAttribute(i.normal),v.vertexAttribPointer(i.normal,3,v.FLOAT,!1,0,0)}e.hasUvs&&r.map&&(v.bindBuffer(v.ARRAY_BUFFER,n.uv),v.bufferData(v.ARRAY_BUFFER,e.uvArray,v.DYNAMIC_DRAW),x.enableAttribute(i.uv),v.vertexAttribPointer(i.uv,2,v.FLOAT,!1,0,0)),e.hasColors&&r.vertexColors!==A&&(v.bindBuffer(v.ARRAY_BUFFER,n.color),v.bufferData(v.ARRAY_BUFFER,e.colorArray,v.DYNAMIC_DRAW),x.enableAttribute(i.color),v.vertexAttribPointer(i.color,3,v.FLOAT,!1,0,0)),x.disableUnusedAttributes(),v.drawArrays(v.TRIANGLES,0,e.count),e.count=0},this.renderBufferDirect=function(e,t,r,n,i,a){var o=i.isMesh&&i.matrixWorld.determinant()<0;x.setMaterial(n,o);var s=Pe(e,t,n,i),l=r.id+"_"+s.id+"_"+(!0===n.wireframe),u=!1;l!==V&&(V=l,u=!0),i.morphTargetInfluences&&(I.update(i,r,n,s),u=!0);var c,h=r.index,d=r.attributes.position,f=1;!0===n.wireframe&&(h=S.getWireframeAttribute(r),f=2);var p=P;null!==h&&(c=_.get(h),(p=H).setIndex(c)),u&&(we(n,s,r),null!==h&&v.bindBuffer(v.ELEMENT_ARRAY_BUFFER,c.buffer));var m=0;null!==h?m=h.count:void 0!==d&&(m=d.count);var g=r.drawRange.start*f,y=r.drawRange.count*f,b=null!==a?a.start*f:0,E=null!==a?a.count*f:1/0,w=Math.max(g,b),T=Math.min(m,g+y,b+E)-1,M=Math.max(0,T-w+1);if(0!==M){if(i.isMesh)if(!0===n.wireframe)x.setLineWidth(n.wireframeLinewidth*ce()),p.setMode(v.LINES);else switch(i.drawMode){case gt:p.setMode(v.TRIANGLES);break;case vt:p.setMode(v.TRIANGLE_STRIP);break;case yt:p.setMode(v.TRIANGLE_FAN)}else if(i.isLine){var R=n.linewidth;void 0===R&&(R=1),x.setLineWidth(R*ce()),i.isLineSegments?p.setMode(v.LINES):i.isLineLoop?p.setMode(v.LINE_LOOP):p.setMode(v.LINE_STRIP)}else i.isPoints&&p.setMode(v.POINTS);r&&r.isInstancedBufferGeometry?r.maxInstancedCount>0&&p.renderInstances(r,w,M):p.render(w,M)}},this.compile=function(e,t){h.length=0,f.length=0,e.traverse((function(e){e.isLight&&(h.push(e),e.castShadow&&f.push(e))})),R.setup(h,f,t),e.traverse((function(t){if(t.material)if(Array.isArray(t.material))for(var r=0;r<t.material.length;r++)Oe(t.material[r],e.fog,t);else Oe(t.material,e.fog,t)}))};var Te,_e=!1,Se=null;function Me(){if(!_e){var e=pe.getDevice();e&&e.isPresenting?e.requestAnimationFrame(Re):window.requestAnimationFrame(Re),_e=!0}}function Re(e){null!==Se&&Se(e);var t=pe.getDevice();t&&t.isPresenting?t.requestAnimationFrame(Re):window.requestAnimationFrame(Re)}function Ae(e,t,r){if(!1!==e.visible){if(e.layers.test(t.layers))if(e.isLight)h.push(e),e.castShadow&&f.push(e);else if(e.isSprite)e.frustumCulled&&!re.intersectsSprite(e)||m.push(e);else if(e.isLensFlare)g.push(e);else if(e.isImmediateRenderObject)r&&se.setFromMatrixPosition(e.matrixWorld).applyMatrix4(oe),p.push(e,null,e.material,se.z,null);else if((e.isMesh||e.isLine||e.isPoints)&&(e.isSkinnedMesh&&e.skeleton.update(),!e.frustumCulled||re.intersectsObject(e))){r&&se.setFromMatrixPosition(e.matrixWorld).applyMatrix4(oe);var n=M.update(e),i=e.material;if(Array.isArray(i))for(var a=n.groups,o=0,s=a.length;o<s;o++){var l=a[o],u=i[l.materialIndex];u&&u.visible&&p.push(e,n,u,se.z,l)}else i.visible&&p.push(e,n,i,se.z,null)}var c=e.children;for(o=0,s=c.length;o<s;o++)Ae(c[o],t,r)}}function Ce(e,t,r,n){for(var i=0,a=e.length;i<a;i++){var o=e[i],s=o.object,l=o.geometry,u=void 0===n?o.material:n,c=o.group;if(r.isArrayCamera){W=r;for(var h=r.cameras,d=0,f=h.length;d<f;d++){var p=h[d];if(s.layers.test(p.layers)){var m=p.bounds,g=m.x*K,v=m.y*Q,y=m.z*K,b=m.w*Q;x.viewport(q.set(g,v,y,b).multiplyScalar(J)),Le(s,t,p,l,u,c)}}}else W=null,Le(s,t,r,l,u,c)}}function Le(e,t,r,n,i,a){if(e.onBeforeRender(D,t,r,n,i,a),e.modelViewMatrix.multiplyMatrices(r.matrixWorldInverse,e.matrixWorld),e.normalMatrix.getNormalMatrix(e.modelViewMatrix),e.isImmediateRenderObject){var o=e.isMesh&&e.matrixWorld.determinant()<0;x.setMaterial(i,o);var s=Pe(r,t.fog,i,e);V="",xe(e,s,i)}else D.renderBufferDirect(r,t.fog,n,i,e,a);e.onAfterRender(D,t,r,n,i,a)}function Oe(e,t,r){var n=w.get(e),i=C.getParameters(e,R.state,f,t,ne.numPlanes,ne.numIntersection,r),a=C.getProgramCode(e,i),o=n.program,s=!0;if(void 0===o)e.addEventListener("dispose",ye);else if(o.code!==a)Ee(e);else{if(void 0!==i.shaderID)return;s=!1}if(s){if(i.shaderID){var l=Hr[i.shaderID];n.shader={name:e.type,uniforms:Ir.clone(l.uniforms),vertexShader:l.vertexShader,fragmentShader:l.fragmentShader}}else n.shader={name:e.type,uniforms:e.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader};e.onBeforeCompile(n.shader),o=C.acquireProgram(e,n.shader,i,a),n.program=o,e.program=o}var u=o.getAttributes();if(e.morphTargets){e.numSupportedMorphTargets=0;for(var c=0;c<D.maxMorphTargets;c++)u["morphTarget"+c]>=0&&e.numSupportedMorphTargets++}if(e.morphNormals)for(e.numSupportedMorphNormals=0,c=0;c<D.maxMorphNormals;c++)u["morphNormal"+c]>=0&&e.numSupportedMorphNormals++;var h=n.shader.uniforms;(e.isShaderMaterial||e.isRawShaderMaterial)&&!0!==e.clipping||(n.numClippingPlanes=ne.numPlanes,n.numIntersection=ne.numIntersection,h.clippingPlanes=ne.uniform),n.fog=t,n.lightsHash=R.state.hash,e.lights&&(h.ambientLightColor.value=R.state.ambient,h.directionalLights.value=R.state.directional,h.spotLights.value=R.state.spot,h.rectAreaLights.value=R.state.rectArea,h.pointLights.value=R.state.point,h.hemisphereLights.value=R.state.hemi,h.directionalShadowMap.value=R.state.directionalShadowMap,h.directionalShadowMatrix.value=R.state.directionalShadowMatrix,h.spotShadowMap.value=R.state.spotShadowMap,h.spotShadowMatrix.value=R.state.spotShadowMatrix,h.pointShadowMap.value=R.state.pointShadowMap,h.pointShadowMatrix.value=R.state.pointShadowMatrix);var d=n.program.getUniforms(),p=Ar.seqWithValue(d.seq,h);n.uniformsList=p}function Pe(e,t,r,n){Z=0;var i=w.get(r);if(ie&&(ae||e!==G)){var a=e===G&&r.id===j;ne.setState(r.clippingPlanes,r.clipIntersection,r.clipShadows,e,i,a)}!1===r.needsUpdate&&(void 0===i.program||r.fog&&i.fog!==t||r.lights&&i.lightsHash!==R.state.hash?r.needsUpdate=!0:void 0===i.numClippingPlanes||i.numClippingPlanes===ne.numPlanes&&i.numIntersection===ne.numIntersection||(r.needsUpdate=!0)),r.needsUpdate&&(Oe(r,t,n),r.needsUpdate=!1);var o=!1,s=!1,l=!1,u=i.program,c=u.getUniforms(),h=i.shader.uniforms;if(x.useProgram(u.program)&&(o=!0,s=!0,l=!0),r.id!==j&&(j=r.id,s=!0),o||e!==G){if(c.setValue(v,"projectionMatrix",e.projectionMatrix),E.logarithmicDepthBuffer&&c.setValue(v,"logDepthBufFC",2/(Math.log(e.far+1)/Math.LN2)),G!==(W||e)&&(G=W||e,s=!0,l=!0),r.isShaderMaterial||r.isMeshPhongMaterial||r.isMeshStandardMaterial||r.envMap){var d=c.map.cameraPosition;void 0!==d&&d.setValue(v,se.setFromMatrixPosition(e.matrixWorld))}(r.isMeshPhongMaterial||r.isMeshLambertMaterial||r.isMeshBasicMaterial||r.isMeshStandardMaterial||r.isShaderMaterial||r.skinning)&&c.setValue(v,"viewMatrix",e.matrixWorldInverse)}if(r.skinning){c.setOptional(v,n,"bindMatrix"),c.setOptional(v,n,"bindMatrixInverse");var f=n.skeleton;if(f){var p=f.bones;if(E.floatVertexTextures){if(void 0===f.boneTexture){var m=Math.sqrt(4*p.length);m=Ct.ceilPowerOfTwo(m),m=Math.max(m,4);var g=new Float32Array(m*m*4);g.set(f.boneMatrices);var y=new Bt(g,m,m,qe,De);f.boneMatrices=g,f.boneTexture=y,f.boneTextureSize=m}c.setValue(v,"boneTexture",f.boneTexture),c.setValue(v,"boneTextureSize",f.boneTextureSize)}else c.setOptional(v,f,"boneMatrices")}}return s&&(c.setValue(v,"toneMappingExposure",D.toneMappingExposure),c.setValue(v,"toneMappingWhitePoint",D.toneMappingWhitePoint),r.lights&&Ke(h,l),t&&r.fog&&Be(h,t),r.isMeshBasicMaterial?He(h,r):r.isMeshLambertMaterial?(He(h,r),ze(h,r)):r.isMeshPhongMaterial?(He(h,r),r.isMeshToonMaterial?Ve(h,r):je(h,r)):r.isMeshStandardMaterial?(He(h,r),r.isMeshPhysicalMaterial?We(h,r):Ge(h,r)):r.isMeshDepthMaterial?(He(h,r),Xe(h,r)):r.isMeshDistanceMaterial?(He(h,r),Ye(h,r)):r.isMeshNormalMaterial?(He(h,r),Ze(h,r)):r.isLineBasicMaterial?(ke(h,r),r.isLineDashedMaterial&&Ne(h,r)):r.isPointsMaterial?Ue(h,r):r.isShadowMaterial&&(h.color.value=r.color,h.opacity.value=r.opacity),void 0!==h.ltcMat&&(h.ltcMat.value=Or.LTC_MAT_TEXTURE),void 0!==h.ltcMag&&(h.ltcMag.value=Or.LTC_MAG_TEXTURE),Ar.upload(v,i.uniformsList,h,D)),c.setValue(v,"modelViewMatrix",n.modelViewMatrix),c.setValue(v,"normalMatrix",n.normalMatrix),c.setValue(v,"modelMatrix",n.matrixWorld),u}function He(e,t){var r;if(e.opacity.value=t.opacity,t.color&&(e.diffuse.value=t.color),t.emissive&&e.emissive.value.copy(t.emissive).multiplyScalar(t.emissiveIntensity),t.map&&(e.map.value=t.map),t.alphaMap&&(e.alphaMap.value=t.alphaMap),t.specularMap&&(e.specularMap.value=t.specularMap),t.envMap&&(e.envMap.value=t.envMap,e.flipEnvMap.value=t.envMap&&t.envMap.isCubeTexture?-1:1,e.reflectivity.value=t.reflectivity,e.refractionRatio.value=t.refractionRatio),t.lightMap&&(e.lightMap.value=t.lightMap,e.lightMapIntensity.value=t.lightMapIntensity),t.aoMap&&(e.aoMap.value=t.aoMap,e.aoMapIntensity.value=t.aoMapIntensity),t.map?r=t.map:t.specularMap?r=t.specularMap:t.displacementMap?r=t.displacementMap:t.normalMap?r=t.normalMap:t.bumpMap?r=t.bumpMap:t.roughnessMap?r=t.roughnessMap:t.metalnessMap?r=t.metalnessMap:t.alphaMap?r=t.alphaMap:t.emissiveMap&&(r=t.emissiveMap),void 0!==r){if(r.isWebGLRenderTarget&&(r=r.texture),!0===r.matrixAutoUpdate){var n=r.offset,i=r.repeat,a=r.rotation,o=r.center;r.matrix.setUvTransform(n.x,n.y,i.x,i.y,a,o.x,o.y)}e.uvTransform.value.copy(r.matrix)}}function ke(e,t){e.diffuse.value=t.color,e.opacity.value=t.opacity}function Ne(e,t){e.dashSize.value=t.dashSize,e.totalSize.value=t.dashSize+t.gapSize,e.scale.value=t.scale}function Ue(e,t){if(e.diffuse.value=t.color,e.opacity.value=t.opacity,e.size.value=t.size*J,e.scale.value=.5*Q,e.map.value=t.map,null!==t.map){if(!0===t.map.matrixAutoUpdate){var r=t.map.offset,n=t.map.repeat,i=t.map.rotation,a=t.map.center;t.map.matrix.setUvTransform(r.x,r.y,n.x,n.y,i,a.x,a.y)}e.uvTransform.value.copy(t.map.matrix)}}function Be(e,t){e.fogColor.value=t.color,t.isFog?(e.fogNear.value=t.near,e.fogFar.value=t.far):t.isFogExp2&&(e.fogDensity.value=t.density)}function ze(e,t){t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap)}function je(e,t){e.specular.value=t.specular,e.shininess.value=Math.max(t.shininess,1e-4),t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap),t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale)),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}function Ve(e,t){je(e,t),t.gradientMap&&(e.gradientMap.value=t.gradientMap)}function Ge(e,t){e.roughness.value=t.roughness,e.metalness.value=t.metalness,t.roughnessMap&&(e.roughnessMap.value=t.roughnessMap),t.metalnessMap&&(e.metalnessMap.value=t.metalnessMap),t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap),t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale)),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias),t.envMap&&(e.envMapIntensity.value=t.envMapIntensity)}function We(e,t){e.clearCoat.value=t.clearCoat,e.clearCoatRoughness.value=t.clearCoatRoughness,Ge(e,t)}function Xe(e,t){t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}function Ye(e,t){t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias),e.referencePosition.value.copy(t.referencePosition),e.nearDistance.value=t.nearDistance,e.farDistance.value=t.farDistance}function Ze(e,t){t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale)),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}function Ke(e,t){e.ambientLightColor.needsUpdate=t,e.directionalLights.needsUpdate=t,e.pointLights.needsUpdate=t,e.spotLights.needsUpdate=t,e.rectAreaLights.needsUpdate=t,e.hemisphereLights.needsUpdate=t}function Qe(){var e=Z;return e>=E.maxTextures&&n.warn("THREE.WebGLRenderer: Trying to use "+e+" texture units while this GPU supports only "+E.maxTextures),Z+=1,e}this.animate=function(e){Se=e,Me()},this.render=function(e,t,r,i){if(t&&t.isCamera){if(!F){V="",j=-1,G=null,!0===e.autoUpdate&&e.updateMatrixWorld(),null===t.parent&&t.updateMatrixWorld(),pe.enabled&&(t=pe.getCamera(t)),oe.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),re.setFromMatrix(oe),h.length=0,f.length=0,m.length=0,g.length=0,ae=this.localClippingEnabled,ie=ne.init(this.clippingPlanes,ae,t),(p=L.get(e,t)).init(),Ae(e,t,D.sortObjects),!0===D.sortObjects&&p.sort(),T.updateVideoTextures(),ie&&ne.beginShadows(),me.render(f,e,t),R.setup(h,f,t),ie&&ne.endShadows(),ue.frame++,ue.calls=0,ue.vertices=0,ue.faces=0,ue.points=0,void 0===r&&(r=null),this.setRenderTarget(r),O.render(p,e,t,i);var a=p.opaque,o=p.transparent;if(e.overrideMaterial){var s=e.overrideMaterial;a.length&&Ce(a,e,t,s),o.length&&Ce(o,e,t,s)}else a.length&&Ce(a,e,t),o.length&&Ce(o,e,t);N.render(m,e,t),k.render(g,e,t,q),r&&T.updateRenderTargetMipmap(r),x.buffers.depth.setTest(!0),x.buffers.depth.setMask(!0),x.buffers.color.setMask(!0),x.setPolygonOffset(!1),pe.enabled&&pe.submitFrame()}}else n.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.")},this.setFaceCulling=function(e,t){x.setCullFace(e),x.setFlipSided(t===y)},this.allocTextureUnit=Qe,this.setTexture2D=(Te=!1,function(e,t){e&&e.isWebGLRenderTarget&&(Te||(n.warn("THREE.WebGLRenderer.setTexture2D: don't use render targets as textures. Use their .texture property instead."),Te=!0),e=e.texture),T.setTexture2D(e,t)}),this.setTexture=function(){var e=!1;return function(t,r){e||(n.warn("THREE.WebGLRenderer: .setTexture is deprecated, use setTexture2D instead."),e=!0),T.setTexture2D(t,r)}}(),this.setTextureCube=function(){var e=!1;return function(t,r){t&&t.isWebGLRenderTargetCube&&(e||(n.warn("THREE.WebGLRenderer.setTextureCube: don't use cube render targets as textures. Use their .texture property instead."),e=!0),t=t.texture),t&&t.isCubeTexture||Array.isArray(t.image)&&6===t.image.length?T.setTextureCube(t,r):T.setTextureCubeDynamic(t,r)}}(),this.getRenderTarget=function(){return B},this.setRenderTarget=function(e){B=e,e&&void 0===w.get(e).__webglFramebuffer&&T.setupRenderTarget(e);var t=null,r=!1;if(e){var n=w.get(e).__webglFramebuffer;e.isWebGLRenderTargetCube?(t=n[e.activeCubeFace],r=!0):t=n,q.copy(e.viewport),X.copy(e.scissor),Y=e.scissorTest}else q.copy($).multiplyScalar(J),X.copy(ee).multiplyScalar(J),Y=te;if(z!==t&&(v.bindFramebuffer(v.FRAMEBUFFER,t),z=t),x.viewport(q),x.scissor(X),x.setScissorTest(Y),r){var i=w.get(e.texture);v.framebufferTexture2D(v.FRAMEBUFFER,v.COLOR_ATTACHMENT0,v.TEXTURE_CUBE_MAP_POSITIVE_X+e.activeCubeFace,i.__webglTexture,e.activeMipMapLevel)}},this.readRenderTargetPixels=function(e,t,r,i,a,o){if(e&&e.isWebGLRenderTarget){var s=w.get(e).__webglFramebuffer;if(s){var l=!1;s!==z&&(v.bindFramebuffer(v.FRAMEBUFFER,s),l=!0);try{var u=e.texture,c=u.format,h=u.type;if(c!==qe&&U.convert(c)!==v.getParameter(v.IMPLEMENTATION_COLOR_READ_FORMAT))return void n.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");if(!(h===Ie||U.convert(h)===v.getParameter(v.IMPLEMENTATION_COLOR_READ_TYPE)||h===De&&(b.get("OES_texture_float")||b.get("WEBGL_color_buffer_float"))||h===Fe&&b.get("EXT_color_buffer_half_float")))return void n.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");v.checkFramebufferStatus(v.FRAMEBUFFER)===v.FRAMEBUFFER_COMPLETE?t>=0&&t<=e.width-i&&r>=0&&r<=e.height-a&&v.readPixels(t,r,i,a,U.convert(c),U.convert(h),o):n.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{l&&v.bindFramebuffer(v.FRAMEBUFFER,z)}}}else n.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.")}}function Bi(e,t){this.name="",this.color=new Lr(e),this.density=void 0!==t?t:25e-5}function zi(e,t,r){this.name="",this.color=new Lr(e),this.near=void 0!==t?t:1,this.far=void 0!==r?r:1e3}function ji(){cn.call(this),this.type="Scene",this.background=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0}function Vi(e,t,r,n,i){cn.call(this),this.lensFlares=[],this.positionScreen=new Pt,this.customUpdateCallback=void 0,void 0!==e&&this.add(e,t,r,n,i)}function Gi(e){Xr.call(this),this.type="SpriteMaterial",this.color=new Lr(16777215),this.map=null,this.rotation=0,this.fog=!1,this.lights=!1,this.setValues(e)}function Wi(e){cn.call(this),this.type="Sprite",this.material=void 0!==e?e:new Gi}function qi(){cn.call(this),this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}})}function Xi(e,t){if(e=e||[],this.bones=e.slice(0),this.boneMatrices=new Float32Array(16*this.bones.length),void 0===t)this.calculateInverses();else if(this.bones.length===t.length)this.boneInverses=t.slice(0);else{n.warn("THREE.Skeleton boneInverses is the wrong length."),this.boneInverses=[];for(var r=0,i=this.bones.length;r<i;r++)this.boneInverses.push(new Ot)}}function Yi(){cn.call(this),this.type="Bone"}function Zi(e,t){Xn.call(this,e,t),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new Ot,this.bindMatrixInverse=new Ot;var r=new Xi(this.initBones());this.bind(r,this.matrixWorld),this.normalizeSkinWeights()}function Ki(e){Xr.call(this),this.type="LineBasicMaterial",this.color=new Lr(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.lights=!1,this.setValues(e)}function Qi(e,t,r){if(1===r)return n.warn("THREE.Line: parameter THREE.LinePieces no longer supported. Created THREE.LineSegments instead."),new Ji(e,t);cn.call(this),this.type="Line",this.geometry=void 0!==e?e:new Un,this.material=void 0!==t?t:new Ki({color:16777215*Math.random()})}function Ji(e,t){Qi.call(this,e,t),this.type="LineSegments"}function $i(e,t){Qi.call(this,e,t),this.type="LineLoop"}function ea(e){Xr.call(this),this.type="PointsMaterial",this.color=new Lr(16777215),this.map=null,this.size=1,this.sizeAttenuation=!0,this.lights=!1,this.setValues(e)}function ta(e,t){cn.call(this),this.type="Points",this.geometry=void 0!==e?e:new Un,this.material=void 0!==t?t:new ea({color:16777215*Math.random()})}function ra(){cn.call(this),this.type="Group"}function na(e,t,r,n,i,a,o,s,l){Nt.call(this,e,t,r,n,i,a,o,s,l),this.generateMipmaps=!1;var u=this;function c(){e.removeEventListener("loadeddata",c,!1),u.needsUpdate=!0}e.addEventListener("loadeddata",c,!1)}function ia(e,t,r,n,i,a,o,s,l,u,c,h){Nt.call(this,null,a,o,s,l,u,n,i,c,h),this.image={width:t,height:r},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}function aa(e,t,r,n,i,a,o,s,l,u){if((u=void 0!==u?u:Ke)!==Ke&&u!==Qe)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===r&&u===Ke&&(r=ke),void 0===r&&u===Qe&&(r=Ve),Nt.call(this,null,n,i,a,o,s,u,r,l),this.image={width:e,height:t},this.magFilter=void 0!==o?o:Me,this.minFilter=void 0!==s?s:Me,this.flipY=!1,this.generateMipmaps=!1}function oa(e){Un.call(this),this.type="WireframeGeometry";var t,r,n,i,a,o,s,l,u,c,h=[],d=[0,0],f={},p=["a","b","c"];if(e&&e.isGeometry){var m=e.faces;for(t=0,n=m.length;t<n;t++){var g=m[t];for(r=0;r<3;r++)s=g[p[r]],l=g[p[(r+1)%3]],d[0]=Math.min(s,l),d[1]=Math.max(s,l),void 0===f[u=d[0]+","+d[1]]&&(f[u]={index1:d[0],index2:d[1]})}for(u in f)o=f[u],c=e.vertices[o.index1],h.push(c.x,c.y,c.z),c=e.vertices[o.index2],h.push(c.x,c.y,c.z)}else if(e&&e.isBufferGeometry){var v,y,b,E,x,w,T;if(c=new Pt,null!==e.index){for(v=e.attributes.position,y=e.index,0===(b=e.groups).length&&(b=[{start:0,count:y.count,materialIndex:0}]),i=0,a=b.length;i<a;++i)for(t=x=(E=b[i]).start,n=x+E.count;t<n;t+=3)for(r=0;r<3;r++)s=y.getX(t+r),l=y.getX(t+(r+1)%3),d[0]=Math.min(s,l),d[1]=Math.max(s,l),void 0===f[u=d[0]+","+d[1]]&&(f[u]={index1:d[0],index2:d[1]});for(u in f)o=f[u],c.fromBufferAttribute(v,o.index1),h.push(c.x,c.y,c.z),c.fromBufferAttribute(v,o.index2),h.push(c.x,c.y,c.z)}else for(t=0,n=(v=e.attributes.position).count/3;t<n;t++)for(r=0;r<3;r++)w=3*t+r,c.fromBufferAttribute(v,w),h.push(c.x,c.y,c.z),T=3*t+(r+1)%3,c.fromBufferAttribute(v,T),h.push(c.x,c.y,c.z)}this.addAttribute("position",new Sn(h,3))}function sa(e,t,r){gn.call(this),this.type="ParametricGeometry",this.parameters={func:e,slices:t,stacks:r},this.fromBufferGeometry(new la(e,t,r)),this.mergeVertices()}function la(e,t,r){Un.call(this),this.type="ParametricBufferGeometry",this.parameters={func:e,slices:t,stacks:r};var n,i,a=[],o=[],s=[],l=[],u=1e-5,c=new Pt,h=new Pt,d=new Pt,f=new Pt,p=new Pt,m=t+1;for(n=0;n<=r;n++){var g=n/r;for(i=0;i<=t;i++){var v=i/t;h=e(v,g,h),o.push(h.x,h.y,h.z),v-u>=0?(d=e(v-u,g,d),f.subVectors(h,d)):(d=e(v+u,g,d),f.subVectors(d,h)),g-u>=0?(d=e(v,g-u,d),p.subVectors(h,d)):(d=e(v,g+u,d),p.subVectors(d,h)),c.crossVectors(f,p).normalize(),s.push(c.x,c.y,c.z),l.push(v,g)}}for(n=0;n<r;n++)for(i=0;i<t;i++){var y=n*m+i,b=n*m+i+1,E=(n+1)*m+i+1,x=(n+1)*m+i;a.push(y,b,x),a.push(b,E,x)}this.setIndex(a),this.addAttribute("position",new Sn(o,3)),this.addAttribute("normal",new Sn(s,3)),this.addAttribute("uv",new Sn(l,2))}function ua(e,t,r,n){gn.call(this),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:r,detail:n},this.fromBufferGeometry(new ca(e,t,r,n)),this.mergeVertices()}function ca(e,t,r,n){Un.call(this),this.type="PolyhedronBufferGeometry",this.parameters={vertices:e,indices:t,radius:r,detail:n},r=r||1;var i=[],a=[];function o(e){for(var r=new Pt,n=new Pt,i=new Pt,a=0;a<t.length;a+=3)d(t[a+0],r),d(t[a+1],n),d(t[a+2],i),s(r,n,i,e)}function s(e,t,r,n){var i,a,o=Math.pow(2,n),s=[];for(i=0;i<=o;i++){s[i]=[];var l=e.clone().lerp(r,i/o),u=t.clone().lerp(r,i/o),c=o-i;for(a=0;a<=c;a++)s[i][a]=0===a&&i===o?l:l.clone().lerp(u,a/c)}for(i=0;i<o;i++)for(a=0;a<2*(o-i)-1;a++){var d=Math.floor(a/2);a%2==0?(h(s[i][d+1]),h(s[i+1][d]),h(s[i][d])):(h(s[i][d+1]),h(s[i+1][d+1]),h(s[i+1][d]))}}function l(e){for(var t=new Pt,r=0;r<i.length;r+=3)t.x=i[r+0],t.y=i[r+1],t.z=i[r+2],t.normalize().multiplyScalar(e),i[r+0]=t.x,i[r+1]=t.y,i[r+2]=t.z}function u(){for(var e=new Pt,t=0;t<i.length;t+=3){e.x=i[t+0],e.y=i[t+1],e.z=i[t+2];var r=m(e)/2/Math.PI+.5,n=g(e)/Math.PI+.5;a.push(r,1-n)}f(),c()}function c(){for(var e=0;e<a.length;e+=6){var t=a[e+0],r=a[e+2],n=a[e+4],i=Math.max(t,r,n),o=Math.min(t,r,n);i>.9&&o<.1&&(t<.2&&(a[e+0]+=1),r<.2&&(a[e+2]+=1),n<.2&&(a[e+4]+=1))}}function h(e){i.push(e.x,e.y,e.z)}function d(t,r){var n=3*t;r.x=e[n+0],r.y=e[n+1],r.z=e[n+2]}function f(){for(var e=new Pt,t=new Pt,r=new Pt,n=new Pt,o=new Lt,s=new Lt,l=new Lt,u=0,c=0;u<i.length;u+=9,c+=6){e.set(i[u+0],i[u+1],i[u+2]),t.set(i[u+3],i[u+4],i[u+5]),r.set(i[u+6],i[u+7],i[u+8]),o.set(a[c+0],a[c+1]),s.set(a[c+2],a[c+3]),l.set(a[c+4],a[c+5]),n.copy(e).add(t).add(r).divideScalar(3);var h=m(n);p(o,c+0,e,h),p(s,c+2,t,h),p(l,c+4,r,h)}}function p(e,t,r,n){n<0&&1===e.x&&(a[t]=e.x-1),0===r.x&&0===r.z&&(a[t]=n/2/Math.PI+.5)}function m(e){return Math.atan2(e.z,-e.x)}function g(e){return Math.atan2(-e.y,Math.sqrt(e.x*e.x+e.z*e.z))}o(n=n||0),l(r),u(),this.addAttribute("position",new Sn(i,3)),this.addAttribute("normal",new Sn(i.slice(),3)),this.addAttribute("uv",new Sn(a,2)),0===n?this.computeVertexNormals():this.normalizeNormals()}function ha(e,t){gn.call(this),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new da(e,t)),this.mergeVertices()}function da(e,t){var r=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],n=[2,1,0,0,3,2,1,3,0,2,3,1];ca.call(this,r,n,e,t),this.type="TetrahedronBufferGeometry",this.parameters={radius:e,detail:t}}function fa(e,t){gn.call(this),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new pa(e,t)),this.mergeVertices()}function pa(e,t){var r=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],n=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];ca.call(this,r,n,e,t),this.type="OctahedronBufferGeometry",this.parameters={radius:e,detail:t}}function ma(e,t){gn.call(this),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new ga(e,t)),this.mergeVertices()}function ga(e,t){var r=(1+Math.sqrt(5))/2,n=[-1,r,0,1,r,0,-1,-r,0,1,-r,0,0,-1,r,0,1,r,0,-1,-r,0,1,-r,r,0,-1,r,0,1,-r,0,-1,-r,0,1],i=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];ca.call(this,n,i,e,t),this.type="IcosahedronBufferGeometry",this.parameters={radius:e,detail:t}}function va(e,t){gn.call(this),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new ya(e,t)),this.mergeVertices()}function ya(e,t){var r=(1+Math.sqrt(5))/2,n=1/r,i=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-n,-r,0,-n,r,0,n,-r,0,n,r,-n,-r,0,-n,r,0,n,-r,0,n,r,0,-r,0,-n,r,0,-n,-r,0,n,r,0,n],a=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];ca.call(this,i,a,e,t),this.type="DodecahedronBufferGeometry",this.parameters={radius:e,detail:t}}function ba(e,t,r,i,a,o){gn.call(this),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:r,radialSegments:i,closed:a},void 0!==o&&n.warn("THREE.TubeGeometry: taper has been removed.");var s=new Ea(e,t,r,i,a);this.tangents=s.tangents,this.normals=s.normals,this.binormals=s.binormals,this.fromBufferGeometry(s),this.mergeVertices()}function Ea(e,t,r,n,i){Un.call(this),this.type="TubeBufferGeometry",this.parameters={path:e,tubularSegments:t,radius:r,radialSegments:n,closed:i},t=t||64,r=r||1,n=n||8,i=i||!1;var a=e.computeFrenetFrames(t,i);this.tangents=a.tangents,this.normals=a.normals,this.binormals=a.binormals;var o,s,l=new Pt,u=new Pt,c=new Lt,h=new Pt,d=[],f=[],p=[],m=[];function g(){for(o=0;o<t;o++)v(o);v(!1===i?t:0),b(),y()}function v(i){h=e.getPointAt(i/t,h);var o=a.normals[i],c=a.binormals[i];for(s=0;s<=n;s++){var p=s/n*Math.PI*2,m=Math.sin(p),g=-Math.cos(p);u.x=g*o.x+m*c.x,u.y=g*o.y+m*c.y,u.z=g*o.z+m*c.z,u.normalize(),f.push(u.x,u.y,u.z),l.x=h.x+r*u.x,l.y=h.y+r*u.y,l.z=h.z+r*u.z,d.push(l.x,l.y,l.z)}}function y(){for(s=1;s<=t;s++)for(o=1;o<=n;o++){var e=(n+1)*(s-1)+(o-1),r=(n+1)*s+(o-1),i=(n+1)*s+o,a=(n+1)*(s-1)+o;m.push(e,r,a),m.push(r,i,a)}}function b(){for(o=0;o<=t;o++)for(s=0;s<=n;s++)c.x=o/t,c.y=s/n,p.push(c.x,c.y)}g(),this.setIndex(m),this.addAttribute("position",new Sn(d,3)),this.addAttribute("normal",new Sn(f,3)),this.addAttribute("uv",new Sn(p,2))}function xa(e,t,r,i,a,o,s){gn.call(this),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:r,radialSegments:i,p:a,q:o},void 0!==s&&n.warn("THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead."),this.fromBufferGeometry(new wa(e,t,r,i,a,o)),this.mergeVertices()}function wa(e,t,r,n,i,a){Un.call(this),this.type="TorusKnotBufferGeometry",this.parameters={radius:e,tube:t,tubularSegments:r,radialSegments:n,p:i,q:a},e=e||1,t=t||.4,r=Math.floor(r)||64,n=Math.floor(n)||8,i=i||2,a=a||3;var o,s,l=[],u=[],c=[],h=[],d=new Pt,f=new Pt,p=new Pt,m=new Pt,g=new Pt,v=new Pt,y=new Pt;for(o=0;o<=r;++o){var b=o/r*i*Math.PI*2;for(R(b,i,a,e,p),R(b+.01,i,a,e,m),v.subVectors(m,p),y.addVectors(m,p),g.crossVectors(v,y),y.crossVectors(g,v),g.normalize(),y.normalize(),s=0;s<=n;++s){var E=s/n*Math.PI*2,x=-t*Math.cos(E),w=t*Math.sin(E);d.x=p.x+(x*y.x+w*g.x),d.y=p.y+(x*y.y+w*g.y),d.z=p.z+(x*y.z+w*g.z),u.push(d.x,d.y,d.z),f.subVectors(d,p).normalize(),c.push(f.x,f.y,f.z),h.push(o/r),h.push(s/n)}}for(s=1;s<=r;s++)for(o=1;o<=n;o++){var T=(n+1)*(s-1)+(o-1),_=(n+1)*s+(o-1),S=(n+1)*s+o,M=(n+1)*(s-1)+o;l.push(T,_,M),l.push(_,S,M)}function R(e,t,r,n,i){var a=Math.cos(e),o=Math.sin(e),s=r/t*e,l=Math.cos(s);i.x=n*(2+l)*.5*a,i.y=n*(2+l)*o*.5,i.z=n*Math.sin(s)*.5}this.setIndex(l),this.addAttribute("position",new Sn(u,3)),this.addAttribute("normal",new Sn(c,3)),this.addAttribute("uv",new Sn(h,2))}function Ta(e,t,r,n,i){gn.call(this),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:r,tubularSegments:n,arc:i},this.fromBufferGeometry(new _a(e,t,r,n,i)),this.mergeVertices()}function _a(e,t,r,n,i){Un.call(this),this.type="TorusBufferGeometry",this.parameters={radius:e,tube:t,radialSegments:r,tubularSegments:n,arc:i},e=e||1,t=t||.4,r=Math.floor(r)||8,n=Math.floor(n)||6,i=i||2*Math.PI;var a,o,s=[],l=[],u=[],c=[],h=new Pt,d=new Pt,f=new Pt;for(a=0;a<=r;a++)for(o=0;o<=n;o++){var p=o/n*i,m=a/r*Math.PI*2;d.x=(e+t*Math.cos(m))*Math.cos(p),d.y=(e+t*Math.cos(m))*Math.sin(p),d.z=t*Math.sin(m),l.push(d.x,d.y,d.z),h.x=e*Math.cos(p),h.y=e*Math.sin(p),f.subVectors(d,h).normalize(),u.push(f.x,f.y,f.z),c.push(o/n),c.push(a/r)}for(a=1;a<=r;a++)for(o=1;o<=n;o++){var g=(n+1)*a+o-1,v=(n+1)*(a-1)+o-1,y=(n+1)*(a-1)+o,b=(n+1)*a+o;s.push(g,v,b),s.push(v,y,b)}this.setIndex(s),this.addAttribute("position",new Sn(l,3)),this.addAttribute("normal",new Sn(u,3)),this.addAttribute("uv",new Sn(c,2))}Pi.prototype=Object.assign(Object.create(hn.prototype),{constructor:Pi,isPerspectiveCamera:!0,copy:function(e,t){return hn.prototype.copy.call(this,e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this},setFocalLength:function(e){var t=.5*this.getFilmHeight()/e;this.fov=2*Ct.RAD2DEG*Math.atan(t),this.updateProjectionMatrix()},getFocalLength:function(){var e=Math.tan(.5*Ct.DEG2RAD*this.fov);return.5*this.getFilmHeight()/e},getEffectiveFOV:function(){return 2*Ct.RAD2DEG*Math.atan(Math.tan(.5*Ct.DEG2RAD*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*Math.min(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/Math.max(this.aspect,1)},setViewOffset:function(e,t,r,n,i,a){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=r,this.view.offsetY=n,this.view.width=i,this.view.height=a,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var e=this.near,t=e*Math.tan(.5*Ct.DEG2RAD*this.fov)/this.zoom,r=2*t,n=this.aspect*r,i=-.5*n,a=this.view;if(null!==this.view&&this.view.enabled){var o=a.fullWidth,s=a.fullHeight;i+=a.offsetX*n/o,t-=a.offsetY*r/s,n*=a.width/o,r*=a.height/s}var l=this.filmOffset;0!==l&&(i+=e*l/this.getFilmWidth()),this.projectionMatrix.makePerspective(i,i+n,t,t-r,e,this.far)},toJSON:function(e){var t=cn.prototype.toJSON.call(this,e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}),Hi.prototype=Object.assign(Object.create(Pi.prototype),{constructor:Hi,isArrayCamera:!0}),Bi.prototype.isFogExp2=!0,Bi.prototype.clone=function(){return new Bi(this.color.getHex(),this.density)},Bi.prototype.toJSON=function(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}},zi.prototype.isFog=!0,zi.prototype.clone=function(){return new zi(this.color.getHex(),this.near,this.far)},zi.prototype.toJSON=function(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}},ji.prototype=Object.assign(Object.create(cn.prototype),{constructor:ji,copy:function(e,t){return cn.prototype.copy.call(this,e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.fog&&(this.fog=e.fog.clone()),null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.autoUpdate=e.autoUpdate,this.matrixAutoUpdate=e.matrixAutoUpdate,this},toJSON:function(e){var t=cn.prototype.toJSON.call(this,e);return null!==this.background&&(t.object.background=this.background.toJSON(e)),null!==this.fog&&(t.object.fog=this.fog.toJSON()),t}}),Vi.prototype=Object.assign(Object.create(cn.prototype),{constructor:Vi,isLensFlare:!0,copy:function(e){cn.prototype.copy.call(this,e),this.positionScreen.copy(e.positionScreen),this.customUpdateCallback=e.customUpdateCallback;for(var t=0,r=e.lensFlares.length;t<r;t++)this.lensFlares.push(e.lensFlares[t]);return this},add:function(e,t,r,n,i,a){void 0===t&&(t=-1),void 0===r&&(r=0),void 0===a&&(a=1),void 0===i&&(i=new Lr(16777215)),void 0===n&&(n=I),r=Math.min(r,Math.max(0,r)),this.lensFlares.push({texture:e,size:t,distance:r,x:0,y:0,z:0,scale:1,rotation:0,opacity:a,color:i,blending:n})},updateLensFlares:function(){var e,t,r=this.lensFlares.length,n=2*-this.positionScreen.x,i=2*-this.positionScreen.y;for(e=0;e<r;e++)(t=this.lensFlares[e]).x=this.positionScreen.x+n*t.distance,t.y=this.positionScreen.y+i*t.distance,t.wantedRotation=t.x*Math.PI*.25,t.rotation+=.25*(t.wantedRotation-t.rotation)}}),Gi.prototype=Object.create(Xr.prototype),Gi.prototype.constructor=Gi,Gi.prototype.isSpriteMaterial=!0,Gi.prototype.copy=function(e){return Xr.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.rotation=e.rotation,this},Wi.prototype=Object.assign(Object.create(cn.prototype),{constructor:Wi,isSprite:!0,raycast:(di=new Pt,fi=new Pt,pi=new Pt,function(e,t){fi.setFromMatrixPosition(this.matrixWorld),e.ray.closestPointToPoint(fi,di),pi.setFromMatrixScale(this.matrixWorld);var r=pi.x*pi.y/4;if(!(fi.distanceToSquared(di)>r)){var n=e.ray.origin.distanceTo(di);n<e.near||n>e.far||t.push({distance:n,point:di.clone(),face:null,object:this})}}),clone:function(){return new this.constructor(this.material).copy(this)}}),qi.prototype=Object.assign(Object.create(cn.prototype),{constructor:qi,copy:function(e){cn.prototype.copy.call(this,e,!1);for(var t=e.levels,r=0,n=t.length;r<n;r++){var i=t[r];this.addLevel(i.object.clone(),i.distance)}return this},addLevel:function(e,t){void 0===t&&(t=0),t=Math.abs(t);for(var r=this.levels,n=0;n<r.length&&!(t<r[n].distance);n++);r.splice(n,0,{distance:t,object:e}),this.add(e)},getObjectForDistance:function(e){for(var t=this.levels,r=1,n=t.length;r<n&&!(e<t[r].distance);r++);return t[r-1].object},raycast:(hi=new Pt,function(e,t){hi.setFromMatrixPosition(this.matrixWorld);var r=e.ray.origin.distanceTo(hi);this.getObjectForDistance(r).raycast(e,t)}),update:function(){var e=new Pt,t=new Pt;return function(r){var n=this.levels;if(n.length>1){e.setFromMatrixPosition(r.matrixWorld),t.setFromMatrixPosition(this.matrixWorld);var i=e.distanceTo(t);n[0].object.visible=!0;for(var a=1,o=n.length;a<o&&i>=n[a].distance;a++)n[a-1].object.visible=!1,n[a].object.visible=!0;for(;a<o;a++)n[a].object.visible=!1}}}(),toJSON:function(e){var t=cn.prototype.toJSON.call(this,e);t.object.levels=[];for(var r=this.levels,n=0,i=r.length;n<i;n++){var a=r[n];t.object.levels.push({object:a.object.uuid,distance:a.distance})}return t}}),Object.assign(Xi.prototype,{calculateInverses:function(){this.boneInverses=[];for(var e=0,t=this.bones.length;e<t;e++){var r=new Ot;this.bones[e]&&r.getInverse(this.bones[e].matrixWorld),this.boneInverses.push(r)}},pose:function(){var e,t,r;for(t=0,r=this.bones.length;t<r;t++)(e=this.bones[t])&&e.matrixWorld.getInverse(this.boneInverses[t]);for(t=0,r=this.bones.length;t<r;t++)(e=this.bones[t])&&(e.parent&&e.parent.isBone?(e.matrix.getInverse(e.parent.matrixWorld),e.matrix.multiply(e.matrixWorld)):e.matrix.copy(e.matrixWorld),e.matrix.decompose(e.position,e.quaternion,e.scale))},update:(ui=new Ot,ci=new Ot,function(){for(var e=this.bones,t=this.boneInverses,r=this.boneMatrices,n=this.boneTexture,i=0,a=e.length;i<a;i++){var o=e[i]?e[i].matrixWorld:ci;ui.multiplyMatrices(o,t[i]),ui.toArray(r,16*i)}void 0!==n&&(n.needsUpdate=!0)}),clone:function(){return new Xi(this.bones,this.boneInverses)}}),Yi.prototype=Object.assign(Object.create(cn.prototype),{constructor:Yi,isBone:!0}),Zi.prototype=Object.assign(Object.create(Xn.prototype),{constructor:Zi,isSkinnedMesh:!0,initBones:function(){var e,t,r,n,i=[];if(this.geometry&&void 0!==this.geometry.bones){for(r=0,n=this.geometry.bones.length;r<n;r++)t=this.geometry.bones[r],e=new Yi,i.push(e),e.name=t.name,e.position.fromArray(t.pos),e.quaternion.fromArray(t.rotq),void 0!==t.scl&&e.scale.fromArray(t.scl);for(r=0,n=this.geometry.bones.length;r<n;r++)-1!==(t=this.geometry.bones[r]).parent&&null!==t.parent&&void 0!==i[t.parent]?i[t.parent].add(i[r]):this.add(i[r])}return this.updateMatrixWorld(!0),i},bind:function(e,t){this.skeleton=e,void 0===t&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.getInverse(t)},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){var e,t;if(this.geometry&&this.geometry.isGeometry)for(t=0;t<this.geometry.skinWeights.length;t++){var r=this.geometry.skinWeights[t];(e=1/r.manhattanLength())!=1/0?r.multiplyScalar(e):r.set(1,0,0,0)}else if(this.geometry&&this.geometry.isBufferGeometry){var n=new Ut,i=this.geometry.attributes.skinWeight;for(t=0;t<i.count;t++)n.x=i.getX(t),n.y=i.getY(t),n.z=i.getZ(t),n.w=i.getW(t),(e=1/n.manhattanLength())!=1/0?n.multiplyScalar(e):n.set(1,0,0,0),i.setXYZW(t,n.x,n.y,n.z,n.w)}},updateMatrixWorld:function(e){Xn.prototype.updateMatrixWorld.call(this,e),"attached"===this.bindMode?this.bindMatrixInverse.getInverse(this.matrixWorld):"detached"===this.bindMode?this.bindMatrixInverse.getInverse(this.bindMatrix):n.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),Ki.prototype=Object.create(Xr.prototype),Ki.prototype.constructor=Ki,Ki.prototype.isLineBasicMaterial=!0,Ki.prototype.copy=function(e){return Xr.prototype.copy.call(this,e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this},Qi.prototype=Object.assign(Object.create(cn.prototype),{constructor:Qi,isLine:!0,raycast:function(){var e=new Ot,t=new Gn,r=new Qr;return function(n,i){var a=n.linePrecision,o=a*a,s=this.geometry,l=this.matrixWorld;if(null===s.boundingSphere&&s.computeBoundingSphere(),r.copy(s.boundingSphere),r.applyMatrix4(l),!1!==n.ray.intersectsSphere(r)){e.getInverse(l),t.copy(n.ray).applyMatrix4(e);var u=new Pt,c=new Pt,h=new Pt,d=new Pt,f=this&&this.isLineSegments?2:1;if(s.isBufferGeometry){var p=s.index,m=s.attributes.position.array;if(null!==p)for(var g=p.array,v=0,y=g.length-1;v<y;v+=f){var b=g[v],E=g[v+1];u.fromArray(m,3*b),c.fromArray(m,3*E),t.distanceSqToSegment(u,c,d,h)>o||(d.applyMatrix4(this.matrixWorld),(T=n.ray.origin.distanceTo(d))<n.near||T>n.far||i.push({distance:T,point:h.clone().applyMatrix4(this.matrixWorld),index:v,face:null,faceIndex:null,object:this}))}else for(v=0,y=m.length/3-1;v<y;v+=f)u.fromArray(m,3*v),c.fromArray(m,3*v+3),t.distanceSqToSegment(u,c,d,h)>o||(d.applyMatrix4(this.matrixWorld),(T=n.ray.origin.distanceTo(d))<n.near||T>n.far||i.push({distance:T,point:h.clone().applyMatrix4(this.matrixWorld),index:v,face:null,faceIndex:null,object:this}))}else if(s.isGeometry){var x=s.vertices,w=x.length;for(v=0;v<w-1;v+=f){var T;t.distanceSqToSegment(x[v],x[v+1],d,h)>o||(d.applyMatrix4(this.matrixWorld),(T=n.ray.origin.distanceTo(d))<n.near||T>n.far||i.push({distance:T,point:h.clone().applyMatrix4(this.matrixWorld),index:v,face:null,faceIndex:null,object:this}))}}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),Ji.prototype=Object.assign(Object.create(Qi.prototype),{constructor:Ji,isLineSegments:!0}),$i.prototype=Object.assign(Object.create(Qi.prototype),{constructor:$i,isLineLoop:!0}),ea.prototype=Object.create(Xr.prototype),ea.prototype.constructor=ea,ea.prototype.isPointsMaterial=!0,ea.prototype.copy=function(e){return Xr.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this},ta.prototype=Object.assign(Object.create(cn.prototype),{constructor:ta,isPoints:!0,raycast:function(){var e=new Ot,t=new Gn,r=new Qr;return function(n,i){var a=this,o=this.geometry,s=this.matrixWorld,l=n.params.Points.threshold;if(null===o.boundingSphere&&o.computeBoundingSphere(),r.copy(o.boundingSphere),r.applyMatrix4(s),r.radius+=l,!1!==n.ray.intersectsSphere(r)){e.getInverse(s),t.copy(n.ray).applyMatrix4(e);var u=l/((this.scale.x+this.scale.y+this.scale.z)/3),c=u*u,h=new Pt;if(o.isBufferGeometry){var d=o.index,f=o.attributes.position.array;if(null!==d)for(var p=d.array,m=0,g=p.length;m<g;m++){var v=p[m];h.fromArray(f,3*v),E(h,v)}else{m=0;for(var y=f.length/3;m<y;m++)h.fromArray(f,3*m),E(h,m)}}else{var b=o.vertices;for(m=0,y=b.length;m<y;m++)E(b[m],m)}}function E(e,r){var o=t.distanceSqToPoint(e);if(o<c){var l=t.closestPointToPoint(e);l.applyMatrix4(s);var u=n.ray.origin.distanceTo(l);if(u<n.near||u>n.far)return;i.push({distance:u,distanceToRay:Math.sqrt(o),point:l.clone(),index:r,face:null,object:a})}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),ra.prototype=Object.assign(Object.create(cn.prototype),{constructor:ra,isGroup:!0}),na.prototype=Object.assign(Object.create(Nt.prototype),{constructor:na,isVideoTexture:!0,update:function(){var e=this.image;e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}),ia.prototype=Object.create(Nt.prototype),ia.prototype.constructor=ia,ia.prototype.isCompressedTexture=!0,aa.prototype=Object.create(Nt.prototype),aa.prototype.constructor=aa,aa.prototype.isDepthTexture=!0,oa.prototype=Object.create(Un.prototype),oa.prototype.constructor=oa,sa.prototype=Object.create(gn.prototype),sa.prototype.constructor=sa,la.prototype=Object.create(Un.prototype),la.prototype.constructor=la,ua.prototype=Object.create(gn.prototype),ua.prototype.constructor=ua,ca.prototype=Object.create(Un.prototype),ca.prototype.constructor=ca,ha.prototype=Object.create(gn.prototype),ha.prototype.constructor=ha,da.prototype=Object.create(ca.prototype),da.prototype.constructor=da,fa.prototype=Object.create(gn.prototype),fa.prototype.constructor=fa,pa.prototype=Object.create(ca.prototype),pa.prototype.constructor=pa,ma.prototype=Object.create(gn.prototype),ma.prototype.constructor=ma,ga.prototype=Object.create(ca.prototype),ga.prototype.constructor=ga,va.prototype=Object.create(gn.prototype),va.prototype.constructor=va,ya.prototype=Object.create(ca.prototype),ya.prototype.constructor=ya,ba.prototype=Object.create(gn.prototype),ba.prototype.constructor=ba,Ea.prototype=Object.create(Un.prototype),Ea.prototype.constructor=Ea,xa.prototype=Object.create(gn.prototype),xa.prototype.constructor=xa,wa.prototype=Object.create(Un.prototype),wa.prototype.constructor=wa,Ta.prototype=Object.create(gn.prototype),Ta.prototype.constructor=Ta,_a.prototype=Object.create(Un.prototype),_a.prototype.constructor=_a;var Sa={triangulate:function(e,t,r){r=r||2;var n,i,a,o,s,l,u,c=t&&t.length,h=c?t[0]*r:e.length,d=Ma(e,0,h,r,!0),f=[];if(!d)return f;if(c&&(d=Pa(e,t,d,r)),e.length>80*r){n=a=e[0],i=o=e[1];for(var p=r;p<h;p+=r)(s=e[p])<n&&(n=s),(l=e[p+1])<i&&(i=l),s>a&&(a=s),l>o&&(o=l);u=0!==(u=Math.max(a-n,o-i))?1/u:0}return Aa(d,f,r,n,i,u),f}};function Ma(e,t,r,n,i){var a,o;if(i===$a(e,t,r,n)>0)for(a=t;a<r;a+=n)o=Ka(a,e[a],e[a+1],o);else for(a=r-n;a>=t;a-=n)o=Ka(a,e[a],e[a+1],o);return o&&Ga(o,o.next)&&(Qa(o),o=o.next),o}function Ra(e,t){if(!e)return e;t||(t=e);var r,n=e;do{if(r=!1,n.steiner||!Ga(n,n.next)&&0!==Va(n.prev,n,n.next))n=n.next;else{if(Qa(n),(n=t=n.prev)===n.next)break;r=!0}}while(r||n!==t);return t}function Aa(e,t,r,n,i,a,o){if(e){!o&&a&&Ua(e,n,i,a);for(var s,l,u=e;e.prev!==e.next;)if(s=e.prev,l=e.next,a?La(e,n,i,a):Ca(e))t.push(s.i/r),t.push(e.i/r),t.push(l.i/r),Qa(e),e=l.next,u=l.next;else if((e=l)===u){o?1===o?Aa(e=Oa(e,t,r),t,r,n,i,a,2):2===o&&Ia(e,t,r,n,i,a):Aa(Ra(e),t,r,n,i,a,1);break}}}function Ca(e){var t=e.prev,r=e,n=e.next;if(Va(t,r,n)>=0)return!1;for(var i=e.next.next;i!==e.prev;){if(za(t.x,t.y,r.x,r.y,n.x,n.y,i.x,i.y)&&Va(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function La(e,t,r,n){var i=e.prev,a=e,o=e.next;if(Va(i,a,o)>=0)return!1;for(var s=i.x<a.x?i.x<o.x?i.x:o.x:a.x<o.x?a.x:o.x,l=i.y<a.y?i.y<o.y?i.y:o.y:a.y<o.y?a.y:o.y,u=i.x>a.x?i.x>o.x?i.x:o.x:a.x>o.x?a.x:o.x,c=i.y>a.y?i.y>o.y?i.y:o.y:a.y>o.y?a.y:o.y,h=Fa(s,l,t,r,n),d=Fa(u,c,t,r,n),f=e.nextZ;f&&f.z<=d;){if(f!==e.prev&&f!==e.next&&za(i.x,i.y,a.x,a.y,o.x,o.y,f.x,f.y)&&Va(f.prev,f,f.next)>=0)return!1;f=f.nextZ}for(f=e.prevZ;f&&f.z>=h;){if(f!==e.prev&&f!==e.next&&za(i.x,i.y,a.x,a.y,o.x,o.y,f.x,f.y)&&Va(f.prev,f,f.next)>=0)return!1;f=f.prevZ}return!0}function Oa(e,t,r){var n=e;do{var i=n.prev,a=n.next.next;!Ga(i,a)&&Wa(i,n,n.next,a)&&Xa(i,a)&&Xa(a,i)&&(t.push(i.i/r),t.push(n.i/r),t.push(a.i/r),Qa(n),Qa(n.next),n=e=a),n=n.next}while(n!==e);return n}function Ia(e,t,r,n,i,a){var o=e;do{for(var s=o.next.next;s!==o.prev;){if(o.i!==s.i&&ja(o,s)){var l=Za(o,s);return o=Ra(o,o.next),l=Ra(l,l.next),Aa(o,t,r,n,i,a),void Aa(l,t,r,n,i,a)}s=s.next}o=o.next}while(o!==e)}function Pa(e,t,r,n){var i,a,o,s=[];for(i=0,a=t.length;i<a;i++)(o=Ma(e,t[i]*n,i<a-1?t[i+1]*n:e.length,n,!1))===o.next&&(o.steiner=!0),s.push(Ba(o));for(s.sort(Ha),i=0;i<s.length;i++)ka(s[i],r),r=Ra(r,r.next);return r}function Ha(e,t){return e.x-t.x}function ka(e,t){if(t=Na(e,t)){var r=Za(t,e);Ra(r,r.next)}}function Na(e,t){var r,n=t,i=e.x,a=e.y,o=-1/0;do{if(a<=n.y&&a>=n.next.y&&n.next.y!==n.y){var s=n.x+(a-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(s<=i&&s>o){if(o=s,s===i){if(a===n.y)return n;if(a===n.next.y)return n.next}r=n.x<n.next.x?n:n.next}}n=n.next}while(n!==t);if(!r)return null;if(i===o)return r.prev;var l,u=r,c=r.x,h=r.y,d=1/0;for(n=r.next;n!==u;)i>=n.x&&n.x>=c&&i!==n.x&&za(a<h?i:o,a,c,h,a<h?o:i,a,n.x,n.y)&&((l=Math.abs(a-n.y)/(i-n.x))<d||l===d&&n.x>r.x)&&Xa(n,e)&&(r=n,d=l),n=n.next;return r}function Ua(e,t,r,n){var i=e;do{null===i.z&&(i.z=Fa(i.x,i.y,t,r,n)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==e);i.prevZ.nextZ=null,i.prevZ=null,Da(i)}function Da(e){var t,r,n,i,a,o,s,l,u=1;do{for(r=e,e=null,a=null,o=0;r;){for(o++,n=r,s=0,t=0;t<u&&(s++,n=n.nextZ);t++);for(l=u;s>0||l>0&&n;)0!==s&&(0===l||!n||r.z<=n.z)?(i=r,r=r.nextZ,s--):(i=n,n=n.nextZ,l--),a?a.nextZ=i:e=i,i.prevZ=a,a=i;r=n}a.nextZ=null,u*=2}while(o>1);return e}function Fa(e,t,r,n,i){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-r)*i)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-n)*i)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function Ba(e){var t=e,r=e;do{t.x<r.x&&(r=t),t=t.next}while(t!==e);return r}function za(e,t,r,n,i,a,o,s){return(i-o)*(t-s)-(e-o)*(a-s)>=0&&(e-o)*(n-s)-(r-o)*(t-s)>=0&&(r-o)*(a-s)-(i-o)*(n-s)>=0}function ja(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!qa(e,t)&&Xa(e,t)&&Xa(t,e)&&Ya(e,t)}function Va(e,t,r){return(t.y-e.y)*(r.x-t.x)-(t.x-e.x)*(r.y-t.y)}function Ga(e,t){return e.x===t.x&&e.y===t.y}function Wa(e,t,r,n){return!!(Ga(e,t)&&Ga(r,n)||Ga(e,n)&&Ga(r,t))||Va(e,t,r)>0!=Va(e,t,n)>0&&Va(r,n,e)>0!=Va(r,n,t)>0}function qa(e,t){var r=e;do{if(r.i!==e.i&&r.next.i!==e.i&&r.i!==t.i&&r.next.i!==t.i&&Wa(r,r.next,e,t))return!0;r=r.next}while(r!==e);return!1}function Xa(e,t){return Va(e.prev,e,e.next)<0?Va(e,t,e.next)>=0&&Va(e,e.prev,t)>=0:Va(e,t,e.prev)<0||Va(e,e.next,t)<0}function Ya(e,t){var r=e,n=!1,i=(e.x+t.x)/2,a=(e.y+t.y)/2;do{r.y>a!=r.next.y>a&&r.next.y!==r.y&&i<(r.next.x-r.x)*(a-r.y)/(r.next.y-r.y)+r.x&&(n=!n),r=r.next}while(r!==e);return n}function Za(e,t){var r=new Ja(e.i,e.x,e.y),n=new Ja(t.i,t.x,t.y),i=e.next,a=t.prev;return e.next=t,t.prev=e,r.next=i,i.prev=r,n.next=r,r.prev=n,a.next=n,n.prev=a,n}function Ka(e,t,r,n){var i=new Ja(e,t,r);return n?(i.next=n.next,i.prev=n,n.next.prev=i,n.next=i):(i.prev=i,i.next=i),i}function Qa(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function Ja(e,t,r){this.i=e,this.x=t,this.y=r,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function $a(e,t,r,n){for(var i=0,a=t,o=r-n;a<r;a+=n)i+=(e[o]-e[a])*(e[a+1]+e[o+1]),o=a;return i}var eo={area:function(e){for(var t=e.length,r=0,n=t-1,i=0;i<t;n=i++)r+=e[n].x*e[i].y-e[i].x*e[n].y;return.5*r},isClockWise:function(e){return eo.area(e)<0},triangulateShape:function(e,t){function r(e){var t=e.length;t>2&&e[t-1].equals(e[0])&&e.pop()}function n(e,t){for(var r=0;r<t.length;r++)e.push(t[r].x),e.push(t[r].y)}var i=[],a=[],o=[];r(e),n(i,e);var s=e.length;for(t.forEach(r),u=0;u<t.length;u++)a.push(s),s+=t[u].length,n(i,t[u]);for(var l=Sa.triangulate(i,a),u=0;u<l.length;u+=3)o.push(l.slice(u,u+3));return o}};function to(e,t){gn.call(this),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},this.fromBufferGeometry(new ro(e,t)),this.mergeVertices()}function ro(e,t){void 0!==e&&(Un.call(this),this.type="ExtrudeBufferGeometry",e=Array.isArray(e)?e:[e],this.addShapeList(e,t),this.computeVertexNormals())}function no(e,t){gn.call(this),this.type="TextGeometry",this.parameters={text:e,parameters:t},this.fromBufferGeometry(new io(e,t)),this.mergeVertices()}function io(e,t){var r=(t=t||{}).font;if(!r||!r.isFont)return n.error("THREE.TextGeometry: font parameter is not an instance of THREE.Font."),new gn;var i=r.generateShapes(e,t.size,t.curveSegments);t.amount=void 0!==t.height?t.height:50,void 0===t.bevelThickness&&(t.bevelThickness=10),void 0===t.bevelSize&&(t.bevelSize=8),void 0===t.bevelEnabled&&(t.bevelEnabled=!1),ro.call(this,i,t),this.type="TextBufferGeometry"}function ao(e,t,r,n,i,a,o){gn.call(this),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:r,phiStart:n,phiLength:i,thetaStart:a,thetaLength:o},this.fromBufferGeometry(new oo(e,t,r,n,i,a,o)),this.mergeVertices()}function oo(e,t,r,n,i,a,o){Un.call(this),this.type="SphereBufferGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:r,phiStart:n,phiLength:i,thetaStart:a,thetaLength:o},e=e||1,t=Math.max(3,Math.floor(t)||8),r=Math.max(2,Math.floor(r)||6),n=void 0!==n?n:0,i=void 0!==i?i:2*Math.PI;var s,l,u=(a=void 0!==a?a:0)+(o=void 0!==o?o:Math.PI),c=0,h=[],d=new Pt,f=new Pt,p=[],m=[],g=[],v=[];for(l=0;l<=r;l++){var y=[],b=l/r;for(s=0;s<=t;s++){var E=s/t;d.x=-e*Math.cos(n+E*i)*Math.sin(a+b*o),d.y=e*Math.cos(a+b*o),d.z=e*Math.sin(n+E*i)*Math.sin(a+b*o),m.push(d.x,d.y,d.z),f.set(d.x,d.y,d.z).normalize(),g.push(f.x,f.y,f.z),v.push(E,1-b),y.push(c++)}h.push(y)}for(l=0;l<r;l++)for(s=0;s<t;s++){var x=h[l][s+1],w=h[l][s],T=h[l+1][s],_=h[l+1][s+1];(0!==l||a>0)&&p.push(x,w,_),(l!==r-1||u<Math.PI)&&p.push(w,T,_)}this.setIndex(p),this.addAttribute("position",new Sn(m,3)),this.addAttribute("normal",new Sn(g,3)),this.addAttribute("uv",new Sn(v,2))}function so(e,t,r,n,i,a){gn.call(this),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:r,phiSegments:n,thetaStart:i,thetaLength:a},this.fromBufferGeometry(new lo(e,t,r,n,i,a)),this.mergeVertices()}function lo(e,t,r,n,i,a){Un.call(this),this.type="RingBufferGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:r,phiSegments:n,thetaStart:i,thetaLength:a},e=e||.5,t=t||1,i=void 0!==i?i:0,a=void 0!==a?a:2*Math.PI,r=void 0!==r?Math.max(3,r):8;var o,s,l,u=[],c=[],h=[],d=[],f=e,p=(t-e)/(n=void 0!==n?Math.max(1,n):1),m=new Pt,g=new Lt;for(s=0;s<=n;s++){for(l=0;l<=r;l++)o=i+l/r*a,m.x=f*Math.cos(o),m.y=f*Math.sin(o),c.push(m.x,m.y,m.z),h.push(0,0,1),g.x=(m.x/t+1)/2,g.y=(m.y/t+1)/2,d.push(g.x,g.y);f+=p}for(s=0;s<n;s++){var v=s*(r+1);for(l=0;l<r;l++){var y=o=l+v,b=o+r+1,E=o+r+2,x=o+1;u.push(y,b,x),u.push(b,E,x)}}this.setIndex(u),this.addAttribute("position",new Sn(c,3)),this.addAttribute("normal",new Sn(h,3)),this.addAttribute("uv",new Sn(d,2))}function uo(e,t,r,n){gn.call(this),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:r,phiLength:n},this.fromBufferGeometry(new co(e,t,r,n)),this.mergeVertices()}function co(e,t,r,n){Un.call(this),this.type="LatheBufferGeometry",this.parameters={points:e,segments:t,phiStart:r,phiLength:n},t=Math.floor(t)||12,r=r||0,n=n||2*Math.PI,n=Ct.clamp(n,0,2*Math.PI);var i,a,o,s=[],l=[],u=[],c=1/t,h=new Pt,d=new Lt;for(a=0;a<=t;a++){var f=r+a*c*n,p=Math.sin(f),m=Math.cos(f);for(o=0;o<=e.length-1;o++)h.x=e[o].x*p,h.y=e[o].y,h.z=e[o].x*m,l.push(h.x,h.y,h.z),d.x=a/t,d.y=o/(e.length-1),u.push(d.x,d.y)}for(a=0;a<t;a++)for(o=0;o<e.length-1;o++){var g=i=o+a*e.length,v=i+e.length,y=i+e.length+1,b=i+1;s.push(g,v,b),s.push(v,y,b)}if(this.setIndex(s),this.addAttribute("position",new Sn(l,3)),this.addAttribute("uv",new Sn(u,2)),this.computeVertexNormals(),n===2*Math.PI){var E=this.attributes.normal.array,x=new Pt,w=new Pt,T=new Pt;for(i=t*e.length*3,a=0,o=0;a<e.length;a++,o+=3)x.x=E[o+0],x.y=E[o+1],x.z=E[o+2],w.x=E[i+o+0],w.y=E[i+o+1],w.z=E[i+o+2],T.addVectors(x,w).normalize(),E[o+0]=E[i+o+0]=T.x,E[o+1]=E[i+o+1]=T.y,E[o+2]=E[i+o+2]=T.z}}function ho(e,t){gn.call(this),this.type="ShapeGeometry","object"==typeof t&&(n.warn("THREE.ShapeGeometry: Options parameter has been removed."),t=t.curveSegments),this.parameters={shapes:e,curveSegments:t},this.fromBufferGeometry(new fo(e,t)),this.mergeVertices()}function fo(e,t){Un.call(this),this.type="ShapeBufferGeometry",this.parameters={shapes:e,curveSegments:t},t=t||12;var r=[],n=[],i=[],a=[],o=0,s=0;if(!1===Array.isArray(e))u(e);else for(var l=0;l<e.length;l++)u(e[l]),this.addGroup(o,s,l),o+=s,s=0;function u(e){var o,l,u,c=n.length/3,h=e.extractPoints(t),d=h.shape,f=h.holes;if(!1===eo.isClockWise(d))for(d=d.reverse(),o=0,l=f.length;o<l;o++)u=f[o],!0===eo.isClockWise(u)&&(f[o]=u.reverse());var p=eo.triangulateShape(d,f);for(o=0,l=f.length;o<l;o++)u=f[o],d=d.concat(u);for(o=0,l=d.length;o<l;o++){var m=d[o];n.push(m.x,m.y,0),i.push(0,0,1),a.push(m.x,m.y)}for(o=0,l=p.length;o<l;o++){var g=p[o],v=g[0]+c,y=g[1]+c,b=g[2]+c;r.push(v,y,b),s+=3}}this.setIndex(r),this.addAttribute("position",new Sn(n,3)),this.addAttribute("normal",new Sn(i,3)),this.addAttribute("uv",new Sn(a,2))}function po(e,t){if(t.shapes=[],Array.isArray(e))for(var r=0,n=e.length;r<n;r++){var i=e[r];t.shapes.push(i.uuid)}else t.shapes.push(e.uuid);return t}function mo(e,t){Un.call(this),this.type="EdgesGeometry",this.parameters={thresholdAngle:t},t=void 0!==t?t:1;var r,n,i,a,o=[],s=Math.cos(Ct.DEG2RAD*t),l=[0,0],u={},c=["a","b","c"];e.isBufferGeometry?(a=new gn).fromBufferGeometry(e):a=e.clone(),a.mergeVertices(),a.computeFaceNormals();for(var h=a.vertices,d=a.faces,f=0,p=d.length;f<p;f++)for(var m=d[f],g=0;g<3;g++)r=m[c[g]],n=m[c[(g+1)%3]],l[0]=Math.min(r,n),l[1]=Math.max(r,n),void 0===u[i=l[0]+","+l[1]]?u[i]={index1:l[0],index2:l[1],face1:f,face2:void 0}:u[i].face2=f;for(i in u){var v=u[i];if(void 0===v.face2||d[v.face1].normal.dot(d[v.face2].normal)<=s){var y=h[v.index1];o.push(y.x,y.y,y.z),y=h[v.index2],o.push(y.x,y.y,y.z)}}this.addAttribute("position",new Sn(o,3))}function go(e,t,r,n,i,a,o,s){gn.call(this),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:r,radialSegments:n,heightSegments:i,openEnded:a,thetaStart:o,thetaLength:s},this.fromBufferGeometry(new vo(e,t,r,n,i,a,o,s)),this.mergeVertices()}function vo(e,t,r,n,i,a,o,s){Un.call(this),this.type="CylinderBufferGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:r,radialSegments:n,heightSegments:i,openEnded:a,thetaStart:o,thetaLength:s};var l=this;e=void 0!==e?e:1,t=void 0!==t?t:1,r=r||1,n=Math.floor(n)||8,i=Math.floor(i)||1,a=void 0!==a&&a,o=void 0!==o?o:0,s=void 0!==s?s:2*Math.PI;var u=[],c=[],h=[],d=[],f=0,p=[],m=r/2,g=0;function v(){var a,v,y=new Pt,b=new Pt,E=0,x=(t-e)/r;for(v=0;v<=i;v++){var w=[],T=v/i,_=T*(t-e)+e;for(a=0;a<=n;a++){var S=a/n,M=S*s+o,R=Math.sin(M),A=Math.cos(M);b.x=_*R,b.y=-T*r+m,b.z=_*A,c.push(b.x,b.y,b.z),y.set(R,x,A).normalize(),h.push(y.x,y.y,y.z),d.push(S,1-T),w.push(f++)}p.push(w)}for(a=0;a<n;a++)for(v=0;v<i;v++){var C=p[v][a],L=p[v+1][a],O=p[v+1][a+1],I=p[v][a+1];u.push(C,L,I),u.push(L,O,I),E+=6}l.addGroup(g,E,0),g+=E}function y(r){var i,a,p,v=new Lt,y=new Pt,b=0,E=!0===r?e:t,x=!0===r?1:-1;for(a=f,i=1;i<=n;i++)c.push(0,m*x,0),h.push(0,x,0),d.push(.5,.5),f++;for(p=f,i=0;i<=n;i++){var w=i/n*s+o,T=Math.cos(w),_=Math.sin(w);y.x=E*_,y.y=m*x,y.z=E*T,c.push(y.x,y.y,y.z),h.push(0,x,0),v.x=.5*T+.5,v.y=.5*_*x+.5,d.push(v.x,v.y),f++}for(i=0;i<n;i++){var S=a+i,M=p+i;!0===r?u.push(M,M+1,S):u.push(M+1,M,S),b+=3}l.addGroup(g,b,!0===r?1:2),g+=b}v(),!1===a&&(e>0&&y(!0),t>0&&y(!1)),this.setIndex(u),this.addAttribute("position",new Sn(c,3)),this.addAttribute("normal",new Sn(h,3)),this.addAttribute("uv",new Sn(d,2))}function yo(e,t,r,n,i,a,o){go.call(this,0,e,t,r,n,i,a,o),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:r,heightSegments:n,openEnded:i,thetaStart:a,thetaLength:o}}function bo(e,t,r,n,i,a,o){vo.call(this,0,e,t,r,n,i,a,o),this.type="ConeBufferGeometry",this.parameters={radius:e,height:t,radialSegments:r,heightSegments:n,openEnded:i,thetaStart:a,thetaLength:o}}function Eo(e,t,r,n){gn.call(this),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:r,thetaLength:n},this.fromBufferGeometry(new xo(e,t,r,n)),this.mergeVertices()}function xo(e,t,r,n){Un.call(this),this.type="CircleBufferGeometry",this.parameters={radius:e,segments:t,thetaStart:r,thetaLength:n},e=e||1,t=void 0!==t?Math.max(3,t):8,r=void 0!==r?r:0,n=void 0!==n?n:2*Math.PI;var i,a,o=[],s=[],l=[],u=[],c=new Pt,h=new Lt;for(s.push(0,0,0),l.push(0,0,1),u.push(.5,.5),a=0,i=3;a<=t;a++,i+=3){var d=r+a/t*n;c.x=e*Math.cos(d),c.y=e*Math.sin(d),s.push(c.x,c.y,c.z),l.push(0,0,1),h.x=(s[i]/e+1)/2,h.y=(s[i+1]/e+1)/2,u.push(h.x,h.y)}for(i=1;i<=t;i++)o.push(i,i+1,0);this.setIndex(o),this.addAttribute("position",new Sn(s,3)),this.addAttribute("normal",new Sn(l,3)),this.addAttribute("uv",new Sn(u,2))}to.prototype=Object.create(gn.prototype),to.prototype.constructor=to,ro.prototype=Object.create(Un.prototype),ro.prototype.constructor=ro,ro.prototype.getArrays=function(){var e=this.getAttribute("position"),t=e?Array.prototype.slice.call(e.array):[],r=this.getAttribute("uv"),n=r?Array.prototype.slice.call(r.array):[],i=this.index;return{position:t,uv:n,index:i?Array.prototype.slice.call(i.array):[]}},ro.prototype.addShapeList=function(e,t){var r=e.length;t.arrays=this.getArrays();for(var n=0;n<r;n++){var i=e[n];this.addShape(i,t)}this.setIndex(t.arrays.index),this.addAttribute("position",new Sn(t.arrays.position,3)),this.addAttribute("uv",new Sn(t.arrays.uv,2))},ro.prototype.addShape=function(e,t){var r,i,a,o,s,l,u,c,h=t.arrays?t.arrays:this.getArrays(),d=h.position,f=h.index,p=h.uv,m=[],g=void 0!==t.amount?t.amount:100,v=void 0!==t.bevelThickness?t.bevelThickness:6,y=void 0!==t.bevelSize?t.bevelSize:v-2,b=void 0!==t.bevelSegments?t.bevelSegments:3,E=void 0===t.bevelEnabled||t.bevelEnabled,x=void 0!==t.curveSegments?t.curveSegments:12,w=void 0!==t.steps?t.steps:1,T=t.extrudePath,_=!1,S=void 0!==t.UVGenerator?t.UVGenerator:to.WorldUVGenerator;T&&(r=T.getSpacedPoints(w),_=!0,E=!1,i=void 0!==t.frames?t.frames:T.computeFrenetFrames(w,!1),a=new Pt,o=new Pt,s=new Pt),E||(b=0,v=0,y=0);var M=this,R=e.extractPoints(x),A=R.shape,C=R.holes;if(!eo.isClockWise(A))for(A=A.reverse(),u=0,c=C.length;u<c;u++)l=C[u],eo.isClockWise(l)&&(C[u]=l.reverse());var L=eo.triangulateShape(A,C),O=A;for(u=0,c=C.length;u<c;u++)l=C[u],A=A.concat(l);function I(e,t,r){return t||n.error("THREE.ExtrudeGeometry: vec does not exist"),t.clone().multiplyScalar(r).add(e)}var P,H,k,N,U,D,F=A.length,B=L.length;function z(e,t,r){var n,i,a,o=e.x-t.x,s=e.y-t.y,l=r.x-e.x,u=r.y-e.y,c=o*o+s*s,h=o*u-s*l;if(Math.abs(h)>Number.EPSILON){var d=Math.sqrt(c),f=Math.sqrt(l*l+u*u),p=t.x-s/d,m=t.y+o/d,g=((r.x-u/f-p)*u-(r.y+l/f-m)*l)/(o*u-s*l),v=(n=p+o*g-e.x)*n+(i=m+s*g-e.y)*i;if(v<=2)return new Lt(n,i);a=Math.sqrt(v/2)}else{var y=!1;o>Number.EPSILON?l>Number.EPSILON&&(y=!0):o<-Number.EPSILON?l<-Number.EPSILON&&(y=!0):Math.sign(s)===Math.sign(u)&&(y=!0),y?(n=-s,i=o,a=Math.sqrt(c)):(n=o,i=s,a=Math.sqrt(c/2))}return new Lt(n/a,i/a)}for(var j=[],V=0,G=O.length,W=G-1,q=V+1;V<G;V++,W++,q++)W===G&&(W=0),q===G&&(q=0),j[V]=z(O[V],O[W],O[q]);var X,Y,Z=[],K=j.concat();for(u=0,c=C.length;u<c;u++){for(l=C[u],X=[],V=0,W=(G=l.length)-1,q=V+1;V<G;V++,W++,q++)W===G&&(W=0),q===G&&(q=0),X[V]=z(l[V],l[W],l[q]);Z.push(X),K=K.concat(X)}for(P=0;P<b;P++){for(k=P/b,N=v*Math.cos(k*Math.PI/2),H=y*Math.sin(k*Math.PI/2),V=0,G=O.length;V<G;V++)ee((U=I(O[V],j[V],H)).x,U.y,-N);for(u=0,c=C.length;u<c;u++)for(l=C[u],X=Z[u],V=0,G=l.length;V<G;V++)ee((U=I(l[V],X[V],H)).x,U.y,-N)}for(H=y,V=0;V<F;V++)U=E?I(A[V],K[V],H):A[V],_?(o.copy(i.normals[0]).multiplyScalar(U.x),a.copy(i.binormals[0]).multiplyScalar(U.y),s.copy(r[0]).add(o).add(a),ee(s.x,s.y,s.z)):ee(U.x,U.y,0);for(Y=1;Y<=w;Y++)for(V=0;V<F;V++)U=E?I(A[V],K[V],H):A[V],_?(o.copy(i.normals[Y]).multiplyScalar(U.x),a.copy(i.binormals[Y]).multiplyScalar(U.y),s.copy(r[Y]).add(o).add(a),ee(s.x,s.y,s.z)):ee(U.x,U.y,g/w*Y);for(P=b-1;P>=0;P--){for(k=P/b,N=v*Math.cos(k*Math.PI/2),H=y*Math.sin(k*Math.PI/2),V=0,G=O.length;V<G;V++)ee((U=I(O[V],j[V],H)).x,U.y,g+N);for(u=0,c=C.length;u<c;u++)for(l=C[u],X=Z[u],V=0,G=l.length;V<G;V++)U=I(l[V],X[V],H),_?ee(U.x,U.y+r[w-1].y,r[w-1].x+N):ee(U.x,U.y,g+N)}function Q(){var e=d.length/3;if(E){var r=0,n=F*r;for(V=0;V<B;V++)te((D=L[V])[2]+n,D[1]+n,D[0]+n);for(n=F*(r=w+2*b),V=0;V<B;V++)te((D=L[V])[0]+n,D[1]+n,D[2]+n)}else{for(V=0;V<B;V++)te((D=L[V])[2],D[1],D[0]);for(V=0;V<B;V++)te((D=L[V])[0]+F*w,D[1]+F*w,D[2]+F*w)}M.addGroup(e,d.length/3-e,void 0!==t.material?t.material:0)}function J(){var e=d.length/3,r=0;for($(O,r),r+=O.length,u=0,c=C.length;u<c;u++)$(l=C[u],r),r+=l.length;M.addGroup(e,d.length/3-e,void 0!==t.extrudeMaterial?t.extrudeMaterial:1)}function $(e,t){var r,n;for(V=e.length;--V>=0;){r=V,(n=V-1)<0&&(n=e.length-1);var i=0,a=w+2*b;for(i=0;i<a;i++){var o=F*i,s=F*(i+1);re(t+r+o,t+n+o,t+n+s,t+r+s)}}}function ee(e,t,r){m.push(e),m.push(t),m.push(r)}function te(e,t,r){ne(e),ne(t),ne(r);var n=d.length/3,i=S.generateTopUV(M,d,n-3,n-2,n-1);ie(i[0]),ie(i[1]),ie(i[2])}function re(e,t,r,n){ne(e),ne(t),ne(n),ne(t),ne(r),ne(n);var i=d.length/3,a=S.generateSideWallUV(M,d,i-6,i-3,i-2,i-1);ie(a[0]),ie(a[1]),ie(a[3]),ie(a[1]),ie(a[2]),ie(a[3])}function ne(e){f.push(d.length/3),d.push(m[3*e+0]),d.push(m[3*e+1]),d.push(m[3*e+2])}function ie(e){p.push(e.x),p.push(e.y)}Q(),J(),t.arrays||(this.setIndex(f),this.addAttribute("position",new Sn(d,3)),this.addAttribute("uv",new Sn(p,2)))},to.WorldUVGenerator={generateTopUV:function(e,t,r,n,i){var a=t[3*r],o=t[3*r+1],s=t[3*n],l=t[3*n+1],u=t[3*i],c=t[3*i+1];return[new Lt(a,o),new Lt(s,l),new Lt(u,c)]},generateSideWallUV:function(e,t,r,n,i,a){var o=t[3*r],s=t[3*r+1],l=t[3*r+2],u=t[3*n],c=t[3*n+1],h=t[3*n+2],d=t[3*i],f=t[3*i+1],p=t[3*i+2],m=t[3*a],g=t[3*a+1],v=t[3*a+2];return Math.abs(s-c)<.01?[new Lt(o,1-l),new Lt(u,1-h),new Lt(d,1-p),new Lt(m,1-v)]:[new Lt(s,1-l),new Lt(c,1-h),new Lt(f,1-p),new Lt(g,1-v)]}},no.prototype=Object.create(gn.prototype),no.prototype.constructor=no,io.prototype=Object.create(ro.prototype),io.prototype.constructor=io,ao.prototype=Object.create(gn.prototype),ao.prototype.constructor=ao,oo.prototype=Object.create(Un.prototype),oo.prototype.constructor=oo,so.prototype=Object.create(gn.prototype),so.prototype.constructor=so,lo.prototype=Object.create(Un.prototype),lo.prototype.constructor=lo,uo.prototype=Object.create(gn.prototype),uo.prototype.constructor=uo,co.prototype=Object.create(Un.prototype),co.prototype.constructor=co,ho.prototype=Object.create(gn.prototype),ho.prototype.constructor=ho,ho.prototype.toJSON=function(){var e=gn.prototype.toJSON.call(this);return po(this.parameters.shapes,e)},fo.prototype=Object.create(Un.prototype),fo.prototype.constructor=fo,fo.prototype.toJSON=function(){var e=Un.prototype.toJSON.call(this);return po(this.parameters.shapes,e)},mo.prototype=Object.create(Un.prototype),mo.prototype.constructor=mo,go.prototype=Object.create(gn.prototype),go.prototype.constructor=go,vo.prototype=Object.create(Un.prototype),vo.prototype.constructor=vo,yo.prototype=Object.create(go.prototype),yo.prototype.constructor=yo,bo.prototype=Object.create(vo.prototype),bo.prototype.constructor=bo,Eo.prototype=Object.create(gn.prototype),Eo.prototype.constructor=Eo,xo.prototype=Object.create(Un.prototype),xo.prototype.constructor=xo;var wo=Object.freeze({WireframeGeometry:oa,ParametricGeometry:sa,ParametricBufferGeometry:la,TetrahedronGeometry:ha,TetrahedronBufferGeometry:da,OctahedronGeometry:fa,OctahedronBufferGeometry:pa,IcosahedronGeometry:ma,IcosahedronBufferGeometry:ga,DodecahedronGeometry:va,DodecahedronBufferGeometry:ya,PolyhedronGeometry:ua,PolyhedronBufferGeometry:ca,TubeGeometry:ba,TubeBufferGeometry:Ea,TorusKnotGeometry:xa,TorusKnotBufferGeometry:wa,TorusGeometry:Ta,TorusBufferGeometry:_a,TextGeometry:no,TextBufferGeometry:io,SphereGeometry:ao,SphereBufferGeometry:oo,RingGeometry:so,RingBufferGeometry:lo,PlaneGeometry:Bn,PlaneBufferGeometry:zn,LatheGeometry:uo,LatheBufferGeometry:co,ShapeGeometry:ho,ShapeBufferGeometry:fo,ExtrudeGeometry:to,ExtrudeBufferGeometry:ro,EdgesGeometry:mo,ConeGeometry:yo,ConeBufferGeometry:bo,CylinderGeometry:go,CylinderBufferGeometry:vo,CircleGeometry:Eo,CircleBufferGeometry:xo,BoxGeometry:Dn,BoxBufferGeometry:Fn});function To(e){Xr.call(this),this.type="ShadowMaterial",this.color=new Lr(0),this.opacity=1,this.lights=!0,this.transparent=!0,this.setValues(e)}function _o(e){Vn.call(this,e),this.type="RawShaderMaterial"}function So(e){Xr.call(this),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Lr(16777215),this.roughness=.5,this.metalness=.5,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Lr(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalScale=new Lt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function Mo(e){So.call(this),this.defines={PHYSICAL:""},this.type="MeshPhysicalMaterial",this.reflectivity=.5,this.clearCoat=0,this.clearCoatRoughness=0,this.setValues(e)}function Ro(e){Xr.call(this),this.type="MeshPhongMaterial",this.color=new Lr(16777215),this.specular=new Lr(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Lr(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalScale=new Lt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=se,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function Ao(e){Ro.call(this),this.defines={TOON:""},this.type="MeshToonMaterial",this.gradientMap=null,this.setValues(e)}function Co(e){Xr.call(this),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalScale=new Lt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function Lo(e){Xr.call(this),this.type="MeshLambertMaterial",this.color=new Lr(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Lr(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=se,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function Oo(e){Ki.call(this),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}To.prototype=Object.create(Xr.prototype),To.prototype.constructor=To,To.prototype.isShadowMaterial=!0,_o.prototype=Object.create(Vn.prototype),_o.prototype.constructor=_o,_o.prototype.isRawShaderMaterial=!0,So.prototype=Object.create(Xr.prototype),So.prototype.constructor=So,So.prototype.isMeshStandardMaterial=!0,So.prototype.copy=function(e){return Xr.prototype.copy.call(this,e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},Mo.prototype=Object.create(So.prototype),Mo.prototype.constructor=Mo,Mo.prototype.isMeshPhysicalMaterial=!0,Mo.prototype.copy=function(e){return So.prototype.copy.call(this,e),this.defines={PHYSICAL:""},this.reflectivity=e.reflectivity,this.clearCoat=e.clearCoat,this.clearCoatRoughness=e.clearCoatRoughness,this},Ro.prototype=Object.create(Xr.prototype),Ro.prototype.constructor=Ro,Ro.prototype.isMeshPhongMaterial=!0,Ro.prototype.copy=function(e){return Xr.prototype.copy.call(this,e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},Ao.prototype=Object.create(Ro.prototype),Ao.prototype.constructor=Ao,Ao.prototype.isMeshToonMaterial=!0,Ao.prototype.copy=function(e){return Ro.prototype.copy.call(this,e),this.gradientMap=e.gradientMap,this},Co.prototype=Object.create(Xr.prototype),Co.prototype.constructor=Co,Co.prototype.isMeshNormalMaterial=!0,Co.prototype.copy=function(e){return Xr.prototype.copy.call(this,e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},Lo.prototype=Object.create(Xr.prototype),Lo.prototype.constructor=Lo,Lo.prototype.isMeshLambertMaterial=!0,Lo.prototype.copy=function(e){return Xr.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},Oo.prototype=Object.create(Ki.prototype),Oo.prototype.constructor=Oo,Oo.prototype.isLineDashedMaterial=!0,Oo.prototype.copy=function(e){return Ki.prototype.copy.call(this,e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this};var Io=Object.freeze({ShadowMaterial:To,SpriteMaterial:Gi,RawShaderMaterial:_o,ShaderMaterial:Vn,PointsMaterial:ea,MeshPhysicalMaterial:Mo,MeshStandardMaterial:So,MeshPhongMaterial:Ro,MeshToonMaterial:Ao,MeshNormalMaterial:Co,MeshLambertMaterial:Lo,MeshDepthMaterial:Yr,MeshDistanceMaterial:Zr,MeshBasicMaterial:jn,LineDashedMaterial:Oo,LineBasicMaterial:Ki,Material:Xr}),Po={enabled:!1,files:{},add:function(e,t){!1!==this.enabled&&(this.files[e]=t)},get:function(e){if(!1!==this.enabled)return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}};function Ho(e,t,r){var n=this,i=!1,a=0,o=0,s=void 0;this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=r,this.itemStart=function(e){o++,!1===i&&void 0!==n.onStart&&n.onStart(e,a,o),i=!0},this.itemEnd=function(e){a++,void 0!==n.onProgress&&n.onProgress(e,a,o),a===o&&(i=!1,void 0!==n.onLoad&&n.onLoad())},this.itemError=function(e){void 0!==n.onError&&n.onError(e)},this.resolveURL=function(e){return s?s(e):e},this.setURLModifier=function(e){return s=e,this}}var ko=new Ho,No={};function Uo(e){this.manager=void 0!==e?e:ko}function Do(e){this.manager=void 0!==e?e:ko,this._parser=null}function Fo(e){this.manager=void 0!==e?e:ko,this._parser=null}function Bo(e){this.manager=void 0!==e?e:ko}function zo(e){this.manager=void 0!==e?e:ko}function jo(e){this.manager=void 0!==e?e:ko}function Vo(){this.type="Curve",this.arcLengthDivisions=200}function Go(e,t,r,n,i,a,o,s){Vo.call(this),this.type="EllipseCurve",this.aX=e||0,this.aY=t||0,this.xRadius=r||1,this.yRadius=n||1,this.aStartAngle=i||0,this.aEndAngle=a||2*Math.PI,this.aClockwise=o||!1,this.aRotation=s||0}function Wo(e,t,r,n,i,a){Go.call(this,e,t,r,r,n,i,a),this.type="ArcCurve"}function qo(){var e=0,t=0,r=0,n=0;function i(i,a,o,s){e=i,t=o,r=-3*i+3*a-2*o-s,n=2*i-2*a+o+s}return{initCatmullRom:function(e,t,r,n,a){i(t,r,a*(r-e),a*(n-t))},initNonuniformCatmullRom:function(e,t,r,n,a,o,s){var l=(t-e)/a-(r-e)/(a+o)+(r-t)/o,u=(r-t)/o-(n-t)/(o+s)+(n-r)/s;i(t,r,l*=o,u*=o)},calc:function(i){var a=i*i;return e+t*i+r*a+n*(a*i)}}}Object.assign(Uo.prototype,{load:function(e,t,r,i){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);var a=this,o=Po.get(e);if(void 0!==o)return a.manager.itemStart(e),setTimeout((function(){t&&t(o),a.manager.itemEnd(e)}),0),o;if(void 0===No[e]){var s=/^data:(.*?)(;base64)?,(.*)$/,l=e.match(s);if(l){var u=l[1],c=!!l[2],h=l[3];h=window.decodeURIComponent(h),c&&(h=window.atob(h));try{var d,f=(this.responseType||"").toLowerCase();switch(f){case"arraybuffer":case"blob":for(var p=new Uint8Array(h.length),m=0;m<h.length;m++)p[m]=h.charCodeAt(m);d="blob"===f?new Blob([p.buffer],{type:u}):p.buffer;break;case"document":var g=new DOMParser;d=g.parseFromString(h,u);break;case"json":d=JSON.parse(h);break;default:d=h}window.setTimeout((function(){t&&t(d),a.manager.itemEnd(e)}),0)}catch(t){window.setTimeout((function(){i&&i(t),a.manager.itemEnd(e),a.manager.itemError(e)}),0)}}else{No[e]=[],No[e].push({onLoad:t,onProgress:r,onError:i});var v=new XMLHttpRequest;for(var y in v.open("GET",e,!0),v.addEventListener("load",(function(t){var r=this.response;Po.add(e,r);var i=No[e];if(delete No[e],200===this.status){for(var o=0,s=i.length;o<s;o++)(l=i[o]).onLoad&&l.onLoad(r);a.manager.itemEnd(e)}else if(0===this.status){for(n.warn("THREE.FileLoader: HTTP Status 0 received."),o=0,s=i.length;o<s;o++)(l=i[o]).onLoad&&l.onLoad(r);a.manager.itemEnd(e)}else{for(o=0,s=i.length;o<s;o++){var l;(l=i[o]).onError&&l.onError(t)}a.manager.itemEnd(e),a.manager.itemError(e)}}),!1),v.addEventListener("progress",(function(t){for(var r=No[e],n=0,i=r.length;n<i;n++){var a=r[n];a.onProgress&&a.onProgress(t)}}),!1),v.addEventListener("error",(function(t){var r=No[e];delete No[e];for(var n=0,i=r.length;n<i;n++){var o=r[n];o.onError&&o.onError(t)}a.manager.itemEnd(e),a.manager.itemError(e)}),!1),void 0!==this.responseType&&(v.responseType=this.responseType),void 0!==this.withCredentials&&(v.withCredentials=this.withCredentials),v.overrideMimeType&&v.overrideMimeType(void 0!==this.mimeType?this.mimeType:"text/plain"),this.requestHeader)v.setRequestHeader(y,this.requestHeader[y]);v.send(null)}return a.manager.itemStart(e),v}No[e].push({onLoad:t,onProgress:r,onError:i})},setPath:function(e){return this.path=e,this},setResponseType:function(e){return this.responseType=e,this},setWithCredentials:function(e){return this.withCredentials=e,this},setMimeType:function(e){return this.mimeType=e,this},setRequestHeader:function(e){return this.requestHeader=e,this}}),Object.assign(Do.prototype,{load:function(e,t,r,n){var i=this,a=[],o=new ia;o.image=a;var s=new Uo(this.manager);function l(l){s.load(e[l],(function(e){var r=i._parser(e,!0);a[l]={width:r.width,height:r.height,format:r.format,mipmaps:r.mipmaps},6===(u+=1)&&(1===r.mipmapCount&&(o.minFilter=Ce),o.format=r.format,o.needsUpdate=!0,t&&t(o))}),r,n)}if(s.setPath(this.path),s.setResponseType("arraybuffer"),Array.isArray(e))for(var u=0,c=0,h=e.length;c<h;++c)l(c);else s.load(e,(function(e){var r=i._parser(e,!0);if(r.isCubemap)for(var n=r.mipmaps.length/r.mipmapCount,s=0;s<n;s++){a[s]={mipmaps:[]};for(var l=0;l<r.mipmapCount;l++)a[s].mipmaps.push(r.mipmaps[s*r.mipmapCount+l]),a[s].format=r.format,a[s].width=r.width,a[s].height=r.height}else o.image.width=r.width,o.image.height=r.height,o.mipmaps=r.mipmaps;1===r.mipmapCount&&(o.minFilter=Ce),o.format=r.format,o.needsUpdate=!0,t&&t(o)}),r,n);return o},setPath:function(e){return this.path=e,this}}),Object.assign(Fo.prototype,{load:function(e,t,r,n){var i=this,a=new Bt,o=new Uo(this.manager);return o.setResponseType("arraybuffer"),o.load(e,(function(e){var r=i._parser(e);r&&(void 0!==r.image?a.image=r.image:void 0!==r.data&&(a.image.width=r.width,a.image.height=r.height,a.image.data=r.data),a.wrapS=void 0!==r.wrapS?r.wrapS:_e,a.wrapT=void 0!==r.wrapT?r.wrapT:_e,a.magFilter=void 0!==r.magFilter?r.magFilter:Ce,a.minFilter=void 0!==r.minFilter?r.minFilter:Oe,a.anisotropy=void 0!==r.anisotropy?r.anisotropy:1,void 0!==r.format&&(a.format=r.format),void 0!==r.type&&(a.type=r.type),void 0!==r.mipmaps&&(a.mipmaps=r.mipmaps),1===r.mipmapCount&&(a.minFilter=Ce),a.needsUpdate=!0,t&&t(a,r))}),r,n),a}}),Object.assign(Bo.prototype,{crossOrigin:"Anonymous",load:function(e,t,r,n){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);var i=this,a=Po.get(e);if(void 0!==a)return i.manager.itemStart(e),setTimeout((function(){t&&t(a),i.manager.itemEnd(e)}),0),a;var o=document.createElementNS("http://www.w3.org/1999/xhtml","img");return o.addEventListener("load",(function(){Po.add(e,this),t&&t(this),i.manager.itemEnd(e)}),!1),o.addEventListener("error",(function(t){n&&n(t),i.manager.itemEnd(e),i.manager.itemError(e)}),!1),"data:"!==e.substr(0,5)&&void 0!==this.crossOrigin&&(o.crossOrigin=this.crossOrigin),i.manager.itemStart(e),o.src=e,o},setCrossOrigin:function(e){return this.crossOrigin=e,this},setPath:function(e){return this.path=e,this}}),Object.assign(zo.prototype,{crossOrigin:"Anonymous",load:function(e,t,r,n){var i=new zt,a=new Bo(this.manager);a.setCrossOrigin(this.crossOrigin),a.setPath(this.path);var o=0;function s(r){a.load(e[r],(function(e){i.images[r]=e,6==++o&&(i.needsUpdate=!0,t&&t(i))}),void 0,n)}for(var l=0;l<e.length;++l)s(l);return i},setCrossOrigin:function(e){return this.crossOrigin=e,this},setPath:function(e){return this.path=e,this}}),Object.assign(jo.prototype,{crossOrigin:"Anonymous",load:function(e,t,r,n){var i=new Nt,a=new Bo(this.manager);return a.setCrossOrigin(this.crossOrigin),a.setPath(this.path),a.load(e,(function(r){i.image=r;var n=e.search(/\.(jpg|jpeg)$/)>0||0===e.search(/^data\:image\/jpeg/);i.format=n?We:qe,i.needsUpdate=!0,void 0!==t&&t(i)}),r,n),i},setCrossOrigin:function(e){return this.crossOrigin=e,this},setPath:function(e){return this.path=e,this}}),Object.assign(Vo.prototype,{getPoint:function(){return n.warn("THREE.Curve: .getPoint() not implemented."),null},getPointAt:function(e,t){var r=this.getUtoTmapping(e);return this.getPoint(r,t)},getPoints:function(e){void 0===e&&(e=5);for(var t=[],r=0;r<=e;r++)t.push(this.getPoint(r/e));return t},getSpacedPoints:function(e){void 0===e&&(e=5);for(var t=[],r=0;r<=e;r++)t.push(this.getPointAt(r/e));return t},getLength:function(){var e=this.getLengths();return e[e.length-1]},getLengths:function(e){if(void 0===e&&(e=this.arcLengthDivisions),this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var t,r,n=[],i=this.getPoint(0),a=0;for(n.push(0),r=1;r<=e;r++)a+=(t=this.getPoint(r/e)).distanceTo(i),n.push(a),i=t;return this.cacheArcLengths=n,n},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()},getUtoTmapping:function(e,t){var r,n=this.getLengths(),i=0,a=n.length;r=t||e*n[a-1];for(var o,s=0,l=a-1;s<=l;)if((o=n[i=Math.floor(s+(l-s)/2)]-r)<0)s=i+1;else{if(!(o>0)){l=i;break}l=i-1}if(n[i=l]===r)return i/(a-1);var u=n[i];return(i+(r-u)/(n[i+1]-u))/(a-1)},getTangent:function(e){var t=1e-4,r=e-t,n=e+t;r<0&&(r=0),n>1&&(n=1);var i=this.getPoint(r);return this.getPoint(n).clone().sub(i).normalize()},getTangentAt:function(e){var t=this.getUtoTmapping(e);return this.getTangent(t)},computeFrenetFrames:function(e,t){var r,n,i,a=new Pt,o=[],s=[],l=[],u=new Pt,c=new Ot;for(r=0;r<=e;r++)n=r/e,o[r]=this.getTangentAt(n),o[r].normalize();s[0]=new Pt,l[0]=new Pt;var h=Number.MAX_VALUE,d=Math.abs(o[0].x),f=Math.abs(o[0].y),p=Math.abs(o[0].z);for(d<=h&&(h=d,a.set(1,0,0)),f<=h&&(h=f,a.set(0,1,0)),p<=h&&a.set(0,0,1),u.crossVectors(o[0],a).normalize(),s[0].crossVectors(o[0],u),l[0].crossVectors(o[0],s[0]),r=1;r<=e;r++)s[r]=s[r-1].clone(),l[r]=l[r-1].clone(),u.crossVectors(o[r-1],o[r]),u.length()>Number.EPSILON&&(u.normalize(),i=Math.acos(Ct.clamp(o[r-1].dot(o[r]),-1,1)),s[r].applyMatrix4(c.makeRotationAxis(u,i))),l[r].crossVectors(o[r],s[r]);if(!0===t)for(i=Math.acos(Ct.clamp(s[0].dot(s[e]),-1,1)),i/=e,o[0].dot(u.crossVectors(s[0],s[e]))>0&&(i=-i),r=1;r<=e;r++)s[r].applyMatrix4(c.makeRotationAxis(o[r],i*r)),l[r].crossVectors(o[r],s[r]);return{tangents:o,normals:s,binormals:l}},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.arcLengthDivisions=e.arcLengthDivisions,this},toJSON:function(){var e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e},fromJSON:function(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}),Go.prototype=Object.create(Vo.prototype),Go.prototype.constructor=Go,Go.prototype.isEllipseCurve=!0,Go.prototype.getPoint=function(e,t){for(var r=t||new Lt,n=2*Math.PI,i=this.aEndAngle-this.aStartAngle,a=Math.abs(i)<Number.EPSILON;i<0;)i+=n;for(;i>n;)i-=n;i<Number.EPSILON&&(i=a?0:n),!0!==this.aClockwise||a||(i===n?i=-n:i-=n);var o=this.aStartAngle+e*i,s=this.aX+this.xRadius*Math.cos(o),l=this.aY+this.yRadius*Math.sin(o);if(0!==this.aRotation){var u=Math.cos(this.aRotation),c=Math.sin(this.aRotation),h=s-this.aX,d=l-this.aY;s=h*u-d*c+this.aX,l=h*c+d*u+this.aY}return r.set(s,l)},Go.prototype.copy=function(e){return Vo.prototype.copy.call(this,e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this},Go.prototype.toJSON=function(){var e=Vo.prototype.toJSON.call(this);return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e},Go.prototype.fromJSON=function(e){return Vo.prototype.fromJSON.call(this,e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this},Wo.prototype=Object.create(Go.prototype),Wo.prototype.constructor=Wo,Wo.prototype.isArcCurve=!0;var Xo=new Pt,Yo=new qo,Zo=new qo,Ko=new qo;function Qo(e,t,r,n){Vo.call(this),this.type="CatmullRomCurve3",this.points=e||[],this.closed=t||!1,this.curveType=r||"centripetal",this.tension=n||.5}function Jo(e,t,r,n,i){var a=.5*(n-t),o=.5*(i-r),s=e*e;return(2*r-2*n+a+o)*(e*s)+(-3*r+3*n-2*a-o)*s+a*e+r}function $o(e,t){var r=1-e;return r*r*t}function es(e,t){return 2*(1-e)*e*t}function ts(e,t){return e*e*t}function rs(e,t,r,n){return $o(e,t)+es(e,r)+ts(e,n)}function ns(e,t){var r=1-e;return r*r*r*t}function is(e,t){var r=1-e;return 3*r*r*e*t}function as(e,t){return 3*(1-e)*e*e*t}function os(e,t){return e*e*e*t}function ss(e,t,r,n,i){return ns(e,t)+is(e,r)+as(e,n)+os(e,i)}function ls(e,t,r,n){Vo.call(this),this.type="CubicBezierCurve",this.v0=e||new Lt,this.v1=t||new Lt,this.v2=r||new Lt,this.v3=n||new Lt}function us(e,t,r,n){Vo.call(this),this.type="CubicBezierCurve3",this.v0=e||new Pt,this.v1=t||new Pt,this.v2=r||new Pt,this.v3=n||new Pt}function cs(e,t){Vo.call(this),this.type="LineCurve",this.v1=e||new Lt,this.v2=t||new Lt}function hs(e,t){Vo.call(this),this.type="LineCurve3",this.v1=e||new Pt,this.v2=t||new Pt}function ds(e,t,r){Vo.call(this),this.type="QuadraticBezierCurve",this.v0=e||new Lt,this.v1=t||new Lt,this.v2=r||new Lt}function fs(e,t,r){Vo.call(this),this.type="QuadraticBezierCurve3",this.v0=e||new Pt,this.v1=t||new Pt,this.v2=r||new Pt}function ps(e){Vo.call(this),this.type="SplineCurve",this.points=e||[]}Qo.prototype=Object.create(Vo.prototype),Qo.prototype.constructor=Qo,Qo.prototype.isCatmullRomCurve3=!0,Qo.prototype.getPoint=function(e,t){var r,n,i,a,o=t||new Pt,s=this.points,l=s.length,u=(l-(this.closed?0:1))*e,c=Math.floor(u),h=u-c;if(this.closed?c+=c>0?0:(Math.floor(Math.abs(c)/s.length)+1)*s.length:0===h&&c===l-1&&(c=l-2,h=1),this.closed||c>0?r=s[(c-1)%l]:(Xo.subVectors(s[0],s[1]).add(s[0]),r=Xo),n=s[c%l],i=s[(c+1)%l],this.closed||c+2<l?a=s[(c+2)%l]:(Xo.subVectors(s[l-1],s[l-2]).add(s[l-1]),a=Xo),"centripetal"===this.curveType||"chordal"===this.curveType){var d="chordal"===this.curveType?.5:.25,f=Math.pow(r.distanceToSquared(n),d),p=Math.pow(n.distanceToSquared(i),d),m=Math.pow(i.distanceToSquared(a),d);p<1e-4&&(p=1),f<1e-4&&(f=p),m<1e-4&&(m=p),Yo.initNonuniformCatmullRom(r.x,n.x,i.x,a.x,f,p,m),Zo.initNonuniformCatmullRom(r.y,n.y,i.y,a.y,f,p,m),Ko.initNonuniformCatmullRom(r.z,n.z,i.z,a.z,f,p,m)}else"catmullrom"===this.curveType&&(Yo.initCatmullRom(r.x,n.x,i.x,a.x,this.tension),Zo.initCatmullRom(r.y,n.y,i.y,a.y,this.tension),Ko.initCatmullRom(r.z,n.z,i.z,a.z,this.tension));return o.set(Yo.calc(h),Zo.calc(h),Ko.calc(h)),o},Qo.prototype.copy=function(e){Vo.prototype.copy.call(this,e),this.points=[];for(var t=0,r=e.points.length;t<r;t++){var n=e.points[t];this.points.push(n.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this},Qo.prototype.toJSON=function(){var e=Vo.prototype.toJSON.call(this);e.points=[];for(var t=0,r=this.points.length;t<r;t++){var n=this.points[t];e.points.push(n.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e},Qo.prototype.fromJSON=function(e){Vo.prototype.fromJSON.call(this,e),this.points=[];for(var t=0,r=e.points.length;t<r;t++){var n=e.points[t];this.points.push((new Pt).fromArray(n))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this},ls.prototype=Object.create(Vo.prototype),ls.prototype.constructor=ls,ls.prototype.isCubicBezierCurve=!0,ls.prototype.getPoint=function(e,t){var r=t||new Lt,n=this.v0,i=this.v1,a=this.v2,o=this.v3;return r.set(ss(e,n.x,i.x,a.x,o.x),ss(e,n.y,i.y,a.y,o.y)),r},ls.prototype.copy=function(e){return Vo.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this},ls.prototype.toJSON=function(){var e=Vo.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e},ls.prototype.fromJSON=function(e){return Vo.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this},us.prototype=Object.create(Vo.prototype),us.prototype.constructor=us,us.prototype.isCubicBezierCurve3=!0,us.prototype.getPoint=function(e,t){var r=t||new Pt,n=this.v0,i=this.v1,a=this.v2,o=this.v3;return r.set(ss(e,n.x,i.x,a.x,o.x),ss(e,n.y,i.y,a.y,o.y),ss(e,n.z,i.z,a.z,o.z)),r},us.prototype.copy=function(e){return Vo.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this},us.prototype.toJSON=function(){var e=Vo.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e},us.prototype.fromJSON=function(e){return Vo.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this},cs.prototype=Object.create(Vo.prototype),cs.prototype.constructor=cs,cs.prototype.isLineCurve=!0,cs.prototype.getPoint=function(e,t){var r=t||new Lt;return 1===e?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r},cs.prototype.getPointAt=function(e,t){return this.getPoint(e,t)},cs.prototype.getTangent=function(){return this.v2.clone().sub(this.v1).normalize()},cs.prototype.copy=function(e){return Vo.prototype.copy.call(this,e),this.v1.copy(e.v1),this.v2.copy(e.v2),this},cs.prototype.toJSON=function(){var e=Vo.prototype.toJSON.call(this);return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},cs.prototype.fromJSON=function(e){return Vo.prototype.fromJSON.call(this,e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},hs.prototype=Object.create(Vo.prototype),hs.prototype.constructor=hs,hs.prototype.isLineCurve3=!0,hs.prototype.getPoint=function(e,t){var r=t||new Pt;return 1===e?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r},hs.prototype.getPointAt=function(e,t){return this.getPoint(e,t)},hs.prototype.copy=function(e){return Vo.prototype.copy.call(this,e),this.v1.copy(e.v1),this.v2.copy(e.v2),this},hs.prototype.toJSON=function(){var e=Vo.prototype.toJSON.call(this);return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},hs.prototype.fromJSON=function(e){return Vo.prototype.fromJSON.call(this,e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},ds.prototype=Object.create(Vo.prototype),ds.prototype.constructor=ds,ds.prototype.isQuadraticBezierCurve=!0,ds.prototype.getPoint=function(e,t){var r=t||new Lt,n=this.v0,i=this.v1,a=this.v2;return r.set(rs(e,n.x,i.x,a.x),rs(e,n.y,i.y,a.y)),r},ds.prototype.copy=function(e){return Vo.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this},ds.prototype.toJSON=function(){var e=Vo.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},ds.prototype.fromJSON=function(e){return Vo.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},fs.prototype=Object.create(Vo.prototype),fs.prototype.constructor=fs,fs.prototype.isQuadraticBezierCurve3=!0,fs.prototype.getPoint=function(e,t){var r=t||new Pt,n=this.v0,i=this.v1,a=this.v2;return r.set(rs(e,n.x,i.x,a.x),rs(e,n.y,i.y,a.y),rs(e,n.z,i.z,a.z)),r},fs.prototype.copy=function(e){return Vo.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this},fs.prototype.toJSON=function(){var e=Vo.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},fs.prototype.fromJSON=function(e){return Vo.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},ps.prototype=Object.create(Vo.prototype),ps.prototype.constructor=ps,ps.prototype.isSplineCurve=!0,ps.prototype.getPoint=function(e,t){var r=t||new Lt,n=this.points,i=(n.length-1)*e,a=Math.floor(i),o=i-a,s=n[0===a?a:a-1],l=n[a],u=n[a>n.length-2?n.length-1:a+1],c=n[a>n.length-3?n.length-1:a+2];return r.set(Jo(o,s.x,l.x,u.x,c.x),Jo(o,s.y,l.y,u.y,c.y)),r},ps.prototype.copy=function(e){Vo.prototype.copy.call(this,e),this.points=[];for(var t=0,r=e.points.length;t<r;t++){var n=e.points[t];this.points.push(n.clone())}return this},ps.prototype.toJSON=function(){var e=Vo.prototype.toJSON.call(this);e.points=[];for(var t=0,r=this.points.length;t<r;t++){var n=this.points[t];e.points.push(n.toArray())}return e},ps.prototype.fromJSON=function(e){Vo.prototype.fromJSON.call(this,e),this.points=[];for(var t=0,r=e.points.length;t<r;t++){var n=e.points[t];this.points.push((new Lt).fromArray(n))}return this};var ms=Object.freeze({ArcCurve:Wo,CatmullRomCurve3:Qo,CubicBezierCurve:ls,CubicBezierCurve3:us,EllipseCurve:Go,LineCurve:cs,LineCurve3:hs,QuadraticBezierCurve:ds,QuadraticBezierCurve3:fs,SplineCurve:ps});function gs(){Vo.call(this),this.type="CurvePath",this.curves=[],this.autoClose=!1}function vs(e){gs.call(this),this.type="Path",this.currentPoint=new Lt,e&&this.setFromPoints(e)}function ys(e){vs.call(this,e),this.uuid=Ct.generateUUID(),this.type="Shape",this.holes=[]}function bs(e,t){cn.call(this),this.type="Light",this.color=new Lr(e),this.intensity=void 0!==t?t:1,this.receiveShadow=void 0}function Es(e,t,r){bs.call(this,e,r),this.type="HemisphereLight",this.castShadow=void 0,this.position.copy(cn.DefaultUp),this.updateMatrix(),this.groundColor=new Lr(t)}function xs(e){this.camera=e,this.bias=0,this.radius=1,this.mapSize=new Lt(512,512),this.map=null,this.matrix=new Ot}function ws(){xs.call(this,new Pi(50,1,.5,500))}function Ts(e,t,r,n,i,a){bs.call(this,e,t),this.type="SpotLight",this.position.copy(cn.DefaultUp),this.updateMatrix(),this.target=new cn,Object.defineProperty(this,"power",{get:function(){return this.intensity*Math.PI},set:function(e){this.intensity=e/Math.PI}}),this.distance=void 0!==r?r:0,this.angle=void 0!==n?n:Math.PI/3,this.penumbra=void 0!==i?i:0,this.decay=void 0!==a?a:1,this.shadow=new ws}function _s(e,t,r,n){bs.call(this,e,t),this.type="PointLight",Object.defineProperty(this,"power",{get:function(){return 4*this.intensity*Math.PI},set:function(e){this.intensity=e/(4*Math.PI)}}),this.distance=void 0!==r?r:0,this.decay=void 0!==n?n:1,this.shadow=new xs(new Pi(90,1,.5,500))}function Ss(){xs.call(this,new dn(-5,5,5,-5,.5,500))}function Ms(e,t){bs.call(this,e,t),this.type="DirectionalLight",this.position.copy(cn.DefaultUp),this.updateMatrix(),this.target=new cn,this.shadow=new Ss}function Rs(e,t){bs.call(this,e,t),this.type="AmbientLight",this.castShadow=void 0}function As(e,t,r,n){bs.call(this,e,t),this.type="RectAreaLight",this.position.set(0,1,0),this.updateMatrix(),this.width=void 0!==r?r:10,this.height=void 0!==n?n:10}function Cs(e,t,r,n){Bs.call(this,e,t,r,n)}function Ls(e,t,r){Bs.call(this,e,t,r)}function Os(e,t,r,n){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==n?n:new t.constructor(r),this.sampleValues=t,this.valueSize=r}function Is(e,t,r,n){Os.call(this,e,t,r,n)}function Ps(e,t,r,n){Bs.call(this,e,t,r,n)}function Hs(e,t,r,n){Bs.call(this,e,t,r,n)}function ks(e,t,r,n){Bs.call(this,e,t,r,n)}function Ns(e,t,r,n){Os.call(this,e,t,r,n),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0}function Us(e,t,r,n){Os.call(this,e,t,r,n)}function Ds(e,t,r,n){Os.call(this,e,t,r,n)}gs.prototype=Object.assign(Object.create(Vo.prototype),{constructor:gs,add:function(e){this.curves.push(e)},closePath:function(){var e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new cs(t,e))},getPoint:function(e){for(var t=e*this.getLength(),r=this.getCurveLengths(),n=0;n<r.length;){if(r[n]>=t){var i=r[n]-t,a=this.curves[n],o=a.getLength(),s=0===o?0:1-i/o;return a.getPointAt(s)}n++}return null},getLength:function(){var e=this.getCurveLengths();return e[e.length-1]},updateArcLengths:function(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()},getCurveLengths:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var e=[],t=0,r=0,n=this.curves.length;r<n;r++)t+=this.curves[r].getLength(),e.push(t);return this.cacheLengths=e,e},getSpacedPoints:function(e){void 0===e&&(e=40);for(var t=[],r=0;r<=e;r++)t.push(this.getPoint(r/e));return this.autoClose&&t.push(t[0]),t},getPoints:function(e){e=e||12;for(var t,r=[],n=0,i=this.curves;n<i.length;n++)for(var a=i[n],o=a&&a.isEllipseCurve?2*e:a&&a.isLineCurve?1:a&&a.isSplineCurve?e*a.points.length:e,s=a.getPoints(o),l=0;l<s.length;l++){var u=s[l];t&&t.equals(u)||(r.push(u),t=u)}return this.autoClose&&r.length>1&&!r[r.length-1].equals(r[0])&&r.push(r[0]),r},copy:function(e){Vo.prototype.copy.call(this,e),this.curves=[];for(var t=0,r=e.curves.length;t<r;t++){var n=e.curves[t];this.curves.push(n.clone())}return this.autoClose=e.autoClose,this},toJSON:function(){var e=Vo.prototype.toJSON.call(this);e.autoClose=this.autoClose,e.curves=[];for(var t=0,r=this.curves.length;t<r;t++){var n=this.curves[t];e.curves.push(n.toJSON())}return e},fromJSON:function(e){Vo.prototype.fromJSON.call(this,e),this.autoClose=e.autoClose,this.curves=[];for(var t=0,r=e.curves.length;t<r;t++){var n=e.curves[t];this.curves.push((new ms[n.type]).fromJSON(n))}return this}}),vs.prototype=Object.assign(Object.create(gs.prototype),{constructor:vs,setFromPoints:function(e){this.moveTo(e[0].x,e[0].y);for(var t=1,r=e.length;t<r;t++)this.lineTo(e[t].x,e[t].y)},moveTo:function(e,t){this.currentPoint.set(e,t)},lineTo:function(e,t){var r=new cs(this.currentPoint.clone(),new Lt(e,t));this.curves.push(r),this.currentPoint.set(e,t)},quadraticCurveTo:function(e,t,r,n){var i=new ds(this.currentPoint.clone(),new Lt(e,t),new Lt(r,n));this.curves.push(i),this.currentPoint.set(r,n)},bezierCurveTo:function(e,t,r,n,i,a){var o=new ls(this.currentPoint.clone(),new Lt(e,t),new Lt(r,n),new Lt(i,a));this.curves.push(o),this.currentPoint.set(i,a)},splineThru:function(e){var t=new ps([this.currentPoint.clone()].concat(e));this.curves.push(t),this.currentPoint.copy(e[e.length-1])},arc:function(e,t,r,n,i,a){var o=this.currentPoint.x,s=this.currentPoint.y;this.absarc(e+o,t+s,r,n,i,a)},absarc:function(e,t,r,n,i,a){this.absellipse(e,t,r,r,n,i,a)},ellipse:function(e,t,r,n,i,a,o,s){var l=this.currentPoint.x,u=this.currentPoint.y;this.absellipse(e+l,t+u,r,n,i,a,o,s)},absellipse:function(e,t,r,n,i,a,o,s){var l=new Go(e,t,r,n,i,a,o,s);if(this.curves.length>0){var u=l.getPoint(0);u.equals(this.currentPoint)||this.lineTo(u.x,u.y)}this.curves.push(l);var c=l.getPoint(1);this.currentPoint.copy(c)},copy:function(e){return gs.prototype.copy.call(this,e),this.currentPoint.copy(e.currentPoint),this},toJSON:function(){var e=gs.prototype.toJSON.call(this);return e.currentPoint=this.currentPoint.toArray(),e},fromJSON:function(e){return gs.prototype.fromJSON.call(this,e),this.currentPoint.fromArray(e.currentPoint),this}}),ys.prototype=Object.assign(Object.create(vs.prototype),{constructor:ys,getPointsHoles:function(e){for(var t=[],r=0,n=this.holes.length;r<n;r++)t[r]=this.holes[r].getPoints(e);return t},extractPoints:function(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}},copy:function(e){vs.prototype.copy.call(this,e),this.holes=[];for(var t=0,r=e.holes.length;t<r;t++){var n=e.holes[t];this.holes.push(n.clone())}return this},toJSON:function(){var e=vs.prototype.toJSON.call(this);e.uuid=this.uuid,e.holes=[];for(var t=0,r=this.holes.length;t<r;t++){var n=this.holes[t];e.holes.push(n.toJSON())}return e},fromJSON:function(e){vs.prototype.fromJSON.call(this,e),this.uuid=e.uuid,this.holes=[];for(var t=0,r=e.holes.length;t<r;t++){var n=e.holes[t];this.holes.push((new vs).fromJSON(n))}return this}}),bs.prototype=Object.assign(Object.create(cn.prototype),{constructor:bs,isLight:!0,copy:function(e){return cn.prototype.copy.call(this,e),this.color.copy(e.color),this.intensity=e.intensity,this},toJSON:function(e){var t=cn.prototype.toJSON.call(this,e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),t}}),Es.prototype=Object.assign(Object.create(bs.prototype),{constructor:Es,isHemisphereLight:!0,copy:function(e){return bs.prototype.copy.call(this,e),this.groundColor.copy(e.groundColor),this}}),Object.assign(xs.prototype,{copy:function(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this},clone:function(){return(new this.constructor).copy(this)},toJSON:function(){var e={};return 0!==this.bias&&(e.bias=this.bias),1!==this.radius&&(e.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}),ws.prototype=Object.assign(Object.create(xs.prototype),{constructor:ws,isSpotLightShadow:!0,update:function(e){var t=this.camera,r=2*Ct.RAD2DEG*e.angle,n=this.mapSize.width/this.mapSize.height,i=e.distance||t.far;r===t.fov&&n===t.aspect&&i===t.far||(t.fov=r,t.aspect=n,t.far=i,t.updateProjectionMatrix())}}),Ts.prototype=Object.assign(Object.create(bs.prototype),{constructor:Ts,isSpotLight:!0,copy:function(e){return bs.prototype.copy.call(this,e),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}),_s.prototype=Object.assign(Object.create(bs.prototype),{constructor:_s,isPointLight:!0,copy:function(e){return bs.prototype.copy.call(this,e),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}),Ss.prototype=Object.assign(Object.create(xs.prototype),{constructor:Ss}),Ms.prototype=Object.assign(Object.create(bs.prototype),{constructor:Ms,isDirectionalLight:!0,copy:function(e){return bs.prototype.copy.call(this,e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}),Rs.prototype=Object.assign(Object.create(bs.prototype),{constructor:Rs,isAmbientLight:!0}),As.prototype=Object.assign(Object.create(bs.prototype),{constructor:As,isRectAreaLight:!0,copy:function(e){return bs.prototype.copy.call(this,e),this.width=e.width,this.height=e.height,this},toJSON:function(e){var t=bs.prototype.toJSON.call(this,e);return t.object.width=this.width,t.object.height=this.height,t}}),Cs.prototype=Object.assign(Object.create(Bs.prototype),{constructor:Cs,ValueTypeName:"string",ValueBufferType:Array,DefaultInterpolation:ct,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),Ls.prototype=Object.assign(Object.create(Bs.prototype),{constructor:Ls,ValueTypeName:"bool",ValueBufferType:Array,DefaultInterpolation:ct,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),Object.assign(Os.prototype,{evaluate:function(e){var t=this.parameterPositions,r=this._cachedIndex,n=t[r],i=t[r-1];e:{t:{var a;r:{n:if(!(e<n)){for(var o=r+2;;){if(void 0===n){if(e<i)break n;return r=t.length,this._cachedIndex=r,this.afterEnd_(r-1,e,i)}if(r===o)break;if(i=n,e<(n=t[++r]))break t}a=t.length;break r}if(e>=i)break e;var s=t[1];for(e<s&&(r=2,i=s),o=r-2;;){if(void 0===i)return this._cachedIndex=0,this.beforeStart_(0,e,n);if(r===o)break;if(n=i,e>=(i=t[--r-1]))break t}a=r,r=0}for(;r<a;){var l=r+a>>>1;e<t[l]?a=l:r=l+1}if(n=t[r],void 0===(i=t[r-1]))return this._cachedIndex=0,this.beforeStart_(0,e,n);if(void 0===n)return r=t.length,this._cachedIndex=r,this.afterEnd_(r-1,i,e)}this._cachedIndex=r,this.intervalChanged_(r,i,n)}return this.interpolate_(r,i,e,n)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(e){for(var t=this.resultBuffer,r=this.sampleValues,n=this.valueSize,i=e*n,a=0;a!==n;++a)t[a]=r[i+a];return t},interpolate_:function(){throw new Error("call to abstract method")},intervalChanged_:function(){}}),
//!\ DECLARE ALIAS AFTER assign prototype !
Object.assign(Os.prototype,{beforeStart_:Os.prototype.copySampleValue_,afterEnd_:Os.prototype.copySampleValue_}),Is.prototype=Object.assign(Object.create(Os.prototype),{constructor:Is,interpolate_:function(e,t,r,n){for(var i=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=e*o,l=(r-t)/(n-t),u=s+o;s!==u;s+=4)It.slerpFlat(i,0,a,s-o,a,s,l);return i}}),Ps.prototype=Object.assign(Object.create(Bs.prototype),{constructor:Ps,ValueTypeName:"quaternion",DefaultInterpolation:ht,InterpolantFactoryMethodLinear:function(e){return new Is(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodSmooth:void 0}),Hs.prototype=Object.assign(Object.create(Bs.prototype),{constructor:Hs,ValueTypeName:"color"}),ks.prototype=Object.assign(Object.create(Bs.prototype),{constructor:ks,ValueTypeName:"number"}),Ns.prototype=Object.assign(Object.create(Os.prototype),{constructor:Ns,DefaultSettings_:{endingStart:ft,endingEnd:ft},intervalChanged_:function(e,t,r){var n=this.parameterPositions,i=e-2,a=e+1,o=n[i],s=n[a];if(void 0===o)switch(this.getSettings_().endingStart){case pt:i=e,o=2*t-r;break;case mt:o=t+n[i=n.length-2]-n[i+1];break;default:i=e,o=r}if(void 0===s)switch(this.getSettings_().endingEnd){case pt:a=e,s=2*r-t;break;case mt:a=1,s=r+n[1]-n[0];break;default:a=e-1,s=t}var l=.5*(r-t),u=this.valueSize;this._weightPrev=l/(t-o),this._weightNext=l/(s-r),this._offsetPrev=i*u,this._offsetNext=a*u},interpolate_:function(e,t,r,n){for(var i=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=e*o,l=s-o,u=this._offsetPrev,c=this._offsetNext,h=this._weightPrev,d=this._weightNext,f=(r-t)/(n-t),p=f*f,m=p*f,g=-h*m+2*h*p-h*f,v=(1+h)*m+(-1.5-2*h)*p+(-.5+h)*f+1,y=(-1-d)*m+(1.5+d)*p+.5*f,b=d*m-d*p,E=0;E!==o;++E)i[E]=g*a[u+E]+v*a[l+E]+y*a[s+E]+b*a[c+E];return i}}),Us.prototype=Object.assign(Object.create(Os.prototype),{constructor:Us,interpolate_:function(e,t,r,n){for(var i=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=e*o,l=s-o,u=(r-t)/(n-t),c=1-u,h=0;h!==o;++h)i[h]=a[l+h]*c+a[s+h]*u;return i}}),Ds.prototype=Object.assign(Object.create(Os.prototype),{constructor:Ds,interpolate_:function(e){return this.copySampleValue_(e-1)}});var Fs={arraySlice:function(e,t,r){return Fs.isTypedArray(e)?new e.constructor(e.subarray(t,void 0!==r?r:e.length)):e.slice(t,r)},convertArray:function(e,t,r){return!e||!r&&e.constructor===t?e:"number"==typeof t.BYTES_PER_ELEMENT?new t(e):Array.prototype.slice.call(e)},isTypedArray:function(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)},getKeyframeOrder:function(e){function t(t,r){return e[t]-e[r]}for(var r=e.length,n=new Array(r),i=0;i!==r;++i)n[i]=i;return n.sort(t),n},sortedArray:function(e,t,r){for(var n=e.length,i=new e.constructor(n),a=0,o=0;o!==n;++a)for(var s=r[a]*t,l=0;l!==t;++l)i[o++]=e[s+l];return i},flattenJSON:function(e,t,r,n){for(var i=1,a=e[0];void 0!==a&&void 0===a[n];)a=e[i++];if(void 0!==a){var o=a[n];if(void 0!==o)if(Array.isArray(o))do{void 0!==(o=a[n])&&(t.push(a.time),r.push.apply(r,o)),a=e[i++]}while(void 0!==a);else if(void 0!==o.toArray)do{void 0!==(o=a[n])&&(t.push(a.time),o.toArray(r,r.length)),a=e[i++]}while(void 0!==a);else do{void 0!==(o=a[n])&&(t.push(a.time),r.push(o)),a=e[i++]}while(void 0!==a)}}};function Bs(e,t,r,n){if(void 0===e)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===t||0===t.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=Fs.convertArray(t,this.TimeBufferType),this.values=Fs.convertArray(r,this.ValueBufferType),this.setInterpolation(n||this.DefaultInterpolation),this.validate(),this.optimize()}function zs(e,t,r,n){Bs.call(this,e,t,r,n)}function js(e,t,r){this.name=e,this.tracks=r,this.duration=void 0!==t?t:-1,this.uuid=Ct.generateUUID(),this.duration<0&&this.resetDuration(),this.optimize()}function Vs(e){this.manager=void 0!==e?e:ko,this.textures={}}function Gs(e){this.manager=void 0!==e?e:ko}Object.assign(Bs,{parse:function(e){if(void 0===e.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");var t=Bs._getTrackTypeForValueTypeName(e.type);if(void 0===e.times){var r=[],n=[];Fs.flattenJSON(e.keys,r,n,"value"),e.times=r,e.values=n}return void 0!==t.parse?t.parse(e):new t(e.name,e.times,e.values,e.interpolation)},toJSON:function(e){var t,r=e.constructor;if(void 0!==r.toJSON)t=r.toJSON(e);else{t={name:e.name,times:Fs.convertArray(e.times,Array),values:Fs.convertArray(e.values,Array)};var n=e.getInterpolation();n!==e.DefaultInterpolation&&(t.interpolation=n)}return t.type=e.ValueTypeName,t},_getTrackTypeForValueTypeName:function(e){switch(e.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return ks;case"vector":case"vector2":case"vector3":case"vector4":return zs;case"color":return Hs;case"quaternion":return Ps;case"bool":case"boolean":return Ls;case"string":return Cs}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+e)}}),Object.assign(Bs.prototype,{constructor:Bs,TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:ht,InterpolantFactoryMethodDiscrete:function(e){return new Ds(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodLinear:function(e){return new Us(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodSmooth:function(e){return new Ns(this.times,this.values,this.getValueSize(),e)},setInterpolation:function(e){var t;switch(e){case ct:t=this.InterpolantFactoryMethodDiscrete;break;case ht:t=this.InterpolantFactoryMethodLinear;break;case dt:t=this.InterpolantFactoryMethodSmooth}if(void 0!==t)this.createInterpolant=t;else{var r="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(r);this.setInterpolation(this.DefaultInterpolation)}n.warn("THREE.KeyframeTrack:",r)}},getInterpolation:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return ct;case this.InterpolantFactoryMethodLinear:return ht;case this.InterpolantFactoryMethodSmooth:return dt}},getValueSize:function(){return this.values.length/this.times.length},shift:function(e){if(0!==e)for(var t=this.times,r=0,n=t.length;r!==n;++r)t[r]+=e;return this},scale:function(e){if(1!==e)for(var t=this.times,r=0,n=t.length;r!==n;++r)t[r]*=e;return this},trim:function(e,t){for(var r=this.times,n=r.length,i=0,a=n-1;i!==n&&r[i]<e;)++i;for(;-1!==a&&r[a]>t;)--a;if(++a,0!==i||a!==n){i>=a&&(i=(a=Math.max(a,1))-1);var o=this.getValueSize();this.times=Fs.arraySlice(r,i,a),this.values=Fs.arraySlice(this.values,i*o,a*o)}return this},validate:function(){var e=!0,t=this.getValueSize();t-Math.floor(t)!=0&&(n.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);var r=this.times,i=this.values,a=r.length;0===a&&(n.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);for(var o=null,s=0;s!==a;s++){var l=r[s];if("number"==typeof l&&isNaN(l)){n.error("THREE.KeyframeTrack: Time is not a valid number.",this,s,l),e=!1;break}if(null!==o&&o>l){n.error("THREE.KeyframeTrack: Out of order keys.",this,s,l,o),e=!1;break}o=l}if(void 0!==i&&Fs.isTypedArray(i)){s=0;for(var u=i.length;s!==u;++s){var c=i[s];if(isNaN(c)){n.error("THREE.KeyframeTrack: Value is not a valid number.",this,s,c),e=!1;break}}}return e},optimize:function(){for(var e=this.times,t=this.values,r=this.getValueSize(),n=this.getInterpolation()===dt,i=1,a=e.length-1,o=1;o<a;++o){var s=!1,l=e[o];if(l!==e[o+1]&&(1!==o||l!==l[0]))if(n)s=!0;else for(var u=o*r,c=u-r,h=u+r,d=0;d!==r;++d){var f=t[u+d];if(f!==t[c+d]||f!==t[h+d]){s=!0;break}}if(s){if(o!==i){e[i]=e[o];var p=o*r,m=i*r;for(d=0;d!==r;++d)t[m+d]=t[p+d]}++i}}if(a>0){for(e[i]=e[a],p=a*r,m=i*r,d=0;d!==r;++d)t[m+d]=t[p+d];++i}return i!==e.length&&(this.times=Fs.arraySlice(e,0,i),this.values=Fs.arraySlice(t,0,i*r)),this}}),zs.prototype=Object.assign(Object.create(Bs.prototype),{constructor:zs,ValueTypeName:"vector"}),Object.assign(js,{parse:function(e){for(var t=[],r=e.tracks,n=1/(e.fps||1),i=0,a=r.length;i!==a;++i)t.push(Bs.parse(r[i]).scale(n));return new js(e.name,e.duration,t)},toJSON:function(e){for(var t=[],r=e.tracks,n={name:e.name,duration:e.duration,tracks:t},i=0,a=r.length;i!==a;++i)t.push(Bs.toJSON(r[i]));return n},CreateFromMorphTargetSequence:function(e,t,r,n){for(var i=t.length,a=[],o=0;o<i;o++){var s=[],l=[];s.push((o+i-1)%i,o,(o+1)%i),l.push(0,1,0);var u=Fs.getKeyframeOrder(s);s=Fs.sortedArray(s,1,u),l=Fs.sortedArray(l,1,u),n||0!==s[0]||(s.push(i),l.push(l[0])),a.push(new ks(".morphTargetInfluences["+t[o].name+"]",s,l).scale(1/r))}return new js(e,-1,a)},findByName:function(e,t){var r=e;if(!Array.isArray(e)){var n=e;r=n.geometry&&n.geometry.animations||n.animations}for(var i=0;i<r.length;i++)if(r[i].name===t)return r[i];return null},CreateClipsFromMorphTargetSequences:function(e,t,r){for(var n={},i=/^([\w-]*?)([\d]+)$/,a=0,o=e.length;a<o;a++){var s=e[a],l=s.name.match(i);if(l&&l.length>1){var u=n[h=l[1]];u||(n[h]=u=[]),u.push(s)}}var c=[];for(var h in n)c.push(js.CreateFromMorphTargetSequence(h,n[h],t,r));return c},parseAnimation:function(e,t){if(!e)return n.error("THREE.AnimationClip: No animation in JSONLoader data."),null;for(var r=function(e,t,r,n,i){if(0!==r.length){var a=[],o=[];Fs.flattenJSON(r,a,o,n),0!==a.length&&i.push(new e(t,a,o))}},i=[],a=e.name||"default",o=e.length||-1,s=e.fps||30,l=e.hierarchy||[],u=0;u<l.length;u++){var c=l[u].keys;if(c&&0!==c.length)if(c[0].morphTargets){for(var h={},d=0;d<c.length;d++)if(c[d].morphTargets)for(var f=0;f<c[d].morphTargets.length;f++)h[c[d].morphTargets[f]]=-1;for(var p in h){var m=[],g=[];for(f=0;f!==c[d].morphTargets.length;++f){var v=c[d];m.push(v.time),g.push(v.morphTarget===p?1:0)}i.push(new ks(".morphTargetInfluence["+p+"]",m,g))}o=h.length*(s||1)}else{var y=".bones["+t[u].name+"]";r(zs,y+".position",c,"pos",i),r(Ps,y+".quaternion",c,"rot",i),r(zs,y+".scale",c,"scl",i)}}return 0===i.length?null:new js(a,o,i)}}),Object.assign(js.prototype,{resetDuration:function(){for(var e=0,t=0,r=this.tracks.length;t!==r;++t){var n=this.tracks[t];e=Math.max(e,n.times[n.times.length-1])}this.duration=e},trim:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this},optimize:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}}),Object.assign(Vs.prototype,{load:function(e,t,r,n){var i=this;new Uo(i.manager).load(e,(function(e){t(i.parse(JSON.parse(e)))}),r,n)},setTextures:function(e){this.textures=e},parse:function(e){var t=this.textures;function r(e){return void 0===t[e]&&n.warn("THREE.MaterialLoader: Undefined texture",e),t[e]}var i=new Io[e.type];if(void 0!==e.uuid&&(i.uuid=e.uuid),void 0!==e.name&&(i.name=e.name),void 0!==e.color&&i.color.setHex(e.color),void 0!==e.roughness&&(i.roughness=e.roughness),void 0!==e.metalness&&(i.metalness=e.metalness),void 0!==e.emissive&&i.emissive.setHex(e.emissive),void 0!==e.specular&&i.specular.setHex(e.specular),void 0!==e.shininess&&(i.shininess=e.shininess),void 0!==e.clearCoat&&(i.clearCoat=e.clearCoat),void 0!==e.clearCoatRoughness&&(i.clearCoatRoughness=e.clearCoatRoughness),void 0!==e.uniforms&&(i.uniforms=e.uniforms),void 0!==e.vertexShader&&(i.vertexShader=e.vertexShader),void 0!==e.fragmentShader&&(i.fragmentShader=e.fragmentShader),void 0!==e.vertexColors&&(i.vertexColors=e.vertexColors),void 0!==e.fog&&(i.fog=e.fog),void 0!==e.flatShading&&(i.flatShading=e.flatShading),void 0!==e.blending&&(i.blending=e.blending),void 0!==e.side&&(i.side=e.side),void 0!==e.opacity&&(i.opacity=e.opacity),void 0!==e.transparent&&(i.transparent=e.transparent),void 0!==e.alphaTest&&(i.alphaTest=e.alphaTest),void 0!==e.depthTest&&(i.depthTest=e.depthTest),void 0!==e.depthWrite&&(i.depthWrite=e.depthWrite),void 0!==e.colorWrite&&(i.colorWrite=e.colorWrite),void 0!==e.wireframe&&(i.wireframe=e.wireframe),void 0!==e.wireframeLinewidth&&(i.wireframeLinewidth=e.wireframeLinewidth),void 0!==e.wireframeLinecap&&(i.wireframeLinecap=e.wireframeLinecap),void 0!==e.wireframeLinejoin&&(i.wireframeLinejoin=e.wireframeLinejoin),void 0!==e.rotation&&(i.rotation=e.rotation),1!==e.linewidth&&(i.linewidth=e.linewidth),void 0!==e.dashSize&&(i.dashSize=e.dashSize),void 0!==e.gapSize&&(i.gapSize=e.gapSize),void 0!==e.scale&&(i.scale=e.scale),void 0!==e.skinning&&(i.skinning=e.skinning),void 0!==e.morphTargets&&(i.morphTargets=e.morphTargets),void 0!==e.dithering&&(i.dithering=e.dithering),void 0!==e.visible&&(i.visible=e.visible),void 0!==e.userData&&(i.userData=e.userData),void 0!==e.shading&&(i.flatShading=1===e.shading),void 0!==e.size&&(i.size=e.size),void 0!==e.sizeAttenuation&&(i.sizeAttenuation=e.sizeAttenuation),void 0!==e.map&&(i.map=r(e.map)),void 0!==e.alphaMap&&(i.alphaMap=r(e.alphaMap),i.transparent=!0),void 0!==e.bumpMap&&(i.bumpMap=r(e.bumpMap)),void 0!==e.bumpScale&&(i.bumpScale=e.bumpScale),void 0!==e.normalMap&&(i.normalMap=r(e.normalMap)),void 0!==e.normalScale){var a=e.normalScale;!1===Array.isArray(a)&&(a=[a,a]),i.normalScale=(new Lt).fromArray(a)}return void 0!==e.displacementMap&&(i.displacementMap=r(e.displacementMap)),void 0!==e.displacementScale&&(i.displacementScale=e.displacementScale),void 0!==e.displacementBias&&(i.displacementBias=e.displacementBias),void 0!==e.roughnessMap&&(i.roughnessMap=r(e.roughnessMap)),void 0!==e.metalnessMap&&(i.metalnessMap=r(e.metalnessMap)),void 0!==e.emissiveMap&&(i.emissiveMap=r(e.emissiveMap)),void 0!==e.emissiveIntensity&&(i.emissiveIntensity=e.emissiveIntensity),void 0!==e.specularMap&&(i.specularMap=r(e.specularMap)),void 0!==e.envMap&&(i.envMap=r(e.envMap)),void 0!==e.reflectivity&&(i.reflectivity=e.reflectivity),void 0!==e.lightMap&&(i.lightMap=r(e.lightMap)),void 0!==e.lightMapIntensity&&(i.lightMapIntensity=e.lightMapIntensity),void 0!==e.aoMap&&(i.aoMap=r(e.aoMap)),void 0!==e.aoMapIntensity&&(i.aoMapIntensity=e.aoMapIntensity),void 0!==e.gradientMap&&(i.gradientMap=r(e.gradientMap)),i}}),Object.assign(Gs.prototype,{load:function(e,t,r,n){var i=this;new Uo(i.manager).load(e,(function(e){t(i.parse(JSON.parse(e)))}),r,n)},parse:function(e){var t=new Un,r=e.data.index;if(void 0!==r){var n=new Zs[r.type](r.array);t.setIndex(new vn(n,1))}var i=e.data.attributes;for(var a in i){var o=i[a];n=new Zs[o.type](o.array),t.addAttribute(a,new vn(n,o.itemSize,o.normalized))}var s=e.data.groups||e.data.drawcalls||e.data.offsets;if(void 0!==s)for(var l=0,u=s.length;l!==u;++l){var c=s[l];t.addGroup(c.start,c.count,c.materialIndex)}var h=e.data.boundingSphere;if(void 0!==h){var d=new Pt;void 0!==h.center&&d.fromArray(h.center),t.boundingSphere=new Qr(d,h.radius)}return t}});var Ws,qs,Xs,Ys,Zs={Int8Array,Uint8Array,Uint8ClampedArray:"undefined"!=typeof Uint8ClampedArray?Uint8ClampedArray:Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function Ks(){this.onLoadStart=function(){},this.onLoadProgress=function(){},this.onLoadComplete=function(){}}Ks.Handlers={handlers:[],add:function(e,t){this.handlers.push(e,t)},get:function(e){for(var t=this.handlers,r=0,n=t.length;r<n;r+=2){var i=t[r],a=t[r+1];if(i.test(e))return a}return null}},Object.assign(Ks.prototype,{crossOrigin:void 0,initMaterials:function(e,t,r){for(var n=[],i=0;i<e.length;++i)n[i]=this.createMaterial(e[i],t,r);return n},createMaterial:(Ws={NoBlending:O,NormalBlending:I,AdditiveBlending:P,SubtractiveBlending:H,MultiplyBlending:k,CustomBlending:N},qs=new Lr,Xs=new jo,Ys=new Vs,function(e,t,r){var i={};function a(e,n,a,o,s){var l,u=t+e,c=Ks.Handlers.get(u);null!==c?l=c.load(u):(Xs.setCrossOrigin(r),l=Xs.load(u)),void 0!==n&&(l.repeat.fromArray(n),1!==n[0]&&(l.wrapS=Te),1!==n[1]&&(l.wrapT=Te)),void 0!==a&&l.offset.fromArray(a),void 0!==o&&("repeat"===o[0]&&(l.wrapS=Te),"mirror"===o[0]&&(l.wrapS=Se),"repeat"===o[1]&&(l.wrapT=Te),"mirror"===o[1]&&(l.wrapT=Se)),void 0!==s&&(l.anisotropy=s);var h=Ct.generateUUID();return i[h]=l,h}var o={uuid:Ct.generateUUID(),type:"MeshLambertMaterial"};for(var s in e){var l=e[s];switch(s){case"DbgColor":case"DbgIndex":case"opticalDensity":case"illumination":case"mapDiffuseRepeat":case"mapDiffuseOffset":case"mapDiffuseWrap":case"mapDiffuseAnisotropy":case"mapEmissiveRepeat":case"mapEmissiveOffset":case"mapEmissiveWrap":case"mapEmissiveAnisotropy":case"mapLightRepeat":case"mapLightOffset":case"mapLightWrap":case"mapLightAnisotropy":case"mapAORepeat":case"mapAOOffset":case"mapAOWrap":case"mapAOAnisotropy":case"mapBumpRepeat":case"mapBumpOffset":case"mapBumpWrap":case"mapBumpAnisotropy":case"mapNormalRepeat":case"mapNormalOffset":case"mapNormalWrap":case"mapNormalAnisotropy":case"mapSpecularRepeat":case"mapSpecularOffset":case"mapSpecularWrap":case"mapSpecularAnisotropy":case"mapMetalnessRepeat":case"mapMetalnessOffset":case"mapMetalnessWrap":case"mapMetalnessAnisotropy":case"mapRoughnessRepeat":case"mapRoughnessOffset":case"mapRoughnessWrap":case"mapRoughnessAnisotropy":case"mapAlphaRepeat":case"mapAlphaOffset":case"mapAlphaWrap":case"mapAlphaAnisotropy":break;case"DbgName":o.name=l;break;case"blending":o.blending=Ws[l];break;case"colorAmbient":case"mapAmbient":n.warn("THREE.Loader.createMaterial:",s,"is no longer supported.");break;case"colorDiffuse":o.color=qs.fromArray(l).getHex();break;case"colorSpecular":o.specular=qs.fromArray(l).getHex();break;case"colorEmissive":o.emissive=qs.fromArray(l).getHex();break;case"specularCoef":o.shininess=l;break;case"shading":"basic"===l.toLowerCase()&&(o.type="MeshBasicMaterial"),"phong"===l.toLowerCase()&&(o.type="MeshPhongMaterial"),"standard"===l.toLowerCase()&&(o.type="MeshStandardMaterial");break;case"mapDiffuse":o.map=a(l,e.mapDiffuseRepeat,e.mapDiffuseOffset,e.mapDiffuseWrap,e.mapDiffuseAnisotropy);break;case"mapEmissive":o.emissiveMap=a(l,e.mapEmissiveRepeat,e.mapEmissiveOffset,e.mapEmissiveWrap,e.mapEmissiveAnisotropy);break;case"mapLight":o.lightMap=a(l,e.mapLightRepeat,e.mapLightOffset,e.mapLightWrap,e.mapLightAnisotropy);break;case"mapAO":o.aoMap=a(l,e.mapAORepeat,e.mapAOOffset,e.mapAOWrap,e.mapAOAnisotropy);break;case"mapBump":o.bumpMap=a(l,e.mapBumpRepeat,e.mapBumpOffset,e.mapBumpWrap,e.mapBumpAnisotropy);break;case"mapBumpScale":o.bumpScale=l;break;case"mapNormal":o.normalMap=a(l,e.mapNormalRepeat,e.mapNormalOffset,e.mapNormalWrap,e.mapNormalAnisotropy);break;case"mapNormalFactor":o.normalScale=[l,l];break;case"mapSpecular":o.specularMap=a(l,e.mapSpecularRepeat,e.mapSpecularOffset,e.mapSpecularWrap,e.mapSpecularAnisotropy);break;case"mapMetalness":o.metalnessMap=a(l,e.mapMetalnessRepeat,e.mapMetalnessOffset,e.mapMetalnessWrap,e.mapMetalnessAnisotropy);break;case"mapRoughness":o.roughnessMap=a(l,e.mapRoughnessRepeat,e.mapRoughnessOffset,e.mapRoughnessWrap,e.mapRoughnessAnisotropy);break;case"mapAlpha":o.alphaMap=a(l,e.mapAlphaRepeat,e.mapAlphaOffset,e.mapAlphaWrap,e.mapAlphaAnisotropy);break;case"flipSided":o.side=_;break;case"doubleSided":o.side=S;break;case"transparency":n.warn("THREE.Loader.createMaterial: transparency has been renamed to opacity"),o.opacity=l;break;case"depthTest":case"depthWrite":case"colorWrite":case"opacity":case"reflectivity":case"transparent":case"visible":case"wireframe":o[s]=l;break;case"vertexColors":!0===l&&(o.vertexColors=L),"face"===l&&(o.vertexColors=C);break;default:n.error("THREE.Loader.createMaterial: Unsupported",s,l)}}return"MeshBasicMaterial"===o.type&&delete o.emissive,"MeshPhongMaterial"!==o.type&&delete o.specular,o.opacity<1&&(o.transparent=!0),Ys.setTextures(i),Ys.parse(o)})});var Qs={decodeText:function(e){if("undefined"!=typeof TextDecoder)return(new TextDecoder).decode(e);for(var t="",r=0,n=e.length;r<n;r++)t+=String.fromCharCode(e[r]);return t},extractUrlBase:function(e){var t=e.split("/");return 1===t.length?"./":(t.pop(),t.join("/")+"/")}};function Js(e){"boolean"==typeof e&&(n.warn("THREE.JSONLoader: showStatus parameter has been removed from constructor."),e=void 0),this.manager=void 0!==e?e:ko,this.withCredentials=!1}function $s(e){this.manager=void 0!==e?e:ko,this.texturePath=""}Object.assign(Js.prototype,{load:function(e,t,r,i){var a=this,o=this.texturePath&&"string"==typeof this.texturePath?this.texturePath:Qs.extractUrlBase(e),s=new Uo(this.manager);s.setWithCredentials(this.withCredentials),s.load(e,(function(r){var i=JSON.parse(r),s=i.metadata;if(void 0!==s){var l=s.type;if(void 0!==l){if("object"===l.toLowerCase())return void n.error("THREE.JSONLoader: "+e+" should be loaded with THREE.ObjectLoader instead.");if("scene"===l.toLowerCase())return void n.error("THREE.JSONLoader: "+e+" should be loaded with THREE.SceneLoader instead.")}}var u=a.parse(i,o);t(u.geometry,u.materials)}),r,i)},setTexturePath:function(e){this.texturePath=e},parse:function(){function e(e,t){function r(e,t){return e&1<<t}var n,i,a,o,s,l,u,c,h,d,f,p,m,g,v,y,b,E,x,w,T,_,S,M,R,A=e.faces,C=e.vertices,L=e.normals,O=e.colors,I=e.scale,P=0;if(void 0!==e.uvs){for(n=0;n<e.uvs.length;n++)e.uvs[n].length&&P++;for(n=0;n<P;n++)t.faceVertexUvs[n]=[]}for(o=0,s=C.length;o<s;)(E=new Pt).x=C[o++]*I,E.y=C[o++]*I,E.z=C[o++]*I,t.vertices.push(E);for(o=0,s=A.length;o<s;)if(f=r(d=A[o++],0),p=r(d,1),m=r(d,3),g=r(d,4),v=r(d,5),y=r(d,6),b=r(d,7),f){if((w=new fn).a=A[o],w.b=A[o+1],w.c=A[o+3],(T=new fn).a=A[o+1],T.b=A[o+2],T.c=A[o+3],o+=4,p&&(h=A[o++],w.materialIndex=h,T.materialIndex=h),a=t.faces.length,m)for(n=0;n<P;n++)for(M=e.uvs[n],t.faceVertexUvs[n][a]=[],t.faceVertexUvs[n][a+1]=[],i=0;i<4;i++)R=new Lt(M[2*(c=A[o++])],M[2*c+1]),2!==i&&t.faceVertexUvs[n][a].push(R),0!==i&&t.faceVertexUvs[n][a+1].push(R);if(g&&(u=3*A[o++],w.normal.set(L[u++],L[u++],L[u]),T.normal.copy(w.normal)),v)for(n=0;n<4;n++)u=3*A[o++],S=new Pt(L[u++],L[u++],L[u]),2!==n&&w.vertexNormals.push(S),0!==n&&T.vertexNormals.push(S);if(y&&(_=O[l=A[o++]],w.color.setHex(_),T.color.setHex(_)),b)for(n=0;n<4;n++)_=O[l=A[o++]],2!==n&&w.vertexColors.push(new Lr(_)),0!==n&&T.vertexColors.push(new Lr(_));t.faces.push(w),t.faces.push(T)}else{if((x=new fn).a=A[o++],x.b=A[o++],x.c=A[o++],p&&(h=A[o++],x.materialIndex=h),a=t.faces.length,m)for(n=0;n<P;n++)for(M=e.uvs[n],t.faceVertexUvs[n][a]=[],i=0;i<3;i++)R=new Lt(M[2*(c=A[o++])],M[2*c+1]),t.faceVertexUvs[n][a].push(R);if(g&&(u=3*A[o++],x.normal.set(L[u++],L[u++],L[u])),v)for(n=0;n<3;n++)u=3*A[o++],S=new Pt(L[u++],L[u++],L[u]),x.vertexNormals.push(S);if(y&&(l=A[o++],x.color.setHex(O[l])),b)for(n=0;n<3;n++)l=A[o++],x.vertexColors.push(new Lr(O[l]));t.faces.push(x)}}function t(e,t){var r=void 0!==e.influencesPerVertex?e.influencesPerVertex:2;if(e.skinWeights)for(var i=0,a=e.skinWeights.length;i<a;i+=r){var o=e.skinWeights[i],s=r>1?e.skinWeights[i+1]:0,l=r>2?e.skinWeights[i+2]:0,u=r>3?e.skinWeights[i+3]:0;t.skinWeights.push(new Ut(o,s,l,u))}if(e.skinIndices)for(i=0,a=e.skinIndices.length;i<a;i+=r){var c=e.skinIndices[i],h=r>1?e.skinIndices[i+1]:0,d=r>2?e.skinIndices[i+2]:0,f=r>3?e.skinIndices[i+3]:0;t.skinIndices.push(new Ut(c,h,d,f))}t.bones=e.bones,t.bones&&t.bones.length>0&&(t.skinWeights.length!==t.skinIndices.length||t.skinIndices.length!==t.vertices.length)&&n.warn("When skinning, number of vertices ("+t.vertices.length+"), skinIndices ("+t.skinIndices.length+"), and skinWeights ("+t.skinWeights.length+") should match.")}function r(e,t){var r=e.scale;if(void 0!==e.morphTargets)for(var i=0,a=e.morphTargets.length;i<a;i++){t.morphTargets[i]={},t.morphTargets[i].name=e.morphTargets[i].name,t.morphTargets[i].vertices=[];for(var o=t.morphTargets[i].vertices,s=e.morphTargets[i].vertices,l=0,u=s.length;l<u;l+=3){var c=new Pt;c.x=s[l]*r,c.y=s[l+1]*r,c.z=s[l+2]*r,o.push(c)}}if(void 0!==e.morphColors&&e.morphColors.length>0){n.warn('THREE.JSONLoader: "morphColors" no longer supported. Using them as face colors.');var h=t.faces,d=e.morphColors[0].colors;for(i=0,a=h.length;i<a;i++)h[i].color.fromArray(d,3*i)}}function i(e,t){var r=[],n=[];void 0!==e.animation&&n.push(e.animation),void 0!==e.animations&&(e.animations.length?n=n.concat(e.animations):n.push(e.animations));for(var i=0;i<n.length;i++){var a=js.parseAnimation(n[i],t.bones);a&&r.push(a)}if(t.morphTargets){var o=js.CreateClipsFromMorphTargetSequences(t.morphTargets,10);r=r.concat(o)}r.length>0&&(t.animations=r)}return function(n,a){void 0!==n.data&&(n=n.data),void 0!==n.scale?n.scale=1/n.scale:n.scale=1;var o=new gn;return e(n,o),t(n,o),r(n,o),i(n,o),o.computeFaceNormals(),o.computeBoundingSphere(),void 0===n.materials||0===n.materials.length?{geometry:o}:{geometry:o,materials:Ks.prototype.initMaterials(n.materials,a,this.crossOrigin)}}}()}),Object.assign($s.prototype,{load:function(e,t,r,i){""===this.texturePath&&(this.texturePath=e.substring(0,e.lastIndexOf("/")+1));var a=this;new Uo(a.manager).load(e,(function(r){var o=null;try{o=JSON.parse(r)}catch(t){return void 0!==i&&i(t),void n.error("THREE:ObjectLoader: Can't parse "+e+".",t.message)}var s=o.metadata;void 0!==s&&void 0!==s.type&&"geometry"!==s.type.toLowerCase()?a.parse(o,t):n.error("THREE.ObjectLoader: Can't load "+e+". Use THREE.JSONLoader instead.")}),r,i)},setTexturePath:function(e){this.texturePath=e},setCrossOrigin:function(e){this.crossOrigin=e},parse:function(e,t){var r=this.parseShape(e.shapes),n=this.parseGeometries(e.geometries,r),i=this.parseImages(e.images,(function(){void 0!==t&&t(s)})),a=this.parseTextures(e.textures,i),o=this.parseMaterials(e.materials,a),s=this.parseObject(e.object,n,o);return e.animations&&(s.animations=this.parseAnimations(e.animations)),void 0!==e.images&&0!==e.images.length||void 0!==t&&t(s),s},parseShape:function(e){var t={};if(void 0!==e)for(var r=0,n=e.length;r<n;r++){var i=(new ys).fromJSON(e[r]);t[i.uuid]=i}return t},parseGeometries:function(e,t){var r={};if(void 0!==e)for(var i=new Js,a=new Gs,o=0,s=e.length;o<s;o++){var l,u=e[o];switch(u.type){case"PlaneGeometry":case"PlaneBufferGeometry":l=new wo[u.type](u.width,u.height,u.widthSegments,u.heightSegments);break;case"BoxGeometry":case"BoxBufferGeometry":case"CubeGeometry":l=new wo[u.type](u.width,u.height,u.depth,u.widthSegments,u.heightSegments,u.depthSegments);break;case"CircleGeometry":case"CircleBufferGeometry":l=new wo[u.type](u.radius,u.segments,u.thetaStart,u.thetaLength);break;case"CylinderGeometry":case"CylinderBufferGeometry":l=new wo[u.type](u.radiusTop,u.radiusBottom,u.height,u.radialSegments,u.heightSegments,u.openEnded,u.thetaStart,u.thetaLength);break;case"ConeGeometry":case"ConeBufferGeometry":l=new wo[u.type](u.radius,u.height,u.radialSegments,u.heightSegments,u.openEnded,u.thetaStart,u.thetaLength);break;case"SphereGeometry":case"SphereBufferGeometry":l=new wo[u.type](u.radius,u.widthSegments,u.heightSegments,u.phiStart,u.phiLength,u.thetaStart,u.thetaLength);break;case"DodecahedronGeometry":case"DodecahedronBufferGeometry":case"IcosahedronGeometry":case"IcosahedronBufferGeometry":case"OctahedronGeometry":case"OctahedronBufferGeometry":case"TetrahedronGeometry":case"TetrahedronBufferGeometry":l=new wo[u.type](u.radius,u.detail);break;case"RingGeometry":case"RingBufferGeometry":l=new wo[u.type](u.innerRadius,u.outerRadius,u.thetaSegments,u.phiSegments,u.thetaStart,u.thetaLength);break;case"TorusGeometry":case"TorusBufferGeometry":l=new wo[u.type](u.radius,u.tube,u.radialSegments,u.tubularSegments,u.arc);break;case"TorusKnotGeometry":case"TorusKnotBufferGeometry":l=new wo[u.type](u.radius,u.tube,u.tubularSegments,u.radialSegments,u.p,u.q);break;case"LatheGeometry":case"LatheBufferGeometry":l=new wo[u.type](u.points,u.segments,u.phiStart,u.phiLength);break;case"PolyhedronGeometry":case"PolyhedronBufferGeometry":l=new wo[u.type](u.vertices,u.indices,u.radius,u.details);break;case"ShapeGeometry":case"ShapeBufferGeometry":var c=[];for(o=0,s=u.shapes.length;o<s;o++){var h=t[u.shapes[o]];c.push(h)}l=new wo[u.type](c,u.curveSegments);break;case"BufferGeometry":l=a.parse(u);break;case"Geometry":l=i.parse(u,this.texturePath).geometry;break;default:n.warn('THREE.ObjectLoader: Unsupported geometry type "'+u.type+'"');continue}l.uuid=u.uuid,void 0!==u.name&&(l.name=u.name),r[u.uuid]=l}return r},parseMaterials:function(e,t){var r={};if(void 0!==e){var n=new Vs;n.setTextures(t);for(var i=0,a=e.length;i<a;i++){var o=e[i];if("MultiMaterial"===o.type){for(var s=[],l=0;l<o.materials.length;l++)s.push(n.parse(o.materials[l]));r[o.uuid]=s}else r[o.uuid]=n.parse(o)}}return r},parseAnimations:function(e){for(var t=[],r=0;r<e.length;r++){var n=js.parse(e[r]);t.push(n)}return t},parseImages:function(e,t){var r=this,n={};function i(e){return r.manager.itemStart(e),a.load(e,(function(){r.manager.itemEnd(e)}),void 0,(function(){r.manager.itemEnd(e),r.manager.itemError(e)}))}if(void 0!==e&&e.length>0){var a=new Bo(new Ho(t));a.setCrossOrigin(this.crossOrigin);for(var o=0,s=e.length;o<s;o++){var l=e[o],u=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(l.url)?l.url:r.texturePath+l.url;n[l.uuid]=i(u)}}return n},parseTextures:function(e,t){function r(e,t){return"number"==typeof e?e:(n.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",e),t[e])}var i={};if(void 0!==e)for(var a=0,o=e.length;a<o;a++){var s=e[a];void 0===s.image&&n.warn('THREE.ObjectLoader: No "image" specified for',s.uuid),void 0===t[s.image]&&n.warn("THREE.ObjectLoader: Undefined image",s.image);var l=new Nt(t[s.image]);l.needsUpdate=!0,l.uuid=s.uuid,void 0!==s.name&&(l.name=s.name),void 0!==s.mapping&&(l.mapping=r(s.mapping,tl)),void 0!==s.offset&&l.offset.fromArray(s.offset),void 0!==s.repeat&&l.repeat.fromArray(s.repeat),void 0!==s.center&&l.center.fromArray(s.center),void 0!==s.rotation&&(l.rotation=s.rotation),void 0!==s.wrap&&(l.wrapS=r(s.wrap[0],rl),l.wrapT=r(s.wrap[1],rl)),void 0!==s.minFilter&&(l.minFilter=r(s.minFilter,nl)),void 0!==s.magFilter&&(l.magFilter=r(s.magFilter,nl)),void 0!==s.anisotropy&&(l.anisotropy=s.anisotropy),void 0!==s.flipY&&(l.flipY=s.flipY),i[s.uuid]=l}return i},parseObject:function(){var e=new Ot;return function(t,r,i){var a;function o(e){return void 0===r[e]&&n.warn("THREE.ObjectLoader: Undefined geometry",e),r[e]}function s(e){if(void 0!==e){if(Array.isArray(e)){for(var t=[],r=0,a=e.length;r<a;r++){var o=e[r];void 0===i[o]&&n.warn("THREE.ObjectLoader: Undefined material",o),t.push(i[o])}return t}return void 0===i[e]&&n.warn("THREE.ObjectLoader: Undefined material",e),i[e]}}switch(t.type){case"Scene":a=new ji,void 0!==t.background&&Number.isInteger(t.background)&&(a.background=new Lr(t.background)),void 0!==t.fog&&("Fog"===t.fog.type?a.fog=new zi(t.fog.color,t.fog.near,t.fog.far):"FogExp2"===t.fog.type&&(a.fog=new Bi(t.fog.color,t.fog.density)));break;case"PerspectiveCamera":a=new Pi(t.fov,t.aspect,t.near,t.far),void 0!==t.focus&&(a.focus=t.focus),void 0!==t.zoom&&(a.zoom=t.zoom),void 0!==t.filmGauge&&(a.filmGauge=t.filmGauge),void 0!==t.filmOffset&&(a.filmOffset=t.filmOffset),void 0!==t.view&&(a.view=Object.assign({},t.view));break;case"OrthographicCamera":a=new dn(t.left,t.right,t.top,t.bottom,t.near,t.far);break;case"AmbientLight":a=new Rs(t.color,t.intensity);break;case"DirectionalLight":a=new Ms(t.color,t.intensity);break;case"PointLight":a=new _s(t.color,t.intensity,t.distance,t.decay);break;case"RectAreaLight":a=new As(t.color,t.intensity,t.width,t.height);break;case"SpotLight":a=new Ts(t.color,t.intensity,t.distance,t.angle,t.penumbra,t.decay);break;case"HemisphereLight":a=new Es(t.color,t.groundColor,t.intensity);break;case"SkinnedMesh":n.warn("THREE.ObjectLoader.parseObject() does not support SkinnedMesh yet.");case"Mesh":var l=o(t.geometry),u=s(t.material);a=l.bones&&l.bones.length>0?new Zi(l,u):new Xn(l,u);break;case"LOD":a=new qi;break;case"Line":a=new Qi(o(t.geometry),s(t.material),t.mode);break;case"LineLoop":a=new $i(o(t.geometry),s(t.material));break;case"LineSegments":a=new Ji(o(t.geometry),s(t.material));break;case"PointCloud":case"Points":a=new ta(o(t.geometry),s(t.material));break;case"Sprite":a=new Wi(s(t.material));break;case"Group":a=new ra;break;default:a=new cn}if(a.uuid=t.uuid,void 0!==t.name&&(a.name=t.name),void 0!==t.matrix?(e.fromArray(t.matrix),e.decompose(a.position,a.quaternion,a.scale)):(void 0!==t.position&&a.position.fromArray(t.position),void 0!==t.rotation&&a.rotation.fromArray(t.rotation),void 0!==t.quaternion&&a.quaternion.fromArray(t.quaternion),void 0!==t.scale&&a.scale.fromArray(t.scale)),void 0!==t.castShadow&&(a.castShadow=t.castShadow),void 0!==t.receiveShadow&&(a.receiveShadow=t.receiveShadow),t.shadow&&(void 0!==t.shadow.bias&&(a.shadow.bias=t.shadow.bias),void 0!==t.shadow.radius&&(a.shadow.radius=t.shadow.radius),void 0!==t.shadow.mapSize&&a.shadow.mapSize.fromArray(t.shadow.mapSize),void 0!==t.shadow.camera&&(a.shadow.camera=this.parseObject(t.shadow.camera))),void 0!==t.visible&&(a.visible=t.visible),void 0!==t.userData&&(a.userData=t.userData),void 0!==t.children)for(var c=t.children,h=0;h<c.length;h++)a.add(this.parseObject(c[h],r,i));if("LOD"===t.type)for(var d=t.levels,f=0;f<d.length;f++){var p=d[f],m=a.getObjectByProperty("uuid",p.object);void 0!==m&&a.addLevel(m,p.distance)}return a}}()});var el,tl={UVMapping:me,CubeReflectionMapping:ge,CubeRefractionMapping:ve,EquirectangularReflectionMapping:ye,EquirectangularRefractionMapping:be,SphericalReflectionMapping:Ee,CubeUVReflectionMapping:xe,CubeUVRefractionMapping:we},rl={RepeatWrapping:Te,ClampToEdgeWrapping:_e,MirroredRepeatWrapping:Se},nl={NearestFilter:Me,NearestMipMapNearestFilter:Re,NearestMipMapLinearFilter:Ae,LinearFilter:Ce,LinearMipMapNearestFilter:Le,LinearMipMapLinearFilter:Oe};function il(e){"undefined"==typeof createImageBitmap&&n.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"==typeof fetch&&n.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.manager=void 0!==e?e:ko,this.options=void 0}function al(){this.type="ShapePath",this.subPaths=[],this.currentPath=null}function ol(e){this.type="Font",this.data=e}function sl(e){this.manager=void 0!==e?e:ko}il.prototype={constructor:il,setOptions:function(e){return this.options=e,this},load:function(e,t,r,n){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e);var i=this,a=Po.get(e);if(void 0!==a)return i.manager.itemStart(e),setTimeout((function(){t&&t(a),i.manager.itemEnd(e)}),0),a;fetch(e).then((function(e){return e.blob()})).then((function(e){return createImageBitmap(e,i.options)})).then((function(r){Po.add(e,r),t&&t(r),i.manager.itemEnd(e)})).catch((function(t){n&&n(t),i.manager.itemEnd(e),i.manager.itemError(e)}))},setCrossOrigin:function(){return this},setPath:function(e){return this.path=e,this}},Object.assign(al.prototype,{moveTo:function(e,t){this.currentPath=new vs,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t)},lineTo:function(e,t){this.currentPath.lineTo(e,t)},quadraticCurveTo:function(e,t,r,n){this.currentPath.quadraticCurveTo(e,t,r,n)},bezierCurveTo:function(e,t,r,n,i,a){this.currentPath.bezierCurveTo(e,t,r,n,i,a)},splineThru:function(e){this.currentPath.splineThru(e)},toShapes:function(e,t){function r(e){for(var t=[],r=0,n=e.length;r<n;r++){var i=e[r],a=new ys;a.curves=i.curves,t.push(a)}return t}function n(e,t){for(var r=t.length,n=!1,i=r-1,a=0;a<r;i=a++){var o=t[i],s=t[a],l=s.x-o.x,u=s.y-o.y;if(Math.abs(u)>Number.EPSILON){if(u<0&&(o=t[a],l=-l,s=t[i],u=-u),e.y<o.y||e.y>s.y)continue;if(e.y===o.y){if(e.x===o.x)return!0}else{var c=u*(e.x-o.x)-l*(e.y-o.y);if(0===c)return!0;if(c<0)continue;n=!n}}else{if(e.y!==o.y)continue;if(s.x<=e.x&&e.x<=o.x||o.x<=e.x&&e.x<=s.x)return!0}}return n}var i=eo.isClockWise,a=this.subPaths;if(0===a.length)return[];if(!0===t)return r(a);var o,s,l,u=[];if(1===a.length)return s=a[0],(l=new ys).curves=s.curves,u.push(l),u;var c=!i(a[0].getPoints());c=e?!c:c;var h,d,f=[],p=[],m=[],g=0;p[g]=void 0,m[g]=[];for(var v=0,y=a.length;v<y;v++)o=i(h=(s=a[v]).getPoints()),(o=e?!o:o)?(!c&&p[g]&&g++,p[g]={s:new ys,p:h},p[g].s.curves=s.curves,c&&g++,m[g]=[]):m[g].push({h:s,p:h[0]});if(!p[0])return r(a);if(p.length>1){for(var b=!1,E=[],x=0,w=p.length;x<w;x++)f[x]=[];for(x=0,w=p.length;x<w;x++)for(var T=m[x],_=0;_<T.length;_++){for(var S=T[_],M=!0,R=0;R<p.length;R++)n(S.p,p[R].p)&&(x!==R&&E.push({froms:x,tos:R,hole:_}),M?(M=!1,f[R].push(S)):b=!0);M&&f[x].push(S)}E.length>0&&(b||(m=f))}v=0;for(var A=p.length;v<A;v++){l=p[v].s,u.push(l);for(var C=0,L=(d=m[v]).length;C<L;C++)l.holes.push(d[C].h)}return u}}),Object.assign(ol.prototype,{isFont:!0,generateShapes:function(e,t,r){function n(e){for(var r=String(e).split(""),n=t/a.resolution,o=(a.boundingBox.yMax-a.boundingBox.yMin+a.underlineThickness)*n,s=0,l=0,u=[],c=0;c<r.length;c++){var h=r[c];if("\n"===h)s=0,l-=o;else{var d=i(h,n,s,l);s+=d.offsetX,u.push(d.path)}}return u}function i(e,t,r,n){var i=a.glyphs[e]||a.glyphs["?"];if(i){var o,s,l,u,c,h,d,f,p,m=new al,g=[];if(i.o)for(var v=i._cachedOutline||(i._cachedOutline=i.o.split(" ")),y=0,b=v.length;y<b;)switch(v[y++]){case"m":o=v[y++]*t+r,s=v[y++]*t+n,m.moveTo(o,s);break;case"l":o=v[y++]*t+r,s=v[y++]*t+n,m.lineTo(o,s);break;case"q":l=v[y++]*t+r,u=v[y++]*t+n,c=v[y++]*t+r,h=v[y++]*t+n,m.quadraticCurveTo(c,h,l,u),(p=g[g.length-1])&&(p.x,p.y);break;case"b":l=v[y++]*t+r,u=v[y++]*t+n,c=v[y++]*t+r,h=v[y++]*t+n,d=v[y++]*t+r,f=v[y++]*t+n,m.bezierCurveTo(c,h,d,f,l,u),(p=g[g.length-1])&&(p.x,p.y)}return{offsetX:i.ha*t,path:m}}}void 0===t&&(t=100),void 0===r&&(r=4);for(var a=this.data,o=n(e),s=[],l=0,u=o.length;l<u;l++)Array.prototype.push.apply(s,o[l].toShapes());return s}}),Object.assign(sl.prototype,{load:function(e,t,r,i){var a=this,o=new Uo(this.manager);o.setPath(this.path),o.load(e,(function(e){var r;try{r=JSON.parse(e)}catch(t){n.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),r=JSON.parse(e.substring(65,e.length-2))}var i=a.parse(r);t&&t(i)}),r,i)},parse:function(e){return new ol(e)},setPath:function(e){return this.path=e,this}});var ll,ul,cl,hl,dl,fl,pl,ml,gl,vl,yl,bl,El,xl,wl,Tl,_l={getContext:function(){return void 0===el&&(el=new(window.AudioContext||window.webkitAudioContext)),el},setContext:function(e){el=e}};function Sl(e){this.manager=void 0!==e?e:ko}function Ml(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new Pi,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new Pi,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1}function Rl(e,t,r){cn.call(this),this.type="CubeCamera";var n=90,i=1,a=new Pi(n,i,e,t);a.up.set(0,-1,0),a.lookAt(new Pt(1,0,0)),this.add(a);var o=new Pi(n,i,e,t);o.up.set(0,-1,0),o.lookAt(new Pt(-1,0,0)),this.add(o);var s=new Pi(n,i,e,t);s.up.set(0,0,1),s.lookAt(new Pt(0,1,0)),this.add(s);var l=new Pi(n,i,e,t);l.up.set(0,0,-1),l.lookAt(new Pt(0,-1,0)),this.add(l);var u=new Pi(n,i,e,t);u.up.set(0,-1,0),u.lookAt(new Pt(0,0,1)),this.add(u);var c=new Pi(n,i,e,t);c.up.set(0,-1,0),c.lookAt(new Pt(0,0,-1)),this.add(c);var h={format:We,magFilter:Ce,minFilter:Ce};this.renderTarget=new Ft(r,r,h),this.renderTarget.texture.name="CubeCamera",this.update=function(e,t){null===this.parent&&this.updateMatrixWorld();var r=this.renderTarget,n=r.texture.generateMipmaps;r.texture.generateMipmaps=!1,r.activeCubeFace=0,e.render(t,a,r),r.activeCubeFace=1,e.render(t,o,r),r.activeCubeFace=2,e.render(t,s,r),r.activeCubeFace=3,e.render(t,l,r),r.activeCubeFace=4,e.render(t,u,r),r.texture.generateMipmaps=n,r.activeCubeFace=5,e.render(t,c,r),e.setRenderTarget(null)},this.clear=function(e,t,r,n){for(var i=this.renderTarget,a=0;a<6;a++)i.activeCubeFace=a,e.setRenderTarget(i),e.clear(t,r,n);e.setRenderTarget(null)}}function Al(){cn.call(this),this.type="AudioListener",this.context=_l.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null}function Cl(e){cn.call(this),this.type="Audio",this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.loop=!1,this.startTime=0,this.offset=0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.sourceType="empty",this.filters=[]}function Ll(e){Cl.call(this,e),this.panner=this.context.createPanner(),this.panner.connect(this.gain)}function Ol(e,t){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=void 0!==t?t:2048,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}function Il(e,t,r){this.binding=e,this.valueSize=r;var n,i=Float64Array;switch(t){case"quaternion":n=this._slerp;break;case"string":case"bool":i=Array,n=this._select;break;default:n=this._lerp}this.buffer=new i(4*r),this._mixBufferRegion=n,this.cumulativeWeight=0,this.useCount=0,this.referenceCount=0}function Pl(e,t,r){var n=r||Hl.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,n)}function Hl(e,t,r){this.path=t,this.parsedPath=r||Hl.parseTrackName(t),this.node=Hl.findNode(e,this.parsedPath.nodeName)||e,this.rootNode=e}function kl(){this.uuid=Ct.generateUUID(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;var e={};this._indicesByUUID=e;for(var t=0,r=arguments.length;t!==r;++t)e[arguments[t].uuid]=t;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};var n=this;this.stats={objects:{get total(){return n._objects.length},get inUse(){return this.total-n.nCachedObjects_}},get bindingsPerObject(){return n._bindings.length}}}function Nl(e,t,r){this._mixer=e,this._clip=t,this._localRoot=r||null;for(var n=t.tracks,i=n.length,a=new Array(i),o={endingStart:ft,endingEnd:ft},s=0;s!==i;++s){var l=n[s].createInterpolant(null);a[s]=l,l.settings=o}this._interpolantSettings=o,this._interpolants=a,this._propertyBindings=new Array(i),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=lt,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}function Ul(e){this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}function Dl(e){"string"==typeof e&&(n.warn("THREE.Uniform: Type parameter is no longer needed."),e=arguments[1]),this.value=e}function Fl(){Un.call(this),this.type="InstancedBufferGeometry",this.maxInstancedCount=void 0}function Bl(e,t,r,n){this.uuid=Ct.generateUUID(),this.data=e,this.itemSize=t,this.offset=r,this.normalized=!0===n}function zl(e,t){this.uuid=Ct.generateUUID(),this.array=e,this.stride=t,this.count=void 0!==e?e.length/t:0,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.onUploadCallback=function(){},this.version=0}function jl(e,t,r){zl.call(this,e,t),this.meshPerAttribute=r||1}function Vl(e,t,r){vn.call(this,e,t),this.meshPerAttribute=r||1}function Gl(e,t,r,i){this.ray=new Gn(e,t),this.near=r||0,this.far=i||1/0,this.params={Mesh:{},Line:{},LOD:{},Points:{threshold:1},Sprite:{}},Object.defineProperties(this.params,{PointCloud:{get:function(){return n.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points."),this.Points}}})}function Wl(e,t){return e.distance-t.distance}function ql(e,t,r,n){if(!1!==e.visible&&(e.raycast(t,r),!0===n))for(var i=e.children,a=0,o=i.length;a<o;a++)ql(i[a],t,r,!0)}function Xl(e){this.autoStart=void 0===e||e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}function Yl(e,t,r){return this.radius=void 0!==e?e:1,this.phi=void 0!==t?t:0,this.theta=void 0!==r?r:0,this}function Zl(e,t,r){return this.radius=void 0!==e?e:1,this.theta=void 0!==t?t:0,this.y=void 0!==r?r:0,this}function Kl(e){cn.call(this),this.material=e,this.render=function(){}}function Ql(e,t,r,n){this.object=e,this.size=void 0!==t?t:1;var i=void 0!==r?r:16711680,a=void 0!==n?n:1,o=0,s=this.object.geometry;s&&s.isGeometry?o=3*s.faces.length:s&&s.isBufferGeometry&&(o=s.attributes.normal.count);var l=new Un,u=new Sn(2*o*3,3);l.addAttribute("position",u),Ji.call(this,l,new Ki({color:i,linewidth:a})),this.matrixAutoUpdate=!1,this.update()}function Jl(e,t){cn.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t;for(var r=new Un,n=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1],i=0,a=1,o=32;i<o;i++,a++){var s=i/o*Math.PI*2,l=a/o*Math.PI*2;n.push(Math.cos(s),Math.sin(s),1,Math.cos(l),Math.sin(l),1)}r.addAttribute("position",new Sn(n,3));var u=new Ki({fog:!1});this.cone=new Ji(r,u),this.add(this.cone),this.update()}function $l(e){var t=[];e&&e.isBone&&t.push(e);for(var r=0;r<e.children.length;r++)t.push.apply(t,$l(e.children[r]));return t}function eu(e){for(var t=$l(e),r=new Un,n=[],i=[],a=new Lr(0,0,1),o=new Lr(0,1,0),s=0;s<t.length;s++){var l=t[s];l.parent&&l.parent.isBone&&(n.push(0,0,0),n.push(0,0,0),i.push(a.r,a.g,a.b),i.push(o.r,o.g,o.b))}r.addAttribute("position",new Sn(n,3)),r.addAttribute("color",new Sn(i,3));var u=new Ki({vertexColors:L,depthTest:!1,depthWrite:!1,transparent:!0});Ji.call(this,r,u),this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}function tu(e,t,r){this.light=e,this.light.updateMatrixWorld(),this.color=r;var n=new oo(t,4,2),i=new jn({wireframe:!0,fog:!1});Xn.call(this,n,i),this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}function ru(e,t){cn.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t;var r=new Ki({fog:!1}),n=new Un;n.addAttribute("position",new vn(new Float32Array(15),3)),this.line=new Qi(n,r),this.add(this.line),this.update()}function nu(e,t,r){cn.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=r;var n=new pa(t);n.rotateY(.5*Math.PI),this.material=new jn({wireframe:!0,fog:!1}),void 0===this.color&&(this.material.vertexColors=L);var i=n.getAttribute("position"),a=new Float32Array(3*i.count);n.addAttribute("color",new vn(a,3)),this.add(new Xn(n,this.material)),this.update()}function iu(e,t,r,n){e=e||10,t=t||10,r=new Lr(void 0!==r?r:4473924),n=new Lr(void 0!==n?n:8947848);for(var i=t/2,a=e/t,o=e/2,s=[],l=[],u=0,c=0,h=-o;u<=t;u++,h+=a){s.push(-o,0,h,o,0,h),s.push(h,0,-o,h,0,o);var d=u===i?r:n;d.toArray(l,c),c+=3,d.toArray(l,c),c+=3,d.toArray(l,c),c+=3,d.toArray(l,c),c+=3}var f=new Un;f.addAttribute("position",new Sn(s,3)),f.addAttribute("color",new Sn(l,3));var p=new Ki({vertexColors:L});Ji.call(this,f,p)}function au(e,t,r,n,i,a){e=e||10,t=t||16,r=r||8,n=n||64,i=new Lr(void 0!==i?i:4473924),a=new Lr(void 0!==a?a:8947848);var o,s,l,u,c,h,d,f=[],p=[];for(u=0;u<=t;u++)l=u/t*(2*Math.PI),o=Math.sin(l)*e,s=Math.cos(l)*e,f.push(0,0,0),f.push(o,0,s),d=1&u?i:a,p.push(d.r,d.g,d.b),p.push(d.r,d.g,d.b);for(u=0;u<=r;u++)for(d=1&u?i:a,h=e-e/r*u,c=0;c<n;c++)l=c/n*(2*Math.PI),o=Math.sin(l)*h,s=Math.cos(l)*h,f.push(o,0,s),p.push(d.r,d.g,d.b),l=(c+1)/n*(2*Math.PI),o=Math.sin(l)*h,s=Math.cos(l)*h,f.push(o,0,s),p.push(d.r,d.g,d.b);var m=new Un;m.addAttribute("position",new Sn(f,3)),m.addAttribute("color",new Sn(p,3));var g=new Ki({vertexColors:L});Ji.call(this,m,g)}function ou(e,t,r,i){this.object=e,this.size=void 0!==t?t:1;var a=void 0!==r?r:16776960,o=void 0!==i?i:1,s=0,l=this.object.geometry;l&&l.isGeometry?s=l.faces.length:n.warn("THREE.FaceNormalsHelper: only THREE.Geometry is supported. Use THREE.VertexNormalsHelper, instead.");var u=new Un,c=new Sn(2*s*3,3);u.addAttribute("position",c),Ji.call(this,u,new Ki({color:a,linewidth:o})),this.matrixAutoUpdate=!1,this.update()}function su(e,t,r){cn.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=r,void 0===t&&(t=1);var n=new Un;n.addAttribute("position",new Sn([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));var i=new Ki({fog:!1});this.lightPlane=new Qi(n,i),this.add(this.lightPlane),(n=new Un).addAttribute("position",new Sn([0,0,0,0,0,1],3)),this.targetLine=new Qi(n,i),this.add(this.targetLine),this.update()}function lu(e){var t=new Un,r=new Ki({color:16777215,vertexColors:C}),n=[],i=[],a={},o=new Lr(16755200),s=new Lr(16711680),l=new Lr(43775),u=new Lr(16777215),c=new Lr(3355443);function h(e,t,r){d(e,r),d(t,r)}function d(e,t){n.push(0,0,0),i.push(t.r,t.g,t.b),void 0===a[e]&&(a[e]=[]),a[e].push(n.length/3-1)}h("n1","n2",o),h("n2","n4",o),h("n4","n3",o),h("n3","n1",o),h("f1","f2",o),h("f2","f4",o),h("f4","f3",o),h("f3","f1",o),h("n1","f1",o),h("n2","f2",o),h("n3","f3",o),h("n4","f4",o),h("p","n1",s),h("p","n2",s),h("p","n3",s),h("p","n4",s),h("u1","u2",l),h("u2","u3",l),h("u3","u1",l),h("c","t",u),h("p","c",c),h("cn1","cn2",c),h("cn3","cn4",c),h("cf1","cf2",c),h("cf3","cf4",c),t.addAttribute("position",new Sn(n,3)),t.addAttribute("color",new Sn(i,3)),Ji.call(this,t,r),this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=a,this.update()}function uu(e,t){this.object=e,void 0===t&&(t=16776960);var r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),n=new Float32Array(24),i=new Un;i.setIndex(new vn(r,1)),i.addAttribute("position",new vn(n,3)),Ji.call(this,i,new Ki({color:t})),this.matrixAutoUpdate=!1,this.update()}function cu(e,t){this.type="Box3Helper",this.box=e;var r=void 0!==t?t:16776960,n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],a=new Un;a.setIndex(new vn(n,1)),a.addAttribute("position",new Sn(i,3)),Ji.call(this,a,new Ki({color:r})),this.geometry.computeBoundingSphere()}function hu(e,t,r){this.type="PlaneHelper",this.plane=e,this.size=void 0===t?1:t;var n=void 0!==r?r:16776960,i=[1,-1,1,-1,1,1,-1,-1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,0,0,1,0,0,0],a=new Un;a.addAttribute("position",new Sn(i,3)),a.computeBoundingSphere(),Qi.call(this,a,new Ki({color:n}));var o=[1,1,1,-1,1,1,-1,-1,1,1,1,1,-1,-1,1,1,-1,1],s=new Un;s.addAttribute("position",new Sn(o,3)),s.computeBoundingSphere(),this.add(new Xn(s,new jn({color:n,opacity:.2,transparent:!0,depthWrite:!1})))}function du(e,t,r,n,i,a){cn.call(this),void 0===n&&(n=16776960),void 0===r&&(r=1),void 0===i&&(i=.2*r),void 0===a&&(a=.2*i),void 0===ll&&((ll=new Un).addAttribute("position",new Sn([0,0,0,0,1,0],3)),(ul=new vo(0,.5,1,5,1)).translate(0,-.5,0)),this.position.copy(t),this.line=new Qi(ll,new Ki({color:n})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Xn(ul,new jn({color:n})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(r,i,a)}function fu(e){var t=[0,0,0,e=e||1,0,0,0,0,0,0,e,0,0,0,0,0,0,e],r=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],n=new Un;n.addAttribute("position",new Sn(t,3)),n.addAttribute("color",new Sn(r,3));var i=new Ki({vertexColors:L});Ji.call(this,n,i)}Object.assign(Sl.prototype,{load:function(e,t,r,n){var i=new Uo(this.manager);i.setResponseType("arraybuffer"),i.load(e,(function(e){_l.getContext().decodeAudioData(e,(function(e){t(e)}))}),r,n)}}),Object.assign(Ml.prototype,{update:(wl=new Ot,Tl=new Ot,function(e){if(pl!==this||ml!==e.focus||gl!==e.fov||vl!==e.aspect*this.aspect||yl!==e.near||bl!==e.far||El!==e.zoom||xl!==this.eyeSep){pl=this,ml=e.focus,gl=e.fov,vl=e.aspect*this.aspect,yl=e.near,bl=e.far,El=e.zoom;var t,r,n=e.projectionMatrix.clone(),i=(xl=this.eyeSep/2)*yl/ml,a=yl*Math.tan(Ct.DEG2RAD*gl*.5)/El;Tl.elements[12]=-xl,wl.elements[12]=xl,t=-a*vl+i,r=a*vl+i,n.elements[0]=2*yl/(r-t),n.elements[8]=(r+t)/(r-t),this.cameraL.projectionMatrix.copy(n),t=-a*vl-i,r=a*vl-i,n.elements[0]=2*yl/(r-t),n.elements[8]=(r+t)/(r-t),this.cameraR.projectionMatrix.copy(n)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(Tl),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(wl)})}),Rl.prototype=Object.create(cn.prototype),Rl.prototype.constructor=Rl,Al.prototype=Object.assign(Object.create(cn.prototype),{constructor:Al,getInput:function(){return this.gain},removeFilter:function(){null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null)},getFilter:function(){return this.filter},setFilter:function(e){null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination)},getMasterVolume:function(){return this.gain.gain.value},setMasterVolume:function(e){this.gain.gain.value=e},updateMatrixWorld:function(){var e=new Pt,t=new It,r=new Pt,n=new Pt;return function(i){cn.prototype.updateMatrixWorld.call(this,i);var a=this.context.listener,o=this.up;this.matrixWorld.decompose(e,t,r),n.set(0,0,-1).applyQuaternion(t),a.positionX?(a.positionX.setValueAtTime(e.x,this.context.currentTime),a.positionY.setValueAtTime(e.y,this.context.currentTime),a.positionZ.setValueAtTime(e.z,this.context.currentTime),a.forwardX.setValueAtTime(n.x,this.context.currentTime),a.forwardY.setValueAtTime(n.y,this.context.currentTime),a.forwardZ.setValueAtTime(n.z,this.context.currentTime),a.upX.setValueAtTime(o.x,this.context.currentTime),a.upY.setValueAtTime(o.y,this.context.currentTime),a.upZ.setValueAtTime(o.z,this.context.currentTime)):(a.setPosition(e.x,e.y,e.z),a.setOrientation(n.x,n.y,n.z,o.x,o.y,o.z))}}()}),Cl.prototype=Object.assign(Object.create(cn.prototype),{constructor:Cl,getOutput:function(){return this.gain},setNodeSource:function(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this},setBuffer:function(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this},play:function(){if(!0!==this.isPlaying){if(!1!==this.hasPlaybackControl){var e=this.context.createBufferSource();return e.buffer=this.buffer,e.loop=this.loop,e.onended=this.onEnded.bind(this),e.playbackRate.setValueAtTime(this.playbackRate,this.startTime),this.startTime=this.context.currentTime,e.start(this.startTime,this.offset),this.isPlaying=!0,this.source=e,this.connect()}n.warn("THREE.Audio: this Audio has no playback control.")}else n.warn("THREE.Audio: Audio is already playing.")},pause:function(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this.source.stop(),this.offset+=(this.context.currentTime-this.startTime)*this.playbackRate,this.isPlaying=!1),this;n.warn("THREE.Audio: this Audio has no playback control.")},stop:function(){if(!1!==this.hasPlaybackControl)return this.source.stop(),this.offset=0,this.isPlaying=!1,this;n.warn("THREE.Audio: this Audio has no playback control.")},connect:function(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(var e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this},disconnect:function(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(var e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this},getFilters:function(){return this.filters},setFilters:function(e){return e||(e=[]),!0===this.isPlaying?(this.disconnect(),this.filters=e,this.connect()):this.filters=e,this},getFilter:function(){return this.getFilters()[0]},setFilter:function(e){return this.setFilters(e?[e]:[])},setPlaybackRate:function(e){if(!1!==this.hasPlaybackControl)return this.playbackRate=e,!0===this.isPlaying&&this.source.playbackRate.setValueAtTime(this.playbackRate,this.context.currentTime),this;n.warn("THREE.Audio: this Audio has no playback control.")},getPlaybackRate:function(){return this.playbackRate},onEnded:function(){this.isPlaying=!1},getLoop:function(){return!1===this.hasPlaybackControl?(n.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop},setLoop:function(e){if(!1!==this.hasPlaybackControl)return this.loop=e,!0===this.isPlaying&&(this.source.loop=this.loop),this;n.warn("THREE.Audio: this Audio has no playback control.")},getVolume:function(){return this.gain.gain.value},setVolume:function(e){return this.gain.gain.value=e,this}}),Ll.prototype=Object.assign(Object.create(Cl.prototype),{constructor:Ll,getOutput:function(){return this.panner},getRefDistance:function(){return this.panner.refDistance},setRefDistance:function(e){this.panner.refDistance=e},getRolloffFactor:function(){return this.panner.rolloffFactor},setRolloffFactor:function(e){this.panner.rolloffFactor=e},getDistanceModel:function(){return this.panner.distanceModel},setDistanceModel:function(e){this.panner.distanceModel=e},getMaxDistance:function(){return this.panner.maxDistance},setMaxDistance:function(e){this.panner.maxDistance=e},updateMatrixWorld:function(){var e=new Pt;return function(t){cn.prototype.updateMatrixWorld.call(this,t),e.setFromMatrixPosition(this.matrixWorld),this.panner.setPosition(e.x,e.y,e.z)}}()}),Object.assign(Ol.prototype,{getFrequencyData:function(){return this.analyser.getByteFrequencyData(this.data),this.data},getAverageFrequency:function(){for(var e=0,t=this.getFrequencyData(),r=0;r<t.length;r++)e+=t[r];return e/t.length}}),Object.assign(Il.prototype,{accumulate:function(e,t){var r=this.buffer,n=this.valueSize,i=e*n+n,a=this.cumulativeWeight;if(0===a){for(var o=0;o!==n;++o)r[i+o]=r[o];a=t}else{var s=t/(a+=t);this._mixBufferRegion(r,i,0,s,n)}this.cumulativeWeight=a},apply:function(e){var t=this.valueSize,r=this.buffer,n=e*t+t,i=this.cumulativeWeight,a=this.binding;if(this.cumulativeWeight=0,i<1){var o=3*t;this._mixBufferRegion(r,n,o,1-i,t)}for(var s=t,l=t+t;s!==l;++s)if(r[s]!==r[s+t]){a.setValue(r,n);break}},saveOriginalState:function(){var e=this.binding,t=this.buffer,r=this.valueSize,n=3*r;e.getValue(t,n);for(var i=r,a=n;i!==a;++i)t[i]=t[n+i%r];this.cumulativeWeight=0},restoreOriginalState:function(){var e=3*this.valueSize;this.binding.setValue(this.buffer,e)},_select:function(e,t,r,n,i){if(n>=.5)for(var a=0;a!==i;++a)e[t+a]=e[r+a]},_slerp:function(e,t,r,n){It.slerpFlat(e,t,e,t,e,r,n)},_lerp:function(e,t,r,n,i){for(var a=1-n,o=0;o!==i;++o){var s=t+o;e[s]=e[s]*a+e[r+o]*n}}}),Object.assign(Pl.prototype,{getValue:function(e,t){this.bind();var r=this._targetGroup.nCachedObjects_,n=this._bindings[r];void 0!==n&&n.getValue(e,t)},setValue:function(e,t){for(var r=this._bindings,n=this._targetGroup.nCachedObjects_,i=r.length;n!==i;++n)r[n].setValue(e,t)},bind:function(){for(var e=this._bindings,t=this._targetGroup.nCachedObjects_,r=e.length;t!==r;++t)e[t].bind()},unbind:function(){for(var e=this._bindings,t=this._targetGroup.nCachedObjects_,r=e.length;t!==r;++t)e[t].unbind()}}),Object.assign(Hl,{Composite:Pl,create:function(e,t,r){return e&&e.isAnimationObjectGroup?new Hl.Composite(e,t,r):new Hl(e,t,r)},sanitizeNodeName:function(e){return e.replace(/\s/g,"_").replace(/[^\w-]/g,"")},parseTrackName:(dl=new RegExp("^"+/((?:[\w-]+[\/:])*)/.source+/([\w-\.]+)?/.source+/(?:\.([\w-]+)(?:\[(.+)\])?)?/.source+/\.([\w-]+)(?:\[(.+)\])?/.source+"$"),fl=["material","materials","bones"],function(e){var t=dl.exec(e);if(!t)throw new Error("PropertyBinding: Cannot parse trackName: "+e);var r={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},n=r.nodeName&&r.nodeName.lastIndexOf(".");if(void 0!==n&&-1!==n){var i=r.nodeName.substring(n+1);-1!==fl.indexOf(i)&&(r.nodeName=r.nodeName.substring(0,n),r.objectName=i)}if(null===r.propertyName||0===r.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return r}),findNode:function(e,t){if(!t||""===t||"root"===t||"."===t||-1===t||t===e.name||t===e.uuid)return e;if(e.skeleton){var r=function(e){for(var r=0;r<e.bones.length;r++){var n=e.bones[r];if(n.name===t)return n}return null},n=r(e.skeleton);if(n)return n}if(e.children){var i=function(e){for(var r=0;r<e.length;r++){var n=e[r];if(n.name===t||n.uuid===t)return n;var a=i(n.children);if(a)return a}return null},a=i(e.children);if(a)return a}return null}}),Object.assign(Hl.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function(e,t){e[t]=this.node[this.propertyName]},function(e,t){for(var r=this.resolvedProperty,n=0,i=r.length;n!==i;++n)e[t++]=r[n]},function(e,t){e[t]=this.resolvedProperty[this.propertyIndex]},function(e,t){this.resolvedProperty.toArray(e,t)}],SetterByBindingTypeAndVersioning:[[function(e,t){this.targetObject[this.propertyName]=e[t]},function(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0},function(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){for(var r=this.resolvedProperty,n=0,i=r.length;n!==i;++n)r[n]=e[t++]},function(e,t){for(var r=this.resolvedProperty,n=0,i=r.length;n!==i;++n)r[n]=e[t++];this.targetObject.needsUpdate=!0},function(e,t){for(var r=this.resolvedProperty,n=0,i=r.length;n!==i;++n)r[n]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){this.resolvedProperty[this.propertyIndex]=e[t]},function(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0},function(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){this.resolvedProperty.fromArray(e,t)},function(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0},function(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}]],getValue:function(e,t){this.bind(),this.getValue(e,t)},setValue:function(e,t){this.bind(),this.setValue(e,t)},bind:function(){var e=this.node,t=this.parsedPath,r=t.objectName,i=t.propertyName,a=t.propertyIndex;if(e||(e=Hl.findNode(this.rootNode,t.nodeName)||this.rootNode,this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,e){if(r){var o=t.objectIndex;switch(r){case"materials":if(!e.material)return void n.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!e.material.materials)return void n.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);e=e.material.materials;break;case"bones":if(!e.skeleton)return void n.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);e=e.skeleton.bones;for(var s=0;s<e.length;s++)if(e[s].name===o){o=s;break}break;default:if(void 0===e[r])return void n.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);e=e[r]}if(void 0!==o){if(void 0===e[o])return void n.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);e=e[o]}}var l=e[i];if(void 0!==l){var u=this.Versioning.None;void 0!==e.needsUpdate?(u=this.Versioning.NeedsUpdate,this.targetObject=e):void 0!==e.matrixWorldNeedsUpdate&&(u=this.Versioning.MatrixWorldNeedsUpdate,this.targetObject=e);var c=this.BindingType.Direct;if(void 0!==a){if("morphTargetInfluences"===i){if(!e.geometry)return void n.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(e.geometry.isBufferGeometry){if(!e.geometry.morphAttributes)return void n.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);for(s=0;s<this.node.geometry.morphAttributes.position.length;s++)if(e.geometry.morphAttributes.position[s].name===a){a=s;break}}else{if(!e.geometry.morphTargets)return void n.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphTargets.",this);for(s=0;s<this.node.geometry.morphTargets.length;s++)if(e.geometry.morphTargets[s].name===a){a=s;break}}}c=this.BindingType.ArrayElement,this.resolvedProperty=l,this.propertyIndex=a}else void 0!==l.fromArray&&void 0!==l.toArray?(c=this.BindingType.HasFromToArray,this.resolvedProperty=l):Array.isArray(l)?(c=this.BindingType.EntireArray,this.resolvedProperty=l):this.propertyName=i;this.getValue=this.GetterByBindingType[c],this.setValue=this.SetterByBindingTypeAndVersioning[c][u]}else{var h=t.nodeName;n.error("THREE.PropertyBinding: Trying to update property for track: "+h+"."+i+" but it wasn't found.",e)}}else n.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.")},unbind:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}),
//!\ DECLARE ALIAS AFTER assign prototype !
Object.assign(Hl.prototype,{_getValue_unbound:Hl.prototype.getValue,_setValue_unbound:Hl.prototype.setValue}),Object.assign(kl.prototype,{isAnimationObjectGroup:!0,add:function(){for(var e=this._objects,t=e.length,r=this.nCachedObjects_,i=this._indicesByUUID,a=this._paths,o=this._parsedPaths,s=this._bindings,l=s.length,u=0,c=arguments.length;u!==c;++u){var h=arguments[u],d=h.uuid,f=i[d],p=void 0;if(void 0===f){f=t++,i[d]=f,e.push(h);for(var m=0,g=l;m!==g;++m)s[m].push(new Hl(h,a[m],o[m]))}else if(f<r){p=e[f];var v=--r,y=e[v];for(i[y.uuid]=f,e[f]=y,i[d]=v,e[v]=h,m=0,g=l;m!==g;++m){var b=s[m],E=b[v],x=b[f];b[f]=E,void 0===x&&(x=new Hl(h,a[m],o[m])),b[v]=x}}else e[f]!==p&&n.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=r},remove:function(){for(var e=this._objects,t=this.nCachedObjects_,r=this._indicesByUUID,n=this._bindings,i=n.length,a=0,o=arguments.length;a!==o;++a){var s=arguments[a],l=s.uuid,u=r[l];if(void 0!==u&&u>=t){var c=t++,h=e[c];r[h.uuid]=u,e[u]=h,r[l]=c,e[c]=s;for(var d=0,f=i;d!==f;++d){var p=n[d],m=p[c],g=p[u];p[u]=m,p[c]=g}}}this.nCachedObjects_=t},uncache:function(){for(var e=this._objects,t=e.length,r=this.nCachedObjects_,n=this._indicesByUUID,i=this._bindings,a=i.length,o=0,s=arguments.length;o!==s;++o){var l=arguments[o].uuid,u=n[l];if(void 0!==u)if(delete n[l],u<r){var c=--r,h=e[c],d=e[v=--t];n[h.uuid]=u,e[u]=h,n[d.uuid]=c,e[c]=d,e.pop();for(var f=0,p=a;f!==p;++f){var m=(y=i[f])[c],g=y[v];y[u]=m,y[c]=g,y.pop()}}else{var v;for(n[(d=e[v=--t]).uuid]=u,e[u]=d,e.pop(),f=0,p=a;f!==p;++f){var y;(y=i[f])[u]=y[v],y.pop()}}}this.nCachedObjects_=r},subscribe_:function(e,t){var r=this._bindingsIndicesByPath,n=r[e],i=this._bindings;if(void 0!==n)return i[n];var a=this._paths,o=this._parsedPaths,s=this._objects,l=s.length,u=this.nCachedObjects_,c=new Array(l);n=i.length,r[e]=n,a.push(e),o.push(t),i.push(c);for(var h=u,d=s.length;h!==d;++h){var f=s[h];c[h]=new Hl(f,e,t)}return c},unsubscribe_:function(e){var t=this._bindingsIndicesByPath,r=t[e];if(void 0!==r){var n=this._paths,i=this._parsedPaths,a=this._bindings,o=a.length-1,s=a[o];t[e[o]]=r,a[r]=s,a.pop(),i[r]=i[o],i.pop(),n[r]=n[o],n.pop()}}}),Object.assign(Nl.prototype,{play:function(){return this._mixer._activateAction(this),this},stop:function(){return this._mixer._deactivateAction(this),this.reset()},reset:function(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()},isRunning:function(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)},isScheduled:function(){return this._mixer._isActiveAction(this)},startAt:function(e){return this._startTime=e,this},setLoop:function(e,t){return this.loop=e,this.repetitions=t,this},setEffectiveWeight:function(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()},getEffectiveWeight:function(){return this._effectiveWeight},fadeIn:function(e){return this._scheduleFading(e,0,1)},fadeOut:function(e){return this._scheduleFading(e,1,0)},crossFadeFrom:function(e,t,r){if(e.fadeOut(t),this.fadeIn(t),r){var n=this._clip.duration,i=e._clip.duration,a=i/n,o=n/i;e.warp(1,a,t),this.warp(o,1,t)}return this},crossFadeTo:function(e,t,r){return e.crossFadeFrom(this,t,r)},stopFading:function(){var e=this._weightInterpolant;return null!==e&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this},setEffectiveTimeScale:function(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()},getEffectiveTimeScale:function(){return this._effectiveTimeScale},setDuration:function(e){return this.timeScale=this._clip.duration/e,this.stopWarping()},syncWith:function(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()},halt:function(e){return this.warp(this._effectiveTimeScale,0,e)},warp:function(e,t,r){var n=this._mixer,i=n.time,a=this._timeScaleInterpolant,o=this.timeScale;null===a&&(a=n._lendControlInterpolant(),this._timeScaleInterpolant=a);var s=a.parameterPositions,l=a.sampleValues;return s[0]=i,s[1]=i+r,l[0]=e/o,l[1]=t/o,this},stopWarping:function(){var e=this._timeScaleInterpolant;return null!==e&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this},getMixer:function(){return this._mixer},getClip:function(){return this._clip},getRoot:function(){return this._localRoot||this._mixer._root},_update:function(e,t,r,n){if(this.enabled){var i=this._startTime;if(null!==i){var a=(e-i)*r;if(a<0||0===r)return;this._startTime=null,t=r*a}t*=this._updateTimeScale(e);var o=this._updateTime(t),s=this._updateWeight(e);if(s>0)for(var l=this._interpolants,u=this._propertyBindings,c=0,h=l.length;c!==h;++c)l[c].evaluate(o),u[c].accumulate(n,s)}else this._updateWeight(e)},_updateWeight:function(e){var t=0;if(this.enabled){t=this.weight;var r=this._weightInterpolant;if(null!==r){var n=r.evaluate(e)[0];t*=n,e>r.parameterPositions[1]&&(this.stopFading(),0===n&&(this.enabled=!1))}}return this._effectiveWeight=t,t},_updateTimeScale:function(e){var t=0;if(!this.paused){t=this.timeScale;var r=this._timeScaleInterpolant;null!==r&&(t*=r.evaluate(e)[0],e>r.parameterPositions[1]&&(this.stopWarping(),0===t?this.paused=!0:this.timeScale=t))}return this._effectiveTimeScale=t,t},_updateTime:function(e){var t=this.time+e;if(0===e)return t;var r=this._clip.duration,n=this.loop,i=this._loopCount;if(n===st){-1===i&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(t>=r)t=r;else{if(!(t<0))break e;t=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{var a=n===ut;if(-1===i&&(e>=0?(i=0,this._setEndings(!0,0===this.repetitions,a)):this._setEndings(0===this.repetitions,!0,a)),t>=r||t<0){var o=Math.floor(t/r);t-=r*o,i+=Math.abs(o);var s=this.repetitions-i;if(s<0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,t=e>0?r:0,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(0===s){var l=e<0;this._setEndings(l,!l,a)}else this._setEndings(!1,!1,a);this._loopCount=i,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:o})}}if(a&&1==(1&i))return this.time=t,r-t}return this.time=t,t},_setEndings:function(e,t,r){var n=this._interpolantSettings;r?(n.endingStart=pt,n.endingEnd=pt):(n.endingStart=e?this.zeroSlopeAtStart?pt:ft:mt,n.endingEnd=t?this.zeroSlopeAtEnd?pt:ft:mt)},_scheduleFading:function(e,t,r){var n=this._mixer,i=n.time,a=this._weightInterpolant;null===a&&(a=n._lendControlInterpolant(),this._weightInterpolant=a);var o=a.parameterPositions,s=a.sampleValues;return o[0]=i,s[0]=t,o[1]=i+e,s[1]=r,this}}),Ul.prototype=Object.assign(Object.create(t.prototype),{constructor:Ul,_bindAction:function(e,t){var r=e._localRoot||this._root,n=e._clip.tracks,i=n.length,a=e._propertyBindings,o=e._interpolants,s=r.uuid,l=this._bindingsByRootAndName,u=l[s];void 0===u&&(u={},l[s]=u);for(var c=0;c!==i;++c){var h=n[c],d=h.name,f=u[d];if(void 0!==f)a[c]=f;else{if(void 0!==(f=a[c])){null===f._cacheIndex&&(++f.referenceCount,this._addInactiveBinding(f,s,d));continue}var p=t&&t._propertyBindings[c].binding.parsedPath;++(f=new Il(Hl.create(r,d,p),h.ValueTypeName,h.getValueSize())).referenceCount,this._addInactiveBinding(f,s,d),a[c]=f}o[c].resultBuffer=f.buffer}},_activateAction:function(e){if(!this._isActiveAction(e)){if(null===e._cacheIndex){var t=(e._localRoot||this._root).uuid,r=e._clip.uuid,n=this._actionsByClip[r];this._bindAction(e,n&&n.knownActions[0]),this._addInactiveAction(e,r,t)}for(var i=e._propertyBindings,a=0,o=i.length;a!==o;++a){var s=i[a];0==s.useCount++&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}},_deactivateAction:function(e){if(this._isActiveAction(e)){for(var t=e._propertyBindings,r=0,n=t.length;r!==n;++r){var i=t[r];0==--i.useCount&&(i.restoreOriginalState(),this._takeBackBinding(i))}this._takeBackAction(e)}},_initMemoryManager:function(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;var e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}},_isActiveAction:function(e){var t=e._cacheIndex;return null!==t&&t<this._nActiveActions},_addInactiveAction:function(e,t,r){var n=this._actions,i=this._actionsByClip,a=i[t];if(void 0===a)a={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,i[t]=a;else{var o=a.knownActions;e._byClipCacheIndex=o.length,o.push(e)}e._cacheIndex=n.length,n.push(e),a.actionByRoot[r]=e},_removeInactiveAction:function(e){var t=this._actions,r=t[t.length-1],n=e._cacheIndex;r._cacheIndex=n,t[n]=r,t.pop(),e._cacheIndex=null;var i=e._clip.uuid,a=this._actionsByClip,o=a[i],s=o.knownActions,l=s[s.length-1],u=e._byClipCacheIndex;l._byClipCacheIndex=u,s[u]=l,s.pop(),e._byClipCacheIndex=null,delete o.actionByRoot[(e._localRoot||this._root).uuid],0===s.length&&delete a[i],this._removeInactiveBindingsForAction(e)},_removeInactiveBindingsForAction:function(e){for(var t=e._propertyBindings,r=0,n=t.length;r!==n;++r){var i=t[r];0==--i.referenceCount&&this._removeInactiveBinding(i)}},_lendAction:function(e){var t=this._actions,r=e._cacheIndex,n=this._nActiveActions++,i=t[n];e._cacheIndex=n,t[n]=e,i._cacheIndex=r,t[r]=i},_takeBackAction:function(e){var t=this._actions,r=e._cacheIndex,n=--this._nActiveActions,i=t[n];e._cacheIndex=n,t[n]=e,i._cacheIndex=r,t[r]=i},_addInactiveBinding:function(e,t,r){var n=this._bindingsByRootAndName,i=n[t],a=this._bindings;void 0===i&&(i={},n[t]=i),i[r]=e,e._cacheIndex=a.length,a.push(e)},_removeInactiveBinding:function(e){var t=this._bindings,r=e.binding,n=r.rootNode.uuid,i=r.path,a=this._bindingsByRootAndName,o=a[n],s=t[t.length-1],l=e._cacheIndex;s._cacheIndex=l,t[l]=s,t.pop(),delete o[i];e:{for(var u in o)break e;delete a[n]}},_lendBinding:function(e){var t=this._bindings,r=e._cacheIndex,n=this._nActiveBindings++,i=t[n];e._cacheIndex=n,t[n]=e,i._cacheIndex=r,t[r]=i},_takeBackBinding:function(e){var t=this._bindings,r=e._cacheIndex,n=--this._nActiveBindings,i=t[n];e._cacheIndex=n,t[n]=e,i._cacheIndex=r,t[r]=i},_lendControlInterpolant:function(){var e=this._controlInterpolants,t=this._nActiveControlInterpolants++,r=e[t];return void 0===r&&((r=new Us(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer)).__cacheIndex=t,e[t]=r),r},_takeBackControlInterpolant:function(e){var t=this._controlInterpolants,r=e.__cacheIndex,n=--this._nActiveControlInterpolants,i=t[n];e.__cacheIndex=n,t[n]=e,i.__cacheIndex=r,t[r]=i},_controlInterpolantsResultBuffer:new Float32Array(1),clipAction:function(e,t){var r=t||this._root,n=r.uuid,i="string"==typeof e?js.findByName(r,e):e,a=null!==i?i.uuid:e,o=this._actionsByClip[a],s=null;if(void 0!==o){var l=o.actionByRoot[n];if(void 0!==l)return l;s=o.knownActions[0],null===i&&(i=s._clip)}if(null===i)return null;var u=new Nl(this,i,t);return this._bindAction(u,s),this._addInactiveAction(u,a,n),u},existingAction:function(e,t){var r=t||this._root,n=r.uuid,i="string"==typeof e?js.findByName(r,e):e,a=i?i.uuid:e,o=this._actionsByClip[a];return void 0!==o&&o.actionByRoot[n]||null},stopAllAction:function(){var e=this._actions,t=this._nActiveActions,r=this._bindings,n=this._nActiveBindings;this._nActiveActions=0,this._nActiveBindings=0;for(var i=0;i!==t;++i)e[i].reset();for(i=0;i!==n;++i)r[i].useCount=0;return this},update:function(e){e*=this.timeScale;for(var t=this._actions,r=this._nActiveActions,n=this.time+=e,i=Math.sign(e),a=this._accuIndex^=1,o=0;o!==r;++o)t[o]._update(n,e,i,a);var s=this._bindings,l=this._nActiveBindings;for(o=0;o!==l;++o)s[o].apply(a);return this},getRoot:function(){return this._root},uncacheClip:function(e){var t=this._actions,r=e.uuid,n=this._actionsByClip,i=n[r];if(void 0!==i){for(var a=i.knownActions,o=0,s=a.length;o!==s;++o){var l=a[o];this._deactivateAction(l);var u=l._cacheIndex,c=t[t.length-1];l._cacheIndex=null,l._byClipCacheIndex=null,c._cacheIndex=u,t[u]=c,t.pop(),this._removeInactiveBindingsForAction(l)}delete n[r]}},uncacheRoot:function(e){var t=e.uuid,r=this._actionsByClip;for(var n in r){var i=r[n].actionByRoot[t];void 0!==i&&(this._deactivateAction(i),this._removeInactiveAction(i))}var a=this._bindingsByRootAndName[t];if(void 0!==a)for(var o in a){var s=a[o];s.restoreOriginalState(),this._removeInactiveBinding(s)}},uncacheAction:function(e,t){var r=this.existingAction(e,t);null!==r&&(this._deactivateAction(r),this._removeInactiveAction(r))}}),Dl.prototype.clone=function(){return new Dl(void 0===this.value.clone?this.value:this.value.clone())},Fl.prototype=Object.assign(Object.create(Un.prototype),{constructor:Fl,isInstancedBufferGeometry:!0,copy:function(e){return Un.prototype.copy.call(this,e),this.maxInstancedCount=e.maxInstancedCount,this},clone:function(){return(new this.constructor).copy(this)}}),Object.defineProperties(Bl.prototype,{count:{get:function(){return this.data.count}},array:{get:function(){return this.data.array}}}),Object.assign(Bl.prototype,{isInterleavedBufferAttribute:!0,setX:function(e,t){return this.data.array[e*this.data.stride+this.offset]=t,this},setY:function(e,t){return this.data.array[e*this.data.stride+this.offset+1]=t,this},setZ:function(e,t){return this.data.array[e*this.data.stride+this.offset+2]=t,this},setW:function(e,t){return this.data.array[e*this.data.stride+this.offset+3]=t,this},getX:function(e){return this.data.array[e*this.data.stride+this.offset]},getY:function(e){return this.data.array[e*this.data.stride+this.offset+1]},getZ:function(e){return this.data.array[e*this.data.stride+this.offset+2]},getW:function(e){return this.data.array[e*this.data.stride+this.offset+3]},setXY:function(e,t,r){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=r,this},setXYZ:function(e,t,r,n){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=r,this.data.array[e+2]=n,this},setXYZW:function(e,t,r,n,i){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=r,this.data.array[e+2]=n,this.data.array[e+3]=i,this}}),Object.defineProperty(zl.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}}),Object.assign(zl.prototype,{isInterleavedBuffer:!0,setArray:function(e){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.count=void 0!==e?e.length/this.stride:0,this.array=e},setDynamic:function(e){return this.dynamic=e,this},copy:function(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.dynamic=e.dynamic,this},copyAt:function(e,t,r){e*=this.stride,r*=t.stride;for(var n=0,i=this.stride;n<i;n++)this.array[e+n]=t.array[r+n];return this},set:function(e,t){return void 0===t&&(t=0),this.array.set(e,t),this},clone:function(){return(new this.constructor).copy(this)},onUpload:function(e){return this.onUploadCallback=e,this}}),jl.prototype=Object.assign(Object.create(zl.prototype),{constructor:jl,isInstancedInterleavedBuffer:!0,copy:function(e){return zl.prototype.copy.call(this,e),this.meshPerAttribute=e.meshPerAttribute,this}}),Vl.prototype=Object.assign(Object.create(vn.prototype),{constructor:Vl,isInstancedBufferAttribute:!0,copy:function(e){return vn.prototype.copy.call(this,e),this.meshPerAttribute=e.meshPerAttribute,this}}),Object.assign(Gl.prototype,{linePrecision:1,set:function(e,t){this.ray.set(e,t)},setFromCamera:function(e,t){t&&t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize()):t&&t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld)):n.error("THREE.Raycaster: Unsupported camera type.")},intersectObject:function(e,t){var r=[];return ql(e,this,r,t),r.sort(Wl),r},intersectObjects:function(e,t){var r=[];if(!1===Array.isArray(e))return n.warn("THREE.Raycaster.intersectObjects: objects is not an Array."),r;for(var i=0,a=e.length;i<a;i++)ql(e[i],this,r,t);return r.sort(Wl),r}}),Object.assign(Xl.prototype,{start:function(){this.startTime=("undefined"==typeof performance?Date:performance).now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0},stop:function(){this.getElapsedTime(),this.running=!1,this.autoStart=!1},getElapsedTime:function(){return this.getDelta(),this.elapsedTime},getDelta:function(){var e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){var t=("undefined"==typeof performance?Date:performance).now();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}),Object.assign(Yl.prototype,{set:function(e,t,r){return this.radius=e,this.phi=t,this.theta=r,this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this},makeSafe:function(){var e=1e-6;return this.phi=Math.max(e,Math.min(Math.PI-e,this.phi)),this},setFromVector3:function(e){return this.radius=e.length(),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e.x,e.z),this.phi=Math.acos(Ct.clamp(e.y/this.radius,-1,1))),this}}),Object.assign(Zl.prototype,{set:function(e,t,r){return this.radius=e,this.theta=t,this.y=r,this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this},setFromVector3:function(e){return this.radius=Math.sqrt(e.x*e.x+e.z*e.z),this.theta=Math.atan2(e.x,e.z),this.y=e.y,this}}),Kl.prototype=Object.create(cn.prototype),Kl.prototype.constructor=Kl,Kl.prototype.isImmediateRenderObject=!0,Ql.prototype=Object.create(Ji.prototype),Ql.prototype.constructor=Ql,Ql.prototype.update=function(){var e=new Pt,t=new Pt,r=new Ht;return function(){var n=["a","b","c"];this.object.updateMatrixWorld(!0),r.getNormalMatrix(this.object.matrixWorld);var i=this.object.matrixWorld,a=this.geometry.attributes.position,o=this.object.geometry;if(o&&o.isGeometry)for(var s=o.vertices,l=o.faces,u=0,c=0,h=l.length;c<h;c++)for(var d=l[c],f=0,p=d.vertexNormals.length;f<p;f++){var m=s[d[n[f]]],g=d.vertexNormals[f];e.copy(m).applyMatrix4(i),t.copy(g).applyMatrix3(r).normalize().multiplyScalar(this.size).add(e),a.setXYZ(u,e.x,e.y,e.z),u+=1,a.setXYZ(u,t.x,t.y,t.z),u+=1}else if(o&&o.isBufferGeometry){var v=o.attributes.position,y=o.attributes.normal;for(u=0,f=0,p=v.count;f<p;f++)e.set(v.getX(f),v.getY(f),v.getZ(f)).applyMatrix4(i),t.set(y.getX(f),y.getY(f),y.getZ(f)),t.applyMatrix3(r).normalize().multiplyScalar(this.size).add(e),a.setXYZ(u,e.x,e.y,e.z),u+=1,a.setXYZ(u,t.x,t.y,t.z),u+=1}a.needsUpdate=!0}}(),Jl.prototype=Object.create(cn.prototype),Jl.prototype.constructor=Jl,Jl.prototype.dispose=function(){this.cone.geometry.dispose(),this.cone.material.dispose()},Jl.prototype.update=function(){var e=new Pt,t=new Pt;return function(){this.light.updateMatrixWorld();var r=this.light.distance?this.light.distance:1e3,n=r*Math.tan(this.light.angle);this.cone.scale.set(n,n,r),e.setFromMatrixPosition(this.light.matrixWorld),t.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(t.sub(e)),void 0!==this.color?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}(),eu.prototype=Object.create(Ji.prototype),eu.prototype.constructor=eu,eu.prototype.updateMatrixWorld=function(){var e=new Pt,t=new Ot,r=new Ot;return function(n){var i=this.bones,a=this.geometry,o=a.getAttribute("position");r.getInverse(this.root.matrixWorld);for(var s=0,l=0;s<i.length;s++){var u=i[s];u.parent&&u.parent.isBone&&(t.multiplyMatrices(r,u.matrixWorld),e.setFromMatrixPosition(t),o.setXYZ(l,e.x,e.y,e.z),t.multiplyMatrices(r,u.parent.matrixWorld),e.setFromMatrixPosition(t),o.setXYZ(l+1,e.x,e.y,e.z),l+=2)}a.getAttribute("position").needsUpdate=!0,cn.prototype.updateMatrixWorld.call(this,n)}}(),tu.prototype=Object.create(Xn.prototype),tu.prototype.constructor=tu,tu.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose()},tu.prototype.update=function(){void 0!==this.color?this.material.color.set(this.color):this.material.color.copy(this.light.color)},ru.prototype=Object.create(cn.prototype),ru.prototype.constructor=ru,ru.prototype.dispose=function(){this.children[0].geometry.dispose(),this.children[0].material.dispose()},ru.prototype.update=function(){var e=.5*this.light.width,t=.5*this.light.height,r=this.line.geometry.attributes.position,n=r.array;n[0]=e,n[1]=-t,n[2]=0,n[3]=e,n[4]=t,n[5]=0,n[6]=-e,n[7]=t,n[8]=0,n[9]=-e,n[10]=-t,n[11]=0,n[12]=e,n[13]=-t,n[14]=0,r.needsUpdate=!0,void 0!==this.color?this.line.material.color.set(this.color):this.line.material.color.copy(this.light.color)},nu.prototype=Object.create(cn.prototype),nu.prototype.constructor=nu,nu.prototype.dispose=function(){this.children[0].geometry.dispose(),this.children[0].material.dispose()},nu.prototype.update=function(){var e=new Pt,t=new Lr,r=new Lr;return function(){var n=this.children[0];if(void 0!==this.color)this.material.color.set(this.color);else{var i=n.geometry.getAttribute("color");t.copy(this.light.color),r.copy(this.light.groundColor);for(var a=0,o=i.count;a<o;a++){var s=a<o/2?t:r;i.setXYZ(a,s.r,s.g,s.b)}i.needsUpdate=!0}n.lookAt(e.setFromMatrixPosition(this.light.matrixWorld).negate())}}(),iu.prototype=Object.create(Ji.prototype),iu.prototype.constructor=iu,au.prototype=Object.create(Ji.prototype),au.prototype.constructor=au,ou.prototype=Object.create(Ji.prototype),ou.prototype.constructor=ou,ou.prototype.update=function(){var e=new Pt,t=new Pt,r=new Ht;return function(){this.object.updateMatrixWorld(!0),r.getNormalMatrix(this.object.matrixWorld);for(var n=this.object.matrixWorld,i=this.geometry.attributes.position,a=this.object.geometry,o=a.vertices,s=a.faces,l=0,u=0,c=s.length;u<c;u++){var h=s[u],d=h.normal;e.copy(o[h.a]).add(o[h.b]).add(o[h.c]).divideScalar(3).applyMatrix4(n),t.copy(d).applyMatrix3(r).normalize().multiplyScalar(this.size).add(e),i.setXYZ(l,e.x,e.y,e.z),l+=1,i.setXYZ(l,t.x,t.y,t.z),l+=1}i.needsUpdate=!0}}(),su.prototype=Object.create(cn.prototype),su.prototype.constructor=su,su.prototype.dispose=function(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()},su.prototype.update=function(){var e=new Pt,t=new Pt,r=new Pt;return function(){e.setFromMatrixPosition(this.light.matrixWorld),t.setFromMatrixPosition(this.light.target.matrixWorld),r.subVectors(t,e),this.lightPlane.lookAt(r),void 0!==this.color?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(r),this.targetLine.scale.z=r.length()}}(),lu.prototype=Object.create(Ji.prototype),lu.prototype.constructor=lu,lu.prototype.update=function(){var e,t,r=new Pt,n=new hn;function i(i,a,o,s){r.set(a,o,s).unproject(n);var l=t[i];if(void 0!==l)for(var u=e.getAttribute("position"),c=0,h=l.length;c<h;c++)u.setXYZ(l[c],r.x,r.y,r.z)}return function(){e=this.geometry,t=this.pointMap;var r=1,a=1;n.projectionMatrix.copy(this.camera.projectionMatrix),i("c",0,0,-1),i("t",0,0,1),i("n1",-r,-a,-1),i("n2",r,-a,-1),i("n3",-r,a,-1),i("n4",r,a,-1),i("f1",-r,-a,1),i("f2",r,-a,1),i("f3",-r,a,1),i("f4",r,a,1),i("u1",.7*r,1.1*a,-1),i("u2",.7*-r,1.1*a,-1),i("u3",0,2*a,-1),i("cf1",-r,0,1),i("cf2",r,0,1),i("cf3",0,-a,1),i("cf4",0,a,1),i("cn1",-r,0,-1),i("cn2",r,0,-1),i("cn3",0,-a,-1),i("cn4",0,a,-1),e.getAttribute("position").needsUpdate=!0}}(),uu.prototype=Object.create(Ji.prototype),uu.prototype.constructor=uu,uu.prototype.update=function(){var e=new Kr;return function(t){if(void 0!==t&&n.warn("THREE.BoxHelper: .update() has no longer arguments."),void 0!==this.object&&e.setFromObject(this.object),!e.isEmpty()){var r=e.min,i=e.max,a=this.geometry.attributes.position,o=a.array;o[0]=i.x,o[1]=i.y,o[2]=i.z,o[3]=r.x,o[4]=i.y,o[5]=i.z,o[6]=r.x,o[7]=r.y,o[8]=i.z,o[9]=i.x,o[10]=r.y,o[11]=i.z,o[12]=i.x,o[13]=i.y,o[14]=r.z,o[15]=r.x,o[16]=i.y,o[17]=r.z,o[18]=r.x,o[19]=r.y,o[20]=r.z,o[21]=i.x,o[22]=r.y,o[23]=r.z,a.needsUpdate=!0,this.geometry.computeBoundingSphere()}}}(),uu.prototype.setFromObject=function(e){return this.object=e,this.update(),this},cu.prototype=Object.create(Ji.prototype),cu.prototype.constructor=cu,cu.prototype.updateMatrixWorld=function(e){var t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),cn.prototype.updateMatrixWorld.call(this,e))},hu.prototype=Object.create(Qi.prototype),hu.prototype.constructor=hu,hu.prototype.updateMatrixWorld=function(e){var t=-this.plane.constant;Math.abs(t)<1e-8&&(t=1e-8),this.scale.set(.5*this.size,.5*this.size,t),this.lookAt(this.plane.normal),cn.prototype.updateMatrixWorld.call(this,e)},du.prototype=Object.create(cn.prototype),du.prototype.constructor=du,du.prototype.setDirection=(hl=new Pt,function(e){e.y>.99999?this.quaternion.set(0,0,0,1):e.y<-.99999?this.quaternion.set(1,0,0,0):(hl.set(e.z,0,-e.x).normalize(),cl=Math.acos(e.y),this.quaternion.setFromAxisAngle(hl,cl))}),du.prototype.setLength=function(e,t,r){void 0===t&&(t=.2*e),void 0===r&&(r=.2*t),this.line.scale.set(1,Math.max(0,e-t),1),this.line.updateMatrix(),this.cone.scale.set(r,t,r),this.cone.position.y=e,this.cone.updateMatrix()},du.prototype.setColor=function(e){this.line.material.color.copy(e),this.cone.material.color.copy(e)},fu.prototype=Object.create(Ji.prototype),fu.prototype.constructor=fu;var pu={createMultiMaterialObject:function(e,t){for(var r=new ra,n=0,i=t.length;n<i;n++)r.add(new Xn(e,t[n]));return r},detach:function(e,t,r){e.applyMatrix(t.matrixWorld),t.remove(e),r.add(e)},attach:function(e,t,r){e.applyMatrix((new Ot).getInverse(r.matrixWorld)),t.remove(e),r.add(e)}};function mu(e,t,r,i,a,o,s){return n.warn("THREE.Face4 has been removed. A THREE.Face3 will be created instead."),new fn(e,t,r,a,o,s)}var gu=0,vu=1;function yu(e){return n.warn("THREE.MeshFaceMaterial has been removed. Use an Array instead."),e}function bu(e){return void 0===e&&(e=[]),n.warn("THREE.MultiMaterial has been removed. Use an Array instead."),e.isMultiMaterial=!0,e.materials=e,e.clone=function(){return e.slice()},e}function Eu(e,t){return n.warn("THREE.PointCloud has been renamed to THREE.Points."),new ta(e,t)}function xu(e){return n.warn("THREE.Particle has been renamed to THREE.Sprite."),new Wi(e)}function wu(e,t){return n.warn("THREE.ParticleSystem has been renamed to THREE.Points."),new ta(e,t)}function Tu(e){return n.warn("THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial."),new ea(e)}function _u(e){return n.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial."),new ea(e)}function Su(e){return n.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial."),new ea(e)}function Mu(e,t,r){return n.warn("THREE.Vertex has been removed. Use THREE.Vector3 instead."),new Pt(e,t,r)}function Ru(e,t){return n.warn("THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setDynamic( true ) instead."),new vn(e,t).setDynamic(!0)}function Au(e,t){return n.warn("THREE.Int8Attribute has been removed. Use new THREE.Int8BufferAttribute() instead."),new yn(e,t)}function Cu(e,t){return n.warn("THREE.Uint8Attribute has been removed. Use new THREE.Uint8BufferAttribute() instead."),new bn(e,t)}function Lu(e,t){return n.warn("THREE.Uint8ClampedAttribute has been removed. Use new THREE.Uint8ClampedBufferAttribute() instead."),new En(e,t)}function Ou(e,t){return n.warn("THREE.Int16Attribute has been removed. Use new THREE.Int16BufferAttribute() instead."),new xn(e,t)}function Iu(e,t){return n.warn("THREE.Uint16Attribute has been removed. Use new THREE.Uint16BufferAttribute() instead."),new wn(e,t)}function Pu(e,t){return n.warn("THREE.Int32Attribute has been removed. Use new THREE.Int32BufferAttribute() instead."),new Tn(e,t)}function Hu(e,t){return n.warn("THREE.Uint32Attribute has been removed. Use new THREE.Uint32BufferAttribute() instead."),new _n(e,t)}function ku(e,t){return n.warn("THREE.Float32Attribute has been removed. Use new THREE.Float32BufferAttribute() instead."),new Sn(e,t)}function Nu(e,t){return n.warn("THREE.Float64Attribute has been removed. Use new THREE.Float64BufferAttribute() instead."),new Mn(e,t)}function Uu(e){n.warn("THREE.ClosedSplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),Qo.call(this,e),this.type="catmullrom",this.closed=!0}function Du(e){n.warn("THREE.SplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),Qo.call(this,e),this.type="catmullrom"}function Fu(e){n.warn("THREE.Spline has been removed. Use THREE.CatmullRomCurve3 instead."),Qo.call(this,e),this.type="catmullrom"}function Bu(e){return n.warn("THREE.AxisHelper has been renamed to THREE.AxesHelper."),new fu(e)}function zu(e,t){return n.warn("THREE.BoundingBoxHelper has been deprecated. Creating a THREE.BoxHelper instead."),new uu(e,t)}function ju(e,t){return n.warn("THREE.EdgesHelper has been removed. Use THREE.EdgesGeometry instead."),new Ji(new mo(e.geometry),new Ki({color:void 0!==t?t:16777215}))}function Vu(e,t){return n.warn("THREE.WireframeHelper has been removed. Use THREE.WireframeGeometry instead."),new Ji(new oa(e.geometry),new Ki({color:void 0!==t?t:16777215}))}function Gu(e){return n.warn("THREE.XHRLoader has been renamed to THREE.FileLoader."),new Uo(e)}function Wu(e){return n.warn("THREE.BinaryTextureLoader has been renamed to THREE.DataTextureLoader."),new Fo(e)}Vo.create=function(e,t){return n.log("THREE.Curve.create() has been deprecated"),e.prototype=Object.create(Vo.prototype),e.prototype.constructor=e,e.prototype.getPoint=t,e},Object.assign(gs.prototype,{createPointsGeometry:function(e){n.warn("THREE.CurvePath: .createPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");var t=this.getPoints(e);return this.createGeometry(t)},createSpacedPointsGeometry:function(e){n.warn("THREE.CurvePath: .createSpacedPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");var t=this.getSpacedPoints(e);return this.createGeometry(t)},createGeometry:function(e){n.warn("THREE.CurvePath: .createGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");for(var t=new gn,r=0,i=e.length;r<i;r++){var a=e[r];t.vertices.push(new Pt(a.x,a.y,a.z||0))}return t}}),Object.assign(vs.prototype,{fromPoints:function(e){n.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(e)}}),Uu.prototype=Object.create(Qo.prototype),Du.prototype=Object.create(Qo.prototype),Fu.prototype=Object.create(Qo.prototype),Object.assign(Fu.prototype,{initFromArray:function(){n.error("THREE.Spline: .initFromArray() has been removed.")},getControlPointsArray:function(){n.error("THREE.Spline: .getControlPointsArray() has been removed.")},reparametrizeByArcLength:function(){n.error("THREE.Spline: .reparametrizeByArcLength() has been removed.")}}),iu.prototype.setColors=function(){n.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")},eu.prototype.update=function(){n.error("THREE.SkeletonHelper: update() no longer needs to be called.")},Object.assign(Ks.prototype,{extractUrlBase:function(e){return n.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),Qs.extractUrlBase(e)}}),Object.assign(kr.prototype,{center:function(e){return n.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(e)},empty:function(){return n.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(e){return n.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},size:function(e){return n.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(e)}}),Object.assign(Kr.prototype,{center:function(e){return n.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(e)},empty:function(){return n.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(e){return n.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},isIntersectionSphere:function(e){return n.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)},size:function(e){return n.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(e)}}),Wn.prototype.center=function(e){return n.warn("THREE.Line3: .center() has been renamed to .getCenter()."),this.getCenter(e)},Object.assign(Ct,{random16:function(){return n.warn("THREE.Math: .random16() has been deprecated. Use Math.random() instead."),Math.random()},nearestPowerOfTwo:function(e){return n.warn("THREE.Math: .nearestPowerOfTwo() has been renamed to .floorPowerOfTwo()."),Ct.floorPowerOfTwo(e)},nextPowerOfTwo:function(e){return n.warn("THREE.Math: .nextPowerOfTwo() has been renamed to .ceilPowerOfTwo()."),Ct.ceilPowerOfTwo(e)}}),Object.assign(Ht.prototype,{flattenToArrayOffset:function(e,t){return n.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(e,t)},multiplyVector3:function(e){return n.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),e.applyMatrix3(this)},multiplyVector3Array:function(){n.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},applyToBuffer:function(e){return n.warn("THREE.Matrix3: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead."),this.applyToBufferAttribute(e)},applyToVector3Array:function(){n.error("THREE.Matrix3: .applyToVector3Array() has been removed.")}}),Object.assign(Ot.prototype,{extractPosition:function(e){return n.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(e)},flattenToArrayOffset:function(e,t){return n.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(e,t)},getPosition:function(){var e;return function(){return void 0===e&&(e=new Pt),n.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),e.setFromMatrixColumn(this,3)}}(),setRotationFromQuaternion:function(e){return n.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(e)},multiplyToArray:function(){n.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},multiplyVector3:function(e){return n.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},multiplyVector4:function(e){return n.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},multiplyVector3Array:function(){n.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},rotateAxis:function(e){n.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),e.transformDirection(this)},crossVector:function(e){return n.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},translate:function(){n.error("THREE.Matrix4: .translate() has been removed.")},rotateX:function(){n.error("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function(){n.error("THREE.Matrix4: .rotateY() has been removed.")},rotateZ:function(){n.error("THREE.Matrix4: .rotateZ() has been removed.")},rotateByAxis:function(){n.error("THREE.Matrix4: .rotateByAxis() has been removed.")},applyToBuffer:function(e){return n.warn("THREE.Matrix4: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead."),this.applyToBufferAttribute(e)},applyToVector3Array:function(){n.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},makeFrustum:function(e,t,r,i,a,o){return n.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(e,t,i,r,a,o)}}),Jr.prototype.isIntersectionLine=function(e){return n.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(e)},It.prototype.multiplyVector3=function(e){return n.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),e.applyQuaternion(this)},Object.assign(Gn.prototype,{isIntersectionBox:function(e){return n.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},isIntersectionPlane:function(e){return n.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(e)},isIntersectionSphere:function(e){return n.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)}}),Object.assign(ys.prototype,{extractAllPoints:function(e){return n.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(e)},extrude:function(e){return n.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new to(this,e)},makeGeometry:function(e){return n.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new ho(this,e)}}),Object.assign(Lt.prototype,{fromAttribute:function(e,t,r){return n.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,r)},distanceToManhattan:function(e){return n.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(e)},lengthManhattan:function(){return n.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(Pt.prototype,{setEulerFromRotationMatrix:function(){n.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(){n.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(e){return n.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(e)},getScaleFromMatrix:function(e){return n.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(e)},getColumnFromMatrix:function(e,t){return n.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(t,e)},applyProjection:function(e){return n.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(e)},fromAttribute:function(e,t,r){return n.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,r)},distanceToManhattan:function(e){return n.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(e)},lengthManhattan:function(){return n.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(Ut.prototype,{fromAttribute:function(e,t,r){return n.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,r)},lengthManhattan:function(){return n.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),gn.prototype.computeTangents=function(){n.warn("THREE.Geometry: .computeTangents() has been removed.")},Object.assign(cn.prototype,{getChildByName:function(e){return n.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(e)},renderDepth:function(){n.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},translate:function(e,t){return n.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(t,e)}}),Object.defineProperties(cn.prototype,{eulerOrder:{get:function(){return n.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(e){n.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=e}},useQuaternion:{get:function(){n.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){n.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}}),Object.defineProperties(qi.prototype,{objects:{get:function(){return n.warn("THREE.LOD: .objects has been renamed to .levels."),this.levels}}}),Object.defineProperty(Xi.prototype,"useVertexTexture",{get:function(){n.warn("THREE.Skeleton: useVertexTexture has been removed.")},set:function(){n.warn("THREE.Skeleton: useVertexTexture has been removed.")}}),Object.defineProperty(Vo.prototype,"__arcLengthDivisions",{get:function(){return n.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions},set:function(e){n.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions=e}}),Pi.prototype.setLens=function(e,t){n.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),void 0!==t&&(this.filmGauge=t),this.setFocalLength(e)},Object.defineProperties(bs.prototype,{onlyShadow:{set:function(){n.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(e){n.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=e}},shadowCameraLeft:{set:function(e){n.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=e}},shadowCameraRight:{set:function(e){n.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=e}},shadowCameraTop:{set:function(e){n.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=e}},shadowCameraBottom:{set:function(e){n.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=e}},shadowCameraNear:{set:function(e){n.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=e}},shadowCameraFar:{set:function(e){n.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=e}},shadowCameraVisible:{set:function(){n.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(e){n.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=e}},shadowDarkness:{set:function(){n.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(e){n.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=e}},shadowMapHeight:{set:function(e){n.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=e}}}),Object.defineProperties(vn.prototype,{length:{get:function(){return n.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}}}),Object.assign(Un.prototype,{addIndex:function(e){n.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(e)},addDrawCall:function(e,t,r){void 0!==r&&n.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),n.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(e,t)},clearDrawCalls:function(){n.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},computeTangents:function(){n.warn("THREE.BufferGeometry: .computeTangents() has been removed.")},computeOffsets:function(){n.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")}}),Object.defineProperties(Un.prototype,{drawcalls:{get:function(){return n.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return n.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}}),Object.defineProperties(Dl.prototype,{dynamic:{set:function(){n.warn("THREE.Uniform: .dynamic has been removed. Use object.onBeforeRender() instead.")}},onUpdate:{value:function(){return n.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this}}}),Object.defineProperties(Xr.prototype,{wrapAround:{get:function(){n.warn("THREE.Material: .wrapAround has been removed.")},set:function(){n.warn("THREE.Material: .wrapAround has been removed.")}},wrapRGB:{get:function(){return n.warn("THREE.Material: .wrapRGB has been removed."),new Lr}},shading:{get:function(){n.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(e){n.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=e===M}}}),Object.defineProperties(Ro.prototype,{metal:{get:function(){return n.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead."),!1},set:function(){n.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead")}}}),Object.defineProperties(Vn.prototype,{derivatives:{get:function(){return n.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(e){n.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=e}}}),Object.assign(Fi.prototype,{getCurrentRenderTarget:function(){return n.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()},getMaxAnisotropy:function(){return n.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()},getPrecision:function(){return n.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision},resetGLState:function(){return n.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()},supportsFloatTextures:function(){return n.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},supportsHalfFloatTextures:function(){return n.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},supportsStandardDerivatives:function(){return n.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},supportsCompressedTextureS3TC:function(){return n.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},supportsCompressedTexturePVRTC:function(){return n.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},supportsBlendMinMax:function(){return n.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},supportsVertexTextures:function(){return n.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},supportsInstancedArrays:function(){return n.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},enableScissorTest:function(e){n.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(e)},initMaterial:function(){n.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},addPrePlugin:function(){n.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},addPostPlugin:function(){n.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},updateShadowMap:function(){n.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")}}),Object.defineProperties(Fi.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(e){n.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=e}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(e){n.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=e}},shadowMapCullFace:{get:function(){return this.shadowMap.cullFace},set:function(e){n.warn("THREE.WebGLRenderer: .shadowMapCullFace is now .shadowMap.cullFace."),this.shadowMap.cullFace=e}}}),Object.defineProperties(en.prototype,{cullFace:{get:function(){return this.renderReverseSided?g:m},set:function(e){var t=e!==m;n.warn("WebGLRenderer: .shadowMap.cullFace is deprecated. Set .shadowMap.renderReverseSided to "+t+"."),this.renderReverseSided=t}}}),Object.defineProperties(Dt.prototype,{wrapS:{get:function(){return n.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(e){n.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=e}},wrapT:{get:function(){return n.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(e){n.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=e}},magFilter:{get:function(){return n.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(e){n.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=e}},minFilter:{get:function(){return n.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(e){n.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=e}},anisotropy:{get:function(){return n.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(e){n.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=e}},offset:{get:function(){return n.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(e){n.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=e}},repeat:{get:function(){return n.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(e){n.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=e}},format:{get:function(){return n.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(e){n.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=e}},type:{get:function(){return n.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(e){n.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=e}},generateMipmaps:{get:function(){return n.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(e){n.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=e}}}),Object.assign(ki.prototype,{getStandingMatrix:function(){n.warn("THREE.WebVRManager: .getStandingMatrix() has been removed.")}}),Object.defineProperties(ki.prototype,{standing:{set:function(){n.warn("THREE.WebVRManager: .standing has been removed.")}}}),Cl.prototype.load=function(e){n.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");var t=this;return(new Sl).load(e,(function(e){t.setBuffer(e)})),this},Ol.prototype.getData=function(){return n.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData()."),this.getFrequencyData()},Rl.prototype.updateCubeMap=function(e,t){return n.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(e,t)};var qu={merge:function(e,t,r){var i;n.warn("THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead."),t.isMesh&&(t.matrixAutoUpdate&&t.updateMatrix(),i=t.matrix,t=t.geometry),e.merge(t,i,r)},center:function(e){return n.warn("THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead."),e.center()}},Xu={crossOrigin:void 0,loadTexture:function(e,t,r,i){n.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");var a=new jo;a.setCrossOrigin(this.crossOrigin);var o=a.load(e,r,void 0,i);return t&&(o.mapping=t),o},loadTextureCube:function(e,t,r,i){n.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");var a=new zo;a.setCrossOrigin(this.crossOrigin);var o=a.load(e,r,void 0,i);return t&&(o.mapping=t),o},loadCompressedTexture:function(){n.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},loadCompressedTextureCube:function(){n.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")}};function Yu(){n.error("THREE.Projector has been moved to /examples/js/renderers/Projector.js."),this.projectVector=function(e,t){n.warn("THREE.Projector: .projectVector() is now vector.project()."),e.project(t)},this.unprojectVector=function(e,t){n.warn("THREE.Projector: .unprojectVector() is now vector.unproject()."),e.unproject(t)},this.pickingRay=function(){n.error("THREE.Projector: .pickingRay() is now raycaster.setFromCamera().")}}function Zu(){n.error("THREE.CanvasRenderer has been moved to /examples/js/renderers/CanvasRenderer.js"),this.domElement=document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),this.clear=function(){},this.render=function(){},this.setClearColor=function(){},this.setSize=function(){}}e.WebGLRenderTargetCube=Ft,e.WebGLRenderTarget=Dt,e.WebGLRenderer=Fi,e.ShaderLib=Hr,e.UniformsLib=Or,e.UniformsUtils=Ir,e.ShaderChunk=Pr,e.FogExp2=Bi,e.Fog=zi,e.Scene=ji,e.LensFlare=Vi,e.Sprite=Wi,e.LOD=qi,e.SkinnedMesh=Zi,e.Skeleton=Xi,e.Bone=Yi,e.Mesh=Xn,e.LineSegments=Ji,e.LineLoop=$i,e.Line=Qi,e.Points=ta,e.Group=ra,e.VideoTexture=na,e.DataTexture=Bt,e.CompressedTexture=ia,e.CubeTexture=zt,e.CanvasTexture=Ur,e.DepthTexture=aa,e.Texture=Nt,e.CompressedTextureLoader=Do,e.DataTextureLoader=Fo,e.CubeTextureLoader=zo,e.TextureLoader=jo,e.ObjectLoader=$s,e.MaterialLoader=Vs,e.BufferGeometryLoader=Gs,e.DefaultLoadingManager=ko,e.LoadingManager=Ho,e.JSONLoader=Js,e.ImageLoader=Bo,e.ImageBitmapLoader=il,e.FontLoader=sl,e.FileLoader=Uo,e.Loader=Ks,e.LoaderUtils=Qs,e.Cache=Po,e.AudioLoader=Sl,e.SpotLightShadow=ws,e.SpotLight=Ts,e.PointLight=_s,e.RectAreaLight=As,e.HemisphereLight=Es,e.DirectionalLightShadow=Ss,e.DirectionalLight=Ms,e.AmbientLight=Rs,e.LightShadow=xs,e.Light=bs,e.StereoCamera=Ml,e.PerspectiveCamera=Pi,e.OrthographicCamera=dn,e.CubeCamera=Rl,e.ArrayCamera=Hi,e.Camera=hn,e.AudioListener=Al,e.PositionalAudio=Ll,e.AudioContext=_l,e.AudioAnalyser=Ol,e.Audio=Cl,e.VectorKeyframeTrack=zs,e.StringKeyframeTrack=Cs,e.QuaternionKeyframeTrack=Ps,e.NumberKeyframeTrack=ks,e.ColorKeyframeTrack=Hs,e.BooleanKeyframeTrack=Ls,e.PropertyMixer=Il,e.PropertyBinding=Hl,e.KeyframeTrack=Bs,e.AnimationUtils=Fs,e.AnimationObjectGroup=kl,e.AnimationMixer=Ul,e.AnimationClip=js,e.Uniform=Dl,e.InstancedBufferGeometry=Fl,e.BufferGeometry=Un,e.Geometry=gn,e.InterleavedBufferAttribute=Bl,e.InstancedInterleavedBuffer=jl,e.InterleavedBuffer=zl,e.InstancedBufferAttribute=Vl,e.Face3=fn,e.Object3D=cn,e.Raycaster=Gl,e.Layers=nn,e.EventDispatcher=t,e.Clock=Xl,e.QuaternionLinearInterpolant=Is,e.LinearInterpolant=Us,e.DiscreteInterpolant=Ds,e.CubicInterpolant=Ns,e.Interpolant=Os,e.Triangle=qn,e.Math=Ct,e.Spherical=Yl,e.Cylindrical=Zl,e.Plane=Jr,e.Frustum=$r,e.Sphere=Qr,e.Ray=Gn,e.Matrix4=Ot,e.Matrix3=Ht,e.Box3=Kr,e.Box2=kr,e.Line3=Wn,e.Euler=rn,e.Vector4=Ut,e.Vector3=Pt,e.Vector2=Lt,e.Quaternion=It,e.Color=Lr,e.ImmediateRenderObject=Kl,e.VertexNormalsHelper=Ql,e.SpotLightHelper=Jl,e.SkeletonHelper=eu,e.PointLightHelper=tu,e.RectAreaLightHelper=ru,e.HemisphereLightHelper=nu,e.GridHelper=iu,e.PolarGridHelper=au,e.FaceNormalsHelper=ou,e.DirectionalLightHelper=su,e.CameraHelper=lu,e.BoxHelper=uu,e.Box3Helper=cu,e.PlaneHelper=hu,e.ArrowHelper=du,e.AxesHelper=fu,e.Shape=ys,e.Path=vs,e.ShapePath=al,e.Font=ol,e.CurvePath=gs,e.Curve=Vo,e.ShapeUtils=eo,e.SceneUtils=pu,e.WebGLUtils=Di,e.WireframeGeometry=oa,e.ParametricGeometry=sa,e.ParametricBufferGeometry=la,e.TetrahedronGeometry=ha,e.TetrahedronBufferGeometry=da,e.OctahedronGeometry=fa,e.OctahedronBufferGeometry=pa,e.IcosahedronGeometry=ma,e.IcosahedronBufferGeometry=ga,e.DodecahedronGeometry=va,e.DodecahedronBufferGeometry=ya,e.PolyhedronGeometry=ua,e.PolyhedronBufferGeometry=ca,e.TubeGeometry=ba,e.TubeBufferGeometry=Ea,e.TorusKnotGeometry=xa,e.TorusKnotBufferGeometry=wa,e.TorusGeometry=Ta,e.TorusBufferGeometry=_a,e.TextGeometry=no,e.TextBufferGeometry=io,e.SphereGeometry=ao,e.SphereBufferGeometry=oo,e.RingGeometry=so,e.RingBufferGeometry=lo,e.PlaneGeometry=Bn,e.PlaneBufferGeometry=zn,e.LatheGeometry=uo,e.LatheBufferGeometry=co,e.ShapeGeometry=ho,e.ShapeBufferGeometry=fo,e.ExtrudeGeometry=to,e.ExtrudeBufferGeometry=ro,e.EdgesGeometry=mo,e.ConeGeometry=yo,e.ConeBufferGeometry=bo,e.CylinderGeometry=go,e.CylinderBufferGeometry=vo,e.CircleGeometry=Eo,e.CircleBufferGeometry=xo,e.BoxGeometry=Dn,e.BoxBufferGeometry=Fn,e.ShadowMaterial=To,e.SpriteMaterial=Gi,e.RawShaderMaterial=_o,e.ShaderMaterial=Vn,e.PointsMaterial=ea,e.MeshPhysicalMaterial=Mo,e.MeshStandardMaterial=So,e.MeshPhongMaterial=Ro,e.MeshToonMaterial=Ao,e.MeshNormalMaterial=Co,e.MeshLambertMaterial=Lo,e.MeshDepthMaterial=Yr,e.MeshDistanceMaterial=Zr,e.MeshBasicMaterial=jn,e.LineDashedMaterial=Oo,e.LineBasicMaterial=Ki,e.Material=Xr,e.Float64BufferAttribute=Mn,e.Float32BufferAttribute=Sn,e.Uint32BufferAttribute=_n,e.Int32BufferAttribute=Tn,e.Uint16BufferAttribute=wn,e.Int16BufferAttribute=xn,e.Uint8ClampedBufferAttribute=En,e.Uint8BufferAttribute=bn,e.Int8BufferAttribute=yn,e.BufferAttribute=vn,e.ArcCurve=Wo,e.CatmullRomCurve3=Qo,e.CubicBezierCurve=ls,e.CubicBezierCurve3=us,e.EllipseCurve=Go,e.LineCurve=cs,e.LineCurve3=hs,e.QuadraticBezierCurve=ds,e.QuadraticBezierCurve3=fs,e.SplineCurve=ps,e.REVISION=d,e.MOUSE=f,e.CullFaceNone=p,e.CullFaceBack=m,e.CullFaceFront=g,e.CullFaceFrontBack=v,e.FrontFaceDirectionCW=y,e.FrontFaceDirectionCCW=b,e.BasicShadowMap=E,e.PCFShadowMap=x,e.PCFSoftShadowMap=w,e.FrontSide=T,e.BackSide=_,e.DoubleSide=S,e.FlatShading=M,e.SmoothShading=R,e.NoColors=A,e.FaceColors=C,e.VertexColors=L,e.NoBlending=O,e.NormalBlending=I,e.AdditiveBlending=P,e.SubtractiveBlending=H,e.MultiplyBlending=k,e.CustomBlending=N,e.AddEquation=U,e.SubtractEquation=D,e.ReverseSubtractEquation=F,e.MinEquation=B,e.MaxEquation=z,e.ZeroFactor=j,e.OneFactor=V,e.SrcColorFactor=G,e.OneMinusSrcColorFactor=W,e.SrcAlphaFactor=q,e.OneMinusSrcAlphaFactor=X,e.DstAlphaFactor=Y,e.OneMinusDstAlphaFactor=Z,e.DstColorFactor=K,e.OneMinusDstColorFactor=Q,e.SrcAlphaSaturateFactor=J,e.NeverDepth=$,e.AlwaysDepth=ee,e.LessDepth=te,e.LessEqualDepth=re,e.EqualDepth=ne,e.GreaterEqualDepth=ie,e.GreaterDepth=ae,e.NotEqualDepth=oe,e.MultiplyOperation=se,e.MixOperation=le,e.AddOperation=ue,e.NoToneMapping=ce,e.LinearToneMapping=he,e.ReinhardToneMapping=de,e.Uncharted2ToneMapping=fe,e.CineonToneMapping=pe,e.UVMapping=me,e.CubeReflectionMapping=ge,e.CubeRefractionMapping=ve,e.EquirectangularReflectionMapping=ye,e.EquirectangularRefractionMapping=be,e.SphericalReflectionMapping=Ee,e.CubeUVReflectionMapping=xe,e.CubeUVRefractionMapping=we,e.RepeatWrapping=Te,e.ClampToEdgeWrapping=_e,e.MirroredRepeatWrapping=Se,e.NearestFilter=Me,e.NearestMipMapNearestFilter=Re,e.NearestMipMapLinearFilter=Ae,e.LinearFilter=Ce,e.LinearMipMapNearestFilter=Le,e.LinearMipMapLinearFilter=Oe,e.UnsignedByteType=Ie,e.ByteType=Pe,e.ShortType=He,e.UnsignedShortType=ke,e.IntType=Ne,e.UnsignedIntType=Ue,e.FloatType=De,e.HalfFloatType=Fe,e.UnsignedShort4444Type=Be,e.UnsignedShort5551Type=ze,e.UnsignedShort565Type=je,e.UnsignedInt248Type=Ve,e.AlphaFormat=Ge,e.RGBFormat=We,e.RGBAFormat=qe,e.LuminanceFormat=Xe,e.LuminanceAlphaFormat=Ye,e.RGBEFormat=Ze,e.DepthFormat=Ke,e.DepthStencilFormat=Qe,e.RGB_S3TC_DXT1_Format=Je,e.RGBA_S3TC_DXT1_Format=$e,e.RGBA_S3TC_DXT3_Format=et,e.RGBA_S3TC_DXT5_Format=tt,e.RGB_PVRTC_4BPPV1_Format=rt,e.RGB_PVRTC_2BPPV1_Format=nt,e.RGBA_PVRTC_4BPPV1_Format=it,e.RGBA_PVRTC_2BPPV1_Format=at,e.RGB_ETC1_Format=ot,e.LoopOnce=st,e.LoopRepeat=lt,e.LoopPingPong=ut,e.InterpolateDiscrete=ct,e.InterpolateLinear=ht,e.InterpolateSmooth=dt,e.ZeroCurvatureEnding=ft,e.ZeroSlopeEnding=pt,e.WrapAroundEnding=mt,e.TrianglesDrawMode=gt,e.TriangleStripDrawMode=vt,e.TriangleFanDrawMode=yt,e.LinearEncoding=bt,e.sRGBEncoding=Et,e.GammaEncoding=xt,e.RGBEEncoding=wt,e.LogLuvEncoding=Tt,e.RGBM7Encoding=_t,e.RGBM16Encoding=St,e.RGBDEncoding=Mt,e.BasicDepthPacking=Rt,e.RGBADepthPacking=At,e.CubeGeometry=Dn,e.Face4=mu,e.LineStrip=gu,e.LinePieces=vu,e.MeshFaceMaterial=yu,e.MultiMaterial=bu,e.PointCloud=Eu,e.Particle=xu,e.ParticleSystem=wu,e.PointCloudMaterial=Tu,e.ParticleBasicMaterial=_u,e.ParticleSystemMaterial=Su,e.Vertex=Mu,e.DynamicBufferAttribute=Ru,e.Int8Attribute=Au,e.Uint8Attribute=Cu,e.Uint8ClampedAttribute=Lu,e.Int16Attribute=Ou,e.Uint16Attribute=Iu,e.Int32Attribute=Pu,e.Uint32Attribute=Hu,e.Float32Attribute=ku,e.Float64Attribute=Nu,e.ClosedSplineCurve3=Uu,e.SplineCurve3=Du,e.Spline=Fu,e.AxisHelper=Bu,e.BoundingBoxHelper=zu,e.EdgesHelper=ju,e.WireframeHelper=Vu,e.XHRLoader=Gu,e.BinaryTextureLoader=Wu,e.GeometryUtils=qu,e.ImageUtils=Xu,e.Projector=Yu,e.CanvasRenderer=Zu,Object.defineProperty(e,"__esModule",{value:!0})}(t)},9282:(e,t,r)=>{"use strict";var n=r(4155),i=r(5108);function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==a(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==a(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===a(o)?o:String(o)),n)}var i,o}function s(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}var l,u,c=r(2136).codes,h=c.ERR_AMBIGUOUS_ARGUMENT,d=c.ERR_INVALID_ARG_TYPE,f=c.ERR_INVALID_ARG_VALUE,p=c.ERR_INVALID_RETURN_VALUE,m=c.ERR_MISSING_ARGS,g=r(5961),v=r(9539).inspect,y=r(9539).types,b=y.isPromise,E=y.isRegExp,x=r(8162)(),w=r(5624)(),T=r(1924)("RegExp.prototype.test");new Map;function _(){var e=r(9158);l=e.isDeepEqual,u=e.isDeepStrictEqual}var S=!1,M=e.exports=L,R={};function A(e){if(e.message instanceof Error)throw e.message;throw new g(e)}function C(e,t,r,n){if(!r){var i=!1;if(0===t)i=!0,n="No value argument passed to `assert.ok()`";else if(n instanceof Error)throw n;var a=new g({actual:r,expected:!0,message:n,operator:"==",stackStartFn:e});throw a.generatedMessage=i,a}}function L(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];C.apply(void 0,[L,t.length].concat(t))}M.fail=function e(t,r,a,o,s){var l,u=arguments.length;if(0===u)l="Failed";else if(1===u)a=t,t=void 0;else{if(!1===S)S=!0,(n.emitWarning?n.emitWarning:i.warn.bind(i))("assert.fail() with more than one argument is deprecated. Please use assert.strictEqual() instead or only pass a message.","DeprecationWarning","DEP0094");2===u&&(o="!=")}if(a instanceof Error)throw a;var c={actual:t,expected:r,operator:void 0===o?"fail":o,stackStartFn:s||e};void 0!==a&&(c.message=a);var h=new g(c);throw l&&(h.message=l,h.generatedMessage=!0),h},M.AssertionError=g,M.ok=L,M.equal=function e(t,r,n){if(arguments.length<2)throw new m("actual","expected");t!=r&&A({actual:t,expected:r,message:n,operator:"==",stackStartFn:e})},M.notEqual=function e(t,r,n){if(arguments.length<2)throw new m("actual","expected");t==r&&A({actual:t,expected:r,message:n,operator:"!=",stackStartFn:e})},M.deepEqual=function e(t,r,n){if(arguments.length<2)throw new m("actual","expected");void 0===l&&_(),l(t,r)||A({actual:t,expected:r,message:n,operator:"deepEqual",stackStartFn:e})},M.notDeepEqual=function e(t,r,n){if(arguments.length<2)throw new m("actual","expected");void 0===l&&_(),l(t,r)&&A({actual:t,expected:r,message:n,operator:"notDeepEqual",stackStartFn:e})},M.deepStrictEqual=function e(t,r,n){if(arguments.length<2)throw new m("actual","expected");void 0===l&&_(),u(t,r)||A({actual:t,expected:r,message:n,operator:"deepStrictEqual",stackStartFn:e})},M.notDeepStrictEqual=function e(t,r,n){if(arguments.length<2)throw new m("actual","expected");void 0===l&&_();u(t,r)&&A({actual:t,expected:r,message:n,operator:"notDeepStrictEqual",stackStartFn:e})},M.strictEqual=function e(t,r,n){if(arguments.length<2)throw new m("actual","expected");w(t,r)||A({actual:t,expected:r,message:n,operator:"strictEqual",stackStartFn:e})},M.notStrictEqual=function e(t,r,n){if(arguments.length<2)throw new m("actual","expected");w(t,r)&&A({actual:t,expected:r,message:n,operator:"notStrictEqual",stackStartFn:e})};var O=s((function e(t,r,n){var i=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),r.forEach((function(e){e in t&&(void 0!==n&&"string"==typeof n[e]&&E(t[e])&&T(t[e],n[e])?i[e]=n[e]:i[e]=t[e])}))}));function I(e,t,r,n){if("function"!=typeof t){if(E(t))return T(t,e);if(2===arguments.length)throw new d("expected",["Function","RegExp"],t);if("object"!==a(e)||null===e){var i=new g({actual:e,expected:t,message:r,operator:"deepStrictEqual",stackStartFn:n});throw i.operator=n.name,i}var o=Object.keys(t);if(t instanceof Error)o.push("name","message");else if(0===o.length)throw new f("error",t,"may not be an empty object");return void 0===l&&_(),o.forEach((function(i){"string"==typeof e[i]&&E(t[i])&&T(t[i],e[i])||function(e,t,r,n,i,a){if(!(r in e)||!u(e[r],t[r])){if(!n){var o=new O(e,i),s=new O(t,i,e),l=new g({actual:o,expected:s,operator:"deepStrictEqual",stackStartFn:a});throw l.actual=e,l.expected=t,l.operator=a.name,l}A({actual:e,expected:t,message:n,operator:a.name,stackStartFn:a})}}(e,t,i,r,o,n)})),!0}return void 0!==t.prototype&&e instanceof t||!Error.isPrototypeOf(t)&&!0===t.call({},e)}function P(e){if("function"!=typeof e)throw new d("fn","Function",e);try{e()}catch(e){return e}return R}function H(e){return b(e)||null!==e&&"object"===a(e)&&"function"==typeof e.then&&"function"==typeof e.catch}function k(e){return Promise.resolve().then((function(){var t;if("function"==typeof e){if(!H(t=e()))throw new p("instance of Promise","promiseFn",t)}else{if(!H(e))throw new d("promiseFn",["Function","Promise"],e);t=e}return Promise.resolve().then((function(){return t})).then((function(){return R})).catch((function(e){return e}))}))}function N(e,t,r,n){if("string"==typeof r){if(4===arguments.length)throw new d("error",["Object","Error","Function","RegExp"],r);if("object"===a(t)&&null!==t){if(t.message===r)throw new h("error/message",'The error message "'.concat(t.message,'" is identical to the message.'))}else if(t===r)throw new h("error/message",'The error "'.concat(t,'" is identical to the message.'));n=r,r=void 0}else if(null!=r&&"object"!==a(r)&&"function"!=typeof r)throw new d("error",["Object","Error","Function","RegExp"],r);if(t===R){var i="";r&&r.name&&(i+=" (".concat(r.name,")")),i+=n?": ".concat(n):".";var o="rejects"===e.name?"rejection":"exception";A({actual:void 0,expected:r,operator:e.name,message:"Missing expected ".concat(o).concat(i),stackStartFn:e})}if(r&&!I(t,r,n,e))throw t}function U(e,t,r,n){if(t!==R){if("string"==typeof r&&(n=r,r=void 0),!r||I(t,r)){var i=n?": ".concat(n):".",a="doesNotReject"===e.name?"rejection":"exception";A({actual:t,expected:r,operator:e.name,message:"Got unwanted ".concat(a).concat(i,"\n")+'Actual message: "'.concat(t&&t.message,'"'),stackStartFn:e})}throw t}}function D(e,t,r,n,i){if(!E(t))throw new d("regexp","RegExp",t);var o="match"===i;if("string"!=typeof e||T(t,e)!==o){if(r instanceof Error)throw r;var s=!r;r=r||("string"!=typeof e?'The "string" argument must be of type string. Received type '+"".concat(a(e)," (").concat(v(e),")"):(o?"The input did not match the regular expression ":"The input was expected to not match the regular expression ")+"".concat(v(t),". Input:\n\n").concat(v(e),"\n"));var l=new g({actual:e,expected:t,message:r,operator:i,stackStartFn:n});throw l.generatedMessage=s,l}}function F(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];C.apply(void 0,[F,t.length].concat(t))}M.throws=function e(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];N.apply(void 0,[e,P(t)].concat(n))},M.rejects=function e(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];return k(t).then((function(t){return N.apply(void 0,[e,t].concat(n))}))},M.doesNotThrow=function e(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];U.apply(void 0,[e,P(t)].concat(n))},M.doesNotReject=function e(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];return k(t).then((function(t){return U.apply(void 0,[e,t].concat(n))}))},M.ifError=function e(t){if(null!=t){var r="ifError got unwanted exception: ";"object"===a(t)&&"string"==typeof t.message?0===t.message.length&&t.constructor?r+=t.constructor.name:r+=t.message:r+=v(t);var n=new g({actual:t,expected:null,operator:"ifError",message:r,stackStartFn:e}),i=t.stack;if("string"==typeof i){var o=i.split("\n");o.shift();for(var s=n.stack.split("\n"),l=0;l<o.length;l++){var u=s.indexOf(o[l]);if(-1!==u){s=s.slice(0,u);break}}n.stack="".concat(s.join("\n"),"\n").concat(o.join("\n"))}throw n}},M.match=function e(t,r,n){D(t,r,n,e,"match")},M.doesNotMatch=function e(t,r,n){D(t,r,n,e,"doesNotMatch")},M.strict=x(F,M,{equal:M.strictEqual,deepEqual:M.deepStrictEqual,notEqual:M.notStrictEqual,notDeepEqual:M.notDeepStrictEqual}),M.strict.strict=M.strict},5961:(e,t,r)=>{"use strict";var n=r(4155);function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function o(e,t,r){return(t=l(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,l(n.key),n)}}function l(e){var t=function(e,t){if("object"!==g(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==g(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===g(t)?t:String(t)}function u(e,t){if(t&&("object"===g(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return c(e)}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(e){var t="function"==typeof Map?new Map:void 0;return h=function(e){if(null===e||(r=e,-1===Function.toString.call(r).indexOf("[native code]")))return e;var r;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return d(e,arguments,m(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),p(n,e)},h(e)}function d(e,t,r){return d=f()?Reflect.construct.bind():function(e,t,r){var n=[null];n.push.apply(n,t);var i=new(Function.bind.apply(e,n));return r&&p(i,r.prototype),i},d.apply(null,arguments)}function f(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function p(e,t){return p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},p(e,t)}function m(e){return m=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},m(e)}function g(e){return g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},g(e)}var v=r(9539).inspect,y=r(2136).codes.ERR_INVALID_ARG_TYPE;function b(e,t,r){return(void 0===r||r>e.length)&&(r=e.length),e.substring(r-t.length,r)===t}var E="",x="",w="",T="",_={deepStrictEqual:"Expected values to be strictly deep-equal:",strictEqual:"Expected values to be strictly equal:",strictEqualObject:'Expected "actual" to be reference-equal to "expected":',deepEqual:"Expected values to be loosely deep-equal:",equal:"Expected values to be loosely equal:",notDeepStrictEqual:'Expected "actual" not to be strictly deep-equal to:',notStrictEqual:'Expected "actual" to be strictly unequal to:',notStrictEqualObject:'Expected "actual" not to be reference-equal to "expected":',notDeepEqual:'Expected "actual" not to be loosely deep-equal to:',notEqual:'Expected "actual" to be loosely unequal to:',notIdentical:"Values identical but not reference-equal:"};function S(e){var t=Object.keys(e),r=Object.create(Object.getPrototypeOf(e));return t.forEach((function(t){r[t]=e[t]})),Object.defineProperty(r,"message",{value:e.message}),r}function M(e){return v(e,{compact:!1,customInspect:!1,depth:1e3,maxArrayLength:1/0,showHidden:!1,breakLength:1/0,showProxy:!1,sorted:!0,getters:!0})}function R(e,t,r){var i="",a="",o=0,s="",l=!1,u=M(e),c=u.split("\n"),h=M(t).split("\n"),d=0,f="";if("strictEqual"===r&&"object"===g(e)&&"object"===g(t)&&null!==e&&null!==t&&(r="strictEqualObject"),1===c.length&&1===h.length&&c[0]!==h[0]){var p=c[0].length+h[0].length;if(p<=10){if(!("object"===g(e)&&null!==e||"object"===g(t)&&null!==t||0===e&&0===t))return"".concat(_[r],"\n\n")+"".concat(c[0]," !== ").concat(h[0],"\n")}else if("strictEqualObject"!==r){if(p<(n.stderr&&n.stderr.isTTY?n.stderr.columns:80)){for(;c[0][d]===h[0][d];)d++;d>2&&(f="\n  ".concat(function(e,t){if(t=Math.floor(t),0==e.length||0==t)return"";var r=e.length*t;for(t=Math.floor(Math.log(t)/Math.log(2));t;)e+=e,t--;return e+e.substring(0,r-e.length)}(" ",d),"^"),d=0)}}}for(var m=c[c.length-1],v=h[h.length-1];m===v&&(d++<2?s="\n  ".concat(m).concat(s):i=m,c.pop(),h.pop(),0!==c.length&&0!==h.length);)m=c[c.length-1],v=h[h.length-1];var y=Math.max(c.length,h.length);if(0===y){var S=u.split("\n");if(S.length>30)for(S[26]="".concat(E,"...").concat(T);S.length>27;)S.pop();return"".concat(_.notIdentical,"\n\n").concat(S.join("\n"),"\n")}d>3&&(s="\n".concat(E,"...").concat(T).concat(s),l=!0),""!==i&&(s="\n  ".concat(i).concat(s),i="");var R=0,A=_[r]+"\n".concat(x,"+ actual").concat(T," ").concat(w,"- expected").concat(T),C=" ".concat(E,"...").concat(T," Lines skipped");for(d=0;d<y;d++){var L=d-o;if(c.length<d+1)L>1&&d>2&&(L>4?(a+="\n".concat(E,"...").concat(T),l=!0):L>3&&(a+="\n  ".concat(h[d-2]),R++),a+="\n  ".concat(h[d-1]),R++),o=d,i+="\n".concat(w,"-").concat(T," ").concat(h[d]),R++;else if(h.length<d+1)L>1&&d>2&&(L>4?(a+="\n".concat(E,"...").concat(T),l=!0):L>3&&(a+="\n  ".concat(c[d-2]),R++),a+="\n  ".concat(c[d-1]),R++),o=d,a+="\n".concat(x,"+").concat(T," ").concat(c[d]),R++;else{var O=h[d],I=c[d],P=I!==O&&(!b(I,",")||I.slice(0,-1)!==O);P&&b(O,",")&&O.slice(0,-1)===I&&(P=!1,I+=","),P?(L>1&&d>2&&(L>4?(a+="\n".concat(E,"...").concat(T),l=!0):L>3&&(a+="\n  ".concat(c[d-2]),R++),a+="\n  ".concat(c[d-1]),R++),o=d,a+="\n".concat(x,"+").concat(T," ").concat(I),i+="\n".concat(w,"-").concat(T," ").concat(O),R+=2):(a+=i,i="",1!==L&&0!==d||(a+="\n  ".concat(I),R++))}if(R>20&&d<y-2)return"".concat(A).concat(C,"\n").concat(a,"\n").concat(E,"...").concat(T).concat(i,"\n")+"".concat(E,"...").concat(T)}return"".concat(A).concat(l?C:"","\n").concat(a).concat(i).concat(s).concat(f)}var A=function(e,t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&p(e,t)}(b,e);var r,i,o,l,h,d=(r=b,i=f(),function(){var e,t=m(r);if(i){var n=m(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return u(this,e)});function b(e){var t;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,b),"object"!==g(e)||null===e)throw new y("options","Object",e);var r=e.message,i=e.operator,a=e.stackStartFn,o=e.actual,s=e.expected,l=Error.stackTraceLimit;if(Error.stackTraceLimit=0,null!=r)t=d.call(this,String(r));else if(n.stderr&&n.stderr.isTTY&&(n.stderr&&n.stderr.getColorDepth&&1!==n.stderr.getColorDepth()?(E="[34m",x="[32m",T="[39m",w="[31m"):(E="",x="",T="",w="")),"object"===g(o)&&null!==o&&"object"===g(s)&&null!==s&&"stack"in o&&o instanceof Error&&"stack"in s&&s instanceof Error&&(o=S(o),s=S(s)),"deepStrictEqual"===i||"strictEqual"===i)t=d.call(this,R(o,s,i));else if("notDeepStrictEqual"===i||"notStrictEqual"===i){var h=_[i],f=M(o).split("\n");if("notStrictEqual"===i&&"object"===g(o)&&null!==o&&(h=_.notStrictEqualObject),f.length>30)for(f[26]="".concat(E,"...").concat(T);f.length>27;)f.pop();t=1===f.length?d.call(this,"".concat(h," ").concat(f[0])):d.call(this,"".concat(h,"\n\n").concat(f.join("\n"),"\n"))}else{var p=M(o),m="",v=_[i];"notDeepEqual"===i||"notEqual"===i?(p="".concat(_[i],"\n\n").concat(p)).length>1024&&(p="".concat(p.slice(0,1021),"...")):(m="".concat(M(s)),p.length>512&&(p="".concat(p.slice(0,509),"...")),m.length>512&&(m="".concat(m.slice(0,509),"...")),"deepEqual"===i||"equal"===i?p="".concat(v,"\n\n").concat(p,"\n\nshould equal\n\n"):m=" ".concat(i," ").concat(m)),t=d.call(this,"".concat(p).concat(m))}return Error.stackTraceLimit=l,t.generatedMessage=!r,Object.defineProperty(c(t),"name",{value:"AssertionError [ERR_ASSERTION]",enumerable:!1,writable:!0,configurable:!0}),t.code="ERR_ASSERTION",t.actual=o,t.expected=s,t.operator=i,Error.captureStackTrace&&Error.captureStackTrace(c(t),a),t.stack,t.name="AssertionError",u(t)}return o=b,(l=[{key:"toString",value:function(){return"".concat(this.name," [").concat(this.code,"]: ").concat(this.message)}},{key:t,value:function(e,t){return v(this,a(a({},t),{},{customInspect:!1,depth:0}))}}])&&s(o.prototype,l),h&&s(o,h),Object.defineProperty(o,"prototype",{writable:!1}),b}(h(Error),v.custom);e.exports=A},2136:(e,t,r)=>{"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function i(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(a=i.key,o=void 0,o=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(a,"string"),"symbol"===n(o)?o:String(o)),i)}var a,o}function a(e,t){return a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},a(e,t)}function o(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,i=s(e);if(t){var a=s(this).constructor;r=Reflect.construct(i,arguments,a)}else r=i.apply(this,arguments);return function(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function s(e){return s=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},s(e)}var l,u,c={};function h(e,t,r){r||(r=Error);var n=function(r){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&a(e,t)}(c,r);var n,s,l,u=o(c);function c(r,n,i){var a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),a=u.call(this,function(e,r,n){return"string"==typeof t?t:t(e,r,n)}(r,n,i)),a.code=e,a}return n=c,s&&i(n.prototype,s),l&&i(n,l),Object.defineProperty(n,"prototype",{writable:!1}),n}(r);c[e]=n}function d(e,t){if(Array.isArray(e)){var r=e.length;return e=e.map((function(e){return String(e)})),r>2?"one of ".concat(t," ").concat(e.slice(0,r-1).join(", "),", or ")+e[r-1]:2===r?"one of ".concat(t," ").concat(e[0]," or ").concat(e[1]):"of ".concat(t," ").concat(e[0])}return"of ".concat(t," ").concat(String(e))}h("ERR_AMBIGUOUS_ARGUMENT",'The "%s" argument is ambiguous. %s',TypeError),h("ERR_INVALID_ARG_TYPE",(function(e,t,i){var a,o,s,u;if(void 0===l&&(l=r(9282)),l("string"==typeof e,"'name' must be a string"),"string"==typeof t&&(o="not ",t.substr(!s||s<0?0:+s,o.length)===o)?(a="must not be",t=t.replace(/^not /,"")):a="must be",function(e,t,r){return(void 0===r||r>e.length)&&(r=e.length),e.substring(r-t.length,r)===t}(e," argument"))u="The ".concat(e," ").concat(a," ").concat(d(t,"type"));else{var c=function(e,t,r){return"number"!=typeof r&&(r=0),!(r+t.length>e.length)&&-1!==e.indexOf(t,r)}(e,".")?"property":"argument";u='The "'.concat(e,'" ').concat(c," ").concat(a," ").concat(d(t,"type"))}return u+=". Received type ".concat(n(i))}),TypeError),h("ERR_INVALID_ARG_VALUE",(function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"is invalid";void 0===u&&(u=r(9539));var i=u.inspect(t);return i.length>128&&(i="".concat(i.slice(0,128),"...")),"The argument '".concat(e,"' ").concat(n,". Received ").concat(i)}),TypeError,RangeError),h("ERR_INVALID_RETURN_VALUE",(function(e,t,r){var i;return i=r&&r.constructor&&r.constructor.name?"instance of ".concat(r.constructor.name):"type ".concat(n(r)),"Expected ".concat(e,' to be returned from the "').concat(t,'"')+" function but got ".concat(i,".")}),TypeError),h("ERR_MISSING_ARGS",(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];void 0===l&&(l=r(9282)),l(t.length>0,"At least one arg needs to be specified");var i="The ",a=t.length;switch(t=t.map((function(e){return'"'.concat(e,'"')})),a){case 1:i+="".concat(t[0]," argument");break;case 2:i+="".concat(t[0]," and ").concat(t[1]," arguments");break;default:i+=t.slice(0,a-1).join(", "),i+=", and ".concat(t[a-1]," arguments")}return"".concat(i," must be specified")}),TypeError),e.exports.codes=c},9158:(e,t,r)=>{"use strict";function n(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,a,o,s=[],l=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(s.push(n.value),s.length!==t);l=!0);}catch(e){u=!0,i=e}finally{try{if(!l&&null!=r.return&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw i}}return s}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return i(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return i(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}var o=void 0!==/a/g.flags,s=function(e){var t=[];return e.forEach((function(e){return t.push(e)})),t},l=function(e){var t=[];return e.forEach((function(e,r){return t.push([r,e])})),t},u=Object.is?Object.is:r(609),c=Object.getOwnPropertySymbols?Object.getOwnPropertySymbols:function(){return[]},h=Number.isNaN?Number.isNaN:r(360);function d(e){return e.call.bind(e)}var f=d(Object.prototype.hasOwnProperty),p=d(Object.prototype.propertyIsEnumerable),m=d(Object.prototype.toString),g=r(9539).types,v=g.isAnyArrayBuffer,y=g.isArrayBufferView,b=g.isDate,E=g.isMap,x=g.isRegExp,w=g.isSet,T=g.isNativeError,_=g.isBoxedPrimitive,S=g.isNumberObject,M=g.isStringObject,R=g.isBooleanObject,A=g.isBigIntObject,C=g.isSymbolObject,L=g.isFloat32Array,O=g.isFloat64Array;function I(e){if(0===e.length||e.length>10)return!0;for(var t=0;t<e.length;t++){var r=e.charCodeAt(t);if(r<48||r>57)return!0}return 10===e.length&&e>=Math.pow(2,32)}function P(e){return Object.keys(e).filter(I).concat(c(e).filter(Object.prototype.propertyIsEnumerable.bind(e)))}
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */function H(e,t){if(e===t)return 0;for(var r=e.length,n=t.length,i=0,a=Math.min(r,n);i<a;++i)if(e[i]!==t[i]){r=e[i],n=t[i];break}return r<n?-1:n<r?1:0}var k=0,N=1,U=2,D=3;function F(e,t,r,n){if(e===t)return 0!==e||(!r||u(e,t));if(r){if("object"!==a(e))return"number"==typeof e&&h(e)&&h(t);if("object"!==a(t)||null===e||null===t)return!1;if(Object.getPrototypeOf(e)!==Object.getPrototypeOf(t))return!1}else{if(null===e||"object"!==a(e))return(null===t||"object"!==a(t))&&e==t;if(null===t||"object"!==a(t))return!1}var i,s,l,c,d=m(e);if(d!==m(t))return!1;if(Array.isArray(e)){if(e.length!==t.length)return!1;var f=P(e),p=P(t);return f.length===p.length&&z(e,t,r,n,N,f)}if("[object Object]"===d&&(!E(e)&&E(t)||!w(e)&&w(t)))return!1;if(b(e)){if(!b(t)||Date.prototype.getTime.call(e)!==Date.prototype.getTime.call(t))return!1}else if(x(e)){if(!x(t)||(l=e,c=t,!(o?l.source===c.source&&l.flags===c.flags:RegExp.prototype.toString.call(l)===RegExp.prototype.toString.call(c))))return!1}else if(T(e)||e instanceof Error){if(e.message!==t.message||e.name!==t.name)return!1}else{if(y(e)){if(r||!L(e)&&!O(e)){if(!function(e,t){return e.byteLength===t.byteLength&&0===H(new Uint8Array(e.buffer,e.byteOffset,e.byteLength),new Uint8Array(t.buffer,t.byteOffset,t.byteLength))}(e,t))return!1}else if(!function(e,t){if(e.byteLength!==t.byteLength)return!1;for(var r=0;r<e.byteLength;r++)if(e[r]!==t[r])return!1;return!0}(e,t))return!1;var g=P(e),I=P(t);return g.length===I.length&&z(e,t,r,n,k,g)}if(w(e))return!(!w(t)||e.size!==t.size)&&z(e,t,r,n,U);if(E(e))return!(!E(t)||e.size!==t.size)&&z(e,t,r,n,D);if(v(e)){if(s=t,(i=e).byteLength!==s.byteLength||0!==H(new Uint8Array(i),new Uint8Array(s)))return!1}else if(_(e)&&!function(e,t){return S(e)?S(t)&&u(Number.prototype.valueOf.call(e),Number.prototype.valueOf.call(t)):M(e)?M(t)&&String.prototype.valueOf.call(e)===String.prototype.valueOf.call(t):R(e)?R(t)&&Boolean.prototype.valueOf.call(e)===Boolean.prototype.valueOf.call(t):A(e)?A(t)&&BigInt.prototype.valueOf.call(e)===BigInt.prototype.valueOf.call(t):C(t)&&Symbol.prototype.valueOf.call(e)===Symbol.prototype.valueOf.call(t)}(e,t))return!1}return z(e,t,r,n,k)}function B(e,t){return t.filter((function(t){return p(e,t)}))}function z(e,t,r,i,o,u){if(5===arguments.length){u=Object.keys(e);var h=Object.keys(t);if(u.length!==h.length)return!1}for(var d=0;d<u.length;d++)if(!f(t,u[d]))return!1;if(r&&5===arguments.length){var m=c(e);if(0!==m.length){var g=0;for(d=0;d<m.length;d++){var v=m[d];if(p(e,v)){if(!p(t,v))return!1;u.push(v),g++}else if(p(t,v))return!1}var y=c(t);if(m.length!==y.length&&B(t,y).length!==g)return!1}else{var b=c(t);if(0!==b.length&&0!==B(t,b).length)return!1}}if(0===u.length&&(o===k||o===N&&0===e.length||0===e.size))return!0;if(void 0===i)i={val1:new Map,val2:new Map,position:0};else{var E=i.val1.get(e);if(void 0!==E){var x=i.val2.get(t);if(void 0!==x)return E===x}i.position++}i.val1.set(e,i.position),i.val2.set(t,i.position);var w=function(e,t,r,i,o,u){var c=0;if(u===U){if(!function(e,t,r,n){for(var i=null,o=s(e),l=0;l<o.length;l++){var u=o[l];if("object"===a(u)&&null!==u)null===i&&(i=new Set),i.add(u);else if(!t.has(u)){if(r)return!1;if(!G(e,t,u))return!1;null===i&&(i=new Set),i.add(u)}}if(null!==i){for(var c=s(t),h=0;h<c.length;h++){var d=c[h];if("object"===a(d)&&null!==d){if(!j(i,d,r,n))return!1}else if(!r&&!e.has(d)&&!j(i,d,r,n))return!1}return 0===i.size}return!0}(e,t,r,o))return!1}else if(u===D){if(!function(e,t,r,i){for(var o=null,s=l(e),u=0;u<s.length;u++){var c=n(s[u],2),h=c[0],d=c[1];if("object"===a(h)&&null!==h)null===o&&(o=new Set),o.add(h);else{var f=t.get(h);if(void 0===f&&!t.has(h)||!F(d,f,r,i)){if(r)return!1;if(!W(e,t,h,d,i))return!1;null===o&&(o=new Set),o.add(h)}}}if(null!==o){for(var p=l(t),m=0;m<p.length;m++){var g=n(p[m],2),v=g[0],y=g[1];if("object"===a(v)&&null!==v){if(!q(o,e,v,y,r,i))return!1}else if(!(r||e.has(v)&&F(e.get(v),y,!1,i)||q(o,e,v,y,!1,i)))return!1}return 0===o.size}return!0}(e,t,r,o))return!1}else if(u===N)for(;c<e.length;c++){if(!f(e,c)){if(f(t,c))return!1;for(var h=Object.keys(e);c<h.length;c++){var d=h[c];if(!f(t,d)||!F(e[d],t[d],r,o))return!1}return h.length===Object.keys(t).length}if(!f(t,c)||!F(e[c],t[c],r,o))return!1}for(c=0;c<i.length;c++){var p=i[c];if(!F(e[p],t[p],r,o))return!1}return!0}(e,t,r,u,i,o);return i.val1.delete(e),i.val2.delete(t),w}function j(e,t,r,n){for(var i=s(e),a=0;a<i.length;a++){var o=i[a];if(F(t,o,r,n))return e.delete(o),!0}return!1}function V(e){switch(a(e)){case"undefined":return null;case"object":return;case"symbol":return!1;case"string":e=+e;case"number":if(h(e))return!1}return!0}function G(e,t,r){var n=V(r);return null!=n?n:t.has(n)&&!e.has(n)}function W(e,t,r,n,i){var a=V(r);if(null!=a)return a;var o=t.get(a);return!(void 0===o&&!t.has(a)||!F(n,o,!1,i))&&(!e.has(a)&&F(n,o,!1,i))}function q(e,t,r,n,i,a){for(var o=s(e),l=0;l<o.length;l++){var u=o[l];if(F(r,u,i,a)&&F(n,t.get(u),i,a))return e.delete(u),!0}return!1}e.exports={isDeepEqual:function(e,t){return F(e,t,false)},isDeepStrictEqual:function(e,t){return F(e,t,true)}}},6314:(e,t,r)=>{"use strict";var n=["BigInt64Array","BigUint64Array","Float32Array","Float64Array","Int16Array","Int32Array","Int8Array","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray"],i="undefined"==typeof globalThis?r.g:globalThis;e.exports=function(){for(var e=[],t=0;t<n.length;t++)"function"==typeof i[n[t]]&&(e[e.length]=n[t]);return e}},9742:(e,t)=>{"use strict";t.byteLength=function(e){var t=s(e),r=t[0],n=t[1];return 3*(r+n)/4-n},t.toByteArray=function(e){var t,r,a=s(e),o=a[0],l=a[1],u=new i(function(e,t,r){return 3*(t+r)/4-r}(0,o,l)),c=0,h=l>0?o-4:o;for(r=0;r<h;r+=4)t=n[e.charCodeAt(r)]<<18|n[e.charCodeAt(r+1)]<<12|n[e.charCodeAt(r+2)]<<6|n[e.charCodeAt(r+3)],u[c++]=t>>16&255,u[c++]=t>>8&255,u[c++]=255&t;2===l&&(t=n[e.charCodeAt(r)]<<2|n[e.charCodeAt(r+1)]>>4,u[c++]=255&t);1===l&&(t=n[e.charCodeAt(r)]<<10|n[e.charCodeAt(r+1)]<<4|n[e.charCodeAt(r+2)]>>2,u[c++]=t>>8&255,u[c++]=255&t);return u},t.fromByteArray=function(e){for(var t,n=e.length,i=n%3,a=[],o=16383,s=0,u=n-i;s<u;s+=o)a.push(l(e,s,s+o>u?u:s+o));1===i?(t=e[n-1],a.push(r[t>>2]+r[t<<4&63]+"==")):2===i&&(t=(e[n-2]<<8)+e[n-1],a.push(r[t>>10]+r[t>>4&63]+r[t<<2&63]+"="));return a.join("")};for(var r=[],n=[],i="undefined"!=typeof Uint8Array?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=0;o<64;++o)r[o]=a[o],n[a.charCodeAt(o)]=o;function s(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");return-1===r&&(r=t),[r,r===t?0:4-r%4]}function l(e,t,n){for(var i,a,o=[],s=t;s<n;s+=3)i=(e[s]<<16&16711680)+(e[s+1]<<8&65280)+(255&e[s+2]),o.push(r[(a=i)>>18&63]+r[a>>12&63]+r[a>>6&63]+r[63&a]);return o.join("")}n["-".charCodeAt(0)]=62,n["_".charCodeAt(0)]=63},8764:(e,t,r)=>{"use strict";var n=r(5108);
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */
const i=r(9742),a=r(645),o="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=u,t.INSPECT_MAX_BYTES=50;const s=2147483647;function l(e){if(e>s)throw new RangeError('The value "'+e+'" is invalid for option "size"');const t=new Uint8Array(e);return Object.setPrototypeOf(t,u.prototype),t}function u(e,t,r){if("number"==typeof e){if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return d(e)}return c(e,t,r)}function c(e,t,r){if("string"==typeof e)return function(e,t){"string"==typeof t&&""!==t||(t="utf8");if(!u.isEncoding(t))throw new TypeError("Unknown encoding: "+t);const r=0|g(e,t);let n=l(r);const i=n.write(e,t);i!==r&&(n=n.slice(0,i));return n}(e,t);if(ArrayBuffer.isView(e))return function(e){if(K(e,Uint8Array)){const t=new Uint8Array(e);return p(t.buffer,t.byteOffset,t.byteLength)}return f(e)}(e);if(null==e)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(K(e,ArrayBuffer)||e&&K(e.buffer,ArrayBuffer))return p(e,t,r);if("undefined"!=typeof SharedArrayBuffer&&(K(e,SharedArrayBuffer)||e&&K(e.buffer,SharedArrayBuffer)))return p(e,t,r);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');const n=e.valueOf&&e.valueOf();if(null!=n&&n!==e)return u.from(n,t,r);const i=function(e){if(u.isBuffer(e)){const t=0|m(e.length),r=l(t);return 0===r.length||e.copy(r,0,0,t),r}if(void 0!==e.length)return"number"!=typeof e.length||Q(e.length)?l(0):f(e);if("Buffer"===e.type&&Array.isArray(e.data))return f(e.data)}(e);if(i)return i;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return u.from(e[Symbol.toPrimitive]("string"),t,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function h(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function d(e){return h(e),l(e<0?0:0|m(e))}function f(e){const t=e.length<0?0:0|m(e.length),r=l(t);for(let n=0;n<t;n+=1)r[n]=255&e[n];return r}function p(e,t,r){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(r||0))throw new RangeError('"length" is outside of buffer bounds');let n;return n=void 0===t&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,t):new Uint8Array(e,t,r),Object.setPrototypeOf(n,u.prototype),n}function m(e){if(e>=s)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s.toString(16)+" bytes");return 0|e}function g(e,t){if(u.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||K(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);const r=e.length,n=arguments.length>2&&!0===arguments[2];if(!n&&0===r)return 0;let i=!1;for(;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return X(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return Y(e).length;default:if(i)return n?-1:X(e).length;t=(""+t).toLowerCase(),i=!0}}function v(e,t,r){let n=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return O(this,t,r);case"utf8":case"utf-8":return R(this,t,r);case"ascii":return C(this,t,r);case"latin1":case"binary":return L(this,t,r);case"base64":return M(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return I(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}function y(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function b(e,t,r,n,i){if(0===e.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),Q(r=+r)&&(r=i?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(i)return-1;r=e.length-1}else if(r<0){if(!i)return-1;r=0}if("string"==typeof t&&(t=u.from(t,n)),u.isBuffer(t))return 0===t.length?-1:E(e,t,r,n,i);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):E(e,[t],r,n,i);throw new TypeError("val must be string, number or Buffer")}function E(e,t,r,n,i){let a,o=1,s=e.length,l=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;o=2,s/=2,l/=2,r/=2}function u(e,t){return 1===o?e[t]:e.readUInt16BE(t*o)}if(i){let n=-1;for(a=r;a<s;a++)if(u(e,a)===u(t,-1===n?0:a-n)){if(-1===n&&(n=a),a-n+1===l)return n*o}else-1!==n&&(a-=a-n),n=-1}else for(r+l>s&&(r=s-l),a=r;a>=0;a--){let r=!0;for(let n=0;n<l;n++)if(u(e,a+n)!==u(t,n)){r=!1;break}if(r)return a}return-1}function x(e,t,r,n){r=Number(r)||0;const i=e.length-r;n?(n=Number(n))>i&&(n=i):n=i;const a=t.length;let o;for(n>a/2&&(n=a/2),o=0;o<n;++o){const n=parseInt(t.substr(2*o,2),16);if(Q(n))return o;e[r+o]=n}return o}function w(e,t,r,n){return Z(X(t,e.length-r),e,r,n)}function T(e,t,r,n){return Z(function(e){const t=[];for(let r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(t),e,r,n)}function _(e,t,r,n){return Z(Y(t),e,r,n)}function S(e,t,r,n){return Z(function(e,t){let r,n,i;const a=[];for(let o=0;o<e.length&&!((t-=2)<0);++o)r=e.charCodeAt(o),n=r>>8,i=r%256,a.push(i),a.push(n);return a}(t,e.length-r),e,r,n)}function M(e,t,r){return 0===t&&r===e.length?i.fromByteArray(e):i.fromByteArray(e.slice(t,r))}function R(e,t,r){r=Math.min(e.length,r);const n=[];let i=t;for(;i<r;){const t=e[i];let a=null,o=t>239?4:t>223?3:t>191?2:1;if(i+o<=r){let r,n,s,l;switch(o){case 1:t<128&&(a=t);break;case 2:r=e[i+1],128==(192&r)&&(l=(31&t)<<6|63&r,l>127&&(a=l));break;case 3:r=e[i+1],n=e[i+2],128==(192&r)&&128==(192&n)&&(l=(15&t)<<12|(63&r)<<6|63&n,l>2047&&(l<55296||l>57343)&&(a=l));break;case 4:r=e[i+1],n=e[i+2],s=e[i+3],128==(192&r)&&128==(192&n)&&128==(192&s)&&(l=(15&t)<<18|(63&r)<<12|(63&n)<<6|63&s,l>65535&&l<1114112&&(a=l))}}null===a?(a=65533,o=1):a>65535&&(a-=65536,n.push(a>>>10&1023|55296),a=56320|1023&a),n.push(a),i+=o}return function(e){const t=e.length;if(t<=A)return String.fromCharCode.apply(String,e);let r="",n=0;for(;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=A));return r}(n)}u.TYPED_ARRAY_SUPPORT=function(){try{const e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}(),u.TYPED_ARRAY_SUPPORT||void 0===n||"function"!=typeof n.error||n.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(u.prototype,"parent",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.buffer}}),Object.defineProperty(u.prototype,"offset",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.byteOffset}}),u.poolSize=8192,u.from=function(e,t,r){return c(e,t,r)},Object.setPrototypeOf(u.prototype,Uint8Array.prototype),Object.setPrototypeOf(u,Uint8Array),u.alloc=function(e,t,r){return function(e,t,r){return h(e),e<=0?l(e):void 0!==t?"string"==typeof r?l(e).fill(t,r):l(e).fill(t):l(e)}(e,t,r)},u.allocUnsafe=function(e){return d(e)},u.allocUnsafeSlow=function(e){return d(e)},u.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==u.prototype},u.compare=function(e,t){if(K(e,Uint8Array)&&(e=u.from(e,e.offset,e.byteLength)),K(t,Uint8Array)&&(t=u.from(t,t.offset,t.byteLength)),!u.isBuffer(e)||!u.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;let r=e.length,n=t.length;for(let i=0,a=Math.min(r,n);i<a;++i)if(e[i]!==t[i]){r=e[i],n=t[i];break}return r<n?-1:n<r?1:0},u.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return u.alloc(0);let r;if(void 0===t)for(t=0,r=0;r<e.length;++r)t+=e[r].length;const n=u.allocUnsafe(t);let i=0;for(r=0;r<e.length;++r){let t=e[r];if(K(t,Uint8Array))i+t.length>n.length?(u.isBuffer(t)||(t=u.from(t)),t.copy(n,i)):Uint8Array.prototype.set.call(n,t,i);else{if(!u.isBuffer(t))throw new TypeError('"list" argument must be an Array of Buffers');t.copy(n,i)}i+=t.length}return n},u.byteLength=g,u.prototype._isBuffer=!0,u.prototype.swap16=function(){const e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let t=0;t<e;t+=2)y(this,t,t+1);return this},u.prototype.swap32=function(){const e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let t=0;t<e;t+=4)y(this,t,t+3),y(this,t+1,t+2);return this},u.prototype.swap64=function(){const e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let t=0;t<e;t+=8)y(this,t,t+7),y(this,t+1,t+6),y(this,t+2,t+5),y(this,t+3,t+4);return this},u.prototype.toString=function(){const e=this.length;return 0===e?"":0===arguments.length?R(this,0,e):v.apply(this,arguments)},u.prototype.toLocaleString=u.prototype.toString,u.prototype.equals=function(e){if(!u.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===u.compare(this,e)},u.prototype.inspect=function(){let e="";const r=t.INSPECT_MAX_BYTES;return e=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(e+=" ... "),"<Buffer "+e+">"},o&&(u.prototype[o]=u.prototype.inspect),u.prototype.compare=function(e,t,r,n,i){if(K(e,Uint8Array)&&(e=u.from(e,e.offset,e.byteLength)),!u.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),t<0||r>e.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&t>=r)return 0;if(n>=i)return-1;if(t>=r)return 1;if(this===e)return 0;let a=(i>>>=0)-(n>>>=0),o=(r>>>=0)-(t>>>=0);const s=Math.min(a,o),l=this.slice(n,i),c=e.slice(t,r);for(let e=0;e<s;++e)if(l[e]!==c[e]){a=l[e],o=c[e];break}return a<o?-1:o<a?1:0},u.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},u.prototype.indexOf=function(e,t,r){return b(this,e,t,r,!0)},u.prototype.lastIndexOf=function(e,t,r){return b(this,e,t,r,!1)},u.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(r)?(r>>>=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}const i=this.length-t;if((void 0===r||r>i)&&(r=i),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");let a=!1;for(;;)switch(n){case"hex":return x(this,e,t,r);case"utf8":case"utf-8":return w(this,e,t,r);case"ascii":case"latin1":case"binary":return T(this,e,t,r);case"base64":return _(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return S(this,e,t,r);default:if(a)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),a=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const A=4096;function C(e,t,r){let n="";r=Math.min(e.length,r);for(let i=t;i<r;++i)n+=String.fromCharCode(127&e[i]);return n}function L(e,t,r){let n="";r=Math.min(e.length,r);for(let i=t;i<r;++i)n+=String.fromCharCode(e[i]);return n}function O(e,t,r){const n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);let i="";for(let n=t;n<r;++n)i+=J[e[n]];return i}function I(e,t,r){const n=e.slice(t,r);let i="";for(let e=0;e<n.length-1;e+=2)i+=String.fromCharCode(n[e]+256*n[e+1]);return i}function P(e,t,r){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function H(e,t,r,n,i,a){if(!u.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<a)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}function k(e,t,r,n,i){V(t,n,i,e,r,7);let a=Number(t&BigInt(4294967295));e[r++]=a,a>>=8,e[r++]=a,a>>=8,e[r++]=a,a>>=8,e[r++]=a;let o=Number(t>>BigInt(32)&BigInt(4294967295));return e[r++]=o,o>>=8,e[r++]=o,o>>=8,e[r++]=o,o>>=8,e[r++]=o,r}function N(e,t,r,n,i){V(t,n,i,e,r,7);let a=Number(t&BigInt(4294967295));e[r+7]=a,a>>=8,e[r+6]=a,a>>=8,e[r+5]=a,a>>=8,e[r+4]=a;let o=Number(t>>BigInt(32)&BigInt(4294967295));return e[r+3]=o,o>>=8,e[r+2]=o,o>>=8,e[r+1]=o,o>>=8,e[r]=o,r+8}function U(e,t,r,n,i,a){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function D(e,t,r,n,i){return t=+t,r>>>=0,i||U(e,0,r,4),a.write(e,t,r,n,23,4),r+4}function F(e,t,r,n,i){return t=+t,r>>>=0,i||U(e,0,r,8),a.write(e,t,r,n,52,8),r+8}u.prototype.slice=function(e,t){const r=this.length;(e=~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e);const n=this.subarray(e,t);return Object.setPrototypeOf(n,u.prototype),n},u.prototype.readUintLE=u.prototype.readUIntLE=function(e,t,r){e>>>=0,t>>>=0,r||P(e,t,this.length);let n=this[e],i=1,a=0;for(;++a<t&&(i*=256);)n+=this[e+a]*i;return n},u.prototype.readUintBE=u.prototype.readUIntBE=function(e,t,r){e>>>=0,t>>>=0,r||P(e,t,this.length);let n=this[e+--t],i=1;for(;t>0&&(i*=256);)n+=this[e+--t]*i;return n},u.prototype.readUint8=u.prototype.readUInt8=function(e,t){return e>>>=0,t||P(e,1,this.length),this[e]},u.prototype.readUint16LE=u.prototype.readUInt16LE=function(e,t){return e>>>=0,t||P(e,2,this.length),this[e]|this[e+1]<<8},u.prototype.readUint16BE=u.prototype.readUInt16BE=function(e,t){return e>>>=0,t||P(e,2,this.length),this[e]<<8|this[e+1]},u.prototype.readUint32LE=u.prototype.readUInt32LE=function(e,t){return e>>>=0,t||P(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},u.prototype.readUint32BE=u.prototype.readUInt32BE=function(e,t){return e>>>=0,t||P(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},u.prototype.readBigUInt64LE=$((function(e){G(e>>>=0,"offset");const t=this[e],r=this[e+7];void 0!==t&&void 0!==r||W(e,this.length-8);const n=t+256*this[++e]+65536*this[++e]+this[++e]*2**24,i=this[++e]+256*this[++e]+65536*this[++e]+r*2**24;return BigInt(n)+(BigInt(i)<<BigInt(32))})),u.prototype.readBigUInt64BE=$((function(e){G(e>>>=0,"offset");const t=this[e],r=this[e+7];void 0!==t&&void 0!==r||W(e,this.length-8);const n=t*2**24+65536*this[++e]+256*this[++e]+this[++e],i=this[++e]*2**24+65536*this[++e]+256*this[++e]+r;return(BigInt(n)<<BigInt(32))+BigInt(i)})),u.prototype.readIntLE=function(e,t,r){e>>>=0,t>>>=0,r||P(e,t,this.length);let n=this[e],i=1,a=0;for(;++a<t&&(i*=256);)n+=this[e+a]*i;return i*=128,n>=i&&(n-=Math.pow(2,8*t)),n},u.prototype.readIntBE=function(e,t,r){e>>>=0,t>>>=0,r||P(e,t,this.length);let n=t,i=1,a=this[e+--n];for(;n>0&&(i*=256);)a+=this[e+--n]*i;return i*=128,a>=i&&(a-=Math.pow(2,8*t)),a},u.prototype.readInt8=function(e,t){return e>>>=0,t||P(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},u.prototype.readInt16LE=function(e,t){e>>>=0,t||P(e,2,this.length);const r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},u.prototype.readInt16BE=function(e,t){e>>>=0,t||P(e,2,this.length);const r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},u.prototype.readInt32LE=function(e,t){return e>>>=0,t||P(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},u.prototype.readInt32BE=function(e,t){return e>>>=0,t||P(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},u.prototype.readBigInt64LE=$((function(e){G(e>>>=0,"offset");const t=this[e],r=this[e+7];void 0!==t&&void 0!==r||W(e,this.length-8);const n=this[e+4]+256*this[e+5]+65536*this[e+6]+(r<<24);return(BigInt(n)<<BigInt(32))+BigInt(t+256*this[++e]+65536*this[++e]+this[++e]*2**24)})),u.prototype.readBigInt64BE=$((function(e){G(e>>>=0,"offset");const t=this[e],r=this[e+7];void 0!==t&&void 0!==r||W(e,this.length-8);const n=(t<<24)+65536*this[++e]+256*this[++e]+this[++e];return(BigInt(n)<<BigInt(32))+BigInt(this[++e]*2**24+65536*this[++e]+256*this[++e]+r)})),u.prototype.readFloatLE=function(e,t){return e>>>=0,t||P(e,4,this.length),a.read(this,e,!0,23,4)},u.prototype.readFloatBE=function(e,t){return e>>>=0,t||P(e,4,this.length),a.read(this,e,!1,23,4)},u.prototype.readDoubleLE=function(e,t){return e>>>=0,t||P(e,8,this.length),a.read(this,e,!0,52,8)},u.prototype.readDoubleBE=function(e,t){return e>>>=0,t||P(e,8,this.length),a.read(this,e,!1,52,8)},u.prototype.writeUintLE=u.prototype.writeUIntLE=function(e,t,r,n){if(e=+e,t>>>=0,r>>>=0,!n){H(this,e,t,r,Math.pow(2,8*r)-1,0)}let i=1,a=0;for(this[t]=255&e;++a<r&&(i*=256);)this[t+a]=e/i&255;return t+r},u.prototype.writeUintBE=u.prototype.writeUIntBE=function(e,t,r,n){if(e=+e,t>>>=0,r>>>=0,!n){H(this,e,t,r,Math.pow(2,8*r)-1,0)}let i=r-1,a=1;for(this[t+i]=255&e;--i>=0&&(a*=256);)this[t+i]=e/a&255;return t+r},u.prototype.writeUint8=u.prototype.writeUInt8=function(e,t,r){return e=+e,t>>>=0,r||H(this,e,t,1,255,0),this[t]=255&e,t+1},u.prototype.writeUint16LE=u.prototype.writeUInt16LE=function(e,t,r){return e=+e,t>>>=0,r||H(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},u.prototype.writeUint16BE=u.prototype.writeUInt16BE=function(e,t,r){return e=+e,t>>>=0,r||H(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},u.prototype.writeUint32LE=u.prototype.writeUInt32LE=function(e,t,r){return e=+e,t>>>=0,r||H(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},u.prototype.writeUint32BE=u.prototype.writeUInt32BE=function(e,t,r){return e=+e,t>>>=0,r||H(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},u.prototype.writeBigUInt64LE=$((function(e,t=0){return k(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))})),u.prototype.writeBigUInt64BE=$((function(e,t=0){return N(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))})),u.prototype.writeIntLE=function(e,t,r,n){if(e=+e,t>>>=0,!n){const n=Math.pow(2,8*r-1);H(this,e,t,r,n-1,-n)}let i=0,a=1,o=0;for(this[t]=255&e;++i<r&&(a*=256);)e<0&&0===o&&0!==this[t+i-1]&&(o=1),this[t+i]=(e/a>>0)-o&255;return t+r},u.prototype.writeIntBE=function(e,t,r,n){if(e=+e,t>>>=0,!n){const n=Math.pow(2,8*r-1);H(this,e,t,r,n-1,-n)}let i=r-1,a=1,o=0;for(this[t+i]=255&e;--i>=0&&(a*=256);)e<0&&0===o&&0!==this[t+i+1]&&(o=1),this[t+i]=(e/a>>0)-o&255;return t+r},u.prototype.writeInt8=function(e,t,r){return e=+e,t>>>=0,r||H(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},u.prototype.writeInt16LE=function(e,t,r){return e=+e,t>>>=0,r||H(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},u.prototype.writeInt16BE=function(e,t,r){return e=+e,t>>>=0,r||H(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},u.prototype.writeInt32LE=function(e,t,r){return e=+e,t>>>=0,r||H(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},u.prototype.writeInt32BE=function(e,t,r){return e=+e,t>>>=0,r||H(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},u.prototype.writeBigInt64LE=$((function(e,t=0){return k(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),u.prototype.writeBigInt64BE=$((function(e,t=0){return N(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),u.prototype.writeFloatLE=function(e,t,r){return D(this,e,t,!0,r)},u.prototype.writeFloatBE=function(e,t,r){return D(this,e,t,!1,r)},u.prototype.writeDoubleLE=function(e,t,r){return F(this,e,t,!0,r)},u.prototype.writeDoubleBE=function(e,t,r){return F(this,e,t,!1,r)},u.prototype.copy=function(e,t,r,n){if(!u.isBuffer(e))throw new TypeError("argument should be a Buffer");if(r||(r=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);const i=n-r;return this===e&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,r,n):Uint8Array.prototype.set.call(e,this.subarray(r,n),t),i},u.prototype.fill=function(e,t,r,n){if("string"==typeof e){if("string"==typeof t?(n=t,t=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!u.isEncoding(n))throw new TypeError("Unknown encoding: "+n);if(1===e.length){const t=e.charCodeAt(0);("utf8"===n&&t<128||"latin1"===n)&&(e=t)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;let i;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"==typeof e)for(i=t;i<r;++i)this[i]=e;else{const a=u.isBuffer(e)?e:u.from(e,n),o=a.length;if(0===o)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(i=0;i<r-t;++i)this[i+t]=a[i%o]}return this};const B={};function z(e,t,r){B[e]=class extends r{constructor(){super(),Object.defineProperty(this,"message",{value:t.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${e}]`,this.stack,delete this.name}get code(){return e}set code(e){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:e,writable:!0})}toString(){return`${this.name} [${e}]: ${this.message}`}}}function j(e){let t="",r=e.length;const n="-"===e[0]?1:0;for(;r>=n+4;r-=3)t=`_${e.slice(r-3,r)}${t}`;return`${e.slice(0,r)}${t}`}function V(e,t,r,n,i,a){if(e>r||e<t){const n="bigint"==typeof t?"n":"";let i;throw i=a>3?0===t||t===BigInt(0)?`>= 0${n} and < 2${n} ** ${8*(a+1)}${n}`:`>= -(2${n} ** ${8*(a+1)-1}${n}) and < 2 ** ${8*(a+1)-1}${n}`:`>= ${t}${n} and <= ${r}${n}`,new B.ERR_OUT_OF_RANGE("value",i,e)}!function(e,t,r){G(t,"offset"),void 0!==e[t]&&void 0!==e[t+r]||W(t,e.length-(r+1))}(n,i,a)}function G(e,t){if("number"!=typeof e)throw new B.ERR_INVALID_ARG_TYPE(t,"number",e)}function W(e,t,r){if(Math.floor(e)!==e)throw G(e,r),new B.ERR_OUT_OF_RANGE(r||"offset","an integer",e);if(t<0)throw new B.ERR_BUFFER_OUT_OF_BOUNDS;throw new B.ERR_OUT_OF_RANGE(r||"offset",`>= ${r?1:0} and <= ${t}`,e)}z("ERR_BUFFER_OUT_OF_BOUNDS",(function(e){return e?`${e} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"}),RangeError),z("ERR_INVALID_ARG_TYPE",(function(e,t){return`The "${e}" argument must be of type number. Received type ${typeof t}`}),TypeError),z("ERR_OUT_OF_RANGE",(function(e,t,r){let n=`The value of "${e}" is out of range.`,i=r;return Number.isInteger(r)&&Math.abs(r)>2**32?i=j(String(r)):"bigint"==typeof r&&(i=String(r),(r>BigInt(2)**BigInt(32)||r<-(BigInt(2)**BigInt(32)))&&(i=j(i)),i+="n"),n+=` It must be ${t}. Received ${i}`,n}),RangeError);const q=/[^+/0-9A-Za-z-_]/g;function X(e,t){let r;t=t||1/0;const n=e.length;let i=null;const a=[];for(let o=0;o<n;++o){if(r=e.charCodeAt(o),r>55295&&r<57344){if(!i){if(r>56319){(t-=3)>-1&&a.push(239,191,189);continue}if(o+1===n){(t-=3)>-1&&a.push(239,191,189);continue}i=r;continue}if(r<56320){(t-=3)>-1&&a.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&(t-=3)>-1&&a.push(239,191,189);if(i=null,r<128){if((t-=1)<0)break;a.push(r)}else if(r<2048){if((t-=2)<0)break;a.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;a.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;a.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return a}function Y(e){return i.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(q,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function Z(e,t,r,n){let i;for(i=0;i<n&&!(i+r>=t.length||i>=e.length);++i)t[i+r]=e[i];return i}function K(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function Q(e){return e!=e}const J=function(){const e="0123456789abcdef",t=new Array(256);for(let r=0;r<16;++r){const n=16*r;for(let i=0;i<16;++i)t[n+i]=e[r]+e[i]}return t}();function $(e){return"undefined"==typeof BigInt?ee:e}function ee(){throw new Error("BigInt not supported")}},1924:(e,t,r)=>{"use strict";var n=r(210),i=r(5559),a=i(n("String.prototype.indexOf"));e.exports=function(e,t){var r=n(e,!!t);return"function"==typeof r&&a(e,".prototype.")>-1?i(r):r}},5559:(e,t,r)=>{"use strict";var n=r(8612),i=r(210),a=i("%Function.prototype.apply%"),o=i("%Function.prototype.call%"),s=i("%Reflect.apply%",!0)||n.call(o,a),l=i("%Object.getOwnPropertyDescriptor%",!0),u=i("%Object.defineProperty%",!0),c=i("%Math.max%");if(u)try{u({},"a",{value:1})}catch(e){u=null}e.exports=function(e){var t=s(n,o,arguments);l&&u&&(l(t,"length").configurable&&u(t,"length",{value:1+c(0,e.length-(arguments.length-1))}));return t};var h=function(){return s(n,a,arguments)};u?u(e.exports,"apply",{value:h}):e.exports.apply=h},5108:(e,t,r)=>{var n=r(9539),i=r(9282);function a(){return(new Date).getTime()}var o,s=Array.prototype.slice,l={};o=void 0!==r.g&&r.g.console?r.g.console:"undefined"!=typeof window&&window.console?window.console:{};for(var u=[[function(){},"log"],[function(){o.log.apply(o,arguments)},"info"],[function(){o.log.apply(o,arguments)},"warn"],[function(){o.warn.apply(o,arguments)},"error"],[function(e){l[e]=a()},"time"],[function(e){var t=l[e];if(!t)throw new Error("No such label: "+e);delete l[e];var r=a()-t;o.log(e+": "+r+"ms")},"timeEnd"],[function(){var e=new Error;e.name="Trace",e.message=n.format.apply(null,arguments),o.error(e.stack)},"trace"],[function(e){o.log(n.inspect(e)+"\n")},"dir"],[function(e){if(!e){var t=s.call(arguments,1);i.ok(!1,n.format.apply(null,t))}},"assert"]],c=0;c<u.length;c++){var h=u[c],d=h[0],f=h[1];o[f]||(o[f]=d)}e.exports=o},2296:(e,t,r)=>{"use strict";var n=r(1044)(),i=r(210),a=n&&i("%Object.defineProperty%",!0),o=i("%SyntaxError%"),s=i("%TypeError%"),l=r(7296);e.exports=function(e,t,r){if(!e||"object"!=typeof e&&"function"!=typeof e)throw new s("`obj` must be an object or a function`");if("string"!=typeof t&&"symbol"!=typeof t)throw new s("`property` must be a string or a symbol`");if(arguments.length>3&&"boolean"!=typeof arguments[3]&&null!==arguments[3])throw new s("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&"boolean"!=typeof arguments[4]&&null!==arguments[4])throw new s("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&"boolean"!=typeof arguments[5]&&null!==arguments[5])throw new s("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&"boolean"!=typeof arguments[6])throw new s("`loose`, if provided, must be a boolean");var n=arguments.length>3?arguments[3]:null,i=arguments.length>4?arguments[4]:null,u=arguments.length>5?arguments[5]:null,c=arguments.length>6&&arguments[6],h=!!l&&l(e,t);if(a)a(e,t,{configurable:null===u&&h?h.configurable:!u,enumerable:null===n&&h?h.enumerable:!n,value:r,writable:null===i&&h?h.writable:!i});else{if(!c&&(n||i||u))throw new o("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.");e[t]=r}}},4289:(e,t,r)=>{"use strict";var n=r(2215),i="function"==typeof Symbol&&"symbol"==typeof Symbol("foo"),a=Object.prototype.toString,o=Array.prototype.concat,s=r(2296),l=r(1044)(),u=function(e,t,r,n){if(t in e)if(!0===n){if(e[t]===r)return}else if("function"!=typeof(i=n)||"[object Function]"!==a.call(i)||!n())return;var i;l?s(e,t,r,!0):s(e,t,r)},c=function(e,t){var r=arguments.length>2?arguments[2]:{},a=n(t);i&&(a=o.call(a,Object.getOwnPropertySymbols(t)));for(var s=0;s<a.length;s+=1)u(e,a[s],t[a[s]],r[a[s]])};c.supportsDescriptors=!!l,e.exports=c},4029:(e,t,r)=>{"use strict";var n=r(5320),i=Object.prototype.toString,a=Object.prototype.hasOwnProperty;e.exports=function(e,t,r){if(!n(t))throw new TypeError("iterator must be a function");var o;arguments.length>=3&&(o=r),"[object Array]"===i.call(e)?function(e,t,r){for(var n=0,i=e.length;n<i;n++)a.call(e,n)&&(null==r?t(e[n],n,e):t.call(r,e[n],n,e))}(e,t,o):"string"==typeof e?function(e,t,r){for(var n=0,i=e.length;n<i;n++)null==r?t(e.charAt(n),n,e):t.call(r,e.charAt(n),n,e)}(e,t,o):function(e,t,r){for(var n in e)a.call(e,n)&&(null==r?t(e[n],n,e):t.call(r,e[n],n,e))}(e,t,o)}},7648:e=>{"use strict";var t=Array.prototype.slice,r=Object.prototype.toString;e.exports=function(e){var n=this;if("function"!=typeof n||"[object Function]"!==r.call(n))throw new TypeError("Function.prototype.bind called on incompatible "+n);for(var i,a=t.call(arguments,1),o=Math.max(0,n.length-a.length),s=[],l=0;l<o;l++)s.push("$"+l);if(i=Function("binder","return function ("+s.join(",")+"){ return binder.apply(this,arguments); }")((function(){if(this instanceof i){var r=n.apply(this,a.concat(t.call(arguments)));return Object(r)===r?r:this}return n.apply(e,a.concat(t.call(arguments)))})),n.prototype){var u=function(){};u.prototype=n.prototype,i.prototype=new u,u.prototype=null}return i}},8612:(e,t,r)=>{"use strict";var n=r(7648);e.exports=Function.prototype.bind||n},210:(e,t,r)=>{"use strict";var n,i=SyntaxError,a=Function,o=TypeError,s=function(e){try{return a('"use strict"; return ('+e+").constructor;")()}catch(e){}},l=Object.getOwnPropertyDescriptor;if(l)try{l({},"")}catch(e){l=null}var u=function(){throw new o},c=l?function(){try{return u}catch(e){try{return l(arguments,"callee").get}catch(e){return u}}}():u,h=r(1405)(),d=r(8185)(),f=Object.getPrototypeOf||(d?function(e){return e.__proto__}:null),p={},m="undefined"!=typeof Uint8Array&&f?f(Uint8Array):n,g={"%AggregateError%":"undefined"==typeof AggregateError?n:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?n:ArrayBuffer,"%ArrayIteratorPrototype%":h&&f?f([][Symbol.iterator]()):n,"%AsyncFromSyncIteratorPrototype%":n,"%AsyncFunction%":p,"%AsyncGenerator%":p,"%AsyncGeneratorFunction%":p,"%AsyncIteratorPrototype%":p,"%Atomics%":"undefined"==typeof Atomics?n:Atomics,"%BigInt%":"undefined"==typeof BigInt?n:BigInt,"%BigInt64Array%":"undefined"==typeof BigInt64Array?n:BigInt64Array,"%BigUint64Array%":"undefined"==typeof BigUint64Array?n:BigUint64Array,"%Boolean%":Boolean,"%DataView%":"undefined"==typeof DataView?n:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":"undefined"==typeof Float32Array?n:Float32Array,"%Float64Array%":"undefined"==typeof Float64Array?n:Float64Array,"%FinalizationRegistry%":"undefined"==typeof FinalizationRegistry?n:FinalizationRegistry,"%Function%":a,"%GeneratorFunction%":p,"%Int8Array%":"undefined"==typeof Int8Array?n:Int8Array,"%Int16Array%":"undefined"==typeof Int16Array?n:Int16Array,"%Int32Array%":"undefined"==typeof Int32Array?n:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":h&&f?f(f([][Symbol.iterator]())):n,"%JSON%":"object"==typeof JSON?JSON:n,"%Map%":"undefined"==typeof Map?n:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&h&&f?f((new Map)[Symbol.iterator]()):n,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?n:Promise,"%Proxy%":"undefined"==typeof Proxy?n:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":"undefined"==typeof Reflect?n:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"==typeof Set?n:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&h&&f?f((new Set)[Symbol.iterator]()):n,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?n:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":h&&f?f(""[Symbol.iterator]()):n,"%Symbol%":h?Symbol:n,"%SyntaxError%":i,"%ThrowTypeError%":c,"%TypedArray%":m,"%TypeError%":o,"%Uint8Array%":"undefined"==typeof Uint8Array?n:Uint8Array,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?n:Uint8ClampedArray,"%Uint16Array%":"undefined"==typeof Uint16Array?n:Uint16Array,"%Uint32Array%":"undefined"==typeof Uint32Array?n:Uint32Array,"%URIError%":URIError,"%WeakMap%":"undefined"==typeof WeakMap?n:WeakMap,"%WeakRef%":"undefined"==typeof WeakRef?n:WeakRef,"%WeakSet%":"undefined"==typeof WeakSet?n:WeakSet};if(f)try{null.error}catch(e){var v=f(f(e));g["%Error.prototype%"]=v}var y=function e(t){var r;if("%AsyncFunction%"===t)r=s("async function () {}");else if("%GeneratorFunction%"===t)r=s("function* () {}");else if("%AsyncGeneratorFunction%"===t)r=s("async function* () {}");else if("%AsyncGenerator%"===t){var n=e("%AsyncGeneratorFunction%");n&&(r=n.prototype)}else if("%AsyncIteratorPrototype%"===t){var i=e("%AsyncGenerator%");i&&f&&(r=f(i.prototype))}return g[t]=r,r},b={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},E=r(8612),x=r(7642),w=E.call(Function.call,Array.prototype.concat),T=E.call(Function.apply,Array.prototype.splice),_=E.call(Function.call,String.prototype.replace),S=E.call(Function.call,String.prototype.slice),M=E.call(Function.call,RegExp.prototype.exec),R=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,A=/\\(\\)?/g,C=function(e,t){var r,n=e;if(x(b,n)&&(n="%"+(r=b[n])[0]+"%"),x(g,n)){var a=g[n];if(a===p&&(a=y(n)),void 0===a&&!t)throw new o("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:r,name:n,value:a}}throw new i("intrinsic "+e+" does not exist!")};e.exports=function(e,t){if("string"!=typeof e||0===e.length)throw new o("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof t)throw new o('"allowMissing" argument must be a boolean');if(null===M(/^%?[^%]*%?$/,e))throw new i("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var r=function(e){var t=S(e,0,1),r=S(e,-1);if("%"===t&&"%"!==r)throw new i("invalid intrinsic syntax, expected closing `%`");if("%"===r&&"%"!==t)throw new i("invalid intrinsic syntax, expected opening `%`");var n=[];return _(e,R,(function(e,t,r,i){n[n.length]=r?_(i,A,"$1"):t||e})),n}(e),n=r.length>0?r[0]:"",a=C("%"+n+"%",t),s=a.name,u=a.value,c=!1,h=a.alias;h&&(n=h[0],T(r,w([0,1],h)));for(var d=1,f=!0;d<r.length;d+=1){var p=r[d],m=S(p,0,1),v=S(p,-1);if(('"'===m||"'"===m||"`"===m||'"'===v||"'"===v||"`"===v)&&m!==v)throw new i("property names with quotes must have matching quotes");if("constructor"!==p&&f||(c=!0),x(g,s="%"+(n+="."+p)+"%"))u=g[s];else if(null!=u){if(!(p in u)){if(!t)throw new o("base intrinsic for "+e+" exists, but the property is not available.");return}if(l&&d+1>=r.length){var y=l(u,p);u=(f=!!y)&&"get"in y&&!("originalValue"in y.get)?y.get:u[p]}else f=x(u,p),u=u[p];f&&!c&&(g[s]=u)}}return u}},7296:(e,t,r)=>{"use strict";var n=r(210)("%Object.getOwnPropertyDescriptor%",!0);if(n)try{n([],"length")}catch(e){n=null}e.exports=n},1044:(e,t,r)=>{"use strict";var n=r(210)("%Object.defineProperty%",!0),i=function(){if(n)try{return n({},"a",{value:1}),!0}catch(e){return!1}return!1};i.hasArrayLengthDefineBug=function(){if(!i())return null;try{return 1!==n([],"length",{value:1}).length}catch(e){return!0}},e.exports=i},8185:e=>{"use strict";var t={foo:{}},r=Object;e.exports=function(){return{__proto__:t}.foo===t.foo&&!({__proto__:null}instanceof r)}},1405:(e,t,r)=>{"use strict";var n="undefined"!=typeof Symbol&&Symbol,i=r(5419);e.exports=function(){return"function"==typeof n&&("function"==typeof Symbol&&("symbol"==typeof n("foo")&&("symbol"==typeof Symbol("bar")&&i())))}},5419:e=>{"use strict";e.exports=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var e={},t=Symbol("test"),r=Object(t);if("string"==typeof t)return!1;if("[object Symbol]"!==Object.prototype.toString.call(t))return!1;if("[object Symbol]"!==Object.prototype.toString.call(r))return!1;for(t in e[t]=42,e)return!1;if("function"==typeof Object.keys&&0!==Object.keys(e).length)return!1;if("function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(e).length)return!1;var n=Object.getOwnPropertySymbols(e);if(1!==n.length||n[0]!==t)return!1;if(!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var i=Object.getOwnPropertyDescriptor(e,t);if(42!==i.value||!0!==i.enumerable)return!1}return!0}},6410:(e,t,r)=>{"use strict";var n=r(5419);e.exports=function(){return n()&&!!Symbol.toStringTag}},7642:(e,t,r)=>{"use strict";var n=r(8612);e.exports=n.call(Function.call,Object.prototype.hasOwnProperty)},645:(e,t)=>{
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */
t.read=function(e,t,r,n,i){var a,o,s=8*i-n-1,l=(1<<s)-1,u=l>>1,c=-7,h=r?i-1:0,d=r?-1:1,f=e[t+h];for(h+=d,a=f&(1<<-c)-1,f>>=-c,c+=s;c>0;a=256*a+e[t+h],h+=d,c-=8);for(o=a&(1<<-c)-1,a>>=-c,c+=n;c>0;o=256*o+e[t+h],h+=d,c-=8);if(0===a)a=1-u;else{if(a===l)return o?NaN:1/0*(f?-1:1);o+=Math.pow(2,n),a-=u}return(f?-1:1)*o*Math.pow(2,a-n)},t.write=function(e,t,r,n,i,a){var o,s,l,u=8*a-i-1,c=(1<<u)-1,h=c>>1,d=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,f=n?0:a-1,p=n?1:-1,m=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,o=c):(o=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-o))<1&&(o--,l*=2),(t+=o+h>=1?d/l:d*Math.pow(2,1-h))*l>=2&&(o++,l/=2),o+h>=c?(s=0,o=c):o+h>=1?(s=(t*l-1)*Math.pow(2,i),o+=h):(s=t*Math.pow(2,h-1)*Math.pow(2,i),o=0));i>=8;e[r+f]=255&s,f+=p,s/=256,i-=8);for(o=o<<i|s,u+=i;u>0;e[r+f]=255&o,f+=p,o/=256,u-=8);e[r+f-p]|=128*m}},5717:e=>{"function"==typeof Object.create?e.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(e,t){if(t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}}},2584:(e,t,r)=>{"use strict";var n=r(6410)(),i=r(1924)("Object.prototype.toString"),a=function(e){return!(n&&e&&"object"==typeof e&&Symbol.toStringTag in e)&&"[object Arguments]"===i(e)},o=function(e){return!!a(e)||null!==e&&"object"==typeof e&&"number"==typeof e.length&&e.length>=0&&"[object Array]"!==i(e)&&"[object Function]"===i(e.callee)},s=function(){return a(arguments)}();a.isLegacyArguments=o,e.exports=s?a:o},5320:e=>{"use strict";var t,r,n=Function.prototype.toString,i="object"==typeof Reflect&&null!==Reflect&&Reflect.apply;if("function"==typeof i&&"function"==typeof Object.defineProperty)try{t=Object.defineProperty({},"length",{get:function(){throw r}}),r={},i((function(){throw 42}),null,t)}catch(e){e!==r&&(i=null)}else i=null;var a=/^\s*class\b/,o=function(e){try{var t=n.call(e);return a.test(t)}catch(e){return!1}},s=function(e){try{return!o(e)&&(n.call(e),!0)}catch(e){return!1}},l=Object.prototype.toString,u="function"==typeof Symbol&&!!Symbol.toStringTag,c=!(0 in[,]),h=function(){return!1};if("object"==typeof document){var d=document.all;l.call(d)===l.call(document.all)&&(h=function(e){if((c||!e)&&(void 0===e||"object"==typeof e))try{var t=l.call(e);return("[object HTMLAllCollection]"===t||"[object HTML document.all class]"===t||"[object HTMLCollection]"===t||"[object Object]"===t)&&null==e("")}catch(e){}return!1})}e.exports=i?function(e){if(h(e))return!0;if(!e)return!1;if("function"!=typeof e&&"object"!=typeof e)return!1;try{i(e,null,t)}catch(e){if(e!==r)return!1}return!o(e)&&s(e)}:function(e){if(h(e))return!0;if(!e)return!1;if("function"!=typeof e&&"object"!=typeof e)return!1;if(u)return s(e);if(o(e))return!1;var t=l.call(e);return!("[object Function]"!==t&&"[object GeneratorFunction]"!==t&&!/^\[object HTML/.test(t))&&s(e)}},8662:(e,t,r)=>{"use strict";var n,i=Object.prototype.toString,a=Function.prototype.toString,o=/^\s*(?:function)?\*/,s=r(6410)(),l=Object.getPrototypeOf;e.exports=function(e){if("function"!=typeof e)return!1;if(o.test(a.call(e)))return!0;if(!s)return"[object GeneratorFunction]"===i.call(e);if(!l)return!1;if(void 0===n){var t=function(){if(!s)return!1;try{return Function("return function*() {}")()}catch(e){}}();n=!!t&&l(t)}return l(e)===n}},8611:e=>{"use strict";e.exports=function(e){return e!=e}},360:(e,t,r)=>{"use strict";var n=r(5559),i=r(4289),a=r(8611),o=r(9415),s=r(3194),l=n(o(),Number);i(l,{getPolyfill:o,implementation:a,shim:s}),e.exports=l},9415:(e,t,r)=>{"use strict";var n=r(8611);e.exports=function(){return Number.isNaN&&Number.isNaN(NaN)&&!Number.isNaN("a")?Number.isNaN:n}},3194:(e,t,r)=>{"use strict";var n=r(4289),i=r(9415);e.exports=function(){var e=i();return n(Number,{isNaN:e},{isNaN:function(){return Number.isNaN!==e}}),e}},5692:(e,t,r)=>{"use strict";var n=r(6430);e.exports=function(e){return!!n(e)}},4244:e=>{"use strict";var t=function(e){return e!=e};e.exports=function(e,r){return 0===e&&0===r?1/e==1/r:e===r||!(!t(e)||!t(r))}},609:(e,t,r)=>{"use strict";var n=r(4289),i=r(5559),a=r(4244),o=r(5624),s=r(2281),l=i(o(),Object);n(l,{getPolyfill:o,implementation:a,shim:s}),e.exports=l},5624:(e,t,r)=>{"use strict";var n=r(4244);e.exports=function(){return"function"==typeof Object.is?Object.is:n}},2281:(e,t,r)=>{"use strict";var n=r(5624),i=r(4289);e.exports=function(){var e=n();return i(Object,{is:e},{is:function(){return Object.is!==e}}),e}},8987:(e,t,r)=>{"use strict";var n;if(!Object.keys){var i=Object.prototype.hasOwnProperty,a=Object.prototype.toString,o=r(1414),s=Object.prototype.propertyIsEnumerable,l=!s.call({toString:null},"toString"),u=s.call((function(){}),"prototype"),c=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],h=function(e){var t=e.constructor;return t&&t.prototype===e},d={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},f=function(){if("undefined"==typeof window)return!1;for(var e in window)try{if(!d["$"+e]&&i.call(window,e)&&null!==window[e]&&"object"==typeof window[e])try{h(window[e])}catch(e){return!0}}catch(e){return!0}return!1}();n=function(e){var t=null!==e&&"object"==typeof e,r="[object Function]"===a.call(e),n=o(e),s=t&&"[object String]"===a.call(e),d=[];if(!t&&!r&&!n)throw new TypeError("Object.keys called on a non-object");var p=u&&r;if(s&&e.length>0&&!i.call(e,0))for(var m=0;m<e.length;++m)d.push(String(m));if(n&&e.length>0)for(var g=0;g<e.length;++g)d.push(String(g));else for(var v in e)p&&"prototype"===v||!i.call(e,v)||d.push(String(v));if(l)for(var y=function(e){if("undefined"==typeof window||!f)return h(e);try{return h(e)}catch(e){return!1}}(e),b=0;b<c.length;++b)y&&"constructor"===c[b]||!i.call(e,c[b])||d.push(c[b]);return d}}e.exports=n},2215:(e,t,r)=>{"use strict";var n=Array.prototype.slice,i=r(1414),a=Object.keys,o=a?function(e){return a(e)}:r(8987),s=Object.keys;o.shim=function(){if(Object.keys){var e=function(){var e=Object.keys(arguments);return e&&e.length===arguments.length}(1,2);e||(Object.keys=function(e){return i(e)?s(n.call(e)):s(e)})}else Object.keys=o;return Object.keys||o},e.exports=o},1414:e=>{"use strict";var t=Object.prototype.toString;e.exports=function(e){var r=t.call(e),n="[object Arguments]"===r;return n||(n="[object Array]"!==r&&null!==e&&"object"==typeof e&&"number"==typeof e.length&&e.length>=0&&"[object Function]"===t.call(e.callee)),n}},2837:(e,t,r)=>{"use strict";var n=r(2215),i=r(5419)(),a=r(1924),o=Object,s=a("Array.prototype.push"),l=a("Object.prototype.propertyIsEnumerable"),u=i?Object.getOwnPropertySymbols:null;e.exports=function(e,t){if(null==e)throw new TypeError("target must be an object");var r=o(e);if(1===arguments.length)return r;for(var a=1;a<arguments.length;++a){var c=o(arguments[a]),h=n(c),d=i&&(Object.getOwnPropertySymbols||u);if(d)for(var f=d(c),p=0;p<f.length;++p){var m=f[p];l(c,m)&&s(h,m)}for(var g=0;g<h.length;++g){var v=h[g];if(l(c,v)){var y=c[v];r[v]=y}}}return r}},8162:(e,t,r)=>{"use strict";var n=r(2837);e.exports=function(){return Object.assign?function(){if(!Object.assign)return!1;for(var e="abcdefghijklmnopqrst",t=e.split(""),r={},n=0;n<t.length;++n)r[t[n]]=t[n];var i=Object.assign({},r),a="";for(var o in i)a+=o;return e!==a}()||function(){if(!Object.assign||!Object.preventExtensions)return!1;var e=Object.preventExtensions({1:2});try{Object.assign(e,"xy")}catch(t){return"y"===e[1]}return!1}()?n:Object.assign:n}},4155:e=>{var t,r,n=e.exports={};function i(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function o(e){if(t===setTimeout)return setTimeout(e,0);if((t===i||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(r){try{return t.call(null,e,0)}catch(r){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:i}catch(e){t=i}try{r="function"==typeof clearTimeout?clearTimeout:a}catch(e){r=a}}();var s,l=[],u=!1,c=-1;function h(){u&&s&&(u=!1,s.length?l=s.concat(l):c=-1,l.length&&d())}function d(){if(!u){var e=o(h);u=!0;for(var t=l.length;t;){for(s=l,l=[];++c<t;)s&&s[c].run();c=-1,t=l.length}s=null,u=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{return r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function f(e,t){this.fun=e,this.array=t}function p(){}n.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];l.push(new f(e,t)),1!==l.length||u||o(d)},f.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=p,n.addListener=p,n.once=p,n.off=p,n.removeListener=p,n.removeAllListeners=p,n.emit=p,n.prependListener=p,n.prependOnceListener=p,n.listeners=function(e){return[]},n.binding=function(e){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(e){throw new Error("process.chdir is not supported")},n.umask=function(){return 0}},384:e=>{e.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},5955:(e,t,r)=>{"use strict";var n=r(2584),i=r(8662),a=r(6430),o=r(5692);function s(e){return e.call.bind(e)}var l="undefined"!=typeof BigInt,u="undefined"!=typeof Symbol,c=s(Object.prototype.toString),h=s(Number.prototype.valueOf),d=s(String.prototype.valueOf),f=s(Boolean.prototype.valueOf);if(l)var p=s(BigInt.prototype.valueOf);if(u)var m=s(Symbol.prototype.valueOf);function g(e,t){if("object"!=typeof e)return!1;try{return t(e),!0}catch(e){return!1}}function v(e){return"[object Map]"===c(e)}function y(e){return"[object Set]"===c(e)}function b(e){return"[object WeakMap]"===c(e)}function E(e){return"[object WeakSet]"===c(e)}function x(e){return"[object ArrayBuffer]"===c(e)}function w(e){return"undefined"!=typeof ArrayBuffer&&(x.working?x(e):e instanceof ArrayBuffer)}function T(e){return"[object DataView]"===c(e)}function _(e){return"undefined"!=typeof DataView&&(T.working?T(e):e instanceof DataView)}t.isArgumentsObject=n,t.isGeneratorFunction=i,t.isTypedArray=o,t.isPromise=function(e){return"undefined"!=typeof Promise&&e instanceof Promise||null!==e&&"object"==typeof e&&"function"==typeof e.then&&"function"==typeof e.catch},t.isArrayBufferView=function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):o(e)||_(e)},t.isUint8Array=function(e){return"Uint8Array"===a(e)},t.isUint8ClampedArray=function(e){return"Uint8ClampedArray"===a(e)},t.isUint16Array=function(e){return"Uint16Array"===a(e)},t.isUint32Array=function(e){return"Uint32Array"===a(e)},t.isInt8Array=function(e){return"Int8Array"===a(e)},t.isInt16Array=function(e){return"Int16Array"===a(e)},t.isInt32Array=function(e){return"Int32Array"===a(e)},t.isFloat32Array=function(e){return"Float32Array"===a(e)},t.isFloat64Array=function(e){return"Float64Array"===a(e)},t.isBigInt64Array=function(e){return"BigInt64Array"===a(e)},t.isBigUint64Array=function(e){return"BigUint64Array"===a(e)},v.working="undefined"!=typeof Map&&v(new Map),t.isMap=function(e){return"undefined"!=typeof Map&&(v.working?v(e):e instanceof Map)},y.working="undefined"!=typeof Set&&y(new Set),t.isSet=function(e){return"undefined"!=typeof Set&&(y.working?y(e):e instanceof Set)},b.working="undefined"!=typeof WeakMap&&b(new WeakMap),t.isWeakMap=function(e){return"undefined"!=typeof WeakMap&&(b.working?b(e):e instanceof WeakMap)},E.working="undefined"!=typeof WeakSet&&E(new WeakSet),t.isWeakSet=function(e){return E(e)},x.working="undefined"!=typeof ArrayBuffer&&x(new ArrayBuffer),t.isArrayBuffer=w,T.working="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView&&T(new DataView(new ArrayBuffer(1),0,1)),t.isDataView=_;var S="undefined"!=typeof SharedArrayBuffer?SharedArrayBuffer:void 0;function M(e){return"[object SharedArrayBuffer]"===c(e)}function R(e){return void 0!==S&&(void 0===M.working&&(M.working=M(new S)),M.working?M(e):e instanceof S)}function A(e){return g(e,h)}function C(e){return g(e,d)}function L(e){return g(e,f)}function O(e){return l&&g(e,p)}function I(e){return u&&g(e,m)}t.isSharedArrayBuffer=R,t.isAsyncFunction=function(e){return"[object AsyncFunction]"===c(e)},t.isMapIterator=function(e){return"[object Map Iterator]"===c(e)},t.isSetIterator=function(e){return"[object Set Iterator]"===c(e)},t.isGeneratorObject=function(e){return"[object Generator]"===c(e)},t.isWebAssemblyCompiledModule=function(e){return"[object WebAssembly.Module]"===c(e)},t.isNumberObject=A,t.isStringObject=C,t.isBooleanObject=L,t.isBigIntObject=O,t.isSymbolObject=I,t.isBoxedPrimitive=function(e){return A(e)||C(e)||L(e)||O(e)||I(e)},t.isAnyArrayBuffer=function(e){return"undefined"!=typeof Uint8Array&&(w(e)||R(e))},["isProxy","isExternal","isModuleNamespaceObject"].forEach((function(e){Object.defineProperty(t,e,{enumerable:!1,value:function(){throw new Error(e+" is not supported in userland")}})}))},9539:(e,t,r)=>{var n=r(4155),i=r(5108),a=Object.getOwnPropertyDescriptors||function(e){for(var t=Object.keys(e),r={},n=0;n<t.length;n++)r[t[n]]=Object.getOwnPropertyDescriptor(e,t[n]);return r},o=/%[sdj%]/g;t.format=function(e){if(!E(e)){for(var t=[],r=0;r<arguments.length;r++)t.push(c(arguments[r]));return t.join(" ")}r=1;for(var n=arguments,i=n.length,a=String(e).replace(o,(function(e){if("%%"===e)return"%";if(r>=i)return e;switch(e){case"%s":return String(n[r++]);case"%d":return Number(n[r++]);case"%j":try{return JSON.stringify(n[r++])}catch(e){return"[Circular]"}default:return e}})),s=n[r];r<i;s=n[++r])y(s)||!T(s)?a+=" "+s:a+=" "+c(s);return a},t.deprecate=function(e,r){if(void 0!==n&&!0===n.noDeprecation)return e;if(void 0===n)return function(){return t.deprecate(e,r).apply(this,arguments)};var a=!1;return function(){if(!a){if(n.throwDeprecation)throw new Error(r);n.traceDeprecation?i.trace(r):i.error(r),a=!0}return e.apply(this,arguments)}};var s={},l=/^$/;if(n.env.NODE_DEBUG){var u=n.env.NODE_DEBUG;u=u.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase(),l=new RegExp("^"+u+"$","i")}function c(e,r){var n={seen:[],stylize:d};return arguments.length>=3&&(n.depth=arguments[2]),arguments.length>=4&&(n.colors=arguments[3]),v(r)?n.showHidden=r:r&&t._extend(n,r),x(n.showHidden)&&(n.showHidden=!1),x(n.depth)&&(n.depth=2),x(n.colors)&&(n.colors=!1),x(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=h),f(n,e,n.depth)}function h(e,t){var r=c.styles[t];return r?"["+c.colors[r][0]+"m"+e+"["+c.colors[r][1]+"m":e}function d(e,t){return e}function f(e,r,n){if(e.customInspect&&r&&M(r.inspect)&&r.inspect!==t.inspect&&(!r.constructor||r.constructor.prototype!==r)){var i=r.inspect(n,e);return E(i)||(i=f(e,i,n)),i}var a=function(e,t){if(x(t))return e.stylize("undefined","undefined");if(E(t)){var r="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(r,"string")}if(b(t))return e.stylize(""+t,"number");if(v(t))return e.stylize(""+t,"boolean");if(y(t))return e.stylize("null","null")}(e,r);if(a)return a;var o=Object.keys(r),s=function(e){var t={};return e.forEach((function(e,r){t[e]=!0})),t}(o);if(e.showHidden&&(o=Object.getOwnPropertyNames(r)),S(r)&&(o.indexOf("message")>=0||o.indexOf("description")>=0))return p(r);if(0===o.length){if(M(r)){var l=r.name?": "+r.name:"";return e.stylize("[Function"+l+"]","special")}if(w(r))return e.stylize(RegExp.prototype.toString.call(r),"regexp");if(_(r))return e.stylize(Date.prototype.toString.call(r),"date");if(S(r))return p(r)}var u,c="",h=!1,d=["{","}"];(g(r)&&(h=!0,d=["[","]"]),M(r))&&(c=" [Function"+(r.name?": "+r.name:"")+"]");return w(r)&&(c=" "+RegExp.prototype.toString.call(r)),_(r)&&(c=" "+Date.prototype.toUTCString.call(r)),S(r)&&(c=" "+p(r)),0!==o.length||h&&0!=r.length?n<0?w(r)?e.stylize(RegExp.prototype.toString.call(r),"regexp"):e.stylize("[Object]","special"):(e.seen.push(r),u=h?function(e,t,r,n,i){for(var a=[],o=0,s=t.length;o<s;++o)L(t,String(o))?a.push(m(e,t,r,n,String(o),!0)):a.push("");return i.forEach((function(i){i.match(/^\d+$/)||a.push(m(e,t,r,n,i,!0))})),a}(e,r,n,s,o):o.map((function(t){return m(e,r,n,s,t,h)})),e.seen.pop(),function(e,t,r){var n=e.reduce((function(e,t){return t.indexOf("\n")>=0&&0,e+t.replace(/\u001b\[\d\d?m/g,"").length+1}),0);if(n>60)return r[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+r[1];return r[0]+t+" "+e.join(", ")+" "+r[1]}(u,c,d)):d[0]+c+d[1]}function p(e){return"["+Error.prototype.toString.call(e)+"]"}function m(e,t,r,n,i,a){var o,s,l;if((l=Object.getOwnPropertyDescriptor(t,i)||{value:t[i]}).get?s=l.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):l.set&&(s=e.stylize("[Setter]","special")),L(n,i)||(o="["+i+"]"),s||(e.seen.indexOf(l.value)<0?(s=y(r)?f(e,l.value,null):f(e,l.value,r-1)).indexOf("\n")>-1&&(s=a?s.split("\n").map((function(e){return"  "+e})).join("\n").slice(2):"\n"+s.split("\n").map((function(e){return"   "+e})).join("\n")):s=e.stylize("[Circular]","special")),x(o)){if(a&&i.match(/^\d+$/))return s;(o=JSON.stringify(""+i)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(o=o.slice(1,-1),o=e.stylize(o,"name")):(o=o.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),o=e.stylize(o,"string"))}return o+": "+s}function g(e){return Array.isArray(e)}function v(e){return"boolean"==typeof e}function y(e){return null===e}function b(e){return"number"==typeof e}function E(e){return"string"==typeof e}function x(e){return void 0===e}function w(e){return T(e)&&"[object RegExp]"===R(e)}function T(e){return"object"==typeof e&&null!==e}function _(e){return T(e)&&"[object Date]"===R(e)}function S(e){return T(e)&&("[object Error]"===R(e)||e instanceof Error)}function M(e){return"function"==typeof e}function R(e){return Object.prototype.toString.call(e)}function A(e){return e<10?"0"+e.toString(10):e.toString(10)}t.debuglog=function(e){if(e=e.toUpperCase(),!s[e])if(l.test(e)){var r=n.pid;s[e]=function(){var n=t.format.apply(t,arguments);i.error("%s %d: %s",e,r,n)}}else s[e]=function(){};return s[e]},t.inspect=c,c.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},c.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},t.types=r(5955),t.isArray=g,t.isBoolean=v,t.isNull=y,t.isNullOrUndefined=function(e){return null==e},t.isNumber=b,t.isString=E,t.isSymbol=function(e){return"symbol"==typeof e},t.isUndefined=x,t.isRegExp=w,t.types.isRegExp=w,t.isObject=T,t.isDate=_,t.types.isDate=_,t.isError=S,t.types.isNativeError=S,t.isFunction=M,t.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},t.isBuffer=r(384);var C=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function L(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.log=function(){var e,r;i.log("%s - %s",(e=new Date,r=[A(e.getHours()),A(e.getMinutes()),A(e.getSeconds())].join(":"),[e.getDate(),C[e.getMonth()],r].join(" ")),t.format.apply(t,arguments))},t.inherits=r(5717),t._extend=function(e,t){if(!t||!T(t))return e;for(var r=Object.keys(t),n=r.length;n--;)e[r[n]]=t[r[n]];return e};var O="undefined"!=typeof Symbol?Symbol("util.promisify.custom"):void 0;function I(e,t){if(!e){var r=new Error("Promise was rejected with a falsy value");r.reason=e,e=r}return t(e)}t.promisify=function(e){if("function"!=typeof e)throw new TypeError('The "original" argument must be of type Function');if(O&&e[O]){var t;if("function"!=typeof(t=e[O]))throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(t,O,{value:t,enumerable:!1,writable:!1,configurable:!0}),t}function t(){for(var t,r,n=new Promise((function(e,n){t=e,r=n})),i=[],a=0;a<arguments.length;a++)i.push(arguments[a]);i.push((function(e,n){e?r(e):t(n)}));try{e.apply(this,i)}catch(e){r(e)}return n}return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),O&&Object.defineProperty(t,O,{value:t,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(t,a(e))},t.promisify.custom=O,t.callbackify=function(e){if("function"!=typeof e)throw new TypeError('The "original" argument must be of type Function');function t(){for(var t=[],r=0;r<arguments.length;r++)t.push(arguments[r]);var i=t.pop();if("function"!=typeof i)throw new TypeError("The last argument must be of type Function");var a=this,o=function(){return i.apply(a,arguments)};e.apply(this,t).then((function(e){n.nextTick(o.bind(null,null,e))}),(function(e){n.nextTick(I.bind(null,e,o))}))}return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),Object.defineProperties(t,a(e)),t}},6430:(e,t,r)=>{"use strict";var n=r(4029),i=r(6314),a=r(5559),o=r(1924),s=r(7296),l=o("Object.prototype.toString"),u=r(6410)(),c="undefined"==typeof globalThis?r.g:globalThis,h=i(),d=o("String.prototype.slice"),f=Object.getPrototypeOf,p=o("Array.prototype.indexOf",!0)||function(e,t){for(var r=0;r<e.length;r+=1)if(e[r]===t)return r;return-1},m={__proto__:null};n(h,u&&s&&f?function(e){var t=new c[e];if(Symbol.toStringTag in t){var r=f(t),n=s(r,Symbol.toStringTag);if(!n){var i=f(r);n=s(i,Symbol.toStringTag)}m["$"+e]=a(n.get)}}:function(e){var t=new c[e];m["$"+e]=a(t.slice)});e.exports=function(e){if(!e||"object"!=typeof e)return!1;if(!u){var t=d(l(e),8,-1);return p(h,t)>-1?t:"Object"===t&&function(e){var t=!1;return n(m,(function(r,n){if(!t)try{r(e),t=d(n,1)}catch(e){}})),t}(e)}return s?function(e){var t=!1;return n(m,(function(r,n){if(!t)try{"$"+r(e)===n&&(t=d(n,1))}catch(e){}})),t}(e):null}},8163:(e,t,r)=>{var n="undefined"!=typeof window?window:r.g;n.getScriptSrcPathbase=function(e){var t="./";return-1==e.lastIndexOf("/")||0==e.indexOf("./")?t:t=e.substr(0,e.lastIndexOf("/")+1)},n.getJsFileRuntimePath=function(){for(var e=document.getElementsByTagName("script"),t=0;t<e.length;++t){var r=e[t].getAttribute("src");if(r&&-1!=r.indexOf("SpatiotemporalPlatform.js"))return SpatiotemporalPlatform.getScriptSrcPathbase(r)}return"./"},r.p="undefined"==typeof document?"":document.currentScript.src?getScriptSrcPathbase(document.currentScript.src):getJsFileRuntimePath()},2906:()=>{THREE.BirdGeometry=function(e,t){THREE.BufferGeometry.call(this);var r=3*e,n=3*r,i=new THREE.BufferAttribute(new Float32Array(3*n),3),a=new THREE.BufferAttribute(new Float32Array(3*n),3),o=new THREE.BufferAttribute(new Float32Array(2*n),2),s=new THREE.BufferAttribute(new Float32Array(n),1);this.addAttribute("position",i),this.addAttribute("birdColor",a),this.addAttribute("reference",o),this.addAttribute("birdVertex",s);let l=0;function u(){for(var e=0;e<arguments.length;e++)i.array[l++]=arguments[e]}for(var c=0;c<e;c++)u(0,-0,-20,0,4,-20,0,0,30),u(0,0,-15,-20,0,0,0,0,15),u(0,0,15,20,0,0,0,0,-15);for(let n=0;n<3*r;n++){var h=~~(n/3),d=h%t/t,f=~~(h/t)/t,p=new THREE.Color(4473924+~~(n/9)/e*6710886);a.array[3*n+0]=p.r,a.array[3*n+1]=p.g,a.array[3*n+2]=p.b,o.array[2*n]=d,o.array[2*n+1]=f,s.array[n]=n%9}this.scale(.2,.2,.2)},THREE.BirdGeometry.prototype=Object.create(THREE.BufferGeometry.prototype),THREE.BirdShader={fragmentShaderPosition:["uniform float time;","uniform float delta;","void main()    {","   vec2 uv = gl_FragCoord.xy / resolution.xy;","   vec4 tmpPos = texture2D(texturePosition, uv);","   vec3 position = tmpPos.xyz;","   vec3 velocity = texture2D(textureVelocity, uv).xyz;","   float phase = tmpPos.w;","   phase = mod((phase + delta +","       length(velocity.xz) * delta * 3. +","       max(velocity.y, 0.0) * delta * 6.), 62.83);","   gl_FragColor = vec4(position + velocity * delta * 15. , phase);","}"].join("\n"),fragmentShaderVelocity:["uniform float time;","uniform float testing;","uniform float delta; // about 0.016","uniform float seperationDistance; // 20","uniform float alignmentDistance; // 40","uniform float cohesionDistance; //","uniform float freedomFactor;","uniform vec3 predator;","const float width = resolution.x;","const float height = resolution.y;","const float PI = 3.141592653589793;","const float PI_2 = PI * 2.0;","// const float VISION = PI * 0.55;","float zoneRadius = 40.0;","float zoneRadiusSquared = 1600.0;","float separationThresh = 0.45;","float alignmentThresh = 0.65;","const float UPPER_BOUNDS = BOUNDS;","const float LOWER_BOUNDS = -UPPER_BOUNDS;","const float SPEED_LIMIT = 9.0;","float rand(vec2 co){","   return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);","}","void main() {","   zoneRadius = seperationDistance + alignmentDistance + cohesionDistance;","   separationThresh = seperationDistance / zoneRadius;","   alignmentThresh = (seperationDistance + alignmentDistance) / zoneRadius;","   zoneRadiusSquared = zoneRadius * zoneRadius;","   vec2 uv = gl_FragCoord.xy / resolution.xy;","   vec3 birdPosition, birdVelocity;","   vec3 selfPosition = texture2D(texturePosition, uv).xyz;","   vec3 selfVelocity = texture2D(textureVelocity, uv).xyz;","   float dist;","   vec3 dir; // direction","   float distSquared;","   float seperationSquared = seperationDistance * seperationDistance;","   float cohesionSquared = cohesionDistance * cohesionDistance;","   float f;","   float percent;","   vec3 velocity = selfVelocity;","   float limit = SPEED_LIMIT;","   dir = predator * UPPER_BOUNDS - selfPosition;","   dir.z = 0.;","   // dir.z *= 0.6;","   dist = length(dir);","   distSquared = dist * dist;","   float preyRadius = 150.0;","   float preyRadiusSq = preyRadius * preyRadius;","   // move birds away from predator","   if (dist < preyRadius) {","       f = (distSquared / preyRadiusSq - 1.0) * delta * 100.;","       velocity += normalize(dir) * f;","       limit += 5.0;","   }","   // if (testing == 0.0) {}","   // if (rand(uv + time) < freedomFactor) {}","   // Attract flocks to the center","   vec3 central = vec3(0., 0., 0.);","   dir = selfPosition - central;","   dist = length(dir);","   dir.y *= 2.5;","   velocity -= normalize(dir) * delta * 5.;","   for (float y=0.0;y<height;y++) {","       for (float x=0.0;x<width;x++) {","           vec2 ref = vec2(x + 0.5, y + 0.5) / resolution.xy;","           birdPosition = texture2D(texturePosition, ref).xyz;","           dir = birdPosition - selfPosition;","           dist = length(dir);","           if (dist < 0.0001) continue;","           distSquared = dist * dist;","           if (distSquared > zoneRadiusSquared) continue;","           percent = distSquared / zoneRadiusSquared;","           if (percent < separationThresh) { // low","               // Separation - Move apart for comfort","               f = (separationThresh / percent - 1.0) * delta;","               velocity -= normalize(dir) * f;","           } else if (percent < alignmentThresh) { // high","               // Alignment - fly the same direction","               float threshDelta = alignmentThresh - separationThresh;","               float adjustedPercent = (percent - separationThresh) / threshDelta;","               birdVelocity = texture2D(textureVelocity, ref).xyz;","               f = (0.5 - cos(adjustedPercent * PI_2) * 0.5 + 0.5) * delta;","               velocity += normalize(birdVelocity) * f;","           } else {","               // Attraction / Cohesion - move closer","               float threshDelta = 1.0 - alignmentThresh;","               float adjustedPercent = (percent - alignmentThresh) / threshDelta;","               f = (0.5 - (cos(adjustedPercent * PI_2) * -0.5 + 0.5)) * delta;","               velocity += normalize(dir) * f;","           }","       }","   }","   // this make tends to fly around than down or up","   // if (velocity.y > 0.) velocity.y *= (1. - 0.2 * delta);","   // Speed Limits","   if (length(velocity) > limit) {","       velocity = normalize(velocity) * limit;","   }","   gl_FragColor = vec4(velocity, 1.0);","}"].join("\n"),birdVS:["attribute vec2 reference;","attribute float birdVertex;","attribute vec3 birdColor;","uniform sampler2D texturePosition;","uniform sampler2D textureVelocity;","varying vec4 vColor;","varying float z;","uniform float time;","void main() {","   vec4 tmpPos = texture2D(texturePosition, reference);","   vec3 pos = tmpPos.xyz;","   vec3 velocity = normalize(texture2D(textureVelocity, reference).xyz);","   vec3 newPosition = position;","   if (birdVertex == 4.0 || birdVertex == 7.0) {","       newPosition.y = sin(tmpPos.w) * 5.; // flap wings","   }","   newPosition = mat3(modelMatrix) * newPosition;","   velocity.z *= -1.;","   float xz = length(velocity.xz);","   float xyz = 1.;","   float x = sqrt(1. - velocity.y * velocity.y);","   float cosry = velocity.x / xz;","   float sinry = velocity.z / xz;","   float cosrz = x / xyz;","   float sinrz = velocity.y / xyz;","   mat3 maty =  mat3(","       cosry, 0, -sinry,","       0    , 1, 0     ,","       sinry, 0, cosry"," );","   mat3 matz =  mat3(","       cosrz , sinrz, 0,","       -sinrz, cosrz, 0,","       0     , 0    , 1"," );","   newPosition =  maty * matz * newPosition;","   newPosition += pos;","   z = newPosition.z;","   vColor = vec4(birdColor, 1.0);","   gl_Position = projectionMatrix *  viewMatrix  * vec4(newPosition, 1.0);","}"].join("\n"),birdFS:["varying vec4 vColor;","varying float z;","uniform vec3 color;","void main() {","   // Fake colors for now","   float z2 = 0.2 + (1000. - z) / 1000. * vColor.x;","   gl_FragColor = vec4(z2, z2, z2, 1.);","}"].join("\n")}},6221:()=>{THREE.FixedSizeShader={fragmentShader:["void main() {","   gl_FragColor = vec4(1.0, 0.0, 0.0, 1.0);","}"].join("\n"),uniforms:{center:{value:new THREE.Vector3(0,0,0)},pixelRatio:{value:100}},vertexShader:["uniform vec3 center;","uniform float pixelRatio;","void main() {","   vec4 mvCenterPosition = modelViewMatrix * vec4(center, 1.0);","   float len = length(center - cameraPosition);","   float ratio = len * pixelRatio;","   vec3 newPosition = position * ratio;","   vec4 mvPosition = modelViewMatrix * vec4(newPosition, 1.0);","   gl_Position = projectionMatrix * mvPosition;","}"].join("\n")}},8748:()=>{THREE.InstancesShader={vertMerged:["#define SHADER_NAME vertMerged","precision highp float;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","attribute vec3 position;","#ifdef PICKING","   attribute vec3 pickingColor;","#else","   attribute vec3 color;","   varying vec3 vPosition;","#endif","varying vec3 vColor;","void main()    {","   vec3 positionEye = (modelViewMatrix * vec4(position, 1.0)).xyz;","   #ifdef PICKING","       vColor = pickingColor;","   #else","       vColor = color;","       vPosition = positionEye;","   #endif","   gl_Position = projectionMatrix * vec4(positionEye, 1.0);","}"].join("\n"),fragMerged:["#define SHADER_NAME fragMerged","#extension GL_OES_standard_derivatives: enable","precision highp float;","varying vec3 vColor;","#ifndef PICKING","   varying vec3 vPosition;","#endif","void main()    {","   #ifdef PICKING","       gl_FragColor = vec4(vColor, 1.0);","   #else","       vec3 fdx = dFdx(vPosition);","       vec3 fdy = dFdy(vPosition);","       vec3 normal = normalize(cross(fdx, fdy));","       float diffuse = dot(normal, vec3(0.0, 0.0, 1.0));","       gl_FragColor = vec4(diffuse * vColor, 1.0);","   #endif","}"].join("\n"),vertInstanced:["#define SHADER_NAME vertInstanced","precision highp float;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","attribute vec3 position;","attribute vec3 mcol0;","attribute vec3 mcol1;","attribute vec3 mcol2;","attribute vec3 mcol3;","#ifdef PICKING","   attribute vec3 pickingColor;","#else","   attribute vec3 color;","   varying vec3 vPosition;","#endif","varying vec3 vColor;","void main() {","   mat4 matrix = mat4(","       vec4(mcol0, 0),","       vec4(mcol1, 0),","       vec4(mcol2, 0),","       vec4(mcol3, 1)"," );","   vec3 positionEye = (modelViewMatrix * matrix * vec4(position, 1.0)).xyz;","   #ifdef PICKING","       vColor = pickingColor;","   #else","       vColor = color;","       vPosition = positionEye;","   #endif","   gl_Position = projectionMatrix * vec4(positionEye, 1.0);","}"].join("\n"),fragInstanced:["#define SHADER_NAME fragInstanced","#extension GL_OES_standard_derivatives: enable","precision highp float;","varying vec3 vColor;","#ifndef PICKING","   varying vec3 vPosition;","#endif","void main()    {","   #ifdef PICKING","       gl_FragColor = vec4(vColor, 1.0);","   #else","       vec3 fdx = dFdx(vPosition);","       vec3 fdy = dFdy(vPosition);","       vec3 normal = normalize(cross(fdx, fdy));","       float diffuse = dot(normal, vec3(0.0, 0.0, 1.0));","       gl_FragColor = vec4(diffuse * vColor, 1.0);","   #endif","}"].join("\n"),vertMaterial:["#define SHADER_NAME vertMaterial","precision highp float;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","attribute vec3 position;","#ifndef PICKING","   varying vec3 vPosition;","#endif","void main() {","   vec3 positionEye = (modelViewMatrix * vec4(position, 1.0)).xyz;","   #ifndef PICKING","       vPosition = positionEye;","   #endif","   gl_Position = projectionMatrix * vec4(positionEye, 1.0);","}"].join("\n"),fragMaterial:["#define SHADER_NAME fragMaterial","#extension GL_OES_standard_derivatives: enable","precision highp float;","#ifdef PICKING","   uniform vec3 pickingColor;","#else","   uniform vec3 color;","   varying vec3 vPosition;","#endif","void main() {","   #ifdef PICKING","       gl_FragColor = vec4(pickingColor, 1.0);","   #else","       vec3 fdx = dFdx(vPosition);","       vec3 fdy = dFdy(vPosition);","       vec3 normal = normalize(cross(fdx, fdy));","       float diffuse = dot(normal, vec3(0.0, 0.0, 1.0));","       gl_FragColor = vec4(diffuse * color, 1.0);","   #endif","}"].join("\n")}},8854:()=>{"use strict";THREE.ObjectlistLoader=function(e){this.manager=void 0!==e?e:THREE.DefaultLoadingManager},THREE.ObjectlistLoader.prototype={constructor:THREE.ObjectlistLoader,load:function(e,t,r,n){var i=this;i.url=e;var a=new THREE.FileLoader(this.manager);a.setResponseType("arraybuffer"),a.load(e,(function(e){t(i.parse(e))}),r,n)},parse:function(e){for(var t=new DataView(e),r=0,n=0;n<8;n++){var i=t.getUint8(r);r++,String.fromCharCode(i)}var a=t.getInt32(r,!0);r+=4;for(var o=[],s=0;s<a;s++){var l=t.getUint16(r,!0);r+=2;for(var u="";l>0;){let e=t.getUint8(r);r++,l--,u+=String.fromCharCode(e)}for(var c=[],h=0;h<6;h++)c.push(t.getFloat32(r,!0)),r+=4;var d=c[2];c[2]=-c[5],c[5]=-d,o.push({f:u,b:c})}return o}}},7728:()=>{THREE.PointShader={vertexshader:["attribute float size;","attribute vec3 customColor;","varying vec3 vColor;","void main() {","   vColor = customColor;","   vec4 mvPosition = modelViewMatrix * vec4(position, 1.0);","   gl_PointSize = size * (300.0 / -mvPosition.z);","   gl_Position = projectionMatrix * mvPosition;","}"].join("\n"),fragmentshader:["uniform vec3 color;","uniform sampler2D texture;","varying vec3 vColor;","void main() {","   gl_FragColor = vec4(color * vColor, 1.0);","   gl_FragColor = gl_FragColor * texture2D(texture, gl_PointCoord);","   if (gl_FragColor.a < ALPHATEST) {","       discard;","   }","}"].join("\n")}},9549:()=>{THREE.ProtoplanetShader={computeShaderPosition:["#define delta (1.0 / 60.0)","void main() {","   vec2 uv = gl_FragCoord.xy / resolution.xy;","   vec4 tmpPos = texture2D(texturePosition, uv);","   vec3 pos = tmpPos.xyz;","   vec4 tmpVel = texture2D(textureVelocity, uv);","   vec3 vel = tmpVel.xyz;","   float mass = tmpVel.w;","   if (mass == 0.0) {","       vel = vec3(0.0);","   }","   // Dynamics","   pos += vel * delta;","   gl_FragColor = vec4(pos, 1.0);","}"].join("\n"),computeShaderVelocity:["// For PI declaration:","#include <common>","#define delta (1.0 / 60.0)","uniform float gravityConstant;","uniform float density;","const float width = resolution.x;","const float height = resolution.y;","float radiusFromMass(float mass) {","   // Calculate radius of a sphere from mass and density","   return pow((3.0 / (4.0 * PI)) * mass / density, 1.0 / 3.0);","}","void main()    {","   vec2 uv = gl_FragCoord.xy / resolution.xy;","   float idParticle = uv.y * resolution.x + uv.x;","   vec4 tmpPos = texture2D(texturePosition, uv);","   vec3 pos = tmpPos.xyz;","   vec4 tmpVel = texture2D(textureVelocity, uv);","   vec3 vel = tmpVel.xyz;","   float mass = tmpVel.w;","   if (mass > 0.0) {","       float radius = radiusFromMass(mass);","       vec3 acceleration = vec3(0.0);","       // Gravity interaction","       for (float y = 0.0; y < height; y++) {","           for (float x = 0.0; x < width; x++) {","               vec2 secondParticleCoords = vec2(x + 0.5, y + 0.5) / resolution.xy;","               vec3 pos2 = texture2D(texturePosition, secondParticleCoords).xyz;","               vec4 velTemp2 = texture2D(textureVelocity, secondParticleCoords);","               vec3 vel2 = velTemp2.xyz;","               float mass2 = velTemp2.w;","               float idParticle2 = secondParticleCoords.y * resolution.x + secondParticleCoords.x;","               if (idParticle == idParticle2) {","                   continue;","               }","               if (mass2 == 0.0) {","                   continue;","               }","               vec3 dPos = pos2 - pos;","               float distance = length(dPos);","               float radius2 = radiusFromMass(mass2);","               if (distance == 0.0) {","                   continue;","               }","               // Checks collision","               if (distance < radius + radius2) {","                   if (idParticle < idParticle2) {","                       // This particle is aggregated by the other","                       vel = (vel * mass + vel2 * mass2) / (mass + mass2);","                       mass += mass2;","                       radius = radiusFromMass(mass);","                   }","                   else {","                       // This particle dies","                       mass = 0.0;","                       radius = 0.0;","                       vel = vec3(0.0);","                       break;","                   }","               }","               float distanceSq = distance * distance;","               float gravityField = gravityConstant * mass2 / distanceSq;","               gravityField = min(gravityField, 1000.0);","               acceleration += gravityField * normalize(dPos);","           }","           if (mass == 0.0) {","               break;","           }","       }","       // Dynamics","       vel += delta * acceleration;","   }","   gl_FragColor = vec4(vel, mass);","}"].join("\n"),particleVertexShader:["// For PI declaration:","#include <common>","uniform sampler2D texturePosition;","uniform sampler2D textureVelocity;","uniform float cameraConstant;","uniform float density;","varying vec4 vColor;","float radiusFromMass(float mass) {","   // Calculate radius of a sphere from mass and density","   return pow((3.0 / (4.0 * PI)) * mass / density, 1.0 / 3.0);","}","void main() {","   vec4 posTemp = texture2D(texturePosition, uv);","   vec3 pos = posTemp.xyz;","   vec4 velTemp = texture2D(textureVelocity, uv);","   vec3 vel = velTemp.xyz;","   float mass = velTemp.w;","   vColor = vec4(1.0, mass / 250.0, 0.0, 1.0);","   vec4 mvPosition = modelViewMatrix * vec4(pos, 1.0);","   // Calculate radius of a sphere from mass and density","   //float radius = pow((3.0 / (4.0 * PI)) * mass / density, 1.0 / 3.0);","   float radius = radiusFromMass(mass);","   // Apparent size in pixels","   if (mass == 0.0) {","       gl_PointSize = 0.0;","   }","   else {","       gl_PointSize = radius * cameraConstant / (- mvPosition.z);","   }","   gl_Position = projectionMatrix * mvPosition;","}"].join("\n"),particleFragmentShader:["varying vec4 vColor;","void main() {","   float f = length(gl_PointCoord - vec2(0.5, 0.5));","   if (f > 0.5) {","       discard;","   }","   gl_FragColor = vColor;","}"].join("\n")}},8025:(e,t,r)=>{"use strict";var n,i=r(5108),a=new Map,o=!1,s=new Set;window.selectedObjs=s,window.pickMesh=function(e,t){o=!0;let r,n=e.pick(t);return o=!1,a.has(n)&&(r=a.get(n)),{objId:n,fileName:r}};window.pickMesh2=function(e,t){null==n&&((n=new THREE.Mesh(new THREE.BoxGeometry(1,1,1),new THREE.MeshLambertMaterial({emissive:16776960,transparent:!0,opacity:.5,side:THREE.FrontSide}))).visible=!1,e.sceneRoot.add(n))};var l=!1;function u(e,t,r,n,i,a){if(l!==i.wireframe&&(i.wireframe=l,i.needsUpdate=!0),this.hasOwnProperty("isWater")&&i.hasOwnProperty("uniforms")&&(i.uniforms.hasOwnProperty("time")&&(i.uniforms.time.value+=.001,i.needsUpdate=!0),i.uniforms.hasOwnProperty("u_time")&&(i.uniforms.u_time.value+=.01,i.needsUpdate=!0),i.uniforms.hasOwnProperty("eye"))){var u=new THREE.Vector3;u.setFromMatrixPosition(r.matrixWorld),i.uniforms.eye.value=u}if(i.hasOwnProperty("uniforms")){var c=[],h=i.uniforms;if(h.hasOwnProperty("isPicking")&&(h.isPicking!==o&&(h.isPicking.value=o,c.push("isPicking")),o?(h.objectId.value=this.objectId,c.push("objectId")):(h.selected.value=s.has(this.objectId),c.push("selected"))),h.hasOwnProperty("isTextureReady")&&h.hasOwnProperty("tDiffuse")&&(h.isTextureReady.value=null!=this.userData.tDiffuse&&null!=this.userData.tDiffuse&&this.userData.tDiffuse.isTextureReady,c.push("isTextureReady")),h.tDiffuse&&this.userData.hasOwnProperty("tDiffuse")&&(h.tDiffuse.value=this.userData.tDiffuse,c.push("tDiffuse")),c.length){var d=e.properties.get(i);if(d.program){var f=e.getContext(),p=d.program;f.useProgram(p.program);var m=p.getUniforms();c.forEach((function(e){m.setValue(f,e,h[e].value)}))}}}}function c(e,t){if(!t.intersectsBox(e))return 0;var r=[];r.push(new THREE.Vector3(e.min.x,e.min.y,e.min.z)),r.push(new THREE.Vector3(e.max.x,e.min.y,e.min.z)),r.push(new THREE.Vector3(e.min.x,e.max.y,e.min.z)),r.push(new THREE.Vector3(e.max.x,e.max.y,e.min.z)),r.push(new THREE.Vector3(e.min.x,e.min.y,e.max.z)),r.push(new THREE.Vector3(e.max.x,e.min.y,e.max.z)),r.push(new THREE.Vector3(e.min.x,e.max.y,e.max.z)),r.push(new THREE.Vector3(e.max.x,e.max.y,e.max.z));for(var n=0,i=r.length;n<i;++n)if(!t.containsPoint(r[n]))return 1;return 2}function h(){this.depth=0,this.center=new THREE.Vector3(0,0,0),this.halfLen=0}function d(){h.call(this),this.objCount=0,this.children=[null,null,null,null,null,null,null,null]}function f(){h.call(this),this.objIds=[],this.objAabbs=[]}function p(e,t){this.ocTreeSize=void 0!==e?e:1e4,this.ocLeafSize=void 0!==t?t:500,this.trees=[],this.treeDict=new Map}function m(){this.aabb=new THREE.Box3,this.streams=[],this.ranges=[],this.findLODStream=function(e){var t="";for(let r=0,n=this.ranges.length;r<n;++r)if(this.ranges[r][0]<=e&&e<this.ranges[r][1]){t=this.streams[r];break}return t}}function g(e,t){var r=new THREE.Vector3;return r.set(e.x-t.x,e.y-t.y,e.z-t.z),r.length()}function v(e,t,r){var n=[[-Number.MAX_VALUE,150],[150,500],[500,5e3]];return r.has(e)&&r.get(e).length>t?r.get(e)[t]:t<3?n[t]:[-Number.MAX_VALUE,Number.MAX_VALUE]}window.wireframePattern=l,window.whiteModelEnable=true,h.prototype={constructor:h,bounds:function(){var e=new THREE.Box3;return e.set(new THREE.Vector3(this.center.x-this.halfLen,this.center.y-this.halfLen,this.center.z-this.halfLen),new THREE.Vector3(this.center.x+this.halfLen,this.center.y+this.halfLen,this.center.z+this.halfLen)),e}},Object.assign(d.prototype,h.prototype,{constructor:d,objectCount:function(){return this.objCount},insertObject:function(e,t){if(e.intersectsBox(this.bounds())){for(let n=0,i=this.children.length;n<i;++n){var r=this.children[n];null!==r&&r.insertObject(e,t)}this.objCount++}},intersect:function(e,t){switch(c(this.bounds(),e)){case 0:default:break;case 1:for(let n=0,i=this.children.length;n<i;++n){var r=this.children[n];null!==r&&r.intersect(e,t)}break;case 2:this.getSubtreeObjects(t)}},getSubtreeObjects:function(e){if(this.objCount>0)for(let r=0,n=this.children.length;r<n;++r){var t=this.children[r];null!==t&&t.getSubtreeObjects(e)}},deduceSubtree:function(e){for(var t=.5*this.halfLen,r=0;8!=r;r++){var n=new THREE.Vector3;n.copy(this.center),n.x+=1&r?t:-t,n.y+=2&r?t:-t,n.z+=4&r?t:-t;var i=null;.5*t<e?((i=new f).depth=this.depth+1,i.center=n,i.halfLen=t):((i=new d).depth=this.depth+1,i.center=n,i.halfLen=t,i.deduceSubtree(e)),this.children[r]=i}},removeObjects:function(e){for(let t=0;t<this.children.length;++t)this.children[t]&&this.children[t].removeObjects(e)}}),Object.assign(f.prototype,h.prototype,{constructor:f,objectCount:function(){return this.objIds.length},insertObject:function(e,t){if(e.intersectsBox(this.bounds())){var r=this.objIds.findIndex((function(e,r,n){return e===t}));if(-1===r)this.objIds.push(t),this.objAabbs.push(e);else{var n=this.objAabbs[r];n.expandByPoint(e.min),n.expandByPoint(e.max)}}},intersect:function(e,t){if(0!=c(this.bounds(),e))for(var r=0,n=this.objIds.length;r<n;++r)0!=c(this.objAabbs[r],e)&&t.add(this.objIds[r])},getSubtreeObjects:function(e){for(var t=0,r=this.objIds.length;t<r;++t)e.add(this.objIds[t])},removeObjects:function(e){for(var t=0;t<this.objIds.length;)e.has(this.objIds[t])?(this.objIds.splice(t,1),this.objAabbs.splice(t,1)):++t}}),p.prototype={constructor:p,insertObject:function(e,t){var r=this.getAabbIndex(e);for(let i=0,a=r.length;i<a;++i){var n=r[i];this.createGetTree(n).insertObject(e,t)}},intersect:function(e,t){for(let r=0,n=this.trees.length;r<n;++r){this.trees[r].intersect(e,t)}},clear:function(){this.trees=[],this.treeDict.clear()},getValueIndex:function(e){return e>=0?parseInt(e/this.ocTreeSize):parseInt(e/this.ocTreeSize)-1},getPositionIndex:function(e){return[this.getValueIndex(e.x),this.getValueIndex(e.y),this.getValueIndex(e.z)]},getAabbIndex:function(e){for(var t=this.getPositionIndex(e.min),r=this.getPositionIndex(e.max),n=[],i=t[0];i<=r[0];i++)for(var a=t[1];a<=r[1];a++)for(var o=t[2];o<=r[2];o++)n.push([i,a,o]);return n},createGetTree:function(e){var t=JSON.stringify(e);if(this.treeDict.has(t))return this.trees[this.treeDict.get(t)];var r=new THREE.Vector3;r.x=this.ocTreeSize*(e[0]+.5),r.y=this.ocTreeSize*(e[1]+.5),r.z=this.ocTreeSize*(e[2]+.5),this.treeDict.set(t,this.trees.length);var n=function(e,t,r){for(var n=0,i=r*Math.pow(2,n);i<t;)n++,i=r*Math.pow(2,n);var a=new d;return a.depth=0,a.center=e,a.halfLen=i,a.deduceSubtree(r),a}(r,.5*this.ocTreeSize,this.ocLeafSize);return this.trees.push(n),n},removeObjects:function(e){for(var t=0;t<this.trees.length;++t)this.trees[t]&&this.trees[t].removeObjects(e)}};var y=1;function b(e,t){for(var r=0;r<e.length;++r)if(e[r]==t)return r;return-1}function E(e,t){this.pager=e,this.featureId=t.featureId,this.featureName=t.featureName,this.featureKeyName=t.featureKeyName,this.objIds=new Map}E.prototype={constructor:E,insertObject:function(e,t,r,n){var i=0;this.objIds.has(e)?i=this.objIds.get(e):(i=y++,this.objIds.set(e,i));var a=null;(a=this.pager.objLods.has(i)?this.pager.objLods.get(i):new m).aabb.expandByPoint(r.min),a.aabb.expandByPoint(r.max),a.streams.push(t),a.ranges.push(n),a.featureId=this.featureId,this.pager.objLods.set(i,a),this.pager.sptree.insertObject(r,i)},loadCoverage:function(e){var t=this,r=this.featureName+"/objectlist.dat";THREE.Loader.Handlers.get(r).load(r,(function(r){var n=function(){var e=new Map,t=new Array;return t.push([-Number.MAX_VALUE,150]),t.push([150,500]),t.push([500,2500]),e.set("jz",t),e.set("dx",t),(t=new Array).push([-Number.MAX_VALUE,300]),t.push([300,5e3]),e.set("dl",t),(t=new Array).push([-Number.MAX_VALUE,1e3]),t.push([1e3,5e3]),e.set("hd",t),(t=new Array).push([-Number.MAX_VALUE,300]),t.push([300,1e3]),t.push([1e3,2e3]),e.set("zw",t),(t=new Array).push([-Number.MAX_VALUE,150]),t.push([150,300]),t.push([300,700]),e.set("xp",t),e}(),i=".1page.",a=".2page.",o=".3page.",s=new THREE.Box3;for(let e=0,m=r.length;e<m;++e){var l=r[e].f;if(!(l.length>6&&".error"===l.slice(-6))){var u,c=r[e].b,h=new THREE.Vector3(c[0],c[1],c[2]),d=new THREE.Vector3(c[3],c[4],c[5]),f=new THREE.Box3;f.expandByPoint(h),f.expandByPoint(d);var p=[-Number.MAX_VALUE,Number.MAX_VALUE];-1!=l.indexOf(i)?(u=l.substr(0,l.indexOf(i)),p=v(t.featureKeyName,0,n)):-1!=l.indexOf(a)?(u=l.substr(0,l.indexOf(a)),p=v(t.featureKeyName,1,n)):-1!=l.indexOf(o)?(u=l.substr(0,l.indexOf(o)),p=v(t.featureKeyName,2,n)):(u=l,p=[-Number.MAX_VALUE,Number.MAX_VALUE]),s.expandByPoint(h),s.expandByPoint(d),t.insertObject(u,l,f,p)}}if(!t.pager.inited){var m=s.getCenter();t.pager.camera.position.set(m.x,m.y+350,m.z+350),t.pager.camera.lookAt(new THREE.Vector3(m.x,m.y,m.z)),t.pager.inited=!0}e&&t.pager.cc++}))}},THREE.SceneGraphPager=function(e,t){this.taskQueue=[],this.currentUpdateId=0,this.duringRequests=new Map,this.featureMaps=new Map,this.showFeatureIds=[],this.pagerGroup=new THREE.Group,e.add(this.pagerGroup),this.camera=t,this.inited=!1,this.updateTime=0,this.preFrameCc=0,this.cc=0,this.lastCcFrst=null,this.suspendPaging=!1,this.sptree=new p,this.objLods=new Map,this.loadedObjs=new Map},THREE.SceneGraphPager.prototype={constructor:THREE.SceneGraphPager,getFeatureInfo:function(e){return this.featureMaps.has(e)?this.featureMaps.get(e):null},clearFeatureInfo:function(){this.hideAllFeatureInfo(),this.featureMaps.clear()},hideAllFeatureInfo:function(){this.suspendPaging=!0,this.clearTask("unloadObject"),this.showFeatureIds=[],this.suspendPaging=!1,this.cc++},isFeatureShow:function(e){return!(!this.featureMaps.has(e)||b(this.showFeatureIds,e)<0)},addFeatureInfo:function(e,t,r){var n;if(void 0===t&&(t=!0),void 0===r&&(r=!0),this.featureMaps.has(e.featureId)){if(n=this.featureMaps.get(e.featureId),b(this.showFeatureIds,e.featureId)>=0)return t?r&&(this.cc++,this.suspendPaging=!1):this.hideFeatureInfo(e.featureId,r),n}else n=new E(this,e),this.featureMaps.set(e.featureId,n);return t&&this.showFeatureInfo(e.featureId,r),n},updateFeatureInfo:function(e,t,r){return this.featureMaps.has(e.featureId)&&this.removeFeatureInfo(e.featureId,!1),this.addFeatureInfo(e,t,r)},showFeatureInfo:function(e,t){(void 0===t&&(t=!0),!this.featureMaps.has(e)||b(this.showFeatureIds,e)>=0)||(this.showFeatureIds.push(e),this.featureMaps.get(e).loadCoverage(t))},removeFeatureInfo:function(e,t){void 0===t&&(t=!0),this.featureMaps.has(e)?(this.hideFeatureInfo(e,t),this.featureMaps.delete(e)):i.log("removeFeatureInfo failed featureId {0}".format(e))},hideFeatureInfo:function(e,t){if(void 0===t&&(t=!0),this.featureMaps.has(e)&&b(this.showFeatureIds,e)>=0){!function(e,t){for(let r=0;r<e.length;++r)if(e[r]==t){e.splice(r,1);break}}(this.showFeatureIds,e);var r=new Set,n=[];for(var i of this.objLods)i[1].featureId===e&&(r.add(i[0]),n.push(i[0]));for(var a of r)this.objLods.delete(a);this.sptree.removeObjects(r),t&&this.cameraChanged()}},update:function(e,t){if(this.inited){var r=++this.currentUpdateId,n=new Set;this.sptree.intersect(e,n);var i=[],a=[],o=[];for(var s of n)this.loadedObjs.has(s)||i.push(s);for(var l of this.loadedObjs)n.has(l[0])?o.push(l[0]):a.push(l[0]);for(var u=[],c=0,h=i.length;c<h;++c){var d=this.objLods.get(i[c]).aabb,f=g(t,d.getCenter()),p=.5*g(d.max,d.min),m=Math.max(f-p,0);u.push([m,i[c],1,f])}for(l of o)f=g(t,(d=this.objLods.get(l).aabb).getCenter()),p=.5*g(d.max,d.min),m=Math.max(f-p,0),u.push([m,l,0,f]);this.postTask(this.unloadObject.bind(this,a),"unloadObject"),u.sort((function(e,t){return e[0]-t[0]}));for(let e=0,t=u.length;e<t;++e){var v=u[e][1],y=u[e][2];switch(f=u[e][3],y){case 0:this.postTask(this.flushObject.bind(this,v,f,r));break;case 1:this.postTask(this.loadObject.bind(this,v,f,r))}}}},updatePaging:function(){if(!this.suspendPaging){var e=this.preFrameCc===this.cc,t=this.cc>0;if(this.preFrameCc=this.cc,e&&t){var r=(new Date).getTime();if(!(r-this.updateTime<50)){this.updateTime=r,this.cc=0;var n=this.getFrustum();this.update(n,this.camera.position)}}}},cameraChanged:function(){this.cc++,this.clearTask("unloadObject")},updateCameraChanged:function(){var e,t,r=this.getFrustum();null!==this.lastCcFrst&&(e=this.lastCcFrst,t=r,e.planes[0].equals(t.planes[0])&&e.planes[1].equals(t.planes[1])&&e.planes[2].equals(t.planes[2])&&e.planes[3].equals(t.planes[3])&&e.planes[4].equals(t.planes[4])&&e.planes[5].equals(t.planes[5]))||(this.lastCcFrst=r,this.cameraChanged())},getFrustum:function(){var e=new THREE.Matrix4;e.multiplyMatrices(this.camera.projectionMatrix,this.camera.matrixWorldInverse);var t=new THREE.Frustum;return t.setFromMatrix(e),t},duringRequestsCount:function(){var e=0;for(var t of this.duringRequests){e+=t[1].length}return e},taskCount:function(){return this.taskQueue.length},postTask:function(e,t){void 0===t&&(t=""),this.taskQueue.push({type:t,task:e})},executeTask:function(){if(this.taskQueue.length<=0||this.suspendPaging)return!1;var e=this.taskQueue[0].task;return this.taskQueue.shift(),e(),!0},clearTask:function(e,t){if(void 0===e&&(e="all"),void 0===t&&(t=!0),"all"!=e&&""!=e&&null!=e){for(var r=[],n=0,i=this.taskQueue.length;n<i;++n)this.taskQueue[n].type==e&&r.push(this.taskQueue[n]);this.taskQueue=r}else this.taskQueue=[];if(0==this.taskQueue.length||t){for(var a of this.duringRequests){a[1].abort()}this.duringRequests.clear()}},disposeObject:function(e){for(var t=0,r=e.children.length;t<r;++t){var n=e.children[t];if(!n.hasOwnProperty("isWater")){n.geometry.dispose();var a=null;try{--(a=n.userData.tDiffuse).referenceCount}catch(e){i.error("texture in disposeObject")}if(null!=a&&0===a.referenceCount){a.dispose();THREE.Loader.Handlers.get("aaa.zmesh").fileName2Texture.delete(a.fileName)}}}},unloadObject:function(e){for(var t=null,r=null,n=0,i=e.length;n<i;++n){t=e[n];try{r=this.loadedObjs.get(t)[1],this.loadedObjs.delete(t),this.pagerGroup.remove(r),this.disposeObject(r)}catch(e){this.loadedObjs.delete(t)}}},loadObject:function(e,t,r){if(!this.loadedObjs.has(e)&&this.objLods.has(e)){var n=this.objLods.get(e),o=n.findLODStream(t);if(o.length>4){var s=this.getFeatureInfo(n.featureId).featureName,l=THREE.Loader.Handlers.get(o);if(null==l)return void i.error("Cannot load "+o+", no handler is found");var u=l.load(s+"/"+o,this.doLoad.bind(this,e,o,r),this.onProgress.bind(this,o),this.onError.bind(this,o));a.set(e,o),this.onRequest(o,u)}}},flushObject:function(e,t,r){if(this.loadedObjs.has(e)&&this.objLods.has(e)){var n=this.objLods.get(e),o=n.findLODStream(t);if(this.loadedObjs.get(e)[0]!==o)if(o.length>4){var s=this.getFeatureInfo(n.featureId).featureName,l=THREE.Loader.Handlers.get(o);if(null==l)return void i.error("Cannot load "+o+", no handler is found");var u=l.load(s+"/"+o,this.doFlush.bind(this,e,o,r),this.onProgress.bind(this,o),this.onError.bind(this,o));a.set(e,o),this.onRequest(o,u)}else if(this.loadedObjs.has(e)){var c=this.loadedObjs.get(e)[1];this.loadedObjs.delete(e),this.pagerGroup.remove(c),this.disposeObject(c)}}},doLoad:function(e,t,r,n){if(this.duringRequests.delete(t),r==this.currentUpdateId){for(var i=0;i<n.children.length;++i)n.children[i].objectId=e,n.children[i].onBeforeRender=u;this.pagerGroup.add(n),this.loadedObjs.set(e,[t,n])}},doFlush:function(e,t,r,n){if(this.duringRequests.delete(t),r==this.currentUpdateId){if(this.loadedObjs.has(e)){var i=this.loadedObjs.get(e)[1];this.loadedObjs.delete(e),this.pagerGroup.remove(i),this.disposeObject(i)}for(var a=0;a<n.children.length;++a)n.children[a].objectId=e,n.children[a].onBeforeRender=u;this.pagerGroup.add(n),this.loadedObjs.set(e,[t,n])}},onProgress:function(e){},onError:function(e,t){this.duringRequests.delete(e),i.error(e+" å è½½å¤±è´¥")},onRequest:function(e,t){if(null==t);else t instanceof XMLHttpRequest?this.duringRequests.set(e,t):t instanceof ArrayBuffer?i.error("three.js loader å¼å¯äºç¼å­ï¼æ­¤åæ¯ç®åè¿æªåå¤ç"):i.error("three.js loader æºç ææ¹å¨ï¼æ­¤åæ¯ç®åè¿æªåå¤ç")}}},5719:(e,t,r)=>{var n=r(5108);THREE.Water_r86=function(e,t,r,i){function a(e,t){return void 0!==e?e:t}THREE.Object3D.call(this),this.name="water_"+this.id,i=i||{},this.matrixNeedsUpdate=!0;var o=a(i.textureWidth,512),s=a(i.textureHeight,512);this.clipBias=a(i.clipBias,0),this.alpha=a(i.alpha,1),this.time=a(i.time,0),this.normalSampler=a(i.waterNormals,null),this.sunDirection=a(i.sunDirection,new THREE.Vector3(.70707,.70707,0)),this.sunColor=new THREE.Color(a(i.sunColor,16777215)),this.waterColor=new THREE.Color(a(i.waterColor,8355711)),this.eye=a(i.eye,new THREE.Vector3(0,0,0)),this.distortionScale=a(i.distortionScale,20),this.side=a(i.side,THREE.FrontSide),this.fog=a(i.fog,!1),this.renderer=e,this.scene=r,this.mirrorPlane=new THREE.Plane,this.normal=new THREE.Vector3(0,0,1),this.mirrorWorldPosition=new THREE.Vector3,this.cameraWorldPosition=new THREE.Vector3,this.rotationMatrix=new THREE.Matrix4,this.lookAtPosition=new THREE.Vector3(0,0,-1),this.clipPlane=new THREE.Vector4,t instanceof THREE.PerspectiveCamera?this.camera=t:(this.camera=new THREE.PerspectiveCamera,n.log(this.name+": camera is not a Perspective Camera!")),this.textureMatrix=new THREE.Matrix4,this.mirrorCamera=this.camera.clone(),this.renderTarget=new THREE.WebGLRenderTarget(o,s),this.renderTarget2=new THREE.WebGLRenderTarget(o,s);var l={uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib.fog,{normalSampler:{value:null},mirrorSampler:{value:null},alpha:{value:1},time:{value:0},distortionScale:{value:20},noiseScale:{value:1},textureMatrix:{value:new THREE.Matrix4},sunColor:{value:new THREE.Color(8355711)},sunDirection:{value:new THREE.Vector3(.70707,.70707,0)},eye:{value:new THREE.Vector3},waterColor:{value:new THREE.Color(5592405)},isPicking:{value:!1},selected:{value:!1},selectedColor:{value:new THREE.Vector3(1,1,0)},objectId:{value:0}}]),vertexShader:["uniform mat4 textureMatrix;","uniform float time;","varying vec4 mirrorCoord;","varying vec3 worldPosition;",THREE.ShaderChunk.fog_pars_vertex,"void main() {","   mirrorCoord = modelMatrix * vec4(position, 1.0);","   worldPosition = mirrorCoord.xyz;","   mirrorCoord = textureMatrix * mirrorCoord;","   vec4 mvPosition =  modelViewMatrix * vec4(position, 1.0);","   gl_Position = projectionMatrix * mvPosition;",THREE.ShaderChunk.fog_vertex,"}"].join("\n"),fragmentShader:["precision highp float;","uniform sampler2D mirrorSampler;","uniform float alpha;","uniform float time;","uniform float distortionScale;","uniform sampler2D normalSampler;","uniform vec3 sunColor;","uniform vec3 sunDirection;","uniform vec3 eye;","uniform vec3 waterColor;","varying vec4 mirrorCoord;","varying vec3 worldPosition;","vec4 getNoise(vec2 uv) {","   vec2 uv0 = (uv / 103.0) + vec2(time / 17.0, time / 29.0);","   vec2 uv1 = uv / 107.0-vec2(time / -19.0, time / 31.0);","   vec2 uv2 = uv / vec2(8907.0, 9803.0) + vec2(time / 101.0, time / 97.0);","   vec2 uv3 = uv / vec2(1091.0, 1027.0) - vec2(time / 109.0, time / -113.0);","   vec4 noise = texture2D(normalSampler, uv0) +","       texture2D(normalSampler, uv1) +","       texture2D(normalSampler, uv2) +","       texture2D(normalSampler, uv3);","   return noise * 0.5 - 1.0;","}","void sunLight(const vec3 surfaceNormal, const vec3 eyeDirection, float shiny, float spec, float diffuse, inout vec3 diffuseColor, inout vec3 specularColor) {","   vec3 reflection = normalize(reflect(-sunDirection, surfaceNormal));","   float direction = max(0.0, dot(eyeDirection, reflection));","   specularColor += pow(direction, shiny) * sunColor * spec;","   diffuseColor += max(dot(sunDirection, surfaceNormal), 0.0) * sunColor * diffuse;","}",THREE.ShaderChunk.common,THREE.ShaderChunk.fog_pars_fragment,"uniform bool isPicking;","uniform bool selected;","uniform vec3 selectedColor;","uniform float objectId;","void main() {","   if(isPicking) {","       gl_FragColor = vec4(objectId,0.0,0.0,1.0);","       return;","   }","   vec4 noise = getNoise(worldPosition.xz);","   vec3 surfaceNormal = normalize(noise.xzy * vec3(1.5, 1.0, 1.5));","   vec3 diffuseLight = vec3(0.0);","   vec3 specularLight = vec3(0.0);","   vec3 worldToEye = eye-worldPosition;","   vec3 eyeDirection = normalize(worldToEye);","   sunLight(surfaceNormal, eyeDirection, 100.0, 2.0, 0.5, diffuseLight, specularLight);","   float distance = length(worldToEye);","   vec2 distortion = surfaceNormal.xz * (0.001 + 1.0 / distance) * distortionScale;","   vec3 reflectionSample = vec3(texture2D(mirrorSampler, mirrorCoord.xy / mirrorCoord.z + distortion));","   float theta = max(dot(eyeDirection, surfaceNormal), 0.0);","   float rf0 = 0.3;","   float reflectance = rf0 + (1.0 - rf0) * pow((1.0 - theta), 5.0);","   vec3 scatter = max(0.0, dot(surfaceNormal, eyeDirection)) * waterColor;","   vec3 albedo = mix(sunColor * diffuseLight * 0.3 + scatter, (vec3(0.1) + reflectionSample * 0.9 + reflectionSample * specularLight), reflectance);","   vec3 outgoingLight = albedo;","   gl_FragColor = vec4(outgoingLight, alpha);",THREE.ShaderChunk.fog_fragment,"   if(selected) {","       gl_FragColor.xyz = mix(gl_FragColor.xyz ,selectedColor, 0.5);","   }","}"].join("\n")},u=THREE.UniformsUtils.clone(l.uniforms);this.material=new THREE.ShaderMaterial({fragmentShader:l.fragmentShader,vertexShader:l.vertexShader,uniforms:u,transparent:!0,side:this.side,fog:this.fog}),this.material.uniforms.mirrorSampler.value=this.renderTarget.texture,this.material.uniforms.textureMatrix.value=this.textureMatrix,this.material.uniforms.alpha.value=this.alpha,this.material.uniforms.time.value=this.time,this.material.uniforms.normalSampler.value=this.normalSampler,this.material.uniforms.sunColor.value=this.sunColor,this.material.uniforms.waterColor.value=this.waterColor,this.material.uniforms.sunDirection.value=this.sunDirection,this.material.uniforms.distortionScale.value=this.distortionScale,this.material.uniforms.eye.value=this.eye,THREE.Math.isPowerOfTwo(o)&&THREE.Math.isPowerOfTwo(s)||(this.renderTarget.texture.generateMipmaps=!1,this.renderTarget.texture.minFilter=THREE.LinearFilter,this.renderTarget2.texture.generateMipmaps=!1,this.renderTarget2.texture.minFilter=THREE.LinearFilter),this.updateTextureMatrix(),this.render()},THREE.Water_r86.prototype=Object.create(THREE.Object3D.prototype),THREE.Water_r86.prototype.constructor=THREE.Water_r86,THREE.Water_r86.prototype.render=function(){this.matrixNeedsUpdate&&this.updateTextureMatrix(),this.matrixNeedsUpdate=!0;for(var e=this;null!==e.parent;)e=e.parent;void 0!==e&&e instanceof THREE.Scene&&(this.material.visible=!1,this.renderer.render(e,this.mirrorCamera,this.renderTarget,!0),this.material.visible=!0)},THREE.Water_r86.prototype.updateTextureMatrix=function(){this.updateMatrixWorld(),this.camera.updateMatrixWorld(),this.mirrorWorldPosition.setFromMatrixPosition(this.matrixWorld),this.cameraWorldPosition.setFromMatrixPosition(this.camera.matrixWorld),this.rotationMatrix.extractRotation(this.matrixWorld),this.normal.set(0,0,1),this.normal.applyMatrix4(this.rotationMatrix);var e=this.mirrorWorldPosition.clone().sub(this.cameraWorldPosition);e.reflect(this.normal).negate(),e.add(this.mirrorWorldPosition),this.rotationMatrix.extractRotation(this.camera.matrixWorld),this.lookAtPosition.set(0,0,-1),this.lookAtPosition.applyMatrix4(this.rotationMatrix),this.lookAtPosition.add(this.cameraWorldPosition);var t=this.mirrorWorldPosition.clone().sub(this.lookAtPosition);t.reflect(this.normal).negate(),t.add(this.mirrorWorldPosition),this.up.set(0,-1,0),this.up.applyMatrix4(this.rotationMatrix),this.up.reflect(this.normal).negate(),this.mirrorCamera.position.copy(e),this.mirrorCamera.up=this.up,this.mirrorCamera.lookAt(t),this.mirrorCamera.aspect=this.camera.aspect,this.mirrorCamera.updateProjectionMatrix(),this.mirrorCamera.updateMatrixWorld(),this.textureMatrix.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),this.textureMatrix.multiply(this.mirrorCamera.projectionMatrix),this.textureMatrix.multiply(this.mirrorCamera.matrixWorldInverse),this.mirrorPlane.setFromNormalAndCoplanarPoint(this.normal,this.mirrorWorldPosition),this.mirrorPlane.applyMatrix4(this.mirrorCamera.matrixWorldInverse),this.clipPlane.set(this.mirrorPlane.normal.x,this.mirrorPlane.normal.y,this.mirrorPlane.normal.z,this.mirrorPlane.constant);var r=new THREE.Vector4,n=this.mirrorCamera.projectionMatrix;r.x=(Math.sign(this.clipPlane.x)+n.elements[8])/n.elements[0],r.y=(Math.sign(this.clipPlane.y)+n.elements[9])/n.elements[5],r.z=-1,r.w=(1+n.elements[10])/n.elements[14];var i=this.clipPlane.multiplyScalar(2/this.clipPlane.dot(r));n.elements[2]=i.x,n.elements[6]=i.y,n.elements[10]=i.z+1-this.clipBias,n.elements[14]=i.w;var a=new THREE.Vector3;a.setFromMatrixPosition(this.camera.matrixWorld),this.eye=a,this.material.uniforms.eye.value=this.eye}},3782:()=>{THREE.Water_r89=function(e,t){THREE.Mesh.call(this,e);var r=this,n=void 0!==(t=t||{}).textureWidth?t.textureWidth:512,i=void 0!==t.textureHeight?t.textureHeight:512,a=void 0!==t.clipBias?t.clipBias:0,o=void 0!==t.alpha?t.alpha:1,s=void 0!==t.time?t.time:0,l=void 0!==t.waterNormals?t.waterNormals:null,u=void 0!==t.sunDirection?t.sunDirection:new THREE.Vector3(.70707,.70707,0),c=new THREE.Color(void 0!==t.sunColor?t.sunColor:16777215),h=new THREE.Color(void 0!==t.waterColor?t.waterColor:8355711),d=void 0!==t.eye?t.eye:new THREE.Vector3(0,0,0),f=void 0!==t.distortionScale?t.distortionScale:20,p=void 0!==t.side?t.side:THREE.FrontSide,m=void 0!==t.fog&&t.fog,g=new THREE.Plane,v=new THREE.Vector3,y=new THREE.Vector3,b=new THREE.Vector3,E=new THREE.Matrix4,x=new THREE.Vector3(0,0,-1),w=new THREE.Vector4,T=new THREE.Vector3,_=new THREE.Vector3,S=new THREE.Vector4,M=new THREE.Matrix4,R=new THREE.PerspectiveCamera,A={minFilter:THREE.LinearFilter,magFilter:THREE.LinearFilter,format:THREE.RGBFormat,stencilBuffer:!1},C=new THREE.WebGLRenderTarget(n,i,A);THREE.Math.isPowerOfTwo(n)&&THREE.Math.isPowerOfTwo(i)||(C.texture.generateMipmaps=!1);var L={uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib.fog,THREE.UniformsLib.lights,{normalSampler:{value:null},mirrorSampler:{value:null},alpha:{value:1},time:{value:0},size:{value:1},distortionScale:{value:20},textureMatrix:{value:new THREE.Matrix4},sunColor:{value:new THREE.Color(8355711)},sunDirection:{value:new THREE.Vector3(.70707,.70707,0)},eye:{value:new THREE.Vector3},waterColor:{value:new THREE.Color(5592405)}}]),vertexShader:["uniform mat4 textureMatrix;","uniform float time;","varying vec4 mirrorCoord;","varying vec4 worldPosition;",THREE.ShaderChunk.fog_pars_vertex,THREE.ShaderChunk.shadowmap_pars_vertex,"void main() {","   mirrorCoord = modelMatrix * vec4(position, 1.0);","   worldPosition = mirrorCoord.xyzw;","   mirrorCoord = textureMatrix * mirrorCoord;","   vec4 mvPosition =  modelViewMatrix * vec4(position, 1.0);","   gl_Position = projectionMatrix * mvPosition;",THREE.ShaderChunk.fog_vertex,THREE.ShaderChunk.shadowmap_vertex,"}"].join("\n"),fragmentShader:["uniform sampler2D mirrorSampler;","uniform float alpha;","uniform float time;","uniform float size;","uniform float distortionScale;","uniform sampler2D normalSampler;","uniform vec3 sunColor;","uniform vec3 sunDirection;","uniform vec3 eye;","uniform vec3 waterColor;","varying vec4 mirrorCoord;","varying vec4 worldPosition;","vec4 getNoise(vec2 uv) {","   vec2 uv0 = (uv / 103.0) + vec2(time / 17.0, time / 29.0);","   vec2 uv1 = uv / 107.0-vec2(time / -19.0, time / 31.0);","   vec2 uv2 = uv / vec2(8907.0, 9803.0) + vec2(time / 101.0, time / 97.0);","   vec2 uv3 = uv / vec2(1091.0, 1027.0) - vec2(time / 109.0, time / -113.0);","   vec4 noise = texture2D(normalSampler, uv0) +","       texture2D(normalSampler, uv1) +","       texture2D(normalSampler, uv2) +","       texture2D(normalSampler, uv3);","   return noise * 0.5 - 1.0;","}","void sunLight(const vec3 surfaceNormal, const vec3 eyeDirection, float shiny, float spec, float diffuse, inout vec3 diffuseColor, inout vec3 specularColor) {","   vec3 reflection = normalize(reflect(-sunDirection, surfaceNormal));","   float direction = max(0.0, dot(eyeDirection, reflection));","   specularColor += pow(direction, shiny) * sunColor * spec;","   diffuseColor += max(dot(sunDirection, surfaceNormal), 0.0) * sunColor * diffuse;","}",THREE.ShaderChunk.common,THREE.ShaderChunk.packing,THREE.ShaderChunk.bsdfs,THREE.ShaderChunk.fog_pars_fragment,THREE.ShaderChunk.lights_pars,THREE.ShaderChunk.shadowmap_pars_fragment,THREE.ShaderChunk.shadowmask_pars_fragment,"void main() {","   vec4 noise = getNoise(worldPosition.xz * size);","   vec3 surfaceNormal = normalize(noise.xzy * vec3(1.5, 1.0, 1.5));","   vec3 diffuseLight = vec3(0.0);","   vec3 specularLight = vec3(0.0);","   vec3 worldToEye = eye-worldPosition.xyz;","   vec3 eyeDirection = normalize(worldToEye);","   sunLight(surfaceNormal, eyeDirection, 100.0, 2.0, 0.5, diffuseLight, specularLight);","   float distance = length(worldToEye);","   vec2 distortion = surfaceNormal.xz * (0.001 + 1.0 / distance) * distortionScale;","   vec3 reflectionSample = vec3(texture2D(mirrorSampler, mirrorCoord.xy / mirrorCoord.z + distortion));","   float theta = max(dot(eyeDirection, surfaceNormal), 0.0);","   float rf0 = 0.3;","   float reflectance = rf0 + (1.0 - rf0) * pow((1.0 - theta), 5.0);","   vec3 scatter = max(0.0, dot(surfaceNormal, eyeDirection)) * waterColor;","   vec3 albedo = mix((sunColor * diffuseLight * 0.3 + scatter) * getShadowMask(), (vec3(0.1) + reflectionSample * 0.9 + reflectionSample * specularLight), reflectance);","   vec3 outgoingLight = albedo;","   gl_FragColor = vec4(outgoingLight, alpha);",THREE.ShaderChunk.tonemapping_fragment,THREE.ShaderChunk.fog_fragment,"}"].join("\n")},O=new THREE.ShaderMaterial({fragmentShader:L.fragmentShader,vertexShader:L.vertexShader,uniforms:THREE.UniformsUtils.clone(L.uniforms),transparent:!0,lights:!0,side:p,fog:m});O.uniforms.mirrorSampler.value=C.texture,O.uniforms.textureMatrix.value=M,O.uniforms.alpha.value=o,O.uniforms.time.value=s,O.uniforms.normalSampler.value=l,O.uniforms.sunColor.value=c,O.uniforms.waterColor.value=h,O.uniforms.sunDirection.value=u,O.uniforms.distortionScale.value=f,O.uniforms.eye.value=d,r.material=O,r.onBeforeRender=function(e,t,n){if(y.setFromMatrixPosition(r.matrixWorld),b.setFromMatrixPosition(n.matrixWorld),E.extractRotation(r.matrixWorld),v.set(0,0,1),v.applyMatrix4(E),T.subVectors(y,b),!(T.dot(v)>0)){T.reflect(v).negate(),T.add(y),E.extractRotation(n.matrixWorld),x.set(0,0,-1),x.applyMatrix4(E),x.add(b),_.subVectors(y,x),_.reflect(v).negate(),_.add(y),R.position.copy(T),R.up.set(0,1,0),R.up.applyMatrix4(E),R.up.reflect(v),R.lookAt(_),R.far=n.far,R.updateMatrixWorld(),R.projectionMatrix.copy(n.projectionMatrix),M.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),M.multiply(R.projectionMatrix),M.multiply(R.matrixWorldInverse),g.setFromNormalAndCoplanarPoint(v,y),g.applyMatrix4(R.matrixWorldInverse),w.set(g.normal.x,g.normal.y,g.normal.z,g.constant);var i=R.projectionMatrix;S.x=(Math.sign(w.x)+i.elements[8])/i.elements[0],S.y=(Math.sign(w.y)+i.elements[9])/i.elements[5],S.z=-1,S.w=(1+i.elements[10])/i.elements[14],w.multiplyScalar(2/w.dot(S)),i.elements[2]=w.x,i.elements[6]=w.y,i.elements[10]=w.z+1-a,i.elements[14]=w.w,d.setFromMatrixPosition(n.matrixWorld);var o=e.getRenderTarget(),s=e.vr.enabled,l=e.shadowMap.autoUpdate;r.visible=!1,e.vr.enabled=!1,e.shadowMap.autoUpdate=!1,e.render(t,R,C,!0),r.visible=!0,e.vr.enabled=s,e.shadowMap.autoUpdate=l,e.setRenderTarget(o)}}},THREE.Water_r89.prototype=Object.create(THREE.Mesh.prototype),THREE.Water_r89.prototype.constructor=THREE.Water_r89},2223:()=>{THREE.WaterTextureShader={uniforms:{tDiffuse:{value:null},tNormal:{value:null},time:{value:0},sunColor:{value:new THREE.Color(16777215)},sunDirection:{value:new THREE.Vector3(1,1,1)},eye:{value:new THREE.Vector3},waterColor:{value:new THREE.Color(5592405)},distortionScale:{value:20},isPicking:{value:!1},selected:{value:!1},selectedColor:{value:new THREE.Vector3(1,1,0)},objectId:{value:0}},vertexShader:["varying vec2 tc;","varying vec3 worldPosition;","void main() {","   gl_Position = projectionMatrix *  modelViewMatrix * vec4(position, 1.0);","   tc = uv;","   vec4 mirrorCoord = modelMatrix * vec4(position, 1.0);","   worldPosition = mirrorCoord.xyz;","}"].join("\n"),fragmentShader:["precision mediump float;","uniform sampler2D tDiffuse;","uniform sampler2D tNormal;","uniform float time;","uniform float distortionScale;","varying vec2 tc;","varying vec3 worldPosition;","uniform bool isPicking;","uniform bool selected;","uniform vec3 selectedColor;","uniform float objectId;","uniform vec3 sunColor;","uniform vec3 sunDirection;","uniform vec3 eye;","uniform vec3 waterColor;","vec3 waveNormal(vec2 p) {","   vec3 normal = texture2D(tNormal, p).xyz;","   normal = -1.0 + normal * 2.0;","   return normalize(normal);","}","void sunLight(const vec3 surfaceNormal, const vec3 eyeDirection, float shiny, float spec, float diffuse, inout vec3 diffuseColor, inout vec3 specularColor) {","   vec3 reflection = normalize(reflect(-sunDirection, surfaceNormal));","   float direction = max(0.0, dot(eyeDirection, reflection));","   specularColor += pow(direction, shiny) * sunColor * spec;","   diffuseColor += max(dot(sunDirection, surfaceNormal), 0.0) * sunColor * diffuse;","}","void main() {","   if(isPicking) {","       gl_FragColor = vec4(objectId,0.0,0.0,1.0);","       return;","   }","   float timeFactor = 0.1;","   float offsetFactor = 0.5;","   float refractionFactor = 0.7;","   vec3 normal = waveNormal(tc + vec2(time * timeFactor, time * timeFactor)); ","   // simple calculate refraction UV offset  ","   vec2 p = -1.0 + tc * 2.0;  ","   vec3 eyePos = vec3(0, 0, 10); //ç¼çä½ç½® ä½äºä¸­å¿ç¹æ­£ä¸æ¹","   vec3 inVec = normalize(vec3(p, 0) - eyePos);  ","   //æ ¹æ®å¥å°åéï¼æ³çº¿ï¼æå°ç³»æ°è®¡ç®æå°åé","   vec3 refractVec = refract(inVec, normal, refractionFactor); ","   vec2 v_texCoordN = tc;","   v_texCoordN += refractVec.xy * offsetFactor;","   gl_FragColor = texture2D(tDiffuse, v_texCoordN);","   vec3 diffuseLight = vec3(0.0);","   vec3 specularLight = vec3(0.0);","   vec3 worldToEye = eye-worldPosition;","   vec3 eyeDirection = normalize(worldToEye);","   sunLight(normal, eyeDirection, 100.0, 2.0, 0.5, diffuseLight, specularLight);","   float distance = length(worldToEye);","   vec2 distortion = normal.xz * (0.001 + 1.0 / distance) * distortionScale;","   float theta = max(dot(eyeDirection, normal), 0.0);","   float rf0 = 0.3;","   float reflectance = rf0 + (1.0 - rf0) * pow((1.0 - theta), 5.0);","   vec3 scatter = max(0.0, dot(normal, eyeDirection)) * waterColor;","   vec3 albedo = sunColor * diffuseLight * 0.3 + scatter;","   gl_FragColor = mix(gl_FragColor,vec4(albedo, 1),0.5);","   if(selected) {","       gl_FragColor.xyz = mix(gl_FragColor.xyz ,selectedColor, 0.5);","   }","}"].join("\n")}},5711:()=>{THREE.WaterWaveShader={uniforms:{u_amplitude:{value:.1},u_frequency:{value:.05},u_time:{value:0},lightDir:{value:new THREE.Vector3(1,1,-1)}},vertexShader:["precision mediump float;","uniform float  u_amplitude;","uniform float  u_frequency;","uniform float   u_time;","uniform vec3 lightDir;","varying vec3 oLightDir;","varying vec3 oNormal;","vec3 mod289(vec3 x) {","   return x - floor(x * (1.0 / 289.0)) * 289.0;","}","vec4 mod289(vec4 x) {","   return x - floor(x * (1.0 / 289.0)) * 289.0;","}","vec4 permute(vec4 x) {","   return mod289(((x*34.0)+1.0)*x);","}","vec4 taylorInvSqrt(vec4 r) {","   return 1.79284291400159 - 0.85373472095314 * r;","}","vec3 fade(vec3 t) {","   return t*t*t*(t*(t*6.0-15.0)+10.0);","}","float cnoise(vec3 P) {","   vec3 Pi0 = floor(P); // Integer part for indexing","   vec3 Pi1 = Pi0 + vec3(1.0); // Integer part + 1","   Pi0 = mod289(Pi0);","   Pi1 = mod289(Pi1);","   vec3 Pf0 = fract(P); // Fractional part for interpolation","   vec3 Pf1 = Pf0 - vec3(1.0); // Fractional part - 1.0","   vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);","   vec4 iy = vec4(Pi0.yy, Pi1.yy);","   vec4 iz0 = Pi0.zzzz;","   vec4 iz1 = Pi1.zzzz;","   vec4 ixy = permute(permute(ix) + iy);","   vec4 ixy0 = permute(ixy + iz0);","   vec4 ixy1 = permute(ixy + iz1);","   vec4 gx0 = ixy0 * (1.0 / 7.0);","   vec4 gy0 = fract(floor(gx0) * (1.0 / 7.0)) - 0.5;","   gx0 = fract(gx0);","   vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0);","   vec4 sz0 = step(gz0, vec4(0.0));","   gx0 -= sz0 * (step(0.0, gx0) - 0.5);","   gy0 -= sz0 * (step(0.0, gy0) - 0.5);","   vec4 gx1 = ixy1 * (1.0 / 7.0);","   vec4 gy1 = fract(floor(gx1) * (1.0 / 7.0)) - 0.5;","   gx1 = fract(gx1);","   vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1);","   vec4 sz1 = step(gz1, vec4(0.0));","   gx1 -= sz1 * (step(0.0, gx1) - 0.5);","   gy1 -= sz1 * (step(0.0, gy1) - 0.5);","   vec3 g000 = vec3(gx0.x,gy0.x,gz0.x);","   vec3 g100 = vec3(gx0.y,gy0.y,gz0.y);","   vec3 g010 = vec3(gx0.z,gy0.z,gz0.z);","   vec3 g110 = vec3(gx0.w,gy0.w,gz0.w);","   vec3 g001 = vec3(gx1.x,gy1.x,gz1.x);","   vec3 g101 = vec3(gx1.y,gy1.y,gz1.y);","   vec3 g011 = vec3(gx1.z,gy1.z,gz1.z);","   vec3 g111 = vec3(gx1.w,gy1.w,gz1.w);","   vec4 norm0 = taylorInvSqrt(vec4(dot(g000, g000), dot(g010, g010), dot(g100, g100), dot(g110, g110)));","   g000 *= norm0.x;","   g010 *= norm0.y;","   g100 *= norm0.z;","   g110 *= norm0.w;","   vec4 norm1 = taylorInvSqrt(vec4(dot(g001, g001), dot(g011, g011), dot(g101, g101), dot(g111, g111)));","   g001 *= norm1.x;","   g011 *= norm1.y;","   g101 *= norm1.z;","   g111 *= norm1.w;","   float n000 = dot(g000, Pf0);","   float n100 = dot(g100, vec3(Pf1.x, Pf0.yz));","   float n010 = dot(g010, vec3(Pf0.x, Pf1.y, Pf0.z));","   float n110 = dot(g110, vec3(Pf1.xy, Pf0.z));","   float n001 = dot(g001, vec3(Pf0.xy, Pf1.z));","   float n101 = dot(g101, vec3(Pf1.x, Pf0.y, Pf1.z));","   float n011 = dot(g011, vec3(Pf0.x, Pf1.yz));","   float n111 = dot(g111, Pf1);","   vec3 fade_xyz = fade(Pf0);","   vec4 n_z = mix(vec4(n000, n100, n010, n110), vec4(n001, n101, n011, n111), fade_xyz.z);","   vec2 n_yz = mix(n_z.xy, n_z.zw, fade_xyz.y);","   float n_xyz = mix(n_yz.x, n_yz.y, fade_xyz.x);","   return 2.2 * n_xyz;","}","void main() {","   oNormal = normalize(normalMatrix*normal);","   oLightDir = normalize(vec3(viewMatrix*vec4(lightDir,0)));","   // Get a 3d noise using the position","   float displacement = u_amplitude * cnoise(u_frequency * position + u_time);","   // Move the position along the normal and transform it","   vec3 newPosition = position + normal * displacement;","   gl_Position = projectionMatrix * modelViewMatrix * vec4(newPosition, 1.0);","}"].join("\n"),fragmentShader:["precision mediump float;","varying vec3 oLightDir;","varying vec3 oNormal;","void main() {","   gl_FragColor = vec4(0.314, 0.384, 0.349, 1);","   float dotLN = 0.5 + max(dot(oLightDir, normalize(oNormal)), 0.0);   gl_FragColor.xyz *= dotLN;","}"].join("\n")}},9698:()=>{THREE.ZMeshShader={uniforms:{tDiffuse:{value:null},lightDir:{value:new THREE.Vector3(1,1,-1)},isPicking:{value:!1},selected:{value:!1},selectedColor:{value:new THREE.Vector3(1,1,0)},objectId:{value:0},isTextureReady:{value:!1}},vertexShader:["uniform vec3 lightDir;","#ifdef INSTANCE","attribute vec3 mcol0;","attribute vec3 mcol1;","attribute vec3 mcol2;","attribute vec3 mcol3;","#endif","attribute vec4 uvRange;","attribute vec3 uvInfo;","varying vec2 oUv;","varying vec4 oUvRange;","varying vec3 oUvInfo;","varying vec3 oLightDir;","varying vec3 oNormal;","#ifdef BILLBOARD","vec2 getRotationAngle(vec4 centerPositon, vec3 cameraPosition) {","   vec3 objToCameraProj = cameraPosition - centerPositon.xyz;","   objToCameraProj.y = 0.0;","   objToCameraProj = normalize(objToCameraProj);","   vec3 lookAt = vec3(0.0, 0.0, 1.0);","   vec3 upAux = cross(lookAt, objToCameraProj);","   upAux = normalize(upAux);","   float PI = acos(-1.0);","   float epsilon = 1.0e-6;","   float angleCosine = dot(lookAt, objToCameraProj);","   float angle = acos(angleCosine);","   if(abs(angleCosine-1.0)<=epsilon) {","       angle = 0.0;","   }","   else if(abs(angleCosine+1.0)<=epsilon) {","       angle = PI;","   }","   else {","       if(dot(vec3(0.0, 1.0 , 0.0), upAux) < 0.0) {","           angle = 2.0*PI-angle;","       }","   }","   float angleSin = sin(angle);","   angleCosine = cos(angle);","   return vec2(angleCosine, angleSin);","}","#endif","void main() {","   oUv = uv;","   oUvRange = uvRange;","   oUvInfo = uvInfo;","   oNormal = normalize(normalMatrix*normal);","   oLightDir = normalize(vec3(viewMatrix*vec4(lightDir,0)));","   mat4 modelViewMatrixNew = modelViewMatrix;","   mat4 matrixPosition = mat4(1.0);","   mat4 matrixScale = mat4(1.0);","   mat4 matrixRotate = mat4(1.0);","#ifdef INSTANCE","   mat4 matrixInstance = mat4(","       vec4(mcol0, 0),","       vec4(mcol1, 0),","       vec4(mcol2, 0),","       vec4(mcol3, 1)"," );","   modelViewMatrixNew *= matrixInstance;","   float length0 = length(mcol0);","   float length1 = length(mcol1);","   float length2 = length(mcol2);","   // float length3 = length(mcol3);","   matrixPosition = mat4(","       vec4(1.0, 0.0, 0.0, 0.0),","       vec4(0.0, 1.0, 0.0, 0.0),","       vec4(0.0, 0.0, 1.0, 0.0),","       vec4(mcol3, 1)"," );","   matrixScale = mat4(","       vec4(length0, 0.0, 0.0, 0.0),","       vec4(0.0, length1, 0.0, 0.0),","       vec4(0.0, 0.0, length2, 0.0),","       vec4(0.0, 0.0, 0.0, 1.0)"," );","   matrixRotate = mat4(","       vec4(mcol0 *1.0/length0, 0.0),","       vec4(mcol1 *1.0/length1, 0.0),","       vec4(mcol2 *1.0/length2, 0.0),","       vec4(0.0, 0.0, 0.0, 1.0)"," );","#endif","#ifdef BILLBOARD","   modelViewMatrixNew = modelViewMatrix * matrixPosition * matrixScale;","   vec4 centerPositon = modelMatrix * matrixPosition * vec4(0.0, 0.0, 0.0, 1.0);","   vec2 angleResult = getRotationAngle(centerPositon, cameraPosition);","   float angleCosine = angleResult.x;","   float angleSin = angleResult.y;","   mat4 rotationMatrix = mat4(","       angleCosine, 0.0, -angleSin, 0.0,","       0.0, 1.0, 0.0, 0.0,","       angleSin, 0.0, angleCosine, 0.0,","       0.0, 0.0, 0.0, 1.0);","   modelViewMatrixNew *= rotationMatrix;","#endif","   gl_Position = projectionMatrix * modelViewMatrixNew * vec4(position, 1.0);","}"].join("\n"),fragmentShader:["float mipmapLevel(vec2 uv, vec2 textureSize) {","   vec2 dx = dFdx(uv*textureSize.x);","   vec2 dy = dFdy(uv*textureSize.y);","   float d = max(dot(dx, dx), dot(dy, dy));","   return 0.25 * log2(d);","}","vec3 sampleTexturePackMipWrapped(vec2 uv, vec4 uv_range, vec3 uv_info) {","   float lod = mipmapLevel(uv, vec2(uv_info.x, uv_info.y));","   lod = clamp(lod, 0.0, uv_info.z);","   if((uv_info.z-lod) < 1.7) {","       lod = lod - 1.7; ","   }","   float size = pow(2.0, uv_info.z - lod);","   float sizex = size / uv_range.z;","   float sizey = size / uv_range.w;","   uv = fract(uv);","   uv.x = uv.x * ((sizex * uv_range.z - 1.0) / sizex) + 0.5 / sizex + uv_range.x;","   uv.y = uv.y * ((sizey * uv_range.w - 1.0) / sizey) + 0.5 / sizey + uv_range.y;","   return vec3(uv.x, uv.y, lod);","}","uniform sampler2D tDiffuse;","#ifdef WHITE_MODEL_ENABLE","   uniform bool isTextureReady;","#endif","uniform bool isPicking;","uniform bool selected;","uniform vec3 selectedColor;","uniform float objectId;","varying vec2 oUv;","varying vec4 oUvRange;","varying vec3 oUvInfo;","varying vec3 oLightDir;","varying vec3 oNormal;","void main() {","   if (oUvInfo.z < 0.1) {","       gl_FragColor = texture2D(tDiffuse, oUv);","   }","   else {","       vec3 info = sampleTexturePackMipWrapped(oUv, oUvRange, oUvInfo);","   #ifndef EXT_shader_texture_lod_support","       gl_FragColor = texture2D(tDiffuse, info.xy);","   #else","       gl_FragColor = texture2DLodEXT(tDiffuse, info.xy, info.z);","   #endif","   }","#ifdef WHITE_MODEL_ENABLE","   if(!isTextureReady) {","       gl_FragColor = vec4(1.0,1.0,1.0,0.5);","   }","#endif","   if(gl_FragColor.w<0.1) {","       discard;","   }","   if(isPicking) {","       gl_FragColor = vec4(objectId,0.0,0.0,1.0);","       return;","   }","   float dotLN = 0.5 + max(dot(oLightDir, normalize(oNormal)), 0.0);","   gl_FragColor.xyz *= dotLN;","   if(selected) {","       gl_FragColor.xyz = mix(gl_FragColor.xyz ,selectedColor, 0.5);","   }","}"].join("\n")}}},t={};function r(n){var i=t[n];if(void 0!==i)return i.exports;var a=t[n]={exports:{}};return e[n].call(a.exports,a,a.exports,r),a.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.p="";var n={};return(()=>{"use strict";r.r(n),r.d(n,{SPThreejs:()=>ne,default:()=>ie});r(8163);var e=r(9427);("undefined"!=typeof window?window:r.g).THREE=e;var t,i=r(3491),a=r.n(i),o=(r(5435),r(5798),r(1441),r(8644),r(395),r(7302),r(6687),r(9142),r(9791),r(7472),r(5958),r(560),r(9088),r(9693),r(1471),r(5750),r(2029),r(9419),r(5042),r(8538),r(3258),r(9949),r(6249),r(7006),r(4747),r(8685),r(1549),r(1748),r(1984),r(9137),r(1229),r(8878),r(6348),r(3761),r(3773),r(6507),r(7153),r(681),r(7776),r(1542),r(7481),r(2250),r(8090),r(8866),r(4562),r(5657),r(8220),r(4638),r(4422),r(6727),r(5770),r(922),r(5711),r(2223),r(6065),r(5719),r(3782),r(6289),r(3731),r(2884),r(5108),new THREE.Vector2),s=new THREE.Vector2;window.mouseMoved=!1,window.mouseCoords=o,window.mouseCoordsScreen=s;var l,u,c;var h,d,f=[];window.loadSceneExample=function(e){!function(e){var t={vertexShader:["attribute vec3 position;\n                void main(void) {\n\n                    gl_Position = vec4(position, 1.0);\n\n                }"].join("\n"),fragmentShader:["precision highp float;\n\n                uniform vec2 resolution;\n\n                uniform mat4 viewMatrix;\n                uniform vec3 cameraPosition;\n\n                uniform mat4 cameraWorldMatrix;\n                uniform mat4 cameraProjectionMatrixInverse;\n\n                const float EPS = 0.01;\n                const float OFFSET = EPS * 100.0;\n                const vec3 lightDir = vec3(-0.48666426339228763, 0.8111071056538127, -0.3244428422615251);\n\n                // distance functions\n                vec3 opRep(vec3 p, float interval) {\n\n                    vec2 q = mod(p.xz, interval) - interval * 0.5;\n                    return vec3(q.x, p.y, q.y);\n\n                }\n\n                float sphereDist(vec3 p, float r) {\n\n                    return length(opRep(p, 3.0)) - r;\n\n                }\n\n                float floorDist(vec3 p){\n\n                    return dot(p, vec3(0.0, 1.0, 0.0)) + 1.0;\n\n                }\n\n                vec4 minVec4(vec4 a, vec4 b) {\n\n                    return (a.a < b.a) ? a: b;\n\n                }\n\n                float checkeredPattern(vec3 p) {\n\n                    float u = 1.0 - floor(mod(p.x, 2.0));\n                    float v = 1.0 - floor(mod(p.z, 2.0));\n\n                    if ((u == 1.0 && v < 1.0) || (u < 1.0 && v == 1.0)) {\n\n                        return 0.2;\n\n                    } else {\n\n                        return 1.0;\n\n                    }\n\n                }\n\n                vec3 hsv2rgb(vec3 c) {\n\n                    vec4 K = vec4(1.0, 2.0 / 3.0, 1.0 / 3.0, 3.0);\n                    vec3 p = abs(fract(c.xxx + K.xyz) * 6.0 - K.www);\n                    return c.z * mix(K.xxx, clamp(p - K.xxx, 0.0, 1.0), c.y);\n\n                }\n\n                float sceneDist(vec3 p) {\n\n                    return min(\n                        sphereDist(p, 1.0),\n                        floorDist(p)\n                  );\n\n                }\n\n                vec4 sceneColor(vec3 p) {\n\n                    return minVec4(\n                        // 3 * 6 / 2 = 9\n                        vec4(hsv2rgb(vec3((p.z + p.x) / 9.0, 1.0, 1.0)), sphereDist(p, 1.0)),\n                        vec4(vec3(0.5) * checkeredPattern(p), floorDist(p))\n                  );\n\n                }\n\n                vec3 getNormal(vec3 p) {\n\n                    return normalize(vec3(\n                        sceneDist(p + vec3(EPS, 0.0, 0.0)) - sceneDist(p + vec3(-EPS, 0.0, 0.0)),\n                        sceneDist(p + vec3(0.0, EPS, 0.0)) - sceneDist(p + vec3(0.0, -EPS, 0.0)),\n                        sceneDist(p + vec3(0.0, 0.0, EPS)) - sceneDist(p + vec3(0.0, 0.0, -EPS))\n                   ));\n\n                }\n\n                float getShadow(vec3 ro, vec3 rd) {\n\n                    float h = 0.0;\n                    float c = 0.0;\n                    float r = 1.0;\n                    float shadowCoef = 0.5;\n\n                    for (float t = 0.0; t < 50.0; t++) {\n\n                        h = sceneDist(ro + rd * c);\n\n                        if (h < EPS) return shadowCoef;\n\n                        r = min(r, h * 16.0 / c);\n                        c += h;\n\n                    }\n\n                    return 1.0 - shadowCoef + r * shadowCoef;\n\n                }\n\n                vec3 getRayColor(vec3 origin, vec3 ray, out vec3 pos, out vec3 normal, out bool hit) {\n\n                    // marching loop\n                    float dist;\n                    float depth = 0.0;\n                    pos = origin;\n\n                    for (int i = 0; i < 64; i++){\n\n                        dist = sceneDist(pos);\n                        depth += dist;\n                        pos = origin + depth * ray;\n\n                        if (abs(dist) < EPS) break;\n\n                    }\n\n                    // hit check and calc color\n                    vec3 color;\n\n                    if (abs(dist) < EPS) {\n\n                        normal = getNormal(pos);\n                        float diffuse = clamp(dot(lightDir, normal), 0.1, 1.0);\n                        float specular = pow(clamp(dot(reflect(lightDir, normal), ray), 0.0, 1.0), 10.0);\n                        float shadow = getShadow(pos + normal * OFFSET, lightDir);\n                        color = (sceneColor(pos).rgb * diffuse + vec3(0.8) * specular) * max(0.5, shadow);\n\n                        hit = true;\n\n                    } else {\n\n                        color = vec3(0.0);\n\n                    }\n\n                    return color - pow(clamp(0.05 * depth, 0.0, 0.6), 2.0);\n\n                }\n\n                void main(void) {\n\n                    // screen position\n                    vec2 screenPos = (gl_FragCoord.xy * 2.0 - resolution) / resolution;\n\n                    // ray direction in normalized device coordinate\n                    vec4 ndcRay = vec4(screenPos.xy, 1.0, 1.0);\n\n                    // convert ray direction from normalized device coordinate to world coordinate\n                    vec3 ray = (cameraWorldMatrix * cameraProjectionMatrixInverse * ndcRay).xyz;\n                    ray = normalize(ray);\n\n                    // camera position\n                    vec3 cPos = cameraPosition;\n\n                    // cast ray\n                    vec3 color = vec3(0.0);\n                    vec3 pos, normal;\n                    bool hit;\n                    float alpha = 1.0;\n\n                    for (int i = 0; i < 3; i++) {\n\n                        color += alpha * getRayColor(cPos, ray, pos, normal, hit);\n                        alpha *= 0.3;\n                        ray = normalize(reflect(ray, normal));\n                        cPos = pos + normal * OFFSET;\n\n                        if (!hit) break;\n\n                    }\n\n                    gl_FragColor = vec4(color, 1.0);\n\n                }\n                "].join("\n")},r={saveImage:function(){jyMap.renderer.render(jyMap.sceneRoot,jyMap.camera),window.open(jyMap.renderer.domElement.toDataURL())},resolution:"512"};(d=new THREE.Group).add(jyMap.camera),e.add(d);var n=new THREE.PlaneBufferGeometry(2,2),i=new THREE.RawShaderMaterial({uniforms:{resolution:{value:new THREE.Vector2(jyMap.renderer.domElement.width,jyMap.renderer.domElement.height)},cameraWorldMatrix:{value:jyMap.camera.matrixWorld},cameraProjectionMatrixInverse:{value:(new THREE.Matrix4).getInverse(jyMap.camera.projectionMatrix)}},vertexShader:t.vertexShader,fragmentShader:t.fragmentShader}),o=new THREE.Mesh(n,i);o.frustumCulled=!1,e.add(o),(new(a().GUI)).add(r,"saveImage").name("Save Image")}(e)},window.updateSceneExample=function(e){if(void 0!==t){t.rotation.x+=5e-4,t.rotation.y+=.001;var r=t.geometry.attributes;raycaster.setFromCamera(mouse,camera),intersects=raycaster.intersectObject(t),intersects.length>0?INTERSECTED!=intersects[0].index&&(r.size.array[INTERSECTED]=PARTICLE_SIZE,INTERSECTED=intersects[0].index,r.size.array[INTERSECTED]=1.25*PARTICLE_SIZE,r.size.needsUpdate=!0):null!==INTERSECTED&&(r.size.array[INTERSECTED]=PARTICLE_SIZE,r.size.needsUpdate=!0,INTERSECTED=null)}if(void 0!==l&&l.setTime(performance.now()/1e3),void 0!==u&&u.update(e),void 0!==c&&c.update(e),f.length>0)for(var n=0;n<f.length;n++)f[n].update(e);void 0!==h&&h.update(e),void 0!==d&&(d.position.z+=.01)};r(2906),r(9549),r(7728),r(6221),r(8748),r(1319),r(9887),r(3926),r(522),r(7651),r(6187),r(2139),r(9092),r(3172),r(5602);var p=r(7712),m=r.n(p),g=r(5108);function v(e){}function y(e,t){let r=this;g.log("Map3D","0.0.1"),t=t||{},this.firstFrame=!0,this.onUpdateScenes=[],this.layers=new Array,this.addlayer=null,this.removelayer=null;var n=document.getElementById(e);if(null===n)throw new Error("container element is not defined");this.containerElement=n,this.deferredRendering=!1,this.renderStatsOn=!1,this.setValues(t),this.renderer=new THREE.WebGLRenderer({antialias:!0,autoClear:!0}),n.appendChild(this.renderer.domElement),this.renderer.setClearColor(11184810),this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.setSize(n.clientWidth,n.clientHeight);if(n.addEventListener("resize",(function(){r.resize()}),!1),this.renderer instanceof THREE.WebGLRenderer&&(this.renderer.shadowMap.enabled=!0),this.renderer.gammaInput=!0,this.renderer.gammaOutput=!0,g.log("å¼å¯ä¼½é©¬æ ¡æ­£ï¼ä¼é æåºæ¯åäº®ãTODO: ä¼½é©¬æ ¡æ­£éè¦æ·±å¥ç ç©¶"),this.labelRenderer=new THREE.CSS2DRenderer,this.labelRenderer.setSize(n.clientWidth,n.clientHeight),this.labelRenderer.domElement.style.position="absolute",this.labelRenderer.domElement.style.top="0",this.labelRenderer.domElement.style.pointerEvents="none",n.appendChild(this.labelRenderer.domElement),this.pickingRenderTarget=new THREE.WebGLRenderTarget(n.clientWidth,n.clientHeight,{minFilter:THREE.LinearFilter,magFilter:THREE.NearestFilter,format:THREE.RGBAFormat,type:THREE.FloatType}),this.pickingRenderTarget.texture.generateMipmaps=!1,this.pickingRenderTarget2=new THREE.WebGLRenderTarget(n.clientWidth,n.clientHeight),this.pickingRenderTarget2.texture.generateMipmaps=!1,this.pickingRenderTarget2.texture.minFilter=THREE.NearestFilter,!1===this.renderer.extensions.get("ANGLE_instanced_arrays"))throw"ANGLE_instanced_arrays not supported";this.aspectRatio=0===n.clientHeight?1:1*n.clientWidth/n.clientHeight;var i=5e3;this.cameraFov=45,this.camera=new THREE.PerspectiveCamera(this.cameraFov,this.aspectRatio,1,i),this.sceneRoot=new THREE.Scene,this.stats=new(m()),this.renderStatsOn&&n.appendChild(this.stats.dom);!function(){var e="lib/textures/cube/skybox/",t=".jpg",n=[e+"px"+t,e+"nx"+t,e+"py"+t,e+"ny"+t,e+"pz"+t,e+"nz"+t],i=(new THREE.CubeTextureLoader).load(n);r.sceneRoot.background=i;{var a=new THREE.CubeTexture([]);a.format=THREE.RGBFormat,(new THREE.ImageLoader).load("lib/textures/skyboxsun25degtest.png",(function(e){var t=function(t,r){var n=1024,i=document.createElement("canvas");return i.width=n,i.height=n,i.getContext("2d").drawImage(e,-t*n,-r*n),i};a.images[0]=t(2,1),a.images[1]=t(0,1),a.images[2]=t(1,0),a.images[3]=t(1,2),a.images[4]=t(1,1),a.images[5]=t(3,1),a.needsUpdate=!0}));let e=THREE.ShaderLib.cube;e.uniforms.tCube.value=a;let t=new THREE.ShaderMaterial({fragmentShader:e.fragmentShader,vertexShader:e.vertexShader,uniforms:e.uniforms,depthWrite:!1,side:THREE.BackSide});new THREE.Mesh(new THREE.BoxGeometry(500,500,500),t)}{var o=new THREE.CubeTextureLoader;o.setPath("lib/textures/cube/skybox/");var s=o.load(["px.jpg","nx.jpg","py.jpg","ny.jpg","pz.jpg","nz.jpg"]);let e=THREE.ShaderLib.cube;e.uniforms.tCube.value=s;let t=new THREE.ShaderMaterial({fragmentShader:e.fragmentShader,vertexShader:e.vertexShader,uniforms:e.uniforms,side:THREE.BackSide});new THREE.Mesh(new THREE.BoxBufferGeometry(1e3,1e3,1e3),t)}}(),this.composer=new THREE.EffectComposer(this.renderer)}v.prototype.loadLayer=function(){},v.prototype.unloadLayer=function(){},v.prototype.showLayer=function(){this.status=1},v.prototype.hideLayer=function(){this.status=0},v.prototype.getLayerStatus=function(){return this.status},Object.assign(y.prototype,{constructor:y,setValues:function(e){if(void 0!==e)for(var t in e){if(void 0!==this[t]){var r=e[t];void 0!==r?this[t]=r:g.warn("Map3D '"+t+"' parameter is undefined.")}else g.warn(this.type+": '"+t+"' is not a property of this Map3D.")}},initScene:function(){},updateScene:function(){this.firstFrame&&(this.initScene(),this.firstFrame=!1)},updatePass:function(){this.composer.passes=[];let e=new THREE.RenderPass(this.sceneRoot,this.camera);this.composer.addPass(e),e.renderToScreen=!0},renderScene:function(){this.deferredRendering?(this.updatePass(),this.composer.render()):this.renderer.render(this.sceneRoot,this.camera)},frame:function(){this.updateScene(),this.renderScene(),this.renderStatsOn&&this.stats.update()},pick:function(e){this.renderer.render(this.sceneRoot,this.camera,this.pickingRenderTarget,!0);var t=new Float32Array(4);this.renderer.readRenderTargetPixels(this.pickingRenderTarget,e.x,this.containerElement.clientHeight-e.y,1,1,t);var r=t[0];return r<1&&(r=0),r},resize:function(){this.renderer.setSize(this.containerElement.clientWidth,this.containerElement.clientHeight),this.deferredRendering&&this.composer.setSize(this.containerElement.clientWidth,this.containerElement.clientHeight),this.pickingRenderTarget=new THREE.WebGLRenderTarget(this.containerElement.clientWidth,this.containerElement.clientHeight,{minFilter:THREE.LinearFilter,magFilter:THREE.NearestFilter,format:THREE.RGBAFormat,type:THREE.FloatType}),this.pickingRenderTarget2=new THREE.WebGLRenderTarget(this.containerElement.clientWidth,this.containerElement.clientHeight),this.pickingRenderTarget2.texture.generateMipmaps=!1,this.pickingRenderTarget2.texture.minFilter=THREE.NearestFilter,this.labelRenderer.setSize(this.containerElement.clientWidth,this.containerElement.clientHeight),this.camera.aspect=this.containerElement.clientWidth/this.containerElement.clientHeight,this.camera.updateProjectionMatrix()},showRenderStats:function(e){this.renderStatsOn=e;var t=document.getElementById(this.container);if(e)t.appendChild(this.stats.dom);else try{t.removeChild(this.stats.dom)}catch(e){g.error("error")}},addLayer:function(e){this.layers[this.layers.length]=e},removeLayer:function(e){for(var t=0;t<this.layers.length&&this.layers[t]!==e;++t);return t<this.layers.length&&(this.layers.splice(t,1),!0)},getLayer:function(e){for(var t=0;t<this.layers.length;++t)if(e==this.layers[t].name)return this.layers[t];return null},clearLayers:function(){this.layers.splice(0,this.layers.length)},getLayers:function(){return this.layers},setPosition:function(e,t,r){this.camera.position=e,this.camera.up=r,this.cameraControls.target=t,this.cameraControls.autoRotate||this.cameraControls.update()},getPosition:function(){var e=this.camera.position,t=this.camera.up;return[e,this.cameraControls.target,t]}});const b=y;var E=r(5108);function x(e,t,r){return r.sub(e),r.applyQuaternion(t),r.add(e),r}function w(e,t){var r=e.clone();r.normalize();var n=new THREE.Quaternion,i=.5*t,a=Math.sin(i),o=Math.cos(i);return e.length()<1e-4?n.set(a,a,a,o):n.set(a*r.x,a*r.y,a*r.z,o),n}function T(e,t,r){this.camera=e,this.pager=t,this.rotationScaler=.05,this.moveScaler=1,this.buttonStat=-1;var n=this;this.bMouseDownInScene=!1,document.addEventListener("wheel",(function(e){!function(e){var t=n.cameraForward();t.multiplyScalar(-5*e*n.moveScaler);var r=n.cameraPosition();r.add(t),n.camera.position.copy(r),r.add(n.camera.getWorldDirection()),n.camera.lookAt(r)}(e.deltaY)}),!1),document.addEventListener("mousemove",(function(e){if(i.style.display="none",!n.bMouseDownInScene)return void(n.preAbs=void 0);if(void 0===n.preAbs)return void(n.preAbs=new THREE.Vector2(e.clientX,e.clientY));var t=e.clientX-n.preAbs.x,r=e.clientY-n.preAbs.y;n.preAbs.set(e.clientX,e.clientY),n.buttonStat===THREE.MOUSE.LEFT?function(e,t){var r,i,a,o=n.cameraLookAt(),s=n.cameraRight(),l=-e*n.rotationScaler,u=t*n.rotationScaler;i=n.cameraPosition(),r=w(s,u),i=x(o,r,i);var c=(a=n.cameraUp()).y<0?-1:a.y>0?1:0,h=new THREE.Vector3;h.set(0,c,0),r=w(h,l),i=x(o,r,i),s.applyQuaternion(r);var d=n.cameraLookAt();d.sub(i);var f=d.length();d.divideScalar(f),(a=new THREE.Vector3).crossVectors(d,s),n.camera.position.copy(i),n.camera.up.copy(a),d.multiplyScalar(f),i.add(d),n.camera.lookAt(i)}(t,r):n.buttonStat===THREE.MOUSE.MIDDLE&&function(e,t){var r=n.cameraLookAt(),i=n.cameraRight().clone();i.multiplyScalar(e*n.moveScaler*2);var a=n.cameraPosition();a.add(i),r.add(i),(i=n.cameraUp()).multiplyScalar(t*n.moveScaler*2),a.add(i),r.add(i),n.camera.position.copy(a),n.camera.lookAt(r)}(t,r)}),!1),r.addEventListener("mousedown",(function(e){n.bMouseDownInScene=!0,(e.button===THREE.MOUSE.LEFT||e.button===THREE.MOUSE.MIDDLE)&&(n.pager.suspendPaging=!0,n.pager.cameraChanged(),n.buttonStat=e.button);if(e.button===THREE.MOUSE.LEFT){pickMesh2(jyMap,new THREE.Vector2(e.clientX,e.clientY));var t=pickMesh(jyMap,new THREE.Vector2(e.clientX,e.clientY));if(selectedObjs.clear(),selectedObjs.add(t.objId),E.log("id: "+t.objId+" fileName: "+t.fileName),0===t.objId)return void(i.style.display="none");void 0!==t.fileName&&(i.style.display="block",i.style.bottom=window.innerHeight-e.clientY+"px",i.style.left=e.clientX+"px",i.textContent=t.fileName)}}),!1),document.addEventListener("mouseup",(function(e){n.bMouseDownInScene=!1,(e.button===THREE.MOUSE.LEFT||e.button===THREE.MOUSE.MIDDLE)&&(n.pager.suspendPaging=!1,n.buttonStat=-1)}),!1),document.addEventListener("mouseleave",(function(e){n.pager.suspendPaging=!1}),!1);var i=document.createElement("div");i.className="backdrop",i.style.display="none",i.style.position="absolute",i.style.bottom="0",i.style.left="0",i.style["pointer-events"]="none",i.style.padding="4px",i.style.backgroundColor="black",r.appendChild(i)}T.prototype={constructor:T,cameraLookAt:function(){var e=this.camera.getWorldDirection().clone();return e.add(this.camera.position),e},cameraPosition:function(){return this.camera.position.clone()},cameraForward:function(){var e=this.camera.getWorldDirection().clone();return e.normalize(),e},cameraLookAtDist:function(){return this.camera.getWorldDirection().clone().length()},cameraUp:function(){var e=this.camera.up.clone();return e.normalize(),e},cameraRight:function(){var e=this.cameraForward(),t=new THREE.Vector3;return t.crossVectors(this.camera.up,e),t.normalize(),t},setPosition:function(e,t,r){this.camera.position=e,this.camera.up=r,this.camera.lookAt(t)},getPosition:function(){var e=this.camera.position,t=this.camera.up;return[e,this.cameraLookAt(),t]}};const _=T;var S=r(7),M=r.n(S),R=r(5108);function A(e,t,r,n,i){var a=this;this.featureInfo=e,this.showState=t,this.debug=i,this.group=new THREE.Group,r.add(this.group),this.camera=n,this.frstLast=new THREE.Frustum,this.tilesLast=new Map,this.id2tilenode=new Map,this.id2tileBoundBox=new Map,this.maxLevel=10,this.levels=[],this.levels.push(2500),this.levels.push(1500),this.levels.push(1e3),this.levels.push(600),this.levels.push(300),this.levels.push(100),this.levels.push(70),this.levels.push(40),this.levels.push(20),this.levels.push(10),a.rangesBoundingBox=new THREE.Box2(new THREE.Vector2(a.featureInfo.minx,a.featureInfo.miny),new THREE.Vector2(a.featureInfo.maxx,a.featureInfo.maxy));var o={service:"wms",request:"getmap",version:a.featureInfo.version,layers:a.featureInfo.layers,format:"image/jpeg",width:256,height:256,srs:a.featureInfo.srs};a.paramsGetMap=a.featureInfo.featureName+M().param(o)}A.prototype={constructor:A,splitTiles:function(){var e,t,r=this;if(r.showState){if(r.frst=function(){var e=new THREE.Matrix4;e.multiplyMatrices(r.camera.projectionMatrix,r.camera.matrixWorldInverse);var t=new THREE.Frustum;return t.setFromMatrix(e),t}(),r.tiles=new Map,u.prototype={constructor:u,getId:function(){var e=this.box.getCenter();return e.x+"_"+e.y+"_"+this.level}},!(e=r.frst,t=r.frstLast,e.planes[0].equals(t.planes[0])&&e.planes[1].equals(t.planes[1])&&e.planes[2].equals(t.planes[2])&&e.planes[3].equals(t.planes[3])&&e.planes[4].equals(t.planes[4])&&e.planes[5].equals(t.planes[5]))){r.frstLast=r.frst;var n=function(){var e=new u(0,r.rangesBoundingBox);function t(e){var t=new THREE.Box3(new THREE.Vector3(r.featureInfo.offset.x+e.min.x,r.featureInfo.offset.y+0,r.featureInfo.offset.z+e.min.y),new THREE.Vector3(r.featureInfo.offset.x+e.max.x,r.featureInfo.offset.y+0,r.featureInfo.offset.z+e.max.y));return r.frst.intersectsBox(t)}return function e(n){var i=new THREE.Box3(new THREE.Vector3(r.featureInfo.offset.x+n.box.min.x,r.featureInfo.offset.y+0,r.featureInfo.offset.z+n.box.min.y),new THREE.Vector3(r.featureInfo.offset.x+n.box.max.x,r.featureInfo.offset.y+0,r.featureInfo.offset.z+n.box.max.y)),a=i.distanceToPoint(r.camera.position);if(n.level>=r.maxLevel||n.level>=r.levels.length||n.level<r.levels.length&&a>r.levels[n.level])return void(t(n.box)&&(n.distance2Eye=a,r.tiles.set(n.getId(),n)));var o=n.box.getSize();o.x/=2,o.y/=2;var s=new u(n.level+1,new THREE.Box2(new THREE.Vector2(n.box.min.x,n.box.getCenter().y),new THREE.Vector2(n.box.min.x+o.x,n.box.getCenter().y+o.y)));t(s.box)&&e(s);var l=new u(n.level+1,new THREE.Box2(n.box.getCenter(),new THREE.Vector2(n.box.getCenter().x+o.x,n.box.getCenter().y+o.y)));t(l.box)&&e(l);var c=new u(n.level+1,new THREE.Box2(n.box.min,new THREE.Vector2(n.box.min.x+o.x,n.box.min.y+o.y)));t(c.box)&&e(c);var h=new u(n.level+1,new THREE.Box2(new THREE.Vector2(n.box.getCenter().x,n.box.min.y),new THREE.Vector2(n.box.getCenter().x+o.x,n.box.min.y+o.y)));t(h.box)&&e(h)}(e),r.tiles.set(e.getId(),e),r.tiles}(),i=[],a=[];for(let[e,t]of n)r.tilesLast.has(e)||i.push(t);for(let[e,t]of r.tilesLast)n.has(e)||a.push(t);if(0!==i.length||0!==a.length){r.tilesLast=n,i.sort((function(e,t){return e.distance2Eye<t.distance2Eye}));for(let e=0;e<i.length;++e){c(o=i[e])}if(void 0!==r.group)for(let e=0;e<a.length;++e){var o=a[e],s=r.id2tilenode.get(o.getId());if(null!=s&&(r.id2tilenode.delete(o.getId()),r.group.remove(s),s.geometry.dispose(),s.material.map.dispose(),s.material.dispose(),r.debug)){var l=r.id2tileBoundBox.get(o.getId());if(null==l)continue;r.id2tileBoundBox.delete(o.getId()),r.group.remove(l)}}}}}else 0===r.group.children.length&&0===r.tilesLast.size&&0===r.id2tilenode.size&&0===r.id2tileBoundBox.size||(r.group.children=[],r.frstLast=new THREE.Frustum,r.tilesLast=new Map,r.id2tilenode=new Map,r.id2tileBoundBox=new Map);function u(e,t,r){this.box=t,this.level=0|e,this.distance2Eye=0|r}function c(e){var t={bbox:"EPSG:4326"===r.featureInfo.srs||"EPSG:32760"===r.featureInfo.srs||"EPSG:31466"===r.featureInfo.srs?e.box.min.x+r.featureInfo.center.x+","+(r.featureInfo.center.y-e.box.max.y)+","+(e.box.max.x+r.featureInfo.center.x)+","+(r.featureInfo.center.y-e.box.min.y):e.box.min.x+r.featureInfo.center.x+","+(e.box.min.y+r.featureInfo.center.y)+","+(e.box.max.x+r.featureInfo.center.x)+","+(e.box.max.y+r.featureInfo.center.y)},n=r.paramsGetMap+"&"+M().param(t),i=new THREE.TextureLoader;i.setCrossOrigin("anonymous");var a=i.load(n,(function(e){e.isTextureReady=!0}));a.isTextureReady=!1;var o=new THREE.MeshPhongMaterial({color:16777215,map:a});o.flatShading=!1,o.polygonOffset=!0,o.polygonOffsetFactor=1,o.level=10*(r.maxLevel-e.level),o.polygonOffsetUnits=10*(r.maxLevel+e.level+1);var s=e.box.getSize(),l=new THREE.PlaneBufferGeometry(s.x,s.y);l.computeBoundingSphere();var u=new THREE.Mesh(l,o);u.rotation.x=-Math.PI/2,u.position.x=e.box.getCenter().x,u.position.z=e.box.getCenter().y,u.position.x+=r.featureInfo.offset.x,u.position.y=0+r.featureInfo.offset.y,u.position.z+=r.featureInfo.offset.z;if(u.onBeforeRender=function(e,t,r,n,i,a){i.map.isTextureReady&&i.polygonOffsetUnits!==i.level&&(i.polygonOffsetUnits=i.level,i.needsUpdate=!0)},r.group.add(u),r.id2tilenode.set(e.getId(),u),r.debug){var c=new THREE.LineSegments(new THREE.EdgesGeometry(l),new THREE.LineBasicMaterial({color:16711680}));c.rotation.x=u.rotation.x,c.position.x=u.position.x,c.position.y=u.position.y+.1,c.position.z=u.position.z,r.group.add(c),r.id2tileBoundBox.set(e.getId(),c)}}}};var C=!1,L=!1;function O(){}O.WMSLayer=A,O.initWmsGui=function(){if(!L){L=!0;var e={pauseUpdate:function(){C=!C}},t=(new(a().GUI)).addFolder("WMS");t.add(e,"pauseUpdate"),t.open()}},O.getWmsCapabilities=function(e){var t=e.featureName+M().param({service:"wms",request:"getCapabilities",version:"1.3.0"}),r=new XMLHttpRequest;if(r.open("get",t,!0),r.send(),r.onreadystatechange=function(){if(4==r.readyState&&200==r.status){var e,t,n,i,a,o,s=r.responseXML;R.log(s);for(var l=s.getElementsByTagName("Layer")[0],u=0;u<l.children.length;++u){var c=l.children[u];if("Layer"===c.nodeName&&c.getAttribute("queryable")){for(var h=0;h<c.children.length;++h){var d=c.children[h];if("Name"===d.nodeName)a=d.innerHTML;else if("BoundingBox"===d.nodeName){var f=d;if(-1===(o=f.getAttribute("CRS")).indexOf("EPSG"))continue;e=f.getAttribute("minx"),t=f.getAttribute("miny"),n=f.getAttribute("maxx"),i=f.getAttribute("maxy")}}R.log("layerName: "+a+" crs "+o+" minx "+e+" miny "+t+" maxx "+n+" maxy "+i)}}}},6===e.featureId){var n=(o=new THREE.Box2(new THREE.Vector2(-180,-180),new THREE.Vector2(180,180))).getCenter();(s=o.getSize()).x*=.5,s.y*=.5;var i=new THREE.Vector3(n.x,0,n.y),a=new THREE.Vector3(i.x-n.x,i.y-0,i.z-n.z);e.version="1.1.1",e.layers="gebco_latest",e.srs="EPSG:4326",e.center=n,e.offset=a,e.minx=-s.x,e.miny=-s.y,e.maxx=+s.x,e.maxy=+s.y}if(7===e.featureId){n=(o=new THREE.Box2(new THREE.Vector2(-124.73142200000001,24.955967),new THREE.Vector2(-66.969849,49.371735))).getCenter();(s=o.getSize()).x*=.5,s.y*=.5;i=new THREE.Vector3(n.x,0,n.y),a=new THREE.Vector3(i.x-n.x,i.y-0,i.z-n.z);e.version="1.1.0",e.layers="topp:states",e.srs="EPSG:4326",e.center=n,e.offset=a,e.minx=-s.x,e.miny=-s.y,e.maxx=+s.x,e.maxy=+s.y}if(8===e.featureId){n=(o=new THREE.Box2(new THREE.Vector2(-180,-90),new THREE.Vector2(180,90))).getCenter();(s=o.getSize()).x*=.5,s.y*=.5;i=new THREE.Vector3(n.x,0,n.y),a=new THREE.Vector3(i.x-n.x,i.y-0,i.z-n.z);e.version="1.1.0",e.layers="nurc:Arc_Sample",e.srs="EPSG:4326",e.center=n,e.offset=a,e.minx=-s.x,e.miny=-s.y,e.maxx=+s.x,e.maxy=+s.y}if(9===e.featureId){n=(o=new THREE.Box2(new THREE.Vector2(570833.824993093,2540572.453986135),new THREE.Vector2(574002.7158638712,2544115.3133447687))).getCenter();(s=o.getSize()).x*=.5,s.y*=.5;i=new THREE.Vector3(572224,-50,2542416),a=new THREE.Vector3(i.x-n.x,i.y-0,i.z-n.z);e.version="1.1.0",e.layers="jy:geotiff_coverage_jy_hd_yx",e.srs="EPSG:32760",e.center=n,e.offset=a,e.minx=-s.x,e.miny=-s.y,e.maxx=+s.x,e.maxy=+s.y}if(10===e.featureId){var o,s;n=(o=new THREE.Box2(new THREE.Vector2(377135.07343843114,2947628.764517688),new THREE.Vector2(388336.6984193213,2954335.503257298))).getCenter();(s=o.getSize()).x*=.5,s.y*=.5;i=new THREE.Vector3(n.x,0,n.y),a=new THREE.Vector3(i.x-n.x,i.y-0,i.z-n.z);e.version="1.1.0",e.layers="jy:geotiff_coverage_dom",e.srs="EPSG:31466",e.center=n,e.offset=a,e.minx=-s.x,e.miny=-s.y,e.maxx=+s.x,e.maxy=+s.y}},O.pauseWmsUpdate=C;const I=O;r(1092),r(9698);var P=r(5108);THREE.ZmeshLoader=function(e){this.manager=void 0!==e?e:THREE.DefaultLoadingManager,this.waterMaterial=null,this.material=new THREE.ShaderMaterial(THREE.ZMeshShader),this.material.name="ZmeshMaterial",this.material.extensions.derivatives=!0,this.material.extensions.shaderTextureLOD=!0,this.material.transparent=!0,this.fileName2Texture=new Map},THREE.ZmeshLoader.prototype={constructor:THREE.ZmeshLoader,load:function(e,t,r,n){var i=this,a=new THREE.FileLoader(i.manager);return a.setResponseType("arraybuffer"),a.load(e,(function(r){t(i.parse(e,r))}),r,n)},parse:function(e,t){this.state=this.createParserState(),this.offset=0,this.dv=new DataView(t),this.littleEndian=!0;this.getChars(8);for(var r=this.getMark();r!=K;){var n=this.getByteSize();if(r==X)this.parseBox();else if(r==V)this.parseMaterial(n);else if(r==Y)this.parseMesh(n);else{var i=this.getChars(n);P.error("Mark can not parse"),P.error(r),P.error(i)}r=this.getMark()}null===this.state&&P.error("THREE.ZmeshLoader.createParserState()null === state");for(var a=new THREE.Group,o=0;o<this.state.objects.length;++o){var s=this.state.objects[o],l=new THREE.BufferGeometry;l.addAttribute("position",new THREE.BufferAttribute(new Float32Array(s.vertices),3)),l.computeBoundingBox(),l.computeBoundingSphere();var u,c,h=s.indexArr.length,d=new THREE.BufferAttribute(new(h>65535?Uint32Array:Uint16Array)(h),1);h/=3;for(var f=0;f<h;++f)d.setX(3*f+0,s.indexArr[3*f+0]),d.setX(3*f+1,s.indexArr[3*f+2]),d.setX(3*f+2,s.indexArr[3*f+1]);if(l.setIndex(d),s.normals.length>0?l.addAttribute("normal",new THREE.BufferAttribute(new Float32Array(s.normals),3)):l.computeVertexNormals(),s.uvs.length>0&&l.addAttribute("uv",new THREE.BufferAttribute(new Float32Array(s.uvs),2)),s.uvRange.length>0&&l.addAttribute("uvRange",new THREE.BufferAttribute(new Float32Array(s.uvRange),4)),s.uvInfo.length>0&&l.addAttribute("uvInfo",new THREE.BufferAttribute(new Float32Array(s.uvInfo),3)),J!==s.specialType){if(s.mtlID>=this.state.materials.length)s.mtlID=this.state.materials.length,u=new THREE.MeshPhongMaterial({color:16711680,shading:THREE.SmoothShading}),c=new THREE.Mesh(l,u),P.error(e+" mtlID is beyond range");else{u=this.material,(c=new THREE.Mesh(l,u)).matrixAutoUpdate=!1;var p=this.state.materials[s.mtlID];if(p.diffuseTex){var m;if(this.fileName2Texture.has(p.diffuseTex))++(m=this.fileName2Texture.get(p.diffuseTex)).referenceCount;else{var g=THREE.Loader.Handlers.get(p.diffuseTex);null===g&&(g=new THREE.TextureLoader(this.manager)),(m=g.load(e.substring(0,e.lastIndexOf("/")+1)+p.diffuseTex,(function(e){e.isTextureReady=!0}))).isTextureReady=!1,m.fileName=p.diffuseTex,m.referenceCount=1,this.fileName2Texture.set(p.diffuseTex,m)}c.userData.tDiffuse=m}else c.userData.tDiffuse=null}a.add(c)}else u=null!==this.waterMaterial?this.waterMaterial:new THREE.MeshPhongMaterial({color:255,shading:THREE.SmoothShading}),(c=new THREE.Mesh(l,u)).isWater=!0,a.add(c)}return this.state=null,this.dv=null,a},createParserState:function(){return{ptMin:new THREE.Vector3,ptMax:new THREE.Vector3,objects:[],materials:[],object:function(){return{vertices:[],normals:[],uvs:[],uvRange:[],uvInfo:[],indexArr:[],name:"",mtlID:0,specialType:Q}},material:function(){return{diffuseTex:""}}}},parseBox:function(){this.state.ptMin=this.getPoint(),this.state.ptMax=this.getPoint();var e=this.state.ptMin[2];this.state.ptMin[2]=-this.state.ptMax[2],this.state.ptMax[2]=-e},parseMaterial:function(e){for(var t=0,r=this.state.material();e>t;){t+=this.getByteSize();var n=this.getInt32(),i=this.getInt32(),a=this.getChars(i);this.getFloat32Array(4);n==$&&(r.diffuseTex=a)}this.state.materials.push(r)},parseInst:function(e){for(var t=this.state.object(),r=0,n=0,i=0;e>r;)if(n=this.getMark(),r+=(i=this.getByteSize())+8,n==z)this.getChars(i);else if(n==B)this.getInt32(),this.getFloat32Array(i/4-1);else{var a=this.getChars(i);P.error("Mark can not parse"),P.error(n),P.error(a)}this.state.objects.push(t)},parseMesh:function(e){for(var t=this.state.object(),r=0,n=0,i=0;e>r;)if(n=this.getMark(),r+=(i=this.getByteSize())+8,n==W){var a=this.getChars(i);t.name=a}else if(n==H){t.vertices=this.getFloat32Array(i/4);var o=t.vertices.length;o/=3;for(var s=0;s<o;++s)t.vertices[3*s+2]=-t.vertices[3*s+2]}else if(n==U)this.getInt32Array(i/4);else if(n==k)t.normals=this.getFloat32Array(i/4);else if(n==N)t.uvs=this.getFloat32Array(i/4);else if(n==D)t.uvRange=this.getFloat32Array(i/4);else if(n==F)t.uvInfo=this.getFloat32Array(i/4);else if(n==G)t.mtlID=this.getInt32();else if(n==q)t.specialType=this.getInt32();else if(n==j)t.indexArr=this.getInt32Array(i/4);else{var l=this.getChars(i);P.error("Mark can not parse"),P.error(n),P.error(l)}this.state.objects.push(t)},getInt32Array:function(e){for(var t=[];e>0;){var r=this.getInt32();t.push(r),e--}return t},getInt32:function(){var e=this.dv.getInt32(this.offset,this.littleEndian);return this.offset+=4,e},getFloat32Array:function(e){for(var t=[];e>0;){var r=this.getFloat32();t.push(r),e--}return t},getFloat32:function(){var e=this.dv.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e},getPoint:function(){return this.getFloat32Array(3)},getByteSize:function(){return this.getMark()},getMark:function(){var e=this.dv.getUint32(this.offset,this.littleEndian);return this.offset+=4,e},getUint8:function(){var e=this.dv.getUint8(this.offset);return this.offset+=1,e},getChars:function(e){for(var t="";e>0;){var r=this.getUint8();e--,t+=String.fromCharCode(r)}return t}},THREE.ZInstLoader=function(e){this.manager=void 0!==e?e:THREE.DefaultLoadingManager,this.instanceSeedMaterial=new THREE.ShaderMaterial(THREE.ZMeshShader),this.instanceSeedMaterial.name="ZInstanceSeedMaterial",this.instanceSeedMaterial.extensions.derivatives=!0,this.instanceSeedMaterial.extensions.shaderTextureLOD=!0,this.instanceSeedMaterial.transparent=!0,this.instanceSeedMaterial.defines.INSTANCE="",this.instanceSeedMaterial.defines.BILLBOARD="",this.instanceSeedMaterial.side=THREE.DoubleSide,this.instName2Seed=new Map},THREE.ZInstLoader.prototype={constructor:THREE.ZInstLoader,load:function(e,t,r,n){var i=this,a=new THREE.FileLoader(i.manager);return a.setResponseType("arraybuffer"),a.load(e,(function(r){i.parse(e,r,t)}),r,n)},parse:function(e,t,r){this.state=this.createParserState(),this.offset=0,this.dv=new DataView(t),this.littleEndian=!0;this.getChars(8);for(var n=this.getMark();n!=K;){var i=this.getByteSize();if(n==X)this.parseBox();else if(n==Z)this.parseInst(i);else{var a=this.getChars(i);P.error("Mark can not parse"),P.error(n),P.error(a)}n=this.getMark()}for(var o=0;o<this.state.objects.length;++o){var s=this.state.objects[o];if(this.instName2Seed.has(s.instName)){var l=this.instName2Seed.get(s.instName);this.doLoadSeed(r,s.mxBuffer,s.instName,l)}else{THREE.Loader.Handlers.get(s.instName).load(e.substring(0,e.lastIndexOf("/")+1)+s.instName,this.doLoadSeed.bind(this,r,s.mxBuffer,s.instName))}}},doLoadSeed:function(e,t,r,n){var i=new THREE.Group;this.instName2Seed.has(r)||this.instName2Seed.set(r,n);for(var a=0;a<n.children.length;++a){var o=n.children[a],s=o.geometry,l=new THREE.InstancedBufferGeometry;l.addAttribute("position",s.attributes.position),l.setIndex(s.index),l.addAttribute("normal",s.attributes.normal),l.addAttribute("uv",s.attributes.uv),l.addAttribute("uvRange",s.attributes.uvRange),l.addAttribute("uvInfo",s.attributes.uvInfo);var u=t.length/16,c=new THREE.InstancedBufferAttribute(new Float32Array(3*u),3,1),h=new THREE.InstancedBufferAttribute(new Float32Array(3*u),3,1),d=new THREE.InstancedBufferAttribute(new Float32Array(3*u),3,1),f=new THREE.InstancedBufferAttribute(new Float32Array(3*u),3,1);for(let e=0,r=c.count;e<r;++e){var p=t.slice(16*e,16*e+16);c.setXYZ(e,p[0],p[1],-p[2]),h.setXYZ(e,p[4],p[5],-p[6]),d.setXYZ(e,p[8],p[9],-p[10]),f.setXYZ(e,p[12],p[13],-p[14])}l.addAttribute("mcol0",c),l.addAttribute("mcol1",h),l.addAttribute("mcol2",d),l.addAttribute("mcol3",f);var m=new THREE.Mesh(l,this.instanceSeedMaterial);m.userData.tDiffuse=o.userData.tDiffuse,l.boundingBox=new THREE.Box3,l.boundingBox.setFromArray(f.array);var g=l.boundingBox.min.add(s.boundingBox.min),v=l.boundingBox.max.add(s.boundingBox.max);l.boundingBox.expandByPoint(g),l.boundingBox.expandByPoint(v),l.boundingSphere=new THREE.Sphere,l.boundingSphere.center=l.boundingBox.getCenter(),l.boundingSphere.radius=l.boundingSphere.center.distanceTo(l.boundingBox.min),i.add(m)}e(i)},createParserState:function(){return{ptMin:new THREE.Vector3,ptMax:new THREE.Vector3,objects:[],object:function(){return{instName:"",mxBuffer:[]}}}},parseBox:function(){this.state.ptMin=this.getPoint(),this.state.ptMax=this.getPoint();var e=this.state.ptMin[2];this.state.ptMin[2]=-this.state.ptMax[2],this.state.ptMax[2]=-e},parseInst:function(e){for(var t=this.state.object(),r=0,n=0,i=0;e>r;)if(n=this.getMark(),r+=(i=this.getByteSize())+8,n==z)t.instName=this.getChars(i);else if(n==B){this.getInt32();t.mxBuffer=this.getFloat32Array(i/4-1)}else{var a=this.getChars(i);P.error("Mark can not parse"),P.error(n),P.error(a)}this.state.objects.push(t)},getInt32:function(){var e=this.dv.getInt32(this.offset,this.littleEndian);return this.offset+=4,e},getFloat32Array:function(e){for(var t=[];e>0;){var r=this.getFloat32();t.push(r),e--}return t},getFloat32:function(){var e=this.dv.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e},getPoint:function(){return this.getFloat32Array(3)},getByteSize:function(){return this.getMark()},getMark:function(){var e=this.dv.getUint32(this.offset,this.littleEndian);return this.offset+=4,e},getUint8:function(){var e=this.dv.getUint8(this.offset);return this.offset+=1,e},getChars:function(e){for(var t="";e>0;){var r=this.getUint8();e--,t+=String.fromCharCode(r)}return t}};var H=0,k=1,N=6,U=7,D=9,F=10,B=11,z=12,j=16,V=24,G=25,W=26,q=27,X=32,Y=40,Z=41,K=127,Q=0,J=1,$=6,ee=(r(8854),r(8025),r(5108));
/**
* @file Manages api
* @module SpatiotemporalPlatform-iClient-threejs
* @author imygis <imygis@sina.cn>
* @version 0.0
* @copyright imygis <imygis@sina.cn> All Rights Reserved
* @license GPL
* @todo text describing thing to do.
*/
if("undefined"==typeof SpatiotemporalPlatform)throw"ç¼ºå° SpatiotemporalPlatform";var te=b.prototype.initScene;b.prototype.initScene=function(){var e=this;te.apply(this),e.onUpdateScenes=[updateSceneExample,function(t){if(!I.pauseWmsUpdate)for(var r=0;r<e.wmsLayers.length;++r){e.wmsLayers[r].splitTiles()}}];var t=new THREE.Group;this.sceneRoot.add(t),function(e){let t=new THREE.AmbientLight(3355443);e.add(t);let r=new THREE.DirectionalLight(16777215,1);e.add(r),e.add(new THREE.DirectionalLightHelper(r,200)),new THREE.PointLight(16711680,1).position.set(0,10,0),new THREE.HemisphereLight(16711680,65280).position.set(0,10,0);let n=new THREE.SpotLight(255,1.2,650,Math.PI/6);n.position.set(0,-100,1e3),n.castShadow=!0,n.shadow.mapWidth=1024,n.shadow.mapHeight=1024;let i={ka:.17,hue:.121,saturation:.73,lightness:.66,lhue:.04,lsaturation:.01,llightness:1,lx:.32,ly:.39,lz:.7},o=function(){t.color.setHSL(i.hue,i.saturation,i.lightness*i.ka),r.position.set(i.lx,i.ly,i.lz),r.color.setHSL(i.lhue,i.lsaturation,i.llightness)},s=new(a().GUI);{let e=s.addFolder("ambient Lighting");e.add(i,"hue",0,1,.025).name("hue").onChange(o),e.add(i,"saturation",0,1,.025).name("saturation").onChange(o),e.add(i,"lightness",0,1,.025).name("lightness").onChange(o),e=s.addFolder("directional Lighting"),e.add(i,"lhue",0,1,.025).name("hue").onChange(o),e.add(i,"lsaturation",0,1,.025).name("saturation").onChange(o),e.add(i,"llightness",0,1,.025).name("lightness").onChange(o),e.add(i,"ka",0,1,.025).name("ambient").onChange(o),e=s.addFolder("directional Lighting direction"),e.add(i,"lx",-1,1,.025).name("x").onChange(o),e.add(i,"ly",-1,1,.025).name("y").onChange(o),e.add(i,"lz",-1,1,.025).name("z").onChange(o)}}(t);var r=new THREE.Group;this.sceneRoot.add(r),function(e){let t=new THREE.AxesHelper(1e3);e.add(t);let r=new THREE.GridHelper(2400,120,16729156,4210752);e.add(r),new THREE.PolarGridHelper(300,10);let n=new THREE.MeshPhongMaterial({color:16777215,map:(new THREE.TextureLoader).load("textures/terrain/grasslight-big.jpg")}),i=new THREE.Mesh(new THREE.PlaneBufferGeometry(2048,2048),n);i.material.map.repeat.set(8,8),i.material.map.wrapS=i.material.map.wrapT=THREE.RepeatWrapping,e.add(i);for(var a=new THREE.IcosahedronGeometry(400,4),o=0,s=a.faces.length;o<s;o++)a.faces[o].color.setHex(16777215*Math.random());var l=new THREE.MeshPhongMaterial({vertexColors:THREE.FaceColors,shininess:100});new THREE.Mesh(a,l)}(r);var n=new THREE.Group;this.sceneRoot.add(n),(new THREE.LoadingManager).onProgress=function(e,t,r){ee.log(e,t,r)};var i=new THREE.ZmeshLoader;whiteModelEnable&&(i.material.defines.WHITE_MODEL_ENABLE="");var o=new THREE.ZInstLoader;THREE.Loader.Handlers.add(/\.zmesh$/i,i),THREE.Loader.Handlers.add(/\.zinst$/i,o),THREE.Loader.Handlers.add(/\.dds$/i,new THREE.DDSLoader),THREE.Loader.Handlers.add(/\.dat$/i,new THREE.ObjectlistLoader);!function(){e.pager=new THREE.SceneGraphPager(n,e.camera);var t=[-600,550,1300],r=[0,1,0];e.camera.position.set(t[0],t[1],t[2]),e.camera.up.set(r[0],r[1],r[2]),e.camera.lookAt(new THREE.Vector3);var i=function(){var e={},t=navigator.userAgent.toLowerCase().match(/(msie|firefox|chrome|opera|version).*?([\d.]+)/);return e.browser=t[1].replace(/version/,"'safari"),e.ver=t[2],e}();ee.log("Browser: "+i.browser+", version: "+i.ver);var a=new _(e.camera,e.pager,e.containerElement);a.rotationScaler=.008,a.moveScaler=.1,"firefox"===i.browser&&(a.moveScaler=.4)}();!function(e,t,r){e.context.getExtension("OES_texture_float"),null===e.context.getExtension("EXT_shader_texture_lod")?ee.warn("WebGLRenderer: EXT_shader_texture_lod is not support"):(t.material.defines.EXT_shader_texture_lod_support="",r.instanceSeedMaterial.defines.EXT_shader_texture_lod_support=""),null===e.context.getExtension("WEBGL_compressed_texture_s3tc")&&ee.warn("çº¹çåç¼©æ ¼å¼ DXT ä¸æ¯æ"),null===e.context.getExtension("WEBGL_compressed_texture_etc1")&&ee.warn("çº¹çåç¼©æ ¼å¼ ETC ä¸æ¯æ"),null===e.context.getExtension("WEBGL_compressed_texture_pvrtc")&&ee.warn("çº¹çåç¼©æ ¼å¼ PVRTC ä¸æ¯æ")}(this.renderer,i,o),this.loadScene(n);!function(){var t=(new THREE.TextureLoader).load("lib/textures/waternormals.jpg");t.wrapS=t.wrapT=THREE.RepeatWrapping;var r=new THREE.DirectionalLight(16777215,1);r.position.set(1,1,1).normalize(),e.waterEffect=new THREE.Water_r86(e.renderer,e.camera,e.sceneRoot,{textureWidth:512,textureHeight:512,waterNormals:t,alpha:1,sunDirection:r.position.clone().normalize(),sunColor:16777215,waterColor:7695,distortionScale:50,fog:null!=e.sceneRoot.fog}),n.add(e.waterEffect),i.waterMaterial=e.waterEffect.material;var a=2e3,o=2e3;new THREE.Mesh(new THREE.PlaneBufferGeometry(500*a,500*o),e.waterEffect.material).rotation.x=.5*-Math.PI;e.onUpdateScenes.push((function(t){void 0!==e.waterEffect&&(e.waterEffect.material.uniforms.time.value+=.1/60,e.waterEffect.render())}))}()};var re=b.prototype.updateScene;b.prototype.updateScene=function(){var e=this;re.apply(this),e.clock=e.clock||new THREE.Clock;var t=e.clock.getDelta();this.cameraControls&&this.cameraControls.autoRotate&&this.cameraControls.update(),this.pager.updateCameraChanged(),this.pager.updatePaging();for(let e=0;e<this.onUpdateScenes.length;++e)this.onUpdateScenes[e](t)};b.prototype.updatePass;function ne(e){this._VERSION="0.0.1",ee.log("%cSpatiotemporalPlatform-iClient-threejs %cVERSION: "+this._VERSION,"color: red; font: larger bold","color: purple",e)}b.prototype.updatePass=function(){this.composer.passes=[];let e=new THREE.RenderPass(this.sceneRoot,this.camera);this.composer.addPass(e);let t=new THREE.ShaderPass(THREE.ColorCorrectionShader);t.uniforms.powRGB.value=new THREE.Vector3(1.4,1.4,1.4),t.uniforms.mulRGB.value=new THREE.Vector3(1.2,1.2,1.2),this.composer.addPass(t);let r=new THREE.ShaderPass(THREE.VignetteShader);r.uniforms.darkness.value=1,this.composer.addPass(r);let n=new THREE.ShaderPass(THREE.CopyShader);this.composer.addPass(n),n.renderToScreen=!0},ne.prototype.startupViewer=function(e,t){var r=new b(e,{deferredRendering:!1,renderStatsOn:t.renderStatsOn});window.jyMap=r,r.loadScene=function(e){var r=this;r.wmsLayers=[];let n=t.layerNames;for(let t=0;t<n.length;++t){var i=n[t].bShow,a={featureId:n[t].featureId,featureName:n[t].featureName,featureKeyName:n[t].featureKeyName};if("wms"!==n[t].featureKeyName)r.pager.addFeatureInfo(a,i,!0);else{I.initWmsGui(),I.getWmsCapabilities(a);var o=new I.WMSLayer(a,i,e,r.pager.camera,!0);r.wmsLayers.push(o)}}},function e(){requestAnimationFrame(e);let t=performance.now();r.frame();let n=1e3/30-(performance.now()-t);if(void 0!==r.pager)if(n>0)for(var i=performance.now(),a=0;a<n&&r.pager.executeTask();)a=performance.now()-i;else r.pager.executeTask();void 0!==r.octree&&r.octree.update()}()},SpatiotemporalPlatform.SPThreejs=ne;const ie=ne})(),n})()));
//# sourceMappingURL=three.js.map